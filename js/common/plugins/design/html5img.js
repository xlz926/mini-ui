/*
* GoJS? v1.0.8 JavaScript Library for HTML Canvas Diagrams
* Northwoods Software?, http://www.nwoods.com/
*
* Copyright ? 1998-2012 by Northwoods Software Corporation. All Rights Reserved.
* THIS SOFTWARE IS LICENSED. THE LICENSE AGREEMENT IS AT: http://www.gojs.net/1.0.8/doc/license.html.
*/
(function(window) {
    var f = void 0,
    h = !0,
    m = null,
    p = !1;
    function aa() {
        return function() {}
    }
    function ba(a) {
        return function(b) {
            this[a] = b
        }
    }
    function s(a) {
        return function() {
            return this[a]
        }
    }
    function ca(a) {
        return function() {
            return a
        }
    }
    var da, ea = {};
    if (document.createElement("canvas").getContext === f) throw window.console && window.console.log("The HTML Canvas element is not supported in this browser,or this browser is in Compatibility mode."),
    Error("The HTML Canvas element is not supported in this browser,or this browser is in Compatibility mode.");
    if (!Object.prototype.__defineGetter__ && !Object.defineProperty) throw Error("GoJS requires a newer version of JavaScript");
    Object.prototype.__defineGetter__ && !Object.defineProperty && (Object.defineProperty = function(a, b, c) {
        c.get && a.__defineGetter__(b, c.get);
        c.set && a.__defineSetter__(b, c.set)
    });
    Object.prototype.__lookupGetter__ && !Object.getOwnPropertyDescriptor && (Object.getOwnPropertyDescriptor = function(a, b) {
        return {
            get: a.__lookupGetter__(b),
            set: a.__lookupSetter__(b)
        }
    });
    Object.getPrototypeOf || (Object.getPrototypeOf = function(a) {
        return a.__proto__
    });
    Object.isFrozen || (Object.isFrozen = function(a) {
        return a.dE === h
    });
    Object.freeze || (Object.freeze = function(a) {
        a.dE = h
    });
    Array.isArray || (Array.isArray = function(a) {
        return "[object Array]" === Object.prototype.toString.call(a)
    });
    Function.prototype.bind || (Function.prototype.bind = function(a) {
        function b() {
            return g.apply(a, e.concat(d.call(arguments)))
        }
        function c() {}
        var d = Array.prototype.slice,
        e = d.call(arguments, 1),
        g = this;
        c.prototype = this.prototype;
        b.prototype = new c;
        return b
    });
    for (var ga = 0,
    ia = ["ms", "moz", "webkit", "o"], ka = 0; ka < ia.length && !window.requestAnimationFrame; ++ka) window.requestAnimationFrame = window[ia[ka] + "RequestAnimationFrame"],
    window.cancelAnimationFrame = window[ia[ka] + "CancelAnimationFrame"] || window[ia[ka] + "CancelRequestAnimationFrame"];
    window.requestAnimationFrame || (window.requestAnimationFrame = function(a) {
        var b = (new Date).getTime(),
        c = Math.max(0, 16 - (b - ga)),
        d = window.setTimeout(function() {
            a(b + c)
        },
        c);
        ga = b + c;
        return d
    });
    window.cancelAnimationFrame || (window.cancelAnimationFrame = function(a) {
        clearTimeout(a)
    });
    var t = {
        WE: p,
        BI: p,
        Ky: p,
        aC: p,
        UG: p,
        trace: aa(),
        VE: p,
        assert: p,
        hI: m,
        rI: aa(),
        tI: aa(),
        sI: aa(),
        qI: aa(),
        yI: aa(),
        uI: aa(),
        wI: aa(),
        vI: aa(),
        lI: p,
        bK: p,
        XJ: p,
        YJ: p,
        tF: p,
        xI: aa()
    },
    t = m;
    ea.Debug = m;
    var v = {
        sw: {},
        Qz: 0,
        cE: {},
        Rt: document.createElement("canvas").getContext("2d"),
        St: "",
        sx: [],
        Gt: m,
        Jz: [],
        hx: "ontouchstart" in window,
        HA: "ongesturestart" in window,
        Hz: p,
        g: function(a) {
            t && t.VE && alert(a);
            throw Error(a);
        },
        v: function(a, b) {
            if (a.Ma) {
                var c = "The object is frozen, so its properties cannot be set: " + a.toString();
                b !== f && (c += " to value: " + b);
                v.g(c)
            }
        },
        c: function(a, b, c, d) {
            a instanceof b || (c = v.eh(c), d !== f && (c += "." + d), v.Ac(a, b, c))
        },
        e: function(a, b, c, d) {
            typeof a !== b && (c = v.eh(c), d !== f && (c += "." + d), v.Ac(a, b, c))
        },
        j: function(a, b, c) {
            isFinite(a) || (b = v.eh(b), c !== f && (b += "." + c), v.g(b + " must be a real number and not NaN or Infinity: " + a))
        },
        Va: function(a, b, c, d) {
            if (! (a instanceof na) || a.Rd !== b) c = v.eh(c),
            d !== f && (c += "." + d),
            v.Ac(a, "a constant of class " + v.Si(b), c)
        },
        Ac: function(a, b, c, d) {
            b = v.eh(b);
            c = v.eh(c);
            d !== f && (c += "." + d);
            v.g(c + " value is not an instance of " + b + ": " + a)
        },
        ha: function(a, b, c, d) {
            c = v.eh(c);
            d !== f && (c += "." + d);
            v.g(c + " is not in the range " + b + ": " + a)
        },
        trace: function(a) {
            window && window.console && window.console.log(a);
            t && t.UG && v.g(a)
        },
        Oa: function(a) {
            return "object" === typeof a && a !== m
        },
        isArray: function(a) {
            return Array.isArray(a) || a instanceof NodeList || a instanceof HTMLCollection
        },
        qu: function(a, b, c) {
            v.isArray(a) || v.Ac(a, "Array or NodeList or HTMLCollection", b, c)
        },
        Eb: function(a) {
            return a.length
        },
        qb: function(a, b) {
            return a[b]
        },
        UE: function(a, b, c) {
            Array.isArray(a) ? a[b] = c: v.g("Cannot replace an object in an HTMLCollection or NodeList at " + b)
        },
        Gx: function(a, b) {
            if (Array.isArray(a)) return a.indexOf(b);
            for (var c = a.length,
            d = 0; d < c; d++) if (a[d] === b) return d;
            return - 1
        },
        Qh: function(a, b, c) {
            Array.isArray(a) ? b >= a.length ? a.push(c) : a.splice(b, 0, c) : v.g("Cannot insert an object into an HTMLCollection or NodeList: " + c + " at " + b)
        },
        Rh: function(a, b) {
            Array.isArray(a) ? b >= a.length ? a.pop() : a.splice(b, 1) : v.g("Cannot remove an object from an HTMLCollection or NodeList at " + b)
        },
        sz: 1,
        Ob: function(a) {
            a.__gohashid = v.sz++
        },
        Dn: function(a) {
            var b = a.__gohashid;
            b === f && (b = v.sz++, a.__gohashid = b);
            return b
        },
        kc: function(a) {
            return a.__gohashid
        },
        a: function(a, b, c) {
            "name" !== b && "length" !== b && (a[b] = c)
        },
        H: function(a, b) {
            b.yz = a;
            ea[a] = b
        },
        pa: function(a, b) {
            function c() {}
            c.prototype = b.prototype;
            a.prototype = new c;
            a.prototype.constructor = a
        },
        defineProperty: function(a, b, c, d, e) {
            v.e(a, "function", "Util.defineProperty:classfunc");
            v.e(b, "object", "Util.defineProperty:propname");
            v.e(c, "function", "Util.defineProperty:getter");
            v.e(d, "function", "Util.defineProperty:setter");
            c = {
                get: c,
                set: d
            };
            if (e !== f) for (var g in e) c[g] = e[g];
            for (var i in b) Object.defineProperty(a.prototype, i, c),
            e = Object.getOwnPropertyDescriptor(a.prototype, i),
            b[i] && e && Object.defineProperty(a.prototype, b[i], e)
        },
        m: function(a, b, c, d) {
            v.e(a, "function", "Util.defineReadOnlyProperty:classfunc");
            v.e(b, "object", "Util.defineReadOnlyProperty:propname");
            v.e(c, "function", "Util.defineReadOnlyProperty:getter");
            c = {
                get: c,
                set: function(a) {
                    v.g("The property " + b + " is read-only and cannot be set to " + a)
                }
            };
            if (d !== f) for (var e in d) c[e] = d[e];
            for (var g in b) Object.defineProperty(a.prototype, g, c),
            d = Object.getOwnPropertyDescriptor(a.prototype, g),
            b[g] && d && Object.defineProperty(a.prototype, b[g], d)
        },
        pd: function(a, b) {
            for (var c in b) b[c] = h;
            a.prototype.hE = b
        },
        eh: function(a) {
            return a === f ? "": "string" === typeof a ? a: "function" === typeof a ? v.Si(a) : a === m ? "*": ""
        },
        Si: function(a) {
            return "function" === typeof a ? a.yz: "object" === typeof a && a.constructor ? a.constructor.yz: typeof a
        },
        l: function(a, b, c) {
            v.e(a, "function", "Util.defineEnumValue:classfunc");
            v.e(b, "string", "Util.defineEnumValue:name");
            v.e(c, "number", "Util.defineEnumValue:num");
            c = new na(a, b, c);
            Object.freeze(c);
            a[b] = c;
            var d = a.rz;
            d || (d = new oa("string", na), a.rz = d);
            d.add(b, c);
            return c
        },
        wl: function(a, b) {
            if (!b) return m;
            v.e(a, "function", "Util.findEnumValueForName:classfunc");
            v.e(b, "string", "Util.findEnumValueForName:name");
            var c = a.rz;
            return ! c ? m: c.ca(b)
        },
        dF: function(a, b, c, d) {
            var e = {},
            g;
            for (g in a) {
                for (var i = p,
                j = 1; j < arguments.length; j++) if (arguments[j] === g) {
                    i = h;
                    break
                }
                i || (e[g] = a[g])
            }
            return e
        },
        Za: function(a, b) {
            if (!a || !b) return m;
            var c = f;
            try {
                "function" === typeof b ? c = b(a) : "function" === typeof a.getAttribute ? (c = a.getAttribute(b), c === m && (c = f)) : c = a[b]
            } catch(d) {
                t && v.trace("property get error: " + d.toString())
            }
            return c
        },
        fb: function(a, b, c) {
            if (a && b) try {
                "function" === typeof b ? b(a, c) : "function" === typeof a.setAttribute ? a.setAttribute(b, c) : a[b] = c
            } catch(d) {
                t && v.trace("property set error: " + d.toString())
            }
        },
        Wy: function(a, b) {
            v.e(a, "object", "Setting properties requires Objects as arguments");
            v.e(b, "object", "Setting properties requires Objects as arguments");
            b.constructor !== Object && v.g("Properties must be on a plain Object, not: " + b.toString());
            var c = t;
            c || (t = v);
            var d = a instanceof w,
            e;
            for (e in b) {
                var g = a,
                i = e;
                if (d) {
                    var j = e.indexOf(".");
                    if (0 < j) {
                        var k = e.substring(0, j),
                        g = a.Re(k);
                        g !== m ? i = e.substr(j + 1) : v.g("Unable to find object named: " + k + " in panel " + a.toString() + " when trying to set property: " + e)
                    }
                }
                "_" !== i[0] && !v.my(g, i) && v.g('Trying to set undefined property "' + i + '" on object: ' + g.toString());
                g[i] = b[e];
                "_" === i[0] && (j = g.Ik, j || (j = [], g.Ik = j), j.push(i))
            }
            t = c;
            return a
        },
        my: function(a, b) {
            for (var c = Object.getPrototypeOf(a); c && c !== Function;) {
                if (c.hasOwnProperty(b)) return h;
                var d = c.hE;
                if (d && d[b]) return h;
                c = Object.getPrototypeOf(c)
            }
            return p
        },
        gB: function(a, b) {
            if (!v.Oa(b) || b instanceof Element || b instanceof CanvasRenderingContext2D) return "";
            var c = "",
            d;
            for (d in b) if ("string" !== typeof d)"" === c && (c = b + "\n"),
            c += " " + d + " is not a string property\n";
            else if ("_" !== d.charAt(0) && !(2 >= d.length)) {
                var e = v.Za(b, d);
                e !== m && ("function" !== typeof e && !v.my(b, d)) && ("" === c && (c = b + "\n"), c += ' unknown property "' + d + '" has value: ' + e + " at " + a + "\n")
            }
            return c
        },
        ys: function(a, b) {
            if (b && !("number" === typeof b || "string" === typeof b || "boolean" === typeof b || "function" === typeof b)) if (v.kc(b) !== f) {
                if (!v.Ot.contains(b)) if (v.Ot.add(b), v.ot.add(v.gB(a, b)), b instanceof y || b instanceof pa || b instanceof oa) for (var c = b.f; c.next();) v.ys(a + "[" + c.key + "]", c.value);
                else for (c in b) {
                    var d = v.Za(b, c);
                    if (! (d === f || d === m || !v.Oa(d)) && "_ownProperties" !== c) {
                        if (b instanceof qa) {
                            if ("_lines" === c) continue
                        } else if (b instanceof w) {
                            if ("data" === c || "_data" === c) continue;
                            if ("itemArray" === c || "_itemArray" === c) continue
                        } else if (! (b instanceof A)) if (b instanceof sa) {
                            if ("archetypeGroupData" === c || "_archetypeGroupData" === c) continue
                        } else if (b instanceof ua) {
                            if ("archetypeLinkData" === c || "_archetypeLinkData" === c) continue;
                            if ("archetypeLabelNodeData" === c || "_archetypeLabelNodeData" === c) continue
                        } else if (b instanceof wa) {
                            if ("archetypeNodeData" === c || "_archetypeNodeData" === c) continue
                        } else if (b instanceof B) {
                            if ("nodeDataArray" === c || "_nodeDataArray" === c) continue;
                            if ("linkDataArray" === c || "_linkDataArray" === c || "_linkDataSet" === c) continue;
                            if ("_mapKeyNodeData" === c || "_delayedNodeReferences" === c) continue
                        }
                        v.ys(a + "." + c, d)
                    }
                }
            } else if (Array.isArray(b)) for (c = 0; c < b.length; c++) v.ys(a + "[" + c + "]", b[c]);
            else v.ot.add(v.gB(a, b))
        },
        ZE: function(a) {
            v.Ot === f ? v.Ot = new pa: v.Ot.clear();
            v.ot = new ya;
            v.ys("", a);
            a = v.ot.toString();
            v.ot = m;
            return a
        },
        rG: function(a) {
            for (var b = [], c = 0; 256 > c; c++) b[c] = c;
            for (var d = 0,
            e, c = 0; 256 > c; c++) d = (d + b[c] + 119) % 256,
            e = b[c],
            b[c] = b[d],
            b[d] = e;
            for (var d = c = 0,
            g = "",
            i = 0; i < a.length; i++) c = (c + 1) % 256,
            d = (d + b[c]) % 256,
            e = b[c],
            b[c] = b[d],
            b[d] = e,
            g += String.fromCharCode(a.charCodeAt(i) ^ b[(b[c] + b[d]) % 256]);
            return g
        },
        IF: function(a) {
            for (var b = [], c = 0; 256 > c; c++) b["0123456789abcdef".charAt(c >> 4) + "0123456789abcdef".charAt(c & 15)] = String.fromCharCode(c);
            a.length % 2 && (a = "0" + a);
            for (var d = [], e = 0, c = 0; c < a.length; c += 2) d[e++] = b[a.substr(c, 2)];
            a = d.join("");
            return "" === a ? "0": a
        },
        Ba: function(a) {
            return v.rG(v.IF(a))
        },
        pv: m,
        Cx: "7da71ca0ad381e90",
        $E: "@COLOR1",
        aF: "@COLOR2"
    },
    za = v,
    Aa = document.createElement("canvas"),
    Ea = Aa.getContext("2d");
 
    za.pv = Aa;
    function na(a, b, c) {
        v.Ob(this);
        this.xz = a;
        this.wb = b;
        this.oE = c
    }
    na.prototype.toString = function() {
        return v.Si(this.xz) + "." + this.wb
    };
    v.m(na, {
        Rd: "classType"
    },
    s("xz"));
    v.m(na, {
        name: "name"
    },
    s("wb"));
    v.m(na, {
        value: "value"
    },
    s("oE"));
    function ya() {
        this.Zv = [];
        this.Dj = 0;
        this.JA = " "
    }
    ya.prototype.toString = function() {
        return this.Zv.join("")
    };
    ya.prototype.add = function(a) {
        a && this.Zv.push(a)
    };
    function Ka(a) {
        a.Dj--;
        0 > a.Dj && (a.Dj = 0)
    }
    function La(a) {
        for (var b = "\n",
        c = a.Dj; 0 < c; c--) b += a.JA;
        a.Zv.push(b)
    }
    function Ma() {}
    v.m(Ma, {
        f: "iterator"
    },
    function() {
        return this
    });
    Ma.prototype.reset = Ma.prototype.reset = aa();
    Ma.prototype.next = Ma.prototype.next = ca(p);
    Ma.prototype.first = Ma.prototype.sb = ca(m);
    v.m(Ma, {
        count: "count"
    },
    ca(0));
    Ma.prototype.Nf = aa();
    Ma.prototype.toString = ca("EmptyIterator");
    v.Ef = new Ma;
    function Oa(a) {
        this.key = -1;
        this.value = a
    }
    v.pd(Oa, {
        key: h,
        value: h
    });
    v.m(Oa, {
        f: "iterator"
    },
    function() {
        return this
    });
    Oa.prototype.reset = Oa.prototype.reset = function() {
        this.key = -1
    };
    Oa.prototype.next = Oa.prototype.next = function() {
        return - 1 === this.key ? (this.key = 0, h) : p
    };
    Oa.prototype.first = Oa.prototype.sb = function() {
        this.key = 0;
        return this.value
    };
    v.m(Oa, {
        count: "count"
    },
    ca(1));
    Oa.prototype.Nf = function() {
        this.value = m
    };
    Oa.prototype.toString = function() {
        return "SingletonIterator(" + this.value + ")"
    };
    function Pa(a) {
        this.ze = a;
        this.Hm = m;
        this.reset()
    }
    v.pd(Pa, {
        key: h,
        value: h
    });
    v.m(Pa, {
        f: "iterator"
    },
    function() {
        return this
    });
    v.a(Pa, "predicate", Pa.prototype.Yu);
    v.defineProperty(Pa, {
        Yu: "predicate"
    },
    s("Hm"), ba("Hm"));
    Pa.prototype.reset = Pa.prototype.reset = function() {
        var a = this.ze;
        a.Bg = m;
        this.Ka = a.ub;
        this.R = -1
    };
    Pa.prototype.next = Pa.prototype.next = function() {
        var a = this.ze;
        a.ub !== this.Ka && v.g("the List has been modified during iteration");
        var a = a.i,
        b = a.length,
        c = ++this.R,
        d = this.Hm;
        if (d !== m) for (; c < b;) {
            var e = a[c];
            if (d(e)) return this.key = this.R = c,
            this.value = e,
            h;
            c++
        } else {
            if (c < b) return this.key = c,
            this.value = a[c],
            h;
            this.Nf()
        }
        return p
    };
    Pa.prototype.first = Pa.prototype.sb = function() {
        var a = this.ze;
        this.Ka = a.ub;
        this.R = 0;
        var a = a.i,
        b = a.length,
        c = this.Hm;
        if (c !== m) for (var d = 0; d < b;) {
            var e = a[d];
            if (c(e)) return this.key = this.R = d,
            this.value = e;
            d++
        } else return 0 < b ? (e = a[0], this.key = 0, this.value = e) : m
    };
    v.m(Pa, {
        count: "count"
    },
    function() {
        var a = this.Hm;
        if (a !== m) {
            for (var b = 0,
            c = this.ze.i,
            d = c.length,
            e = 0; e < d; e++) a(c[e]) && b++;
            return b
        }
        return this.ze.i.length
    });
    Pa.prototype.Nf = function() {
        this.key = -1;
        this.value = m;
        this.Ka = -1;
        this.Hm = m;
        this.ze.Bg = this
    };
    Pa.prototype.toString = function() {
        return "ListIterator@" + this.R + "/" + this.ze.count
    };
    function Ra(a) {
        this.ze = a;
        this.reset()
    }
    v.pd(Ra, {
        key: h,
        value: h
    });
    v.m(Ra, {
        f: "iterator"
    },
    function() {
        return this
    });
    Ra.prototype.reset = Ra.prototype.reset = function() {
        var a = this.ze;
        a.Fw = m;
        this.Ka = a.ub;
        this.R = a.i.length
    };
    Ra.prototype.next = Ra.prototype.next = function() {
        var a = this.ze;
        a.ub !== this.Ka && v.g("the List has been modified during iteration");
        var b = --this.R;
        if (0 <= b) return this.key = b,
        this.value = a.i[b],
        h;
        this.Nf();
        return p
    };
    Ra.prototype.first = Ra.prototype.sb = function() {
        var a = this.ze;
        this.Ka = a.ub;
        var b = a.i;
        this.R = a = b.length - 1;
        return 0 <= a ? (b = b[a], this.key = a, this.value = b) : m
    };
    v.m(Ra, {
        count: "count"
    },
    function() {
        return this.ze.i.length
    });
    Ra.prototype.Nf = function() {
        this.key = -1;
        this.value = m;
        this.Ka = -1;
        this.ze.Fw = this
    };
    Ra.prototype.toString = function() {
        return "ListIteratorBackwards(" + this.R + "/" + this.ze.count + ")"
    };
    function y(a) {
        v.Ob(this);
        this.Ma = p;
        this.i = [];
        this.ub = 0;
        this.Fw = this.Bg = m;
        a === f || a === m ? this.K = m: "string" === typeof a ? "string" === a || "number" === a || "boolean" === a || "function" === a ? this.K = a: v.ha(a, "the string 'number', 'string', 'boolean', or 'function'", "List constructor: type") : "function" === typeof a ? this.K = a === Object ? "object": a === String ? "string": a === Number ? "number": a === Boolean ? "boolean": a === Function ? "function": a: v.ha(a, "null, a primitive type name, or a class type", "List constructor: type")
    }
    v.H("List", y);
    y.prototype.If = function(a) {
        this.K !== m && ("string" === typeof this.K ? (typeof a !== this.K || a === m) && v.Ac(a, this.K) : a instanceof this.K || v.Ac(a, this.K))
    };
    y.prototype.$c = function() {
        var a = this.ub;
        a++;
        999999999 < a && (a = 0);
        this.ub = a
    };
    y.prototype.freeze = y.prototype.freeze = function() {
        this.Ma = h;
        return this
    };
    y.prototype.thaw = y.prototype.qa = function() {
        this.Ma = p;
        return this
    };
    y.prototype.toString = function() {
        return "List(" + v.eh(this.K) + ")#" + v.kc(this)
    };
    y.prototype.add = y.prototype.add = function(a) {
        a !== m && (t && this.If(a), v.v(this, a), this.i.push(a), this.$c())
    };
    y.prototype.addAll = y.prototype.bg = function(a) {
        if (a === m) return this;
        v.v(this);
        var b = this.i;
        if (v.isArray(a)) for (var c = v.Eb(a), d = 0; d < c; d++) {
            var e = v.qb(a, d);
            t && this.If(e);
            b.push(e)
        } else for (a = a.f; a.next();) e = a.value,
        t && this.If(e),
        b.push(e);
        this.$c();
        return this
    };
    y.prototype.clear = y.prototype.clear = function() {
        v.v(this);
        this.i = [];
        this.$c()
    };
    y.prototype.contains = y.prototype.contains = function(a) {
        if (a === m) return p;
        t && this.If(a);
        return - 1 !== this.i.indexOf(a)
    };
    y.prototype.indexOf = y.prototype.indexOf = function(a) {
        if (a === m) return - 1;
        t && this.If(a);
        return this.i.indexOf(a)
    };
    y.prototype.elt = y.prototype.Z = function(a) {
        t && v.j(a, y, "elt:i");
        var b = this.i; (0 > a || a >= b.length) && v.ha(a, "0 <= i < length", y, "elt:i");
        return b[a]
    };
    y.prototype.setElt = y.prototype.ev = function(a, b) {
        t && (this.If(b), v.j(a, y, "setElt:i"));
        var c = this.i; (0 > a || a >= c.length) && v.ha(a, "0 <= i < length", y, "setElt:i");
        v.v(this, a);
        c[a] = b
    };
    y.prototype.first = y.prototype.sb = function() {
        var a = this.i;
        return 0 === a.length ? m: a[0]
    };
    y.prototype.insertAt = y.prototype.lc = function(a, b) {
        t && (this.If(b), v.j(a, y, "insertAt:i"));
        0 > a && v.ha(a, ">= 0", y, "insertAt:i");
        v.v(this, a);
        var c = this.i;
        a >= c.length ? c.push(b) : c.splice(a, 0, b);
        this.$c();
        return h
    };
    y.prototype.remove = y.prototype.remove = function(a) {
        if (a === m) return p;
        t && this.If(a);
        v.v(this, a);
        var b = this.i,
        a = b.indexOf(a);
        if ( - 1 === a) return p;
        a === b.length - 1 ? b.pop() : b.splice(a, 1);
        this.$c();
        return h
    };
    y.prototype.removeAt = y.prototype.qe = function(a) {
        t && v.j(a, y, "removeAt:i");
        var b = this.i; (0 > a || a >= b.length) && v.ha(a, "0 <= i < length", y, "removeAt:i");
        v.v(this, a);
        a === b.length - 1 ? b.pop() : b.splice(a, 1);
        this.$c()
    };
    y.prototype.removeRange = y.prototype.removeRange = function(a, b) {
        t && (v.j(a, y, "removeRange:from"), v.j(b, y, "removeRange:to"));
        var c = this.i; (0 > a || a >= c.length) && v.ha(a, "0 <= from < length", y, "elt:from"); (0 > b || b >= c.length) && v.ha(b, "0 <= to < length", y, "elt:to");
        v.v(this, a);
        var d = c.slice((b || a) + 1 || c.length);
        c.length = 0 > a ? c.length + a: a;
        c.push.apply(c, d);
        this.$c()
    };
    y.prototype.copy = y.prototype.copy = function() {
        for (var a = new y(this.K), b = this.i, c = this.count, d = 0; d < c; d++) a.add(b[d]);
        return a
    };
    y.prototype.toArray = y.prototype.Df = function() {
        for (var a = [], b = this.i, c = this.count, d = 0; d < c; d++) a.push(b[d]);
        return a
    };
    y.prototype.toSet = y.prototype.RG = function() {
        for (var a = new pa(this.K), b = this.i, c = this.count, d = 0; d < c; d++) a.add(b[d]);
        return a
    };
    y.prototype.sort = y.prototype.sort = function(a) {
        t && v.e(a, "function", y, "sort:sortfunc");
        v.v(this);
        this.i.sort(a);
        this.$c();
        return this
    };
    y.prototype.sortRange = y.prototype.eo = function(a, b, c) {
        var d = this.i,
        e = d.length;
        b === f && (b = 0);
        c === f && (c = e);
        t && (v.e(a, "function", y, "sortRange:sortfunc"), v.j(b, y, "sortRange:from"), v.j(c, y, "sortRange:to"));
        v.v(this);
        var g = c - b;
        if (1 >= g) return this; (0 > b || b >= e - 1) && v.ha(b, "0 <= from < length", y, "sortRange:from");
        if (2 === g) return c = d[b],
        e = d[b + 1],
        0 < a(c, e) && (d[b] = e, d[b + 1] = c, this.$c()),
        this;
        if (0 === b) if (c >= e) d.sort(a);
        else {
            g = d.slice(0, c);
            g.sort(a);
            for (a = 0; a < c; a++) d[a] = g[a]
        } else if (c >= e) {
            g = d.slice(b);
            g.sort(a);
            for (a = b; a < e; a++) d[a] = g[a - b]
        } else {
            g = d.slice(b, c);
            g.sort(a);
            for (a = b; a < c; a++) d[a] = g[a - b]
        }
        this.$c();
        return this
    };
    y.prototype.reverse = y.prototype.reverse = function() {
        v.v(this);
        this.i.reverse();
        this.$c();
        return this
    };
    v.m(y, {
        count: "count"
    },
    function() {
        return this.i.length
    });
    v.m(y, {
        length: "length"
    },
    function() {
        return this.i.length
    });
    v.m(y, {
        f: "iterator"
    },
    function() {
        if (0 >= this.i.length) return v.Ef;
        var a = this.Bg;
        return a !== m ? (a.reset(), a) : new Pa(this)
    });
    v.m(y, {
        Hn: "iteratorBackwards"
    },
    function() {
        if (0 >= this.i.length) return v.Ef;
        var a = this.Fw;
        return a !== m ? (a.reset(), a) : new Ra(this)
    });
    function Sa(a) {
        this.yd = a;
        this.reset()
    }
    v.pd(Sa, {
        key: h,
        value: h
    });
    v.m(Sa, {
        f: "iterator"
    },
    function() {
        return this
    });
    Sa.prototype.reset = Sa.prototype.reset = function() {
        var a = this.yd;
        a.Bg = m;
        this.Ka = a.ub;
        this.kd = m
    };
    Sa.prototype.next = Sa.prototype.next = function() {
        var a = this.yd;
        a.ub !== this.Ka && v.g("the Set has been modified during iteration");
        var b = this.kd,
        b = b === m ? a.Kd: b.yi;
        if (b !== m) return this.kd = b,
        this.value = b.value,
        this.key = b.key,
        h;
        this.Nf();
        return p
    };
    Sa.prototype.first = Sa.prototype.sb = function() {
        var a = this.yd;
        this.Ka = a.ub;
        a = a.Kd;
        if (a !== m) {
            this.kd = a;
            var b = a.value;
            this.key = a.key;
            return this.value = b
        }
        return m
    };
    v.m(Sa, {
        count: "count"
    },
    function() {
        return this.yd.$d
    });
    Sa.prototype.Nf = function() {
        this.value = m;
        this.Ka = -1;
        this.yd.Bg = this
    };
    Sa.prototype.toString = function() {
        return this.kd !== m ? "SetIterator@" + this.kd.value: "SetIterator"
    };
    function pa(a) {
        v.Ob(this);
        this.Ma = p;
        a === f || a === m ? this.K = m: "string" === typeof a ? "string" === a || "number" === a ? this.K = a: v.ha(a, "the string 'number' or 'string'", "Set constructor: type") : "function" === typeof a ? this.K = a === Object ? "object": a === String ? "string": a === Number ? "number": a: v.ha(a, "null, a primitive type name, or a class type", "Set constructor: type");
        this.oc = {};
        this.$d = 0;
        this.Bg = m;
        this.ub = 0;
        this.Cg = this.Kd = m
    }
    v.H("Set", pa);
    pa.prototype.If = function(a) {
        this.K !== m && ("string" === typeof this.K ? (typeof a !== this.K || a === m) && v.Ac(a, this.K) : a instanceof this.K || v.Ac(a, this.K))
    };
    pa.prototype.$c = function() {
        var a = this.ub;
        a++;
        999999999 < a && (a = 0);
        this.ub = a
    };
    pa.prototype.freeze = pa.prototype.freeze = function() {
        this.Ma = h;
        return this
    };
    pa.prototype.thaw = pa.prototype.qa = function() {
        this.Ma = p;
        return this
    };
    pa.prototype.toString = function() {
        return "Set(" + v.eh(this.K) + ")#" + v.kc(this)
    };
    pa.prototype.add = pa.prototype.add = function(a) {
        if (a === m) return p;
        t && this.If(a);
        v.v(this, a);
        var b = a;
        v.Oa(a) && (b = v.Dn(a));
        return this.oc[b] === f ? (this.$d++, a = new Ta(a, a), this.oc[b] = a, b = this.Cg, b === m ? this.Kd = a: (a.Im = b, b.yi = a), this.Cg = a, this.$c(), h) : p
    };
    pa.prototype.addAll = pa.prototype.bg = function(a) {
        if (a === m) return this;
        v.v(this);
        if (v.isArray(a)) for (var b = v.Eb(a), c = 0; c < b; c++) this.add(v.qb(a, c));
        else for (a = a.f; a.next();) this.add(a.value);
        return this
    };
    pa.prototype.contains = pa.prototype.contains = function(a) {
        if (a === m) return p;
        t && this.If(a);
        var b = a;
        return v.Oa(a) && (b = v.kc(a), b === f) ? p: this.oc[b] !== f
    };
    pa.prototype.containsAll = pa.prototype.$H = function(a) {
        if (a === m) return h;
        for (a = a.f; a.next();) if (!this.contains(a.value)) return p;
        return h
    };
    pa.prototype.containsAny = pa.prototype.aI = function(a) {
        if (a === m) return h;
        for (a = a.f; a.next();) if (this.contains(a.value)) return h;
        return p
    };
    pa.prototype.first = pa.prototype.sb = function() {
        var a = this.Kd;
        return a === m ? m: a.value
    };
    pa.prototype.remove = pa.prototype.remove = function(a) {
        if (a === m) return p;
        t && this.If(a);
        v.v(this, a);
        var b = a;
        if (v.Oa(a) && (b = v.kc(a), b === f)) return p;
        a = this.oc[b];
        if (a === f) return p;
        var c = a.yi,
        d = a.Im;
        c !== m && (c.Im = d);
        d !== m && (d.yi = c);
        this.Kd === a && (this.Kd = c);
        this.Cg === a && (this.Cg = d);
        delete this.oc[b];
        this.$d--;
        this.$c();
        return h
    };
    pa.prototype.removeAll = pa.prototype.hK = function(a) {
        if (a === m) return this;
        v.v(this);
        for (a = a.f; a.next();) this.remove(a.value);
        return this
    };
    pa.prototype.retainAll = pa.prototype.pK = function(a) {
        if (a === m || 0 === this.count) return this;
        v.v(this);
        var b = new pa(this.K);
        b.bg(a);
        for (var a = new y(this.K), c = this.f; c.next();) b.contains(c.value) || a.add(c.value);
        for (b = a.f; b.next();) this.remove(b.value);
        return this
    };
    pa.prototype.clear = pa.prototype.clear = function() {
        v.v(this);
        this.oc = {};
        this.$d = 0;
        this.Cg = this.Kd = m;
        this.$c()
    };
    pa.prototype.copy = pa.prototype.copy = function() {
        var a = new pa(this.K),
        b = this.oc,
        c;
        for (c in b) a.add(b[c].value);
        return a
    };
    pa.prototype.toArray = pa.prototype.Df = function() {
        var a = [],
        b = this.oc,
        c;
        for (c in b) a.push(b[c].value);
        return a
    };
    pa.prototype.toList = pa.prototype.QG = function() {
        var a = new y(this.K),
        b = this.oc,
        c;
        for (c in b) a.add(b[c]);
        return a
    };
    v.m(pa, {
        count: "count"
    },
    s("$d"));
    v.m(pa, {
        f: "iterator"
    },
    function() {
        if (0 >= this.$d) return v.Ef;
        var a = this.Bg;
        return a !== m ? (a.reset(), a) : new Sa(this)
    });
    function Ua(a) {
        this.Fc = a;
        this.reset()
    }
    v.pd(Ua, {
        key: h,
        value: h
    });
    v.m(Ua, {
        f: "iterator"
    },
    function() {
        return this
    });
    Ua.prototype.reset = Ua.prototype.reset = function() {
        this.Ka = this.Fc.ub;
        this.kd = m
    };
    Ua.prototype.next = Ua.prototype.next = function() {
        var a = this.Fc;
        a.ub !== this.Ka && v.g("the Map has been modified during iteration");
        var b = this.kd,
        b = b === m ? a.Kd: b.yi;
        if (b !== m) return this.kd = b,
        this.value = b.key,
        h;
        this.Nf();
        return p
    };
    Ua.prototype.first = Ua.prototype.sb = function() {
        var a = this.Fc;
        this.Ka = a.ub;
        a = a.Kd;
        if (a !== m) {
            this.kd = a;
            var b = a.value;
            this.key = a.key;
            return this.value = b
        }
        return m
    };
    v.m(Ua, {
        count: "count"
    },
    function() {
        return this.Fc.$d
    });
    Ua.prototype.Nf = function() {
        this.value = m;
        this.Ka = -1
    };
    Ua.prototype.toString = function() {
        return this.kd !== m ? "MapKeySetIterator@" + this.kd.value: "MapKeySetIterator"
    };
    function Va(a) {
        v.Ob(this);
        this.Fc = a
    }
    v.pa(Va, pa);
    Va.prototype.freeze = function() {
        return this
    };
    Va.prototype.qa = function() {
        return this
    };
    Va.prototype.toString = function() {
        return "MapKeySet(" + this.Fc.toString() + ")"
    };
    Va.prototype.add = Va.prototype.add = function() {
        v.g("This Set is read-only: " + this.toString());
        return p
    };
    Va.prototype.contains = Va.prototype.contains = function(a) {
        return this.Fc.contains(a)
    };
    Va.prototype.remove = Va.prototype.remove = function() {
        v.g("This Set is read-only: " + this.toString());
        return p
    };
    Va.prototype.clear = Va.prototype.clear = function() {
        v.g("This Set is read-only: " + this.toString())
    };
    Va.prototype.copy = Va.prototype.copy = function() {
        return new Va(this.Fc)
    };
    Va.prototype.toSet = Va.prototype.RG = function() {
        var a = new pa(this.Fc.K),
        b = this.Fc.oc,
        c;
        for (c in b) a.add(b[c].key);
        return a
    };
    Va.prototype.toArray = Va.prototype.Df = function() {
        var a = [],
        b = this.Fc.oc,
        c;
        for (c in b) a.push(b[c].key);
        return a
    };
    Va.prototype.toList = Va.prototype.QG = function() {
        var a = new y(this.K),
        b = this.Fc.oc,
        c;
        for (c in b) a.add(b[c].key);
        return a
    };
    v.m(Va, {
        count: "count"
    },
    function() {
        return this.Fc.$d
    });
    v.m(Va, {
        f: "iterator"
    },
    function() {
        return 0 >= this.Fc.$d ? v.Ef: new Ua(this.Fc)
    });
    function Ta(a, b) {
        this.key = a;
        this.value = b;
        this.Im = this.yi = m
    }
    v.pd(Ta, {
        key: h,
        value: h
    });
    Ta.prototype.toString = function() {
        return "{" + this.key + ":" + this.value + "}"
    };
    function Wa(a) {
        this.Fc = a;
        this.reset()
    }
    v.pd(Wa, {
        key: h,
        value: h
    });
    v.m(Wa, {
        f: "iterator"
    },
    function() {
        return this
    });
    Wa.prototype.reset = Wa.prototype.reset = function() {
        var a = this.Fc;
        a.Bg = m;
        this.Ka = a.ub;
        this.kd = m
    };
    Wa.prototype.next = Wa.prototype.next = function() {
        var a = this.Fc;
        a.ub !== this.Ka && v.g("the Map has been modified during iteration");
        var b = this.kd,
        b = b === m ? a.Kd: b.yi;
        if (b !== m) return this.kd = b,
        this.key = b.key,
        this.value = b.value,
        h;
        this.Nf();
        return p
    };
    Wa.prototype.first = Wa.prototype.sb = function() {
        var a = this.Fc;
        this.Ka = a.ub;
        a = a.Kd;
        if (a !== m) {
            this.kd = a;
            var b = a.key;
            this.key = b;
            this.value = a.value;
            return b
        }
        return m
    };
    v.m(Wa, {
        count: "count"
    },
    function() {
        return this.Fc.$d
    });
    Wa.prototype.Nf = function() {
        this.value = this.key = m;
        this.Ka = -1;
        this.Fc.Bg = this
    };
    Wa.prototype.toString = function() {
        return this.kd !== m ? "MapIterator@" + this.kd: "MapIterator"
    };
    function oa(a, b) {
        v.Ob(this);
        this.Ma = p;
        a === f || a === m ? this.xh = m: "string" === typeof a ? "string" === a || "number" === a ? this.xh = a: v.ha(a, "the string 'number' or 'string'", "Map constructor: keytype") : "function" === typeof a ? this.xh = a === Object ? "object": a === String ? "string": a === Number ? "number": a: v.ha(a, "null, a primitive type name, or a class type", "Map constructor: keytype");
        b === f || b === m ? this.Mh = m: "string" === typeof b ? "string" === b || "boolean" === b || "number" === b || "function" === b ? this.Mh = b: v.ha(b, "the string 'number', 'string', 'boolean', or 'function'", "Map constructor: valtype") : "function" === typeof b ? this.Mh = b === Object ? "object": b === String ? "string": b === Number ? "number": b === Boolean ? "boolean": b === Function ? "function": b: v.ha(b, "null, a primitive type name, or a class type", "Map constructor: valtype");
        this.oc = {};
        this.$d = 0;
        this.Bg = m;
        this.ub = 0;
        this.Cg = this.Kd = m
    }
    v.H("Map", oa);
    function ab(a, b) {
        a.xh !== m && ("string" === typeof a.xh ? (typeof b !== a.xh || b === m) && v.Ac(b, a.xh) : b instanceof a.xh || v.Ac(b, a.xh))
    }
    oa.prototype.$c = function() {
        var a = this.ub;
        a++;
        999999999 < a && (a = 0);
        this.ub = a
    };
    oa.prototype.freeze = oa.prototype.freeze = function() {
        this.Ma = h;
        return this
    };
    oa.prototype.thaw = oa.prototype.qa = function() {
        this.Ma = p;
        return this
    };
    oa.prototype.toString = function() {
        return "Map(" + v.eh(this.xh) + "," + v.eh(this.Mh) + ")#" + v.kc(this)
    };
    oa.prototype.add = oa.prototype.add = function(a, b) {
        t && (ab(this, a), this.Mh !== m && ("string" === typeof this.Mh ? (typeof b !== this.Mh || b === m) && v.Ac(b, this.Mh) : b instanceof this.Mh || v.Ac(b, this.Mh)));
        v.v(this, a);
        var c = a;
        v.Oa(a) && (c = v.Dn(a));
        var d = this.oc[c];
        if (d === f) return this.$d++,
        d = new Ta(a, b),
        this.oc[c] = d,
        c = this.Cg,
        c === m ? this.Kd = d: (d.Im = c, c.yi = d),
        this.Cg = d,
        this.$c(),
        h;
        d.value = b;
        return p
    };
    oa.prototype.addAll = oa.prototype.bg = function(a) {
        if (a === m) return this;
        t && v.c(a, oa, oa, "addAll:map");
        for (a = a.f; a.next();) this.add(a.key, a.value);
        return this
    };
    oa.prototype.contains = oa.prototype.contains = function(a) {
        t && ab(this, a);
        var b = a;
        return v.Oa(a) && (b = v.kc(a), b === f) ? p: this.oc[b] !== f
    };
    oa.prototype.getValue = oa.prototype.ca = function(a) {
        t && ab(this, a);
        var b = a;
        if (v.Oa(a) && (b = v.kc(a), b === f)) return m;
        a = this.oc[b];
        return a === f ? m: a.value
    };
    oa.prototype.remove = oa.prototype.remove = function(a) {
        if (a === m) return p;
        t && ab(this, a);
        v.v(this, a);
        var b = a;
        if (v.Oa(a) && (b = v.kc(a), b === f)) return p;
        a = this.oc[b];
        if (a === f) return p;
        var c = a.yi,
        d = a.Im;
        c !== m && (c.Im = d);
        d !== m && (d.yi = c);
        this.Kd === a && (this.Kd = c);
        this.Cg === a && (this.Cg = d);
        delete this.oc[b];
        this.$d--;
        this.$c();
        return h
    };
    oa.prototype.clear = oa.prototype.clear = function() {
        v.v(this);
        this.oc = {};
        this.$d = 0;
        this.Cg = this.Kd = m;
        this.$c()
    };
    oa.prototype.copy = oa.prototype.copy = function() {
        var a = new oa(this.xh, this.Mh),
        b = this.oc,
        c;
        for (c in b) {
            var d = b[c];
            a.add(d.key, d.value)
        }
        return a
    };
    oa.prototype.toArray = oa.prototype.Df = function() {
        var a = [],
        b = this.oc,
        c;
        for (c in b) {
            var d = b[c];
            a.push(new Ta(d.key, d.value))
        }
        return a
    };
    oa.prototype.toKeySet = oa.prototype.ej = function() {
        return new Va(this)
    };
    v.m(oa, {
        count: "count"
    },
    s("$d"));
    v.m(oa, {
        f: "iterator"
    },
    function() {
        if (0 >= this.count) return v.Ef;
        var a = this.Bg;
        return a !== m ? (a.reset(), a) : new Wa(this)
    });
    function D(a, b) {
        a === f ? this.y = this.x = 0 : "number" === typeof a && "number" === typeof b ? (this.x = a, this.y = b) : v.g("Invalid arguments to Point constructor")
    }
    v.H("Point", D);
    v.pd(D, {
        x: h,
        y: h
    });
    D.prototype.Ra = function(a) {
        t && v.c(a, D, D, "assign:p");
        this.x = a.x;
        this.y = a.y
    };
    D.prototype.yd = function(a, b) {
        this.x = a;
        this.y = b
    };
    D.prototype.setTo = D.prototype.co = function(a, b) {
        t && (v.e(a, "number", D, "setTo:x"), v.e(b, "number", D, "setTo:y"));
        v.v(this);
        this.x = a;
        this.y = b;
        return this
    };
    D.prototype.set = D.prototype.set = function(a) {
        t && v.c(a, D, D, "set:p");
        v.v(this);
        this.x = a.x;
        this.y = a.y;
        return this
    };
    D.prototype.copy = D.prototype.copy = function() {
        var a = new D;
        a.x = this.x;
        a.y = this.y;
        return a
    };
    D.prototype.La = function() {
        this.Ma = h;
        Object.freeze(this);
        return this
    };
    D.prototype.B = function() {
        return Object.isFrozen(this) ? this: this.copy().freeze()
    };
    D.prototype.freeze = function() {
        this.Ma = h;
        return this
    };
    D.prototype.qa = function() {
        Object.isFrozen(this) && v.g("cannot thaw constant: " + this);
        this.Ma = p;
        return this
    };
    D.parse = function(a) {
        if ("string" === typeof a) {
            for (var a = a.split(" "), b = 0, c = 0;
            "" === a[b];) b++;
            var d = a[b++];
            d && (c = parseFloat(d));
            for (var e = 0;
            "" === a[b];) b++; (d = a[b++]) && (e = parseFloat(d));
            return new D(c, e)
        }
        return new D
    };
    var bb;
    D.stringify = bb = function(a) {
        return a instanceof D ? a.x.toString() + " " + a.y.toString() : a.toString()
    };
    D.prototype.toString = function() {
        return "Point(" + this.x + "," + this.y + ")"
    };
    D.prototype.equals = D.prototype.u = function(a) {
        return ! (a instanceof D) ? p: this.x === a.x && this.y === a.y
    };
    D.prototype.equalTo = D.prototype.fy = function(a, b) {
        return this.x === a && this.y === b
    };
    D.prototype.Qi = function(a) {
        return db(this.x, a.x) && db(this.y, a.y)
    };
    D.prototype.Zh = function(a) {
        return fb(this.x, a.x) && fb(this.y, a.y)
    };
    D.prototype.add = D.prototype.add = function(a) {
        t && v.c(a, D, D, "add:p");
        v.v(this);
        this.x += a.x;
        this.y += a.y;
        return this
    };
    D.prototype.subtract = D.prototype.fs = function(a) {
        t && v.c(a, D, D, "subtract:p");
        v.v(this);
        this.x -= a.x;
        this.y -= a.y;
        return this
    };
    D.prototype.offset = D.prototype.offset = function(a, b) {
        t && (v.j(a, D, "offset:dx"), v.j(b, D, "offset:dy"));
        v.v(this);
        this.x += a;
        this.y += b;
        return this
    };
    D.prototype.rotate = D.prototype.rotate = function(a) {
        t && v.j(a, D, "rotate:angle");
        v.v(this);
        if (0 === a) return this;
        var b = this.x,
        c = this.y;
        if (0 === b && 0 === c) return this;
        var d = a * Math.PI / 180,
        a = Math.cos(d),
        d = Math.sin(d);
        this.x = a * b - d * c;
        this.y = d * b + a * c;
        return this
    };
    D.prototype.scale = D.prototype.scale = function(a, b) {
        t && (v.j(a, D, "scale:sx"), v.j(b, D, "scale:sy"));
        this.x *= a;
        this.y *= b;
        return this
    };
    D.prototype.distanceSquaredPoint = D.prototype.Ni = function(a) {
        t && v.c(a, D, D, "distanceSquaredPoint:p");
        var b = a.x - this.x,
        a = a.y - this.y;
        return b * b + a * a
    };
    D.prototype.distanceSquared = D.prototype.mI = function(a, b) {
        t && (v.j(a, D, "distanceSquared:px"), v.j(b, D, "distanceSquared:py"));
        var c = a - this.x,
        d = b - this.y;
        return c * c + d * d
    };
    D.prototype.normalize = D.prototype.normalize = function() {
        v.v(this);
        var a = this.x,
        b = this.y,
        c = Math.sqrt(a * a + b * b);
        0 < c && (this.x = a / c, this.y = b / c);
        return this
    };
    D.prototype.directionPoint = D.prototype.Vh = function(a) {
        t && v.c(a, D, D, "directionPoint:p");
        return gb(a.x - this.x, a.y - this.y)
    };
    D.prototype.direction = D.prototype.direction = function(a, b) {
        t && (v.j(a, D, "direction:px"), v.j(b, D, "direction:py"));
        return gb(a - this.x, b - this.y)
    };
    function gb(a, b) {
        if (0 === a) return 0 < b ? 90 : 0 > b ? 270 : 0;
        if (0 === b) return 0 < a ? 0 : 180;
        if (isNaN(a) || isNaN(b)) return 0;
        var c = 180 * Math.atan(Math.abs(b / a)) / Math.PI;
        0 > a ? c = 0 > b ? c + 180 : 180 - c: 0 > b && (c = 360 - c);
        return c
    }
    D.prototype.setRectSpot = D.prototype.bo = function(a, b) {
        t && (v.c(a, E, D, "setRectSpot:r"), v.c(b, F, D, "setRectSpot:spot"));
        v.v(this);
        this.x = a.x + b.x * a.width + b.offsetX;
        this.y = a.y + b.y * a.height + b.offsetY;
        return this
    };
    D.prototype.setSpot = D.prototype.Ml = function(a, b, c, d, e) {
        t && (v.j(a, D, "setSpot:x"), v.j(b, D, "setSpot:y"), v.j(c, D, "setSpot:w"), v.j(d, D, "setSpot:h"), (0 > c || 0 > d) && v.g("Point.setSpot:Width and height cannot be negative"), v.c(e, F, D, "setSpot:spot"));
        v.v(this);
        this.x = a + e.x * c + e.offsetX;
        this.y = b + e.y * d + e.offsetY;
        return this
    };
    D.prototype.transform = function(a) {
        t && v.c(a, ib, D, "transform:t");
        a.Bb(this);
        return this
    };
    function lb(a, b) {
        t && v.c(b, ib, D, "transformInverted:t");
        b.bi(a);
        return a
    }
    var nb;
    D.distanceLineSegmentSquared = nb = function(a, b, c, d, e, g) {
        t && (v.j(a, D, "distanceLineSegmentSquared:px"), v.j(b, D, "distanceLineSegmentSquared:py"), v.j(c, D, "distanceLineSegmentSquared:ax"), v.j(d, D, "distanceLineSegmentSquared:ay"), v.j(e, D, "distanceLineSegmentSquared:bx"), v.j(g, D, "distanceLineSegmentSquared:by"));
        var i = e - c,
        j = g - d,
        k = i * i + j * j,
        c = c - a,
        d = d - b,
        l = -c * i - d * j;
        if (0 >= l || l >= k) return i = e - a,
        j = g - b,
        Math.min(c * c + d * d, i * i + j * j);
        a = i * d - j * c;
        return a * a / k
    };
    D.distanceSquared = function(a, b, c, d) {
        t && (v.j(a, D, "distanceSquared:px"), v.j(b, D, "distanceSquared:py"), v.j(c, D, "distanceSquared:qx"), v.j(d, D, "distanceSquared:qy"));
        a = c - a;
        b = d - b;
        return a * a + b * b
    };
    var qb;
    D.direction = qb = function(a, b, c, d) {
        t && (v.j(a, D, "direction:px"), v.j(b, D, "direction:py"), v.j(c, D, "direction:qx"), v.j(d, D, "direction:qy"));
        a = c - a;
        b = d - b;
        if (0 === a) return 0 < b ? 90 : 0 > b ? 270 : 0;
        if (0 === b) return 0 < a ? 0 : 180;
        if (isNaN(a) || isNaN(b)) return 0;
        d = 180 * Math.atan(Math.abs(b / a)) / Math.PI;
        0 > a ? d = 0 > b ? d + 180 : 180 - d: 0 > b && (d = 360 - d);
        return d
    };
    D.prototype.isReal = D.prototype.aa = function() {
        return isFinite(this.x) && isFinite(this.y)
    };
    function sb(a, b) {
        a === f ? this.height = this.width = 0 : "number" === typeof a && (0 <= a || isNaN(a)) && "number" === typeof b && (0 <= b || isNaN(b)) ? (this.width = a, this.height = b) : v.g("Invalid arguments to Size constructor")
    }
    v.H("Size", sb);
    v.pd(sb, {
        width: h,
        height: h
    });
    sb.prototype.Ra = function(a) {
        t && v.c(a, sb, sb, "assign:s");
        this.width = a.width;
        this.height = a.height
    };
    sb.prototype.yd = function(a, b) {
        this.width = a;
        this.height = b
    };
    sb.prototype.setTo = sb.prototype.co = function(a, b) {
        t && (v.e(a, "number", sb, "setTo:w"), v.e(b, "number", sb, "setTo:h"));
        0 > a && v.ha(a, ">= 0", sb, "setTo:w");
        0 > b && v.ha(b, ">= 0", sb, "setTo:h");
        v.v(this);
        this.width = a;
        this.height = b;
        return this
    };
    sb.prototype.set = sb.prototype.set = function(a) {
        t && v.c(a, sb, sb, "set:s");
        v.v(this);
        this.width = a.width;
        this.height = a.height;
        return this
    };
    sb.prototype.copy = sb.prototype.copy = function() {
        var a = new sb;
        a.width = this.width;
        a.height = this.height;
        return a
    };
    sb.prototype.La = function() {
        this.Ma = h;
        Object.freeze(this);
        return this
    };
    sb.prototype.B = function() {
        return Object.isFrozen(this) ? this: this.copy().freeze()
    };
    sb.prototype.freeze = function() {
        this.Ma = h;
        return this
    };
    sb.prototype.qa = function() {
        Object.isFrozen(this) && v.g("cannot thaw constant: " + this);
        this.Ma = p;
        return this
    };
    sb.parse = function(a) {
        if ("string" === typeof a) {
            for (var a = a.split(" "), b = 0, c = 0;
            "" === a[b];) b++;
            var d = a[b++];
            d && (c = parseFloat(d));
            for (var e = 0;
            "" === a[b];) b++; (d = a[b++]) && (e = parseFloat(d));
            return new sb(c, e)
        }
        return new sb
    };
    var tb;
    sb.stringify = tb = function(a) {
        return a instanceof sb ? a.width.toString() + " " + a.height.toString() : a.toString()
    };
    sb.prototype.toString = function() {
        return "Size(" + this.width + "," + this.height + ")"
    };
    sb.prototype.equals = sb.prototype.u = function(a) {
        return ! (a instanceof sb) ? p: this.width === a.width && this.height === a.height
    };
    sb.prototype.equalTo = sb.prototype.fy = function(a, b) {
        return this.width === a && this.height === b
    };
    sb.prototype.Qi = function(a) {
        return db(this.width, a.width) && db(this.height, a.height)
    };
    sb.prototype.Zh = function(a) {
        return fb(this.width, a.width) && fb(this.height, a.height)
    };
    sb.prototype.isReal = sb.prototype.aa = function() {
        return isFinite(this.width) && isFinite(this.height)
    };
    function E(a, b, c, d) {
        a === f ? this.height = this.width = this.y = this.x = 0 : a instanceof D ? b instanceof D ? (this.x = Math.min(a.x, b.x), this.y = Math.min(a.y, b.y), this.width = Math.abs(a.x - b.x), this.height = Math.abs(a.y - b.y)) : b instanceof sb ? (this.x = a.x, this.y = a.y, this.width = b.width, this.height = b.height) : v.g("Incorrect arguments supplied") : !t || "number" === typeof a && "number" === typeof b && "number" === typeof c && (0 <= c || isNaN(c)) && "number" === typeof d && (0 <= d || isNaN(d)) ? (this.x = a, this.y = b, this.width = c, this.height = d) : v.g("Invalid arguments to Rect constructor")
    }
    v.H("Rect", E);
    v.pd(E, {
        x: h,
        y: h,
        width: h,
        height: h
    });
    E.prototype.Ra = function(a) {
        t && v.c(a, E, E, "assign:r");
        this.x = a.x;
        this.y = a.y;
        this.width = a.width;
        this.height = a.height
    };
    E.prototype.yd = function(a, b, c, d) {
        this.x = a;
        this.y = b;
        this.width = c;
        this.height = d
    };
    function ub(a, b, c) {
        a.width = b;
        a.height = c
    }
    E.prototype.setTo = E.prototype.co = function(a, b, c, d) {
        t && (v.e(a, "number", E, "setTo:x"), v.e(b, "number", E, "setTo:y"), v.e(c, "number", E, "setTo:w"), v.e(d, "number", E, "setTo:h"));
        0 > c && v.ha(c, ">= 0", E, "setTo:w");
        0 > d && v.ha(d, ">= 0", E, "setTo:h");
        v.v(this);
        this.x = a;
        this.y = b;
        this.width = c;
        this.height = d;
        return this
    };
    E.prototype.set = E.prototype.set = function(a) {
        t && v.c(a, E, E, "set:r");
        v.v(this);
        this.x = a.x;
        this.y = a.y;
        this.width = a.width;
        this.height = a.height;
        return this
    };
    E.prototype.setPoint = E.prototype.w = function(a) {
        t && v.c(a, D, E, "setPoint:p");
        v.v(this);
        this.x = a.x;
        this.y = a.y;
        return this
    };
    E.prototype.setSize = E.prototype.HG = function(a) {
        t && v.c(a, sb, E, "setSize:s");
        v.v(this);
        this.width = a.width;
        this.height = a.height;
        return this
    };
    E.prototype.copy = E.prototype.copy = function() {
        var a = new E;
        a.x = this.x;
        a.y = this.y;
        a.width = this.width;
        a.height = this.height;
        return a
    };
    E.prototype.La = function() {
        this.Ma = h;
        Object.freeze(this);
        return this
    };
    E.prototype.B = function() {
        return Object.isFrozen(this) ? this: this.copy().freeze()
    };
    E.prototype.freeze = function() {
        this.Ma = h;
        return this
    };
    E.prototype.qa = function() {
        Object.isFrozen(this) && v.g("cannot thaw constant: " + this);
        this.Ma = p;
        return this
    };
    function vb(a) {
        var b = a.count,
        c = h,
        d = m;
        if (0 === b) return new E;
        for (var e = 0; e < b; e++) {
            var g = a.i[e];
            c ? (d = new E(g.x, g.y, 0, 0), c = p) : xb(d, g.x, g.y, 0, 0)
        }
        return d
    }
    E.parse = function(a) {
        if ("string" === typeof a) {
            for (var a = a.split(" "), b = 0, c = 0;
            "" === a[b];) b++;
            var d = a[b++];
            d && (c = parseFloat(d));
            for (var e = 0;
            "" === a[b];) b++; (d = a[b++]) && (e = parseFloat(d));
            for (var g = 0;
            "" === a[b];) b++; (d = a[b++]) && (g = parseFloat(d));
            for (var i = 0;
            "" === a[b];) b++; (d = a[b++]) && (i = parseFloat(d));
            return new E(c, e, g, i)
        }
        return new E
    };
    var yb;
    E.stringify = yb = function(a) {
        return a instanceof E ? a.x.toString() + " " + a.y.toString() + " " + a.width.toString() + " " + a.height.toString() : a.toString()
    };
    E.prototype.toString = function() {
        return "Rect(" + this.x + "," + this.y + "," + this.width + "," + this.height + ")"
    };
    E.prototype.equals = E.prototype.u = function(a) {
        return ! (a instanceof E) ? p: this.x === a.x && this.y === a.y && this.width === a.width && this.height === a.height
    };
    E.prototype.equalTo = E.prototype.fy = function(a, b, c, d) {
        return this.x === a && this.y === b && this.width === c && this.height === d
    };
    E.prototype.Qi = function(a) {
        return db(this.x, a.x) && db(this.y, a.y) && db(this.width, a.width) && db(this.height, a.height)
    };
    E.prototype.Zh = function(a) {
        return fb(this.x, a.x) && fb(this.y, a.y) && fb(this.width, a.width) && fb(this.height, a.height)
    };
    E.prototype.containsPoint = E.prototype.fa = function(a) {
        t && v.c(a, D, E, "containsPoint:p");
        return this.x <= a.x && this.x + this.width >= a.x && this.y <= a.y && this.y + this.height >= a.y
    };
    E.prototype.containsRect = E.prototype.pl = function(a) {
        t && v.c(a, E, E, "containsRect:r");
        return this.x <= a.x && a.x + a.width <= this.x + this.width && this.y <= a.y && a.y + a.height <= this.y + this.height
    };
    E.prototype.contains = E.prototype.contains = function(a, b, c, d) {
        t ? (v.j(a, E, "contains:x"), v.j(b, E, "contains:y"), c === f ? c = 0 : v.j(c, E, "contains:w"), d === f ? d = 0 : v.j(d, E, "contains:h"), (0 > c || 0 > d) && v.g("Rect.contains:Width and height cannot be negative")) : (c === f && (c = 0), d === f && (d = 0));
        return this.x <= a && a + c <= this.x + this.width && this.y <= b && b + d <= this.y + this.height
    };
    E.prototype.reset = function() {
        v.v(this);
        this.height = this.width = this.y = this.x = 0
    };
    E.prototype.offset = E.prototype.offset = function(a, b) {
        t && (v.j(a, E, "offset:dx"), v.j(b, E, "offset:dy"));
        v.v(this);
        this.x += a;
        this.y += b;
        return this
    };
    E.prototype.inflate = E.prototype.of = function(a, b) {
        t && (v.j(a, E, "inflate:w"), v.j(b, E, "inflate:h"));
        return Db(this, b, a, b, a)
    };
    E.prototype.addMargin = E.prototype.fr = function(a) {
        t && v.c(a, Hb, E, "addMargin:m");
        return Db(this, a.top, a.right, a.bottom, a.left)
    };
    E.prototype.subtractMargin = E.prototype.GK = function(a) {
        t && v.c(a, Hb, E, "subtractMargin:m");
        return Db(this, -a.top, -a.right, -a.bottom, -a.left)
    };
    E.prototype.grow = E.prototype.hJ = function(a, b, c, d) {
        t && (v.j(a, E, "grow:t"), v.j(b, E, "grow:r"), v.j(c, E, "grow:b"), v.j(d, E, "grow:l"));
        return Db(this, a, b, c, d)
    };
    function Db(a, b, c, d, e) {
        v.v(a);
        var g = a.width;
        c + e <= -g ? (a.x += g / 2, a.width = 0) : (a.x -= e, a.width += c + e);
        c = a.height;
        b + d <= -c ? (a.y += c / 2, a.height = 0) : (a.y -= b, a.height += b + d);
        return a
    }
    E.prototype.intersectRect = E.prototype.tJ = function(a) {
        t && v.c(a, E, E, "intersectRect:r");
        return Kb(this, a.x, a.y, a.width, a.height)
    };
    E.prototype.intersect = E.prototype.sJ = function(a, b, c, d) {
        t && (v.j(a, E, "intersect:x"), v.j(b, E, "intersect:y"), v.j(c, E, "intersect:w"), v.j(d, E, "intersect:h"), (0 > c || 0 > d) && v.g("Rect.intersect:Width and height cannot be negative"));
        return Kb(this, a, b, c, d)
    };
    function Kb(a, b, c, d, e) {
        v.v(a);
        var g = Math.max(a.x, b),
        i = Math.max(a.y, c),
        b = Math.min(a.x + a.width, b + d),
        c = Math.min(a.y + a.height, c + e);
        a.x = g;
        a.y = i;
        a.width = Math.max(0, b - g);
        a.height = Math.max(0, c - i);
        return a
    }
    E.prototype.intersectsRect = E.prototype.Te = function(a) {
        t && v.c(a, E, E, "intersectsRect:r");
        return this.NF(a.x, a.y, a.width, a.height)
    };
    E.prototype.intersects = E.prototype.NF = function(a, b, c, d) {
        t && (v.j(a, E, "intersects:x"), v.j(b, E, "intersects:y"), v.j(a, E, "intersects:w"), v.j(b, E, "intersects:h"), (0 > c || 0 > d) && v.g("Rect.intersects:Width and height cannot be negative"));
        var e = this.width,
        g = this.x;
        if (Infinity !== e && Infinity !== c && (e += g, c += a, isNaN(c) || isNaN(e) || g > c || a > e)) return p;
        a = this.height;
        e = this.y;
        return Infinity !== a && Infinity !== d && (a += e, d += b, isNaN(d) || isNaN(a) || e > d || b > a) ? p: h
    };
    E.prototype.unionPoint = E.prototype.lv = function(a) {
        t && v.c(a, D, E, "unionPoint:p");
        return xb(this, a.x, a.y, 0, 0)
    };
    E.prototype.unionRect = E.prototype.fj = function(a) {
        t && v.c(a, E, E, "unionRect:r");
        return xb(this, a.x, a.y, a.width, a.height)
    };
    E.prototype.union = E.prototype.KK = function(a, b, c, d) {
        v.v(this);
        t ? (v.j(a, E, "union:x"), v.j(b, E, "union:y"), c === f ? c = 0 : v.j(c, E, "union:w"), d === f ? d = 0 : v.j(d, E, "union:h"), (0 > c || 0 > d) && v.g("Rect.union:Width and height cannot be negative")) : (c === f && (c = 0), d === f && (d = 0));
        return xb(this, a, b, c, d)
    };
    function xb(a, b, c, d, e) {
        var g = Math.min(a.x, b),
        i = Math.min(a.y, c),
        b = Math.max(a.x + a.width, b + d),
        c = Math.max(a.y + a.height, c + e);
        a.x = g;
        a.y = i;
        a.width = b - g;
        a.height = c - i;
        return a
    }
    E.prototype.setSpot = E.prototype.Ml = function(a, b, c) {
        t && (v.j(a, E, "setSpot:x"), v.j(b, E, "setSpot:y"), v.c(c, F, E, "setSpot:spot"));
        v.v(this);
        this.x = a - c.offsetX - c.x * this.width;
        this.y = b - c.offsetY - c.y * this.height;
        return this
    };
    var Lb;
    E.contains = Lb = function(a, b, c, d, e, g, i, j) {
        t ? (v.j(a, E, "contains:rx"), v.j(b, E, "contains:ry"), v.j(c, E, "contains:rw"), v.j(d, E, "contains:rh"), v.j(e, E, "contains:x"), v.j(g, E, "contains:y"), i === f ? i = 0 : v.j(i, E, "contains:w"), j === f ? j = 0 : v.j(j, E, "contains:h"), (0 > c || 0 > d || 0 > i || 0 > j) && v.g("Rect.contains:Width and height cannot be negative")) : (i === f && (i = 0), j === f && (j = 0));
        return a <= e && e + i <= a + c && b <= g && g + j <= b + d
    };
    E.intersects = function(a, b, c, d, e, g, i, j) {
        t && (v.j(a, E, "intersects:rx"), v.j(b, E, "intersects:ry"), v.j(c, E, "intersects:rw"), v.j(d, E, "intersects:rh"), v.j(e, E, "intersects:x"), v.j(g, E, "intersects:y"), v.j(i, E, "intersects:w"), v.j(j, E, "intersects:h"), (0 > c || 0 > d || 0 > i || 0 > j) && v.g("Rect.intersects:Width and height cannot be negative"));
        c += a;
        i += e;
        if (a > i || e > c) return p;
        a = d + b;
        j += g;
        return b > j || g > a ? p: h
    };
    v.a(E, "left", E.prototype.left);
    v.defineProperty(E, {
        left: "left"
    },
    s("x"),
    function(a) {
        v.v(this, a);
        t && v.e(a, "number", E, "left");
        this.x = a
    });
    v.a(E, "top", E.prototype.top);
    v.defineProperty(E, {
        top: "top"
    },
    s("y"),
    function(a) {
        v.v(this, a);
        t && v.e(a, "number", E, "top");
        this.y = a
    });
    v.a(E, "right", E.prototype.right);
    v.defineProperty(E, {
        right: "right"
    },
    function() {
        return this.x + this.width
    },
    function(a) {
        v.v(this, a);
        t && v.j(a, E, "right");
        this.x += a - (this.x + this.width)
    });
    v.a(E, "bottom", E.prototype.bottom);
    v.defineProperty(E, {
        bottom: "bottom"
    },
    function() {
        return this.y + this.height
    },
    function(a) {
        v.v(this, a);
        t && v.j(a, E, "top");
        this.y += a - (this.y + this.height)
    });
    v.a(E, "position", E.prototype.position);
    v.defineProperty(E, {
        position: "position"
    },
    function() {
        return new D(this.x, this.y)
    },
    function(a) {
        v.v(this, a);
        t && v.c(a, D, E, "position");
        this.x = a.x;
        this.y = a.y
    });
    v.a(E, "size", E.prototype.size);
    v.defineProperty(E, {
        size: "size"
    },
    function() {
        return new sb(this.width, this.height)
    },
    function(a) {
        v.v(this, a);
        t && v.c(a, sb, E, "size");
        this.width = a.width;
        this.height = a.height
    });
    v.a(E, "center", E.prototype.pu);
    v.defineProperty(E, {
        pu: "center"
    },
    function() {
        return new D(this.x + this.width / 2, this.y + this.height / 2)
    },
    function(a) {
        v.v(this, a);
        t && v.c(a, D, E, "center");
        this.x = a.x - this.width / 2;
        this.y = a.y - this.height / 2
    });
    v.a(E, "centerX", E.prototype.za);
    v.defineProperty(E, {
        za: "centerX"
    },
    function() {
        return this.x + this.width / 2
    },
    function(a) {
        v.v(this, a);
        t && v.j(a, E, "centerX");
        this.x = a - this.width / 2
    });
    v.a(E, "centerY", E.prototype.Aa);
    v.defineProperty(E, {
        Aa: "centerY"
    },
    function() {
        return this.y + this.height / 2
    },
    function(a) {
        v.v(this, a);
        t && v.j(a, E, "centerY");
        this.y = a - this.height / 2
    });
    E.prototype.isReal = E.prototype.aa = function() {
        return isFinite(this.x) && isFinite(this.y) && isFinite(this.width) && isFinite(this.height)
    };
    E.prototype.isEmpty = E.prototype.vJ = function() {
        return 0 === this.width && 0 === this.height
    };
    function Hb(a, b, c, d) {
        a === f ? this.left = this.bottom = this.right = this.top = 0 : b === f ? this.left = this.bottom = this.right = this.top = a: c === f ? (d = b, this.top = a, this.right = b, this.bottom = a, this.left = d) : d !== f ? (this.top = a, this.right = b, this.bottom = c, this.left = d) : v.g("Invalid arguments to Margin constructor")
    }
    v.H("Margin", Hb);
    v.pd(Hb, {
        top: h,
        right: h,
        bottom: h,
        left: h
    });
    Hb.prototype.Ra = function(a) {
        t && v.c(a, Hb, Hb, "assign:m");
        this.top = a.top;
        this.right = a.right;
        this.bottom = a.bottom;
        this.left = a.left
    };
    Hb.prototype.setTo = Hb.prototype.co = function(a, b, c, d) {
        t && (v.e(a, "number", Hb, "setTo:t"), v.e(b, "number", Hb, "setTo:r"), v.e(c, "number", Hb, "setTo:b"), v.e(d, "number", Hb, "setTo:l"));
        v.v(this);
        this.top = a;
        this.right = b;
        this.bottom = c;
        this.left = d;
        return this
    };
    Hb.prototype.set = Hb.prototype.set = function(a) {
        t && v.c(a, Hb, Hb, "assign:m");
        v.v(this);
        this.top = a.top;
        this.right = a.right;
        this.bottom = a.bottom;
        this.left = a.left;
        return this
    };
    Hb.prototype.copy = Hb.prototype.copy = function() {
        var a = new Hb;
        a.top = this.top;
        a.right = this.right;
        a.bottom = this.bottom;
        a.left = this.left;
        return a
    };
    Hb.prototype.La = function() {
        this.Ma = h;
        Object.freeze(this);
        return this
    };
    Hb.prototype.B = function() {
        return Object.isFrozen(this) ? this: this.copy().freeze()
    };
    Hb.prototype.freeze = function() {
        this.Ma = h;
        return this
    };
    Hb.prototype.qa = function() {
        Object.isFrozen(this) && v.g("cannot thaw constant: " + this);
        this.Ma = p;
        return this
    };
    Hb.parse = function(a) {
        if ("string" === typeof a) {
            for (var a = a.split(" "), b = 0, c = 0;
            "" === a[b];) b++;
            var d = a[b++];
            d && (c = parseFloat(d));
            for (var e = 0;
            "" === a[b];) b++; (d = a[b++]) && (e = parseFloat(d));
            for (var g = 0;
            "" === a[b];) b++; (d = a[b++]) && (g = parseFloat(d));
            for (var i = 0;
            "" === a[b];) b++; (d = a[b++]) && (i = parseFloat(d));
            return new Hb(c, e, g, i)
        }
        return new Hb
    };
    var Nb;
    Hb.stringify = Nb = function(a) {
        return a instanceof Hb ? a.top.toString() + " " + a.right.toString() + " " + a.bottom.toString() + " " + a.left.toString() : a.toString()
    };
    Hb.prototype.toString = function() {
        return "Margin(" + this.top + "," + this.right + "," + this.bottom + "," + this.left + ")"
    };
    Hb.prototype.equals = Hb.prototype.u = function(a) {
        return ! (a instanceof Hb) ? p: this.top === a.top && this.right === a.right && this.bottom === a.bottom && this.left === a.left
    };
    Hb.prototype.equalTo = Hb.prototype.fy = function(a, b, c, d) {
        return this.top === a && this.right === b && this.bottom === c && this.left === d
    };
    Hb.prototype.Qi = function(a) {
        return db(this.top, a.top) && db(this.right, a.right) && db(this.bottom, a.bottom) && db(this.left, a.left)
    };
    Hb.prototype.Zh = function(a) {
        return fb(this.top, a.top) && fb(this.right, a.right) && fb(this.bottom, a.bottom) && fb(this.left, a.left)
    };
    Hb.prototype.isReal = Hb.prototype.aa = function() {
        return isFinite(this.top) && isFinite(this.right) && isFinite(this.bottom) && isFinite(this.left)
    };
    function ib() {
        this.m11 = 1;
        this.m21 = this.m12 = 0;
        this.m22 = 1;
        this.Ta = this.Sa = 0
    }
    v.pd(ib, {
        m11: h,
        m12: h,
        m21: h,
        m22: h,
        Sa: h,
        Ta: h
    });
    ib.prototype.set = ib.prototype.set = function(a) {
        t && v.c(a, ib, ib, "set:t");
        this.m11 = a.m11;
        this.m12 = a.m12;
        this.m21 = a.m21;
        this.m22 = a.m22;
        this.Sa = a.Sa;
        this.Ta = a.Ta;
        return this
    };
    ib.prototype.copy = ib.prototype.copy = function() {
        var a = new ib;
        a.m11 = this.m11;
        a.m12 = this.m12;
        a.m21 = this.m21;
        a.m22 = this.m22;
        a.Sa = this.Sa;
        a.Ta = this.Ta;
        return a
    };
    ib.prototype.toString = function() {
        return "Transform(" + this.m11 + "," + this.m12 + "," + this.m21 + "," + this.m22 + "," + this.Sa + "," + this.Ta + ")"
    };
    ib.prototype.equals = ib.prototype.u = function(a) {
        return ! (a instanceof ib) ? p: this.m11 === a.m11 && this.m12 === a.m12 && this.m21 === a.m21 && this.m22 === a.m22 && this.Sa === a.Sa && this.Ta === a.Ta
    };
    ib.prototype.reset = ib.prototype.reset = function() {
        this.m11 = 1;
        this.m21 = this.m12 = 0;
        this.m22 = 1;
        this.Ta = this.Sa = 0
    };
    ib.prototype.multiply = ib.prototype.multiply = function(a) {
        t && v.c(a, ib, ib, "multiply:matrix");
        var b = this.m12 * a.m11 + this.m22 * a.m12,
        c = this.m11 * a.m21 + this.m21 * a.m22,
        d = this.m12 * a.m21 + this.m22 * a.m22,
        e = this.m11 * a.Sa + this.m21 * a.Ta + this.Sa,
        g = this.m12 * a.Sa + this.m22 * a.Ta + this.Ta;
        this.m11 = this.m11 * a.m11 + this.m21 * a.m12;
        this.m12 = b;
        this.m21 = c;
        this.m22 = d;
        this.Sa = e;
        this.Ta = g;
        return this
    };
    ib.prototype.multiplyInverted = ib.prototype.VJ = function(a) {
        t && v.c(a, ib, ib, "multiplyInverted:matrix");
        var b = 1 / (a.m11 * a.m22 - a.m12 * a.m21),
        c = a.m22 * b,
        d = -a.m12 * b,
        e = -a.m21 * b,
        g = a.m11 * b,
        i = b * (a.m21 * a.Ta - a.m22 * a.Sa),
        j = b * (a.m12 * a.Sa - a.m11 * a.Ta),
        a = this.m12 * c + this.m22 * d,
        b = this.m11 * e + this.m21 * g,
        e = this.m12 * e + this.m22 * g,
        g = this.m11 * i + this.m21 * j + this.Sa,
        i = this.m12 * i + this.m22 * j + this.Ta;
        this.m11 = this.m11 * c + this.m21 * d;
        this.m12 = a;
        this.m21 = b;
        this.m22 = e;
        this.Sa = g;
        this.Ta = i;
        return this
    };
    ib.prototype.invert = ib.prototype.Lu = function() {
        var a = 1 / (this.m11 * this.m22 - this.m12 * this.m21),
        b = -this.m12 * a,
        c = -this.m21 * a,
        d = this.m11 * a,
        e = a * (this.m21 * this.Ta - this.m22 * this.Sa),
        g = a * (this.m12 * this.Sa - this.m11 * this.Ta);
        this.m11 = this.m22 * a;
        this.m12 = b;
        this.m21 = c;
        this.m22 = d;
        this.Sa = e;
        this.Ta = g
    };
    ib.prototype.rotate = ib.prototype.rotate = function(a, b, c) {
        t && (v.j(a, ib, "rotate:angle"), v.j(b, ib, "rotate:rx"), v.j(c, ib, "rotate:ry"));
        this.translate(b, c);
        var d = a * Math.PI / 180,
        a = Math.cos(d),
        d = Math.sin(d),
        e = this.m12 * a + this.m22 * d,
        g = this.m11 * -d + this.m21 * a,
        i = this.m12 * -d + this.m22 * a;
        this.m11 = this.m11 * a + this.m21 * d;
        this.m12 = e;
        this.m21 = g;
        this.m22 = i;
        this.translate( - b, -c)
    };
    ib.prototype.translate = ib.prototype.translate = function(a, b) {
        t && (v.j(a, ib, "translate:x"), v.j(b, ib, "translate:y"));
        this.Sa += this.m11 * a + this.m21 * b;
        this.Ta += this.m12 * a + this.m22 * b
    };
    ib.prototype.scale = ib.prototype.scale = function(a, b) {
        b === f && (b = a);
        t && (v.j(a, ib, "translate:sx"), v.j(b, ib, "translate:sy"));
        this.m11 *= a;
        this.m12 *= a;
        this.m21 *= b;
        this.m22 *= b
    };
    ib.prototype.transformPoint = ib.prototype.Bb = function(a) {
        t && v.c(a, D, ib, "transformPoint:p");
        var b = a.x,
        c = a.y;
        a.x = b * this.m11 + c * this.m21 + this.Sa;
        a.y = b * this.m12 + c * this.m22 + this.Ta;
        return a
    };
    ib.prototype.invertedTransformPoint = ib.prototype.bi = function(a) {
        t && v.c(a, D, ib, "invertedTransformPoint:p");
        var b = 1 / (this.m11 * this.m22 - this.m12 * this.m21),
        c = -this.m12 * b,
        d = this.m11 * b,
        e = b * (this.m12 * this.Sa - this.m11 * this.Ta),
        g = a.x,
        i = a.y;
        a.x = g * this.m22 * b + i * -this.m21 * b + b * (this.m21 * this.Ta - this.m22 * this.Sa);
        a.y = g * c + i * d + e;
        return a
    };
    ib.prototype.transformRect = ib.prototype.ED = function(a) {
        t && v.c(a, E, ib, "transformRect:rect");
        var b = a.x,
        c = a.y,
        d = b + a.width,
        e = c + a.height,
        g = this.m11,
        i = this.m12,
        j = this.m21,
        k = this.m22,
        l = this.Sa,
        n = this.Ta,
        r = b * g + c * j + l,
        q = b * i + c * k + n,
        u = d * g + c * j + l,
        c = d * i + c * k + n,
        x = b * g + e * j + l,
        b = b * i + e * k + n,
        g = d * g + e * j + l,
        d = d * i + e * k + n,
        e = r,
        i = q,
        r = Math.min(r, u),
        e = Math.max(e, u),
        i = Math.min(i, c),
        q = Math.max(q, c),
        r = Math.min(r, x),
        e = Math.max(e, x),
        i = Math.min(i, b),
        q = Math.max(q, b),
        r = Math.min(r, g),
        e = Math.max(e, g),
        i = Math.min(i, d),
        q = Math.max(q, d);
        a.x = r;
        a.y = i;
        a.width = e - r;
        a.height = q - i
    };
    function Ob(a, b) {
        return new D(b.x * a.m11 + b.y * a.m21 + a.Sa, b.x * a.m12 + b.y * a.m22 + a.Ta)
    }
    ib.prototype.isIdentity = ib.prototype.qy = function() {
        return 1 === this.m11 && 0 === this.m12 && 0 === this.m21 && 1 === this.m22 && 0 === this.Sa && 0 === this.Ta
    };
    function F(a, b, c, d) {
        a === f ? this.offsetY = this.offsetX = this.y = this.x = 0 : (b === f && (b = 0), c === f && (c = 0), d === f && (d = 0), this.x = a, this.y = b, this.offsetX = c, this.offsetY = d)
    }
    v.H("Spot", F);
    v.pd(F, {
        x: h,
        y: h,
        offsetX: h,
        offsetY: h
    });
    F.prototype.Ra = function(a) {
        t && v.c(a, F, F, "assign:s");
        this.x = a.x;
        this.y = a.y;
        this.offsetX = a.offsetX;
        this.offsetY = a.offsetY
    };
    F.prototype.setTo = F.prototype.co = function(a, b, c, d) {
        t && (Pb(a, "setTo:x"), Pb(b, "setTo:y"), Qb(c, "setTo:offx"), Qb(d, "setTo:offy"));
        v.v(this);
        this.x = a;
        this.y = b;
        this.offsetX = c;
        this.offsetY = d;
        return this
    };
    F.prototype.set = F.prototype.set = function(a) {
        t && v.c(a, F, F, "set:s");
        v.v(this);
        this.x = a.x;
        this.y = a.y;
        this.offsetX = a.offsetX;
        this.offsetY = a.offsetY;
        return this
    };
    F.prototype.copy = F.prototype.copy = function() {
        var a = new F;
        a.x = this.x;
        a.y = this.y;
        a.offsetX = this.offsetX;
        a.offsetY = this.offsetY;
        return a
    };
    F.prototype.La = function() {
        this.Ma = h;
        Object.freeze(this);
        return this
    };
    F.prototype.B = function() {
        return Object.isFrozen(this) ? this: this.copy().freeze()
    };
    F.prototype.freeze = function() {
        this.Ma = h;
        return this
    };
    F.prototype.qa = function() {
        Object.isFrozen(this) && v.g("cannot thaw constant: " + this);
        this.Ma = p;
        return this
    };
    function Sb(a, b) {
        a.x = NaN;
        a.y = NaN;
        a.offsetX = b;
        return a
    }
    function Pb(a, b) { (isNaN(a) || 1 < a || 0 > a) && v.ha(a, "0 <= " + b + " <= 1", F, b)
    }
    function Qb(a, b) { (isNaN(a) || Infinity === a || -Infinity === a) && v.ha(a, "real number, not NaN or Infinity", F, b)
    }
    var Tb;
    F.parse = Tb = function(a) {
        if ("string" === typeof a) {
            a = a.trim();
            if ("None" === a) return v.NONE;
            if ("TopLeft" === a) return v.Lv;
            if ("Top" === a || "TopCenter" === a || "MiddleTop" === a) return v.mo;
            if ("TopRight" === a) return v.Nv;
            if ("Left" === a || "LeftCenter" === a || "MiddleLeft" === a) return v.ko;
            if ("Center" === a) return v.Bv;
            if ("Right" === a || "RightCenter" === a || "MiddleRight" === a) return v.lo;
            if ("BottomLeft" === a) return v.wv;
            if ("Bottom" === a || "BottomCenter" === a || "MiddleBottom" === a) return v.jo;
            if ("BottomRight" === a) return v.yv;
            if ("TopSide" === a) return v.Pv;
            if ("LeftSide" === a) return v.Ev;
            if ("RightSide" === a) return v.Jv;
            if ("BottomSide" === a) return v.Av;
            if ("TopBottomSides" === a) return v.Kv;
            if ("LeftRightSides" === a) return v.Dv;
            if ("TopLeftSides" === a) return v.Mv;
            if ("TopRightSides" === a) return v.Ov;
            if ("BottomLeftSides" === a) return v.xv;
            if ("BottomRightSides" === a) return v.zv;
            if ("NotTopSide" === a) return v.Iv;
            if ("NotLeftSide" === a) return v.Gv;
            if ("NotRightSide" === a) return v.Hv;
            if ("NotBottomSide" === a) return v.Fv;
            if ("AllSides" === a) return v.vv;
            if ("Default" === a) return v.Cv;
            for (var a = a.split(" "), b = 0, c = 0;
            "" === a[b];) b++;
            var d = a[b++];
            d && (c = parseFloat(d));
            for (var e = 0;
            "" === a[b];) b++; (d = a[b++]) && (e = parseFloat(d));
            for (var g = 0;
            "" === a[b];) b++; (d = a[b++]) && (g = parseFloat(d));
            for (var i = 0;
            "" === a[b];) b++; (d = a[b++]) && (i = parseFloat(d));
            return new F(c, e, g, i)
        }
        return new F
    };
    var Ub;
    F.stringify = Ub = function(a) {
        return a instanceof F ? Vb(a) ? a.x.toString() + " " + a.y.toString() + " " + a.offsetX.toString() + " " + a.offsetY.toString() : a.toString() : a.toString()
    };
    F.prototype.toString = function() {
        return Vb(this) ? 0 === this.offsetX && 0 === this.offsetY ? "Spot(" + this.x + "," + this.y + ")": "Spot(" + this.x + "," + this.y + "," + this.offsetX + "," + this.offsetY + ")": this.u(v.NONE) ? "None": this.u(v.Lv) ? "TopLeft": this.u(v.mo) ? "Top": this.u(v.Nv) ? "TopRight": this.u(v.ko) ? "Left": this.u(v.Bv) ? "Center": this.u(v.lo) ? "Right": this.u(v.wv) ? "BottomLeft": this.u(v.jo) ? "Bottom": this.u(v.yv) ? "BottomRight": this.u(v.Pv) ? "TopSide": this.u(v.Ev) ? "LeftSide": this.u(v.Jv) ? "RightSide": this.u(v.Av) ? "BottomSide": this.u(v.Kv) ? "TopBottomSides": this.u(v.Dv) ? "LeftRightSides": this.u(v.Mv) ? "TopLeftSides": this.u(v.Ov) ? "TopRightSides": this.u(v.xv) ? "BottomLeftSides": this.u(v.zv) ? "BottomRightSides": this.u(v.Iv) ? "NotTopSide": this.u(v.Gv) ? "NotLeftSide": this.u(v.Hv) ? "NotRightSide": this.u(v.Fv) ? "NotBottomSide": this.u(v.vv) ? "AllSides": this.u(v.Cv) ? "Default": "None"
    };
    F.prototype.equals = F.prototype.u = function(a) {
        return ! (a instanceof F) ? p: (this.x === a.x || isNaN(this.x) && isNaN(a.x)) && (this.y === a.y || isNaN(this.y) && isNaN(a.y)) && this.offsetX === a.offsetX && this.offsetY === a.offsetY
    };
    F.prototype.opposite = F.prototype.WJ = function() {
        return new F(0.5 - (this.x - 0.5), 0.5 - (this.y - 0.5), -this.offsetX, -this.offsetY)
    };
    F.prototype.includesSide = F.prototype.mJ = function(a) {
        if (!Yb(this) || !Yb(a)) return p;
        a = a.offsetY;
        return (this.offsetY & a) === a
    };
    function Vb(a) {
        return ! isNaN(a.x) && !isNaN(a.y)
    }
    function Zb(a) {
        return isNaN(a.x) || isNaN(a.y)
    }
    function Yb(a) {
        return Zb(a) && 1 === a.offsetX && 0 !== a.offsetY
    }
    function $b(a) {
        return isNaN(a.x) && isNaN(a.y) && -1 === a.offsetX && 0 === a.offsetY
    }
    v.Uc = 1;
    v.Bc = 2;
    v.Nc = 4;
    v.Mc = 8;
    v.NONE = Sb(new F(0, 0, 0, 0), 0).La();
    v.Cv = Sb(new F(0, 0, -1, 0), -1).La();
    v.Lv = (new F(0, 0, 0, 0)).La();
    v.mo = (new F(0.5, 0, 0, 0)).La();
    v.Nv = (new F(1, 0, 0, 0)).La();
    v.ko = (new F(0, 0.5, 0, 0)).La();
    v.Bv = (new F(0.5, 0.5, 0, 0)).La();
    v.lo = (new F(1, 0.5, 0, 0)).La();
    v.wv = (new F(0, 1, 0, 0)).La();
    v.jo = (new F(0.5, 1, 0, 0)).La();
    v.yv = (new F(1, 1, 0, 0)).La();
    v.Pv = Sb(new F(0, 0, 1, v.Uc), 1).La();
    v.Ev = Sb(new F(0, 0, 1, v.Bc), 1).La();
    v.Jv = Sb(new F(0, 0, 1, v.Nc), 1).La();
    v.Av = Sb(new F(0, 0, 1, v.Mc), 1).La();
    v.Kv = Sb(new F(0, 0, 1, v.Uc | v.Mc), 1).La();
    v.Dv = Sb(new F(0, 0, 1, v.Bc | v.Nc), 1).La();
    v.Mv = Sb(new F(0, 0, 1, v.Uc | v.Bc), 1).La();
    v.Ov = Sb(new F(0, 0, 1, v.Uc | v.Nc), 1).La();
    v.xv = Sb(new F(0, 0, 1, v.Mc | v.Bc), 1).La();
    v.zv = Sb(new F(0, 0, 1, v.Mc | v.Nc), 1).La();
    v.Iv = Sb(new F(0, 0, 1, v.Bc | v.Nc | v.Mc), 1).La();
    v.Gv = Sb(new F(0, 0, 1, v.Uc | v.Nc | v.Mc), 1).La();
    v.Hv = Sb(new F(0, 0, 1, v.Uc | v.Bc | v.Mc), 1).La();
    v.Fv = Sb(new F(0, 0, 1, v.Uc | v.Bc | v.Nc), 1).La();
    v.vv = Sb(new F(0, 0, 1, v.Uc | v.Bc | v.Nc | v.Mc), 1).La();
    var ac;
    F.None = ac = v.NONE;
    var ec;
    F.Default = ec = v.Cv;
    var fc;
    F.TopLeft = fc = v.Lv;
    var kc;
    F.TopCenter = kc = v.mo;
    var lc;
    F.TopRight = lc = v.Nv;
    F.LeftCenter = v.ko;
    var mc;
    F.Center = mc = v.Bv;
    F.RightCenter = v.lo;
    var nc;
    F.BottomLeft = nc = v.wv;
    var sc;
    F.BottomCenter = sc = v.jo;
    var tc;
    F.BottomRight = tc = v.yv;
    var uc;
    F.MiddleTop = uc = v.mo;
    var Ac;
    F.MiddleLeft = Ac = v.ko;
    var Bc;
    F.MiddleRight = Bc = v.lo;
    var Cc;
    F.MiddleBottom = Cc = v.jo;
    F.Top = v.mo;
    F.Left = v.ko;
    F.Right = v.lo;
    F.Bottom = v.jo;
    var Dc;
    F.TopSide = Dc = v.Pv;
    var Ec;
    F.LeftSide = Ec = v.Ev;
    var Fc;
    F.RightSide = Fc = v.Jv;
    var Lc;
    F.BottomSide = Lc = v.Av;
    F.TopBottomSides = v.Kv;
    F.LeftRightSides = v.Dv;
    F.TopLeftSides = v.Mv;
    F.TopRightSides = v.Ov;
    F.BottomLeftSides = v.xv;
    F.BottomRightSides = v.zv;
    F.NotTopSide = v.Iv;
    F.NotLeftSide = v.Gv;
    F.NotRightSide = v.Hv;
    F.NotBottomSide = v.Fv;
    var Mc;
    F.AllSides = Mc = v.vv;
    var Nc = 4 * ((Math.sqrt(2) - 1) / 3),
    Oc = (new D(0, 0)).La(),
    Vc = (new sb(Infinity, Infinity)).La(),
    Wc = (new D( - Infinity, -Infinity)).La(),
    Xc = (new D(Infinity, Infinity)).La(),
    Yc = (new sb(0, 0)).La(),
    Zc = (new D(NaN, NaN)).La();
    function fb(a, b) {
        var c = a - b;
        return 0.5 > c && -0.5 < c
    }
    function db(a, b) {
        var c = a - b;
        return 5E-8 > c && -5E-8 < c
    }
    function $c(a, b, c, d, e, g, i) {
        0 >= e && (e = 1E-6);
        var j, k, l, n;
        a < c ? (k = a, j = c) : (k = c, j = a);
        b < d ? (n = b, l = d) : (n = d, l = b);
        if (a === c) return n <= i && i <= l && a - e <= g && g <= a + e;
        if (b === d) return k <= g && g <= j && b - e <= i && i <= b + e;
        j += e;
        k -= e;
        if (k <= g && g <= j && (l += e, n -= e, n <= i && i <= l)) if (j - k > l - n) if (a - c > e || c - a > e) {
            if (g = (d - b) / (c - a) * (g - a) + b, g - e <= i && i <= g + e) return h
        } else return h;
        else if (b - d > e || d - b > e) {
            if (i = (c - a) / (d - b) * (i - b) + a, i - e <= g && g <= i + e) return h
        } else return h;
        return p
    }
    function fd(a, b, c, d, e, g, i, j, k, l, n) {
        if (!$c(a, b, i, j, k, c, d) || !$c(a, b, i, j, k, e, g)) {
            var r = (a + c) / 2,
            q = (b + d) / 2,
            u = (c + e) / 2,
            x = (d + g) / 2,
            e = (e + i) / 2,
            g = (g + j) / 2,
            d = (r + u) / 2,
            c = (q + x) / 2,
            u = (u + e) / 2,
            x = (x + g) / 2,
            z = (d + u) / 2,
            C = (c + x) / 2;
            return fd(a, b, r, q, d, c, z, C, k, l, n) || fd(z, C, u, x, e, g, i, j, k, l, n)
        }
        return $c(a, b, i, j, k, l, n)
    }
    function gd(a, b, c, d, e, g, i, j, k, l) {
        if (!$c(a, b, i, j, k, c, d) || !$c(a, b, i, j, k, e, g)) {
            var n = (a + c) / 2,
            r = (b + d) / 2,
            q = (c + e) / 2,
            u = (d + g) / 2,
            e = (e + i) / 2,
            g = (g + j) / 2,
            d = (n + q) / 2,
            c = (r + u) / 2,
            q = (q + e) / 2,
            u = (u + g) / 2,
            x = (d + q) / 2,
            z = (c + u) / 2;
            gd(a, b, n, r, d, c, x, z, k, l);
            gd(x, z, q, u, e, g, i, j, k, l)
        } else xb(l, a, b, 0, 0),
        xb(l, i, j, 0, 0)
    }
    function hd(a, b, c, d, e, g, i, j, k) {
        if ($c(a, b, e, g, i, c, d)) return $c(a, b, e, g, i, j, k);
        var l = (a + c) / 2,
        n = (b + d) / 2,
        c = (c + e) / 2,
        d = (d + g) / 2,
        r = (l + c) / 2,
        q = (n + d) / 2;
        return hd(a, b, l, n, r, q, i, j, k) || hd(r, q, c, d, e, g, i, j, k)
    }
    function id(a, b, c, d, e, g, i, j) {
        if ($c(a, b, e, g, i, c, d)) xb(j, a, b, 0, 0),
        xb(j, e, g, 0, 0);
        else {
            var k = (a + c) / 2,
            l = (b + d) / 2,
            c = (c + e) / 2,
            d = (d + g) / 2,
            n = (k + c) / 2,
            r = (l + d) / 2;
            id(a, b, k, l, n, r, i, j);
            id(n, r, c, d, e, g, i, j)
        }
    }
    function jd(a, b, c, d, e, g, i, j, k, l, n, r, q, u) {
        0 >= q && (q = 1E-6);
        if (!$c(a, b, i, j, q, c, d) || !$c(a, b, i, j, q, e, g)) {
            var x = (a + c) / 2,
            z = (b + d) / 2,
            c = (c + e) / 2,
            d = (d + g) / 2,
            e = (e + i) / 2,
            g = (g + j) / 2,
            C = (x + c) / 2,
            G = (z + d) / 2,
            c = (c + e) / 2,
            d = (d + g) / 2,
            H = (C + c) / 2,
            I = (G + d) / 2,
            M = (n - k) * (n - k) + (r - l) * (r - l),
            T = p;
            jd(a, b, x, z, C, G, H, I, k, l, n, r, q, u) && (a = (u.x - k) * (u.x - k) + (u.y - l) * (u.y - l), a < M && (M = a, T = h));
            b = u.x;
            x = u.y;
            jd(H, I, c, d, e, g, i, j, k, l, n, r, q, u) && (a = (u.x - k) * (u.x - k) + (u.y - l) * (u.y - l), a < M ? T = h: (u.x = b, u.y = x));
            return T
        }
        x = (a - i) * (l - r) - (b - j) * (k - n);
        if (!x) return p;
        q = ((a * j - b * i) * (k - n) - (a - i) * (k * r - l * n)) / x;
        x = ((a * j - b * i) * (l - r) - (b - j) * (k * r - l * n)) / x;
        if ((k > n ? k - n: n - k) < (l > r ? l - r: r - l)) {
            if (b < j ? (k = b, i = j) : (k = j, i = b), x < k || x > i) return p
        } else if (a < i ? k = a: (k = i, i = a), q < k || q > i) return p;
        u.x = q;
        u.y = x;
        return h
    }
    function kd(a, b, c, d, e, g, i, j, k, l, n, r, q) {
        var u = 0;
        0 >= q && (q = 1E-6);
        if (!$c(a, b, i, j, q, c, d) || !$c(a, b, i, j, q, e, g)) var x = (a + c) / 2,
        z = (b + d) / 2,
        C = (c + e) / 2,
        G = (d + g) / 2,
        e = (e + i) / 2,
        g = (g + j) / 2,
        d = (x + C) / 2,
        c = (z + G) / 2,
        C = (C + e) / 2,
        G = (G + g) / 2,
        H = (d + C) / 2,
        I = (c + G) / 2,
        u = u + kd(a, b, x, z, d, c, H, I, k, l, n, r, q),
        u = u + kd(H, I, C, G, e, g, i, j, k, l, n, r, q);
        else {
            q = (a - i) * (l - r) - (b - j) * (k - n);
            if (!q) return u;
            x = ((a * j - b * i) * (k - n) - (a - i) * (k * r - l * n)) / q;
            z = ((a * j - b * i) * (l - r) - (b - j) * (k * r - l * n)) / q;
            if (x >= n) return u;
            if ((k > n ? k - n: n - k) < (l > r ? l - r: r - l)) {
                if (b < j ? (k = b, a = j) : (k = j, a = b), z < k || z > a) return u
            } else if (a < i ? (k = a, a = i) : k = i, x < k || x > a) return u;
            0 < q ? u++:0 > q && u--
        }
        return u
    }
    function ld(a, b, c, d, e, g, i) {
        if (db(a, c)) {
            var j;
            b < d ? (j = b, c = d) : (j = d, c = b);
            d = g;
            if (d < j) return i.x = a,
            i.y = j,
            p;
            if (d > c) return i.x = a,
            i.y = c,
            p;
            i.x = a;
            i.y = d;
            return h
        }
        if (db(b, d)) {
            a < c ? j = a: (j = c, c = a);
            d = e;
            if (d < j) return i.x = j,
            i.y = b,
            p;
            if (d > c) return i.x = c,
            i.y = b,
            p;
            i.x = d;
            i.y = b;
            return h
        }
        j = ((a - e) * (a - c) + (b - g) * (b - d)) / ((c - a) * (c - a) + (d - b) * (d - b));
        if ( - 5E-6 > j) return i.x = a,
        i.y = b,
        p;
        if (1.000005 < j) return i.x = c,
        i.y = d,
        p;
        i.x = a + j * (c - a);
        i.y = b + j * (d - b);
        return h
    }
    function ud(a, b, c, d, e, g, i, j, k) {
        if (fb(a, c) && fb(b, d)) return k.x = a,
        k.y = b,
        p;
        if (db(e, i)) {
            if (db(a, c)) return ld(a, b, c, d, e, g, k),
            p;
            g = (d - b) / (c - a) * (e - a) + b;
            return ld(a, b, c, d, e, g, k)
        }
        j = (j - g) / (i - e);
        if (db(a, c)) {
            g = j * (a - e) + g;
            b < d ? (i = b, c = d) : (i = d, c = b);
            if (g < i) return k.x = a,
            k.y = i,
            p;
            if (g > c) return k.x = a,
            k.y = c,
            p;
            k.x = a;
            k.y = g;
            return h
        }
        i = (d - b) / (c - a);
        if (db(j, i)) return ld(a, b, c, d, e, g, k),
        p;
        e = (i * a - j * e + g - b) / (i - j);
        if (db(i, 0)) {
            a < c ? i = a: (i = c, c = a);
            if (e < i) return k.x = i,
            k.y = b,
            p;
            if (e > c) return k.x = c,
            k.y = b,
            p;
            k.x = e;
            k.y = b;
            return h
        }
        g = i * (e - a) + b;
        return ld(a, b, c, d, e, g, k)
    }
    function vd(a, b, c, d, e, g, i, j, k) {
        function l(c, d) {
            var e = (c - a) * (c - a) + (d - b) * (d - b);
            e < n && (n = e, k.x = c, k.y = d)
        }
        var n = Infinity;
        l(k.x, k.y);
        var r, q, u, x;
        e < i ? (r = e, q = i) : (r = i, q = e);
        g < j ? (u = e, x = i) : (u = i, x = e);
        r = (q - r) / 2 + 0;
        u = (x - u) / 2 + 0;
        e = (e + i) / 2;
        g = (g + j) / 2;
        0 === r || 0 === u || (0.5 > (c > a ? c - a: a - c) ? (r = 1 - (c - e) * (c - e) / (r * r), 0 > r || (r = Math.sqrt(r), d = -u * r + g, l(c, u * r + g), l(c, d))) : (c = (d - b) / (c - a), d = 1 / (r * r) + c * c / (u * u), j = 2 * c * (b - c * a) / (u * u) - 2 * c * g / (u * u) - 2 * e / (r * r), u = j * j - 4 * d * (2 * c * a * g / (u * u) - 2 * b * g / (u * u) + g * g / (u * u) + e * e / (r * r) - 1 + (b - c * a) * (b - c * a) / (u * u)), 0 > u || (r = Math.sqrt(u), u = ( - j + r) / (2 * d), l(u, c * u - c * a + b), u = ( - j - r) / (2 * d), l(u, c * u - c * a + b))))
    }
    function wd(a, b, c, d) {
        var e = a.left,
        g = a.right,
        i = a.top,
        a = a.bottom,
        j = b.x,
        b = b.y,
        k = c.x,
        c = c.y,
        l = 1E21,
        n = e,
        r = i;
        if (ud(e, i, e, a, j, b, k, c, d)) {
            var q = (d.x - j) * (d.x - j) + (d.y - b) * (d.y - b);
            q < l && (l = q, n = d.x, r = d.y)
        }
        ud(g, i, g, a, j, b, k, c, d) && (q = (d.x - j) * (d.x - j) + (d.y - b) * (d.y - b), q < l && (l = q, n = d.x, r = d.y));
        ud(e, i, g, i, j, b, k, c, d) && (q = (d.x - j) * (d.x - j) + (d.y - b) * (d.y - b), q < l && (l = q, n = d.x, r = d.y));
        ud(e, a, g, a, j, b, k, c, d) && (q = (d.x - j) * (d.x - j) + (d.y - b) * (d.y - b), q < l && (l = q, n = d.x, r = d.y));
        d.x = n;
        d.y = r;
        return 1E21 > l
    }
    function xd(a, b, c) {
        var d = b.x,
        e = b.y,
        g = c.x,
        i = c.y,
        j = a.left,
        k = a.right,
        l = a.top,
        n = a.bottom;
        return d === g ? (e < i ? (a = e, g = i) : (a = i, g = e), j <= d && d <= k && a <= n && g >= l) : e === i ? (d < g ? a = d: (a = g, g = d), l <= e && e <= n && a <= k && g >= j) : a.fa(b) || a.fa(c) || zd(j, l, k, l, d, e, g, i) || zd(k, l, k, n, d, e, g, i) || zd(k, n, j, n, d, e, g, i) || zd(j, n, j, l, d, e, g, i) ? h: p
    }
    function zd(a, b, c, d, e, g, i, j) {
        return 0 >= Dd(a, b, c, d, e, g) * Dd(a, b, c, d, i, j) && 0 >= Dd(e, g, i, j, a, b) * Dd(e, g, i, j, c, d)
    }
    function Dd(a, b, c, d, e, g) {
        c -= a;
        d -= b;
        a = e - a;
        b = g - b;
        g = a * d - b * c;
        0 === g && (g = a * c + b * d, 0 < g && (g = (a - c) * c + (b - d) * d, 0 > g && (g = 0)));
        return 0 > g ? -1 : 0 < g ? 1 : 0
    }
    function Ed(a) {
        0 > a && (a += 360);
        360 <= a && (a -= 360);
        return a
    }
    function Fd(a, b, c, d, e, g) {
        var c = Math.floor((a - c) / e) * e + c,
        d = Math.floor((b - d) / g) * g + d,
        i = c;
        c + e - a < e / 2 && (i = c + e);
        a = d;
        d + g - b < g / 2 && (a = d + g);
        return new D(i, a)
    }
    function Gd(a, b) {
        var c = Math.max(a, b),
        d = Math.min(a, b),
        e = 1,
        g = 1;
        do e = c % d,
        c = g = d,
        d = e;
        while (0 < e);
        return g
    }
    function Hd(a) {
        v.Ob(this);
        a === f ? a = Id: t && v.Va(a, Hd, Hd, "constructor:type");
        this.K = a;
        this.Oc = this.Dc = this.cc = this.Rb = 0;
        this.Lk = new y(Pd);
        this.Os = this.Lk.ub;
        this.Cs = (new E).freeze();
        this.Ia = h;
        this.cH = new D;
        this.Hh = fc;
        this.Ih = tc;
        this.Vs = this.Ws = NaN;
        this.wd = Yc;
        this.Pb = Qd
    }
    v.H("Geometry", Hd);
    Hd.prototype.copy = Hd.prototype.copy = function() {
        var a = new Hd;
        a.K = this.K;
        a.Rb = this.Rb;
        a.cc = this.cc;
        a.Dc = this.Dc;
        a.Oc = this.Oc;
        for (var b = this.Lk,
        c = b.length,
        d = a.Lk,
        e = 0; e < c; e++) {
            var g = b.i[e].copy();
            d.add(g)
        }
        a.Os = this.Os;
        a.Cs.Ra(this.Cs);
        a.Ia = this.Ia;
        a.Hh = this.Hh.B();
        a.Ih = this.Ih.B();
        a.Ws = this.Ws;
        a.Vs = this.Vs;
        a.wd = this.wd.B();
        a.Pb = this.Pb;
        return a
    };
    var Rd;
    Hd.Line = Rd = v.l(Hd, "Line", 0);
    var Sd;
    Hd.Rectangle = Sd = v.l(Hd, "Rectangle", 1);
    var Td;
    Hd.Ellipse = Td = v.l(Hd, "Ellipse", 2);
    var Id;
    Hd.Path = Id = v.l(Hd, "Path", 3);
    Hd.prototype.La = function() {
        this.freeze();
        Object.freeze(this);
        return this
    };
    Hd.prototype.freeze = function() {
        this.Ma = h;
        var a = this.Kb;
        a.freeze();
        for (var b = a.length,
        c = 0; c < b; c++) a.i[c].freeze();
        return this
    };
    Hd.prototype.qa = function() {
        Object.isFrozen(this) && v.g("cannot thaw constant: " + this);
        this.Ma = p;
        var a = this.Kb;
        a.qa();
        for (var b = a.length,
        c = 0; c < b; c++) a.i[c].qa();
        return this
    };
    Hd.prototype.equalsApprox = Hd.prototype.Qi = function(a) {
        if (! (a instanceof Hd)) return p;
        if (this.type !== a.type) return this.type === Rd && a.type === Id ? Xd(this, a) : a.type === Rd && this.type === Id ? Xd(a, this) : p;
        if (this.type === Id) {
            var b = this.Kb,
            a = a.Kb,
            c = b.length;
            if (c !== a.length) return p;
            for (var d = 0; d < c; d++) if (!b.i[d].Qi(a.i[d])) return p;
            return h
        }
        return fb(this.Ca, a.Ca) && fb(this.Da, a.Da) && fb(this.N, a.N) && fb(this.O, a.O)
    };
    function Xd(a, b) {
        if (a.type !== Rd || b.type !== Id) return p;
        if (1 === b.Kb.count) {
            var c = b.Kb.Z(0);
            if (1 === c.gb.count && (fb(a.Ca, c.Ca) && fb(a.Da, c.Da)) && (c = c.gb.Z(0), c.type === $d && fb(a.N, c.N) && fb(a.O, c.O))) return h
        }
        return p
    }
    Hd.prototype.toString = function(a) {
        switch (this.type) {
        case Rd:
            return "M" + this.Ca.toFixed(a) + " " + this.Da.toFixed(a) + "L" + this.N.toFixed(a) + " " + this.O.toFixed(a);
        case Sd:
            var b = new E(this.Ca, this.Da, 0, 0);
            xb(b, this.N, this.O, 0, 0);
            return "M" + b.x.toFixed(a) + " " + b.y.toFixed(a) + "H" + b.right.toFixed(a) + "V" + b.bottom.toFixed(a) + "H" + b.left.toFixed(a) + "z";
        case Td:
            b = new E(this.Ca, this.Da, 0, 0);
            xb(b, this.N, this.O, 0, 0);
            var c = b.left.toFixed(a) + " " + (b.y + b.height / 2).toFixed(a);
            return "M" + c + "A" + (b.width / 2).toFixed(a) + " " + (b.height / 2).toFixed(a) + " 0 0 1 " + (b.right.toFixed(a) + " " + (b.y + b.height / 2).toFixed(a)) + "A" + (b.width / 2).toFixed(a) + " " + (b.height / 2).toFixed(a) + " 0 0 1 " + c;
        case Id:
            for (var b = "",
            c = this.Kb,
            d = c.length,
            e = 0; e < d; e++) {
                var g = c.i[e];
                0 < e && (b += " ");
                b += g.toString(a)
            }
            return b;
        default:
            return this.type.toString()
        }
    };
    var ae;
    Hd.parse = ae = function(a, b) {
        function c() {
            return l >= x - 1 ? h: k[l + 1].match(/[A-Za-z]/) !== m
        }
        function d() {
            l++;
            return k[l]
        }
        function e() {
            var a = new D(parseFloat(d()), parseFloat(d()));
            n === n.toLowerCase() && (a.x = u.x + a.x, a.y = u.y + a.y);
            return a
        }
        function g() {
            return u = e()
        }
        function i() {
            return q = e()
        }
        function j() {
            return "c" !== r.toLowerCase() && "s" !== r.toLowerCase() ? u: new D(2 * u.x - q.x, 2 * u.y - q.y)
        }
        b === f && (b = h);
        var a = a.replace(/,/gm, " "),
        a = a.replace(/([MmZzLlHhVvCcSsQqTtAaFf])([MmZzLlHhVvCcSsQqTtAaFf])/gm, "$1 $2"),
        a = a.replace(/([MmZzLlHhVvCcSsQqTtAaFf])([MmZzLlHhVvCcSsQqTtAaFf])/gm, "$1 $2"),
        a = a.replace(/([MmZzLlHhVvCcSsQqTtAaFf])([^\s])/gm, "$1 $2"),
        a = a.replace(/([^\s])([MmZzLlHhVvCcSsQqTtAaFf])/gm, "$1 $2"),
        a = a.replace(/([0-9])([+\-])/gm, "$1 $2"),
        a = a.replace(/(\.[0-9]*)(\.)/gm, "$1 $2"),
        a = a.replace(/([Aa](\s+[0-9]+){3})\s+([01])\s*([01])/gm, "$1 $3 $4 "),
        a = a.replace(/[\s\r\t\n]+/gm, " "),
        a = a.replace(/^\s+|\s+$/g, ""),
        k = a.split(" "),
        l = -1,
        n = "",
        r = "";
        new D(0, 0);
        for (var q = new D(0, 0), u = new D(0, 0), x = k.length, z = new J, C; ! (l >= x - 1);) if (r = n, n = d(), "" !== n) switch (n.toUpperCase()) {
        case "M":
            C = g();
            for (z.fc === m ? K(z, C.x, C.y, p, p) : z.moveTo(C.x, C.y); ! c();) C = g(),
            z.lineTo(C.x, C.y);
            break;
        case "L":
            for (; ! c();) C = g(),
            z.lineTo(C.x, C.y);
            break;
        case "H":
            for (; ! c();) u = C = new D((n === n.toLowerCase() ? u.x: 0) + parseFloat(d()), u.y),
            z.lineTo(u.x, u.y);
            break;
        case "V":
            for (; ! c();) u = C = new D(u.x, (n === n.toLowerCase() ? u.y: 0) + parseFloat(d())),
            z.lineTo(u.x, u.y);
            break;
        case "C":
            for (; ! c();) {
                C = e();
                var G = i(),
                H = g();
                L(z, C.x, C.y, G.x, G.y, H.x, H.y)
            }
            break;
        case "S":
            for (; ! c();) C = j(),
            G = i(),
            H = g(),
            L(z, C.x, C.y, G.x, G.y, H.x, H.y);
            break;
        case "Q":
            for (; ! c();) G = i(),
            H = g(),
            be(z, G.x, G.y, H.x, H.y);
            break;
        case "T":
            for (; ! c();) q = G = j(),
            H = g(),
            be(z, G.x, G.y, H.x, H.y);
            break;
        case "B":
            for (; ! c();) C = [parseFloat(d()), parseFloat(d()), parseFloat(d()), parseFloat(d()), parseFloat(d())],
            c() || (C.push(parseFloat(d())), c() || C.push(parseFloat(d()))),
            n === n.toLowerCase() && (C[2] += u.x, C[3] += u.y),
            z.arcTo(C[0], C[1], C[2], C[3], C[4], C[5], C[6]);
            break;
        case "Z":
            ce(z);
            break;
        case "F":
            b = h
        }
        z = z.k;
        if (b) for (C = z.Kb.f; C.next();) C.value.Gr = h;
        return z
    };
    Hd.prototype.ry = function() {
        if (this.Ia) return h;
        var a = this.Kb;
        if (this.Os !== a.ub) return h;
        for (var b = a.length,
        c = 0; c < b; c++) if (a.i[c].ry()) return h;
        return p
    };
    Hd.prototype.jz = function() {
        this.Ia = p;
        var a = this.Kb;
        this.Os = a.ub;
        for (var b = a.length,
        c = 0; c < b; c++) a.i[c].jz()
    };
    Hd.prototype.Me = function() {
        var a = this.Cs;
        a.qa();
        a.reset();
        a.HG(this.wd);
        switch (this.type) {
        case Rd:
        case Sd:
        case Td:
            xb(a, this.Rb, this.cc, 0, 0);
            xb(a, this.Dc, this.Oc, 0, 0);
            break;
        case Id:
            for (var b = this.Kb,
            c = b.length,
            d = 0; d < c; d++) {
                var e = b.i[d];
                xb(a, e.Ca, e.Da, 0, 0);
                for (var g = e.gb,
                i = g.length,
                j = e.Ca,
                e = e.Da,
                k = 0; k < i; k++) {
                    var l = g.i[k];
                    switch (l.type) {
                    case $d:
                    case de:
                        j = l.N;
                        e = l.O;
                        xb(a, j, e, 0, 0);
                        break;
                    case ee:
                        gd(j, e, l.zc, l.rd, l.qk, l.rk, l.N, l.O, 0.5, a);
                        j = l.N;
                        e = l.O;
                        break;
                    case me:
                        id(j, e, l.zc, l.rd, l.N, l.O, 0.5, a);
                        j = l.N;
                        e = l.O;
                        break;
                    case ne:
                        for (var l = oe(l), n = l.length, r = m, d = 0; d < n; d++) r = l[d],
                        gd(r.Sl, r.Tl, r.rv, r.tv, r.sv, r.uv, r.yk, r.zk, 0.5, a);
                        r !== m && (j = r.yk, e = r.zk);
                        break;
                    default:
                        v.g("Unknown Segment type: " + l.type)
                    }
                }
            }
            break;
        default:
            v.g("Unknown Geometry type: " + this.type)
        }
        xb(a, 0, 0, 0, 0);
        a.freeze()
    };
    Hd.prototype.fa = function(a, b, c, d) {
        for (var e = a.x,
        g = a.y,
        i = this.lb.x - 20,
        a = a.y,
        j = 0,
        k, l, n, r, q, u, x, z = this.Kb.i,
        C = z.length,
        G = 0; G < C; G++) {
            var H = z[G];
            if (H.Gr) {
                if (c && H.fa(e, g, b)) return h;
                var I = H.gb;
                k = H.Ca;
                l = H.Da;
                for (var M = k,
                T = l,
                la = 0; la <= I.length; la++) {
                    la !== I.length ? (n = I.i[la], r = n.type, u = n.N, x = n.O) : (r = $d, u = H.Ca, x = H.Da);
                    switch (r) {
                    case de:
                        q = pe(e, g, i, a, k, l, M, T);
                        if (q === h) return h;
                        j += q;
                        M = u;
                        T = x;
                        break;
                    case $d:
                        q = pe(e, g, i, a, k, l, u, x);
                        if (q === h) return h;
                        j += q;
                        break;
                    case ee:
                        q = kd(k, l, n.zc, n.rd, n.qk, n.rk, u, x, i, a, e, g, 0.5);
                        j += q;
                        break;
                    case me:
                        q = kd(k, l, (k + 2 * n.zc) / 3, (l + 2 * n.rd) / 3, (n.zc + 2 * u) / 3, (n.zc + 2 * u) / 3, u, x, i, a, e, g, 0.5);
                        j += q;
                        break;
                    case ne:
                        r = oe(n);
                        for (var fa = r.length,
                        Ca = m,
                        ra = 0; ra < fa; ra++) {
                            Ca = r[ra];
                            if (0 === ra) {
                                q = pe(e, g, i, a, k, l, Ca.Sl, Ca.Tl);
                                if (q === h) return h;
                                j += q
                            }
                            q = kd(Ca.Sl, Ca.Tl, Ca.rv, Ca.tv, Ca.sv, Ca.uv, Ca.yk, Ca.zk, i, a, e, g, 0.5);
                            j += q
                        }
                        Ca !== m && (u = Ca.yk, x = Ca.zk);
                        break;
                    default:
                        v.g("Unknown Segment type: " + n.type)
                    }
                    k = u;
                    l = x
                }
                if (0 !== j) return h;
                j = 0
            } else if (H.fa(e, g, d ? b: b + 2)) return h
        }
        return 0 !== j
    };
    function pe(a, b, c, d, e, g, i, j) {
        if ($c(e, g, i, j, 0.05, a, b)) return h;
        var k = (a - c) * (g - j);
        if (0 === k) return 0;
        var l = ((a * d - b * c) * (e - i) - (a - c) * (e * j - g * i)) / k,
        b = (a * d - b * c) * (g - j) / k;
        if (l >= a) return 0;
        if ((e > i ? e - i: i - e) < (g > j ? g - j: j - g)) {
            if (g < j ? (a = g, e = j) : (a = j, e = g), b < a || b > e) return 0
        } else if (e < i ? (a = e, e = i) : a = i, l < a || l > e) return 0;
        return 0 < k ? 1 : -1
    }
    function qe(a, b, c, d) {
        for (var e = a.Kb.length,
        g = 0; g < e; g++) if (a.Kb.i[g].fa(b, c, d)) return h;
        return p
    }
    v.a(Hd, "type", Hd.prototype.type);
    v.defineProperty(Hd, {
        type: "type"
    },
    s("K"),
    function(a) {
        this.K !== a && (t && v.Va(a, Hd, Hd, "type"), v.v(this, a), this.K = a, this.Ia = h)
    });
    v.a(Hd, "startX", Hd.prototype.Ca);
    v.defineProperty(Hd, {
        Ca: "startX"
    },
    s("Rb"),
    function(a) {
        this.Rb !== a && (t && v.j(a, Hd, "startX"), v.v(this, a), this.Rb = a, this.Ia = h)
    });
    v.a(Hd, "startY", Hd.prototype.Da);
    v.defineProperty(Hd, {
        Da: "startY"
    },
    s("cc"),
    function(a) {
        this.cc !== a && (t && v.j(a, Hd, "startY"), v.v(this, a), this.cc = a, this.Ia = h)
    });
    v.a(Hd, "endX", Hd.prototype.N);
    v.defineProperty(Hd, {
        N: "endX"
    },
    s("Dc"),
    function(a) {
        this.Dc !== a && (t && v.j(a, Hd, "endX"), v.v(this, a), this.Dc = a, this.Ia = h)
    });
    v.a(Hd, "endY", Hd.prototype.O);
    v.defineProperty(Hd, {
        O: "endY"
    },
    s("Oc"),
    function(a) {
        this.Oc !== a && (t && v.j(a, Hd, "endY"), v.v(this, a), this.Oc = a, this.Ia = h)
    });
    v.a(Hd, "figures", Hd.prototype.Kb);
    v.defineProperty(Hd, {
        Kb: "figures"
    },
    s("Lk"),
    function(a) {
        this.Lk !== a && (t && v.c(a, y, Hd, "figures"), v.v(this, a), this.Lk = a, this.Ia = h)
    });
    v.defineProperty(Hd, {
        n: "spot1"
    },
    s("Hh"),
    function(a) {
        t && v.c(a, F, Hd, "spot1");
        v.v(this, a);
        this.Hh = a.B()
    });
    v.defineProperty(Hd, {
        o: "spot2"
    },
    s("Ih"),
    function(a) {
        t && v.c(a, F, Hd, "spot2");
        v.v(this, a);
        this.Ih = a.B()
    });
    v.m(Hd, {
        lb: "bounds"
    },
    function() {
        this.ry() && (this.jz(), this.Me());
        return this.Cs
    });
    v.a(Hd, "minSize", Hd.prototype.Xd);
    v.defineProperty(Hd, {
        Xd: "minSize"
    },
    s("wd"),
    function(a) {
        this.wd.u(a) || (t && v.c(a, sb, Hd, "minSize"), a = a.B(), isNaN(a.width) && (a.width = 0), isNaN(a.height) && (a.height = 0), a.freeze(), this.wd = a)
    });
    function Pd(a, b, c) {
        v.Ob(this);
        c === f && (c = h);
        this.op = c;
        this.Qf = h;
        this.at = p;
        a !== f ? (t && v.j(a, Pd, "sx"), this.Rb = a) : this.Rb = 0;
        b !== f ? (t && v.j(b, Pd, "sy"), this.cc = b) : this.cc = 0;
        this.Aq = new y(re);
        this.Pt = this.Aq.ub;
        this.Ia = h
    }
    v.H("PathFigure", Pd);
    Pd.prototype.copy = Pd.prototype.copy = function() {
        var a = new Pd;
        a.op = this.op;
        a.Qf = this.Qf;
        a.at = this.at;
        a.Rb = this.Rb;
        a.cc = this.cc;
        for (var b = this.Aq,
        c = b.length,
        d = a.Aq,
        e = 0; e < c; e++) {
            var g = b.i[e].copy();
            d.add(g)
        }
        a.Pt = this.Pt;
        a.Ia = this.Ia;
        return a
    };
    Pd.prototype.equalsApprox = Pd.prototype.Qi = function(a) {
        if (! (a instanceof Pd) || this.uy !== a.uy || !fb(this.Ca, a.Ca) || !fb(this.Da, a.Da)) return p;
        var b = this.gb,
        a = a.gb,
        c = b.length;
        if (c !== a.length) return p;
        for (var d = 0; d < c; d++) if (!b.i[d].Qi(a.i[d])) return p;
        return h
    };
    da = Pd.prototype;
    da.toString = function(a) {
        for (var b = "M" + this.Ca.toFixed(a) + " " + this.Da.toFixed(a), c = this.gb, d = c.length, e = 0; e < d; e++) b += " " + c.i[e].toString(a);
        this.Gr && (b += "\t");
        return b
    };
    da.freeze = function() {
        this.Ma = h;
        var a = this.gb;
        a.freeze();
        for (var b = a.length,
        c = 0; c < b; c++) a.i[c].freeze();
        return this
    };
    da.qa = function() {
        this.Ma = p;
        var a = this.gb;
        a.qa();
        for (var b = a.length,
        c = 0; c < b; c++) a.i[c].qa();
        return this
    };
    da.ry = function() {
        if (this.Ia) return h;
        var a = this.gb;
        if (this.Pt !== a.ub) return h;
        for (var b = a.length,
        c = 0; c < b; c++) if (a.i[c].Ia) return h;
        return p
    };
    da.jz = function() {
        this.Ia = p;
        var a = this.gb;
        this.Pt = a.ub;
        for (var b = a.length,
        c = 0; c < b; c++) a.i[c].Ia = p
    };
    v.a(Pd, "isFilled", Pd.prototype.Gr);
    v.defineProperty(Pd, {
        Gr: "isFilled"
    },
    s("op"),
    function(a) {
        t && v.e(a, "boolean", Pd, "isFilled");
        v.v(this, a);
        this.op = a
    });
    v.a(Pd, "isShadowed", Pd.prototype.Dl);
    v.defineProperty(Pd, {
        Dl: "isShadowed"
    },
    s("Qf"),
    function(a) {
        t && v.e(a, "boolean", Pd, "isShadowed");
        v.v(this, a);
        this.Qf = a
    });
    v.a(Pd, "isSubPath", Pd.prototype.uy);
    v.defineProperty(Pd, {
        uy: "isSubPath"
    },
    s("at"),
    function(a) {
        t && v.e(a, "boolean", Pd, "isSubPath");
        v.v(this, a);
        this.at = a
    });
    v.a(Pd, "startX", Pd.prototype.Ca);
    v.defineProperty(Pd, {
        Ca: "startX"
    },
    s("Rb"),
    function(a) {
        t && v.j(a, Pd, "startX");
        v.v(this, a);
        this.Rb = a;
        this.Ia = h
    });
    v.a(Pd, "startY", Pd.prototype.Da);
    v.defineProperty(Pd, {
        Da: "startY"
    },
    s("cc"),
    function(a) {
        t && v.j(a, Pd, "startY");
        v.v(this, a);
        this.cc = a;
        this.Ia = h
    });
    v.a(Pd, "segments", Pd.prototype.gb);
    v.defineProperty(Pd, {
        gb: "segments"
    },
    s("Aq"),
    function(a) {
        t && v.c(a, y, Pd, "segments");
        v.v(this, a);
        this.Aq = a;
        this.Ia = h
    });
    Pd.prototype.fa = function(a, b, c) {
        for (var d = this.Ca,
        e = this.Da,
        g = d,
        i = e,
        j = this.gb.i,
        k = j.length,
        l = 0; l < k; l++) {
            var n = j[l];
            switch (n.type) {
            case de:
                g = n.N;
                i = n.O;
                break;
            case $d:
                if ($c(d, e, n.N, n.O, c, a, b)) return h;
                break;
            case ee:
                if (fd(d, e, n.zc, n.rd, n.qk, n.rk, n.N, n.O, c, a, b)) return h;
                break;
            case me:
                if (hd(d, e, n.zc, n.rd, n.N, n.O, c, a, b)) return h;
                break;
            case ne:
                for (var r = oe(n), q = r.length, u = m, x = 0; x < q; x++) if (u = r[x], 0 === x && $c(d, e, u.Sl, u.Tl, c, a, b) || fd(u.Sl, u.Tl, u.rv, u.tv, u.sv, u.uv, u.yk, u.zk, c, a, b)) return h;
                u !== m && (n.N = u.yk, n.O = u.zk);
                break;
            default:
                v.g("Unknown Segment type: " + n.type)
            }
            d = n.N;
            e = n.O;
            if (n.si && (d !== g || e !== i) && $c(d, e, g, i, c, a, b)) return h
        }
        return p
    };
    function re(a, b, c, d, e, g, i) {
        v.Ob(this);
        a === f ? a = $d: t && v.Va(a, re, re, "constructor:type");
        this.K = a;
        a === ne ? (b !== f ? (t && v.j(b, re, "ex"), this.Kg = b) : this.Kg = 0, c !== f ? (t && v.j(c, re, "ey"), this.Mg = c) : this.Mg = 0, d !== f && (t && v.j(d, re, "x1"), this.am = d), e !== f && (t && v.j(e, re, "y1"), this.bm = e), g !== f && (t && v.j(g, re, "x2"), this.Jt = g), i !== f && (t && v.j(i, re, "y2"), this.Kt = i)) : (b !== f ? (t && v.j(b, re, "ex"), this.cl = b) : this.cl = 0, c !== f ? (t && v.j(c, re, "ey"), this.dl = c) : this.dl = 0, d !== f && (t && v.j(d, re, "x1"), this.Tj = d), e !== f && (t && v.j(e, re, "y1"), this.Uj = e), g !== f && (t && v.j(g, re, "x2"), this.al = g), i !== f && (t && v.j(i, re, "y2"), this.bl = i));
        this.Ia = h;
        this.si = p
    }
    v.H("PathSegment", re);
    re.prototype.copy = re.prototype.copy = function() {
        var a = new re;
        a.K = this.K;
        this.K === ne ? (a.Kg = this.Kg, a.Mg = this.Mg, a.am = this.am, a.bm = this.bm, a.Jt = this.Jt, a.Kt = this.Kt) : (a.cl = this.cl, a.dl = this.dl, a.Tj = this.Tj, a.Uj = this.Uj, a.al = this.al, a.bl = this.bl);
        a.Ia = this.Ia;
        a.si = this.si;
        return a
    };
    re.prototype.equalsApprox = re.prototype.Qi = function(a) {
        if (! (a instanceof re) || this.type !== a.type || this.Nu !== a.Nu) return p;
        switch (this.type) {
        case de:
        case $d:
            return fb(this.N, a.N) && fb(this.O, a.O);
        case ee:
            return fb(this.N, a.N) && fb(this.O, a.O) && fb(this.zc, a.zc) && fb(this.rd, a.rd) && fb(this.qk, a.qk) && fb(this.rk, a.rk);
        case me:
            return fb(this.N, a.N) && fb(this.O, a.O) && fb(this.zc, a.zc) && fb(this.rd, a.rd);
        case ne:
            return fb(this.fi, a.fi) && fb(this.dj, a.dj) && fb(this.za, a.za) && fb(this.Aa, a.Aa) && fb(this.Il, a.Il) && fb(this.Xn, a.Xn);
        default:
            return p
        }
    };
    re.prototype.toString = function(a) {
        switch (this.type) {
        case de:
            a = "M" + this.N.toFixed(a) + " " + this.O.toFixed(a);
            break;
        case $d:
            a = "L" + this.N.toFixed(a) + " " + this.O.toFixed(a);
            break;
        case ee:
            a = "C" + this.zc.toFixed(a) + " " + this.rd.toFixed(a) + " " + this.qk.toFixed(a) + " " + this.rk.toFixed(a) + " " + this.N.toFixed(a) + " " + this.O.toFixed(a);
            break;
        case me:
            a = "Q" + this.zc.toFixed(a) + " " + this.rd.toFixed(a) + " " + this.N.toFixed(a) + " " + this.O.toFixed(a);
            break;
        case ne:
            a = "A";
            break;
        default:
            a = this.type.toString()
        }
        return a + (this.si ? "z": "")
    };
    var de;
    re.Move = de = v.l(re, "Move", 0);
    var $d;
    re.Line = $d = v.l(re, "Line", 1);
    var ee;
    re.Bezier = ee = v.l(re, "Bezier", 2);
    var me;
    re.QuadraticBezier = me = v.l(re, "QuadraticBezier", 3);
    var ne;
    re.Arc = ne = v.l(re, "Arc", 4);
    re.prototype.freeze = function() {
        this.Ma = h;
        return this
    };
    re.prototype.qa = function() {
        this.Ma = p;
        return this
    };
    re.prototype.close = re.prototype.close = function() {
        this.si = h;
        return this
    };
    function oe(a) {
        if (a.Yv && a.Ia === p) return a.Yv;
        for (var b = a.am,
        c = a.bm,
        d = a.Il,
        e = a.fi,
        g = a.fi + a.dj,
        i = Math.PI,
        e = e * (i / 180), g = g * (i / 180), j = e < g ? 1 : -1, k = [], l = i / 2, n = e, e = Math.min(2 * i + 1E-5, Math.abs(g - e)); 1E-5 < e;) {
            var g = n + j * Math.min(e, l),
            r = (g - n) / 2,
            q = d * Math.cos(r),
            u = d * Math.sin(r),
            x = 0.5522847498 * Math.tan(r),
            i = q + x * u,
            q = -u + x * q,
            u = -q,
            x = r + n,
            r = Math.cos(x),
            x = Math.sin(x);
            k.push({
                Sl: b + d * Math.cos(n),
                Tl: c + d * Math.sin(n),
                rv: b + i * r - q * x,
                tv: c + i * x + q * r,
                sv: b + i * r - u * x,
                uv: c + i * x + u * r,
                yk: b + d * Math.cos(g),
                zk: c + d * Math.sin(g)
            });
            e -= Math.abs(g - n);
            n = g
        }
        a.Yv = k;
        return a.Yv
    }
    v.a(re, "isClosed", re.prototype.Nu);
    v.defineProperty(re, {
        Nu: "isClosed"
    },
    s("si"),
    function(a) {
        this.si !== a && (this.si = a, this.Ia = h)
    });
    v.a(re, "type", re.prototype.type);
    v.defineProperty(re, {
        type: "type"
    },
    s("K"),
    function(a) {
        t && v.Va(a, re, re, "type");
        v.v(this, a);
        this.K = a;
        this.Ia = h
    });
    v.a(re, "endX", re.prototype.N);
    v.defineProperty(re, {
        N: "endX"
    },
    s("cl"),
    function(a) {
        t && v.j(a, re, "endX");
        v.v(this, a);
        this.cl = a;
        this.Ia = h
    });
    v.a(re, "endY", re.prototype.O);
    v.defineProperty(re, {
        O: "endY"
    },
    s("dl"),
    function(a) {
        t && v.j(a, re, "endY");
        v.v(this, a);
        this.dl = a;
        this.Ia = h
    });
    v.defineProperty(re, {
        zc: "point1X"
    },
    s("Tj"),
    function(a) {
        t && v.j(a, re, "point1X");
        v.v(this, a);
        this.Tj = a;
        this.Ia = h
    });
    v.defineProperty(re, {
        rd: "point1Y"
    },
    s("Uj"),
    function(a) {
        t && v.j(a, re, "point1Y");
        v.v(this, a);
        this.Uj = a;
        this.Ia = h
    });
    v.defineProperty(re, {
        qk: "point2X"
    },
    s("al"),
    function(a) {
        t && v.j(a, re, "point2X");
        v.v(this, a);
        this.al = a;
        this.Ia = h
    });
    v.defineProperty(re, {
        rk: "point2Y"
    },
    s("bl"),
    function(a) {
        t && v.j(a, re, "point2Y");
        v.v(this, a);
        this.bl = a;
        this.Ia = h
    });
    v.defineProperty(re, {
        za: "centerX"
    },
    s("am"),
    function(a) {
        t && v.j(a, re, "centerX");
        v.v(this, a);
        this.am = a;
        this.Ia = h
    });
    v.defineProperty(re, {
        Aa: "centerY"
    },
    s("bm"),
    function(a) {
        t && v.j(a, re, "centerY");
        v.v(this, a);
        this.bm = a;
        this.Ia = h
    });
    v.defineProperty(re, {
        Il: "radiusX"
    },
    s("Jt"),
    function(a) {
        t && v.j(a, re, "radiusX");
        v.v(this, a);
        this.Jt = a;
        this.Ia = h
    });
    v.defineProperty(re, {
        Xn: "radiusY"
    },
    s("Kt"),
    function(a) {
        t && v.j(a, re, "radiusY");
        v.v(this, a);
        this.Kt = a;
        this.Ia = h
    });
    v.defineProperty(re, {
        fi: "startAngle"
    },
    s("Kg"),
    function(a) {
        t && v.j(a, re, "startAngle");
        v.v(this, a);
        this.Kg = a;
        this.Ia = h
    });
    v.defineProperty(re, {
        dj: "sweepAngle"
    },
    s("Mg"),
    function(a) {
        t && v.j(a, re, "sweepAngle");
        v.v(this, a);
        this.Mg = a;
        this.Ia = h
    });
    function se() {
        this.L = m;
        this.vx = (new D(0, 0)).freeze();
        this.lw = (new D(0, 0)).freeze();
        this.vs = this.rt = 0;
        this.dt = "";
        this.Ks = this.zs = 0;
        this.ji = this.Qs = p;
        this.oi = m;
        this.cu = 0;
        this.kf = this.$t = m
    }
    v.H("InputEvent", se);
    se.prototype.copy = se.prototype.copy = function() {
        var a = new se;
        a.L = this.L;
        a.vx = this.gd.copy().freeze();
        a.lw = this.C.copy().freeze();
        a.rt = this.rt;
        a.vs = this.vs;
        a.dt = this.dt;
        a.zs = this.zs;
        a.Ks = this.Ks;
        a.Qs = this.Qs;
        a.ji = this.ji;
        a.oi = this.oi;
        a.cu = this.cu;
        a.$t = this.$t;
        a.kf = this.kf;
        return a
    };
    se.prototype.toString = function() {
        var a = "^";
        this.fh && (a += "M:" + this.fh);
        this.button && (a += "B:" + this.button);
        this.key && (a += "K:" + this.key);
        this.Le && (a += "C:" + this.Le);
        this.Mi && (a += "D:" + this.Mi);
        this.Bd && (a += "h");
        this.bubbles && (a += "b");
        this.C !== m && (a += "@" + this.C.toString());
        return a
    };
    v.a(se, "diagram", se.prototype.b);
    v.defineProperty(se, {
        b: "diagram"
    },
    s("L"), ba("L"));
    v.a(se, "viewPoint", se.prototype.gd);
    v.defineProperty(se, {
        gd: "viewPoint"
    },
    s("vx"),
    function(a) {
        v.c(a, D, se, "viewPoint");
        this.vx.Ra(a)
    });
    v.a(se, "documentPoint", se.prototype.C);
    v.defineProperty(se, {
        C: "documentPoint"
    },
    s("lw"),
    function(a) {
        v.c(a, D, se, "documentPoint");
        this.lw.Ra(a)
    });
    v.a(se, "modifiers", se.prototype.fh);
    v.defineProperty(se, {
        fh: "modifiers"
    },
    s("rt"), ba("rt"));
    v.a(se, "button", se.prototype.button);
    v.defineProperty(se, {
        button: "button"
    },
    s("vs"), ba("vs"));
    v.a(se, "key", se.prototype.key);
    v.defineProperty(se, {
        key: "key"
    },
    s("dt"), ba("dt"));
    v.a(se, "clickCount", se.prototype.Le);
    v.defineProperty(se, {
        Le: "clickCount"
    },
    s("zs"), ba("zs"));
    v.a(se, "delta", se.prototype.Mi);
    v.defineProperty(se, {
        Mi: "delta"
    },
    s("Ks"), ba("Ks"));
    v.a(se, "handled", se.prototype.Bd);
    v.defineProperty(se, {
        Bd: "handled"
    },
    s("Qs"), ba("Qs"));
    v.a(se, "bubbles", se.prototype.bubbles);
    v.defineProperty(se, {
        bubbles: "bubbles"
    },
    s("ji"), ba("ji"));
    v.a(se, "event", se.prototype.event);
    v.defineProperty(se, {
        event: "event"
    },
    s("oi"), ba("oi"));
    v.a(se, "timestamp", se.prototype.timestamp);
    v.defineProperty(se, {
        timestamp: "timestamp"
    },
    s("cu"), ba("cu"));
    v.a(se, "targetDiagram", se.prototype.Bf);
    v.defineProperty(se, {
        Bf: "targetDiagram"
    },
    s("$t"), ba("$t"));
    v.a(se, "targetObject", se.prototype.fd);
    v.defineProperty(se, {
        fd: "targetObject"
    },
    s("kf"), ba("kf"));
    v.m(se, {
        hk: "control"
    },
    function() {
        return 0 !== (this.fh & 1)
    });
    v.m(se, {
        shift: "shift"
    },
    function() {
        return 0 !== (this.fh & 4)
    });
    v.m(se, {
        alt: "alt"
    },
    function() {
        return 0 !== (this.fh & 2)
    });
    v.m(se, {
        QJ: "meta"
    },
    function() {
        return 0 !== (this.fh & 8)
    });
    v.m(se, {
        left: "left"
    },
    function() {
        return 0 === this.button
    });
    v.m(se, {
        RJ: "middle"
    },
    function() {
        return 1 === this.button
    });
    v.m(se, {
        right: "right"
    },
    function() {
        return 2 === this.button
    });
    function te() {
        this.L = m;
        this.wb = "";
        this.Et = this.Wt = m;
        this.ws = p
    }
    v.H("DiagramEvent", te);
    te.prototype.copy = te.prototype.copy = function() {
        var a = new te;
        a.L = this.L;
        a.wb = this.wb;
        a.Wt = this.Wt;
        a.Et = this.Et;
        a.ws = this.ws;
        return a
    };
    te.prototype.toString = function() {
        var a = "*" + this.name;
        this.cancel && (a += "x");
        this.jv !== m && (a += ":" + this.jv.toString());
        this.Xu !== m && (a += "(" + this.Xu.toString() + ")");
        return a
    };
    v.a(te, "diagram", te.prototype.b);
    v.defineProperty(te, {
        b: "diagram"
    },
    s("L"), ba("L"));
    v.a(te, "name", te.prototype.name);
    v.defineProperty(te, {
        name: "name"
    },
    s("wb"), ba("wb"));
    v.a(te, "subject", te.prototype.jv);
    v.defineProperty(te, {
        jv: "subject"
    },
    s("Wt"), ba("Wt"));
    v.a(te, "parameter", te.prototype.Xu);
    v.defineProperty(te, {
        Xu: "parameter"
    },
    s("Et"), ba("Et"));
    v.a(te, "cancel", te.prototype.cancel);
    v.defineProperty(te, {
        cancel: "cancel"
    },
    s("ws"), ba("ws"));
    function Be() {
        this.clear()
    }
    v.H("ChangedEvent", Be);
    var Ce;
    Be.Transaction = Ce = v.l(Be, "Transaction", -1);
    var De;
    Be.Property = De = v.l(Be, "Property", 0);
    var Ee;
    Be.Insert = Ee = v.l(Be, "Insert", 1);
    var Fe;
    Be.Remove = Fe = v.l(Be, "Remove", 2);
    Be.prototype.clear = Be.prototype.clear = function() {
        this.xs = De;
        this.It = this.qt = "";
        this.ut = this.vt = this.Bt = this.Ct = this.At = this.L = this.ff = m
    };
    Be.prototype.copy = Be.prototype.copy = function() {
        var a = new Be;
        a.ff = this.ff;
        a.L = this.L;
        a.xs = this.xs;
        a.qt = this.qt;
        a.It = this.It;
        a.At = this.At;
        var b = this.Ct;
        a.Ct = v.Oa(b) && "function" === typeof b.B ? b.B() : b;
        b = this.Bt;
        a.Bt = v.Oa(b) && "function" === typeof b.B ? b.B() : b;
        b = this.vt;
        a.vt = v.Oa(b) && "function" === typeof b.B ? b.B() : b;
        b = this.ut;
        a.ut = v.Oa(b) && "function" === typeof b.B ? b.B() : b;
        return a
    };
    Be.prototype.toString = function() {
        var a = "",
        a = this.Sc === Ce ? a + "* ": this.Sc === De ? a + (this.P !== m ? "!m": "!d") : a + ((this.P !== m ? "!m": "!d") + this.Sc);
        this.propertyName && "string" === typeof this.propertyName && (a += " " + this.propertyName);
        this.ne && this.ne !== this.propertyName && (a += " " + this.ne);
        a += ": ";
        this.Sc === Ce ? this.oldValue !== m && (a += " " + this.oldValue) : (this.object !== m && (a += Ge(this.object)), this.oldValue !== m && (a += " old: " + Ge(this.oldValue)), this.We !== m && (a += " " + this.We), this.newValue !== m && (a += " new: " + Ge(this.newValue)), this.Ve !== m && (a += " " + this.Ve));
        return a
    };
    Be.prototype.getValue = Be.prototype.ca = function(a) {
        return a ? this.oldValue: this.newValue
    };
    Be.prototype.getParam = Be.prototype.bJ = function(a) {
        return a ? this.We: this.Ve
    };
    Be.prototype.canUndo = Be.prototype.fk = function() {
        return this.P !== m || this.b !== m ? h: p
    };
    Be.prototype.undo = Be.prototype.xk = function() {
        this.fk() && (this.P !== m ? this.P.kr(this, h) : this.b !== m && this.b.kr(this, h))
    };
    Be.prototype.canRedo = Be.prototype.ek = function() {
        return this.P !== m || this.b !== m ? h: p
    };
    Be.prototype.redo = Be.prototype.Yn = function() {
        this.ek() && (this.P !== m ? this.P.kr(this, p) : this.b !== m && this.b.kr(this, p))
    };
    v.a(Be, "model", Be.prototype.P);
    v.defineProperty(Be, {
        P: "model"
    },
    s("ff"), ba("ff"));
    v.a(Be, "diagram", Be.prototype.b);
    v.defineProperty(Be, {
        b: "diagram"
    },
    s("L"), ba("L"));
    v.a(Be, "change", Be.prototype.Sc);
    v.defineProperty(Be, {
        Sc: "change"
    },
    s("xs"),
    function(a) {
        t && v.Va(a, Be, Be, "change");
        this.xs = a
    });
    v.a(Be, "modelChange", Be.prototype.ne);
    v.defineProperty(Be, {
        ne: "modelChange"
    },
    s("qt"),
    function(a) {
        t && v.e(a, "string", Be, "modelChange");
        this.qt = a
    });
    v.a(Be, "propertyName", Be.prototype.propertyName);
    v.defineProperty(Be, {
        propertyName: "propertyName"
    },
    s("It"),
    function(a) {
        t && "string" !== typeof a && v.c(a, Function, Be, "propertyName");
        this.It = a
    });
    v.a(Be, "object", Be.prototype.object);
    v.defineProperty(Be, {
        object: "object"
    },
    s("At"), ba("At"));
    v.a(Be, "oldValue", Be.prototype.oldValue);
    v.defineProperty(Be, {
        oldValue: "oldValue"
    },
    s("Ct"), ba("Ct"));
    v.a(Be, "oldParam", Be.prototype.We);
    v.defineProperty(Be, {
        We: "oldParam"
    },
    s("Bt"), ba("Bt"));
    v.a(Be, "newValue", Be.prototype.newValue);
    v.defineProperty(Be, {
        newValue: "newValue"
    },
    s("vt"), ba("vt"));
    v.a(Be, "newParam", Be.prototype.Ve);
    v.defineProperty(Be, {
        Ve: "newParam"
    },
    s("ut"), ba("ut"));
    function B(a) {
        v.Ob(this);
        this.fw = this.wb = "";
        this.Ij = p;
        this.Wf = [];
        this.Gc = new oa(m, Object);
        this.bq = "key";
        this.Fs = this.gt = m;
        this.$p = "category";
        this.qg = new oa(m, pa);
        this.ti = m;
        this.Pk = this.Gh = p;
        this.rx = m;
        this.da = new He;
        a !== f && (this.gh = a)
    }
    v.H("Model", B);
    B.prototype.clear = B.prototype.clear = function() {
        this.Wf = [];
        this.Gc.clear();
        this.qg.clear();
        this.da.clear()
    };
    B.prototype.writeJsonProtected = B.prototype.OD = function() {
        var a = "";
        "" !== this.name && (a += ',\n "name": ' + this.quote(this.name));
        "" !== this.sl && (a += ',\n "dataFormat": ' + this.quote(this.sl));
        this.Pa && (a += ',\n "isReadOnly": ' + this.Pa);
        "key" !== this.Hl && "string" === typeof this.Hl && (a += ',\n "nodeKeyProperty": ' + this.quote(this.Hl));
        "category" !== this.Gl && "string" === typeof this.Gl && (a += ',\n "nodeCategoryProperty": ' + this.quote(this.Gl));
        return a
    };
    B.prototype.nz = function() {
        return ',\n "nodeDataArray": ' + Ie(this, this.gh, h)
    };
    B.prototype.readJsonProtected = B.prototype.QC = function(a) {
        a.name && (this.name = a.name);
        a.dataFormat && (this.sl = a.dataFormat);
        a.isReadOnly && (this.Pa = a.isReadOnly);
        a.nodeKeyProperty && (this.Hl = a.nodeKeyProperty);
        a.nodeCategoryProperty && (this.Gl = a.nodeCategoryProperty)
    };
    B.prototype.Oy = function(a) {
        a.nodeDataArray && (a = a.nodeDataArray, Je(this, a), this.gh = a)
    };
    B.prototype.toString = function(a) {
        a === f && (a = 0);
        if (2 <= a) return this.vD();
        var b = ("" !== this.name ? this.name: "") + " Model";
        if (0 < a) {
            var b = b + "\n node data:",
            a = this.gh,
            c = v.Eb(a),
            d;
            for (d = 0; d < c; d++) var e = v.qb(a, d),
            b = b + (" " + this.dc(e) + ":" + Ge(e))
        }
        return b
    };
    B.prototype.toJson = B.prototype.vD = function(a) {
        a === f && (a = this.constructor === B ? "go.Model": this.constructor === N ? "go.GraphLinksModel": v.Si(this));
        return '{ "class": ' + this.quote(a) + this.writeJsonProtected() + this.nz() + "}"
    };
    B.fromJson = function(a, b) {
        b === f && (b = m);
        v.e(a, "string", B, "fromJson:s");
        b && v.c(b, B, B, "fromJson:model");
        var c = m;
        if (window && window.JSON && window.JSON.parse) try {
            c = window.JSON.parse(a)
        } catch(d) {
            t && v.trace("JSON.parse error: " + d.toString())
        } else v.trace("WARNING: no JSON.parse available");
        if (c === m) return m;
        if (b === m) {
            var e;
            e = m;
            var g = c["class"];
            if ("string" === typeof g) try {
                var i = m;
                0 === g.indexOf("go.") ? (g = g.substr(3), i = ea[g]) : (i = ea[g]) || (i = window[g]);
                "function" === typeof i && (e = new i)
            } catch(j) {}
            e === m || e instanceof B ? b = e: v.g("Unable to construct a Model of declared class: " + c["class"])
        }
        b === m && (b = new N);
        b.readJsonProtected(c);
        b.Oy(c);
        return b
    };
    function Je(a, b) {
        if (v.isArray(b)) for (var c = v.Eb(b), d = 0; d < c; d++) {
            var e = v.qb(b, d);
            v.Oa(e) && v.UE(b, d, Je(a, e))
        } else if (v.Oa(b)) {
            for (d in b) if (e = b[d], v.Oa(e) && (e = Je(a, e), b[d] = e, "points" === d && Array.isArray(e))) {
                for (var g = h,
                i = 0; i < e.length; i++) if ("number" !== typeof e[i]) {
                    g = p;
                    break
                }
                if (g) {
                    g = new y(D);
                    for (i = 0; i < e.length / 2; i++) {
                        var j = new D(e[2 * i], e[2 * i + 1]);
                        g.add(j)
                    }
                    g.freeze();
                    b[d] = g
                }
            }
            if ("object" !== typeof b) c = b;
            else {
                d = b;
                e = b["class"];
                if ("NaN" === e) d = NaN;
                else if ("go.Point" === e) d = new D(b.x, b.y);
                else if ("go.Size" === e) d = new sb(b.width, b.height);
                else if ("go.Rect" === e) d = new E(b.x, b.y, b.width, b.height);
                else if ("go.Margin" === e) d = new Hb(b.top, b.right, b.bottom, b.left);
                else if ("go.Spot" === e) d = "string" === typeof b["enum"] ? Tb(b["enum"]) : new F(b.x, b.y, b.offsetX, b.offsetY);
                else if ("go.Brush" === e) {
                    if (d = new Ke, d.type = v.wl(Ke, b.type), b.start instanceof F && (d.start = b.start), b.end instanceof F && (d.end = b.end), "number" === typeof b.startRadius && (d.ho = b.startRadius), "number" === typeof b.endRadius && (d.sn = b.endRadius), e = b.colorStops) for (c in e) d.addColorStop(parseFloat(c), e[c])
                } else "go.Geometry" === e && (d = "string" === typeof b.path ? ae(b.path) : new Hd, d.type = v.wl(Hd, b.type), "number" === typeof b.startX && (d.Ca = b.startX), "number" === typeof b.startY && (d.Da = b.startY), "number" === typeof b.endX && (d.N = b.endX), "number" === typeof b.endY && (d.O = b.endY), b.spot1 instanceof F && (d.n = b.spot1), b.spot2 instanceof F && (d.o = b.spot2));
                c = d
            }
            return c
        }
        return b
    }
    B.prototype.quote = function(a) {
        for (var b = "",
        c = a.length,
        d = 0; d < c; d++) var e = a[d],
        b = '"' === e || "\\" === e ? b + ("\\" + e) : "\b" === e ? b + "\\b": "\f" === e ? b + "\\f": "\n" === e ? b + "\\n": "\r" === e ? b + "\\r": "\t" === e ? b + "\\t": b + e;
        return '"' + b + '"'
    };
    B.prototype.writeJsonValue = B.prototype.qv = function(a) {
        var b;
        if (a === f) b = "undefined";
        else if (a === m) b = "null";
        else if (a === h) b = "true";
        else if (a === p) b = "false";
        else if ("string" === typeof a) b = this.quote(a);
        else if ("number" === typeof a) b = Infinity === a ? "9e9999": -Infinity === a ? "-9e9999": isNaN(a) ? '{"class":"NaN"}': a.toString();
        else if (v.isArray(a)) b = Ie(this, a);
        else if (v.Oa(a)) {
            var c = a;
            if (c instanceof D) a = {
                "class": "go.Point",
                x: c.x,
                y: c.y
            };
            else if (c instanceof sb) a = {
                "class": "go.Size",
                width: c.width,
                height: c.height
            };
            else if (c instanceof E) a = {
                "class": "go.Rect",
                x: c.x,
                y: c.y,
                width: c.width,
                height: c.height
            };
            else if (c instanceof Hb) a = {
                "class": "go.Margin",
                top: c.top,
                right: c.right,
                bottom: c.bottom,
                left: c.left
            };
            else if (c instanceof F) a = Vb(c) ? {
                "class": "go.Spot",
                x: c.x,
                y: c.y,
                offsetX: c.offsetX,
                offsetY: c.offsetY
            }: {
                "class": "go.Spot",
                "enum": c.toString()
            };
            else if (c instanceof Ke) {
                a = {
                    "class": "go.Brush",
                    type: c.type.name
                };
                if (c.type === Le) a.color = c.color;
                else if (c.type === Me || c.type === Ne) a.start = c.start,
                a.end = c.end,
                c.type === Ne && (0 !== c.ho && (a.startRadius = c.ho), isNaN(c.sn) || (a.endRadius = c.sn));
                if (c.nn !== m) {
                    for (var d = {},
                    c = c.nn.f; c.next();) d[c.key.toString()] = c.value;
                    a.colorStops = d
                }
            } else c instanceof Hd && (a = {
                "class": "go.Geometry",
                type: c.type.name
            },
            0 !== c.Ca && (a.startX = c.Ca), 0 !== c.Da && (a.startY = c.Da), 0 !== c.N && (a.endX = c.N), 0 !== c.O && (a.endY = c.O), c.n.u(fc) || (a.spot1 = c.n), c.o.u(tc) || (a.spot2 = c.o), 0 < c.Kb.count && (a.path = a.toString()));
            var d = "{",
            e = h;
            for (b in a) if (c = v.Za(a, b), !(c === f || "__gohashid" === b || "_" === b[0] || "function" === typeof c)) if (e ? e = p: d += ", ", d += '"' + b + '":', "points" === b && c instanceof y && c.K === D) {
                for (var g = "[",
                c = c.f; c.next();) {
                    var i = c.value;
                    1 < g.length && (g += ",");
                    g += this.qv(i.x);
                    g += ",";
                    g += this.qv(i.y)
                }
                g += "]";
                d += g
            } else d += this.qv(c);
            b = d + "}"
        } else b = "function" === typeof a ? "null": a.toString();
        return b
    };
    function Ie(a, b, c) {
        var d = v.Eb(b),
        e = "[ ";
        c && 1 < d && (e += "\n");
        for (var g = 0; g < d; g++) {
            var i = v.qb(b, g);
            i !== f && (0 < g && (e += ",", c && (e += "\n")), e += a.qv(i))
        }
        c && 1 < d && (e += "\n");
        return e + " ]"
    }
    v.a(B, "name", B.prototype.name);
    v.defineProperty(B, {
        name: "name"
    },
    s("wb"),
    function(a) {
        var b = this.wb;
        b !== a && (v.e(a, "string", B, "name"), this.wb = a, this.d("name", b, a))
    });
    v.a(B, "dataFormat", B.prototype.sl);
    v.defineProperty(B, {
        sl: "dataFormat"
    },
    s("fw"),
    function(a) {
        var b = this.fw;
        b !== a && (v.e(a, "string", B, "dataFormat"), this.fw = a, this.d("dataFormat", b, a))
    });
    v.a(B, "isReadOnly", B.prototype.Pa);
    v.defineProperty(B, {
        Pa: "isReadOnly"
    },
    s("Ij"),
    function(a) {
        var b = this.Ij;
        b !== a && (v.e(a, "boolean", B, "isReadOnly"), this.Ij = a, this.d("isReadOnly", b, a))
    });
    B.prototype.addChangedListener = B.prototype.Bx = function(a) {
        v.e(a, "function", B, "addChangedListener:listener");
        this.ti === m && (this.ti = new y("function"));
        this.ti.add(a)
    };
    B.prototype.removeChangedListener = B.prototype.Qy = function(a) {
        v.e(a, "function", B, "removeChangedListener:listener");
        this.ti !== m && (this.ti.remove(a), 0 === this.ti.count && (this.ti = m))
    };
    B.prototype.ou = function(a) {
        this.nb || this.da.$B(a);
        if (this.ti !== m) for (var b = this.ti.f; b.next();) {
            var c = b.value;
            c(a)
        }
    };
    B.prototype.raiseChangedEvent = B.prototype.Yd = function(a, b, c, d, e, g, i) {
        Oe(this, "", a, b, c, d, e, g, i)
    };
    B.prototype.raiseChanged = B.prototype.d = function(a, b, c, d, e) {
        Oe(this, "", De, a, this, b, c, d, e)
    };
    B.prototype.raiseDataChanged = B.prototype.eK = function(a, b, c, d, e, g) {
        Oe(this, "", De, b, a, c, d, e, g)
    };
    function Oe(a, b, c, d, e, g, i, j, k) {
        j === f && (j = m);
        k === f && (k = m);
        var l = new Be;
        l.P = a;
        l.Sc = c;
        l.ne = b;
        l.propertyName = d;
        l.object = e;
        l.oldValue = g;
        l.We = j;
        l.newValue = i;
        l.Ve = k;
        a.ou(l)
    }
    v.a(B, "undoManager", B.prototype.da);
    v.defineProperty(B, {
        da: "undoManager"
    },
    s("rx"),
    function(a) {
        var b = this.rx;
        b !== a && (v.c(a, He, B, "undoManager"), b !== m && b.wG(this), this.rx = a, a !== m && a.xE(this))
    });
    v.a(B, "skipsUndoManager", B.prototype.nb);
    v.defineProperty(B, {
        nb: "skipsUndoManager"
    },
    s("Gh"),
    function(a) {
        v.e(a, "boolean", B, "skipsUndoManager");
        this.Gh = a
    });
    B.prototype.kr = function(a, b) {
        if (a !== m && a.P === this) {
            var c = this.Pk;
            try {
                this.Pk = h,
                this.Lx(a, b)
            } finally {
                this.Pk = c
            }
        }
    };
    B.prototype.Lx = function(a, b) {
        if (a.Sc === De) {
            var c = a.object,
            d = a.propertyName,
            e = a.ca(b);
            v.fb(c, d, e)
        } else a.Sc === Ee ? "nodeDataArray" === a.ne ? (c = a.newValue, v.Oa(c) && (d = this.dc(c), d !== f && (b ? (v.Rh(this.Wf, a.Ve), this.Gc.remove(d)) : (v.Qh(this.Wf, a.Ve, c), this.Gc.add(d, c))))) : "" === a.ne ? (c = a.object, !v.isArray(c) && a.propertyName && (c = v.Za(a.object, a.propertyName)), v.isArray(c) && (d = a.newValue, e = a.Ve, b ? v.Rh(c, e) : v.Qh(c, e, d))) : v.g("unknown ChangedEvent.Insert object: " + a.toString()) : a.Sc === Fe ? "nodeDataArray" === a.ne ? (c = a.oldValue, v.Oa(c) && (d = this.dc(c), d !== f && (b ? (v.Qh(this.Wf, a.We, c), this.Gc.add(d, c)) : (v.Rh(this.Wf, a.We), this.Gc.remove(d))))) : "" === a.ne ? (c = a.object, !v.isArray(c) && a.propertyName && (c = v.Za(a.object, a.propertyName)), v.isArray(c) && (d = a.oldValue, e = a.We, b ? v.Qh(c, e, d) : v.Rh(c, e))) : v.g("unknown ChangedEvent.Remove object: " + a.toString()) : a.Sc !== Ce && v.g("unknown ChangedEvent: " + a.toString())
    };
    B.prototype.startTransaction = B.prototype.Nb = function(a) {
        return this.da.Nb(a)
    };
    B.prototype.commitTransaction = B.prototype.Sd = function(a) {
        return this.da.Sd(a)
    };
    B.prototype.rollbackTransaction = B.prototype.Yr = function() {
        return this.da.Yr()
    };
    B.prototype.updateTargetBindings = B.prototype.nc = function(a, b) {
        b === f && (b = "");
        Oe(this, "SourceChanged", Ce, b, a, m, m)
    };
    v.a(B, "nodeKeyProperty", B.prototype.Hl);
    v.defineProperty(B, {
        Hl: "nodeKeyProperty"
    },
    s("bq"),
    function(a) {
        var b = this.bq;
        b !== a && (Pe(a, B, "nodeKeyProperty"), 0 < this.Gc.count && v.g("Cannot set Model.nodeKeyProperty when there is existing node data"), this.bq = a, this.d("nodeKeyProperty", b, a))
    });
    function Pe(a, b, c) {
        "string" !== typeof a && "function" !== typeof a && v.Ac(a, "string or function", b, c)
    }
    B.prototype.getKeyForNodeData = B.prototype.dc = function(a) {
        if (a !== m) {
            var b = this.bq;
            if ("" !== b && (b = v.Za(a, b), b !== f)) {
                if (Qe(b)) return b;
                t && v.trace("Key value for node data " + a + " is not a number or a string: " + b)
            }
        }
    };
    v.a(B, "makeUniqueKeyFunction", B.prototype.dG);
    v.defineProperty(B, {
        dG: "makeUniqueKeyFunction"
    },
    s("gt"),
    function(a) {
        var b = this.gt;
        b !== a && (a !== m && v.e(a, "function", B, "makeUniqueKeyFunction"), this.gt = a, this.d("makeUniqueKeyFunction", b, a))
    });
    function Qe(a) {
        return "number" === typeof a || "string" === typeof a
    }
    B.prototype.containsNodeData = B.prototype.Ii = function(a) {
        a = this.dc(a);
        return a === f ? p: this.Gc.contains(a)
    };
    B.prototype.findNodeDataForKey = B.prototype.$g = function(a) {
        a === m && v.g("Model.findNodeDataForKey:key must not be null");
        return a === f || !Qe(a) ? m: this.Gc.ca(a)
    };
    v.a(B, "nodeDataArray", B.prototype.gh);
    v.defineProperty(B, {
        gh: "nodeDataArray"
    },
    s("Wf"),
    function(a) {
        var b = this.Wf;
        if (b !== a) {
            v.qu(a, B, "nodeDataArray");
            this.Gc.clear();
            this.hz();
            for (var c = v.Eb(a), d = 0; d < c; d++) {
                var e = v.qb(a, d);
                if (!v.Oa(e)) {
                    v.g("Model.nodeDataArray must only contain Objects, not: " + e);
                    return
                }
                v.Dn(e)
            }
            this.Wf = a;
            for (var g = new y(Object), d = 0; d < c; d++) {
                var e = v.qb(a, d),
                i = this.dc(e);
                i === f ? g.add(e) : this.Gc.ca(i) !== m ? g.add(e) : this.Gc.add(i, e)
            }
            for (d = g.f; d.next();) e = d.value,
            this.wC(e),
            g = this.dc(e),
            this.Gc.add(g, e);
            Oe(this, "nodeDataArray", De, "nodeDataArray", this, b, a);
            for (d = 0; d < c; d++) e = v.qb(a, d),
            this.$u(e),
            this.Zu(e);
            this.hB();
            Array.isArray(a) || (this.Pa = h)
        }
    });
    B.prototype.makeNodeDataKeyUnique = B.prototype.wC = function(a) {
        if (a !== m) {
            var b = this.bq;
            if ("" !== b) {
                var c = this.dc(a);
                if (c === f || this.Gc.contains(c)) {
                    var d = this.gt;
                    if (d !== m && (c = d(this, a), c !== f && c !== m && !this.Gc.contains(c))) {
                        v.fb(a, b, c);
                        return
                    }
                    if ("string" === typeof c) {
                        for (d = 2; this.Gc.contains(c + d);) d++;
                        v.fb(a, b, c + d)
                    } else if (c === f || "number" === typeof c) {
                        for (d = -this.Gc.count - 1; this.Gc.contains(d);) d--;
                        v.fb(a, b, d)
                    } else v.g("Model.getKeyForNodeData returned something other than a string or a number: " + c)
                }
            }
        }
    };
    B.prototype.addNodeData = B.prototype.ju = function(a) {
        if (a !== m) {
            v.Dn(a);
            var b = this.dc(a);
            b !== f && this.Gc.ca(b) === a || (this.wC(a), b = this.dc(a), this.Gc.add(b, a), b = v.Eb(this.Wf), v.Qh(this.Wf, b, a), Oe(this, "nodeDataArray", Ee, "nodeDataArray", this, m, a, m, b), this.$u(a), this.Zu(a))
        }
    };
    B.prototype.removeNodeData = B.prototype.VC = function(a) {
        if (a !== m) {
            var b = this.dc(a);
            b !== f && this.Gc.contains(b) && (this.Gc.remove(b), b = v.Gx(this.Wf, a), 0 > b || (v.Rh(this.Wf, b), Oe(this, "nodeDataArray", Fe, "nodeDataArray", this, a, m, b, m), this.iz(a)))
        }
    };
    B.prototype.hz = aa();
    B.prototype.$u = aa();
    B.prototype.Zu = aa();
    B.prototype.iz = aa();
    B.prototype.delayReference = B.prototype.eg = function(a, b) {
        if (a !== f) {
            var c = this.qg.ca(a);
            c === m && (c = new pa, this.qg.add(a, c));
            c.add(b)
        }
    };
    B.prototype.forgetDelayedReference = B.prototype.bh = function(a, b) {
        if (a !== f) {
            var c = this.qg.ca(a);
            c instanceof pa && (b === f || b === m ? this.qg.remove(a) : (c.remove(b), 0 === c.count && this.qg.remove(a)))
        }
    };
    B.prototype.dumpDelayedReferences = B.prototype.DI = function() {
        v.trace("DelayedReferences (" + this.qg.count + ")");
        for (var a = this.qg.f; a.next();) {
            for (var b = "",
            c = a.value.f; c.next();) b += Ge(c.value) + ", ";
            v.trace(" " + a.key + ": " + b)
        }
    };
    B.prototype.findDelayedReferences = B.prototype.LB = function(a) {
        if (a === f) return m;
        a = this.qg.ca(a);
        return a instanceof pa ? a: m
    };
    B.prototype.clearUnresolvedReferences = B.prototype.hB = function(a) {
        a === f ? this.qg.clear() : this.qg.remove(a)
    };
    v.a(B, "copyNodeDataFunction", B.prototype.fF);
    v.defineProperty(B, {
        fF: "copyNodeDataFunction"
    },
    s("Fs"),
    function(a) {
        var b = this.Fs;
        b !== a && (a !== m && v.e(a, "function", B, "copyNodeDataFunction"), this.Fs = a, this.d("copyNodeDataFunction", b, a))
    });
    B.prototype.copyNodeData = B.prototype.on = function(a) {
        if (a === m) return m;
        var b = m,
        b = this.Fs;
        if (b !== m) b = b(a);
        else {
            var b = new a.constructor,
            c;
            for (c in a) v.fb(b, c, v.Za(a, c))
        }
        b && v.Ob(b);
        return b
    };
    B.prototype.setDataProperty = B.prototype.GG = function(a, b, c) {
        t && (v.e(a, "object", B, "setDataProperty:data"), v.e(b, "string", B, "setDataProperty:propname"), "" === b && v.g("Model.setDataProperty: property name must not be an empty string when setting " + a + " to " + c));
        if (this.Ii(a)) if (b === this.Hl) v.g("Model.setDataProperty: property name must not be the key for the node data: " + b);
        else if (b === this.Gl && "string" === typeof c) {
            this.Vy(a, c);
            return
        }
        var d = v.Za(a, b);
        d !== c && (v.fb(a, b, c), Oe(this, "", De, b, a, d, c))
    };
    B.prototype.insertArrayItem = B.prototype.pJ = function(a, b, c) {
        t && (v.qu(a, B, "insertArrayItem:arr"), v.j(b, B, "insertArrayItem:idx"));
        0 > b && (b = v.Eb(a));
        v.Qh(a, b, c);
        Oe(this, "", Ee, "", a, m, c, m, b)
    };
    B.prototype.removeArrayItem = B.prototype.iK = function(a, b) {
        b === f && (b = -1);
        t && (v.qu(a, B, "removeArrayItem:arr"), v.j(b, B, "removeArrayItem:idx")); - 1 === b && (b = v.Eb(a) - 1);
        var c = v.qb(a, b);
        v.Rh(a, b);
        Oe(this, "", Fe, "", a, c, m, b, m)
    };
    v.a(B, "nodeCategoryProperty", B.prototype.Gl);
    v.defineProperty(B, {
        Gl: "nodeCategoryProperty"
    },
    s("$p"),
    function(a) {
        var b = this.$p;
        b !== a && (Pe(a, B, "nodeCategoryProperty"), this.$p = a, this.d("nodeCategoryProperty", b, a))
    });
    B.prototype.getCategoryForNodeData = B.prototype.TB = function(a) {
        if (a === m) return "";
        var b = this.$p;
        if ("" === b) return "";
        b = v.Za(a, b);
        if (b === f) return "";
        if ("string" === typeof b) return b;
        t && v.trace("getCategoryForNodeData found a non-string category for " + a + ": " + b);
        return ""
    };
    B.prototype.setCategoryForNodeData = B.prototype.Vy = function(a, b) {
        v.e(b, "string", B, "setCategoryForNodeData:val");
        if (a !== m) {
            var c = this.$p;
            if ("" !== c) if (this.Ii(a)) {
                var d = v.Za(a, c);
                d === f && (d = "");
                d !== b && (v.fb(a, c, b), Oe(this, "nodeCategory", De, c, a, d, b))
            } else v.fb(a, c, b)
        }
    };
    function N(a, b) {
        B.call(this);
        this.Kj = [];
        this.Gp = new pa(Object);
        this.Es = m;
        this.Lj = "from";
        this.Nj = "to";
        this.Jp = this.Ip = "";
        this.Ep = "category";
        this.zh = this.xt = "";
        this.wt = "isGroup";
        this.Qj = "group";
        a !== f && (this.gh = a);
        b !== f && (this.hg = b)
    }
    v.H("GraphLinksModel", N);
    v.pa(N, B);
    N.prototype.clear = N.prototype.clear = function() {
        B.prototype.clear.call(this);
        this.Kj = [];
        this.Gp.clear()
    };
    N.prototype.toString = function(a) {
        a === f && (a = 0);
        if (2 <= a) return this.vD();
        var b = ("" !== this.name ? this.name: "") + " GraphLinksModel";
        if (0 < a) {
            var b = b + "\n node data:",
            a = this.gh,
            c = v.Eb(a),
            d;
            for (d = 0; d < c; d++) var e = v.qb(a, d),
            b = b + (" " + this.dc(e) + ":" + Ge(e));
            b += "\n link data:";
            a = this.hg;
            c = v.Eb(a);
            for (d = 0; d < c; d++) e = v.qb(a, d),
            b += " " + this.Bn(e) + "--\>" + this.Cn(e)
        }
        return b
    };
    N.prototype.writeJsonProtected = N.prototype.OD = function() {
        var a = B.prototype.OD.call(this),
        b = "";
        "category" !== this.In && "string" === typeof this.In && (b += ',\n "linkCategoryProperty": ' + this.quote(this.In));
        "from" !== this.Jn && "string" === typeof this.Jn && (b += ',\n "linkFromKeyProperty": ' + this.quote(this.Jn));
        "to" !== this.Nn && "string" === typeof this.Nn && (b += ',\n "linkToKeyProperty": ' + this.quote(this.Nn));
        "" !== this.Kn && "string" === typeof this.Kn && (b += ',\n "linkFromPortIdProperty": ' + this.quote(this.Kn));
        "" !== this.On && "string" === typeof this.On && (b += ',\n "linkToPortIdProperty": ' + this.quote(this.On));
        "" !== this.Wn && "string" === typeof this.Wn && (b += ',\n "nodeIsLinkLabelProperty": ' + this.quote(this.Wn));
        "" !== this.Ln && "string" === typeof this.Ln && (b += ',\n "linkLabelKeysProperty": ' + this.quote(this.Ln));
        "isGroup" !== this.Vn && "string" === typeof this.Vn && (b += ',\n "nodeIsGroupProperty": ' + this.quote(this.Vn));
        "group" !== this.Un && "string" === typeof this.Un && (b += ',\n "nodeGroupKeyProperty": ' + this.quote(this.Un));
        return a + b
    };
    N.prototype.nz = function() {
        var a = B.prototype.nz.call(this),
        b = ',\n "linkDataArray": ' + Ie(this, this.hg, h);
        return a + b
    };
    N.prototype.readJsonProtected = N.prototype.QC = function(a) {
        B.prototype.QC.call(this, a);
        a.linkFromKeyProperty && (this.Jn = a.linkFromKeyProperty);
        a.linkToKeyProperty && (this.Nn = a.linkToKeyProperty);
        a.linkFromPortIdProperty && (this.Kn = a.linkFromPortIdProperty);
        a.linkToPortIdProperty && (this.On = a.linkToPortIdProperty);
        a.linkCategoryProperty && (this.In = a.linkCategoryProperty);
        a.nodeIsLinkLabelProperty && (this.Wn = a.nodeIsLinkLabelProperty);
        a.linkLabelKeysProperty && (this.Ln = a.linkLabelKeysProperty);
        a.nodeIsGroupProperty && (this.Vn = a.nodeIsGroupProperty);
        a.nodeGroupKeyProperty && (this.Un = a.nodeGroupKeyProperty)
    };
    N.prototype.Oy = function(a) {
        B.prototype.Oy.call(this, a);
        a.linkDataArray && (a = a.linkDataArray, Je(this, a), this.hg = a)
    };
    N.prototype.Lx = function(a, b) {
        if (a.Sc === Ee) {
            var c = m;
            "linkDataArray" === a.ne ? c = this.hg: "linkLabelKeys" === a.ne && (c = this.zl(a.object));
            if (v.isArray(c)) {
                b ? v.Rh(c, a.Ve) : v.Qh(c, a.Ve, a.newValue);
                return
            }
        } else if (a.Sc === Fe && (c = m, "linkDataArray" === a.ne ? c = this.hg: "linkLabelKeys" === a.ne && (c = this.zl(a.object)), v.isArray(c))) {
            b ? v.Qh(c, a.We, a.oldValue) : v.Rh(c, a.We);
            return
        }
        B.prototype.Lx.call(this, a, b)
    };
    v.a(N, "linkFromKeyProperty", N.prototype.Jn);
    v.defineProperty(N, {
        Jn: "linkFromKeyProperty"
    },
    s("Lj"),
    function(a) {
        var b = this.Lj;
        b !== a && (Pe(a, N, "linkFromKeyProperty"), this.Lj = a, this.d("linkFromKeyProperty", b, a))
    });
    N.prototype.getFromKeyForLinkData = N.prototype.Bn = function(a) {
        if (a !== m) {
            var b = this.Lj;
            if ("" !== b && (b = v.Za(a, b), b !== f)) {
                if (Qe(b)) return b;
                t && v.trace("FromKey value for link data " + a + " is not a number or a string: " + b)
            }
        }
    };
    N.prototype.setFromKeyForLinkData = N.prototype.fv = function(a, b) {
        b === m && (b = f);
        b !== f && !Qe(b) && v.Ac(b, "number or string", N, "setFromKeyForLinkData:key");
        if (a !== m) {
            var c = this.Lj;
            if ("" !== c) if (this.Uh(a)) {
                var d = v.Za(a, c);
                d !== b && (this.bh(d, a), v.fb(a, c, b), this.$g(b) === m && this.eg(b, a), Oe(this, "linkFromKey", De, c, a, d, b), "string" === typeof c && this.nc(a, c))
            } else v.fb(a, c, b)
        }
    };
    v.a(N, "linkToKeyProperty", N.prototype.Nn);
    v.defineProperty(N, {
        Nn: "linkToKeyProperty"
    },
    s("Nj"),
    function(a) {
        var b = this.Nj;
        b !== a && (Pe(a, N, "linkToKeyProperty"), this.Nj = a, this.d("linkToKeyProperty", b, a))
    });
    N.prototype.getToKeyForLinkData = N.prototype.Cn = function(a) {
        if (a !== m) {
            var b = this.Nj;
            if ("" !== b && (b = v.Za(a, b), b !== f)) {
                if (Qe(b)) return b;
                t && v.trace("ToKey value for link data " + a + " is not a number or a string: " + b)
            }
        }
    };
    N.prototype.setToKeyForLinkData = N.prototype.gv = function(a, b) {
        b === m && (b = f);
        b !== f && !Qe(b) && v.Ac(b, "number or string", N, "setToKeyForLinkData:key");
        if (a !== m) {
            var c = this.Nj;
            if ("" !== c) if (this.Uh(a)) {
                var d = v.Za(a, c);
                d !== b && (this.bh(d, a), v.fb(a, c, b), this.$g(b) === m && this.eg(b, a), Oe(this, "linkToKey", De, c, a, d, b), "string" === typeof c && this.nc(a, c))
            } else v.fb(a, c, b)
        }
    };
    v.a(N, "linkFromPortIdProperty", N.prototype.Kn);
    v.defineProperty(N, {
        Kn: "linkFromPortIdProperty"
    },
    s("Ip"),
    function(a) {
        var b = this.Ip;
        b !== a && (Pe(a, N, "linkFromPortIdProperty"), this.Ip = a, this.d("linkFromPortIdProperty", b, a))
    });
    N.prototype.getFromPortIdForLinkData = N.prototype.CF = function(a) {
        if (a === m) return "";
        var b = this.Ip;
        if ("" === b) return "";
        a = v.Za(a, b);
        return a === f ? "": a
    };
    N.prototype.setFromPortIdForLinkData = N.prototype.bs = function(a, b) {
        v.e(b, "string", N, "setFromPortIdForLinkData:portname");
        if (a !== m) {
            var c = this.Ip;
            if ("" !== c) if (this.Uh(a)) {
                var d = v.Za(a, c);
                d === f && (d = "");
                d !== b && (v.fb(a, c, b), Oe(this, "linkFromPortId", De, c, a, d, b), "string" === typeof c && this.nc(a, c))
            } else v.fb(a, c, b)
        }
    };
    v.a(N, "linkToPortIdProperty", N.prototype.On);
    v.defineProperty(N, {
        On: "linkToPortIdProperty"
    },
    s("Jp"),
    function(a) {
        var b = this.Jp;
        b !== a && (Pe(a, N, "linkToPortIdProperty"), this.Jp = a, this.d("linkToPortIdProperty", b, a))
    });
    N.prototype.getToPortIdForLinkData = N.prototype.EF = function(a) {
        if (a === m) return "";
        var b = this.Jp;
        if ("" === b) return "";
        a = v.Za(a, b);
        return a === f ? "": a
    };
    N.prototype.setToPortIdForLinkData = N.prototype.cs = function(a, b) {
        v.e(b, "string", N, "setToPortIdForLinkData:portname");
        if (a !== m) {
            var c = this.Jp;
            if ("" !== c) if (this.Uh(a)) {
                var d = v.Za(a, c);
                d === f && (d = "");
                d !== b && (v.fb(a, c, b), Oe(this, "linkToPortId", De, c, a, d, b), "string" === typeof c && this.nc(a, c))
            } else v.fb(a, c, b)
        }
    };
    v.a(N, "nodeIsLinkLabelProperty", N.prototype.Wn);
    v.defineProperty(N, {
        Wn: "nodeIsLinkLabelProperty"
    },
    s("xt"),
    function(a) {
        var b = this.xt;
        b !== a && (Pe(a, N, "nodeIsLinkLabelProperty"), this.xt = a, this.d("nodeIsLinkLabelProperty", b, a))
    });
    N.prototype.isLinkLabelForNodeData = N.prototype.ty = function(a) {
        if (a === m) return p;
        var b = this.xt;
        return "" === b ? p: v.Za(a, b) ? h: p
    };
    v.a(N, "linkLabelKeysProperty", N.prototype.Ln);
    v.defineProperty(N, {
        Ln: "linkLabelKeysProperty"
    },
    s("zh"),
    function(a) {
        var b = this.zh;
        b !== a && (Pe(a, N, "linkLabelKeysProperty"), this.zh = a, this.d("linkLabelKeysProperty", b, a))
    });
    N.prototype.getLabelKeysForLinkData = N.prototype.zl = function(a) {
        if (a === m) return [];
        var b = this.zh;
        if ("" === b) return [];
        a = v.Za(a, b);
        return a === f ? [] : a
    };
    N.prototype.setLabelKeysForLinkData = N.prototype.nD = function(a, b) {
        v.c(b, Array, N, "setLabelKeysForLinkData:arr");
        if (a !== m) {
            var c = this.zh;
            if ("" !== c) if (this.Uh(a)) {
                var d = v.Za(a, c);
                d === f && (d = []);
                if (d !== b) {
                    for (var e = v.Eb(d), g = 0; g < e; g++) {
                        var i = v.qb(d, g);
                        this.bh(i, a)
                    }
                    v.fb(a, c, b);
                    e = v.Eb(b);
                    for (g = 0; g < e; g++) i = v.qb(b, g),
                    this.$g(i) === m && this.eg(i, a);
                    Oe(this, "linkLabelKeys", De, c, a, d, b);
                    "string" === typeof c && this.nc(a, c)
                }
            } else v.fb(a, c, b)
        }
    };
    N.prototype.addLabelKeyForLinkData = N.prototype.VA = function(a, b) {
        if (! (b === m || b === f)) if (Qe(b) || v.Ac(b, "number or string", N, "addLabelKeyForLinkData:key"), a !== m) {
            var c = this.zh;
            if ("" !== c) {
                var d = v.Za(a, c);
                d === f ? this.nD(a, [b]) : v.isArray(d) ? 0 <= v.Gx(d, b) || (v.Qh(d, Infinity, b), this.Uh(a) && (this.$g(b) === m && this.eg(b, a), Oe(this, "linkLabelKeys", Ee, c, a, m, b))) : v.g(c + " property is not an Array; cannot addLabelKeyForLinkData: " + a)
            }
        }
    };
    N.prototype.removeLabelKeyForLinkData = N.prototype.uG = function(a, b) {
        if (! (b === m || b === f)) if (Qe(b) || v.Ac(b, "number or string", N, "removeLabelKeyForLinkData:key"), a !== m) {
            var c = this.zh;
            if ("" !== c) {
                var d = v.Za(a, c);
                if (v.isArray(d)) {
                    var e = v.Gx(d, b);
                    0 > e || (v.Rh(d, e), this.Uh(a) && (this.bh(b, a), Oe(this, "linkLabelKeys", Fe, c, a, b, m)))
                } else d !== f && v.g(c + " property is not an Array; cannot removeLabelKeyforLinkData: " + a)
            }
        }
    };
    v.a(N, "linkDataArray", N.prototype.hg);
    v.defineProperty(N, {
        hg: "linkDataArray"
    },
    s("Kj"),
    function(a) {
        var b = this.Kj;
        if (b !== a) {
            v.qu(a, N, "linkDataArray");
            for (var c = v.Eb(a), d = 0; d < c; d++) {
                var e = v.qb(a, d);
                if (!v.Oa(e)) {
                    v.g("GraphLinksModel.linkDataArray must only contain Objects, not: " + e);
                    return
                }
                v.Dn(e)
            }
            this.Kj = a;
            for (var g = new pa(Object), d = 0; d < c; d++) e = v.qb(a, d),
            g.add(e);
            this.Gp = g;
            Oe(this, "linkDataArray", De, "linkDataArray", this, b, a);
            for (d = 0; d < c; d++) e = v.qb(a, d),
            $e(this, e)
        }
    });
    N.prototype.containsLinkData = N.prototype.Uh = function(a) {
        return a === m ? p: this.Gp.contains(a)
    };
    N.prototype.addLinkData = N.prototype.WA = function(a) {
        if (a !== m) {
            if (v.kc(a) === f) v.Ob(a);
            else if (this.Uh(a)) return;
            this.Gp.add(a);
            var b = v.Eb(this.Kj);
            v.Qh(this.Kj, b, a);
            Oe(this, "linkDataArray", Ee, "linkDataArray", this, m, a, m, b);
            $e(this, a)
        }
    };
    N.prototype.removeLinkData = N.prototype.vG = function(a) {
        if (a !== m) {
            this.Gp.remove(a);
            var b = this.Kj.indexOf(a);
            if (! (0 > b)) {
                v.Rh(this.Kj, b);
                Oe(this, "linkDataArray", Fe, "linkDataArray", this, a, m, b, m);
                b = this.Bn(a);
                this.bh(b, a);
                b = this.Cn(a);
                this.bh(b, a);
                for (var c = this.zl(a), d = v.Eb(c), e = 0; e < d; e++) b = v.qb(c, e),
                this.bh(b, a)
            }
        }
    };
    function $e(a, b) {
        var c = a.Bn(b);
        a.$g(c) === m && a.eg(c, b);
        c = a.Cn(b);
        a.$g(c) === m && a.eg(c, b);
        for (var d = a.zl(b), e = v.Eb(d), g = 0; g < e; g++) c = v.qb(d, g),
        a.$g(c) === m && a.eg(c, b)
    }
    v.a(N, "copyLinkDataFunction", N.prototype.eF);
    v.defineProperty(N, {
        eF: "copyLinkDataFunction"
    },
    s("Es"),
    function(a) {
        var b = this.Es;
        b !== a && (a !== m && v.e(a, "function", N, "copyLinkDataFunction"), this.Es = a, this.d("copyLinkDataFunction", b, a))
    });
    N.prototype.copyLinkData = N.prototype.qB = function(a) {
        if (a === m) return m;
        var b = m,
        b = this.Es;
        if (b !== m) b = b(a);
        else {
            var b = new a.constructor,
            c;
            for (c in a) v.fb(b, c, v.Za(a, c))
        }
        b && (v.Ob(b), "" !== this.Lj && v.fb(b, this.Lj, f), "" !== this.Nj && v.fb(b, this.Nj, f), "" !== this.zh && v.fb(b, this.zh, []));
        return b
    };
    v.a(N, "nodeIsGroupProperty", N.prototype.Vn);
    v.defineProperty(N, {
        Vn: "nodeIsGroupProperty"
    },
    s("wt"),
    function(a) {
        var b = this.wt;
        b !== a && (Pe(a, N, "nodeIsGroupProperty"), this.wt = a, this.d("nodeIsGroupProperty", b, a))
    });
    N.prototype.isGroupForNodeData = N.prototype.py = function(a) {
        if (a === m) return p;
        var b = this.wt;
        return "" === b ? p: v.Za(a, b) ? h: p
    };
    v.a(N, "nodeGroupKeyProperty", N.prototype.Un);
    v.defineProperty(N, {
        Un: "nodeGroupKeyProperty"
    },
    s("Qj"),
    function(a) {
        var b = this.Qj;
        b !== a && (Pe(a, N, "nodeGroupKeyProperty"), this.Qj = a, this.d("nodeGroupKeyProperty", b, a))
    });
    N.prototype.getGroupKeyForNodeData = N.prototype.Br = function(a) {
        if (a !== m) {
            var b = this.Qj;
            if ("" !== b && (b = v.Za(a, b), b !== f)) {
                if (Qe(b)) return b;
                t && v.trace("GroupKey value for node data " + a + " is not a number or a string: " + b)
            }
        }
    };
    N.prototype.setGroupKeyForNodeData = N.prototype.Xy = function(a, b) {
        b === m && (b = f);
        b !== f && !Qe(b) && v.Ac(b, "number or string", N, "setGroupKeyForNodeData:key");
        if (a !== m) {
            var c = this.Qj;
            if ("" !== c) if (this.Ii(a)) {
                var d = v.Za(a, c);
                d !== b && (this.bh(d, a), v.fb(a, c, b), this.$g(b) === m && this.eg(b, a), Oe(this, "nodeGroupKey", De, c, a, d, b), "string" === typeof c && this.nc(a, c))
            } else v.fb(a, c, b)
        }
    };
    N.prototype.copyNodeData = N.prototype.on = function(a) {
        if (a === m) return m;
        a = B.prototype.on.call(this, a);
        "" !== this.Qj && v.fb(a, this.Qj, f);
        return a
    };
    N.prototype.setDataProperty = N.prototype.GG = function(a, b, c) {
        t && (v.e(a, "object", N, "setDataProperty:data"), v.e(b, "string", N, "setDataProperty:propname"), "" === b && v.g("GraphLinksModel.setDataProperty: property name must not be an empty string when setting " + a + " to " + c));
        if (this.Ii(a)) if (b === this.Hl) v.g("GraphLinksModel.setDataProperty: property name must not be the key for the node data: " + b);
        else {
            if (b === this.Gl && "string" === typeof c) {
                this.Vy(a, c);
                return
            }
            if (b === this.Un && ("string" === typeof c || "number" === typeof c)) {
                this.Xy(a, c);
                return
            }
            b === this.Vn ? v.g("GraphLinksModel.setDataProperty: property name must not be the nodeIsGroupProperty: " + b) : b === this.Wn && v.g("GraphLinksModel.setDataProperty: property name must not be the nodeIsLinkLabelProperty: " + b)
        } else if (this.Uh(a)) {
            if (b === this.Jn && ("string" === typeof c || "number" === typeof c)) {
                this.fv(a, c);
                return
            }
            if (b === this.Nn && ("string" === typeof c || "number" === typeof c)) {
                this.gv(a, c);
                return
            }
            if (b === this.Kn && "string" === typeof c) {
                this.bs(a, c);
                return
            }
            if (b === this.On && "string" === typeof c) {
                this.cs(a, c);
                return
            }
            if (b === this.In && "string" === typeof c) {
                this.mD(a, c);
                return
            }
            if (b === this.Ln && v.isArray(c)) {
                this.nD(a, c);
                return
            }
        }
        var d = v.Za(a, b);
        d !== c && (v.fb(a, b, c), Oe(this, "", De, b, a, d, c))
    };
    N.prototype.hz = function() {
        B.prototype.hz.call(this);
        for (var a = this.hg,
        b = v.Eb(a), c = 0; c < b; c++) $e(this, v.qb(a, c))
    };
    N.prototype.$u = function(a) {
        B.prototype.$u.call(this, a);
        var a = this.dc(a),
        b = this.LB(a);
        if (b !== m) {
            for (var c = new y(Object), b = b.f; b.next();) {
                var d = b.value;
                if (this.Ii(d)) {
                    if (this.Br(d) === a) {
                        var e = this.Qj;
                        Oe(this, "nodeGroupKey", De, e, d, a, a);
                        "string" === typeof e && this.nc(d, e);
                        c.add(d)
                    }
                } else {
                    this.Bn(d) === a && (e = this.Lj, Oe(this, "linkFromKey", De, e, d, a, a), "string" === typeof e && this.nc(d, e), c.add(d));
                    this.Cn(d) === a && (e = this.Nj, Oe(this, "linkToKey", De, e, d, a, a), "string" === typeof e && this.nc(d, e), c.add(d));
                    for (var g = this.zl(d), i = v.Eb(g), e = this.zh, j = 0; j < i; j++) v.qb(g, j) === a && (Oe(this, "linkLabelKeys", Ee, e, d, a, a), c.add(d))
                }
            }
            for (c = c.f; c.next();) this.bh(a, c.value)
        }
    };
    N.prototype.Zu = function(a) {
        B.prototype.Zu.call(this, a);
        var b = this.Br(a);
        this.$g(b) === m && this.eg(b, a)
    };
    N.prototype.iz = function(a) {
        B.prototype.iz.call(this, a);
        var b = this.Br(a);
        this.bh(b, a)
    };
    v.a(N, "linkCategoryProperty", N.prototype.In);
    v.defineProperty(N, {
        In: "linkCategoryProperty"
    },
    s("Ep"),
    function(a) {
        var b = this.Ep;
        b !== a && (Pe(a, N, "linkCategoryProperty"), this.Ep = a, this.d("linkCategoryProperty", b, a))
    });
    N.prototype.getCategoryForLinkData = N.prototype.SB = function(a) {
        if (a === m) return "";
        var b = this.Ep;
        if ("" === b) return "";
        b = v.Za(a, b);
        if (b === f) return "";
        if ("string" === typeof b) return b;
        t && v.trace("getCategoryForLinkData found a non-string category for " + a + ": " + b);
        return b
    };
    N.prototype.setCategoryForLinkData = N.prototype.mD = function(a, b) {
        v.e(b, "string", N, "setCategoryForLinkData:val");
        if (a !== m) {
            var c = this.Ep;
            if ("" === c) return "";
            if (this.Uh(a)) {
                var d = v.Za(a, c);
                d === f && (d = "");
                d !== b && (v.fb(a, c, b), Oe(this, "linkCategory", De, c, a, d, b), "string" === typeof c && this.nc(a, c))
            } else v.fb(a, c, b)
        }
    };
    function af(a, b, c) {
        v.Ob(this);
        a === f ? a = "": v.e(a, "string", af, "constructor:targetprop");
        b === f ? b = a: v.e(b, "string", af, "constructor:sourceprop");
        c === f ? c = m: c !== m && v.e(c, "function", af, "constructor:conv");
        this.KA = "";
        this.kf = m;
        this.au = a;
        this.Zt = this.jx = 0;
        this.BA = m;
        this.Ut = b;
        this.cw = c;
        this.Kw = bf;
        this.Xv = m
    }
    v.H("Binding", af);
    var bf;
    af.OneWay = bf = v.l(af, "OneWay", 1);
    var cf;
    af.TwoWay = cf = v.l(af, "TwoWay", 2);
    af.parseEnum = function(a, b) {
        v.e(a, "function", af, "parseEnum:ctor");
        v.Va(b, a, af, "parseEnum:defval");
        return function(c) {
            return v.wl(a, c) || b
        }
    };
    var Ge;
    af.toString = Ge = function(a) {
        var b = a;
        v.Oa(a) && (a.text ? b = a.text: a.name ? b = a.name: a.key !== f ? b = a.key: a.id !== f && (b = a.id));
        return b === f ? "undefined": b === m ? "null": b.toString()
    };
    af.prototype.toString = function() {
        return "Binding(" + this.Ol + " " + this.dz + ":" + this.Zy + ")"
    };
    af.prototype.freeze = function() {
        this.Ma = h;
        return this
    };
    af.prototype.qa = function() {
        this.Ma = p;
        return this
    };
    v.a(af, "targetId", af.prototype.Ol);
    v.defineProperty(af, {
        Ol: "targetId"
    },
    s("KA"),
    function(a) {
        v.v(this);
        v.e(a, "string", af, "targetId");
        this.KA = a
    });
    v.a(af, "targetProperty", af.prototype.dz);
    v.defineProperty(af, {
        dz: "targetProperty"
    },
    s("au"),
    function(a) {
        v.v(this);
        v.e(a, "string", af, "targetProperty");
        this.au = a
    });
    v.a(af, "sourceName", af.prototype.fo);
    v.defineProperty(af, {
        fo: "sourceName"
    },
    s("BA"),
    function(a) {
        v.v(this);
        v.e(a, "string", af, "sourceName");
        this.BA = a
    });
    v.a(af, "sourceProperty", af.prototype.Zy);
    v.defineProperty(af, {
        Zy: "sourceProperty"
    },
    s("Ut"),
    function(a) {
        v.v(this);
        v.e(a, "string", af, "sourceProperty");
        this.Ut = a
    });
    v.a(af, "converter", af.prototype.nB);
    v.defineProperty(af, {
        nB: "converter"
    },
    s("cw"),
    function(a) {
        v.v(this);
        a !== m && v.e(a, "function", af, "converter");
        this.cw = a
    });
    v.a(af, "backConverter", af.prototype.fB);
    v.defineProperty(af, {
        fB: "backConverter"
    },
    s("Xv"),
    function(a) {
        v.v(this);
        a !== m && v.e(a, "function", af, "backConverter");
        this.Xv = a
    });
    v.a(af, "mode", af.prototype.mode);
    v.defineProperty(af, {
        mode: "mode"
    },
    s("Kw"),
    function(a) {
        v.v(this);
        v.Va(a, af, af, "mode");
        this.Kw = a
    });
    af.prototype.makeTwoWay = af.prototype.IJ = function(a) {
        a === f && (a = m);
        this.mode = cf;
        this.fB = a;
        return this
    };
    af.prototype.ofObject = af.prototype.My = function(a) {
        a === f && (a = "");
        t && v.e(a, "string", af, "ofObject:srcname");
        this.fo = a;
        return this
    };
    af.prototype.updateTarget = af.prototype.KD = function(a, b, c) {
        var d = this.Ut;
        if (! (c && d !== c)) {
            var c = this.au,
            e = this.cw;
            if (! (e === m && "" === c)) {
                t && ("string" === typeof c && "function" !== typeof a.setAttribute && !v.my(a, c)) && v.trace("Binding error: undefined target property: " + c + " on " + a.toString());
                var g = b;
                "" !== d && (g = v.Za(b, d));
                if (g !== f) if (e === m)"" !== c && v.fb(a, c, g);
                else try {
                    if ("" !== c) {
                        var i = e(g, a);
                        v.fb(a, c, i)
                    } else e(g, a)
                } catch(j) {
                    t && v.trace("Binding error: " + j.toString())
                }
            }
        }
    };
    af.prototype.updateSource = af.prototype.JD = function(a, b, c) {
        if (this.Kw === cf) {
            var d = this.au;
            if (! (c && d !== c)) {
                var c = this.Ut,
                e = this.Xv;
                if (! (e === m && "" === c)) {
                    var g = a;
                    "" !== d && (g = v.Za(a, d));
                    if (g !== f) if (e === m) v.fb(b, c, g);
                    else try {
                        if ("" !== c) {
                            var i = e(g, b);
                            v.fb(b, c, i)
                        } else e(g, b)
                    } catch(j) {
                        t && v.trace("Binding error: " + j.toString())
                    }
                }
            }
        }
    };
    function df() {
        this.VD = (new y(Be)).freeze();
        this.wb = "";
        this.Xz = p
    }
    v.H("Transaction", df);
    df.prototype.toString = function(a) {
        var b = "Transaction: " + this.name + " " + this.Vg.count.toString() + (this.Fn ? "": ", incomplete");
        if (a !== f && 0 < a) for (var c = this.Vg.count,
        d = 0; d < c; d++) {
            var e = this.Vg.Z(d);
            e !== m && (b += "\n " + e.toString(a - 1))
        }
        return b
    };
    df.prototype.clear = df.prototype.clear = function() {
        var a = this.Vg;
        a.qa();
        for (var b = a.count - 1; 0 <= b; b--) {
            var c = a.Z(b);
            c !== m && c.clear()
        }
        a.clear();
        a.freeze()
    };
    df.prototype.canUndo = df.prototype.fk = s("Fn");
    df.prototype.undo = df.prototype.xk = function() {
        if (this.fk()) for (var a = this.Vg.count - 1; 0 <= a; a--) {
            var b = this.Vg.Z(a);
            b !== m && b.xk()
        }
    };
    df.prototype.canRedo = df.prototype.ek = s("Fn");
    df.prototype.redo = df.prototype.Yn = function() {
        if (this.ek()) for (var a = this.Vg.count,
        b = 0; b < a; b++) {
            var c = this.Vg.Z(b);
            c !== m && c.Yn()
        }
    };
    v.m(df, {
        Vg: "changes"
    },
    s("VD"));
    v.a(df, "name", df.prototype.name);
    v.defineProperty(df, {
        name: "name"
    },
    s("wb"), ba("wb"));
    v.a(df, "isComplete", df.prototype.Fn);
    v.defineProperty(df, {
        Fn: "isComplete"
    },
    s("Xz"), ba("Xz"));
    function He() {
        this.Lw = new pa(B);
        this.vh = p;
        this.bE = (new y(df)).freeze();
        this.Cj = -1;
        this.cA = 999;
        this.wh = p;
        this.Js = m;
        this.ak = 0;
        this.$v = p;
        t && (this.$v = h);
        this.Vf = (new y("string")).freeze();
        this.Fm = new y("number");
        this.rw = h
    }
    v.H("UndoManager", He);
    He.prototype.toString = function(a) {
        for (var b = "UndoManager " + this.Ti + "<" + this.history.count + "<=" + this.Cy,
        b = b + "[",
        c = this.HC.count,
        d = 0; d < c; d++) 0 < d && (b += " "),
        b += this.HC.Z(d);
        b += "]";
        if (a !== f && 0 < a) {
            c = this.history.count;
            for (d = 0; d < c; d++) b += "\n " + this.history.Z(d).toString(a - 1)
        }
        return b
    };
    He.prototype.clear = He.prototype.clear = function() {
        var a = this.history;
        a.qa();
        for (var b = a.count - 1; 0 <= b; b--) {
            var c = a.Z(b);
            c !== m && c.clear()
        }
        a.clear();
        this.Cj = -1;
        a.freeze();
        this.wh = p;
        this.Js = m;
        this.ak = 0;
        this.Vf.qa();
        this.Vf.clear();
        this.Vf.freeze();
        this.Fm.clear()
    };
    He.prototype.addModel = He.prototype.xE = function(a) {
        this.Lw.add(a)
    };
    He.prototype.removeModel = He.prototype.wG = function(a) {
        this.Lw.remove(a)
    };
    He.prototype.startTransaction = He.prototype.Nb = function(a) {
        a === m && (a = "");
        if (this.cb) return p;
        this.rw === h && (this.rw = p, this.ak++, this.xd("StartingFirstTransaction", a, this.rl), 0 < this.ak && this.ak--);
        this.isEnabled && (this.Vf.qa(), this.Vf.add(a), this.Vf.freeze(), this.rl === m ? this.Fm.add(0) : this.Fm.add(this.rl.Vg.count));
        this.ak++;
        var b = 1 === this.wk;
        b && this.xd("StartedTransaction", a);
        return b
    };
    He.prototype.commitTransaction = He.prototype.Sd = function(a) {
        return ef(this, h, a)
    };
    He.prototype.rollbackTransaction = He.prototype.Yr = function() {
        return ef(this, p, "")
    };
    function ef(a, b, c) {
        if (a.cb) return p;
        a.Mx && 1 > a.wk && v.trace("Ending transaction without having started a transaction: " + c);
        var d = 1 === a.wk;
        d && (b && a.isEnabled) && a.xd("CommittingTransaction", c, a.rl);
        var e = 0;
        if (0 < a.wk && (a.ak--, a.isEnabled)) {
            var g = a.Vf.count;
            0 < g && ("" === c && (c = a.Vf.Z(0)), a.Vf.qa(), a.Vf.qe(g - 1), a.Vf.freeze());
            g = a.Fm.count;
            0 < g && (e = a.Fm.Z(g - 1), a.Fm.qe(g - 1))
        }
        g = a.rl;
        if (d) {
            if (b) {
                if (a.isEnabled && g !== m) {
                    b = g;
                    b.Fn = h;
                    b.name = c;
                    d = a.history;
                    d.qa();
                    for (e = d.count - 1; e > a.Ti; e--) g = d.Z(e),
                    g !== m && g.clear(),
                    d.qe(e);
                    e = a.Cy;
                    0 === e && (e = 1);
                    0 < e && d.count >= e && (g = d.Z(0), g !== m && g.clear(), d.qe(0), a.Cj--);
                    d.add(b);
                    a.Cj++;
                    d.freeze();
                    g = b
                }
                a.xd("CommittedTransaction", c, g)
            } else {
                a.wh = h;
                try {
                    a.isEnabled && g !== m && (g.Fn = h, g.xk())
                } finally {
                    a.xd("RolledBackTransaction", c, g),
                    a.wh = p
                }
                g !== m && g.clear()
            }
            a.Js = m;
            return h
        }
        if (a.isEnabled && !b && g !== m) {
            a = e;
            c = g.Vg;
            c.qa();
            for (b = c.count - 1; b >= a; b--) d = c.Z(b),
            d !== m && d.xk(),
            c.qe(b);
            c.freeze()
        }
        return p
    }
    He.prototype.canUndo = He.prototype.fk = function() {
        if (!this.isEnabled || 0 < this.wk || this.cb) return p;
        var a = this.DD;
        return a !== m && a.fk() ? h: p
    };
    He.prototype.undo = He.prototype.xk = function() {
        if (this.fk()) {
            var a = this.DD;
            try {
                this.xd("StartingUndo", "Undo", a),
                this.wh = h,
                this.Cj--,
                a.xk()
            } catch(b) {
                v.trace("undo error: " + b.toString())
            } finally {
                this.wh = p,
                this.xd("FinishedUndo", "Undo", a)
            }
        }
    };
    He.prototype.canRedo = He.prototype.ek = function() {
        if (!this.isEnabled || 0 < this.wk || this.cb) return p;
        var a = this.CD;
        return a !== m && a.ek() ? h: p
    };
    He.prototype.redo = He.prototype.Yn = function() {
        if (this.ek()) {
            var a = this.CD;
            try {
                this.xd("StartingRedo", "Redo", a),
                this.wh = h,
                this.Cj++,
                a.Yn()
            } catch(b) {
                v.trace("redo error: " + b.toString())
            } finally {
                this.wh = p,
                this.xd("FinishedRedo", "Redo", a)
            }
        }
    };
    He.prototype.xd = function(a, b, c) {
        c === f && (c = m);
        var d = new Be;
        d.Sc = Ce;
        d.propertyName = a;
        d.object = c;
        d.oldValue = b;
        for (a = this.hG; a.next();) b = a.value,
        d.P = b,
        b.ou(d)
    };
    He.prototype.handleChanged = He.prototype.$B = function(a) {
        if (this.isEnabled && !this.cb && !this.skipsEvent(a)) {
            var b = this.rl;
            b === m && (this.Js = b = new df);
            var c = a.copy(),
            b = b.Vg;
            b.qa();
            b.add(c);
            b.freeze();
            this.Mx && (0 >= this.wk && !this.rw) && (a = a.b, a !== m && a.Pf === p || v.trace("Change not within a transaction: " + c.toString()))
        }
    };
    He.prototype.skipsEvent = He.prototype.xK = function(a) {
        if (a === m || 0 > a.Sc.value) return h;
        a = a.object;
        if (a instanceof P) {
            if (a = a.ta, a !== m && a.Tc) return h
        } else if (a instanceof ff && a.Tc) return h;
        return p
    };
    v.m(He, {
        hG: "models"
    },
    function() {
        return this.Lw.f
    });
    v.a(He, "isEnabled", He.prototype.isEnabled);
    v.defineProperty(He, {
        isEnabled: "isEnabled"
    },
    s("vh"), ba("vh"));
    v.m(He, {
        DD: "transactionToUndo"
    },
    function() {
        return 0 <= this.Ti && this.Ti <= this.history.count - 1 ? this.history.Z(this.Ti) : m
    });
    v.m(He, {
        CD: "transactionToRedo"
    },
    function() {
        return this.Ti < this.history.count - 1 ? this.history.Z(this.Ti + 1) : m
    });
    v.m(He, {
        cb: "isUndoingRedoing"
    },
    s("wh"));
    v.m(He, {
        history: "history"
    },
    s("bE"));
    v.a(He, "maxHistoryLength", He.prototype.Cy);
    v.defineProperty(He, {
        Cy: "maxHistoryLength"
    },
    s("cA"), ba("cA"));
    v.m(He, {
        Ti: "historyIndex"
    },
    s("Cj"));
    v.m(He, {
        rl: "currentTransaction"
    },
    s("Js"));
    v.m(He, {
        wk: "transactionLevel"
    },
    s("ak"));
    v.m(He, {
        QF: "isInTransaction"
    },
    function() {
        return 0 < this.ak
    });
    v.defineProperty(He, {
        Mx: "checksTransactionLevel"
    },
    s("$v"), ba("$v"));
    v.m(He, {
        HC: "nestedTransactionNames"
    },
    s("Vf"));
    function sa() {
        this.L = m;
        this.Iz = this.Dz = p;
        this.Pj = this.wz = m
    }
    v.H("CommandHandler", sa);
    var gf = m,
    hf = "";
    sa.prototype.toString = ca("CommandHandler");
    v.m(sa, {
        b: "diagram"
    },
    s("L"));
    sa.prototype.yf = function(a) {
        t && a !== m && v.c(a, A, sa, "setDiagram");
        this.L = a
    };
    sa.prototype.doKeyDown = sa.prototype.$x = function() {
        var a = this.b;
        if (a !== m) {
            var b = a.F,
            c = b.hk,
            d = b.shift,
            e = b.alt,
            g = b.key;
            c && ("C" === g || "Insert" === g) ? this.canCopySelection() && this.copySelection() : c && "X" === g || d && "Del" === g ? this.canCutSelection() && this.cutSelection() : "Del" === g ? this.canDeleteSelection() && this.deleteSelection() : c && "V" === g || d && "Insert" === g ? this.canPasteSelection() && this.pasteSelection() : c && "Y" === g || e && d && "Backspace" === g ? this.canRedo() && this.redo() : c && "Z" === g || e && "Backspace" === g ? this.canUndo() && this.undo() : c && "A" === g ? this.canSelectAll() && this.selectAll() : c && "P" === g ? this.canPrint() && this.print() : "Esc" === g ? this.canStopCommand() && this.stopCommand() : "Up" === g ? a.Ke && (c ? a.scroll("pixel", "up") : a.scroll("line", "up")) : "Down" === g ? a.Ke && (c ? a.scroll("pixel", "down") : a.scroll("line", "down")) : "Left" === g ? a.Je && (c ? a.scroll("pixel", "left") : a.scroll("line", "left")) : "Right" === g ? a.Je && (c ? a.scroll("pixel", "right") : a.scroll("line", "right")) : "PageUp" === g ? a.Je ? a.scroll("page", "left") : !c && a.Ke && a.scroll("page", "up") : "PageDown" === g ? a.Je ? a.scroll("page", "right") : !c && a.Ke && a.scroll("page", "down") : "Home" === g ? (b = a.yc, c && a.Ke ? a.position = new D(a.position.x, b.y) : !c && a.Je && (a.position = new D(b.x, a.position.y))) : "End" === g ? (b = a.yc, d = a.ob, c && a.Ke ? a.position = new D(d.x, b.bottom - d.height) : !c && a.Je && (a.position = new D(b.right - d.width, d.y))) : "Subtract" === g ? this.canDecreaseZoom() && this.decreaseZoom() : "Add" === g ? this.canIncreaseZoom() && this.increaseZoom() : c && "0" === g ? this.canResetZoom() && this.resetZoom() : c && !d && "G" === g ? this.canGroupSelection() && this.groupSelection() : c && d && "G" === g ? this.canUngroupSelection() && this.ungroupSelection() : b.event && 113 === b.event.which ? this.canEditTextBlock() && this.editTextBlock() : b.bubbles = h
        }
    };
    sa.prototype.doKeyUp = sa.prototype.ay = function() {
        var a = this.b;
        a !== m && (a.F.bubbles = h)
    };
    sa.prototype.stopCommand = sa.prototype.EK = function() {
        var a = this.b;
        if (a !== m) {
            var b = a.sa;
            b instanceof jf && a.Pd && a.Ox();
            b !== m && b.doCancel()
        }
    };
    sa.prototype.canStopCommand = sa.prototype.JH = ca(h);
    sa.prototype.selectAll = sa.prototype.rK = function() {
        var a = this.b;
        if (a !== m) try {
            a.xc = "wait";
            a.ga("ChangingSelection");
            for (var b = a.Zi; b.next();) b.value.Ha = h;
            for (b = a.pk; b.next();) b.value.Ha = h;
            for (b = a.links; b.next();) b.value.Ha = h
        } finally {
            a.ga("ChangedSelection"),
            a.xc = ""
        }
    };
    sa.prototype.canSelectAll = sa.prototype.IH = function() {
        var a = this.b;
        return a !== m && a.Pd
    };
    sa.prototype.deleteSelection = sa.prototype.kI = function() {
        var a = this.b;
        if (a !== m && !a.ga("SelectionDeleting", a.selection)) try {
            a.xc = "wait";
            a.Nb("Delete");
            a.ga("ChangingSelection");
            for (var b = new pa(R), c = a.selection.f; c.next();) kf(b, c.value, h, this.FB,
            function(a) {
                return a.canDelete()
            });
            this.deleteParts(b, h);
            a.ga("SelectionDeleted", b)
        } finally {
            a.ga("ChangedSelection"),
            a.Sd("Delete"),
            a.xc = ""
        }
    };
    sa.prototype.canDeleteSelection = sa.prototype.sH = function() {
        var a = this.b;
        return a === m || (a.Pa || a.Ud) || !a.ck || 0 === a.selection.count ? p: h
    };
    sa.prototype.deleteParts = sa.prototype.kF = function(a, b) {
        for (var c = a.f; c.next();) {
            var d = c.value;
            if (!b || d.canDelete()) {
                var e = d.b;
                e !== m && e.remove(d)
            }
        }
    };
    function kf(a, b, c, d, e) {
        if (!a.contains(b) && (e === f && (e = m), (e === m || e(b)) && !(b instanceof lf))) if (a.add(b), b instanceof S) {
            if (c && b instanceof mf) for (var g = b.mc; g.next();) {
                var i = g.value;
                kf(a, i, c, d, e)
            }
            for (i = b.me; i.next();) if (g = i.value, !a.contains(g)) {
                var j = g.ea,
                k = g.ia;
                j !== m && a.contains(j) && k !== m && a.contains(k) ? kf(a, g, c, d, e) : (j === m || k === m) && kf(a, g, c, d, e)
            }
            if (d) {
                i = h;
                g = b.b;
                g !== m && (i = g.sf);
                for (b = i ? b.wn() : b.vn(); b.next();) i = b.value,
                kf(a, i, c, d, e)
            }
        } else if (b instanceof U) for (i = b.di; i.next();) kf(a, i.value, c, d, e)
    }
    sa.prototype.copyParts = sa.prototype.bI = function(a, b, c) {
        for (var d = new oa(R, R), a = a.f; a.next();) nf(this, a.value, b, d, c);
        if (b !== m) {
            c = new pa(U);
            for (a = d.f; a.next();) {
                var e = a.value;
                e instanceof U && (e.ea === m || e.ia === m) && c.add(e)
            }
            0 < c.count && b.Ad.kF(c, p)
        }
        for (b = d.f; b.next();) b.value.nc();
        return d
    };
    function nf(a, b, c, d, e) {
        if (b === m || e && !b.canCopy()) return m;
        if (d.contains(b)) return a = d.ca(b),
        a instanceof R ? a: m;
        var g = m,
        i = b.data;
        if (i !== m && c !== m) {
            var j = c.P;
            b instanceof U ? j instanceof N && (i = j.qB(i), v.Oa(i) && (j.WA(i), g = c.gg(i))) : (i = j.on(i), v.Oa(i) && (j.ju(i), g = c.gg(i)))
        } else of(b),
        g = b.copy(),
        c !== m && g instanceof R && c.add(g);
        if (! (g instanceof R)) return m;
        g.Ha = p;
        d.add(b, g);
        if (b instanceof S) {
            for (j = b.me; j.next();) {
                i = j.value;
                if (i.ea === b) {
                    var k = d.ca(i);
                    k !== m && (k.ea = g)
                }
                i.ia === b && (k = d.ca(i), k !== m && (k.ia = g))
            }
            if (b instanceof mf && g instanceof mf) for (b = b.mc; b.next();) j = nf(a, b.value, c, d, e),
            !(j instanceof U) && j !== m && (j.Wa = g)
        } else if (b instanceof U) {
            j = b.ea;
            j !== m && (j = d.ca(j), j !== m && (g.ea = j));
            j = b.ia;
            j !== m && (j = d.ca(j), j !== m && (g.ia = j));
            for (b = b.di; b.next();) j = nf(a, b.value, c, d, e),
            j !== m && (j.le = g)
        }
        return g
    }
    sa.prototype.copySelection = sa.prototype.dI = function() {
        var a = this.b;
        if (a !== m) {
            for (var b = new pa(R), a = a.selection.f; a.next();) kf(b, a.value, h, this.pB,
            function(a) {
                return a.canCopy()
            });
            this.copyToClipboard(b)
        }
    };
    sa.prototype.canCopySelection = sa.prototype.oH = function() {
        var a = this.b;
        return a === m || (!a.Nh || !a.lu) || 0 === a.selection.count ? p: h
    };
    sa.prototype.cutSelection = sa.prototype.gI = function() {
        this.copySelection();
        this.deleteSelection()
    };
    sa.prototype.canCutSelection = sa.prototype.pH = function() {
        var a = this.b;
        return a === m || (a.Pa || a.Ud) || (!a.Nh || !a.ck || !a.lu) || 0 === a.selection.count ? p: h
    };
    sa.prototype.copyToClipboard = sa.prototype.eI = function(a) {
        var b = this.b;
        if (b !== m) {
            var c = m;
            a === m ? (gf = m, hf = "") : (a = this.copyParts(a, m, h), c = new y(R), c.bg(a), gf = c, hf = b.P.sl);
            b.ga("ClipboardChanged", c)
        }
    };
    sa.prototype.pasteFromClipboard = sa.prototype.$J = function() {
        var a = gf;
        if (a === m) return v.Ef;
        var b = this.b;
        if (b === m || hf !== b.P.sl) return v.Ef;
        b = this.copyParts(a, b, p);
        a = new pa(R);
        for (b = b.f; b.next();) {
            var c = b.value;
            c.location.aa() || (c.location = b.key.location.copy());
            c.position.aa() || (c.position = b.key.position.copy());
            a.add(c)
        }
        return a
    };
    sa.prototype.pasteSelection = sa.prototype.aK = function(a) {
        var b = this.b;
        if (b !== m) try {
            b.xc = "wait";
            b.Nb("Paste");
            b.ga("ChangingSelection");
            var c = this.pasteFromClipboard();
            0 < c.count && pf(b);
            for (var d = c.f; d.next();) d.value.Ha = h;
            b.ga("ChangedSelection");
            if (a instanceof D) {
                var e = this.computeBounds(b.selection);
                if (e) {
                    var g = b.Vb.ie,
                    i = g.computeEffectiveCollection(b.selection);
                    g.moveParts(i, new D(a.x - e.za, a.y - e.Aa), p)
                }
            }
            b.ga("ClipboardPasted", c)
        } finally {
            b.Sd("Paste"),
            b.xc = ""
        }
    };
    sa.prototype.canPasteSelection = sa.prototype.BH = function() {
        var a = this.b;
        return a === m || (a.Pa || a.Ud) || (!a.en || !a.lu) || gf === m || hf !== a.P.sl ? p: h
    };
    sa.prototype.computeBounds = sa.prototype.Me = function(a) {
        for (var b = m,
        a = a.f; a.next();) {
            var c = a.value;
            c instanceof U || (c.Yh(), b === m ? b = c.la: b.fj(c.la))
        }
        return b
    };
    sa.prototype.undo = sa.prototype.xk = function() {
        var a = this.b;
        a !== m && a.da.xk()
    };
    sa.prototype.canUndo = sa.prototype.fk = function() {
        var a = this.b;
        return a === m || a.Pa || a.Ud ? p: a.Dx && a.da.fk()
    };
    sa.prototype.redo = sa.prototype.Yn = function() {
        var a = this.b;
        a !== m && a.da.Yn()
    };
    sa.prototype.canRedo = sa.prototype.ek = function() {
        var a = this.b;
        return a === m || a.Pa || a.Ud ? p: a.Dx && a.da.ek()
    };
    sa.prototype.decreaseZoom = sa.prototype.gF = function(a) {
        a === f && (a = 1 / 1.05);
        var b = this.b;
        b !== m && (a *= b.scale, a < b.Yi || a > b.Xi || (b.scale = a, yf(b)))
    };
    sa.prototype.canDecreaseZoom = sa.prototype.qH = function(a) {
        a === f && (a = 1 / 1.05);
        var b = this.b;
        if (b === m) return p;
        a *= b.scale;
        return a < b.Yi || a > b.Xi ? p: b.ir
    };
    sa.prototype.increaseZoom = sa.prototype.JF = function(a) {
        a === f && (a = 1.05);
        var b = this.b;
        b !== m && (a *= b.scale, a < b.Yi || a > b.Xi || (b.scale = a, yf(b)))
    };
    sa.prototype.canIncreaseZoom = sa.prototype.zH = function(a) {
        a === f && (a = 1.05);
        var b = this.b;
        if (b === m) return p;
        a *= b.scale;
        return a < b.Yi || a > b.Xi ? p: b.ir
    };
    sa.prototype.resetZoom = sa.prototype.mK = function(a) {
        a === f && (a = 1);
        var b = this.b;
        if (b !== m && !(a < b.Yi || a > b.Xi)) b.scale = a,
        yf(b)
    };
    sa.prototype.canResetZoom = sa.prototype.EH = function(a) {
        a === f && (a = 1);
        var b = this.b;
        return b === m || a < b.Yi || a > b.Xi ? p: b.ir
    };
    sa.prototype.collapseTree = sa.prototype.mr = function(a) {
        a === f && (a = m);
        var b = this.b;
        if (b === m) return p;
        b.Nb("Collapse Tree");
        var c = new y(S);
        if (a instanceof S && a.Wd) a.mr(),
        c.add(a);
        else for (a = b.selection.f; a.next();) {
            var d = a.value;
            d instanceof S && d.Wd && (d.mr(), c.add(d))
        }
        b.ga("TreeCollapsed", c);
        b.Sd("Collapse Tree")
    };
    sa.prototype.canCollapseTree = sa.prototype.mH = function(a) {
        a === f && (a = m);
        var b = this.b;
        if (b === m || b.Pa) return p;
        if (a instanceof S) {
            if (!a.Wd) return p;
            if (b.sf) {
                if (0 < a.wn().count) return h
            } else if (0 < a.vn().count) return h
        } else for (a = b.selection.f; a.next();) {
            var c = a.value;
            if (c instanceof S && c.Wd) if (b.sf) {
                if (0 < c.wn().count) return h
            } else if (0 < c.vn().count) return h
        }
        return p
    };
    sa.prototype.expandTree = sa.prototype.sr = function(a) {
        a === f && (a = m);
        var b = this.b;
        if (b === m) return p;
        b.Nb("Expand Tree");
        var c = new y(S);
        if (a instanceof S && !a.Wd) a.sr(),
        c.add(a);
        else for (a = b.selection.f; a.next();) {
            var d = a.value;
            d instanceof S && !d.Wd && (d.sr(), c.add(d))
        }
        b.ga("TreeExpanded", c);
        b.Sd("Expand Tree")
    };
    sa.prototype.canExpandTree = sa.prototype.wH = function(a) {
        a === f && (a = m);
        var b = this.b;
        if (b === m || b.Pa) return p;
        if (a instanceof S) {
            if (a.Wd) return p;
            if (b.sf) {
                if (0 < a.wn().count) return h
            } else if (0 < a.vn().count) return h
        } else for (a = b.selection.f; a.next();) {
            var c = a.value;
            if (c instanceof S && !c.Wd) if (b.sf) {
                if (0 < c.wn().count) return h
            } else if (0 < c.vn().count) return h
        }
        return p
    };
    sa.prototype.groupSelection = sa.prototype.gJ = function() {
        var a = this.b;
        if (a !== m) {
            var b = a.P;
            if (b !== m && b instanceof N) {
                var c = this.Ex;
                if (c !== m) try {
                    a.xc = "wait";
                    a.Nb("Group");
                    a.ga("ChangingSelection");
                    for (var d = new y(R), e = a.selection.f; e.next();) {
                        var g = e.value;
                        g.Vd() && g.canGroup() && d.add(g)
                    }
                    for (var i = new y(R), j = d.f; j.next();) {
                        for (var k = j.value,
                        g = p,
                        e = d.f; e.next();) if (k.Cl(e.value)) {
                            g = h;
                            break
                        }
                        g || i.add(k)
                    }
                    if (0 < i.count) {
                        e = i.f;
                        e.next();
                        var l = e.value.Wa;
                        if (l !== m) for (; l !== m;) {
                            e = i.f;
                            e.next();
                            for (d = p; e.next();) if (k = e.value, !k.Cl(l)) {
                                d = h;
                                break
                            }
                            if (d) l = l.Wa;
                            else break
                        }
                        var n = m;
                        if (c instanceof mf) of(c),
                        n = c.copy(),
                        n instanceof mf && a.add(n);
                        else if (b.py(c)) {
                            var r = b.on(c);
                            v.Oa(r) && (b.ju(r), n = a.gg(r))
                        }
                        if (n instanceof mf) {
                            l !== m && this.isValidMember(l, n) && (n.Wa = l);
                            for (e = i.f; e.next();) k = e.value,
                            this.isValidMember(n, k) && (k.Wa = n);
                            a.select(n)
                        }
                    }
                    a.ga("ChangedSelection");
                    a.ga("SelectionGrouped", n)
                } finally {
                    a.Sd("Group"),
                    a.xc = ""
                }
            }
        }
    };
    sa.prototype.canGroupSelection = sa.prototype.yH = function() {
        var a = this.b;
        if (a === m || a.Pa || a.Ud || !a.en || !a.dn) return p;
        var b = a.P;
        if (b === m || !(b instanceof N) || this.Ex === m) return p;
        for (a = a.selection.f; a.next();) if (b = a.value, b.Vd() && b.canGroup()) return h;
        return p
    };
    sa.prototype.findUnnestedNodes = sa.prototype.gy = function(a) {
        for (var b = [], a = a.f; a.next();) {
            var c = a.value;
            c instanceof U || b.push(c)
        }
        for (var a = new pa(R), c = b.length, d = 0; d < c; d++) {
            for (var e = b[d], g = h, i = 0; i < c; i++) if (e.Cl(b[i])) {
                g = p;
                break
            }
            g && a.add(e)
        }
        return a
    };
    sa.prototype.isValidMember = sa.prototype.vy = function(a, b) {
        if (b === m || a === b || b instanceof U) return p;
        if (a !== m) {
            if (a === b || a.Cl(b)) return p;
            var c = a.Nr;
            if (c !== m && !c(a, b) || a.data === m && b.data !== m || a.data !== m && b.data === m) return p
        }
        c = this.Nr;
        return c !== m ? c(a, b) : h
    };
    sa.prototype.ungroupSelection = sa.prototype.JK = function(a) {
        a === f && (a = m);
        var b = this.b;
        if (b !== m) {
            var c = b.P;
            if (c !== m && c instanceof N) try {
                b.xc = "wait";
                b.Nb("Ungroup");
                b.ga("ChangingSelection");
                var d = new y(mf);
                if (a instanceof mf) d.add(a);
                else for (var e = b.selection.f; e.next();) {
                    var g = e.value;
                    g instanceof mf && g.canUngroup() && d.add(g)
                }
                if (0 < d.count) {
                    b.Ox();
                    for (e = d.f; e.next();) {
                        var i = e.value,
                        j = i.data,
                        k = i.Wa,
                        l = k !== m && k.data !== m ? c.dc(k.data) : f,
                        n = new y(R);
                        n.bg(i.mc);
                        for (var r = n.f; r.next();) {
                            var q = r.value;
                            if (! (q instanceof U)) {
                                var u = q.data;
                                u !== m ? c.Xy(u, l) : q.Wa = k;
                                q.Ha = h
                            }
                        }
                        j !== m ? c.VC(j) : b.remove(i)
                    }
                }
                b.ga("ChangedSelection");
                b.ga("SelectionUngrouped", d)
            } finally {
                b.Sd("Ungroup"),
                b.xc = ""
            }
        }
    };
    sa.prototype.canUngroupSelection = sa.prototype.LH = function(a) {
        a === f && (a = m);
        var b = this.b;
        if (b === m || b.Pa || b.Ud || !b.ck || !b.ln) return p;
        var c = b.P;
        if (c === m || !(c instanceof N)) return p;
        if (a instanceof mf) {
            if (a.canUngroup()) return h
        } else for (a = b.selection.f; a.next();) if (b = a.value, b instanceof mf && b.canUngroup()) return h;
        return p
    };
    sa.prototype.addTopLevelParts = sa.prototype.hH = function(a, b) {
        for (var c = h,
        d = this.gy(a).f; d.next();) {
            var e = d.value;
            e.Wa !== m && (!b || this.vy(m, e) ? e.Wa = m: c = p)
        }
        return c
    };
    sa.prototype.collapseSubGraph = sa.prototype.lr = function(a) {
        a === f && (a = m);
        var b = this.b;
        if (b === m) return p;
        b.Nb("Collapse SubGraph");
        var c = new y(mf);
        if (a instanceof mf && a.ke) a.lr(),
        c.add(a);
        else for (a = b.selection.f; a.next();) {
            var d = a.value;
            d instanceof mf && d.ke && (d.lr(), c.add(d))
        }
        b.ga("SubGraphCollapsed", c);
        b.Sd("Collapse SubGraph")
    };
    sa.prototype.canCollapseSubGraph = sa.prototype.lH = function(a) {
        a === f && (a = m);
        var b = this.b;
        if (b === m || b.Pa) return p;
        if (a instanceof mf) return ! a.ke ? p: h;
        for (a = b.selection.f; a.next();) if (b = a.value, b instanceof mf && b.ke) return h;
        return p
    };
    sa.prototype.expandSubGraph = sa.prototype.rr = function(a) {
        a === f && (a = m);
        var b = this.b;
        if (b === m) return p;
        b.Nb("Expand SubGraph");
        var c = new y(mf);
        if (a instanceof mf && !a.ke) a.rr(),
        c.add(a);
        else for (a = b.selection.f; a.next();) {
            var d = a.value;
            d instanceof mf && !d.ke && (d.rr(), c.add(d))
        }
        b.ga("SubGraphExpanded", c);
        b.Sd("Expand SubGraph")
    };
    sa.prototype.canExpandSubGraph = sa.prototype.vH = function(a) {
        a === f && (a = m);
        var b = this.b;
        if (b === m || b.Pa) return p;
        if (a instanceof mf) return a.ke ? p: h;
        for (a = b.selection.f; a.next();) if (b = a.value, b instanceof mf && !b.ke) return h;
        return p
    };
    sa.prototype.editTextBlock = sa.prototype.EI = function(a) {
        a === f && (a = m);
        var b = this.b;
        if (b !== m && b.Vb !== m) {
            var c = b.Vb.kv;
            if (c !== m) {
                if (a === m) {
                    for (var a = b.selection.f,
                    d = m; a.next();) {
                        var e = a.value;
                        if (e.canEdit()) {
                            d = e;
                            break
                        }
                    }
                    if (d === m) return;
                    a = d.NB(function(a) {
                        return a instanceof qa && a.Au
                    })
                }
                a !== m && a instanceof qa && (c.Cf = a, b.sa = c)
            }
        }
    };
    sa.prototype.canEditTextBlock = sa.prototype.uH = function(a) {
        a === f && (a = m);
        var b = this.b;
        if (b === m || (b.Pa || b.Ud) || !b.kn || b.Vb === m || b.Vb.kv === m) return p;
        if (a instanceof qa) {
            if (a = a.W, a !== m && a.canEdit()) return h
        } else for (b = b.selection.f; b.next();) if (a = b.value, a.canEdit() && (a = a.NB(function(a) {
            return a instanceof qa && a.Au
        }), a !== m)) return h;
        return p
    };
    sa.prototype.print = sa.prototype.print = aa();
    sa.prototype.canPrint = sa.prototype.XE = function() {
        var a = this.b;
        return a !== m && a.fn
    };
    v.a(sa, "copiesTree", sa.prototype.pB);
    v.defineProperty(sa, {
        pB: "copiesTree"
    },
    s("Dz"), ba("Dz"));
    v.a(sa, "deletesTree", sa.prototype.FB);
    v.defineProperty(sa, {
        FB: "deletesTree"
    },
    s("Iz"), ba("Iz"));
    v.a(sa, "archetypeGroupData", sa.prototype.Ex);
    v.defineProperty(sa, {
        Ex: "archetypeGroupData"
    },
    s("wz"),
    function(a) {
        a !== m && v.c(a, Object, sa, "archetypeGroupData");
        var b = this.b;
        b !== m && (b = b.P, b !== m && !(a instanceof mf) && !b.py(a) && v.g("CommandHandler.archetypeGroupData must be either a Group or a data object for which GraphLinksModel.isGroupForNodeData is true: " + a));
        this.wz = a
    });
    v.a(sa, "memberValidation", sa.prototype.Nr);
    v.defineProperty(sa, {
        Nr: "memberValidation"
    },
    s("Pj"),
    function(a) {
        a !== m && v.e(a, "function", sa, "memberValidation");
        this.Pj = a
    });
    function zf() {
        v.Ob(this);
        this.L = m;
        this.wb = "";
        this.vh = h;
        this.Vz = p;
        this.PA = m;
        this.gu = -1
    }
    v.H("Tool", zf);
    zf.prototype.yf = function(a) {
        t && a !== m && v.c(a, A, zf, "setDiagram");
        this.L = a
    };
    zf.prototype.toString = function() {
        return "" !== this.name ? this.name + " Tool": v.Si(Object.getPrototypeOf(this))
    };
    zf.prototype.updateAdornments = zf.prototype.ii = aa();
    zf.prototype.canStart = zf.prototype.mf = s("isEnabled");
    zf.prototype.doStart = zf.prototype.by = aa();
    zf.prototype.doActivate = zf.prototype.Xh = function() {
        this.T = h
    };
    zf.prototype.doDeactivate = zf.prototype.jk = function() {
        this.T = p
    };
    zf.prototype.doStop = zf.prototype.Pi = aa();
    zf.prototype.doCancel = zf.prototype.Oi = function() {
        this.stopTool()
    };
    zf.prototype.stopTool = zf.prototype.FK = function() {
        var a = this.b;
        a !== m && a.sa === this && (a.sa = m, a.xc = "")
    };
    zf.prototype.doMouseDown = zf.prototype.zu = function() { ! this.T && this.canStart() && this.doActivate()
    };
    zf.prototype.doMouseMove = zf.prototype.Zg = aa();
    zf.prototype.doMouseUp = zf.prototype.Pe = function() {
        this.stopTool()
    };
    zf.prototype.doMouseWheel = zf.prototype.pF = aa();
    zf.prototype.doKeyDown = zf.prototype.$x = function() {
        var a = this.b;
        a !== m && "Esc" === a.F.key && this.doCancel()
    };
    zf.prototype.doKeyUp = zf.prototype.ay = aa();
    zf.prototype.startTransaction = zf.prototype.Nb = function(a) {
        this.ue = m;
        var b = this.b;
        return b === m ? p: b.Nb(a)
    };
    zf.prototype.stopTransaction = zf.prototype.cj = function() {
        var a = this.b;
        return a === m ? p: this.ue === m ? a.Yr() : a.Sd(this.ue)
    };
    zf.prototype.standardMouseSelect = zf.prototype.KG = function() {
        var a = this.b;
        if (a !== m && a.Pd) {
            var b = a.F,
            c = a.ur(b.C, h);
            c !== m ? b.hk ? (a.ga("ChangingSelection"), c.Ha = !c.Ha, a.ga("ChangedSelection")) : b.shift ? c.Ha || (a.ga("ChangingSelection"), c.Ha = h, a.ga("ChangedSelection")) : c.Ha || a.select(c) : b.left && (!b.hk && !b.shift) && a.Ox()
        }
    };
    zf.prototype.standardMouseClick = zf.prototype.AK = function(a, b) {
        a === f && (a = m);
        b === f && (b = function(a) {
            return ! a.ta.Tc
        });
        var c = this.b;
        if (c !== m) {
            var d = c.F,
            e = c.dd(d.C, a, b);
            d.fd = e;
            Af(e, d, c)
        }
    };
    function Af(a, b, c) {
        var d = 0;
        b.left ? d = 1 === b.Le ? 1 : 2 === b.Le ? 2 : 1 : b.right && 1 === b.Le && (d = 3);
        var e = "";
        if (a !== m) {
            switch (d) {
            case 1:
                e = "ObjectSingleClicked";
                break;
            case 2:
                e = "ObjectDoubleClicked";
                break;
            case 3:
                e = "ObjectContextClicked"
            }
            0 !== d && c.ga(e, a)
        } else {
            switch (d) {
            case 1:
                e = "BackgroundSingleClicked";
                break;
            case 2:
                e = "BackgroundDoubleClicked";
                break;
            case 3:
                e = "BackgroundContextClicked"
            }
            0 !== d && c.ga(e)
        }
        if (a !== m) for (; a !== m;) {
            e = m;
            switch (d) {
            case 1:
                e = a.click;
                break;
            case 2:
                e = a.ul ? a.ul: a.click;
                break;
            case 3:
                e = a.nr
            }
            if (e !== m && (e(b, a), b.Bd)) break;
            a = a.Y
        } else {
            e = m;
            switch (d) {
            case 1:
                e = c.click;
                break;
            case 2:
                e = c.ul ? c.ul: c.click;
                break;
            case 3:
                e = c.nr
            }
            e !== m && e(b)
        }
    }
    zf.prototype.standardMouseOver = zf.prototype.BK = function() {
        var a = this.b;
        if (a !== m) {
            var b = a.F,
            c = a.dd(b.C, m, m);
            b.fd = c;
            var d = a.nb;
            a.nb = h;
            var e = p;
            if (c !== a.dm) {
                var g = a.dm;
                a.$w = g;
                a.dm = c;
                for (this.doCurrentObjectChanged(g, c); g !== m;) {
                    var i = g.Gy;
                    if (i !== m) {
                        if (c === g) break;
                        if (c !== m && c.ci(g)) break;
                        i(b, g, c);
                        e = h;
                        if (b.Bd) break
                    }
                    g = g.Y
                }
                for (g = a.$w; c !== m;) {
                    i = c.Fy;
                    if (i !== m) {
                        if (g === c) break;
                        if (g !== m && g.ci(c)) break;
                        i(b, c, g);
                        e = h;
                        if (b.Bd) break
                    }
                    c = c.Y
                }
                c = a.dm
            }
            if (c !== m) {
                g = c;
                for (i = ""; g !== m;) {
                    i = g.cursor;
                    if ("" !== i) break;
                    g = g.Y
                }
                a.xc = i;
                for (g = c; g !== m;) {
                    i = g.Sr;
                    if (i !== m && (i(b, g), e = h, b.Bd)) break;
                    g = g.Y
                }
            } else a.xc = "",
            i = a.Sr,
            i !== m && (i(b), e = h);
            e && a.update();
            a.nb = d
        }
    };
    zf.prototype.doCurrentObjectChanged = zf.prototype.oF = aa();
    zf.prototype.standardMouseWheel = zf.prototype.CK = function() {
        var a = this.b;
        if (a !== m) {
            var b = a.F,
            c = b.Mi;
            if (0 !== c) {
                var d = a.Vb.Fl;
                if (a.ir && (d === Bf && !b.shift || d === Cf && b.hk)) {
                    d = a.Ak;
                    a.Ak = b.gd;
                    var e = a.Ad;
                    e !== m ? 0 < c ? e.JF() : e.gF() : a.scale = 0 < c ? 1.05 * a.scale: a.scale / 1.05;
                    a.Ak = d;
                    b.bubbles = p
                } else if (d === Bf && b.shift || d === Cf && !b.hk) d = a.position.copy(),
                !b.shift && a.Ke ? 0 < c ? a.scroll("line", "up", 3) : a.scroll("line", "down", 3) : b.shift && a.Je && (0 < c ? a.scroll("line", "left", 3) : a.scroll("line", "right", 3)),
                a.position.u(d) || (b.bubbles = p)
            }
        }
    };
    zf.prototype.standardWaitAfter = zf.prototype.DK = function(a) {
        v.e(a, "number", zf, "standardWaitAfter:delay");
        this.cancelWaitAfter();
        var b = this;
        this.gu = window.setTimeout(function() {
            b.doWaitAfter()
        },
        a)
    };
    zf.prototype.cancelWaitAfter = zf.prototype.MH = function() { - 1 !== this.gu && window.clearTimeout(this.gu);
        this.gu = -1
    };
    zf.prototype.doWaitAfter = zf.prototype.sF = aa();
    zf.prototype.findToolHandleAt = zf.prototype.SI = function(a, b) {
        var c = this.b;
        if (c === m) return m;
        c = c.dd(a, m,
        function(a) {
            a = a.W;
            return a === m ? p: a.Od !== m
        });
        if (c === m) return m;
        var d = c.W;
        return d === m || d.od !== b ? m: c
    };
    zf.prototype.isBeyondDragSize = zf.prototype.uJ = function() {
        var a = this.b;
        if (a === m) return p;
        var b = a.jc.gd,
        a = a.F.gd,
        c = 2;
        v.hx && (c += 4);
        return Math.abs(a.x - b.x) > c || Math.abs(a.y - b.y) > c
    };
    v.m(zf, {
        b: "diagram"
    },
    s("L"));
    v.a(zf, "name", zf.prototype.name);
    v.defineProperty(zf, {
        name: "name"
    },
    s("wb"), ba("wb"));
    v.a(zf, "isEnabled", zf.prototype.isEnabled);
    v.defineProperty(zf, {
        isEnabled: "isEnabled"
    },
    s("vh"), ba("vh"));
    v.a(zf, "isActive", zf.prototype.T);
    v.defineProperty(zf, {
        T: "isActive"
    },
    s("Vz"), ba("Vz"));
    v.a(zf, "transactionResult", zf.prototype.ue);
    v.defineProperty(zf, {
        ue: "transactionResult"
    },
    s("PA"), ba("PA"));
    function Df(a) {
        this.Xw = a !== f ? a.copy() : new D;
        this.AA = m
    }
    Df.prototype.toString = function() {
        return this.Xw.toString()
    };
    v.a(Df, "point", Df.prototype.hh);
    v.defineProperty(Df, {
        hh: "point"
    },
    s("Xw"), ba("Xw"));
    function Ef() {
        zf.call(this);
        this.name = "Dragging";
        this.Cz = h;
        this.Qk = this.Pz = p;
        this.uw = (new sb(NaN, NaN)).freeze();
        this.vw = fc;
        this.ww = (new D(NaN, NaN)).freeze();
        this.Mz = this.Yz = p;
        this.Nz = this.Bz = this.Oz = this.Fz = m;
        this.Uo = this.Lz = p;
        this.Pm = new D(NaN, NaN);
        this.Jh = new D;
        this.Xt = p;
        this.Tt = h;
        this.hm = 100;
        this.Kk = this.Ht = m
    }
    v.H("DraggingTool", Ef);
    v.pa(Ef, zf);
    v.a(Ef, "copiesEffectiveCollection", Ef.prototype.oB);
    v.defineProperty(Ef, {
        oB: "copiesEffectiveCollection"
    },
    s("Cz"), ba("Cz"));
    v.a(Ef, "dragsTree", Ef.prototype.JB);
    v.defineProperty(Ef, {
        JB: "dragsTree"
    },
    s("Pz"), ba("Pz"));
    v.a(Ef, "isGridSnapEnabled", Ef.prototype.Gn);
    v.defineProperty(Ef, {
        Gn: "isGridSnapEnabled"
    },
    s("Qk"),
    function(a) {
        this.Qk !== a && (v.e(a, "boolean", Ef, "isGridSnapEnabled"), this.Qk = a)
    });
    v.a(Ef, "gridSnapCellSize", Ef.prototype.ky);
    v.defineProperty(Ef, {
        ky: "gridSnapCellSize"
    },
    s("uw"),
    function(a) {
        this.uw.u(a) || (v.c(a, sb, Ef, "gridSnapCellSize"), this.uw = a = a.B())
    });
    v.a(Ef, "gridSnapCellSpot", Ef.prototype.WB);
    v.defineProperty(Ef, {
        WB: "gridSnapCellSpot"
    },
    s("vw"),
    function(a) {
        this.vw.u(a) || (v.c(a, F, Ef, "gridSnapCellSpot"), this.vw = a = a.B())
    });
    v.a(Ef, "gridSnapOrigin", Ef.prototype.XB);
    v.defineProperty(Ef, {
        XB: "gridSnapOrigin"
    },
    s("ww"),
    function(a) {
        this.ww.u(a) || (v.c(a, D, Ef, "gridSnapOrigin"), this.ww = a = a.B())
    });
    v.a(Ef, "isDragSnapEnabled", Ef.prototype.PF);
    v.defineProperty(Ef, {
        PF: "isDragSnapEnabled"
    },
    s("Yz"), ba("Yz"));
    v.a(Ef, "draggableLinks", Ef.prototype.vl);
    v.defineProperty(Ef, {
        vl: "draggableLinks"
    },
    s("Mz"), ba("Mz"));
    v.a(Ef, "currentPart", Ef.prototype.ql);
    v.defineProperty(Ef, {
        ql: "currentPart"
    },
    s("Fz"), ba("Fz"));
    v.a(Ef, "copiedParts", Ef.prototype.wc);
    v.defineProperty(Ef, {
        wc: "copiedParts"
    },
    s("Bz"), ba("Bz"));
    v.a(Ef, "draggedParts", Ef.prototype.Jb);
    v.defineProperty(Ef, {
        Jb: "draggedParts"
    },
    s("Oz"), ba("Oz"));
    v.a(Ef, "draggedLink", Ef.prototype.Ib);
    v.defineProperty(Ef, {
        Ib: "draggedLink"
    },
    s("Nz"), ba("Nz"));
    v.a(Ef, "dragOutStarted", Ef.prototype.dy);
    v.defineProperty(Ef, {
        dy: "dragOutStarted"
    },
    s("Lz"), ba("Lz"));
    v.a(Ef, "delay", Ef.prototype.xu);
    v.defineProperty(Ef, {
        xu: "delay"
    },
    s("hm"), ba("hm"));
    Ef.prototype.canStart = Ef.prototype.mf = function() {
        if (!this.isEnabled) return p;
        var a = this.b;
        if (a === m || !a.dk && !a.Nh && !a.mu || !a.Pd) return p;
        var b = a.F;
        return ! b.left || a.sa !== this && (!this.isBeyondDragSize() || window.TouchEvent && (b.oi !== m && b.oi instanceof window.TouchEvent) && b.timestamp - a.jc.timestamp < this.hm) ? p: this.findDraggablePart() !== m
    };
    Ef.prototype.findDraggablePart = Ef.prototype.JI = function() {
        var a = this.b;
        if (a === m) return m;
        a = a.ur(a.jc.C, h);
        return a !== m && (a.canMove() || a.canCopy()) ? a: m
    };
    Ef.prototype.standardMouseSelect = Ef.prototype.KG = function() {
        var a = this.b;
        if (a !== m && a.Pd && (this.ql = a.ur(a.jc.C, h), this.ql !== m && !this.ql.Ha)) {
            a.ga("ChangingSelection");
            var b = a.F; ! b.hk && !b.shift && pf(a);
            this.ql.Ha = h;
            a.ga("ChangedSelection")
        }
    };
    Ef.prototype.doActivate = Ef.prototype.Xh = function() {
        var a = this.b;
        if (a !== m) {
            this.standardMouseSelect();
            var b = this.ql;
            b === m || !b.canMove() && !b.canCopy() || (this.T = h, this.Pm.set(a.position), Ff(this, a.selection), this.Kk = this.Ht = m, this.Jb = this.computeEffectiveCollection(a.selection), Gf(this, this.Jb), this.Nb("Drag"), this.Jh.set(a.jc.C), a.mu ? (this.dy = h, this.Uo = p, Hf = this, this.b.Kc = h) : a.Kc = h)
        }
    };
    function Ff(a, b) {
        if (a.vl) {
            var c = a.b;
            c !== m && c.Gi && (1 === b.count ? (c = b.f, c.next(), a.Ib = c.value, a.Ib !== m && (a.Ib.canRelinkFrom() && a.Ib.canRelinkTo()) && a.Ib.Wg()) : a.Ib = m)
        }
    }
    Ef.prototype.computeEffectiveCollection = Ef.prototype.SH = function(a) {
        var b = this.b !== m && this.b.sa === this,
        c = new oa(R, Df);
        if (a === m) return c;
        for (var d = a.f; d.next();) {
            var e = d.value;
            If(this, c, e, b)
        }
        if (this.Ib !== m && this.vl) return c;
        for (d = a.f; d.next();) e = d.value,
        e instanceof U && (a = e, b = a.ea, b !== m && !c.contains(b) ? c.remove(a) : (b = a.ia, b !== m && !c.contains(b) && c.remove(a)));
        return c
    };
    function If(a, b, c, d) {
        if (!b.contains(c) && (!d || c.canMove() || c.canCopy())) if (c instanceof S) {
            b.add(c, new Df(c.location));
            if (c instanceof mf) for (var e = c.mc; e.next();) {
                var g = e.value;
                If(a, b, g, d)
            }
            for (g = c.me; g.next();) if (e = g.value, !b.contains(e)) {
                var i = e.ea,
                j = e.ia;
                i !== m && (b.contains(i) && j !== m && b.contains(j)) && If(a, b, e, d)
            }
            if (a.JB) {
                g = h;
                e = c.b;
                e !== m && (g = e.sf);
                for (c = g ? c.wn() : c.vn(); c.next();) g = c.value,
                If(a, b, g, d)
            }
        } else if (c instanceof U) {
            e = c;
            b.add(e, new Df);
            for (g = e.di; g.next();) If(a, b, g.value, d)
        } else c instanceof lf || b.add(c, new Df(c.location))
    }
    Ef.prototype.doStop = Ef.prototype.Pi = function() {
        var a = this.b;
        a !== m && Jf(a);
        Kf(this);
        Lf(this, this.Jb);
        this.Jb = m;
        this.Uo = this.dy = p;
        if (0 < Mf.count) {
            for (var b = Mf.length,
            c = 0; c < b; c++) {
                var d = Mf.i[c];
                d.Ib !== m && (d.Ib = m);
                Nf(d);
                Kf(d);
                d.b !== m && Jf(d.b)
            }
            Mf.clear()
        }
        this.Ib !== m && (this.Ib = m);
        this.Pm.co(NaN, NaN);
        Hf = Of = m;
        Nf(this);
        a.Kc = p;
        this.cj()
    };
    function Kf(a) {
        var b = a.b;
        if (b !== m) {
            var c = b.nb;
            b.nb = h;
            for (var d = b.F,
            e = a.Kk; e !== m;) {
                var g = e.Ey;
                if (g !== m && (g(d, e, m), d.Bd)) break;
                e = e.Y
            }
            b.nb = c
        }
        a.Ht = m;
        a.Kk = m
    }
    Ef.prototype.doCancel = Ef.prototype.Oi = function() {
        Nf(this);
        Pf(this);
        var a = this.b;
        a !== m && this.Pm.aa() && (a.position = this.Pm);
        this.stopTool()
    };
    function Gf(a, b) {
        if (b !== m) {
            a.Xt = h;
            for (var c = b.f; c.next();) {
                var d = c.key;
                d instanceof U && (d.Tm = h)
            }
        }
    }
    function Lf(a, b) {
        if (b !== m && a.Xt) {
            for (var c = b.f; c.next();) {
                var d = c.key;
                d instanceof U && (d.Tm = p, d.Ze === Qf ? d.Tb() : d.J())
            }
            a.Xt = p
        }
    }
    Ef.prototype.doKeyDown = Ef.prototype.$x = function() {
        var a = this.b;
        a !== m && (a = a.F, a !== m && this.T && ("Esc" === a.key ? this.doCancel() : this.doMouseMove()))
    };
    Ef.prototype.doKeyUp = Ef.prototype.ay = function() {
        var a = this.b;
        a !== m && (a.F !== m && this.T) && this.doMouseMove()
    };
    function Wf(a) {
        for (var b = Infinity,
        c = Infinity,
        d = -Infinity,
        e = -Infinity,
        a = a.f; a.next();) {
            var g = a.value;
            if (g.Vd()) {
                var i = g.location,
                g = i.x,
                i = i.y; ! isNaN(g) && !isNaN(i) && (g < b && (b = g), i < c && (c = i), g > d && (d = g), i > e && (e = i))
            }
        }
        return Infinity === b ? new E(0, 0, 0, 0) : new E(b, c, d - b, e - c)
    }
    function Xf(a, b) {
        if (a.wc === m) {
            var c = a.b;
            if (! (c === m || c.Pa || c.Ud) && a.Jb !== m) {
                c.nb = !b;
                c.hr = !b;
                Pf(a);
                a.Jh.set(c.jc.C);
                for (var c = a.oB ? c.Ad.copyParts(a.Jb.ej(), c, h) : c.Ad.copyParts(c.selection, c, h), d = c.f; d.next();) d.value.location = d.key.location.copy();
                d = Wf(c);
                new D(d.x + d.width / 2, d.y + d.height / 2);
                for (var d = new oa(R, Df), e = a.Jb.f; e.next();) {
                    var g = e.key;
                    g.Vd() && g.canCopy() && (g = c.ca(g), g !== m && (g.Yh(), d.add(g, new Df(g.location))))
                }
                for (c = c.f; c.next();) e = c.value,
                e instanceof U && e.canCopy() && d.add(e, new Df);
                a.wc = d;
                Ff(a, d.ej());
                a.Ib !== m && (c = a.Ib, d = vb(c.mb), c.ok(a.Jh.x - (d.x + d.width / 2), a.Jh.y - (d.y + d.height / 2)))
            }
        }
    }
    function Nf(a) {
        var b = a.b;
        b !== m && (a.wc !== m && (b.Ad.deleteParts(a.wc.ej(), p), a.wc = m), b.nb = p, b.hr = p, a.Jh.set(b.jc.C))
    }
    function Yf(a, b) {
        var c = a.b;
        if (c !== m) {
            var d = a.Jh;
            a.moveParts(b, c.F.C.copy().fs(d), h)
        }
    }
    Ef.prototype.moveParts = Ef.prototype.UJ = function(a, b, c) {
        if (! (a === m || 0 === a.count)) {
            var d = b.copy();
            isNaN(d.x) && (d.x = 0);
            isNaN(d.y) && (d.y = 0);
            var e = this.Xt;
            e || Gf(this, a);
            for (var g = new y,
            i = new y(Ta), j = a.f; j.next();) {
                var k = j.key;
                if (k.Vd()) {
                    var l = Zf(this, k, a);
                    if (l !== m) g.add({
                        lg: k,
                        info: j.value,
                        FF: l
                    });
                    else if (!c || k.canMove()) {
                        var l = j.value.hh,
                        n = this.computeMove(k, l.copy().add(d), a);
                        k.location = n;
                        j.value.AA = n.copy().fs(l)
                    }
                } else j.key instanceof U && i.add(j.kd)
            }
            for (c = g.f; c.next();) g = c.value,
            l = g.info.hh,
            n = l.copy().add(g.FF.AA),
            g.lg.location = n;
            for (i = i.f; i.next();) if (j = i.value, l = j.key, l instanceof U) if (l.Tm) if (c = l.ea, g = l.ia, this.Ib !== m && this.vl) j = j.value.hh,
            a.add(l, new Df(d)),
            n = b.x - j.x,
            c = b.y - j.y,
            l.ok(n, c);
            else {
                n = new D(0, 0);
                if (c !== m) {
                    n.set(c.location);
                    var r = a.ca(c);
                    r !== m && n.fs(r.hh)
                }
                k = new D(0, 0);
                g !== m && (k.set(g.location), r = a.ca(g), r !== m && k.fs(r.hh));
                c !== m && g !== m ? n.Zh(k) ? (j = j.value.hh, c = n.copy(), c.fs(j), a.add(l, new Df(n)), l.ok(c.x, c.y)) : (l.Tm = p, l.Tb()) : (j = j.value.hh, a.add(l, new Df(c !== m ? n: g !== m ? k: b)), n = d.x - j.x, c = d.y - j.y, l.ok(n, c))
            } else if (l.ea === m || l.ia === m) j = j.value.hh,
            a.add(l, new Df(b)),
            n = d.x - j.x,
            c = d.y - j.y,
            l.ok(n, c);
            e || Lf(this, a)
        }
    };
    function Zf(a, b, c) {
        b = b.Wa;
        if (b !== m) {
            a = Zf(a, b, c);
            if (a !== m) return a;
            a = c.ca(b);
            if (a !== m && a instanceof Df) return a
        }
        return m
    }
    function Pf(a) {
        if (a.Jb !== m) {
            var b = a.b,
            c = p;
            b !== m && (c = b.nb, b.nb = h);
            for (var d = a.Jb.f; d.next();) {
                var e = d.key;
                e.Vd() && (e.location = d.value.hh)
            }
            for (d = a.Jb.f; d.next();) if (e = d.key, e instanceof U && e.Tm) {
                var g = d.value.hh;
                a.Jb.add(e, new Df);
                e.ok( - g.x, -g.y)
            }
            b !== m && (b.nb = c, b.ai())
        }
    }
    Ef.prototype.computeMove = Ef.prototype.VH = function(a, b) {
        if (a === m) return b;
        var c = b,
        c = b;
        if (this.Gn && (c = b.copy(), a !== m)) {
            var d = this.b;
            if (d !== m) {
                var e = d.Ku,
                g = this.ky,
                d = g.width,
                g = g.height,
                i = this.XB,
                j = i.x,
                i = i.y,
                k = this.WB;
                if (e !== m) {
                    var l = e.Cr;
                    isNaN(d) && (d = l.width);
                    isNaN(g) && (g = l.height);
                    e = e.jy;
                    isNaN(j) && (j = e.x);
                    isNaN(i) && (i = e.y)
                }
                e = (new D).Ml(0, 0, d, g, k);
                c = Fd(c.x, c.y, j + e.x, i + e.y, d, g)
            }
        }
        c = a.cy !== m ? a.cy(a, b, c) : c;
        g = a.DC;
        d = g.x;
        isNaN(d) && (d = a.location.x);
        g = g.y;
        isNaN(g) && (g = a.location.y);
        e = a.xC;
        j = e.x;
        isNaN(j) && (j = a.location.x);
        e = e.y;
        isNaN(e) && (e = a.location.y);
        return new D(Math.max(d, Math.min(c.x, j)), Math.max(g, Math.min(c.y, e)))
    };
    function $f(a, b) {
        if (b === m) return h;
        var c = b.W;
        return c === m || c.Ha || c instanceof lf || c.ta.Tc || a.Jb && a.Jb.contains(c) || a.wc && a.wc.contains(c) ? h: p
    }
    Ef.prototype.dragOver = Ef.prototype.pI = function(a, b, c) {
        var d = this.b;
        if (d !== m) {
            if (this.vl && this.Ib !== m) {
                var e = this.b.P;
                e instanceof N && (this.Ib.ea !== m && e.bs(this.Ib.data, ""), this.Ib.ia !== m && e.cs(this.Ib.data, ""))
            }
            e = p;
            this.Tt === p && (e = d.nb, d.nb = h);
            var g = p,
            i = this,
            j = ag(d, a, m,
            function(a) {
                return ! $f(i, a)
            }),
            k = d.F;
            k.fd = j;
            var l = d.nb;
            d.nb = h;
            if (j !== this.Kk) {
                var n = this.Kk;
                this.Ht = n;
                for (this.Kk = j; n !== m;) {
                    var r = n.Ey;
                    if (r !== m) {
                        if (j === n) break;
                        if (j !== m && j.ci(n)) break;
                        r(k, n, j);
                        g = h;
                        if (k.Bd) break
                    }
                    n = n.Y
                }
                for (n = this.Ht; j !== m;) {
                    r = j.EC;
                    if (r !== m) {
                        if (n === j) break;
                        if (n !== m && n.ci(j)) break;
                        r(k, j, n);
                        g = h;
                        if (k.Bd) break
                    }
                    j = j.Y
                }
                j = this.Kk
            }
            j === m && (r = d.FC, r !== m && (r(k), g = h));
            d.nb = l;
            g && d.update();
            this.Tt === p && (d.nb = e);
            if ((d.Je || d.Ke) && (b || c)) d.Wv = d.ks(a),
            bg(d, d.Wv).Zh(d.position) ? Jf(d) : cg(d)
        }
    };
    Ef.prototype.dropOnto = Ef.prototype.CI = function(a) {
        var b = this.b;
        if (b !== m && b.P !== m) {
            var c = this;
            Kf(this);
            var d = ag(b, a, m,
            function(a) {
                return ! $f(c, a)
            }),
            a = b.F;
            a.fd = d;
            if (d !== m) for (; d !== m;) {
                var e = d.Pr;
                if (e !== m && (e(a, d), a.Bd)) break;
                d = d.Y
            } else e = b.Pr,
            e !== m && e(a);
            for (a = b.selection.f; a.next();) d = a.value,
            d instanceof S && dg(b, d.la)
        }
    };
    Ef.prototype.doMouseMove = Ef.prototype.Zg = function() {
        if (this.T) {
            var a = this.b;
            if (a !== m && this.ql !== m && this.Jb !== m) {
                var b = p,
                c = p;
                this.mayCopy() ? (b = h, Xf(this, p), Yf(this, this.wc)) : this.mayMove() ? (c = h, Nf(this), Yf(this, this.Jb)) : Nf(this);
                this.dragOver(a.F.C, c, b);
                yf(a)
            }
        }
    };
    Ef.prototype.doMouseUp = Ef.prototype.Pe = function() {
        if (this.T) {
            this.Uo = h;
            var a = this.b;
            if (a !== m) {
                var b = p,
                c = this.mayCopy();
                c && this.wc !== m ? (Pf(this), Nf(this), Xf(this, h), Yf(this, this.wc), this.wc !== m && a.Uy(this.wc.ej())) : (b = h, Nf(this), this.mayMove() && (Yf(this, this.Jb), this.Tt = p, this.dragOver(a.F.C, h, p), this.Tt = h));
                this.dropOnto(a.F.C);
                if (this.T) {
                    this.wc = m;
                    if (b && this.Jb !== m) for (b = this.Jb.f; b.next();) {
                        var d = b.key;
                        d instanceof S && (d = d.Wa, d !== m && d.placeholder !== m && !this.Jb.contains(d) && d.Ux && d.J())
                    }
                    a.ai();
                    Lf(this, this.Jb);
                    this.ue = c ? "Copy": "Move";
                    a.ga(c ? "SelectionCopied": "SelectionMoved", a.selection)
                }
                this.stopTool()
            }
        }
    };
    Ef.prototype.mayCopy = Ef.prototype.NJ = function() {
        var a = this.b;
        if (a === m || (a.Pa || a.Ud || !a.en || !a.Nh) || !a.F.hk) return p;
        for (a = a.selection.f; a.next();) {
            var b = a.value;
            if (b.Vd() && b.canCopy()) return h
        }
        return this.Ib !== m && this.vl && this.Ib.canCopy() ? h: p
    };
    Ef.prototype.mayMove = Ef.prototype.PJ = function() {
        var a = this.b;
        if (a === m || a.Pa || !a.dk) return p;
        for (a = a.selection.f; a.next();) {
            var b = a.value;
            if (b.Vd() && b.canMove()) return h
        }
        return this.Ib !== m && this.vl && this.Ib.canMove() ? h: p
    };
    var Mf = new y(Ef),
    Hf = m,
    Of = m;
    Ef.prototype.mayCopyExternal = Ef.prototype.OJ = function() {
        var a = this.b;
        return a === m || (!a.ZA || a.Pa || a.Ud || !a.en) || a.P === m ? p: h
    };
    Ef.prototype.doSimulatedDragEnter = Ef.prototype.GB = function() {
        this.mayCopyExternal() && (Mf.contains(this) || Mf.add(this))
    };
    Ef.prototype.doSimulatedDragLeave = Ef.prototype.HB = function() {
        Nf(this);
        var a = this.b;
        a !== m && (a.sa !== this && this.Pm.aa()) && (a.position = this.Pm)
    };
    Ef.prototype.doSimulatedDragOver = Ef.prototype.qF = function() {
        if (this.mayCopyExternal()) {
            var a = this.b;
            if (a !== m) {
                var b = Hf;
                b !== m && b.Jb !== m && (eg(this, b.Jb.ej(), p), Yf(this, this.wc), a.Uy(this.wc.ej()), this.dragOver(a.F.C, p, h), yf(a))
            }
        }
    };
    Ef.prototype.doSimulatedDrop = Ef.prototype.rF = function() {
        var a = Hf;
        if (a !== m && (a.Uo = h, Nf(this), this.mayCopyExternal())) {
            var b = this.b;
            b !== m && (this.Nb("Drop"), eg(this, a.Jb.ej(), h), Yf(this, this.wc), this.wc !== m && b.Uy(this.wc.ej()), this.ue = "ExternalCopy", this.dropOnto(b.F.C), this.wc = m, b.ga("ExternalObjectsDropped", b.selection), this.cj(), b.ai())
        }
    };
    function eg(a, b, c) {
        if (a.wc === m) {
            var d = a.b;
            if (! (d === m || d.Pa || d.Ud) && d.P !== m) {
                d.nb = !c;
                d.hr = !c;
                a.Jh.set(d.F.C);
                for (var d = d.Ad.copyParts(b, d, h), c = Wf(b), e = new D(c.x + c.width / 2, c.y + c.height / 2), g = a.Jh, c = new oa(R, Df), b = b.f; b.next();) {
                    var i = b.value;
                    if (i.Vd() && i.canCopy()) {
                        var j = i.location,
                        i = d.ca(i);
                        i.location = new D(g.x - (e.x - j.x), g.y - (e.y - j.y));
                        i.Yh();
                        c.add(i, new Df(i.location))
                    }
                }
                for (d = d.f; d.next();) e = d.value,
                e instanceof U && e.canCopy() && c.add(e, new Df);
                a.wc = c;
                Ff(a, c.ej());
                a.Ib !== m && (c = a.Ib, d = vb(c.mb), c.ok(a.Jh.x - (d.x + d.width / 2), a.Jh.y - (d.y + d.height / 2)))
            }
        }
    }
    function fg() {
        zf.call(this);
        this.Yw = 100;
        this.ux = p;
        var a = new U;
        a.ao = "PATH";
        var b = new V;
        b.Vi = h;
        b.name = "PATH";
        b.stroke = "blue";
        a.add(b);
        b = new V;
        b.Rl = "Standard";
        b.fill = "blue";
        a.add(b);
        a.Ed = "Tool";
        this.nx = a;
        a = new S;
        b = new V;
        b.pe = "";
        b.Xa = "Rectangle";
        b.fill = m;
        b.stroke = "magenta";
        b.Ua = 2;
        b.ma = new sb(1, 1);
        a.add(b);
        a.sk = p;
        a.Ed = "Tool";
        this.lx = a;
        this.mx = b;
        a = new S;
        b = new V;
        b.pe = "";
        b.Xa = "Rectangle";
        b.fill = m;
        b.stroke = "magenta";
        b.Ua = 2;
        b.ma = new sb(1, 1);
        a.add(b);
        a.sk = p;
        a.Ed = "Tool";
        this.ox = a;
        this.px = b;
        this.Ww = this.Vw = this.Sw = this.Rw = this.Tw = m;
        this.Ys = h;
        this.nE = new oa(P, "boolean");
        this.bA = this.kx = m
    }
    v.H("LinkingBaseTool", fg);
    v.pa(fg, zf);
    fg.prototype.doStop = fg.prototype.Pi = function() {
        this.xf = this.Ye = this.wf = this.Xe = this.Lb = m;
        this.mv.clear();
        this.re = m
    };
    v.a(fg, "portGravity", fg.prototype.NC);
    v.defineProperty(fg, {
        NC: "portGravity"
    },
    s("Yw"),
    function(a) {
        this.Yw !== a && (t && v.e(a, "number", fg, "portGravity"), this.Yw = a)
    });
    v.a(fg, "validUnconnectedLinks", fg.prototype.io);
    v.defineProperty(fg, {
        io: "validUnconnectedLinks"
    },
    s("ux"),
    function(a) {
        this.ux !== a && (t && v.e(a, "boolean", fg, "validUnconnectedLinks"), this.ux = a)
    });
    v.a(fg, "temporaryLink", fg.prototype.kh);
    v.defineProperty(fg, {
        kh: "temporaryLink"
    },
    s("nx"),
    function(a) {
        this.nx !== a && (t && v.c(a, U, fg, "temporaryLink"), this.nx = a)
    });
    v.a(fg, "temporaryFromNode", fg.prototype.se);
    v.defineProperty(fg, {
        se: "temporaryFromNode"
    },
    s("lx"),
    function(a) {
        this.lx !== a && (t && v.c(a, S, fg, "temporaryFromNode"), this.lx = a)
    });
    v.a(fg, "temporaryFromPort", fg.prototype.Pl);
    v.defineProperty(fg, {
        Pl: "temporaryFromPort"
    },
    s("mx"),
    function(a) {
        this.mx !== a && (t && v.c(a, P, fg, "temporaryFromPort"), this.mx = a)
    });
    v.a(fg, "temporaryToNode", fg.prototype.te);
    v.defineProperty(fg, {
        te: "temporaryToNode"
    },
    s("ox"),
    function(a) {
        this.ox !== a && (t && v.c(a, S, fg, "temporaryToNode"), this.ox = a)
    });
    v.a(fg, "temporaryToPort", fg.prototype.Ql);
    v.defineProperty(fg, {
        Ql: "temporaryToPort"
    },
    s("px"),
    function(a) {
        this.px !== a && (t && v.c(a, P, fg, "temporaryToPort"), this.px = a)
    });
    v.a(fg, "originalLink", fg.prototype.Lb);
    v.defineProperty(fg, {
        Lb: "originalLink"
    },
    s("Tw"),
    function(a) {
        this.Tw !== a && (t && a !== m && v.c(a, U, fg, "originalLink"), this.Tw = a)
    });
    v.a(fg, "originalFromNode", fg.prototype.Xe);
    v.defineProperty(fg, {
        Xe: "originalFromNode"
    },
    s("Rw"),
    function(a) {
        this.Rw !== a && (t && a !== m && v.c(a, S, fg, "originalFromNode"), this.Rw = a)
    });
    v.a(fg, "originalFromPort", fg.prototype.wf);
    v.defineProperty(fg, {
        wf: "originalFromPort"
    },
    s("Sw"),
    function(a) {
        this.Sw !== a && (t && a !== m && v.c(a, P, fg, "originalFromPort"), this.Sw = a)
    });
    v.a(fg, "originalToNode", fg.prototype.Ye);
    v.defineProperty(fg, {
        Ye: "originalToNode"
    },
    s("Vw"),
    function(a) {
        this.Vw !== a && (t && a !== m && v.c(a, S, fg, "originalToNode"), this.Vw = a)
    });
    v.a(fg, "originalToPort", fg.prototype.xf);
    v.defineProperty(fg, {
        xf: "originalToPort"
    },
    s("Ww"),
    function(a) {
        this.Ww !== a && (t && a !== m && v.c(a, P, fg, "originalToPort"), this.Ww = a)
    });
    v.m(fg, {
        Dd: "isForwards"
    },
    s("Ys"));
    v.m(fg, {
        mv: "validPortsCache"
    },
    s("nE"));
    v.a(fg, "targetPort", fg.prototype.re);
    v.defineProperty(fg, {
        re: "targetPort"
    },
    s("kx"),
    function(a) {
        this.kx !== a && (t && a !== m && v.c(a, P, fg, "targetPort"), this.kx = a)
    });
    fg.prototype.copyPortProperties = fg.prototype.cI = function(a, b, c, d, e) {
        a === m || (b === m || c === m || d === m) || (d.ma = b.la.size, e ? (d.$a = b.$a, d.vk = b.vk) : (d.Ya = b.Ya, d.kk = b.kk), c.tf = mc, c.location = b.zb(mc), d.Qa = b.An(), c.pf())
    };
    fg.prototype.setNoTargetPortProperties = fg.prototype.tK = function(a, b) {
        b !== m && (b.ma = new sb(1, 1), b.Ya = ac, b.$a = ac);
        a !== m && (a.location = this.b.F.C)
    };
    fg.prototype.doMouseMove = fg.prototype.Zg = function() {
        if (this.T) {
            var a = this.b;
            if (a !== m) {
                this.re = this.findTargetPort(this.Dd);
                if (this.re !== m) {
                    var b = this.re.W;
                    if (b instanceof S) {
                        this.Dd ? this.copyPortProperties(b, this.re, this.te, this.Ql, h) : this.copyPortProperties(b, this.re, this.se, this.Pl, p);
                        yf(a);
                        return
                    }
                }
                this.Dd ? this.setNoTargetPortProperties(this.te, this.Ql) : this.setNoTargetPortProperties(this.se, this.Pl);
                yf(a)
            }
        }
    };
    fg.prototype.findValidLinkablePort = fg.prototype.UI = function(a, b) {
        if (a === m) return m;
        var c = a.W;
        if (! (c instanceof S)) return m;
        for (; a !== m;) {
            var d = b ? a.fz: a.hy;
            if (d === h && (a.pe !== m || a instanceof S) && (b ? this.isValidTo(c, a) : this.isValidFrom(c, a))) return a;
            if (d === p) break;
            a = a.Y
        }
        return m
    };
    fg.prototype.findTargetPort = fg.prototype.OI = function(a) {
        for (var b = this.b,
        c = b.F.C,
        d = this.NC,
        e = this,
        g = b.yn(c, d,
        function(b) {
            return e.findValidLinkablePort(b, a)
        },
        m), b = d * d, d = m, g = g.f; g.next();) {
            var i = g.value,
            j = i.W;
            if (j instanceof S) {
                var k = i.zb(mc),
                l = c.x - k.x,
                k = c.y - k.y,
                l = l * l + k * k;
                l < b && (k = this.mv.ca(i), k !== m ? k && (d = i, b = l) : a && this.isValidLink(this.Xe, this.wf, j, i) || !a && this.isValidLink(j, i, this.Ye, this.xf) ? (this.mv.add(i, h), d = i, b = l) : this.mv.add(i, p))
            }
        }
        return d !== m && (c = d.W, c instanceof S && (c.ta === m || c.ta.kl)) ? d: m
    };
    fg.prototype.isValidFrom = fg.prototype.AJ = function(a, b) {
        if (a === m || b === m) return this.io;
        if (this.b.sa === this && (a.ta !== m && !a.ta.kl || b.hy !== h)) return p;
        var c = b.RB;
        if (Infinity > c) {
            if (this.Lb !== m && a === this.Xe && b === this.wf) return h;
            var d = b.pe;
            d === m && (d = "");
            if (a.tr(d).count >= c) return p
        }
        return h
    };
    fg.prototype.isValidTo = fg.prototype.DJ = function(a, b) {
        if (a === m || b === m) return this.io;
        if (this.b.sa === this && (a.ta !== m && !a.ta.kl || b.fz !== h)) return p;
        var c = b.yD;
        if (Infinity > c) {
            if (this.Lb !== m && a === this.Ye && b === this.xf) return h;
            var d = b.pe;
            d === m && (d = "");
            if (a.Qe(d).count >= c) return p
        }
        return h
    };
    fg.prototype.isInSameNode = fg.prototype.wJ = function(a, b) {
        if (a === m || b === m) return p;
        if (a === b) return h;
        var c = a.W,
        d = b.W;
        return c !== m && c === d
    };
    fg.prototype.isLinked = fg.prototype.yJ = function(a, b) {
        if (a === m || b === m) return p;
        var c = a.W;
        if (! (c instanceof S)) return p;
        var d = a.pe;
        d === m && (d = "");
        var e = b.W;
        if (! (e instanceof S)) return p;
        var g = b.pe;
        g === m && (g = "");
        for (e = e.Qe(g); e.next();) if (g = e.value, g.ea === c && g.dh === d) return h;
        return p
    };
    fg.prototype.isValidLink = fg.prototype.BJ = function(a, b, c, d) {
        return ! this.isValidFrom(a, b) || !this.isValidTo(c, d) || b !== m && d !== m && ((!b.QB || !d.xD) && this.isInSameNode(b, d) || (!b.PB || !d.wD) && this.isLinked(b, d)) || this.Lb !== m && (a !== m && a.Cl(this.Lb) || c !== m && c.Cl(this.Lb)) || a !== m && c !== m && (a.data === m && c.data !== m || a.data !== m && c.data === m) || !gg(this, a, c, this.Lb) ? p: this.Ay !== m ? this.Ay(a, b, c, d, this.Lb) : h
    };
    function gg(a, b, c, d) {
        if (b === m || c === m) return p;
        var e = a.b.LD;
        if (e !== hg) {
            if (e === ig) {
                for (e = c.me; e.next();) {
                    var g = e.value;
                    if (g !== d && g.ia === c) return p
                }
                return ! jg(a, b, c, d)
            }
            if (e === kg) {
                for (e = b.me; e.next();) if (g = e.value, g !== d && g.ea === b) return p;
                return ! jg(a, b, c, d)
            }
            if (e === lg) return b === c ? a = h: (e = new pa(S), e.add(c), a = rg(a, e, b, c, d)),
            !a;
            if (e === sg) return ! jg(a, b, c, d);
            if (e === tg) return b === c ? a = h: (e = new pa(S), e.add(c), a = ug(a, e, b, c, d)),
            !a
        }
        return h
    }
    function jg(a, b, c, d) {
        if (b === c) return h;
        if (b === m || c === m) return p;
        for (var e = b.me; e.next();) {
            var g = e.value;
            if (g !== d && g.ia === b && (g = g.ea, g !== b && jg(a, g, c, d))) return h
        }
        return p
    }
    function rg(a, b, c, d, e) {
        if (c === d) return h;
        if (c === m || d === m || b.contains(c)) return p;
        b.add(c);
        for (var g = c.me; g.next();) {
            var i = g.value;
            if (i !== e && i.ia === c && (i = i.ea, i !== c && rg(a, b, i, d, e))) return h
        }
        return p
    }
    function ug(a, b, c, d, e) {
        if (c === d) return h;
        if (c === m || d === m || b.contains(c)) return p;
        b.add(c);
        for (var g = c.me; g.next();) {
            var i = g.value;
            if (i !== e) {
                var j = i.ea,
                i = i.ia,
                j = j === c ? i: j;
                if (j !== c && ug(a, b, j, d, e)) return h
            }
        }
        return p
    }
    v.a(fg, "linkValidation", fg.prototype.Ay);
    v.defineProperty(fg, {
        Ay: "linkValidation"
    },
    s("bA"),
    function(a) {
        a !== m && v.e(a, "function", fg, "linkValidation");
        this.bA = a
    });
    function ua() {
        fg.call(this);
        this.name = "Linking";
        this.Uv = {};
        this.Tv = m;
        this.Q = vg;
        this.fx = this.ex = m
    }
    v.H("LinkingTool", ua);
    v.pa(ua, fg);
    var vg;
    ua.Either = vg = v.l(ua, "Either", 0);
    var wg;
    ua.ForwardsOnly = wg = v.l(ua, "ForwardsOnly", 0);
    var xg;
    ua.BackwardsOnly = xg = v.l(ua, "BackwardsOnly", 0);
    v.a(ua, "archetypeLinkData", ua.prototype.aB);
    v.defineProperty(ua, {
        aB: "archetypeLinkData"
    },
    s("Uv"),
    function(a) {
        this.Uv !== a && (a !== m && v.c(a, Object, ua, "archetypeLinkData"), this.Uv = a)
    });
    v.a(ua, "archetypeLabelNodeData", ua.prototype.$A);
    v.defineProperty(ua, {
        $A: "archetypeLabelNodeData"
    },
    s("Tv"),
    function(a) {
        if (this.Tv !== a) {
            a !== m && v.c(a, Object, ua, "archetypeLabelNodeData");
            var b = this.b;
            b !== m && (b = b.P, b !== m && !(a instanceof S) && !b.ty(a) && v.g("CommandHandler.archetypeLabelNodeData must be either a Node or a data object for which GraphLinksModel.isLinkLabelForNodeData is true: " + a));
            this.Tv = a
        }
    });
    v.a(ua, "direction", ua.prototype.direction);
    v.defineProperty(ua, {
        direction: "direction"
    },
    s("Q"),
    function(a) {
        this.Q !== a && (t && v.Va(a, ua, ua, "direction"), this.Q = a)
    });
    v.a(ua, "startObject", ua.prototype.$y);
    v.defineProperty(ua, {
        $y: "startObject"
    },
    s("ex"),
    function(a) {
        this.ex !== a && (t && a !== m && v.c(a, P, ua, "startObject"), this.ex = a)
    });
    v.m(ua, {
        iv: "startPort"
    },
    s("fx"));
    ua.prototype.canStart = ua.prototype.mf = function() {
        if (!this.isEnabled) return p;
        var a = this.b;
        if (a === m || (a.Pa || a.Ud) || !a.kl) return p;
        var b = a.P;
        return b === m || !(b instanceof N) || !a.F.left || a.sa !== this && !this.isBeyondDragSize() ? p: this.findLinkablePort() !== m
    };
    ua.prototype.findLinkablePort = ua.prototype.KI = function() {
        var a = this.b;
        if (a === m) return m;
        var b = this.$y;
        b === m && (b = a.dd(a.jc.C, m, m));
        if (b === m || !(b.W instanceof S)) return m;
        var c = this.direction;
        if (c === vg || c === wg) if (a = this.findValidLinkablePort(b, p), a !== m) return this.Ys = h,
        a;
        if (c === vg || c === xg) if (a = this.findValidLinkablePort(b, h), a !== m) return this.Ys = p,
        a;
        return m
    };
    ua.prototype.doActivate = ua.prototype.Xh = function() {
        var a = this.b;
        if (a !== m && (this.iv === m && (this.fx = this.findLinkablePort()), this.iv !== m)) {
            this.Nb(this.name);
            a.Kc = h;
            a.xc = "hand";
            a.add(this.se);
            a.add(this.te);
            if (this.Dd) {
                this.wf = this.iv;
                var b = this.wf.W;
                b instanceof S && (this.Xe = b);
                this.copyPortProperties(this.Xe, this.wf, this.se, this.Pl, p)
            } else this.xf = this.iv,
            b = this.xf.W,
            b instanceof S && (this.Ye = b),
            this.copyPortProperties(this.Ye, this.xf, this.te, this.Ql, h);
            this.kh && (this.se !== m && (this.kh.ea = this.se), this.te !== m && (this.kh.ia = this.te), a.add(this.kh));
            this.T = h
        }
    };
    ua.prototype.doDeactivate = ua.prototype.jk = function() {
        this.T = p;
        var a = this.b;
        a !== m && (a.remove(this.kh), a.remove(this.se), a.remove(this.te), a.Kc = p, a.xc = "", this.cj())
    };
    ua.prototype.doStop = ua.prototype.Pi = function() {
        fg.prototype.Pi.call(this);
        this.$y = this.fx = m
    };
    ua.prototype.doMouseUp = ua.prototype.Pe = function() {
        if (this.T) {
            var a = this.b;
            if (a === m) return;
            var b = this.ue = m,
            c = m,
            d = m,
            e = m,
            g = this.re = this.findTargetPort(this.Dd),
            i = m;
            g !== m ? (i = g.W, i instanceof S && (this.Dd ? (this.Xe !== m && (b = this.Xe, c = this.wf), d = i, e = g) : (b = i, c = g, this.Ye !== m && (d = this.Ye, e = this.xf)))) : this.Dd ? this.Xe !== m && this.io && (b = this.Xe, c = this.wf) : this.Ye !== m && this.io && (d = this.Ye, e = this.xf);
            if (b !== m || d !== m) b = this.insertLink(b, c, d, e),
            b !== m ? (g === m && (this.Dd ? b.iF = a.F.C: b.hF = a.F.C), a.Pd && a.select(b), this.ue = this.name, a.ga("LinkDrawn", b)) : a.P.hB()
        }
        this.stopTool()
    };
    ua.prototype.insertLink = ua.prototype.qJ = function(a, b, c, d) {
        var e = this.b;
        if (e === m) return m;
        var g = e.P;
        if (g === m || !(g instanceof N)) return m;
        b === m && (b = a);
        b = b.pe;
        b === m && (b = "");
        d === m && (d = c);
        var i = d.pe;
        i === m && (i = "");
        d = this.aB;
        if (d instanceof U) {
            if (of(d), g = d.copy(), g instanceof U) return g.ea = a,
            g.dh = b,
            g.ia = c,
            g.gi = i,
            e.add(g),
            g
        } else if (d !== m && (d = g.qB(d), v.Oa(d))) return g.fv(d, g.dc(a.data)),
        g.bs(d, b),
        g.gv(d, g.dc(c.data)),
        g.cs(d, i),
        g.WA(d),
        a = this.$A,
        a !== m && g.ty(a) && (a = g.on(a), v.Oa(a) && (g.ju(a), a = g.dc(a), a !== f && g.VA(d, a))),
        g = e.Ri(d);
        return m
    };
    function yg() {
        fg.call(this);
        this.name = "Relinking";
        var a = new V;
        a.Xa = "Diamond";
        a.ma = new sb(8, 8);
        a.fill = "cyan";
        a.cursor = "pointer";
        a.ih = 0;
        this.Rz = a;
        a = new V;
        a.Xa = "Diamond";
        a.ma = new sb(8, 8);
        a.fill = "cyan";
        a.cursor = "pointer";
        a.ih = -1;
        this.MA = a;
        this.$b = m;
        this.oA = new E
    }
    v.H("RelinkingTool", yg);
    v.pa(yg, fg);
    yg.prototype.updateAdornments = yg.prototype.ii = function(a) {
        if (a instanceof U) {
            var b = m,
            c = "RelinkFrom";
            if (a.Ha) {
                var d = a.$n;
                d !== m && (a.eb() && a.canRelinkFrom() && d.nk() && d.la.aa()) && (b = a.tn(c), b === m && (b = this.makeAdornment(d, p), b.od = c), b !== m && b.J());
                a.Zm(c, b)
            } else a.Ll(c);
            b = m;
            c = "RelinkTo";
            a.Ha ? (d = a.$n, d !== m && (a.eb() && a.canRelinkTo() && d.nk() && d.la.aa()) && (b = a.tn(c), b === m && (b = this.makeAdornment(d, h), b.od = c), b !== m && b.J()), a.Zm(c, b)) : a.Ll(c)
        }
    };
    yg.prototype.makeAdornment = yg.prototype.By = function(a, b) {
        var c = new lf;
        c.type = zg;
        var d = b ? this.PG: this.AF;
        d !== m && c.add(d.copy());
        c.Od = a;
        return c
    };
    v.defineProperty(yg, {
        AF: "fromHandleArchetype"
    },
    s("Rz"),
    function(a) {
        a && v.c(a, P, yg, "fromHandleArchetype");
        this.Rz = a
    });
    v.defineProperty(yg, {
        PG: "toHandleArchetype"
    },
    s("MA"),
    function(a) {
        a && v.c(a, P, yg, "toHandleArchetype");
        this.MA = a
    });
    v.m(yg, {
        handle: "handle"
    },
    s("$b"));
    yg.prototype.canStart = yg.prototype.mf = function() {
        if (!this.isEnabled) return p;
        var a = this.b;
        if (a === m || (a.Pa || a.Ud) || !a.Gi) return p;
        var b = a.P;
        if (b === m || !(b instanceof N) || !a.F.left) return p;
        b = this.findToolHandleAt(a.jc.C, "RelinkFrom");
        b === m && (b = this.findToolHandleAt(a.jc.C, "RelinkTo"));
        return b !== m
    };
    yg.prototype.doActivate = yg.prototype.Xh = function() {
        var a = this.b;
        if (a !== m) {
            var b = this.findToolHandleAt(a.jc.C, "RelinkFrom");
            b === m && (b = this.findToolHandleAt(a.jc.C, "RelinkTo"));
            if (b !== m) {
                var c = b.W;
                c instanceof lf && c.cn instanceof U && (this.$b = b, this.Nb(this.name), a.Kc = h, a.xc = "hand", this.Ys = c === m || "RelinkTo" === c.od, this.Lb = c.cn, this.wf = this.Lb.Jc, this.Xe = this.Lb.ea, this.xf = this.Lb.sd, this.Ye = this.Lb.ia, this.oA = this.Lb.la, a.add(this.se), a.add(this.te), this.Dd ? this.copyPortProperties(this.Xe, this.wf, this.se, this.Pl, h) : this.copyPortProperties(this.Ye, this.xf, this.te, this.Ql, p), this.Lb !== m && 0 < this.Lb.ba && (this.Xe === m && (this.Pl !== m && (this.Pl.ma = new sb(0, 0)), this.se !== m && (this.se.location = this.Lb.h(0))), this.Ye === m && (this.Ql !== m && (this.Ql.ma = new sb(0, 0)), this.te !== m && (this.te.location = this.Lb.h(this.Lb.ba - 1)))), this.kh !== m && (this.se !== m && (this.kh.ea = this.se), this.te !== m && (this.kh.ia = this.te), a.add(this.kh)), this.T = h)
            }
        }
    };
    yg.prototype.doDeactivate = yg.prototype.jk = function() {
        this.T = p;
        var a = this.b;
        a !== m && (a.remove(this.kh), a.remove(this.se), a.remove(this.te), a.Kc = p, a.xc = "", this.cj())
    };
    yg.prototype.doStop = yg.prototype.Pi = function() {
        fg.prototype.Pi.call(this);
        this.$b = m
    };
    yg.prototype.doMouseUp = yg.prototype.Pe = function() {
        if (this.T) {
            var a = this.b;
            if (a === m) return;
            this.ue = m;
            var b = this.Xe,
            c = this.wf,
            d = this.Ye,
            e = this.xf,
            g = this.Lb;
            this.re = this.findTargetPort(this.Dd);
            if (this.re !== m) {
                var i = this.re.W;
                i instanceof S && (this.Dd ? (d = i, e = this.re) : (b = i, c = this.re))
            } else this.io ? this.Dd ? e = d = m: c = b = m: g = m;
            g !== m && (this.reconnectLink(g, this.Dd ? d: b, this.Dd ? e: c, this.Dd), this.re === m && (this.Dd ? g.iF = a.F.C: g.hF = a.F.C, g.Tb()), a.Pd && (g.Ha = h), this.ue = this.name, a.ga("LinkRelinked", g, this.Dd ? this.xf: this.wf));
            Ag(this.Lb, this.oA)
        }
        this.stopTool()
    };
    yg.prototype.reconnectLink = yg.prototype.fK = function(a, b, c, d) {
        var e = this.b;
        if (e === m) return p;
        var g = b !== m ? b.data: m,
        g = g !== m ? e.P.dc(g) : f,
        c = c.pe !== m ? c.pe: "",
        a = a.data;
        if (a !== m && g !== f) {
            b = e.P;
            if (b === m || !(b instanceof N)) return p;
            d ? (b.gv(a, g), b.cs(a, c)) : (b.fv(a, g), b.bs(a, c))
        } else d ? (this.Lb.ia = b, this.Lb.gi = c) : (this.Lb.ea = b, this.Lb.dh = c);
        return h
    };
    function Bg() {
        zf.call(this);
        this.name = "LinkReshaping";
        var a = new V;
        a.Xa = "Rectangle";
        a.ma = new sb(6, 6);
        a.fill = "cyan";
        this.Bj = a;
        this.Uw = this.qA = this.Rv = this.$b = m
    }
    v.H("LinkReshapingTool", Bg);
    v.pa(Bg, zf);
    var Cg;
    Bg.None = Cg = v.l(Bg, "None", 0);
    var Dg;
    Bg.Horizontal = Dg = v.l(Bg, "Horizontal", 1);
    var Eg;
    Bg.Vertical = Eg = v.l(Bg, "Vertical", 2);
    var Hg;
    Bg.All = Hg = v.l(Bg, "All", 3);
    Bg.prototype.updateAdornments = Bg.prototype.ii = function(a) {
        if (a instanceof U) {
            var b = m;
            if (a.Ha) {
                var c = a.path;
                c !== m && (a.eb() && a.canReshape() && c.nk() && c.la.aa()) && (b = a.tn(this.name), b === m && (b = this.makeAdornment(c), b.od = this.name), b !== m && (b.location = a.position, b.J()));
                a.Zm(this.name, b)
            } else a.Ll(this.name)
        }
    };
    Bg.prototype.makeAdornment = Bg.prototype.By = function(a) {
        var b = new lf;
        b.type = zg;
        var c = a.W,
        d = c.ba,
        e = Lg(c);
        if (c.mb !== m && 2 < d) {
            for (var d = c.Fu,
            g = c.xy,
            i = d + 1; i <= g - 1; i++) {
                var j = this.makeHandle(a, i);
                if (j !== m) {
                    j.ih = i;
                    if (i !== d) if (i === d + 1 && e) {
                        var k = c.h(d),
                        l = c.h(d + 1);
                        fb(k.x, l.x) && fb(k.y, l.y) && (l = c.h(d - 1));
                        fb(k.x, l.x) ? (j.Zn = Eg, j.cursor = "n-resize") : fb(k.y, l.y) && (j.Zn = Dg, j.cursor = "w-resize")
                    } else i === g - 1 && e ? (k = c.h(g - 1), l = c.h(g), fb(k.x, l.x) && fb(k.y, l.y) && (k = c.h(g + 1)), fb(k.x, l.x) ? (j.Zn = Eg, j.cursor = "n-resize") : fb(k.y, l.y) && (j.Zn = Dg, j.cursor = "w-resize")) : i !== g && (j.Zn = Hg, j.cursor = "move");
                    b.add(j)
                }
            }
            b.Od = a
        }
        return b
    };
    Bg.prototype.makeHandle = Bg.prototype.bG = function() {
        var a = this.Dr;
        return a === m ? m: a.copy()
    };
    v.defineProperty(Bg, {
        Dr: "handleArchetype"
    },
    s("Bj"),
    function(a) {
        a && v.c(a, P, Bg, "handleArchetype");
        this.Bj = a
    });
    v.m(Bg, {
        handle: "handle"
    },
    s("$b"));
    v.m(Bg, {
        bn: "adornedLink"
    },
    s("Rv"));
    Bg.prototype.canStart = Bg.prototype.mf = function() {
        if (!this.isEnabled) return p;
        var a = this.b;
        return a === m || a.Pa || !a.gn ? p: this.findToolHandleAt(a.jc.C, this.name) !== m
    };
    Bg.prototype.doActivate = Bg.prototype.Xh = function() {
        var a = this.b;
        if (a !== m && (this.$b = this.findToolHandleAt(a.jc.C, this.name), this.$b !== m)) {
            var b = this.$b.W.cn;
            b instanceof U && (this.Rv = b, a.Kc = h, this.qA = b.h(this.$b.ih), this.Uw = b.mb.copy(), this.Nb(this.name), this.T = h)
        }
    };
    Bg.prototype.doDeactivate = Bg.prototype.jk = function() {
        this.cj();
        this.Uw = this.qA = this.Rv = this.$b = m;
        var a = this.b;
        a !== m && (a.Kc = p);
        this.T = p
    };
    Bg.prototype.doCancel = Bg.prototype.Oi = function() {
        var a = this.bn;
        a !== m && (a.mb = this.Uw);
        this.stopTool()
    };
    Bg.prototype.doMouseMove = Bg.prototype.Zg = function() {
        var a = this.b;
        this.T && a !== m && (a = this.computeReshape(a.F.C), this.reshape(a))
    };
    Bg.prototype.doMouseUp = Bg.prototype.Pe = function() {
        var a = this.b;
        if (this.T && a !== m) {
            var b = this.computeReshape(a.F.C);
            this.reshape(b);
            b = this.bn;
            b !== m && (b.mb = this.bn.mb);
            a.ai();
            this.ue = this.name;
            a.ga("LinkReshaped", this.bn)
        }
        this.stopTool()
    };
    Bg.prototype.reshape = Bg.prototype.nK = function(a) {
        var b = this.bn;
        b.uk();
        var c = this.handle.ih,
        d = this.handle.Zn;
        if (Lg(b)) if (c === b.Fu + 1) c = b.Fu + 1,
        d == Eg ? (b.w(c, new D(b.h(c - 1).x, a.y)), b.w(c + 1, new D(b.h(c + 2).x, a.y))) : d == Dg && (b.w(c, new D(a.x, b.h(c - 1).y)), b.w(c + 1, new D(a.x, b.h(c + 2).y)));
        else if (c === b.xy - 1) c = b.xy - 1,
        d === Eg ? (b.w(c - 1, new D(b.h(c - 2).x, a.y)), b.w(c, new D(b.h(c + 1).x, a.y))) : d === Dg && (b.w(c - 1, new D(a.x, b.h(c - 2).y)), b.w(c, new D(a.x, b.h(c + 1).y)));
        else {
            var d = c,
            e = b.h(d),
            g = b.h(d - 1),
            i = b.h(d + 1);
            fb(g.x, e.x) && fb(e.y, i.y) ? (fb(g.x, b.h(d - 2).x) && !fb(g.y, b.h(d - 2).y) ? (e = b.mb, e.lc(d, new D(a.x, g.y)), b.mb = e, c++, d++) : b.w(d - 1, new D(a.x, g.y)), fb(i.y, b.h(d + 2).y) && !fb(i.x, b.h(d + 2).x) ? (e = b.mb, e.lc(d + 1, new D(i.x, a.y)), b.mb = e) : b.w(d + 1, new D(i.x, a.y))) : fb(g.y, e.y) && fb(e.x, i.x) ? (fb(g.y, b.h(d - 2).y) && !fb(g.x, b.h(d - 2).x) ? (e = b.mb, e.lc(d, new D(g.x, a.y)), b.mb = e, c++, d++) : b.w(d - 1, new D(g.x, a.y)), fb(i.x, b.h(d + 2).x) && !fb(i.y, b.h(d + 2).y) ? (e = b.mb, e.lc(d + 1, new D(a.x, i.y)), b.mb = e) : b.w(d + 1, new D(a.x, i.y))) : fb(g.x, e.x) && fb(e.x, i.x) ? (fb(g.x, b.h(d - 2).x) && !fb(g.y, b.h(d - 2).y) ? (e = b.mb, e.lc(d, new D(a.x, g.y)), b.mb = e, c++, d++) : b.w(d - 1, new D(a.x, g.y)), fb(i.x, b.h(d + 2).x) && !fb(i.y, b.h(d + 2).y) ? (e = b.mb, e.lc(d + 1, new D(a.x, i.y)), b.mb = e) : b.w(d + 1, new D(a.x, i.y))) : fb(g.y, e.y) && fb(e.y, i.y) && (fb(g.y, b.h(d - 2).y) && !fb(g.x, b.h(d - 2).x) ? (e = b.mb, e.lc(d, new D(g.x, a.y)), b.mb = e, c++, d++) : b.w(d - 1, new D(g.x, a.y)), fb(i.y, b.h(d + 2).y) && !fb(i.x, b.h(d + 2).x) ? (e = b.mb, e.lc(d + 1, new D(i.x, a.y)), b.mb = e) : b.w(d + 1, new D(i.x, a.y)));
            b.w(c, a.copy())
        } else b.w(c, a.copy());
        b.Th()
    };
    Bg.prototype.computeReshape = Bg.prototype.XH = function(a) {
        var b = this.bn,
        c = this.handle.ih;
        switch (this.handle.Zn) {
        case Hg:
            return a;
        case Eg:
            return b = b.h(c),
            new D(b.x, a.y);
        case Dg:
            return b = b.h(c),
            new D(a.x, b.y);
        default:
        case Cg:
            return b.h(c)
        }
    };
    function Mg() {
        zf.call(this);
        this.name = "Resizing";
        this.wd = (new sb(1, 1)).freeze();
        this.wi = (new sb(9999, 9999)).freeze();
        this.ki = (new sb(NaN, NaN)).freeze();
        this.Qk = p;
        this.va = m;
        var a = new V;
        a.Fi = mc;
        a.Xa = "Rectangle";
        a.ma = new sb(6, 6);
        a.fill = "cyan";
        a.stroke = "black";
        a.Ua = 1;
        a.cursor = "pointer";
        this.Bj = a;
        this.$b = m;
        this.cq = 0;
        this.fE = new E;
        this.Qw = new sb;
        this.pA = new D;
        this.qw = new sb(0, 0);
        this.pw = new sb(Infinity, Infinity);
        this.ow = new sb(1, 1)
    }
    v.H("ResizingTool", Mg);
    v.pa(Mg, zf);
    Mg.prototype.updateAdornments = Mg.prototype.ii = function(a) {
        if (! (a === m || a instanceof U)) {
            var b = m;
            if (a.Ha) {
                var c = a.yG;
                if (c !== m && (a.eb() && a.canResize() && c.nk() && c.la.aa()) && (b = a.tn(this.name), b === m && (b = this.makeAdornment(c), b.od = this.name), b !== m)) {
                    var d = c.An();
                    b.Qa = d;
                    b.location = c.zb(fc);
                    var e = b.placeholder;
                    if (e !== m) {
                        var g = c.yl(),
                        c = c.ua;
                        e.ma = new sb(c.width * g, c.height * g)
                    }
                    Ng(this, b, d)
                }
                a.Zm(this.name, b)
            } else a.Ll(this.name)
        }
    };
    Mg.prototype.makeAdornment = Mg.prototype.By = function(a) {
        var b = m,
        b = a.W.ZC;
        if (b === m) {
            b = new lf;
            b.type = Og;
            var c = new Pg;
            c.Vi = h;
            b.add(c);
            b.add(this.makeHandle(a, fc));
            b.add(this.makeHandle(a, lc));
            b.add(this.makeHandle(a, tc));
            b.add(this.makeHandle(a, nc));
            b.add(this.makeHandle(a, uc));
            b.add(this.makeHandle(a, Bc));
            b.add(this.makeHandle(a, Cc));
            b.add(this.makeHandle(a, Ac))
        } else if (of(b), b = b.copy(), !(b instanceof lf)) return m;
        b.Od = a;
        return b
    };
    Mg.prototype.makeHandle = Mg.prototype.bG = function(a, b) {
        var c = this.Dr;
        if (c === m) return m;
        c = c.copy();
        c.pb = b;
        return c
    };
    function Ng(a, b, c) {
        if (b !== m) if (!$b(b.pb) && "" !== b.cursor) a: {
            a = b.pb;
            Zb(a) && (a = mc);
            if (0 >= a.x) c = 0 >= a.y ? c + 225 : 1 <= a.y ? c + 135 : c + 180;
            else if (1 <= a.x) 0 >= a.y ? c += 315 : 1 <= a.y && (c += 45);
            else if (0 >= a.y) c += 270;
            else if (1 <= a.y) c += 90;
            else break a;
            0 > c ? c += 360 : 360 <= c && (c -= 360);
            b.cursor = 22.5 > c ? "e-resize": 67.5 > c ? "se-resize": 112.5 > c ? "s-resize": 157.5 > c ? "sw-resize": 202.5 > c ? "w-resize": 247.5 > c ? "nw-resize": 292.5 > c ? "n-resize": 337.5 > c ? "ne-resize": "e-resize"
        } else if (b instanceof w) for (b = b.elements; b.next();) Ng(a, b.value, c)
    }
    v.defineProperty(Mg, {
        Dr: "handleArchetype"
    },
    s("Bj"),
    function(a) {
        a && v.c(a, P, Mg, "handleArchetype");
        this.Bj = a
    });
    v.m(Mg, {
        handle: "handle"
    },
    s("$b"));
    v.m(Mg, {
        Od: "adornedObject"
    },
    s("va"));
    Mg.prototype.canStart = Mg.prototype.mf = function() {
        if (!this.isEnabled) return p;
        var a = this.b;
        return a === m || a.Pa || !a.hn || !a.F.left ? p: this.findToolHandleAt(a.jc.C, this.name) !== m ? h: p
    };
    Mg.prototype.doActivate = Mg.prototype.Xh = function() {
        var a = this.b;
        a !== m && (this.$b = this.findToolHandleAt(a.jc.C, this.name), this.$b !== m && (this.va = this.$b.W.Od, this.cq = this.va.Qa, this.fE.set(this.va.ua), this.pA.set(this.va.W.location), this.Qw.set(this.va.ma), this.ow = this.computeCellSize(), this.qw = this.computeMinSize(), this.pw = this.computeMaxSize(), a.Kc = h, this.Nb(this.name), this.T = h))
    };
    Mg.prototype.doDeactivate = Mg.prototype.jk = function() {
        var a = this.b;
        a !== m && (this.cj(), this.va = this.$b = m, this.T = a.Kc = p)
    };
    Mg.prototype.doCancel = Mg.prototype.Oi = function() {
        this.va.ma = this.Qw;
        this.va.W.location = this.pA;
        this.stopTool()
    };
    Mg.prototype.doMouseMove = Mg.prototype.Zg = function() {
        var a = this.b;
        if (this.T && a !== m) {
            var b = this.qw,
            c = this.pw,
            d = this.ow,
            e = this.va.UB(a.F.C),
            g = this.va.zn;
            g === Qg && (g = this.va.xa.Pb);
            b = this.computeResize(e, this.$b.pb, b, c, d, !(g === Rg || g === Sg || a.F.shift));
            this.resize(b);
            Tg(a)
        }
    };
    Mg.prototype.doMouseUp = Mg.prototype.Pe = function() {
        var a = this.b;
        if (this.T && a !== m) {
            var b = this.qw,
            c = this.pw,
            d = this.ow,
            e = this.va.UB(a.F.C),
            g = this.va.zn;
            g === Qg && (g = this.va.xa.Pb);
            b = this.computeResize(e, this.$b.pb, b, c, d, !(g === Rg || g === Sg || a.F.shift));
            this.resize(b);
            a.ai();
            this.ue = this.name;
            a.ga("PartResized", this.va, this.Qw)
        }
        this.stopTool()
    };
    Mg.prototype.resize = Mg.prototype.oK = function(a) {
        var b = this.b;
        if (b !== m) {
            var c = this.va.W,
            d = c.position.copy(),
            e = this.va.ua.copy(),
            g = this.va.An();
            360 <= g ? g -= 360 : 0 > g && (g += 360);
            var i = Math.PI * g / 180,
            j = Math.cos(i),
            i = Math.sin(i),
            k = a.width - e.width,
            e = a.height - e.height,
            l = 90 < g && 270 > g ? 1 : 0;
            d.x += (a.x + k * l) * j - (a.y + e * (0 < g && 180 > g ? 1 : 0)) * i;
            d.y += (a.x + k * (180 < g && 360 > g ? 1 : 0)) * i + (a.y + e * l) * j;
            this.va.ma = a.size;
            c.Yh();
            c.position = d;
            yf(b)
        }
    };
    Mg.prototype.computeResize = Mg.prototype.YH = function(a, b, c, d, e, g) {
        Zb(b) && (b = mc);
        var i = this.va.ua,
        j = i.x,
        k = i.y,
        l = i.x + i.width,
        n = i.y + i.height,
        r = 1;
        if (!g) {
            var r = i.width,
            q = i.height;
            0 >= r && (r = 1);
            0 >= q && (q = 1);
            r = q / r
        }
        a = Fd(a.x, a.y, j, k, e.width, e.height);
        e = i.copy();
        0 >= b.x ? 0 >= b.y ? (e.x = Math.max(a.x, l - d.width), e.x = Math.min(e.x, l - c.width), e.width = Math.max(l - e.x, c.width), e.y = Math.max(a.y, n - d.height), e.y = Math.min(e.y, n - c.height), e.height = Math.max(n - e.y, c.height), g || (a = e.height / e.width, r < a ? (e.height = r * e.width, e.y = n - e.height) : (e.width = e.height / r, e.x = l - e.width))) : 1 <= b.y ? (e.x = Math.max(a.x, l - d.width), e.x = Math.min(e.x, l - c.width), e.width = Math.max(l - e.x, c.width), e.height = Math.max(Math.min(a.y - k, d.height), c.height), g || (a = e.height / e.width, r < a ? e.height = r * e.width: (e.width = e.height / r, e.x = l - e.width))) : (e.x = Math.max(a.x, l - d.width), e.x = Math.min(e.x, l - c.width), e.width = l - e.x, g || (e.height = r * e.width, e.y = k + 0.5 * (n - k - e.height))) : 1 <= b.x ? 0 >= b.y ? (e.width = Math.max(Math.min(a.x - j, d.width), c.width), e.y = Math.max(a.y, n - d.height), e.y = Math.min(e.y, n - c.height), e.height = Math.max(n - e.y, c.height), g || (a = e.height / e.width, r < a ? (e.height = r * e.width, e.y = n - e.height) : e.width = e.height / r)) : 1 <= b.y ? (e.width = Math.max(Math.min(a.x - j, d.width), c.width), e.height = Math.max(Math.min(a.y - k, d.height), c.height), g || (a = e.height / e.width, r < a ? e.height = r * e.width: e.width = e.height / r)) : (e.width = Math.max(Math.min(a.x - j, d.width), c.width), g || (e.height = r * e.width, e.y = k + 0.5 * (n - k - e.height))) : 0 >= b.y ? (e.y = Math.max(a.y, n - d.height), e.y = Math.min(e.y, n - c.height), e.height = n - e.y, g || (e.width = e.height / r, e.x = j + 0.5 * (l - j - e.width))) : 1 <= b.y && (e.height = Math.max(Math.min(a.y - k, d.height), c.height), g || (e.width = e.height / r, e.x = j + 0.5 * (l - j - e.width)));
        return e
    };
    Mg.prototype.computeMinSize = Mg.prototype.UH = function() {
        var a = this.va.Xd.copy(),
        b = this.Xd; ! isNaN(b.width) && b.width > a.width && (a.width = b.width); ! isNaN(b.height) && b.height > a.height && (a.height = b.height);
        return a
    };
    Mg.prototype.computeMaxSize = Mg.prototype.TH = function() {
        var a = this.va.Fd.copy(),
        b = this.Fd; ! isNaN(b.width) && b.width < a.width && (a.width = b.width); ! isNaN(b.height) && b.height < a.height && (a.height = b.height);
        return a
    };
    Mg.prototype.computeCellSize = Mg.prototype.QH = function() {
        var a = new sb(NaN, NaN),
        b = this.va.W;
        if (b) {
            var c = b.$C; ! isNaN(c.width) && 0 < c.width && (a.width = c.width); ! isNaN(c.height) && 0 < c.height && (a.height = c.height)
        }
        c = this.gk;
        isNaN(a.width) && (!isNaN(c.width) && 0 < c.width) && (a.width = c.width);
        isNaN(a.height) && (!isNaN(c.height) && 0 < c.height) && (a.height = c.height);
        b = this.b;
        if ((isNaN(a.width) || isNaN(a.height)) && b) c = b.Vb.ie,
        c !== m && c.Gn && (c = c.ky, isNaN(a.width) && (!isNaN(c.width) && 0 < c.width) && (a.width = c.width), isNaN(a.height) && (!isNaN(c.height) && 0 < c.height) && (a.height = c.height)),
        b = b.Ku,
        b !== m && (b.visible && this.Gn) && (c = b.Cr, isNaN(a.width) && (!isNaN(c.width) && 0 < c.width) && (a.width = c.width), isNaN(a.height) && (!isNaN(c.height) && 0 < c.height) && (a.height = c.height));
        if (isNaN(a.width) || 0 === a.width || Infinity === a.width) a.width = 1;
        if (isNaN(a.height) || 0 === a.height || Infinity === a.height) a.height = 1;
        return a
    };
    v.a(Mg, "minSize", Mg.prototype.Xd);
    v.defineProperty(Mg, {
        Xd: "minSize"
    },
    s("wd"),
    function(a) {
        this.wd.u(a) || (t && v.c(a, sb, Mg, "minSize"), isNaN(a.width) && (a.width = 0), isNaN(a.height) && (a.height = 0), this.wd.Ra(a))
    });
    v.a(Mg, "maxSize", Mg.prototype.Fd);
    v.defineProperty(Mg, {
        Fd: "maxSize"
    },
    s("wi"),
    function(a) {
        this.wi.u(a) || (t && v.c(a, sb, Mg, "maxSize"), isNaN(a.width) && (a.width = Infinity), isNaN(a.height) && (a.height = Infinity), this.wi.Ra(a))
    });
    v.a(Mg, "cellSize", Mg.prototype.gk);
    v.defineProperty(Mg, {
        gk: "cellSize"
    },
    s("ki"),
    function(a) {
        this.ki.u(a) || (t && v.c(a, sb, Mg, "cellSize"), this.ki.Ra(a))
    });
    v.a(Mg, "isGridSnapEnabled", Mg.prototype.Gn);
    v.defineProperty(Mg, {
        Gn: "isGridSnapEnabled"
    },
    s("Qk"),
    function(a) {
        this.Qk !== a && (v.e(a, "boolean", Mg, "isGridSnapEnabled"), this.Qk = a)
    });
    function Ug() {
        zf.call(this);
        this.name = "Rotating";
        this.dx = 45;
        this.cx = 2;
        this.va = m;
        var a = new V;
        a.Xa = "Ellipse";
        a.ma = new sb(6, 6);
        a.fill = "yellow";
        a.stroke = "black";
        a.Ua = 1;
        a.cursor = "pointer";
        this.Bj = a;
        this.$b = m;
        this.cq = 0;
        this.uA = new D
    }
    v.H("RotatingTool", Ug);
    v.pa(Ug, zf);
    Ug.prototype.updateAdornments = Ug.prototype.ii = function(a) {
        if (! (a === m || a instanceof U)) {
            var b = m;
            if (a.Ha) {
                var c = a.CG;
                if (c !== m && (a.eb() && a.canRotate() && c.nk() && c.la.aa()) && (b = a.tn(this.name), b === m && (b = this.makeAdornment(c), b.od = this.name), b !== m)) {
                    b.Qa = c.An();
                    var d = m,
                    e = m;
                    c === a || c === a.Ab ? (d = a.Ab, e = a.tf) : (d = c, e = mc);
                    for (var g = d.ua,
                    e = new D(g.width * e.x + e.offsetX, g.height * e.y + e.offsetY); d !== m && d !== c;) d.transform.Bb(e),
                    d = d.Y;
                    d = e.y;
                    e = Math.max(e.x - c.ua.width, 0);
                    b.tf = mc;
                    b.location = c.zb(new F(1, 0, 50 + e, d))
                }
                a.Zm(this.name, b)
            } else a.Ll(this.name)
        }
    };
    Ug.prototype.makeAdornment = Ug.prototype.By = function(a) {
        var b = m,
        b = a.W.dD;
        if (b === m) {
            b = new lf;
            b.type = Vg;
            var c = this.Dr;
            c !== m && b.add(c.copy())
        } else if (of(b), b = b.copy(), !(b instanceof lf)) return m;
        b.Od = a;
        return b
    };
    v.defineProperty(Ug, {
        Dr: "handleArchetype"
    },
    s("Bj"),
    function(a) {
        a && v.c(a, P, Ug, "handleArchetype");
        this.Bj = a
    });
    v.m(Ug, {
        handle: "handle"
    },
    s("$b"));
    v.m(Ug, {
        Od: "adornedObject"
    },
    s("va"));
    Ug.prototype.canStart = Ug.prototype.mf = function() {
        if (!this.isEnabled) return p;
        var a = this.b;
        return a === m || a.Pa || !a.jn || !a.F.left ? p: this.findToolHandleAt(a.jc.C, this.name) !== m ? h: p
    };
    Ug.prototype.doActivate = Ug.prototype.Xh = function() {
        var a = this.b;
        if (a !== m && (this.$b = this.findToolHandleAt(a.jc.C, this.name), this.$b !== m)) {
            this.va = this.$b.W.Od;
            var b = this.va.W,
            c = b.Ab;
            this.uA = this.va === b || this.va === c ? c.zb(b.tf) : this.va.zb(mc);
            this.cq = this.va.Qa;
            a.Kc = h;
            this.Nb(this.name);
            this.T = h
        }
    };
    Ug.prototype.doDeactivate = Ug.prototype.jk = function() {
        var a = this.b;
        a !== m && (this.cj(), this.va = this.$b = m, this.T = a.Kc = p)
    };
    Ug.prototype.doCancel = Ug.prototype.Oi = function() {
        this.rotate(this.cq);
        this.stopTool()
    };
    Ug.prototype.doMouseMove = Ug.prototype.Zg = function() {
        var a = this.b;
        this.T && a !== m && (a = this.computeRotate(a.F.C), this.rotate(a))
    };
    Ug.prototype.doMouseUp = Ug.prototype.Pe = function() {
        var a = this.b;
        if (this.T && a !== m) {
            var b = this.computeRotate(a.F.C);
            this.rotate(b);
            a.ai();
            this.ue = this.name;
            a.ga("PartRotated", this.va, this.cq)
        }
        this.stopTool()
    };
    Ug.prototype.rotate = Ug.prototype.rotate = function(a) {
        this.va !== m && (this.va.Qa = a, yf(this.b))
    };
    Ug.prototype.computeRotate = Ug.prototype.ZH = function(a) {
        var a = this.uA.Vh(a),
        b = this.va.Y;
        b && (a -= b.An(), 360 <= a ? a -= 360 : 0 > a && (a += 360));
        var b = Math.min(Math.abs(this.rD), 180),
        c = Math.min(Math.abs(this.qD), b / 2); ! this.b.F.shift && (0 < b && 0 < c) && (a % b < c ? a = Math.floor(a / b) * b: a % b > b - c && (a = (Math.floor(a / b) + 1) * b));
        360 <= a ? a -= 360 : 0 > a && (a += 360);
        return a
    };
    v.a(Ug, "snapAngleMultiple", Ug.prototype.rD);
    v.defineProperty(Ug, {
        rD: "snapAngleMultiple"
    },
    s("dx"),
    function(a) {
        this.dx !== a && (t && v.e(a, "number", Ug, "snapAngleMultiple"), this.dx = a)
    });
    v.a(Ug, "snapAngleEpsilon", Ug.prototype.qD);
    v.defineProperty(Ug, {
        qD: "snapAngleEpsilon"
    },
    s("cx"),
    function(a) {
        this.cx !== a && (t && v.e(a, "number", Ug, "snapAngleEpsilon"), this.cx = a)
    });
    function Wg() {
        zf.call(this);
        this.name = "ClickSelecting"
    }
    v.H("ClickSelectingTool", Wg);
    v.pa(Wg, zf);
    Wg.prototype.canStart = Wg.prototype.mf = function() {
        return ! this.isEnabled || this.b === m || this.isBeyondDragSize() ? p: h
    };
    Wg.prototype.doMouseUp = Wg.prototype.Pe = function() {
        this.T && (this.standardMouseSelect(), this.standardMouseClick());
        this.stopTool()
    };
    function Xg() {
        zf.call(this);
        this.name = "Action";
        this.Wl = m
    }
    v.H("ActionTool", Xg);
    v.pa(Xg, zf);
    Xg.prototype.canStart = Xg.prototype.mf = function() {
        if (!this.isEnabled) return p;
        var a = this.b;
        if (a === m) return p;
        var b = a.F,
        c = a.dd(b.C,
        function(a) {
            for (; a.Y !== m;) {
                if (a.Mu) return a;
                a = a.Y
            }
            return m
        },
        function(a) {
            return a.Mu
        });
        return c !== m ? (this.Wl = c, a.dm = a.dd(b.C, m, m), h) : p
    };
    Xg.prototype.doMouseDown = Xg.prototype.zu = function() {
        if (this.T) {
            var a = this.b.F,
            b = this.Wl;
            b !== m && (a.fd = b, b.yx !== m && b.yx(a, b))
        } else this.canStart() && this.doActivate()
    };
    Xg.prototype.doMouseMove = Xg.prototype.Zg = function() {
        if (this.T) {
            var a = this.b.F,
            b = this.Wl;
            b !== m && (a.fd = b, b.zx !== m && b.zx(a, b))
        }
    };
    Xg.prototype.doMouseUp = Xg.prototype.Pe = function() {
        if (this.T) {
            var a = this.b,
            b = a.F,
            c = this.Wl;
            if (c === m) return;
            b.fd = c;
            c.Ax !== m && c.Ax(b, c);
            this.isBeyondDragSize() || Af(c, b, a)
        }
        this.stopTool()
    };
    Xg.prototype.doCancel = Xg.prototype.Oi = function() {
        var a = this.b;
        if (a !== m) {
            var a = a.F,
            b = this.Wl;
            if (b === m) return;
            a.fd = b;
            b.xx !== m && b.xx(a, b)
        }
        this.stopTool()
    };
    Xg.prototype.doStop = Xg.prototype.Pi = function() {
        this.Wl = m
    };
    function wa() {
        zf.call(this);
        this.name = "ClickCreating";
        this.Vv = m;
        this.Bw = h
    }
    v.H("ClickCreatingTool", wa);
    v.pa(wa, zf);
    wa.prototype.canStart = wa.prototype.mf = function() {
        if (!this.isEnabled || this.Fx === m) return p;
        var a = this.b;
        if (a === m || (a.Pa || a.Ud) || !a.en || !a.F.left || this.isBeyondDragSize()) return p;
        if (this.iC) {
            if (2 !== a.F.Le) return p
        } else if (1 !== a.F.Le) return p;
        return a.sa !== this && a.ur(a.F.C, h) !== m ? p: h
    };
    wa.prototype.doMouseUp = wa.prototype.Pe = function() {
        var a = this.b;
        this.T && a !== m && this.insertPart(a.F.C);
        this.stopTool()
    };
    wa.prototype.insertPart = wa.prototype.rJ = function(a) {
        var b = this.b;
        if (b !== m) {
            var c = this.Fx;
            if (c !== m) {
                this.Nb(this.name);
                var d = m;
                c instanceof R ? c.Vd() && (of(c), d = c.copy(), d instanceof R && b.add(d)) : c !== m && (c = b.P.on(c), v.Oa(c) && (b.P.ju(c), d = b.gg(c)));
                d instanceof R && (d.location = a, b.Pd && b.select(d));
                b.ai();
                this.ue = this.name;
                b.ga("PartCreated", d);
                this.cj()
            }
        }
    };
    v.a(wa, "archetypeNodeData", wa.prototype.Fx);
    v.defineProperty(wa, {
        Fx: "archetypeNodeData"
    },
    s("Vv"),
    function(a) {
        this.Vv !== a && (a !== m && v.c(a, Object, wa, "archetypeNodeData"), this.Vv = a)
    });
    v.a(wa, "isDoubleClick", wa.prototype.iC);
    v.defineProperty(wa, {
        iC: "isDoubleClick"
    },
    s("Bw"),
    function(a) {
        this.Bw !== a && (v.e(a, "boolean", wa, "isDoubleClick"), this.Bw = a)
    });
    function Yg() {
        zf.call(this);
        this.name = "ContextMenu";
        this.Ez = m;
        this.fA = new D;
        this.gm = m;
        if (v.hx === h) {
            this.gm = new lf;
            this.gw = m;
            var a = this;
            this.NA = function() {
                a.stopTool()
            };
            if (v.Hz === p) {
                var b = document.createElement("div"),
                c = document.createElement("div");
                b.style.cssText = "top: 0px;z-index:300;position: fixed;display: none;text-align: center;left: 25%;width: 50%;background-color: #F5F5F5;padding: 16px;border: 16px solid #444;border-radius: 10px;margin-top: 10px";
                c.style.cssText = "z-index:299;position: fixed;display: none;top: 0;left: 0;width: 100%;height: 100%;background-color: black;-moz-opacity: 0.8;opacity:.80;filter: alpha(opacity=80);";
                var d = document.createElement("style");
                document.getElementsByTagName("head")[0].appendChild(d);
                d.sheet.insertRule(".defaultCXul { list-style: none; }", 0);
                d.sheet.insertRule(".defaultCXli {font:700 1.5em Helvetica, Arial, sans-serif;position: relative;min-width: 60px; }", 0);
                d.sheet.insertRule(".defaultCXa {color: #444;display: inline-block;padding: 6px;text-decoration: none;margin: 2px;border: 1px solid gray;border-radius: 10px; }", 0);
                b.addEventListener("contextmenu",
                function(a) {
                    a.preventDefault();
                    return p
                },
                p);
                b.addEventListener("selectstart",
                function(a) {
                    a.preventDefault();
                    return p
                },
                p);
                c.addEventListener("contextmenu",
                function(a) {
                    a.preventDefault();
                    return p
                },
                p);
                document.body && (document.body.appendChild(b), document.body.appendChild(c));
                v.Bs = b;
                v.As = c;
                v.Hz = h
            }
        }
    }
    v.H("ContextMenuTool", Yg);
    v.pa(Yg, zf);
    Yg.prototype.canStart = Yg.prototype.mf = function() {
        if (!this.isEnabled) return p;
        var a = this.b;
        return a === m || this.isBeyondDragSize() || !a.F.right ? p: this.gm !== m || this.findObjectWithContextMenu() !== m ? h: p
    };
    Yg.prototype.doStart = Yg.prototype.by = function() {
        var a = this.b;
        a !== m && this.fA.set(a.jc.C)
    };
    Yg.prototype.doStop = Yg.prototype.Pi = function() {
        this.hideDefaultContextMenu();
        this.hideContextMenu()
    };
    Yg.prototype.findObjectWithContextMenu = Yg.prototype.MI = function() {
        var a = this.b;
        if (a === m) return m;
        var b = a.dd(a.F.C, m,
        function(a) {
            return ! a.ta.Tc
        });
        if (b !== m) {
            for (a = b; a !== m;) {
                var c = a.contextMenu;
                if (c !== m) return a;
                a = a.Y
            }
            if (this.gm !== m) return b.W
        } else if (c = a.contextMenu, c !== m) return a;
        return m
    };
    Yg.prototype.doActivate = Yg.prototype.Xh = aa();
    Yg.prototype.doMouseDown = Yg.prototype.zu = function() {
        if (this.T) {
            var a = this.b;
            if (a !== m && this.he !== m) {
                var b = a.dd(a.F.C, m, m);
                b !== m && b.ci(this.he) ? (this.standardMouseClick(m, m), this.stopTool()) : (this.stopTool(), a.sa.doMouseDown())
            }
        }
    };
    Yg.prototype.doMouseUp = Yg.prototype.Pe = function() { ! this.T && this.canStart() && (this.T = h);
        this.standardMouseSelect();
        this.standardMouseClick();
        var a = this.findObjectWithContextMenu();
        if (a !== m) {
            var b = a.contextMenu;
            b !== m ? this.showContextMenu(b, a instanceof P ? a: m) : this.showDefaultContextMenu()
        } else this.showDefaultContextMenu()
    };
    Yg.prototype.doMouseMove = Yg.prototype.Zg = function() {
        this.T && this.standardMouseOver()
    };
    Yg.prototype.showContextMenu = Yg.prototype.uK = function(a, b) {
        v.c(a, lf, Yg, "showContextMenu:contextmenu");
        b !== m && v.c(b, P, Yg, "showContextMenu:obj");
        var c = this.b;
        if (c !== m) {
            a !== this.he && this.hideContextMenu();
            a.Ed = "Tool";
            a.sk = p;
            c.add(a);
            if (b !== m) {
                var d = m,
                e = b.wr();
                e !== m && (d = e.data);
                a.Od = b;
                a.data = d
            } else a.data = c.P;
            a.Yh();
            this.positionContextMenu(a, b);
            this.he = a;
            yf(c)
        }
    };
    Yg.prototype.positionContextMenu = Yg.prototype.cK = function(a) {
        var b = this.b;
        if (b !== m) {
            var c = b.F.C.copy(),
            d = a.na,
            b = b.ob;
            c.x + d.width > b.right && (c.x -= d.width + 5);
            c.y + d.height > b.bottom && (c.y -= d.height + 5);
            a.position = c
        }
    };
    Yg.prototype.hideContextMenu = Yg.prototype.jJ = function() {
        var a = this.b;
        a !== m && this.he !== m && (this.he.data = m, this.he.Od = m, a.remove(this.he), this.he = m, this.standardMouseOver(), yf(a))
    };
    Yg.prototype.initializeDefaultButtons = Yg.prototype.nJ = function() {
        if (this.b === m) return m;
        var a = new y,
        b = this.b.Ad;
        a.add({
            text: "Copy",
            nf: function() {
                b.copySelection()
            },
            visible: function() {
                return b.canCopySelection()
            }
        });
        a.add({
            text: "Cut",
            nf: function() {
                b.cutSelection()
            },
            visible: function() {
                return b.canCutSelection()
            }
        });
        a.add({
            text: "Delete",
            nf: function() {
                b.deleteSelection()
            },
            visible: function() {
                return b.canDeleteSelection()
            }
        });
        a.add({
            text: "Paste",
            nf: function(a) {
                b.pasteSelection(a.F.C)
            },
            visible: function() {
                return b.canPasteSelection()
            }
        });
        a.add({
            text: "Select All",
            nf: function() {
                b.selectAll()
            },
            visible: function() {
                return b.canSelectAll()
            }
        });
        a.add({
            text: "Undo",
            nf: function() {
                b.undo()
            },
            visible: function() {
                return b.canUndo()
            }
        });
        a.add({
            text: "Redo",
            nf: function() {
                b.redo()
            },
            visible: function() {
                return b.canRedo()
            }
        });
        a.add({
            text: "Zoom Out",
            nf: function() {
                b.decreaseZoom()
            },
            visible: function() {
                return b.canDecreaseZoom()
            }
        });
        a.add({
            text: "Zoom In",
            nf: function() {
                b.increaseZoom()
            },
            visible: function() {
                return b.canIncreaseZoom()
            }
        });
        a.add({
            text: "Reset Zoom",
            nf: function() {
                b.resetZoom()
            },
            visible: function() {
                return b.canResetZoom()
            }
        });
        a.add({
            text: "Group Selection",
            nf: function() {
                b.groupSelection()
            },
            visible: function() {
                return b.canGroupSelection()
            }
        });
        a.add({
            text: "Ungroup Selection",
            nf: function() {
                b.ungroupSelection()
            },
            visible: function() {
                return b.canUngroupSelection()
            }
        });
        a.add({
            text: "Edit Text",
            nf: function() {
                b.editTextBlock()
            },
            visible: function() {
                return b.canEditTextBlock()
            }
        });
        return a
    };
    Yg.prototype.showDefaultContextMenu = Yg.prototype.vK = function() {
        var a = this.b;
        if (a !== m) {
            this.gw === m && (this.gw = this.initializeDefaultButtons());
            this.gm !== this.he && this.hideContextMenu();
            v.Bs.innerHTML = "";
            v.As.addEventListener("click", this.NA, p);
            var b = this,
            c = document.createElement("ul");
            c.className = "defaultCXul";
            v.Bs.appendChild(c);
            c.innerHTML = "";
            for (var d = this.gw.f; d.next();) {
                var e = d.value,
                g = e.text,
                i = e.visible;
                if ("function" !== typeof i || i()) {
                    i = document.createElement("li");
                    i.className = "defaultCXli";
                    var j = document.createElement("a");
                    j.className = "defaultCXa";
                    j.href = "#";
                    j.WD = e.nf;
                    j.addEventListener("click",
                    function(c) {
                        this.WD(a);
                        b.stopTool();
                        c.preventDefault();
                        return p
                    },
                    p);
                    j.textContent = g;
                    i.appendChild(j);
                    c.appendChild(i)
                }
            }
            v.Bs.style.display = "block";
            v.As.style.display = "block";
            this.he = this.gm
        }
    };
    Yg.prototype.hideDefaultContextMenu = Yg.prototype.kJ = function() {
        this.he !== m && this.he === this.gm && (v.Bs.style.display = "none", v.As.style.display = "none", v.As.removeEventListener("click", this.NA, p), this.he = m)
    };
    v.a(Yg, "currentContextMenu", Yg.prototype.he);
    v.defineProperty(Yg, {
        he: "currentContextMenu"
    },
    s("Ez"), ba("Ez"));
    v.m(Yg, {
        TJ: "mouseDownPoint"
    },
    s("fA"));
    function Zg() {
        zf.call(this);
        this.name = "DragSelecting";
        this.hm = 175;
        this.aA = p;
        var a = new R;
        a.Ed = "Tool";
        a.sk = p;
        var b = new V;
        b.name = "Shape";
        b.Xa = "Rectangle";
        b.fill = m;
        b.stroke = "magenta";
        b.position = new D(0, 0);
        a.add(b);
        this.$l = a
    }
    v.H("DragSelectingTool", Zg);
    v.pa(Zg, zf);
    Zg.prototype.canStart = Zg.prototype.mf = function() {
        if (!this.isEnabled) return p;
        var a = this.b;
        if (a === m || !a.Pd) return p;
        var b = a.F;
        return ! b.left || a.sa !== this && (!this.isBeyondDragSize() || b.timestamp - a.jc.timestamp < this.xu || a.ur(b.C, h) !== m) ? p: h
    };
    Zg.prototype.doActivate = Zg.prototype.Xh = function() {
        var a = this.b;
        a !== m && (this.T = h, a.Kc = h, a.nb = h, a.add(this.cg))
    };
    Zg.prototype.doDeactivate = Zg.prototype.jk = function() {
        var a = this.b;
        a !== m && (a.remove(this.cg), a.nb = p, this.T = a.Kc = p, yf(a))
    };
    Zg.prototype.doMouseMove = Zg.prototype.Zg = function() {
        var a = this.b;
        if (a !== m && this.T && this.cg !== m) {
            var b = this.computeBoxBounds();
            this.cg.Re("Shape").ma = b.size;
            this.cg.position = b.position;
            yf(a)
        }
    };
    Zg.prototype.doMouseUp = Zg.prototype.Pe = function() {
        if (this.T) {
            var a = this.b;
            a.remove(this.cg);
            try {
                a.xc = "wait",
                this.selectInRect(this.computeBoxBounds())
            } finally {
                a.xc = ""
            }
        }
        this.stopTool()
    };
    Zg.prototype.computeBoxBounds = Zg.prototype.PH = function() {
        var a = this.b;
        return a === m ? new E(0, 0, 0, 0) : new E(a.jc.C, a.F.C)
    };
    Zg.prototype.selectInRect = Zg.prototype.sK = function(a) {
        var b = this.b;
        if (b !== m) {
            var c = b.F;
            b.ga("ChangingSelection");
            a = b.xl(a, m,
            function(a) {
                return a instanceof R && a.Kx()
            },
            this.mC);
            if (c.hk) if (c.shift) for (a = a.f; a.next();) c = a.value,
            c.Ha && (c.Ha = p);
            else for (a = a.f; a.next();) c = a.value,
            c.Ha = !c.Ha;
            else {
                if (!c.shift) {
                    for (var d = new y(R), e = b.selection.f; e.next();) c = e.value,
                    a.contains(c) || d.add(c);
                    for (d = d.f; d.next();) c = d.value,
                    c.Ha = p
                }
                for (a = a.f; a.next();) c = a.value,
                c.Ha || (c.Ha = h)
            }
            b.ga("ChangedSelection")
        }
    };
    v.a(Zg, "delay", Zg.prototype.xu);
    v.defineProperty(Zg, {
        xu: "delay"
    },
    s("hm"), ba("hm"));
    v.a(Zg, "isPartialInclusion", Zg.prototype.mC);
    v.defineProperty(Zg, {
        mC: "isPartialInclusion"
    },
    s("aA"), ba("aA"));
    v.a(Zg, "box", Zg.prototype.cg);
    v.defineProperty(Zg, {
        cg: "box"
    },
    s("$l"), ba("$l"));
    function $g() {
        zf.call(this);
        this.name = "Panning";
        this.rA = new D;
        this.ji = p;
        var a = this;
        this.CA = function() {
            document.removeEventListener("scroll", a.CA, p);
            a.stopTool()
        }
    }
    v.H("PanningTool", $g);
    v.pa($g, zf);
    $g.prototype.canStart = $g.prototype.mf = function() {
        if (!this.isEnabled) return p;
        var a = this.b;
        return a === m || !a.Je && !a.Ke || !a.F.left || a.sa !== this && !this.isBeyondDragSize() ? p: h
    };
    $g.prototype.doActivate = $g.prototype.Xh = function() {
        var a = this.b;
        a !== m && (this.ji ? (a.F.bubbles = h, document.addEventListener("scroll", this.CA, p)) : (a.xc = "move", a.Kc = h, this.rA = a.position), this.T = h)
    };
    $g.prototype.doDeactivate = $g.prototype.jk = function() {
        var a = this.b;
        a !== m && (a.xc = "", this.T = a.Kc = p)
    };
    $g.prototype.doCancel = $g.prototype.Oi = function() {
        var a = this.b;
        a !== m && (a.position = this.rA, a.Kc = p);
        this.stopTool()
    };
    $g.prototype.doMouseMove = $g.prototype.Zg = function() {
        var a = this.b;
        if (this.T && a) if (this.ji) a.F.bubbles = h;
        else {
            var b = a.position,
            c = a.jc.C,
            d = a.F.C,
            e = b.x + c.x - d.x,
            c = b.y + c.y - d.y;
            a.Je || (e = b.x);
            a.Ke || (c = b.y);
            a.position = new D(e, c);
            a.update()
        }
    };
    v.a($g, "bubbles", $g.prototype.bubbles);
    v.defineProperty($g, {
        bubbles: "bubbles"
    },
    s("ji"), ba("ji"));
    function ah() {
        zf.call(this);
        this.name = "TextEditing";
        this.hw = this.Gz = this.qx = m;
        this.gx = bh;
        this.Ei = m;
        this.Ka = ch;
        this.Rj = m
    }
    v.H("TextEditingTool", ah);
    v.pa(ah, zf);
    var dh;
    ah.LostFocus = dh = v.l(ah, "LostFocus", 0);
    var eh;
    ah.MouseDown = eh = v.l(ah, "MouseDown", 1);
    var fh;
    ah.Tab = fh = v.l(ah, "Tab", 2);
    var gh;
    ah.Enter = gh = v.l(ah, "Enter", 3);
    ah.SingleClick = v.l(ah, "SingleClick", 0);
    var bh;
    ah.SingleClickSelected = bh = v.l(ah, "SingleClickSelected", 1);
    var ch = v.l(ah, "StateNone", 0),
    hh = v.l(ah, "StateActive", 1),
    ih = v.l(ah, "StateEditing", 2),
    jh = v.l(ah, "StateEditing2", 3),
    kh = v.l(ah, "StateValidating", 4),
    lh = v.l(ah, "StateValidated", 5);
    v.a(ah, "textBlock", ah.prototype.Cf);
    v.defineProperty(ah, {
        Cf: "textBlock"
    },
    s("qx"), ba("qx"));
    v.a(ah, "currentTextEditor", ah.prototype.dg);
    v.defineProperty(ah, {
        dg: "currentTextEditor"
    },
    s("Gz"), ba("Gz"));
    v.a(ah, "defaultTextEditor", ah.prototype.AB);
    v.defineProperty(ah, {
        AB: "defaultTextEditor"
    },
    s("hw"), ba("hw"));
    v.a(ah, "starting", ah.prototype.sD);
    v.defineProperty(ah, {
        sD: "starting"
    },
    s("gx"),
    function(a) {
        this.gx !== a && (t && v.Va(a, ah, ah, "starting"), this.gx = a)
    });
    ah.prototype.canStart = ah.prototype.mf = function() {
        if (!this.isEnabled) return p;
        var a = this.b;
        if (a === m || a.Pa || !a.F.left || this.isBeyondDragSize()) return p;
        a = a.dd(a.F.C, m,
        function(a) {
            return a instanceof qa
        });
        if (! (a instanceof qa) || !a.Au) return p;
        a = a.W;
        return a === m || this.sD === bh && !a.Ha ? p: h
    };
    ah.prototype.doStart = ah.prototype.by = function() { ! this.T && this.Cf !== m && this.doActivate()
    };
    ah.prototype.doActivate = ah.prototype.Xh = function() {
        if (!this.T) {
            var a = this.b;
            if (a !== m) {
                var b = this.Cf;
                b === m && (b = a.dd(a.F.C,
                function(a) {
                    return a instanceof qa ? a: m
                }), b = b instanceof qa ? b: m);
                if (b !== m && (this.Cf = b, b.W !== m)) {
                    this.T = h;
                    this.Ka = hh;
                    this.Nb(this.name);
                    var c = this.AB,
                    d = p;
                    b.ez !== m && (c = b.ez);
                    c !== m && !c.tz && (d = h);
                    if (c === m) {
                        c = document.createElement("textarea");
                        c.tz = h;
                        this.hw = c;
                        var e = this.Cf.copy();
                        c.addEventListener("input",
                        function() {
                            e.text = this.value;
                            mh(e, Infinity, Infinity);
                            this.style.width = 20 + e.na.width * this.OG + "px";
                            this.rows = e.Vk
                        },
                        p);
                        c.addEventListener("keydown",
                        function(a) {
                            var b = a.which,
                            c = this.textEditingTool;
                            if (c !== m) if (13 == b) c.wx(gh);
                            else {
                                if (9 == b) return c.wx(fh),
                                a.preventDefault(),
                                p;
                                27 == b && (c.doCancel(), c.b && c.b.focus())
                            }
                        },
                        p);
                        c.addEventListener("focus",
                        function() {
                            var a = this.textEditingTool;
                            a.Ka === hh ? a.Ka = ih: a.Ka === lh ? a.Ka = jh: a.Ka === jh && (a.Ka = ih)
                        },
                        p)
                    }
                    if (c.tz) {
                        var g = b.zb(mc),
                        i = a.position,
                        j = a.scale,
                        k = b.yl() * j,
                        l = b.ua.width * k;
                        nh(b, b.font);
                        g = new D((g.x - i.x) * j, (g.y - i.y) * j);
                        c.value = b.text;
                        a.Wh.style.font = b.font;
                        c.style.font = "inherit";
                        c.style.fontSize = 100 * k + "%";
                        c.style.lineHeight = "normal";
                        l = 20 + l;
                        c.style.width = l + "px";
                        c.style.height = "";
                        c.rows = b.Vk;
                        a.Wh.appendChild(c);
                        c.style.left = (g.x - l / 2 | 0) + "px";
                        c.style.top = (g.y - c.clientHeight / 2 | 0) + "px";
                        c.style.textAlign = b.textAlign
                    } else a.Wh.appendChild(c);
                    c.style.position = "absolute";
                    c.style.zIndex = 100;
                    c.className = "start";
                    c.textEditingTool = this;
                    c.OG = k;
                    if (d && c.onActivate !== f) c.onActivate();
                    this.dg = c;
                    c.focus()
                }
            }
        }
    };
    ah.prototype.doCancel = ah.prototype.Oi = function() {
        this.Rj !== m && (this.dg.style.border = this.Rj, this.Rj = m);
        this.stopTool()
    };
    ah.prototype.doMouseUp = ah.prototype.Pe = function() { ! this.T && this.canStart() && this.doActivate()
    };
    ah.prototype.doMouseDown = ah.prototype.zu = function() {
        this.T && this.wx(eh)
    };
    ah.prototype.acceptText = ah.prototype.wx = function(a) {
        switch (a) {
        case eh:
            if (this.Ka === lh || this.Ka === jh) this.dg.focus();
            else if (this.Ka === hh || this.Ka === ih) this.Ka = kh,
            oh(this);
            break;
        case dh:
        case gh:
        case fh:
            if (gh === a && this.qx.Pu === h) break;
            if (this.Ka === hh || this.Ka === ih) this.Ka = kh,
            oh(this)
        }
    };
    function oh(a) {
        if (a.Cf !== m && a.dg !== m) {
            var b = a.Cf,
            c = a.Cf.text,
            d = a.dg.value,
            e = "",
            e = "function" === typeof d ? d() : d;
            if (!a.isValidText(a.Cf, c, e)) {
                a.Ka = ih;
                b.qr !== m && b.qr(a, c, e);
                a.Rj === m && (a.Rj = a.dg.style.border, a.dg.style.border = "3px solid red");
                a.dg.focus();
                return
            }
            a.Ka = lh;
            c !== e && (a.Cf.text = e);
            a.ue = a.name;
            b = a.b;
            b !== m && b.ga("TextEdited", a.Cf, c);
            a.stopTool();
            b !== m && b.focus()
        }
        a.Rj !== m && (a.dg.style.border = a.Rj, a.Rj = m)
    }
    ah.prototype.doDeactivate = ah.prototype.jk = function() {
        var a = this.b;
        if (a !== m) {
            this.T && this.cj();
            this.Ka = ch;
            this.Cf = m;
            if (this.dg !== m) {
                var b = this.dg;
                if (b.onDeactivate !== f) b.onDeactivate();
                b !== m && a.Wh.removeChild(b)
            }
            this.T = p
        }
    };
    ah.prototype.isValidText = ah.prototype.CJ = function(a, b, c) {
        v.c(a, qa, ah, "isValidText:textblock");
        var d = this.gs;
        if (d !== m && !d(a, b, c)) return p;
        d = a.gs;
        return d !== m && !d(a, b, c) ? p: h
    };
    v.a(ah, "textValidation", ah.prototype.gs);
    v.defineProperty(ah, {
        gs: "textValidation"
    },
    s("Ei"),
    function(a) {
        this.Ei !== a && (this.Ei = a)
    });
    function jf() {
        zf.call(this);
        this.name = "ToolManager";
        this.gA = new y(zf);
        this.hA = new y(zf);
        this.iA = new y(zf);
        this.Tz = this.Uz = 1E3;
        this.Is = this.ew = m;
        this.jA = Cf
    }
    v.H("ToolManager", jf);
    v.pa(jf, zf);
    var Cf;
    jf.WheelScroll = Cf = v.l(jf, "WheelScroll", 0);
    var Bf;
    jf.WheelZoom = Bf = v.l(jf, "WheelZoom", 1);
    v.a(jf, "mouseWheelBehavior", jf.prototype.Fl);
    v.defineProperty(jf, {
        Fl: "mouseWheelBehavior"
    },
    s("jA"), ba("jA"));
    jf.prototype.initializeStandardTools = jf.prototype.oJ = function() {
        this.RA = new Xg;
        this.TC = new yg;
        this.tC = new Bg;
        this.bD = new Mg;
        this.fD = new Ug;
        this.vC = new ua;
        this.ie = new Ef;
        this.IB = new Zg;
        this.LC = new $g;
        this.mB = new Yg;
        this.kv = new ah;
        this.iB = new wa;
        this.jB = new Wg
    };
    jf.prototype.doMouseDown = jf.prototype.zu = function() {
        var a = this.b;
        if (a !== m) {
            var b = a.da;
            b.Mx && 0 !== b.wk && v.trace("WARNING: In ToolManager.doMouseDown: UndoManager.transactionLevel is not zero");
            for (var b = this.oe.length,
            c = 0; c < b; c++) {
                var d = this.oe.Z(c);
                if (d.canStart()) {
                    a.sa = d;
                    a.sa === d && (d.T || d.doActivate(), d.doMouseDown());
                    return
                }
            }
            1 === a.F.button && (this.Fl === Cf ? this.Fl = Bf: this.Fl === Bf && (this.Fl = Cf));
            this.doActivate();
            this.standardWaitAfter(this.ny)
        }
    };
    jf.prototype.doMouseMove = jf.prototype.Zg = function() {
        var a = this.b;
        if (a !== m) {
            if (this.T) for (var b = this.ig.length,
            c = 0; c < b; c++) {
                var d = this.ig.Z(c);
                if (d.canStart()) {
                    a.sa = d;
                    a.sa === d && (d.T || d.doActivate(), d.doMouseMove());
                    return
                }
            }
            this.standardMouseOver();
            this.isBeyondDragSize() && this.standardWaitAfter(this.T ? this.ny: this.dC)
        }
    };
    jf.prototype.doCurrentObjectChanged = jf.prototype.oF = function(a, b) {
        var c = this.ik;
        c !== m && !(b !== m && (b === c || b.ci(c))) && this.hideToolTip()
    };
    jf.prototype.doWaitAfter = jf.prototype.sF = function() {
        this.b && this.b.oa && (this.doMouseHover(), this.T || this.doToolTip())
    };
    jf.prototype.doMouseHover = jf.prototype.nI = function() {
        var a = this.b;
        if (a !== m) {
            var b = a.F;
            b.fd === m && (b.fd = a.dd(b.C, m, m));
            var c = b.fd;
            if (c !== m) for (; c !== m;) {
                a = this.T ? c.Qr: c.Rr;
                if (a !== m && (a(b, c), b.Bd)) break;
                c = c.Y
            } else a = this.T ? a.Qr: a.Rr,
            a !== m && a(b)
        }
    };
    jf.prototype.doToolTip = jf.prototype.oI = function() {
        var a = this.b;
        if (a !== m) {
            var b = a.F;
            b.fd === m && (b.fd = a.dd(b.C, m, m));
            b = b.fd;
            if (b !== m) {
                if (! (b === this.ik || b.ci(this.ik))) {
                    for (; b !== m;) {
                        a = b.js;
                        if (a !== m) {
                            this.showToolTip(a, b);
                            return
                        }
                        b = b.Y
                    }
                    this.hideToolTip()
                }
            } else a = a.js,
            a !== m ? this.showToolTip(a, m) : this.hideToolTip()
        }
    };
    jf.prototype.showToolTip = jf.prototype.wK = function(a, b) {
        v.c(a, lf, jf, "showToolTip:tooltip");
        b !== m && v.c(b, P, jf, "showToolTip:obj");
        var c = this.b;
        if (c !== m) {
            a !== this.ik && this.hideToolTip();
            a.Ed = "Tool";
            a.sk = p;
            c.add(a);
            if (b !== m && b !== this.Is) {
                var d = m,
                e = b.W;
                e !== m && (d = e.data);
                a.Od = b;
                a.data = d
            } else b === m && (a.data = c.P);
            if (b === m || b !== this.Is) a.Yh(),
            this.positionToolTip(a, b);
            this.ew = a;
            this.Is = b;
            yf(c)
        }
    };
    jf.prototype.positionToolTip = jf.prototype.dK = function(a) {
        var b = this.b;
        if (b !== m) {
            var c = b.F.C.copy(),
            d = a.na,
            b = b.ob;
            c.x + d.width > b.right && (c.x -= d.width + 5);
            c.y = c.y + 20 + d.height > b.bottom ? c.y - (d.height + 5) : c.y + 20;
            a.position = c
        }
    };
    jf.prototype.hideToolTip = jf.prototype.lJ = function() {
        if (this.ik !== m) {
            var a = this.b;
            a !== m && (this.ik.data = m, this.ik.Od = m, a.remove(this.ik), this.Is = this.ew = m, yf(a))
        }
    };
    v.m(jf, {
        ik: "currentToolTip"
    },
    s("ew"));
    jf.prototype.doMouseUp = jf.prototype.Pe = function() {
        this.cancelWaitAfter();
        if (this.T) {
            var a = this.b;
            if (a === m) return;
            for (var b = this.jg.length,
            c = 0; c < b; c++) {
                var d = this.jg.Z(c);
                if (d.canStart()) {
                    a.sa = d;
                    a.sa === d && (d.T || d.doActivate(), d.doMouseUp());
                    return
                }
            }
        }
        this.doDeactivate()
    };
    jf.prototype.doMouseWheel = jf.prototype.pF = function() {
        this.standardMouseWheel()
    };
    jf.prototype.doKeyDown = jf.prototype.$x = function() {
        var a = this.b;
        a !== m && a.Ad.doKeyDown()
    };
    jf.prototype.doKeyUp = jf.prototype.ay = function() {
        var a = this.b;
        a !== m && a.Ad.doKeyUp()
    };
    jf.prototype.doCancel = jf.prototype.Oi = function() {
        Hf !== m && Hf.doCancel();
        zf.prototype.Oi.call(this)
    };
    jf.prototype.findTool = jf.prototype.Se = function(a) {
        v.e(a, "string", jf, "findTool:name");
        for (var b = this.oe.length,
        c = 0; c < b; c++) {
            var d = this.oe.Z(c);
            if (d.name === a) return d
        }
        b = this.ig.length;
        for (c = 0; c < b; c++) if (d = this.ig.Z(c), d.name === a) return d;
        b = this.jg.length;
        for (c = 0; c < b; c++) if (d = this.jg.Z(c), d.name === a) return d;
        return m
    };
    jf.prototype.replaceTool = jf.prototype.xG = function(a, b) {
        v.e(a, "string", jf, "replaceTool:name");
        b !== m && (v.c(b, zf, jf, "replaceTool:newtool"), b.b && b.b !== this.b && v.g("Cannot share tools between Diagrams: " + b.toString()), b.yf(this.b));
        for (var c = this.oe.length,
        d = 0; d < c; d++) {
            var e = this.oe.Z(d);
            if (e.name === a) return b !== m ? this.oe.ev(d, b) : this.oe.qe(d),
            e
        }
        c = this.ig.length;
        for (d = 0; d < c; d++) if (e = this.ig.Z(d), e.name === a) return b !== m ? this.ig.ev(d, b) : this.ig.qe(d),
        e;
        c = this.jg.length;
        for (d = 0; d < c; d++) if (e = this.jg.Z(d), e.name === a) return b !== m ? this.jg.ev(d, b) : this.jg.qe(d),
        e;
        return m
    };
    function vh(a, b, c, d) {
        v.e(b, "string", jf, "replaceStandardTool:name");
        v.c(d, y, jf, "replaceStandardTool:list");
        c !== m && (v.c(c, zf, jf, "replaceStandardTool:newtool"), c.b && c.b !== a.b && v.g("Cannot share tools between Diagrams: " + c.toString()), c.name = b, c.yf(a.b));
        a.Se(b) ? a.xG(b, c) : c !== m && d.add(c)
    }
    v.m(jf, {
        oe: "mouseDownTools"
    },
    s("gA"));
    v.m(jf, {
        ig: "mouseMoveTools"
    },
    s("hA"));
    v.m(jf, {
        jg: "mouseUpTools"
    },
    s("iA"));
    v.a(jf, "hoverDelay", jf.prototype.dC);
    v.defineProperty(jf, {
        dC: "hoverDelay"
    },
    s("Uz"), ba("Uz"));
    v.a(jf, "holdDelay", jf.prototype.ny);
    v.defineProperty(jf, {
        ny: "holdDelay"
    },
    s("Tz"), ba("Tz"));
    v.a(jf, "actionTool", jf.prototype.RA);
    v.defineProperty(jf, {
        RA: "actionTool"
    },
    function() {
        return this.Se("Action")
    },
    function(a) {
        vh(this, "Action", a, this.oe)
    });
    v.a(jf, "relinkingTool", jf.prototype.TC);
    v.defineProperty(jf, {
        TC: "relinkingTool"
    },
    function() {
        return this.Se("Relinking")
    },
    function(a) {
        vh(this, "Relinking", a, this.oe)
    });
    v.a(jf, "linkReshapingTool", jf.prototype.tC);
    v.defineProperty(jf, {
        tC: "linkReshapingTool"
    },
    function() {
        return this.Se("LinkReshaping")
    },
    function(a) {
        vh(this, "LinkReshaping", a, this.oe)
    });
    v.a(jf, "resizingTool", jf.prototype.bD);
    v.defineProperty(jf, {
        bD: "resizingTool"
    },
    function() {
        return this.Se("Resizing")
    },
    function(a) {
        vh(this, "Resizing", a, this.oe)
    });
    v.a(jf, "rotatingTool", jf.prototype.fD);
    v.defineProperty(jf, {
        fD: "rotatingTool"
    },
    function() {
        return this.Se("Rotating")
    },
    function(a) {
        vh(this, "Rotating", a, this.oe)
    });
    v.a(jf, "linkingTool", jf.prototype.vC);
    v.defineProperty(jf, {
        vC: "linkingTool"
    },
    function() {
        return this.Se("Linking")
    },
    function(a) {
        vh(this, "Linking", a, this.ig)
    });
    v.a(jf, "draggingTool", jf.prototype.ie);
    v.defineProperty(jf, {
        ie: "draggingTool"
    },
    function() {
        return this.Se("Dragging")
    },
    function(a) {
        vh(this, "Dragging", a, this.ig)
    });
    v.a(jf, "dragSelectingTool", jf.prototype.IB);
    v.defineProperty(jf, {
        IB: "dragSelectingTool"
    },
    function() {
        return this.Se("DragSelecting")
    },
    function(a) {
        vh(this, "DragSelecting", a, this.ig)
    });
    v.a(jf, "panningTool", jf.prototype.LC);
    v.defineProperty(jf, {
        LC: "panningTool"
    },
    function() {
        return this.Se("Panning")
    },
    function(a) {
        vh(this, "Panning", a, this.ig)
    });
    v.a(jf, "contextMenuTool", jf.prototype.mB);
    v.defineProperty(jf, {
        mB: "contextMenuTool"
    },
    function() {
        return this.Se("ContextMenu")
    },
    function(a) {
        vh(this, "ContextMenu", a, this.jg)
    });
    v.a(jf, "textEditingTool", jf.prototype.kv);
    v.defineProperty(jf, {
        kv: "textEditingTool"
    },
    function() {
        return this.Se("TextEditing")
    },
    function(a) {
        vh(this, "TextEditing", a, this.jg)
    });
    v.a(jf, "clickCreatingTool", jf.prototype.iB);
    v.defineProperty(jf, {
        iB: "clickCreatingTool"
    },
    function() {
        return this.Se("ClickCreating")
    },
    function(a) {
        vh(this, "ClickCreating", a, this.jg)
    });
    v.a(jf, "clickSelectingTool", jf.prototype.jB);
    v.defineProperty(jf, {
        jB: "clickSelectingTool"
    },
    function() {
        return this.Se("ClickSelecting")
    },
    function(a) {
        vh(this, "ClickSelecting", a, this.jg)
    });
    function ff() {
        v.Ob(this);
        this.L = m;
        this.Db = new y(R);
        this.wb = "";
        this.Dw = p;
        this.Ug = this.qj = this.pj = this.oj = this.nj = this.lj = this.kj = this.mj = this.jj = this.sj = this.ij = this.rj = this.hj = this.gj = h;
        this.gE = []
    }
    v.H("Layer", ff);
    ff.prototype.yf = ba("L");
    ff.prototype.toString = function(a) {
        a === f && (a = 0);
        var b = 'Layer "' + this.name + '"';
        if (0 >= a) return b;
        for (var c = 0,
        d = 0,
        e = 0,
        g = 0,
        i = 0,
        j = this.Db.f; j.next();) {
            var k = j.value;
            k instanceof mf ? e++:k instanceof S ? d++:k instanceof U ? g++:k instanceof lf ? i++:c++
        }
        j = "";
        0 < c && (j += c + " Parts ");
        0 < d && (j += d + " Nodes ");
        0 < e && (j += e + " Groups ");
        0 < g && (j += g + " Links ");
        0 < i && (j += i + " Adornments ");
        if (1 < a) for (c = this.Db.f; c.next();) d = c.value,
        j += "\n " + d.toString(a - 1),
        (e = d.data) && v.kc(e) && (j += " #" + v.kc(e)),
        d instanceof S ? j += " " + Ge(e) : d instanceof U && (j += " " + Ge(d.ea) + " " + Ge(d.ia));
        return b + " " + this.Db.count + ": " + j
    };
    ff.prototype.findObjectAt = ff.prototype.dd = function(a, b, c) {
        b === f && (b = m);
        c === f && (c = m);
        var d = this.Db,
        e = p;
        this.b.ob.fa(a) && (e = h);
        for (var g = new D,
        i = d.length; i--;) {
            var j = d.Z(i);
            if (! (e === h && j.bf === p) && j.eb() && (lb(g.set(a), j.ge), j = j.dd(g, b, c), j !== m && (b !== m && (j = b(j)), j && (c === m || c(j))))) return j
        }
        return m
    };
    ff.prototype.findObjectsAt = ff.prototype.xn = function(a, b, c, d) {
        b === f && (b = m);
        c === f && (c = m); ! (d instanceof y) && !(d instanceof pa) && (d = new y(P));
        var e = this.Db,
        g = p;
        this.b.ob.fa(a) && (g = h);
        for (var i = new D,
        j = e.length; j--;) {
            var k = e.Z(j); ! (g === h && k.bf === p) && k.eb() && (lb(i.set(a), k.ge), k.xn(i, b, c, d) && (b !== m && (k = b(k)), k && (c === m || c(k)) && d.add(k)))
        }
        return d
    };
    ff.prototype.findObjectsIn = ff.prototype.xl = function(a, b, c, d, e) {
        b === f && (b = m);
        c === f && (c = m);
        d === f && (d = p); ! (e instanceof y) && !(e instanceof pa) && (e = new y(P));
        var g = this.Db,
        i = p;
        this.b.ob.pl(a) && (i = h);
        for (var j = g.length; j--;) {
            var k = g.Z(j); ! (i === h && k.bf === p) && (k.eb() && k.xl(a, b, c, d, e)) && (b !== m && (k = b(k)), k && (c === m || c(k)) && e.add(k))
        }
        return e
    };
    ff.prototype.findObjectsNear = ff.prototype.yn = function(a, b, c, d, e) {
        c === f && (c = m);
        d === f && (d = m); ! (e instanceof y) && !(e instanceof pa) && (e = new y(P));
        var g = this.Db,
        i = p;
        this.b.ob.fa(a) && (i = h);
        for (var j = new D,
        k = g.length; k--;) {
            var l = g.i[k];
            if (! (i === h && l.bf === p) && l.eb()) {
                lb(j.set(a), l.ge);
                var n = new D(a.x + b, a.y);
                lb(n, l.ge);
                l.yn(j, n, c, d, e) && (c !== m && (l = c(l)), l && (d === m || d(l)) && e.add(l))
            }
        }
        return e
    };
    da = ff.prototype;
    da.fg = function(a, b) {
        if (this.visible) {
            var c = this.Db,
            d = b.ob,
            e = [];
            if (b.vm) for (var g = c.length,
            i = 0; i < g; i++) {
                var j = c.i[i];
                j.eE = i;
                if (j instanceof U && ((j.Ci === Qf || j.Ci === wh) && e.push(j), j.hl === p)) continue;
                j.la.Te(d) ? (j.fg(a, b), j.bf = h) : j.bf = p
            } else {
                g = c.length;
                for (i = 0; i < g; i++) if (j = c.i[i], j.bf) {
                    if (j instanceof U && ((j.Ci === Qf || j.Ci === wh) && e.push(j), j.hl === p)) continue;
                    j.fg(a, b)
                }
            }
            this.gE = e
        }
    };
    da.d = function(a, b, c, d, e) {
        var g = this.b;
        g !== m && g.Yd(De, a, this, b, c, d, e)
    };
    da.lk = function(a, b, c) {
        var d = this.Db;
        b.s = this;
        if (a >= d.count) a = d.count;
        else if (d.Z(a) === b) return - 1;
        d.lc(a, b);
        b.Er();
        d = this.b;
        d !== m && (c ? xh(d) : d.lk(b));
        b instanceof mf && this.hv(b);
        return a
    };
    da.Cd = function(a, b, c) {
        var d = this.Db;
        if (0 > a || a >= d.length) {
            if (a = d.indexOf(b), 0 > a) return - 1
        } else if (d.Z(a) !== b && (a = d.indexOf(b), 0 > a)) return - 1;
        b.Fr();
        d.qe(a);
        d = this.b;
        d !== m && (c ? xh(d) : d.Cd(b));
        b.s = m;
        return a
    };
    da.hv = function(a) {
        for (; a !== m;) {
            if (a.ta === this) {
                var b = a;
                if (b.mc.next()) {
                    for (var c = -1,
                    d = -1,
                    e = this.Db.i,
                    g = e.length,
                    i = 0; i < g; i++) {
                        var j = e[i];
                        if (j === b && (c = i, 0 <= d)) break;
                        if (0 > d && j.Wa === b && (d = i, 0 <= c)) break
                    } ! (0 > d) && d < c && (e = this.Db, e.qe(c), e.lc(d, b))
                }
            }
            a = a.Wa
        }
    };
    da.clear = function() {
        for (var a = this.Db.Df(), b = a.length, c = 0; c < b; c++) a[c].bf = p,
        this.Cd( - 1, a[c])
    };
    v.m(ff, {
        Zi: "parts"
    },
    function() {
        return this.Db.f
    });
    v.m(ff, {
        ZJ: "partsBackwards"
    },
    function() {
        return this.Db.Hn
    });
    v.m(ff, {
        b: "diagram"
    },
    s("L"));
    v.a(ff, "name", ff.prototype.name);
    v.defineProperty(ff, {
        name: "name"
    },
    s("wb"),
    function(a) {
        v.e(a, "string", ff, "name");
        var b = this.wb;
        if (b !== a) {
            var c = this.b;
            if (c !== m) {
                "" === b && v.g("Cannot rename default Layer to: " + a);
                for (c = c.Kr; c.next();) c.value.name === a && v.g("Layer.name is already present in this diagram: " + a)
            }
            this.wb = a;
            this.d("name", b, a)
        }
    });
    v.a(ff, "isTemporary", ff.prototype.Tc);
    v.defineProperty(ff, {
        Tc: "isTemporary"
    },
    s("Dw"),
    function(a) {
        var b = this.Dw;
        b !== a && (v.e(a, "boolean", ff, "isTemporary"), this.Dw = a, this.d("isTemporary", b, a))
    });
    v.a(ff, "visible", ff.prototype.visible);
    v.defineProperty(ff, {
        visible: "visible"
    },
    s("Ug"),
    function(a) {
        var b = this.Ug;
        if (b !== a) {
            v.e(a, "boolean", ff, "visible");
            this.Ug = a;
            this.d("visible", b, a);
            for (a = this.Db.f; a.next();) a.value.updateAdornments();
            a = this.b;
            a !== m && xh(a)
        }
    });
    v.a(ff, "allowCopy", ff.prototype.Nh);
    v.defineProperty(ff, {
        Nh: "allowCopy"
    },
    s("gj"),
    function(a) {
        var b = this.gj;
        b !== a && (v.e(a, "boolean", ff, "allowCopy"), this.gj = a, this.d("allowCopy", b, a))
    });
    v.a(ff, "allowDelete", ff.prototype.ck);
    v.defineProperty(ff, {
        ck: "allowDelete"
    },
    s("hj"),
    function(a) {
        var b = this.hj;
        b !== a && (v.e(a, "boolean", ff, "allowDelete"), this.hj = a, this.d("allowDelete", b, a))
    });
    v.a(ff, "allowTextEdit", ff.prototype.kn);
    v.defineProperty(ff, {
        kn: "allowTextEdit"
    },
    s("rj"),
    function(a) {
        var b = this.rj;
        b !== a && (v.e(a, "boolean", ff, "allowTextEdit"), this.rj = a, this.d("allowTextEdit", b, a))
    });
    v.a(ff, "allowGroup", ff.prototype.dn);
    v.defineProperty(ff, {
        dn: "allowGroup"
    },
    s("ij"),
    function(a) {
        var b = this.ij;
        b !== a && (v.e(a, "boolean", ff, "allowGroup"), this.ij = a, this.d("allowGroup", b, a))
    });
    v.a(ff, "allowUngroup", ff.prototype.ln);
    v.defineProperty(ff, {
        ln: "allowUngroup"
    },
    s("sj"),
    function(a) {
        var b = this.sj;
        b !== a && (v.e(a, "boolean", ff, "allowUngroup"), this.sj = a, this.d("allowUngroup", b, a))
    });
    v.a(ff, "allowLink", ff.prototype.kl);
    v.defineProperty(ff, {
        kl: "allowLink"
    },
    s("jj"),
    function(a) {
        var b = this.jj;
        b !== a && (v.e(a, "boolean", ff, "allowLink"), this.jj = a, this.d("allowLink", b, a))
    });
    v.a(ff, "allowRelink", ff.prototype.Gi);
    v.defineProperty(ff, {
        Gi: "allowRelink"
    },
    s("mj"),
    function(a) {
        var b = this.mj;
        b !== a && (v.e(a, "boolean", ff, "allowRelink"), this.mj = a, this.d("allowRelink", b, a))
    });
    v.a(ff, "allowMove", ff.prototype.dk);
    v.defineProperty(ff, {
        dk: "allowMove"
    },
    s("kj"),
    function(a) {
        var b = this.kj;
        b !== a && (v.e(a, "boolean", ff, "allowMove"), this.kj = a, this.d("allowMove", b, a))
    });
    v.a(ff, "allowPrint", ff.prototype.fn);
    v.defineProperty(ff, {
        fn: "allowPrint"
    },
    s("lj"),
    function(a) {
        var b = this.lj;
        b !== a && (v.e(a, "boolean", ff, "allowPrint"), this.lj = a, this.d("allowPrint", b, a))
    });
    v.a(ff, "allowReshape", ff.prototype.gn);
    v.defineProperty(ff, {
        gn: "allowReshape"
    },
    s("nj"),
    function(a) {
        var b = this.nj;
        b !== a && (v.e(a, "boolean", ff, "allowReshape"), this.nj = a, this.d("allowReshape", b, a))
    });
    v.a(ff, "allowResize", ff.prototype.hn);
    v.defineProperty(ff, {
        hn: "allowResize"
    },
    s("oj"),
    function(a) {
        var b = this.oj;
        b !== a && (v.e(a, "boolean", ff, "allowResize"), this.oj = a, this.d("allowResize", b, a))
    });
    v.a(ff, "allowRotate", ff.prototype.jn);
    v.defineProperty(ff, {
        jn: "allowRotate"
    },
    s("pj"),
    function(a) {
        var b = this.pj;
        b !== a && (v.e(a, "boolean", ff, "allowRotate"), this.pj = a, this.d("allowRotate", b, a))
    });
    v.a(ff, "allowSelect", ff.prototype.Pd);
    v.defineProperty(ff, {
        Pd: "allowSelect"
    },
    s("qj"),
    function(a) {
        var b = this.qj;
        b !== a && (v.e(a, "boolean", ff, "allowSelect"), this.qj = a, this.d("allowSelect", b, a))
    });
    function A(a) {
        function b(a) {
            var b = a.toLowerCase(),
            c = new y("function");
            e.add(a, c);
            e.add(b, c);
            g.add(a, a);
            g.add(b, a)
        }
        function c() {
            document.removeEventListener("DOMContentLoaded", c, p);
            yh(d)
        }
        v.Ob(this);
        v.Jz = [];
        this.gc = h;
        this.ee = 17;
        var d = this;
        document.body !== m ? yh(this) : document.addEventListener("DOMContentLoaded", c, p);
        this.Cb = new y(ff);
        this.EA = this.DA = this.GA = this.FA = this.Hb = this.Jk = this.oa = m;
        this.kb = (new D(NaN, NaN)).freeze();
        this.Qb = 1;
        this.pt = 1E-4;
        this.kt = 100;
        this.Md = new ib;
        this.hu = (new D(NaN, NaN)).freeze();
        this.Ps = (new E(NaN, NaN, NaN, NaN)).freeze();
        this.Dk = zh;
        this.Hk = ec;
        this.Ej = zh;
        this.sm = ec;
        this.Us = this.Ts = fc;
        this.zg = new pa(P);
        this.qi = h;
        this.im = new oa(U, E);
        this.To = h;
        this.UD = 250;
        this.TD = 1E3;
        this.og = m;
        this.us = (new Hb(16, 16, 16, 16)).freeze();
        this.Kz = h;
        this.Xq = this.Tg = p;
        this.$o = h;
        this.tx = p;
        this.Of = new se;
        this.sc = new se;
        this.pc = new se;
        this.li = m;
        this.Yt = -1;
        this.ix = p;
        this.kw = new oa("string", y);
        this.jw = new oa("string", "string");
        var e = new oa("string", y),
        g = new oa("string", "string");
        b("BackgroundSingleClicked");
        b("BackgroundDoubleClicked");
        b("BackgroundContextClicked");
        b("ClipboardChanged");
        b("ClipboardPasted");
        b("DocumentBoundsChanged");
        b("ExternalObjectsDropped");
        b("InitialLayoutCompleted");
        b("LayoutCompleted");
        b("LinkDrawn");
        b("LinkRelinked");
        b("LinkReshaped");
        b("ObjectSingleClicked");
        b("ObjectDoubleClicked");
        b("ObjectContextClicked");
        b("PartCreated");
        b("PartResized");
        b("PartRotated");
        b("SelectionMoved");
        b("SelectionCopied");
        b("SelectionDeleting");
        b("SelectionDeleted");
        b("SelectionGrouped");
        b("SelectionUngrouped");
        b("ChangingSelection");
        b("ChangedSelection");
        b("SubGraphCollapsed");
        b("SubGraphExpanded");
        b("TextEdited");
        b("TreeCollapsed");
        b("TreeExpanded");
        b("ViewportBoundsChanged");
        this.kw = e;
        this.jw = g;
        this.yt = new pa(S);
        this.gl = new pa(mf);
        this.et = new pa(U);
        this.Db = new pa(R);
        this.bt = h;
        this.Wz = p;
        this.eu = hg;
        this.dw = this.iw = this.du = m;
        this.Hs = "";
        this.Mo = "auto";
        this.qh = this.Lh = this.Bh = this.st = this.Ch = this.Dh = this.Eh = this.ph = this.rh = this.oh = m;
        this.Nk = h;
        this.Sv = p;
        this.aw = m;
        this.Pk = this.Gh = this.vz = p;
        this.ya = h;
        this.ff = m;
        var i = this;
        this.dA = function(a) {
            if (a.P === i.P && i.ya) {
                i.ya = p;
                try {
                    var b = a.Sc;
                    "" === a.ne && b === De && Ah(i, a.object, a.propertyName)
                } finally {
                    i.ya = h
                }
            }
        };
        this.eA = function(a) {
            if (a.P === i.P && i.ya) {
                i.ya = p;
                try {
                    var b = a.Sc,
                    c = a.ne;
                    if ("" !== c) if (b === De) if ("linkFromKey" === c) {
                        var d = a.object,
                        e = i.Ri(d);
                        if (e !== m) {
                            var g = a.newValue,
                            u = i.ah(g);
                            e.ea = u
                        }
                    } else if ("linkToKey" === c) d = a.object,
                    e = i.Ri(d),
                    e !== m && (g = a.newValue, u = i.ah(g), e.ia = u);
                    else if ("linkFromPortId" === c) {
                        if (d = a.object, e = i.Ri(d), e !== m) {
                            var x = a.newValue;
                            "string" === typeof x && (e.dh = x)
                        }
                    } else if ("linkToPortId" === c) d = a.object,
                    e = i.Ri(d),
                    e !== m && (x = a.newValue, "string" === typeof x && (e.gi = x));
                    else if ("nodeGroupKey" === c) {
                        var d = a.object,
                        z = i.gg(d);
                        if (z !== m) {
                            var C = a.newValue;
                            if (C !== f) {
                                var G = i.ah(C);
                                z.Wa = G instanceof mf ? G: m
                            } else z.Wa = m
                        }
                    } else if ("linkLabelKeys" === c) {
                        if (d = a.object, e = i.Ri(d), e !== m) {
                            var H = a.oldValue,
                            I = a.newValue;
                            if (v.isArray(H)) for (var M = v.Eb(H), T = 0; T < M; T++) {
                                var la = v.qb(H, T),
                                u = i.ah(la);
                                u !== m && (u.le = m)
                            }
                            if (v.isArray(I)) {
                                M = v.Eb(I);
                                for (T = 0; T < M; T++) la = v.qb(I, T),
                                u = i.ah(la),
                                u !== m && (u.le = e)
                            }
                        }
                    } else if ("nodeCategory" === c) {
                        var d = a.object,
                        fa = i.gg(d),
                        Ca = a.newValue;
                        fa !== m && "string" === typeof Ca && (fa.od = Ca)
                    } else if ("linkCategory" === c) {
                        var d = a.object,
                        ra = i.Ri(d),
                        Ca = a.newValue;
                        ra !== m && "string" === typeof Ca && (ra.od = Ca)
                    } else if ("nodeDataArray" === c) {
                        var va = a.oldValue;
                        Bh(i, va);
                        var Ja = a.newValue;
                        Ch(i, Ja)
                    } else "linkDataArray" === c && (va = a.oldValue, Bh(i, va), Ja = a.newValue, Dh(i, Ja));
                    else if (b === Ee) Ja = a.newValue,
                    "nodeDataArray" === c && v.Oa(Ja) ? Eh(i, Ja) : "linkDataArray" === c && v.Oa(Ja) ? Fh(i, Ja) : "linkLabelKeys" === c && Qe(Ja) && (e = i.Ri(a.object), u = i.ah(Ja), e !== m && u !== m && (u.le = e));
                    else if (b === Fe) va = a.oldValue,
                    "nodeDataArray" === c && v.Oa(va) ? Gh(i, va) : "linkDataArray" === c && v.Oa(va) ? Gh(i, va) : "linkLabelKeys" === c && Qe(va) && (u = i.ah(va), u !== m && (u.le = m));
                    else {
                        if (b === Ce && "SourceChanged" === c) {
                            var z = i.gg(a.object),
                            jb = a.propertyName;
                            z !== m && "string" === typeof jb && z.nc(jb)
                        }
                    } else if (b === De) {
                        var eb = a.propertyName,
                        d = a.object;
                        if (d === i.P) {
                            if ("nodeKeyProperty" === eb || "nodeCategoryProperty" === eb || "linkFromKeyProperty" === eb || "linkToKeyProperty" === eb || "linkFromPortIdProperty" === eb || "linkToPortIdProperty" === eb || "nodeIsLinkLabelProperty" === eb || "linkLabelKeysProperty" === eb || "nodeIsGroupProperty" === eb || "nodeGroupKeyProperty" === eb || "linkCategoryProperty" === eb) i.da.cb || i.Kl()
                        } else Ah(i, d, eb)
                    } else if (b === Ee || b === Fe) {
                        var wb = a.Sc === Ee,
                        mb = wb ? a.Ve: a.We,
                        Xa = wb ? a.newValue: a.oldValue,
                        Eb = i.Sk.ca(a.object);
                        if (Array.isArray(Eb)) for (a = 0; a < Eb.length; a++) {
                            var Ya = Eb[a];
                            "number" === typeof mb && (wb ? v.Oa(Xa) && (Hh(Ya, Xa, mb), Ih(Ya, Ya)) : (Ya.Cd(mb), Ih(Ya, Ya)))
                        }
                    } else if (b === Ce) {
                        var Pc = a.propertyName;
                        if ("S" !== Pc[0]) {
                            if ("CommittingTransaction" !== Pc) {
                                if ("FinishedUndo" === Pc || "FinishedRedo" === Pc) i.da.wh = h,
                                Jh(i),
                                i.da.wh = p;
                                i.Pf && i.sa.standardMouseOver();
                                for (var yd = i.selection.f; yd.next();) yd.value.updateAdornments()
                            }
                            i.Xq = h;
                            i.update();
                            Tg(i)
                        } else "StartingFirstTransaction" === Pc && (!i.cf && !i.Pf) && (i.Xq = h, i.$o && (i.Tg = h), i.update())
                    }
                } finally {
                    i.ya = h
                }
            }
        };
        this.Mf = new oa(Object, R);
        this.Sk = new oa(Object, Array);
        this.Ij = p;
        this.hj = this.gj = this.ls = this.vh = h;
        this.ns = this.ms = p;
        this.ss = this.qs = this.qj = this.pj = this.oj = this.nj = this.lj = this.kj = this.mj = this.jj = this.ps = this.sj = this.ij = this.rj = h;
        this.$z = p;
        this.rs = this.os = this.Ss = this.Rs = h;
        this.Nt = this.Mt = 16;
        this.Lt = p;
        this.Ld = (new Hb(5)).freeze();
        this.Qt = (new pa(R)).freeze();
        this.lt = 999999999;
        this.vm = this.Hj = this.Gj = h;
        this.qm = this.pm = p;
        this.Zc = m;
        this.ts = h;
        this.Pf = p;
        this.Pc = m;
        this.nA = 1;
        this.QA = (new E(NaN, NaN, NaN, NaN)).freeze();
        this.Ms = (new E(NaN, NaN, NaN, NaN)).freeze();
        this.cf = p;
        this.Dt = new pa;
        Kh(this);
        Lh(this);
        this.dm = this.$w = this.Wc = m;
        this.Vb = new jf;
        this.Vb.initializeStandardTools();
        this.sa = this.wu = this.Vb;
        this.Ad = new sa;
        this.P = new N;
        this.Gh = h;
        this.xb = new Mh;
        this.Gh = p;
        a === f && (a = document.createElement("div"));
        this.Sz = new Nh;
        Oh(this, a);
        this.Fq = this.WG = m;
        this.gc = p
    }
    v.H("Diagram", A);
    function Lh(a) {
        a.zi = new oa("string", R);
        var b = new S,
        c = new qa;
        c.bind(new af("text", "", Ge));
        b.add(c);
        a.$D = b;
        a.zi.add("", b);
        b = new S;
        c = new qa;
        c.stroke = "brown";
        c.bind(new af("text", "", Ge));
        b.add(c);
        a.zi.add("Comment", b);
        b = new S;
        b.sk = p;
        b.Ix = p;
        c = new V;
        c.Xa = "Ellipse";
        c.fill = "black";
        c.stroke = m;
        c.ma = new sb(3, 3);
        b.add(c);
        a.zi.add("LinkLabel", b);
        a.Mk = new oa("string", mf);
        b = new mf;
        b.ao = "GROUPPANEL";
        b.type = Ph;
        c = new qa;
        c.font = "bold 12pt sans-serif";
        c.bind(new af("text", "", Ge));
        b.add(c);
        c = new w(Qh);
        c.name = "GROUPPANEL";
        var d = new V;
        d.Xa = "Rectangle";
        d.fill = "rgba(128,128,128,0.2)";
        d.stroke = "black";
        c.add(d);
        d = new Pg;
        d.padding = new Hb(5, 5, 5, 5);
        c.add(d);
        b.add(c);
        a.XD = b;
        a.Mk.add("", b);
        a.Mj = new oa("string", U);
        b = new U;
        c = new V;
        c.Vi = h;
        b.add(c);
        c = new V;
        c.Rl = "Standard";
        c.fill = "black";
        c.stroke = m;
        b.add(c);
        a.ZD = b;
        a.Mj.add("", b);
        b = new U;
        c = new V;
        c.Vi = h;
        c.stroke = "brown";
        b.add(c);
        a.Mj.add("Comment", b);
        b = new w;
        c = new qa;
        c.bind(new af("text", "", Ge));
        b.add(c);
        a.YD = b;
        b = new lf;
        b.type = Qh;
        c = new V;
        c.fill = m;
        c.stroke = "magenta";
        c.Ua = 2;
        b.add(c);
        c = new Pg;
        c.margin = new Hb(1, 1, 1, 1);
        b.add(c);
        a.Ow = b;
        a.yw = b;
        b = new lf;
        b.type = zg;
        c = new V;
        c.Vi = h;
        c.fill = m;
        c.stroke = "magenta";
        c.Ua = 0;
        b.add(c);
        a.Gw = b
    }
    function yh(a) {
        var b = document.createElement("p");
        b.style.width = "100%";
        b.style.height = "200px";
        var c = document.createElement("div");
        c.style.position = "absolute";
        c.style.visibility = "hidden";
        c.style.width = "200px";
        c.style.height = "150px";
        c.style.overflow = "hidden";
        c.appendChild(b);
        document.body.appendChild(c);
        var d = b.offsetWidth;
        c.style.overflow = "scroll";
        b = b.offsetWidth;
        d === b && (b = c.clientWidth);
        document.body.removeChild(c);
        a.ee = d - b
    }
    A.prototype.toString = function(a) {
        a === f && (a = 0);
        var b = "";
        this.id && (b = this.id);
        this.Wh && this.Wh.id && (b = this.Wh.id);
        b = 'Diagram "' + b + '"';
        if (0 >= a) return b;
        for (var c = this.Cb.f; c.next();) b += "\n " + c.value.toString(a - 1);
        return b
    };
    A.prototype.dumpReferences = A.prototype.KB = function() {
        for (var a = this.Kr; a.next();) {
            var b = a.value;
            v.trace(b.toString());
            for (b = b.Zi; b.next();) b.value.KB()
        }
    };
    A.prototype.checkProperties = A.prototype.OH = function() {
        return v.ZE(this)
    };
    A.fromDiv = function(a) {
        var b = a;
        "string" === typeof a && (b = document.getElementById(a));
        return b instanceof HTMLDivElement && b.L instanceof A ? b.L: m
    };
    v.a(A, "div", A.prototype.Wh);
    v.defineProperty(A, {
        Wh: "div"
    },
    s("Hb"),
    function(a) {
        a !== m && v.c(a, HTMLDivElement, A, "div");
        if (this.Hb !== a) {
            var b = this.Hb;
            if (b !== m) {
                delete b.L;
                b.innerHTML = "";
                this.oa !== m && (this.oa.L = m, this.oa.removeEventListener("touchstart", this.BD, p), this.oa.removeEventListener("touchmove", this.AD, p), this.oa.removeEventListener("touchend", this.zD, p));
                b = this.du;
                if (b !== m) {
                    for (var c = b.gA,
                    d = c.length,
                    e = 0; e < d; e++) c.i[e].cancelWaitAfter();
                    c = b.hA;
                    d = c.length;
                    for (e = 0; e < d; e++) c.i[e].cancelWaitAfter();
                    c = b.iA;
                    d = c.length;
                    for (e = 0; e < d; e++) c.i[e].cancelWaitAfter()
                }
                b.cancelWaitAfter();
                this.Jk = this.oa = m;
                window.removeEventListener("resize", this.Dy, p);
                window.removeEventListener("mousemove", this.Qn, h);
                window.removeEventListener("mousedown", this.Pn, h);
                window.removeEventListener("mouseup", this.Sn, h);
                window.removeEventListener("mousewheel", this.kg, h);
                window.removeEventListener("DOMMouseScroll", this.kg, h);
                window.removeEventListener("mouseout", this.Rn, h)
            }
            this.Hb = m;
            if (a !== m) {
                if (b = a.L) b.Wh = m;
                Oh(this, a)
            }
        }
    });
    function Nh() {
        this.IA = h;
        this.XG = p;
        this.YG = 212;
        this.mE = "63ad05bbe23a1786468a4c741b6d2e";
        if (this.mE === this._tk) this.ni = h;
        else {
            var a = "p",
            b = window[v.Ba("76a715b2f73f148a")][v.Ba("72ba13b5")];
            if (v.Ba("77bb5bb2f32603de") === window[v.Ba("76a715b2f73f148a")][v.Ba("6aba19a7ec351488")]) try {
                this.ni = !window[v.Ba("4da118b7ec2108")][v.Ba("5bb806bfea351a904a84515e1b6d38b6")][v.Ba("49bc19a1e6")][v.Ba("59bd04a1e6380fa5539b")][v.Ba("7bb8069ae7")] === v.Ba(v.Cx);
                if (this.ni === p) return;
                this.ni = !window[v.Ba("4da118b7ec2108")][v.Ba("5bb806bfea351a904a84515e1b6d38b6")][v.Ba("49bc19a1e6")][v.Ba("59bd04a1e6380fa5539b6c7a197c31bb4cfd3e")][v.Ba("7bb8069ae7")] === v.Ba(v.Cx);
                if (this.ni === p) return
            } catch(c) {}
            for (var d = b[v.Ba("76ad18b4f73e")], e = b[v.Ba("73a612b6fb191d")](v.Ba("35e7")) + 2; e < d; e++) a += b[e];
            d = a[v.Ba("73a612b6fb191d")](v.Ba(v.Cx));
            if (this.ni = !(0 < d && d < a[v.Ba("73a612b6fb191d")](v.Ba("35")))) {
                a = document[v.Ba("69bc0fbfe6051381469f4c")];
                d = a.length;
                for (e = 0; e < d; e++) if (b = a[e][v.Ba("79bb0581f63a1e97")], b !== m) {
                    for (var g = b.length,
                    i = 0; i < g; i++) if (b[i][v.Ba("69ad1ab6e0221496778e4767")] == v.Ba("02cncncn")) {
                        var j = b[i][v.Ba("69bc0fbfe6")][v.Ba("78a704b7e6242f8b53a8507f1b7b")];
                        if (!j) return;
                        if ( - 1 !== j.indexOf(v.Ba(v.$E)) && -1 !== j.indexOf(v.Ba(v.aF))) {
                            this.ni = p;
                            break
                        }
                    }
                    if (this.ni === p) break
                }
            }
            this.ZG = new D(NaN, NaN)
        }
    }
    Nh.prototype.pv = function(a) {
        a.SD();
        return 0 < this.ni && this !== this.IA ? h: p
    };
    Nh.prototype.t = Nh.prototype.HK = function() {
        this.IA = m
    };
    function Oh(a, b) { (b === f || b === m) && v.g("Diagram setup requires an argument DIV.");
        a.Hb !== m && v.g("Diagram has already completed setup.");
        "string" === typeof b ? a.Hb = document.getElementById(b) : b instanceof HTMLDivElement ? a.Hb = b: v.g("No DIV or DIV id supplied: " + b);
        a.Hb === m && v.g("Invalid DIV id; could not get element with id: " + b);
        a.Hb.L !== f && v.g("Invalid div id; div already has a Diagram associated with it.");
        "static" === window.getComputedStyle(a.Hb, m).position && (a.Hb.style.position = "relative");
        a.Hb.style["-webkit-tap-highlight-color"] = "rgba(255, 255, 255, 0)";
        a.Hb.innerHTML = "";
        a.Hb.L = a;
        var c = document.createElement("canvas");
        if (!c.getContext || !c.getContext("2d")) a.Hb.innerHTML = "This text is displayed if your browser does not support the Canvas HTML element.";
        else {
            c.innerHTML = "This text is displayed if your browser does not support the Canvas HTML element.";
            c.style.position = "absolute";
            c.style.top = "0px";
            c.style.left = "0px";
            c.style.zIndex = "2";
            c.width = a.Hb.clientWidth || 1;
            c.height = a.Hb.clientHeight || 1;
            document.defaultView && document.defaultView.getComputedStyle && (a.FA = parseInt(document.defaultView.getComputedStyle(c, m).paddingLeft, 10) || 0, a.GA = parseInt(document.defaultView.getComputedStyle(c, m).paddingTop, 10) || 0, a.DA = parseInt(document.defaultView.getComputedStyle(c, m).borderLeftWidth, 10) || 0, a.EA = parseInt(document.defaultView.getComputedStyle(c, m).borderTopWidth, 10) || 0);
            a.Aw = 0;
            a.zw = 0;
            if (document.body) {
                var d = document.body.parentNode;
                a.Aw = d.offsetTop || 0;
                a.zw = d.offsetLeft || 0
            } else document.addEventListener("load",
            function() {
                if (document.body) {
                    var b = document.body.parentNode;
                    a.Aw = b.offsetTop || 0;
                    a.zw = b.offsetLeft || 0
                }
            },
            p);
            c.L = a;
            a.oa = c;
            a.Jk = c.getContext("2d");
            d = a.Jk;
            a.SD = d[v.Ba("69ad0287f137159745844d7e")][v.Ba("78a118b7")](d, 1, 0, 0, 1, 0, 0);
            a.RD = d[v.Ba("7eba17a4ca3b1a8346")][v.Ba("78a118b7")](d, v.pv, 4, 4);
            a.Hb.insertBefore(c, a.Hb.firstChild);
            if (a.Kz !== m) {
                var d = document.createElement("div"),
                e = document.createElement("div"),
                g = document.createElement("div"),
                i = document.createElement("div");
                d.style.position = "absolute";
                d.style.overflow = "auto";
                d.style.width = a.oa.width + "px";
                d.style.height = a.oa.height + "px";
                d.style.zIndex = "1";
                e.style.position = "absolute";
                e.style.overflow = "auto";
                e.style.width = a.oa.width + "px";
                e.style.height = a.oa.height + "px";
                e.style.zIndex = "1";
                g.style.position = "absolute";
                g.style.width = "1px";
                g.style.height = "1px";
                i.style.position = "absolute";
                i.style.width = "1px";
                i.style.height = "1px";
                a.Hb.appendChild(d);
                a.Hb.appendChild(e);
                d.appendChild(g);
                e.appendChild(i);
                d.onscroll = a.lA;
                d.onmousedown = a.mA;
                d.L = a;
                d.yA = h;
                e.onscroll = a.lA;
                e.onmousedown = a.mA;
                e.L = a;
                e.zA = h;
                a.Yj = d;
                a.Zj = e;
                a.wA = g;
                a.xA = i
            }
            a.preventDefault = function(a) {
                a.preventDefault();
                return p
            };
            a.Qn = function(b) {
                if (a.isEnabled) {
                    var c = a.sc;
                    window.TouchEvent && c.oi !== m && c.oi instanceof window.TouchEvent ? (b.preventDefault(), b.simulated = h, a.Fq = b) : (a.sc = a.pc, a.pc = c, Rh(a, b, c, h), Sh(b, new D, b.target.L) || (a.sa.doMouseMove(), a.sa.isBeyondDragSize() && Th(a)))
                }
            };
            a.Pn = function(b) {
                if (a.isEnabled) {
                    var c = a.sc;
                    if (a.Fq !== m) a.Fq = b,
                    b.preventDefault();
                    else if (a.sc = a.pc, a.pc = c, Rh(a, b, c, h), c.Le = b.detail, a.Of = c.copy(), c.oi.simulated === h) b.preventDefault(),
                    b.simulated = h;
                    else if (t && t.Ky && (window.Ky = a.xn(c.C).i, t.trace(window.Ky)), Hf = m, a.sa.doMouseDown(), 1 === b.button) return b.preventDefault(),
                    p
                }
            };
            a.Sn = function(b) {
                if (a.isEnabled) {
                    var c = a.sc;
                    a.Fq !== m ? (a.Fq = m, b.preventDefault()) : (a.sc = a.pc, a.pc = c, Rh(a, b, c, h), c.Le = b.detail, b.target.L && (c.Bf = b.target.L), Uh(a, b, new D, c.Bf) || (a.sa.doMouseUp(), Jf(a), Vh(a, c, b)))
                }
            };
            a.kg = function(b) {
                if (a.isEnabled) {
                    var c = a.sc;
                    a.sc = a.pc;
                    a.pc = c;
                    Rh(a, b, c, h);
                    c.bubbles = h;
                    c.Mi = b.wheelDelta !== f ? b.wheelDelta: -40 * b.detail;
                    a.sa.doMouseWheel();
                    Vh(a, c, b)
                }
            };
            a.Rn = function() {
                if (a.isEnabled) {
                    var b = a.sa;
                    b.cancelWaitAfter();
                    b instanceof jf && b.hideToolTip()
                }
            };
            a.Dy = function() {
                var b = a.oa,
                c = a.Hb,
                d = 0;
                a.qm && (d = a.ee);
                var e = 0;
                a.pm && (e = a.ee);
                if (c.clientWidth !== b.width + d || c.clientHeight !== b.height + e) a.Hj = h,
                a.qi = h;
                yf(a)
            };
            a.BD = function(b) {
                if (a.isEnabled) {
                    a.ix = p;
                    if (1 < b.touches.length) {
                        a.sa.doCancel();
                        if (a.Nk && v.HA) return b.preventDefault(),
                        b.cancelBubble = h,
                        p;
                        Th(a);
                        b.cancelBubble = p;
                        return h
                    }
                    var c = a.sc;
                    a.sc = a.pc;
                    a.pc = c;
                    c.b = a;
                    var d = a.uh(b.targetTouches[0]);
                    c.gd = a.ks(d);
                    c.C = d;
                    c.fh = 0;
                    c.button = 0;
                    c.Le = 1;
                    c.Mi = 0;
                    c.Bd = p;
                    c.bubbles = p;
                    c.event = b;
                    c.timestamp = Date.now();
                    c.Bf = b.target.L ? b.target.L: m;
                    c.fd = m;
                    a.Of = c.copy();
                    Hf = m;
                    a.sa.doMouseDown();
                    var e = c.copy();
                    a.Yt = setTimeout(function() {
                        e.button = 2;
                        a.F = e;
                        a.ix = h;
                        a.sa.doMouseUp()
                    },
                    850);
                    Vh(a, c, b)
                }
            };
            a.AD = function(b) {
                if (a.isEnabled) {
                    if (1 < b.touches.length) {
                        a.sa.doCancel();
                        Th(a);
                        if (a.Nk && v.HA) return b.preventDefault(),
                        b.cancelBubble = h,
                        p;
                        b.cancelBubble = p;
                        return h
                    }
                    var c = a.sc;
                    a.sc = a.pc;
                    a.pc = c;
                    var d = m,
                    e, g = m;
                    0 < b.changedTouches.length ? g = b.changedTouches[0] : 0 < b.targetTouches.length && (g = b.targetTouches[0]);
                    c.b = a;
                    if (g) {
                        var d = document.elementFromPoint(g.clientX, g.clientY),
                        i;
                        d && d.L ? (e = d.L.uh(g), i = d.L) : (e = a.uh(b.changedTouches[0]), i = a);
                        c.C = e;
                        c.gd = i.ks(e)
                    } else a.sc !== m ? (c.C = a.sc.C, c.gd = a.sc.gd, d = a.sc.Bf) : a.Of !== m && (c.C = a.Of.C, c.gd = a.Of.gd, d = a.Of.Bf);
                    c.fh = 0;
                    c.button = 0;
                    c.Le = 1;
                    c.Mi = 0;
                    c.Bd = p;
                    c.bubbles = p;
                    c.event = b;
                    c.timestamp = Date.now();
                    c.Bf = d === m ? b.target.L: d.L ? d.L: m;
                    c.fd = m;
                    a.sa.isBeyondDragSize() && Th(a);
                    if (!Sh(g ? g: b, new D, c.Bf)) a.sa.doMouseMove(),
                    Vh(a, c, b)
                }
            };
            a.zD = function(b) {
                if (a.isEnabled) {
                    Th(a);
                    if (a.ix) return b.preventDefault(),
                    p;
                    var c = a.sc;
                    a.sc = a.pc;
                    a.pc = c;
                    if (! (1 < b.touches.length)) {
                        var d = m,
                        e, g = m;
                        0 < b.changedTouches.length ? g = b.changedTouches[0] : 0 < b.targetTouches.length && (g = b.targetTouches[0]);
                        c.b = a;
                        if (g) {
                            var d = document.elementFromPoint(g.clientX, g.clientY),
                            i;
                            d && d.L ? (e = d.L.uh(g), i = d.L) : (e = a.uh(b.changedTouches[0]), i = a);
                            c.C = e;
                            c.gd = i.ks(e)
                        } else a.sc !== m ? (c.C = a.sc.C, c.gd = a.sc.gd, d = a.sc.Bf) : a.Of !== m && (c.C = a.Of.C, c.gd = a.Of.gd, d = a.Of.Bf);
                        c.fh = 0;
                        c.button = 0;
                        c.Le = 1;
                        c.Mi = 0;
                        c.Bd = p;
                        c.bubbles = p;
                        c.event = b;
                        c.timestamp = Date.now();
                        c.Bf = d === m ? b.target.L: d.L ? d.L: m;
                        c.fd = m;
                        if (!Uh(a, g ? g: b, new D, c.Bf)) a.sa.doMouseUp(),
                        Vh(a, c, b)
                    }
                }
            };
            c.addEventListener("touchstart", a.BD, p);
            c.addEventListener("touchmove", a.AD, p);
            c.addEventListener("touchend", a.zD, p);
            c.addEventListener("gesturestart",
            function() {
                a.Nk !== p && (a.nA = a.scale, a.sa.doCancel())
            },
            p);
            c.addEventListener("gesturechange",
            function(b) {
                if (a.Nk !== p) {
                    var c = a.uh(b),
                    d = a.Ak;
                    a.Ak = c;
                    a.scale = a.nA * b.scale;
                    a.Ak = d
                }
            },
            p);
            c.addEventListener("mousemove", a.Qn, p);
            c.addEventListener("mousedown", a.Pn, p);
            c.addEventListener("mouseup", a.Sn, p);
            c.addEventListener("mousewheel", a.kg, p);
            c.addEventListener("DOMMouseScroll", a.kg, p);
            c.addEventListener("mouseout", a.Rn, p);
            c.addEventListener("keydown", a.XF, p);
            c.addEventListener("keyup", a.YF, p);
            c.addEventListener("selectstart",
            function(a) {
                a.preventDefault();
                return p
            },
            p);
            c.addEventListener("contextmenu",
            function(a) {
                a.preventDefault();
                return p
            },
            p);
            window.addEventListener("resize", a.Dy, p);
            c.tabIndex = 0;
            Wh(a)
        }
    }
    A.prototype.focus = A.prototype.focus = function() {
        this.oa.focus()
    };
    function Wh(a, b) {
        b === f && (b = a.Jk);
        b.Qv = "";
        b.Vl = "";
        b.Ul = ""
    }
    function Kh(a) {
        var b = new ff;
        b.name = "Background";
        a.er(b);
        b = new ff;
        b.name = "";
        a.er(b);
        b = new ff;
        b.name = "Foreground";
        a.er(b);
        b = new ff;
        b.name = "Adornment";
        b.Tc = h;
        a.er(b);
        b = new ff;
        b.name = "Tool";
        b.Tc = h;
        a.er(b);
        b = new ff;
        b.name = "Grid";
        b.Pd = p;
        b.Tc = h;
        a.wE(b, a.un("Background"))
    }
    function Xh(a) {
        a.Wc = new w(Yh);
        a.Wc.name = "GRID";
        var b = new V;
        b.Xa = "LineH";
        b.stroke = "lightgray";
        b.Ua = 0.5;
        b.$h = 1;
        a.Wc.add(b);
        b = new V;
        b.Xa = "LineH";
        b.stroke = "gray";
        b.Ua = 0.5;
        b.$h = 5;
        a.Wc.add(b);
        b = new V;
        b.Xa = "LineH";
        b.stroke = "gray";
        b.Ua = 1;
        b.$h = 10;
        a.Wc.add(b);
        b = new V;
        b.Xa = "LineV";
        b.stroke = "lightgray";
        b.Ua = 0.5;
        b.$h = 1;
        a.Wc.add(b);
        b = new V;
        b.Xa = "LineV";
        b.stroke = "gray";
        b.Ua = 0.5;
        b.$h = 5;
        a.Wc.add(b);
        b = new V;
        b.Xa = "LineV";
        b.stroke = "gray";
        b.Ua = 1;
        b.$h = 10;
        a.Wc.add(b);
        b = new R;
        b.add(a.Wc);
        b.Ed = "Grid";
        b.Ou = p;
        b.MC = p;
        b.Lr = "GRID";
        a.add(b);
        a.Db.remove(b);
        a.Wc.visible = p
    }
    A.prototype.lA = function() {
        var a = this.L;
        if (a.vA) {
            a.Lt = h;
            var b = a.yc,
            c = a.ob,
            d = b.width,
            e = c.width,
            g = b.height,
            i = c.height,
            j = b.right,
            k = c.right,
            l = b.bottom,
            n = c.bottom,
            r = b.x,
            q = c.x,
            b = b.y,
            c = c.y;
            if (e < d || i < g) this.yA && a.Je ? a.position = new D(this.scrollLeft + r, a.position.y) : this.zA && a.Ke && (a.position = new D(a.position.x, this.scrollTop + b)),
            Zh(a),
            xh(a),
            a.Lt = p,
            a.Hj = p;
            else {
                var u = a.scale;
                this.yA && a.Je && (r < q && (a.position = new D(this.scrollLeft + r, a.position.y)), j > k && (a.position = new D( - (a.Yj.ee - a.oa.width) + this.scrollLeft - a.oa.width / u + a.yc.right, a.position.y)));
                this.zA && a.Ke && (b < c && (a.position = new D(a.position.x, this.scrollTop + b)), l > n && (a.position = new D(a.position.x, -(a.Zj.scrollHeight - a.oa.height) + this.scrollTop - a.oa.height / u + a.yc.bottom)));
                Zh(a);
                a.Lt = p;
                a.Hj = p;
                xh(a);
                b = a.yc;
                c = a.ob;
                j = b.right;
                k = c.right;
                l = b.bottom;
                n = c.bottom;
                r = b.x;
                q = c.x;
                b = b.y;
                c = c.y;
                e >= d && (r >= q && j <= k) && (a.wA.style.width = "1px");
                i >= g && (b >= c && l <= n) && (a.xA.style.height = "1px");
                $h(a)
            }
        }
    };
    A.prototype.mA = function() {
        this.L.vA = h
    };
    A.prototype.computeBounds = A.prototype.Me = function() {
        0 < this.zg.count && Jh(this);
        if (this.xr.aa()) {
            var a = this.xr.copy();
            a.fr(this.padding);
            return a
        }
        for (var b = h,
        c = this.Cb,
        d = c.length,
        e = 0; e < d; e++) {
            var g = c.i[e];
            if (g.visible && !g.Tc) for (var g = g.Db,
            i = g.length,
            j = 0; j < i; j++) {
                var k = g.i[j];
                k.Ou && k.eb() && (k = k.la, k.aa() && (b ? (b = p, a = k.copy()) : a.fj(k)))
            }
        }
        b && (a = new E(0, 0, 0, 0));
        a.fr(this.padding);
        return a
    };
    function gi(a, b) {
        if ((b || a.Pf) && !a.gc && a.yc.aa()) {
            a.gc = h;
            var c = a.Dk;
            b && a.Ej !== zh && (c = a.Ej);
            var d = c !== zh ? hi(a, c) : a.scale,
            c = a.ob.copy(),
            e = a.oa.width / d,
            g = a.oa.height / d;
            a.position.qa();
            var i = a.Hk;
            b && Vb(a.sm) && (i = a.sm);
            ii(a, a.kb, a.yc, e, g, i);
            a.position.freeze();
            a.scale = d;
            a.gc = p;
            d = a.ob;
            d.Zh(c) || a.Wr(c, d)
        }
    }
    function hi(a, b) {
        var c = a.yc;
        if (!c.aa()) return 1;
        var d = c.width,
        c = c.height,
        e = a.oa.width,
        g = a.oa.height,
        i = e / d,
        j = g / c,
        k = 1;
        return b === ji ? (k = Math.min(j, i), 1 < k && (k = 1), k) : b === ki ? (k = j > i ? (g - a.ee) / c: (e - a.ee) / d, 1 < k && (k = 1), k) : a.scale
    }
    A.prototype.zoomToFit = A.prototype.OK = function() {
        this.scale = hi(this, ji);
        yf(this)
    };
    A.prototype.alignDocument = A.prototype.iH = function(a, b) {
        this.Gj && li(this, this.Me());
        var c = this.yc,
        d = this.ob,
        e = this.gc;
        this.gc = h;
        this.position = new D(c.x + (a.x * c.width + a.offsetX) - (b.x * d.width - b.offsetX), c.y + (a.y * c.height + a.offsetY) - (b.y * d.height - b.offsetY));
        this.gc = e;
        xh(this);
        this.cf || yf(this)
    };
    function ii(a, b, c, d, e, g) {
        Vb(g) && (d > c.width && (b.x = c.x + (g.x * c.width + g.offsetX) - (g.x * d - g.offsetX)), e > c.height && (b.y = c.y + (g.y * c.height + g.offsetY) - (g.y * e - g.offsetY)));
        d < c.width ? (g = b.x + d / 2, g = Math.min(g, c.right - d / 2), g = Math.max(g, c.left + d / 2), b.x = g - d / 2) : b.x > c.left ? b.x = c.left: b.x < c.right - d && (b.x = c.right - d);
        e < c.height ? (d = b.y + e / 2, d = Math.min(d, c.bottom - e / 2), d = Math.max(d, c.top + e / 2), b.y = d - e / 2) : b.y > c.top ? b.y = c.top: b.y < c.bottom - e && (b.y = c.bottom - e);
        isFinite(b.x) || (b.x = -a.padding.left);
        isFinite(b.y) || (b.y = -a.padding.top)
    }
    A.prototype.findPartAt = A.prototype.ur = function(a, b) {
        var c = b ? ag(this, a,
        function(a) {
            return a.W
        },
        function(a) {
            return a.Kx()
        }) : this.dd(a,
        function(a) {
            return a.W
        });
        return c instanceof R ? c: m
    };
    A.prototype.findObjectAt = A.prototype.dd = function(a, b, c) {
        b === f && (b = m);
        c === f && (c = m);
        var d = this.Cb.Hn;
        for (Jh(this); d.next();) {
            var e = d.value;
            if (e.visible && (e = e.dd(a, b, c), e !== m)) return e
        }
        return m
    };
    function ag(a, b, c, d) {
        c === f && (c = m);
        d === f && (d = m);
        var e = a.Cb.Hn;
        for (Jh(a); e.next();) if (a = e.value, a.visible && !a.Tc && (a = a.dd(b, c, d), a !== m)) return a;
        return m
    }
    A.prototype.findObjectsAt = A.prototype.xn = function(a, b, c, d) {
        b === f && (b = m);
        c === f && (c = m);
        if (! (d instanceof y) || !(d instanceof pa)) d = new y(P);
        Jh(this);
        for (var e = this.Cb.Hn; e.next();) {
            var g = e.value;
            g.visible && g.xn(a, b, c, d)
        }
        return d
    };
    A.prototype.findObjectsIn = A.prototype.xl = function(a, b, c, d, e) {
        b === f && (b = m);
        c === f && (c = m);
        d === f && (d = p);
        if (! (e instanceof y) || !(e instanceof pa)) e = new y(P);
        Jh(this);
        for (var g = this.Cb.Hn; g.next();) {
            var i = g.value;
            i.visible && i.xl(a, b, c, d, e)
        }
        return e
    };
    A.prototype.findObjectsNear = A.prototype.yn = function(a, b, c, d, e) {
        c === f && (c = m);
        d === f && (d = m); ! (e instanceof y) && !(e instanceof pa) && (e = new y(P));
        Jh(this);
        for (var g = this.Cb.Hn; g.next();) {
            var i = g.value;
            i.visible && i.yn(a, b, c, d, e)
        }
        return e
    };
    function Th(a) { - 1 !== a.Yt && (clearTimeout(a.Yt), a.Yt = -1)
    }
    function Rh(a, b, c, d) {
        c.b = a;
        d ? (d = a.uh(b), c.gd = a.ks(d), c.C = d) : (c.gd = a.pc.gd, c.C = a.pc.C);
        a = 0;
        b.ctrlKey && (a += 1);
        b.altKey && (a += 2);
        b.shiftKey && (a += 4);
        c.fh = a;
        c.button = b.button;
        c.Le = 1;
        c.Mi = 0;
        c.Bd = p;
        c.bubbles = p;
        c.event = b;
        c.timestamp = Date.now();
        c.Bf = b.target.L ? b.target.L: m;
        c.fd = m
    }
    function Vh(a, b, c) {
        if (b.bubbles) return t && (t.trace && t.aC) && t.trace("NOT handled " + c.type + " " + b.toString()),
        h;
        t && (t.trace && t.aC) && t.trace("handled " + c.type + " " + a.sa.name + " " + b.toString());
        c.stopPropagation !== f && c.stopPropagation();
        c.preventDefault !== f && "touchstart" !== c.type && c.preventDefault();
        c.cancelBubble = h;
        return p
    }
    A.prototype.XF = function(a) {
        if (this.L.isEnabled) {
            var b = this.L.pc;
            Rh(this.L, a, b, p);
            b.key = String.fromCharCode(a.which);
            switch (a.which) {
            case 33:
                b.key = "PageUp";
                break;
            case 34:
                b.key = "PageDown";
                break;
            case 35:
                b.key = "End";
                break;
            case 36:
                b.key = "Home";
                break;
            case 37:
                b.key = "Left";
                break;
            case 38:
                b.key = "Up";
                break;
            case 39:
                b.key = "Right";
                break;
            case 40:
                b.key = "Down";
                break;
            case 45:
                b.key = "Insert";
                break;
            case 46:
                b.key = "Del";
                break;
            case 48:
                b.key = "0";
                break;
            case 187:
                b.key = "Add";
                break;
            case 189:
                b.key = "Subtract";
                break;
            case 107:
                b.key = "Add";
                break;
            case 109:
                b.key = "Subtract";
                break;
            case 27:
                b.key = "Esc"
            }
            this.L.sa.doKeyDown();
            return (187 === a.which || 189 === a.which || 48 === a.which || 107 === a.which || 109 === a.which) && a.ctrlKey === h ? (a.cancelBubble = h, a.preventDefault !== f ? a.preventDefault() : a.returnValue = p, Event.stop && (v.g("Event.stop can fire for this browser"), Event.stop(a)), a.stopPropagation !== f && a.stopPropagation(), p) : Vh(this.L, b, a)
        }
    };
    A.prototype.YF = function(a) {
        if (this.L.isEnabled) {
            var b = this.L.pc;
            Rh(this.L, a, b, p);
            b.key = String.fromCharCode(a.which);
            switch (a.which) {
            case 33:
                b.key = "PageUp";
                break;
            case 34:
                b.key = "PageDown";
                break;
            case 35:
                b.key = "End";
                break;
            case 36:
                b.key = "Home";
                break;
            case 37:
                b.key = "Left";
                break;
            case 38:
                b.key = "Up";
                break;
            case 39:
                b.key = "Right";
                break;
            case 40:
                b.key = "Down";
                break;
            case 45:
                b.key = "Insert";
                break;
            case 46:
                b.key = "Del"
            }
            this.L.sa.doKeyUp();
            return Vh(this.L, b, a)
        }
    };
    A.prototype.uh = function(a) {
        if (this.Sv) {
            var b = this.oa,
            c = 0,
            d = 0;
            if (b.offsetParent !== f) {
                do c += b.offsetLeft + b.clientLeft,
                d += b.offsetTop + b.clientTop;
                while (b = b.offsetParent)
            }
            c += this.FA + this.DA + this.zw;
            d += this.GA + this.EA + this.Aw;
            b = a.pageX - c;
            a = a.pageY - d;
            this.Md !== m && (a = new D(b, a), lb(a, this.Md), b = a.x, a = a.y);
            return new D(b, a)
        }
        b = this.oa;
        c = b.getBoundingClientRect();
        d = a.clientX - c.left * (b.width / c.width);
        a = a.clientY - c.top * (b.height / c.height);
        this.Md !== m && (a = new D(d, a), lb(a, this.Md), d = a.x, a = a.y);
        return new D(d, a)
    };
    v.a(A, "alternateCoordinates", A.prototype.HE);
    v.defineProperty(A, {
        HE: m
    },
    s("Sv"),
    function(a) {
        v.e(a, "boolean", A, "alternateCoordinates");
        this.Sv = a
    });
    A.prototype.invalidateDocumentBounds = A.prototype.ai = function() {
        if (!this.cf && (mi(this), this.tx === p)) {
            this.tx = h;
            var a = this;
            requestAnimationFrame(function() {
                a.oa === m || a.Tg === h || (Tg(a), a.tx = p)
            })
        }
    };
    function Tg(a) {
        a.cf || Jh(a);
        a.Gj && li(a, a.Me());
        gi(a); ! a.gc && a.Hj && ni(a);
        for (a = a.Dt.f; a.next();) Tg(a.value)
    }
    A.prototype.redraw = A.prototype.gK = function() { ! this.gc && !this.cf && (xh(this), $h(this), Zh(this), mi(this), this.update())
    };
    A.prototype.isUpdateRequested = A.prototype.zJ = s("Tg");
    function yf(a) { ! a.gc && !a.cf && a.Tg === p && (a.Tg = h, requestAnimationFrame(function() {
            a.Tg && (a.update(), a.Tg = p)
        }))
    }
    A.prototype.update = A.prototype.update = function() {
        if (! (this.Hb === m || this.cf)) if (!this.$o || this.Tg) {
            this.$o && (this.$o = p);
            this.cf = h;
            this.Dy();
            this.Tg = p;
            Jh(this);
            var a = p;
            if (!this.Pf || this.Xq && this.ts) oi(this),
            this.Xq = p,
            a = h;
            Jh(this);
            this.yc.aa() || li(this, this.Me());
            a && (this.Pf || (pi(this), qi(this)), this.ga("LayoutCompleted"));
            Jh(this); ! this.gc && this.Hj && !ni(this) && (ni(this), a && (this.Pf || (pi(this), qi(this)), this.ga("LayoutCompleted")));
            a && !this.Pf && (this.Pf = h);
            this.fg();
            this.cf = p
        }
    };
    function pi(a) {
        a.Ej !== zh ? a.scale = hi(a, a.Ej) : a.Dk !== zh && (a.scale = hi(a, a.Dk));
        var b = a.position;
        if (b.aa()) a.kb.u(b) ? gi(a, h) : a.position = b;
        else {
            b = new D;
            b.bo(a.yc, a.fC);
            var c = a.ob,
            c = new E(0, 0, c.width, c.height),
            d = new D;
            d.bo(c, a.gC);
            c = a.FD(d);
            a.position = new D(b.x - c.x, b.y - c.y);
            gi(a, h)
        }
        a.ga("InitialLayoutCompleted");
        a = a.da;
        a !== m && a.clear()
    }
    function Jh(a) {
        for (var b = 0; 23 > b; b++) {
            var c = a.zg.f;
            if (c === m || 0 === a.zg.count) break;
            a.zg = new pa(P);
            for (var d = a,
            e = a.zg; c.next();) {
                var g = c.value;
                g instanceof mf && ri(d, g)
            }
            for (c.reset(); c.next();) d = c.value,
            d.Vd() && !(d instanceof mf) && (d.mk() ? (mh(d, Infinity, Infinity), d.vc()) : e.add(d));
            for (c.reset(); c.next();) d = c.value,
            d instanceof U && (d.mk() ? (mh(d, Infinity, Infinity), d.vc(), si(d)) : e.add(d));
            for (c.reset(); c.next();) d = c.value,
            d instanceof lf && (d.mk() ? (mh(d, Infinity, Infinity), d.vc()) : e.add(d))
        }
    }
    function ri(a, b) {
        for (var c = b.mc,
        d = []; c.next();) {
            var e = c.value;
            e instanceof mf ? (e.ac || e.Ec || e.ri) && ri(a, e) : e instanceof U ? d.push(e) : (mh(e, Infinity, Infinity), e.vc())
        }
        c = d.length;
        for (e = 0; e < c; e++) {
            var g = d[e];
            mh(g, Infinity, Infinity);
            g.vc()
        }
        mh(b, Infinity, Infinity);
        b.vc()
    }
    A.prototype.fg = function(a) {
        this.Hb === m && v.g("No div specified");
        this.oa === m && v.g("No canvas specified");
        a || (a = this.Jk);
        var b = a !== this.Jk;
        if (b) Wh(this);
        else if (!this.qi) return;
        if (0 < this.im.count) {
            for (var c = this.im.f; c.next();) Ag(c.key, c.value);
            this.im.clear()
        }
        a.setTransform(1, 0, 0, 1, 0, 0);
        a.clearRect(0, 0, this.oa.width, this.oa.height);
        c = this.Md;
        c.reset();
        1 !== this.Qb && c.scale(this.Qb);
        var d = this.kb; (0 !== d.x || 0 !== d.y) && c.translate( - d.x, -d.y);
        a.setTransform(c.m11, c.m12, c.m21, c.m22, c.Sa, c.Ta);
        t && t.WE && (a.fillStyle = "red", a.fillRect(0, 0, 8, 8), a.lineWidth = 8, a.strokeStyle = "rgba(255,255,0,.6)", c = this.ob, a.strokeRect(c.x, c.y, c.width, c.height), a.fillStyle = "rgba(0,255,0,.2)", a.fillRect(this.yc.x, this.yc.y, this.yc.width, this.yc.height));
        c = this.Cb.length;
        for (d = 0; d < c; d++) this.Cb.i[d].fg(a, this);
        this.Sz ? this.Sz.pv(this) && this.RD() : this.uh = aa();
        b ? Wh(this) : this.qi = this.vm = p
    };
    function mi(a) {
        if (a.Gj === p || a.Tg === p) a.Gj = h,
        yf(a)
    }
    function xh(a, b) {
        if (a.qi === p && (b === f || a.ob.Te(b))) a.qi = h,
        yf(a);
        for (var c = a.Dt.f; c.next();) xh(c.value)
    }
    function $h(a) {
        a.Hj === p && (a.Hj = h)
    }
    function Zh(a) {
        a.vm === p && (a.vm = h)
    }
    function ni(a) {
        var b = a.oa;
        if (b !== m) {
            var c = a.Hb,
            d = b.width,
            e = b.height,
            g = a.QA.copy(),
            i = p,
            j = 0,
            k = 0;
            a.qm && (j = a.ee);
            a.pm && (k = a.ee);
            if (c.clientWidth !== b.width + j || c.clientHeight !== b.height + k) a.qm = p,
            a.pm = p,
            b.width = c.clientWidth,
            b.height = c.clientHeight,
            i = h;
            a.Hj = p;
            if (!a.Kz || a.Lt)(d !== b.width || e !== b.height) && a.update();
            else {
                var l = a.ob,
                n = a.yc,
                r = n.width,
                c = n.height,
                q = l.width,
                j = l.height,
                u = n.x,
                x = l.x,
                z = n.right,
                C = l.right,
                k = n.y,
                G = l.y,
                n = n.bottom,
                l = l.bottom,
                H = "1px";
                a.bC && a.Je && (q + 1 < r ? (H = r - q + b.width + "px", a.Yj.scrollLeft = a.position.x - u) : u + 1 < x ? (H = x - u + b.width + "px", a.Yj.scrollLeft = a.Yj.scrollWidth - a.Yj.clientWidth) : z > C + 1 && (H = z - C + b.width + "px", a.Yj.scrollLeft = a.position.x));
                r = "1px" !== H;
                r !== a.pm && (i = a.ee / a.scale, "1px" === H ? (b.height += a.ee, j += i, l += i) : (b.height -= a.ee, j -= i, l -= i), i = h);
                a.pm = r;
                a.wA.style.width = H;
                r = "1px";
                a.cC && a.Ke && (j + 1 < c ? (r = c - j + b.height + "px", a.Zj.scrollTop = a.position.y - k) : k + 1 < G ? (r = G - k + b.height + "px", a.Zj.scrollTop = a.Zj.scrollHeight - a.Zj.clientHeight) : n > l + 1 && (r = n - l + b.height + "px", a.Zj.scrollTop = a.position.y));
                c = "1px" !== r;
                c !== a.qm && (b.width = "1px" === r ? b.width + a.ee: b.width - a.ee, i = h);
                a.qm = c;
                a.xA.style.height = r;
                i && Wh(a);
                c = b.width;
                j = b.height;
                a.Zj.style.height = j + "px";
                a.Zj.style.width = a.qm ? c + a.ee + "px": c + "px";
                a.Yj.style.width = c + "px";
                a.Yj.style.height = a.pm ? j + a.ee + "px": j + "px";
                a.vA = p;
                return d !== b.width || e !== b.height ? (l = a.ob, a.Wr(g, l, i ? h: f), a.update(), p) : h
            }
        }
    }
    function ti(a, b) {
        for (var c = a.Cb,
        d = c.count,
        e = 0; e < d; e++) c.Z(e).name === b && v.g("Cannot add layer with the name '" + b + "', a layer of the same name is already present in this diagram.")
    }
    v.a(A, "addsToTemporaryLayer", A.prototype.hr);
    v.defineProperty(A, {
        hr: m
    },
    s("vz"),
    function(a) {
        v.e(a, "boolean", A, "addsToTemporaryLayer");
        this.vz = a
    });
    A.prototype.add = A.prototype.add = function(a) {
        v.c(a, R, A, "add:part");
        var b = a.b;
        if (b !== this) {
            b !== m && v.g("Cannot add part " + a.toString() + " to " + this.toString() + ". It is already a part of " + b.toString());
            var c = this.hr ? "Tool": a.Ed,
            b = this.un(c);
            b === m && (b = this.un(""));
            b === m && v.g('Cannot add a Part when unable find a Layer named "' + c + '" and there is no default Layer');
            a.ta !== b && (c = a.b === this ? b.lk(99999999, a, h) : b.lk(99999999, a), 0 <= c && this.Yd(Ee, "parts", b, m, a, m, c), this.ai(), a.r(ui), c = a.Ir, c !== m && c(a, m, b))
        }
    };
    A.prototype.lk = function(a) {
        if (a instanceof S) {
            if (this.yt.add(a), a instanceof mf) {
                var b = a.Wa;
                b === m ? this.gl.add(a) : b.Zk.add(a);
                b = a.xb;
                b !== m && (b.b = this)
            }
        } else a instanceof U ? this.et.add(a) : a instanceof lf || this.Db.add(a);
        if (b = a.data) {
            a instanceof lf || this.Mf.add(b, a);
            var c = this;
            vi(a, a,
            function(a) {
                wi(c, a)
            })
        } (a.Ec === h || a.ri === h) && this.zg.add(a);
        xi(a, h);
        a.eb() && (xh(this), mi(this))
    };
    A.prototype.Cd = function(a) {
        if (a instanceof S) {
            if (this.yt.remove(a), a instanceof mf) {
                var b = a.Wa;
                b === m ? this.gl.remove(a) : b.Zk.remove(a);
                b = a.xb;
                b !== m && (b.b = m)
            }
        } else a instanceof U ? this.et.remove(a) : a instanceof lf || this.Db.remove(a);
        if (b = a.data) {
            a instanceof lf || this.Mf.remove(b);
            var c = this;
            vi(a, a,
            function(a) {
                yi(c, a)
            })
        }
        this.zg.remove(a);
        a.eb() && (xh(this), mi(this))
    };
    A.prototype.remove = A.prototype.remove = function(a) {
        v.c(a, R, A, "remove:part");
        var b = a.ta;
        if (b !== m && b.b === this) {
            a.Ha = p;
            a.r(zi);
            a.tl();
            var c = b.Cd( - 1, a);
            0 <= c && this.Yd(Fe, "parts", b, a, m, c, m);
            c = a.Ir;
            c !== m && c(a, b, m);
            this.ai();
            this.sa.standardMouseOver()
        }
    };
    A.prototype.addLayer = A.prototype.er = function(a) {
        v.c(a, ff, A, "addLayer:layer");
        ti(this, a.name);
        a.yf(this);
        var b = this.Cb,
        c = b.count - 1;
        if (!a.Tc) for (; 0 <= c && b.Z(c).Tc;) c--;
        b.lc(c + 1, a);
        mi(this)
    };
    A.prototype.addLayerBefore = A.prototype.wE = function(a, b) {
        v.c(a, ff, A, "addLayer:layer");
        ti(this, a.name);
        a.yf(this);
        for (var c = this.Cb.count,
        d = 0; d < c; d++) if (this.Cb.Z(d) === b) {
            this.Cb.lc(d, a);
            break
        }
        mi(this)
    };
    A.prototype.addLayerAfter = A.prototype.eH = function(a, b) {
        v.c(a, ff, A, "addLayer:layer");
        ti(this, a.name);
        a.yf(this);
        for (var c = this.Cb.count,
        d = 0; d < c; d++) if (this.Cb.Z(d) === b) {
            this.Cb.lc(d + 1, a);
            break
        }
        mi(this)
    };
    A.prototype.removeLayer = A.prototype.kK = function(a) {
        if ("" !== a.name && this.Cb.remove(a)) {
            for (var b = a.Db.copy().f; b.next();) {
                var c = b.value,
                d = c.Ed;
                c.Ed = "";
                d !== a.name && (c.Ed = d)
            }
            mi(this)
        }
    };
    A.prototype.findLayer = A.prototype.un = function(a) {
        for (var b = this.Kr; b.next();) {
            var c = b.value;
            if (c.name === a) return c
        }
        return m
    };
    A.prototype.addChangedListener = A.prototype.Bx = function(a) {
        v.e(a, "function", A, "addChangedListener:listener");
        this.li === m && (this.li = new y("function"));
        this.li.add(a)
    };
    A.prototype.removeChangedListener = A.prototype.Qy = function(a) {
        v.e(a, "function", A, "removeChangedListener:listener");
        this.li !== m && (this.li.remove(a), 0 === this.li.count && (this.li = m))
    };
    A.prototype.ou = function(a) {
        this.nb || this.da.$B(a);
        if (this.li !== m) for (var b = this.li.f; b.next();) {
            var c = b.value;
            c(a)
        }
    };
    A.prototype.raiseChangedEvent = A.prototype.Yd = function(a, b, c, d, e, g, i) {
        g === f && (g = m);
        i === f && (i = m);
        var j = new Be;
        j.b = this;
        j.Sc = a;
        j.propertyName = b;
        j.object = c;
        j.oldValue = d;
        j.We = g;
        j.newValue = e;
        j.Ve = i;
        this.ou(j)
    };
    A.prototype.raiseChanged = A.prototype.d = function(a, b, c, d, e) {
        this.Yd(De, a, this, b, c, d, e)
    };
    v.m(A, {
        da: "undoManager"
    },
    function() {
        return this.ff.da
    });
    v.a(A, "skipsUndoManager", A.prototype.nb);
    v.defineProperty(A, {
        nb: "skipsUndoManager"
    },
    s("Gh"),
    function(a) {
        v.e(a, "boolean", A, "skipsUndoManager");
        this.Gh = a;
        this.ff.Gh = a
    });
    A.prototype.changeState = A.prototype.kr = function(a, b) {
        if (a !== m && a.b === this) {
            var c = this.Pk;
            try {
                this.Pk = h;
                var d = a.Sc;
                if (d === De) {
                    var e = a.object,
                    g = a.propertyName,
                    i = a.ca(b);
                    v.fb(e, g, i);
                    if (e instanceof P) {
                        var j = e.W;
                        j !== m && j.Wg()
                    }
                } else if (d === Ee) {
                    var k = a.object,
                    l = a.Ve,
                    e = a.newValue;
                    if (k instanceof w) {
                        if ("number" === typeof l && e instanceof P) {
                            var n = k;
                            b ? n.Cd(l) : n.lc(l, e);
                            j = k.W;
                            j !== m && j.Wg()
                        }
                    } else if (k instanceof ff) {
                        var r = a.We === h;
                        if ("number" === typeof l && e instanceof R) {
                            var q = k;
                            b ? (e.Wg(), q.Cd(l, e, r)) : q.lk(l, e, r)
                        }
                    } else v.g("unknown ChangedEvent.Insert object: " + a.toString())
                } else d === Fe ? (k = a.object, l = a.We, e = a.oldValue, k instanceof w ? "number" === typeof l && e instanceof P && (n = k, b ? n.lc(l, e) : n.Cd(l)) : k instanceof ff ? (r = a.Ve === h, "number" === typeof l && e instanceof R && (q = k, b ? q.lk(l, e, r) : (e.Wg(), q.Cd(l, e, r)))) : v.g("unknown ChangedEvent.Remove object: " + a.toString())) : d !== Ce && v.g("unknown ChangedEvent: " + a.toString())
            } finally {
                this.Pk = c
            }
        }
    };
    A.prototype.startTransaction = A.prototype.Nb = function(a) {
        return this.da.Nb(a)
    };
    A.prototype.commitTransaction = A.prototype.Sd = function(a) {
        return this.da.Sd(a)
    };
    A.prototype.rollbackTransaction = A.prototype.Yr = function() {
        return this.da.Yr()
    };
    A.prototype.updateAllTargetBindings = A.prototype.LK = function() {
        for (var a = this.Zi; a.next();) a.value.nc();
        for (a = this.pk; a.next();) a.value.nc();
        for (a = this.links; a.next();) a.value.nc()
    };
    A.prototype.Wr = function(a, b, c) {
        if (!this.gc) {
            Zh(this);
            xh(this);
            $h(this);
            mi(this);
            var d = this.xb;
            d !== m && (d.Ru && !c && (a.width !== b.width || a.height !== b.height)) && d.r();
            gi(this);
            this.ga("ViewportBoundsChanged", c ? {}: m, a);
            qi(this)
        }
    };
    function qi(a) {
        var b = a.Wc;
        if (b !== m && b.visible) {
            for (var c, d = c = 1,
            e = b.wa.length,
            g = 0; g < e; g++) {
                var i = b.wa.i[g],
                j = i.$h;
                2 > j || ("LineV" === i.Xa ? d = d * j / Gd(d, j) : c = c * j / Gd(c, j))
            }
            e = b.Cr;
            c = new sb(c * e.width, d * e.height);
            a = a.ob;
            a.aa() && (b.width = a.width + 2 * c.width, b.height = a.height + 2 * c.height, a = Fd(a.x, a.y, 0, 0, c.width, c.height), b.W.location = new D(a.x - c.width, a.y - c.height))
        }
    }
    A.prototype.clearSelection = A.prototype.Ox = function() {
        this.ga("ChangingSelection");
        pf(this);
        this.ga("ChangedSelection")
    };
    function pf(a) {
        a = a.selection;
        if (0 < a.count) {
            for (var b = a.Df(), c = b.length, d = 0; d < c; d++) b[d].Ha = p;
            a.qa();
            a.clear();
            a.freeze()
        }
    }
    A.prototype.select = A.prototype.select = function(a) {
        if (a !== m && a.ta.b === this && (!a.Ha || 1 < this.selection.count)) this.ga("ChangingSelection"),
        pf(this),
        a.Ha = h,
        this.ga("ChangedSelection")
    };
    A.prototype.selectCollection = A.prototype.Uy = function(a) {
        this.ga("ChangingSelection");
        pf(this);
        for (a = a.f; a.next();) a.value.Ha = h;
        this.ga("ChangedSelection")
    };
    A.prototype.scroll = function(a, b, c) {
        c === f && (c = 1);
        var d = "up" === b || "down" === b,
        e;
        "pixel" === a ? e = c: "line" === a ? e = c * (d ? this.$r: this.Zr) : "page" === a ? 0 !== window.innerHeight && (e = Math.max(window.innerHeight - (d ? this.$r: this.Zr), 0), e *= c) : v.g("scrolling unit must be 'pixel', 'line', or 'page', not: " + a);
        e /= this.scale;
        c = this.position.copy();
        "up" === b ? c.y = this.position.y - e: "down" === b ? c.y = this.position.y + e: "left" === b ? c.x = this.position.x - e: "right" === b ? c.x = this.position.x + e: v.g("scrolling direction must be 'up', 'down', 'left', or 'right', not: " + b);
        this.position = c
    };
    A.prototype.scrollToRect = A.prototype.qK = function(a) {
        var b = this.ob;
        b.pl(a) || (a = a.pu, a.x -= b.width / 2, a.y -= b.height / 2, this.position = a)
    };
    A.prototype.centerRect = A.prototype.NH = function(a) {
        var b = this.ob,
        a = a.pu;
        a.x -= b.width / 2;
        a.y -= b.height / 2;
        this.position = a
    };
    A.prototype.transformDocToView = A.prototype.ks = function(a) {
        var b = this.Md;
        b.reset();
        1 !== this.Qb && b.scale(this.Qb);
        var c = this.kb; (0 !== c.x || 0 !== c.y) && (isFinite(c.x) && isFinite(c.y)) && b.translate( - c.x, -c.y);
        return a.copy().transform(this.Md)
    };
    A.prototype.transformViewToDoc = A.prototype.FD = function(a) {
        var b = this.Md;
        b.reset();
        1 !== this.Qb && b.scale(this.Qb);
        var c = this.kb; (0 !== c.x || 0 !== c.y) && (isFinite(c.x) && isFinite(c.y)) && b.translate( - c.x, -c.y);
        return lb(a.copy(), this.Md)
    };
    var zh;
    A.None = zh = v.l(A, "None", 0);
    var ji;
    A.Uniform = ji = v.l(A, "Uniform", 1);
    var ki;
    A.UniformToFill = ki = v.l(A, "UniformToFill", 2);
    var hg;
    A.CycleAll = hg = v.l(A, "CycleAll", 10);
    var lg;
    A.CycleNotDirected = lg = v.l(A, "CycleNotDirected", 11);
    var sg;
    A.CycleNotDirectedFast = sg = v.l(A, "CycleNotDirectedFast", 12);
    var tg;
    A.CycleNotUndirected = tg = v.l(A, "CycleNotUndirected", 13);
    var ig;
    A.CycleDestinationTree = ig = v.l(A, "CycleDestinationTree", 14);
    var kg;
    A.CycleSourceTree = kg = v.l(A, "CycleSourceTree", 15);
    v.a(A, "validCycle", A.prototype.LD);
    v.defineProperty(A, {
        LD: "validCycle"
    },
    s("eu"),
    function(a) {
        var b = this.eu;
        b !== a && (v.Va(a, A, A, "validCycle"), this.eu = a, this.d("validCycle", b, a))
    });
    v.m(A, {
        Kr: "layers"
    },
    function() {
        return this.Cb.f
    });
    v.a(A, "isModelReadOnly", A.prototype.Ud);
    v.defineProperty(A, {
        Ud: "isModelReadOnly"
    },
    function() {
        var a = this.ff;
        return a === m ? p: a.Pa
    },
    function(a) {
        var b = this.ff;
        b !== m && (b.Pa = a)
    });
    v.a(A, "isReadOnly", A.prototype.Pa);
    v.defineProperty(A, {
        Pa: "isReadOnly"
    },
    s("Ij"),
    function(a) {
        var b = this.Ij;
        b !== a && (v.e(a, "boolean", A, "isReadOnly"), this.Ij = a, this.d("isReadOnly", b, a))
    });
    v.a(A, "isEnabled", A.prototype.isEnabled);
    v.defineProperty(A, {
        isEnabled: "isEnabled"
    },
    s("vh"),
    function(a) {
        var b = this.vh;
        b !== a && (v.e(a, "boolean", A, "isEnabled"), this.vh = a, this.d("isEnabled", b, a))
    });
    v.a(A, "allowClipboard", A.prototype.lu);
    v.defineProperty(A, {
        lu: "allowClipboard"
    },
    s("ls"),
    function(a) {
        var b = this.ls;
        b !== a && (v.e(a, "boolean", A, "allowClipboard"), this.ls = a, this.d("allowClipboard", b, a))
    });
    v.a(A, "allowCopy", A.prototype.Nh);
    v.defineProperty(A, {
        Nh: "allowCopy"
    },
    s("gj"),
    function(a) {
        var b = this.gj;
        b !== a && (v.e(a, "boolean", A, "allowCopy"), this.gj = a, this.d("allowCopy", b, a))
    });
    v.a(A, "allowDelete", A.prototype.ck);
    v.defineProperty(A, {
        ck: "allowDelete"
    },
    s("hj"),
    function(a) {
        var b = this.hj;
        b !== a && (v.e(a, "boolean", A, "allowDelete"), this.hj = a, this.d("allowDelete", b, a))
    });
    v.a(A, "allowDragOut", A.prototype.mu);
    v.defineProperty(A, {
        mu: "allowDragOut"
    },
    s("ms"),
    function(a) {
        var b = this.ms;
        b !== a && (v.e(a, "boolean", A, "allowDragOut"), this.ms = a, this.d("allowDragOut", b, a))
    });
    v.a(A, "allowDrop", A.prototype.ZA);
    v.defineProperty(A, {
        ZA: "allowDrop"
    },
    s("ns"),
    function(a) {
        var b = this.ns;
        b !== a && (v.e(a, "boolean", A, "allowDrop"), this.ns = a, this.d("allowDrop", b, a))
    });
    v.a(A, "allowTextEdit", A.prototype.kn);
    v.defineProperty(A, {
        kn: "allowTextEdit"
    },
    s("rj"),
    function(a) {
        var b = this.rj;
        b !== a && (v.e(a, "boolean", A, "allowTextEdit"), this.rj = a, this.d("allowTextEdit", b, a))
    });
    v.a(A, "allowGroup", A.prototype.dn);
    v.defineProperty(A, {
        dn: "allowGroup"
    },
    s("ij"),
    function(a) {
        var b = this.ij;
        b !== a && (v.e(a, "boolean", A, "allowGroup"), this.ij = a, this.d("allowGroup", b, a))
    });
    v.a(A, "allowUngroup", A.prototype.ln);
    v.defineProperty(A, {
        ln: "allowUngroup"
    },
    s("sj"),
    function(a) {
        var b = this.sj;
        b !== a && (v.e(a, "boolean", A, "allowUngroup"), this.sj = a, this.d("allowUngroup", b, a))
    });
    v.a(A, "allowInsert", A.prototype.en);
    v.defineProperty(A, {
        en: "allowInsert"
    },
    s("ps"),
    function(a) {
        var b = this.ps;
        b !== a && (v.e(a, "boolean", A, "allowInsert"), this.ps = a, this.d("allowInsert", b, a))
    });
    v.a(A, "allowLink", A.prototype.kl);
    v.defineProperty(A, {
        kl: "allowLink"
    },
    s("jj"),
    function(a) {
        var b = this.jj;
        b !== a && (v.e(a, "boolean", A, "allowLink"), this.jj = a, this.d("allowLink", b, a))
    });
    v.a(A, "allowRelink", A.prototype.Gi);
    v.defineProperty(A, {
        Gi: "allowRelink"
    },
    s("mj"),
    function(a) {
        var b = this.mj;
        b !== a && (v.e(a, "boolean", A, "allowRelink"), this.mj = a, this.d("allowRelink", b, a))
    });
    v.a(A, "allowMove", A.prototype.dk);
    v.defineProperty(A, {
        dk: "allowMove"
    },
    s("kj"),
    function(a) {
        var b = this.kj;
        b !== a && (v.e(a, "boolean", A, "allowMove"), this.kj = a, this.d("allowMove", b, a))
    });
    v.a(A, "allowPrint", A.prototype.fn);
    v.defineProperty(A, {
        fn: "allowPrint"
    },
    s("lj"),
    function(a) {
        var b = this.lj;
        b !== a && (v.e(a, "boolean", A, "allowPrint"), this.lj = a, this.d("allowPrint", b, a))
    });
    v.a(A, "allowReshape", A.prototype.gn);
    v.defineProperty(A, {
        gn: "allowReshape"
    },
    s("nj"),
    function(a) {
        var b = this.nj;
        b !== a && (v.e(a, "boolean", A, "allowReshape"), this.nj = a, this.d("allowReshape", b, a))
    });
    v.a(A, "allowResize", A.prototype.hn);
    v.defineProperty(A, {
        hn: "allowResize"
    },
    s("oj"),
    function(a) {
        var b = this.oj;
        b !== a && (v.e(a, "boolean", A, "allowResize"), this.oj = a, this.d("allowResize", b, a))
    });
    v.a(A, "allowRotate", A.prototype.jn);
    v.defineProperty(A, {
        jn: "allowRotate"
    },
    s("pj"),
    function(a) {
        var b = this.pj;
        b !== a && (v.e(a, "boolean", A, "allowRotate"), this.pj = a, this.d("allowRotate", b, a))
    });
    v.a(A, "allowSelect", A.prototype.Pd);
    v.defineProperty(A, {
        Pd: "allowSelect"
    },
    s("qj"),
    function(a) {
        var b = this.qj;
        b !== a && (v.e(a, "boolean", A, "allowSelect"), this.qj = a, this.d("allowSelect", b, a))
    });
    v.a(A, "allowUndo", A.prototype.Dx);
    v.defineProperty(A, {
        Dx: "allowUndo"
    },
    s("qs"),
    function(a) {
        var b = this.qs;
        b !== a && (v.e(a, "boolean", A, "allowUndo"), this.qs = a, this.d("allowUndo", b, a))
    });
    v.a(A, "allowZoom", A.prototype.ir);
    v.defineProperty(A, {
        ir: "allowZoom"
    },
    s("ss"),
    function(a) {
        var b = this.ss;
        b !== a && (v.e(a, "boolean", A, "allowZoom"), this.ss = a, this.d("allowZoom", b, a))
    });
    v.a(A, "hasVerticalScrollbar", A.prototype.cC);
    v.defineProperty(A, {
        cC: "hasVerticalScrollbar"
    },
    s("Ss"),
    function(a) {
        var b = this.Ss;
        b !== a && (v.e(a, "boolean", A, "hasVerticalScrollbar"), this.Ss = a, this.d("hasVerticalScrollbar", b, a), gi(this))
    });
    v.a(A, "hasHorizontalScrollbar", A.prototype.bC);
    v.defineProperty(A, {
        bC: "hasHorizontalScrollbar"
    },
    s("Rs"),
    function(a) {
        var b = this.Rs;
        b !== a && (v.e(a, "boolean", A, "hasHorizontalScrollbar"), this.Rs = a, this.d("hasHorizontalScrollbar", b, a), gi(this))
    });
    v.a(A, "allowHorizontalScroll", A.prototype.Je);
    v.defineProperty(A, {
        Je: "allowHorizontalScroll"
    },
    s("os"),
    function(a) {
        var b = this.os;
        b !== a && (v.e(a, "boolean", A, "allowHorizontalScroll"), this.os = a, this.d("allowHorizontalScroll", b, a), gi(this))
    });
    v.a(A, "allowVerticalScroll", A.prototype.Ke);
    v.defineProperty(A, {
        Ke: "allowVerticalScroll"
    },
    s("rs"),
    function(a) {
        var b = this.rs;
        b !== a && (v.e(a, "boolean", A, "allowVerticalScroll"), this.rs = a, this.d("allowVerticalScroll", b, a), gi(this))
    });
    v.a(A, "scrollHorizontalLineChange", A.prototype.Zr);
    v.defineProperty(A, {
        Zr: "scrollHorizontalLineChange"
    },
    s("Mt"),
    function(a) {
        var b = this.Mt;
        b !== a && (v.e(a, "number", A, "scrollHorizontalLineChange"), 0 > a && v.ha(a, ">= 0", A, "scrollHorizontalLineChange"), this.Mt = a, this.d("scrollHorizontalLineChange", b, a))
    });
    v.a(A, "scrollVerticalLineChange", A.prototype.$r);
    v.defineProperty(A, {
        $r: "scrollVerticalLineChange"
    },
    s("Nt"),
    function(a) {
        var b = this.Nt;
        b !== a && (v.e(a, "number", A, "scrollVerticalLineChange"), 0 > a && v.ha(a, ">= 0", A, "scrollVerticalLineChange"), this.Nt = a, this.d("scrollVerticalLineChange", b, a))
    });
    v.a(A, "lastInput", A.prototype.F);
    v.defineProperty(A, {
        F: "lastInput"
    },
    s("pc"),
    function(a) {
        t && v.c(a, se, A, "lastInput");
        this.pc = a
    });
    v.a(A, "firstInput", A.prototype.jc);
    v.defineProperty(A, {
        jc: "firstInput"
    },
    s("Of"),
    function(a) {
        t && v.c(a, se, A, "firstInput");
        this.Of = a
    });
    v.a(A, "currentCursor", A.prototype.xc);
    v.defineProperty(A, {
        xc: "currentCursor"
    },
    s("Hs"),
    function(a) {
        v.e(a, "string", A, "currentCursor");
        this.Hs === a || "" === a && this.Hs === this.Mo || (this.Hs = a, "" !== a ? (this.oa.style.cursor = a, document.body.style.cursor = a) : (this.oa.style.cursor = this.Yx, document.body.style.cursor = this.Yx))
    });
    v.a(A, "defaultCursor", A.prototype.Yx);
    v.defineProperty(A, {
        Yx: "defaultCursor"
    },
    s("Mo"),
    function(a) {
        v.e(a, "string", A, "defaultCursor");
        var b = this.Mo;
        b !== a && (this.Mo = a, this.d("defaultCursor", b, a))
    });
    v.a(A, "hasGestureZoom", A.prototype.HF);
    v.defineProperty(A, {
        HF: "hasGestureZoom"
    },
    s("Nk"),
    function(a) {
        var b = this.Nk;
        b !== a && (v.e(a, "boolean", A, "hasGestureZoom"), this.Nk = a, this.d("hasGestureZoom", b, a))
    });
    v.a(A, "click", A.prototype.click);
    v.defineProperty(A, {
        click: "click"
    },
    s("oh"),
    function(a) {
        var b = this.oh;
        b !== a && (a !== m && v.e(a, "function", A, "click"), this.oh = a, this.d("click", b, a))
    });
    v.a(A, "doubleClick", A.prototype.ul);
    v.defineProperty(A, {
        ul: "doubleClick"
    },
    s("rh"),
    function(a) {
        var b = this.rh;
        b !== a && (a !== m && v.e(a, "function", A, "doubleClick"), this.rh = a, this.d("doubleClick", b, a))
    });
    v.a(A, "contextClick", A.prototype.nr);
    v.defineProperty(A, {
        nr: "contextClick"
    },
    s("ph"),
    function(a) {
        var b = this.ph;
        b !== a && (a !== m && v.e(a, "function", A, "contextClick"), this.ph = a, this.d("contextClick", b, a))
    });
    v.a(A, "mouseOver", A.prototype.Sr);
    v.defineProperty(A, {
        Sr: "mouseOver"
    },
    s("Eh"),
    function(a) {
        var b = this.Eh;
        b !== a && (a !== m && v.e(a, "function", A, "mouseOver"), this.Eh = a, this.d("mouseOver", b, a))
    });
    v.a(A, "mouseHover", A.prototype.Rr);
    v.defineProperty(A, {
        Rr: "mouseHover"
    },
    s("Dh"),
    function(a) {
        var b = this.Dh;
        b !== a && (a !== m && v.e(a, "function", A, "mouseHover"), this.Dh = a, this.d("mouseHover", b, a))
    });
    v.a(A, "mouseHold", A.prototype.Qr);
    v.defineProperty(A, {
        Qr: "mouseHold"
    },
    s("Ch"),
    function(a) {
        var b = this.Ch;
        b !== a && (a !== m && v.e(a, "function", A, "mouseHold"), this.Ch = a, this.d("mouseHold", b, a))
    });
    v.a(A, "mouseDragOver", A.prototype.FC);
    v.defineProperty(A, {
        FC: "mouseDragOver"
    },
    s("st"),
    function(a) {
        var b = this.st;
        b !== a && (a !== m && v.e(a, "function", A, "mouseDragOver"), this.st = a, this.d("mouseDragOver", b, a))
    });
    v.a(A, "mouseDrop", A.prototype.Pr);
    v.defineProperty(A, {
        Pr: "mouseDrop"
    },
    s("Bh"),
    function(a) {
        var b = this.Bh;
        b !== a && (a !== m && v.e(a, "function", A, "mouseDrop"), this.Bh = a, this.d("mouseDrop", b, a))
    });
    v.a(A, "toolTip", A.prototype.js);
    v.defineProperty(A, {
        js: "toolTip"
    },
    s("Lh"),
    function(a) {
        var b = this.Lh;
        b !== a && (a !== m && v.c(a, lf, A, "toolTip"), this.Lh = a, this.d("toolTip", b, a))
    });
    v.a(A, "contextMenu", A.prototype.contextMenu);
    v.defineProperty(A, {
        contextMenu: "contextMenu"
    },
    s("qh"),
    function(a) {
        var b = this.qh;
        b !== a && (a !== m && v.c(a, lf, A, "contextMenu"), this.qh = a, this.d("contextMenu", b, a))
    });
    v.a(A, "commandHandler", A.prototype.Ad);
    v.defineProperty(A, {
        Ad: "commandHandler"
    },
    s("aw"),
    function(a) {
        var b = this.aw;
        b !== a && (v.c(a, sa, A, "commandHandler"), a.b !== m && v.g("Cannot share CommandHandlers between Diagrams: " + a.toString()), b !== m && b.yf(m), this.aw = a, a.yf(this))
    });
    v.a(A, "toolManager", A.prototype.Vb);
    v.defineProperty(A, {
        Vb: "toolManager"
    },
    s("du"),
    function(a) {
        var b = this.du;
        b !== a && (v.c(a, jf, A, "toolManager"), a.b !== m && v.g("Cannot share ToolManagers between Diagrams: " + a.toString()), b !== m && b.yf(m), this.du = a, a.yf(this))
    });
    v.a(A, "defaultTool", A.prototype.wu);
    v.defineProperty(A, {
        wu: "defaultTool"
    },
    s("iw"),
    function(a) {
        var b = this.iw;
        b !== a && (v.c(a, zf, A, "defaultTool"), this.iw = a, this.sa === b && (this.sa = a))
    });
    v.a(A, "currentTool", A.prototype.sa);
    v.defineProperty(A, {
        sa: "currentTool"
    },
    s("dw"),
    function(a) {
        var b = this.dw;
        b !== m && (b.T && b.doDeactivate(), b.cancelWaitAfter(), b.doStop());
        a === m && (a = this.wu);
        a !== m && (v.c(a, zf, A, "currentTool"), this.dw = a, a.yf(this), a.doStart())
    });
    v.m(A, {
        selection: "selection"
    },
    s("Qt"));
    v.a(A, "maxSelectionCount", A.prototype.yC);
    v.defineProperty(A, {
        yC: "maxSelectionCount"
    },
    s("lt"),
    function(a) {
        var b = this.lt;
        if (b !== a) if (v.e(a, "number", A, "maxSelectionCount"), 0 <= a && !isNaN(a)) {
            if (this.lt = a, this.d("maxSelectionCount", b, a), !this.da.cb && (a = this.selection.count - a, 0 < a)) {
                this.ga("ChangingSelection");
                for (var b = this.selection.Df(), c = 0; c < a; c++) b[c].Ha = p;
                this.ga("ChangedSelection")
            }
        } else v.ha(a, ">= 0", A, "maxSelectionCount")
    });
    v.a(A, "nodeSelectionAdornmentTemplate", A.prototype.IC);
    v.defineProperty(A, {
        IC: "nodeSelectionAdornmentTemplate"
    },
    s("Ow"),
    function(a) {
        var b = this.Ow;
        b !== a && (v.c(a, lf, A, "nodeSelectionAdornmentTemplate"), this.Ow = a, this.d("nodeSelectionAdornmentTemplate", b, a))
    });
    v.a(A, "groupSelectionAdornmentTemplate", A.prototype.YB);
    v.defineProperty(A, {
        YB: "groupSelectionAdornmentTemplate"
    },
    s("yw"),
    function(a) {
        var b = this.yw;
        b !== a && (v.c(a, lf, A, "groupSelectionAdornmentTemplate"), this.yw = a, this.d("groupSelectionAdornmentTemplate", b, a))
    });
    v.a(A, "linkSelectionAdornmentTemplate", A.prototype.uC);
    v.defineProperty(A, {
        uC: "linkSelectionAdornmentTemplate"
    },
    s("Gw"),
    function(a) {
        var b = this.Gw;
        b !== a && (v.c(a, lf, A, "linkSelectionAdornmentTemplate"), this.Gw = a, this.d("linkSelectionAdornmentTemplate", b, a))
    });
    v.a(A, "isModified", A.prototype.SF);
    v.defineProperty(A, {
        SF: "isModified"
    },
    function() {
        var a = this.da;
        return a === m ? this.Zz: a.rl !== m ? h: this.Zz && this.Cj !== a.Ti
    },
    function(a) {
        v.e(a, "boolean", A, "isModified");
        this.Zz = a;
        var b = this.da; ! a && b && (this.Cj = b.Ti)
    });
    v.a(A, "model", A.prototype.P);
    v.defineProperty(A, {
        P: "model"
    },
    s("ff"),
    function(a) {
        var b = this.ff;
        if (b !== a) {
            v.c(a, B, A, "model");
            b !== m && (b.da !== a.da && b.da.QF) && v.g("Do not replace a Diagram.model while a transaction is in progress.");
            this.Pf = p;
            this.$o = h;
            this.Tg = p;
            var c = this.cf;
            this.cf = h;
            b !== m && (b.Qy(this.eA), b instanceof N && Bh(this, b.hg), Bh(this, b.gh));
            this.ff = a;
            a.Bx(this.dA);
            Ch(this, a.gh);
            a instanceof N && Dh(this, a.hg);
            a.Qy(this.dA);
            a.Bx(this.eA);
            this.cf = c;
            yf(this);
            b !== m && (a.da.isEnabled = b.da.isEnabled)
        }
    });
    function Ah(a, b, c) {
        var d = a.gg(b);
        if (d !== m && "string" === typeof c) d.nc(c);
        else {
            d = m;
            for (a = a.Sk.f; a.next();) {
                for (var e = a.value,
                g = 0; g < e.length; g++) {
                    var i = e[g];
                    i.df !== m && (i = i.df.ca(b), i !== m && (d === m && (d = []), d.push(i)))
                }
                if (d !== m) break
            }
            b = d;
            if (b !== m && "string" === typeof c) for (d = 0; d < b.length; d++) b[d].nc(c)
        }
    }
    function wi(a, b) {
        var c = b.Jj;
        if (v.isArray(c)) {
            var d = a.Sk.ca(c);
            if (d === m) a.Sk.add(c, [b]);
            else {
                for (c = 0; c < d.length; c++) if (d[c] === b) return;
                d.push(b)
            }
        }
    }
    function yi(a, b) {
        var c = b.Jj;
        if (v.isArray(c)) {
            var d = a.Sk.ca(c);
            if (d !== m) for (var e = 0; e < d.length; e++) if (d[e] === b) {
                d.splice(e, 1);
                0 === d.length && a.Sk.remove(c);
                break
            }
        }
    }
    A.prototype.clear = A.prototype.clear = function() {
        var a = m;
        this.Wc !== m && (a = this.Wc.W);
        this.P.clear();
        for (var b = this.Cb.length,
        c = 0; c < b; c++) this.Cb.i[c].clear();
        this.zg.clear();
        this.im.clear();
        this.yt.clear();
        this.gl.clear();
        this.et.clear();
        this.Db.clear();
        this.Mf.clear();
        this.Sk.clear();
        this.Qt.qa();
        this.Qt.clear();
        this.Qt.freeze();
        this.dm = this.$w = m;
        this.Ms = (new E(NaN, NaN, NaN, NaN)).freeze();
        a !== m && (this.add(a), this.Db.remove(a))
    };
    A.prototype.reset = A.prototype.reset = function() {
        this.gc = h;
        this.clear();
        this.Cb = new y(ff);
        this.kb = (new D(NaN, NaN)).freeze();
        this.Qb = 1;
        this.pt = 1E-4;
        this.kt = 100;
        this.hu = (new D(NaN, NaN)).freeze();
        this.Ps = (new E(NaN, NaN, NaN, NaN)).freeze();
        this.Dk = zh;
        this.Hk = ec;
        this.Ej = zh;
        this.sm = ec;
        this.Us = this.Ts = fc;
        this.us = (new Hb(16, 16, 16, 16)).freeze();
        this.bt = h;
        this.eu = hg;
        this.Mo = "auto";
        this.ff = this.qh = this.Lh = this.Bh = this.st = this.Ch = this.Dh = this.Eh = this.ph = this.rh = this.oh = m;
        this.Ij = p;
        this.hj = this.gj = this.ls = this.vh = h;
        this.ns = this.ms = p;
        this.rs = this.os = this.Ss = this.Rs = this.ss = this.qs = this.qj = this.pj = this.oj = this.nj = this.lj = this.kj = this.mj = this.jj = this.ps = this.sj = this.ij = this.rj = h;
        this.Nt = this.Mt = 16;
        this.Ld = (new Hb(5)).freeze();
        this.lt = 999999999;
        this.Zc = m;
        Kh(this);
        Lh(this);
        this.Wc = m;
        this.P = new N;
        this.Gh = h;
        this.xb = new Mh;
        this.gc = this.Gh = p
    };
    A.prototype.rebuildParts = A.prototype.Kl = function() {
        for (var a = [], b = this.selection.f; b.next();) {
            var c = b.value.data;
            c && a.push(c)
        }
        b = this.P;
        b instanceof N && Bh(this, b.hg);
        Bh(this, b.gh);
        Ch(this, b.gh);
        b instanceof N && Dh(this, b.hg);
        for (b = 0; b < a.length; b++) if (c = this.gg(a[b])) c.Ha = h
    };
    function Ch(a, b) {
        if (b !== m) {
            for (var c = a.P,
            d = v.Eb(b), e = 0; e < d; e++) {
                var g = v.qb(b, e);
                c.Ii(g) ? Eh(a, g, p) : Fh(a, g)
            }
            if (c instanceof N) {
                for (e = 0; e < d; e++) g = v.qb(b, e),
                c.Ii(g) && Ai(a, g);
                for (c = a.links; c.next();) Bi(c.value)
            }
            a.oy(p)
        }
    }
    function Eh(a, b, c) {
        if (! (b === f || b === m) && !a.da.cb && !a.Mf.contains(b)) {
            c === f && (c = h);
            var d = a.getCategoryForNodeData(b),
            e = a.findTemplateForNodeData(b, d);
            e instanceof R && (of(e), e = e.copy(), e instanceof R && (e.tj = d, a.add(e), e.data = b, c && Ai(a, b)))
        }
    }
    A.prototype.getCategoryForNodeData = A.prototype.TB = function(a) {
        var b = this.P,
        c = b.TB(a),
        d = p;
        b instanceof N && (d = b.ty(a));
        d && "" === c && (c = "LinkLabel");
        return c
    };
    A.prototype.findTemplateForNodeData = A.prototype.RI = function(a, b) {
        var c = p,
        d = this.P;
        d instanceof N && (c = d.py(a));
        c ? (c = this.ly.ca(b), c === m && (c = this.ly.ca(""), c === m && (v.pE === f && (v.pE = h, v.trace('No Group template found for category "' + b + '"'), v.trace(" Using default group template")), c = this.XD))) : (c = this.Ly.ca(b), c === m && (c = this.Ly.ca(""), c === m && (v.sE === f && (v.sE = h, v.trace('No Node template found for category "' + b + '"'), v.trace(" Using default node template")), c = this.$D)));
        return c instanceof R ? c: m
    };
    function Ai(a, b) {
        var c = a.P;
        if (c instanceof N) {
            var d = c.dc(b);
            if (d !== f) {
                var e = c.LB(d),
                g = a.gg(b);
                if (e !== m && g !== m && g instanceof S) {
                    for (e = e.f; e.next();) {
                        var i = e.value;
                        if (c.Ii(i)) {
                            if (g instanceof mf && c.Br(i) === d) {
                                var j = a.gg(i);
                                j !== m && (j.Wa = g)
                            }
                        } else if (j = a.Ri(i), j !== m) {
                            c.Bn(i) === d && (j.ea = g);
                            c.Cn(i) === d && (j.ia = g);
                            for (var i = c.zl(i), k = 0; k < i.length; k++) if (i[k] === d) {
                                g.le = j;
                                break
                            }
                        }
                    }
                    c.bh(d)
                }
                c = c.Br(b);
                c !== f && (c = a.ah(c), c instanceof mf && (g.Wa = c))
            }
        }
    }
    function Dh(a, b) {
        if (b !== m) {
            for (var c = v.Eb(b), d = 0; d < c; d++) Fh(a, v.qb(b, d));
            a.oy(p)
        }
    }
    function Fh(a, b) {
        if (! (b === f || b === m) && !a.da.cb && !a.Mf.contains(b)) {
            var c = a.getCategoryForLinkData(b),
            d = a.findTemplateForLinkData(b, c);
            if (d instanceof U && (of(d), d = d.copy(), d instanceof U)) {
                d.tj = c;
                var c = a.P,
                e = c.Bn(b);
                e !== f && (e = a.ah(e), e instanceof S && (d.ea = e));
                e = c.CF(b);
                d.dh = e;
                e = c.Cn(b);
                e !== f && (e = a.ah(e), e instanceof S && (d.ia = e));
                e = c.EF(b);
                d.gi = e;
                c = c.zl(b);
                if (v.isArray(c)) for (var e = v.Eb(c), g = 0; g < e; g++) {
                    var i = a.ah(v.qb(c, g));
                    i !== m && (i.le = d)
                }
                a.add(d);
                d.data = b
            }
        }
    }
    A.prototype.getCategoryForLinkData = A.prototype.SB = function(a) {
        return this.P.SB(a)
    };
    A.prototype.findTemplateForLinkData = A.prototype.QI = function(a, b) {
        var c = this.zy.ca(b);
        c === m && (c = this.zy.ca(""), c === m && (v.rE === f && (v.rE = h, v.trace('No Link template found for category "' + b + '"'), v.trace(" Using default link template")), c = this.ZD));
        return c instanceof U ? c: m
    };
    function Bh(a, b) {
        for (var c = v.Eb(b), d = 0; d < c; d++) Gh(a, v.qb(b, d))
    }
    function Gh(a, b) {
        if (! (b === f || b === m)) {
            var c = a.gg(b);
            if (c instanceof R) {
                var d = c.ta;
                if (! (d === m || d.b !== a)) {
                    var e = a.P;
                    if (e instanceof N && c instanceof S) {
                        var g = e.dc(c.data);
                        if (g !== f) {
                            for (var i = c.me; i.next();) {
                                var j = i.value.data;
                                e.eg(g, j)
                            }
                            c.Ui && (i = c.le, i !== m && (j = i.data, e.eg(g, j)));
                            if (c instanceof mf) for (i = c.mc; i.next();) j = i.value.data,
                            e.Ii(j) && e.eg(g, j)
                        }
                    }
                    c.Ha = p;
                    e = d.Cd( - 1, c);
                    0 <= e && a.Yd(Fe, "parts", d, c, m, e, m);
                    e = c.Ir;
                    e !== m && e(c, d, m)
                }
            }
        }
    }
    A.prototype.findPartForKey = A.prototype.NI = function(a) {
        if (a === m || a === f) return m;
        a = this.P.$g(a);
        if (a === m) return m;
        a = this.Mf.ca(a);
        return a instanceof R ? a: m
    };
    A.prototype.findNodeForKey = A.prototype.ah = function(a) {
        if (a === m || a === f) return m;
        a = this.P.$g(a);
        if (a === m) return m;
        a = this.Mf.ca(a);
        return a instanceof S ? a: m
    };
    A.prototype.findPartForData = A.prototype.gg = function(a) {
        if (a === m) return m;
        a = this.Mf.ca(a);
        return a instanceof R ? a: m
    };
    A.prototype.findNodeForData = A.prototype.LI = function(a) {
        if (a === m) return m;
        a = this.Mf.ca(a);
        return a instanceof S ? a: m
    };
    A.prototype.findLinkForData = A.prototype.Ri = function(a) {
        if (a === m) return m;
        a = this.Mf.ca(a);
        return a instanceof U ? a: m
    };
    v.a(A, "nodeTemplate", A.prototype.kG);
    v.defineProperty(A, {
        kG: "nodeTemplate"
    },
    function() {
        return this.zi.ca("")
    },
    function(a) {
        var b = this.zi.ca("");
        b !== a && (v.c(a, R, A, "nodeTemplate"), this.zi.add("", a), this.d("nodeTemplate", b, a), this.da.cb || this.Kl())
    });
    v.a(A, "nodeTemplateMap", A.prototype.Ly);
    v.defineProperty(A, {
        Ly: "nodeTemplateMap"
    },
    s("zi"),
    function(a) {
        var b = this.zi;
        b !== a && (v.c(a, oa, A, "nodeTemplateMap"), this.zi = a, this.d("nodeTemplateMap", b, a), this.da.cb || this.Kl())
    });
    v.a(A, "groupTemplate", A.prototype.GF);
    v.defineProperty(A, {
        GF: "groupTemplate"
    },
    function() {
        return this.Mk.ca("")
    },
    function(a) {
        var b = this.Mk.ca("");
        b !== a && (v.c(a, mf, A, "groupTemplate"), this.Mk.add("", a), this.d("groupTemplate", b, a), this.da.cb || this.Kl())
    });
    v.a(A, "groupTemplateMap", A.prototype.ly);
    v.defineProperty(A, {
        ly: "groupTemplateMap"
    },
    s("Mk"),
    function(a) {
        var b = this.Mk;
        b !== a && (v.c(a, oa, A, "groupTemplateMap"), this.Mk = a, this.d("groupTemplateMap", b, a), this.da.cb || this.Kl())
    });
    v.a(A, "linkTemplate", A.prototype.aG);
    v.defineProperty(A, {
        aG: "linkTemplate"
    },
    function() {
        return this.Mj.ca("")
    },
    function(a) {
        var b = this.Mj.ca("");
        b !== a && (v.c(a, U, A, "linkTemplate"), this.Mj.add("", a), this.d("linkTemplate", b, a), this.da.cb || this.Kl())
    });
    v.a(A, "linkTemplateMap", A.prototype.zy);
    v.defineProperty(A, {
        zy: "linkTemplateMap"
    },
    s("Mj"),
    function(a) {
        var b = this.Mj;
        b !== a && (v.c(a, oa, A, "linkTemplateMap"), this.Mj = a, this.d("linkTemplateMap", b, a), this.da.cb || this.Kl())
    });
    v.a(A, "isMouseCaptured", A.prototype.Kc);
    v.defineProperty(A, {
        Kc: "isMouseCaptured"
    },
    s("$z"),
    function(a) {
        var b = this.oa;
        a ? (this.F.bubbles = p, b.removeEventListener("mousemove", this.Qn, p), b.removeEventListener("mousedown", this.Pn, p), b.removeEventListener("mouseup", this.Sn, p), b.removeEventListener("mousewheel", this.kg, p), b.removeEventListener("DOMMouseScroll", this.kg, p), b.removeEventListener("mouseout", this.Rn, p), window.addEventListener("mousemove", this.Qn, h), window.addEventListener("mousedown", this.Pn, h), window.addEventListener("mouseup", this.Sn, h), window.addEventListener("mousewheel", this.kg, h), window.addEventListener("DOMMouseScroll", this.kg, h), window.addEventListener("mouseout", this.Rn, h), window.addEventListener("selectstart", this.preventDefault, p)) : (window.removeEventListener("mousemove", this.Qn, h), window.removeEventListener("mousedown", this.Pn, h), window.removeEventListener("mouseup", this.Sn, h), window.removeEventListener("mousewheel", this.kg, h), window.removeEventListener("DOMMouseScroll", this.kg, h), window.removeEventListener("mouseout", this.Rn, h), window.removeEventListener("selectstart", this.preventDefault, p), b.addEventListener("mousemove", this.Qn, p), b.addEventListener("mousedown", this.Pn, p), b.addEventListener("mouseup", this.Sn, p), b.addEventListener("mousewheel", this.kg, p), b.addEventListener("DOMMouseScroll", this.kg, p), b.addEventListener("mouseout", this.Rn, p));
        this.$z = a
    });
    v.a(A, "position", A.prototype.position);
    v.defineProperty(A, {
        position: "position"
    },
    s("kb"),
    function(a) {
        var b = this.kb;
        if (!b.u(a)) {
            v.c(a, D, A, "position");
            var c = this.ob.copy();
            c.x = b.x;
            c.y = b.y;
            b.Qi(a) ? a = b: this.gc || (this.gc = h, b = this.scale, ii(this, a, this.yc, this.oa.width / b, this.oa.height / b, this.Hk), this.gc = p);
            this.kb = a.B();
            this.Wr(c, this.ob);
            yf(this)
        }
    });
    v.a(A, "grid", A.prototype.Ku);
    v.defineProperty(A, {
        Ku: "grid"
    },
    function() {
        this.Wc === m && Xh(this);
        return this.Wc
    },
    function(a) {
        var b = this.Wc;
        if (b !== a) {
            b === m && (Xh(this), b = this.Wc);
            v.c(a, w, A, "grid");
            a.type !== Yh && v.g("Diagram.grid must be a Panel of type Panel.Grid");
            var c = b.Y;
            c !== m && c.remove(b);
            this.Wc = a;
            a.name = "GRID";
            c !== m && c.add(a);
            xh(this);
            this.d("grid", b, a)
        }
    });
    v.m(A, {
        ob: "viewportBounds"
    },
    function() {
        var a = this.kb,
        b = this.Qb,
        c = this.oa,
        d = this.QA;
        d.yd(a.x, a.y, Math.max(c.width, 0) / b, Math.max(c.height, 0) / b);
        return d
    });
    v.a(A, "fixedBounds", A.prototype.xr);
    v.defineProperty(A, {
        xr: "fixedBounds"
    },
    s("Ps"),
    function(a) {
        var b = this.Ps;
        b.u(a) || (v.c(a, E, A, "fixedBounds"), this.Ps = a = a.B(), mi(this), this.d("fixedBounds", b, a))
    });
    v.m(A, {
        yc: "documentBounds"
    },
    s("Ms"));
    function li(a, b) {
        var c = a.Ms;
        c.u(b) || (b = b.B(), a.Ms = b, a.Gj = p, gi(a), a.ga("DocumentBoundsChanged", m, c.copy()), $h(a))
    }
    v.a(A, "scale", A.prototype.scale);
    v.defineProperty(A, {
        scale: "scale"
    },
    s("Qb"),
    function(a) {
        var b = this.Qb;
        if (b !== a) {
            v.j(a, A, "scale");
            this.Qb = a;
            var c = a;
            a < this.Yi && (c = this.Yi);
            a > this.Xi && (c = this.Xi);
            if (!isNaN(a) && !this.gc && !this.cf) {
                this.gc = h;
                var d = this.ob.copy(),
                e = this.oa.width / c,
                g = this.oa.height / c;
                d.width = this.oa.width / b;
                d.height = this.oa.height / b;
                var i = this.Ak.copy();
                if (isNaN(i.x)) switch (this.uu) {
                case Ec:
                    i.x = 0;
                    break;
                case Fc:
                    i.x = e - 1;
                    break;
                case mc:
                    i.x = e / 2;
                    break;
                case ec:
                case Mc:
                    i.x = e / 2
                }
                if (isNaN(i.y)) switch (this.uu) {
                case Dc:
                    i.y = 0;
                    break;
                case Lc:
                    i.y = g - 1;
                    break;
                case mc:
                    i.y = g / 2;
                    break;
                case ec:
                case Mc:
                    i.y = g / 2
                }
                var j = this.position,
                a = new D(j.x + i.x / b - i.x / a, j.y + i.y / b - i.y / a);
                ii(this, a, this.yc, e, g, this.Hk);
                this.position = a;
                this.gc = p;
                e = this.ob;
                this.Qb = c;
                this.Wr(d, e)
            }
            xh(this);
            $h(this)
        }
    });
    v.a(A, "autoScale", A.prototype.Hx);
    v.defineProperty(A, {
        Hx: "autoScale"
    },
    s("Dk"),
    function(a) {
        var b = this.Dk;
        b !== a && (v.Va(a, A, A, "autoScale"), this.Dk = a, this.d("autoScale", b, a), a !== zh && gi(this))
    });
    v.a(A, "initialAutoScale", A.prototype.KF);
    v.defineProperty(A, {
        KF: "initialAutoScale"
    },
    s("Ej"),
    function(a) {
        var b = this.Ej;
        b !== a && (v.Va(a, A, A, "initialAutoScale"), this.Ej = a, this.d("initialAutoScale", b, a))
    });
    v.a(A, "initialViewportSpot", A.prototype.gC);
    v.defineProperty(A, {
        gC: "initialViewportSpot"
    },
    s("Us"),
    function(a) {
        var b = this.Us;
        b !== a && (v.c(a, F, A, "initialViewportSpot"), Vb(a) || v.g("initialViewportSpot must be a real Spot: " + a), this.Us = a, this.d("initialViewportSpot", b, a))
    });
    v.a(A, "initialDocumentSpot", A.prototype.fC);
    v.defineProperty(A, {
        fC: "initialDocumentSpot"
    },
    s("Ts"),
    function(a) {
        var b = this.Ts;
        b !== a && (v.c(a, F, A, "initialDocumentSpot"), Vb(a) || v.g("initialViewportSpot must be a real Spot: " + a), this.Ts = a, this.d("initialDocumentSpot", b, a))
    });
    v.a(A, "minScale", A.prototype.Yi);
    v.defineProperty(A, {
        Yi: "minScale"
    },
    s("pt"),
    function(a) {
        v.j(a, A, "minScale");
        var b = this.pt;
        b !== a && 0 < a ? (this.pt = a, this.d("minScale", b, a), a > this.scale && (this.scale = a)) : v.ha(a, "> 0", A, "minScale")
    });
    v.a(A, "maxScale", A.prototype.Xi);
    v.defineProperty(A, {
        Xi: "maxScale"
    },
    s("kt"),
    function(a) {
        v.j(a, A, "maxScale");
        var b = this.kt;
        b !== a && 0 < a ? (this.kt = a, this.d("maxScale", b, a), a < this.scale && (this.scale = a)) : v.ha(a, "> 0", A, "maxScale")
    });
    v.a(A, "zoomPoint", A.prototype.Ak);
    v.defineProperty(A, {
        Ak: "zoomPoint"
    },
    s("hu"),
    function(a) {
        this.hu.u(a) || (v.c(a, D, A, "zoomPoint"), this.hu = a = a.B(), mi(this))
    });
    v.a(A, "contentAlignment", A.prototype.uu);
    v.defineProperty(A, {
        uu: "contentAlignment"
    },
    s("Hk"),
    function(a) {
        var b = this.Hk;
        b.u(a) || (v.c(a, F, A, "contentAlignment"), this.Hk = a = a.B(), this.d("contentAlignment", b, a), gi(this))
    });
    v.a(A, "initialContentAlignment", A.prototype.LF);
    v.defineProperty(A, {
        LF: "initialContentAlignment"
    },
    s("sm"),
    function(a) {
        var b = this.sm;
        b.u(a) || (v.c(a, F, A, "initialContentAlignment"), this.sm = a = a.B(), this.d("initialContentAlignment", b, a))
    });
    v.a(A, "padding", A.prototype.padding);
    v.defineProperty(A, {
        padding: "padding"
    },
    s("Ld"),
    function(a) {
        "number" === typeof a ? a = new Hb(a) : v.c(a, Hb, A, "padding");
        var b = this.Ld;
        b.u(a) || (this.Ld = a = a.B(), mi(this), this.d("padding", b, a))
    });
    v.m(A, {
        pk: "nodes"
    },
    function() {
        return this.yt.f
    });
    v.m(A, {
        links: "links"
    },
    function() {
        return this.et.f
    });
    v.m(A, {
        Zi: "parts"
    },
    function() {
        return this.Db.f
    });
    v.a(A, "layout", A.prototype.xb);
    v.defineProperty(A, {
        xb: "layout"
    },
    s("Zc"),
    function(a) {
        var b = this.Zc;
        b !== a && (v.c(a, Mh, A, "layout"), b !== m && (b.b = m, b.group = m), this.Zc = a, a.b = this, a.group = m, this.ts = h, this.d("layout", b, a))
    });
    A.prototype.layoutDiagram = A.prototype.EJ = function(a) {
        Jh(this);
        a && this.oy(h);
        oi(this)
    };
    A.prototype.invalidateAllLayouts = A.prototype.oy = function(a) {
        for (var b = this.gl.f; b.next();) Ci(this, b.value, a);
        this.xb !== m && (a ? this.xb.Ue = p: this.xb.r())
    };
    function Ci(a, b, c) {
        if (b !== m) {
            for (var d = b.Zk.f; d.next();) Ci(a, d.value, c);
            b.xb !== m && (c ? b.xb.Ue = p: b.xb.r())
        }
    }
    function oi(a) {
        for (var b = a.gl.f; b.next();) Di(a, b.value);
        b = a.xb;
        b !== m && !b.Ue && (b.doLayout(a), b.Ue = h);
        a.ts = p
    }
    function Di(a, b) {
        if (b !== m) {
            for (var c = b.Zk.f; c.next();) Di(a, c.value);
            c = b.xb;
            c !== m && !c.Ue && (b.kA = !b.location.aa(), c.doLayout(b), b.r(Ei), c.Ue = h, ri(a, b))
        }
    }
    v.a(A, "isTreePathToChildren", A.prototype.sf);
    v.defineProperty(A, {
        sf: "isTreePathToChildren"
    },
    s("bt"),
    function(a) {
        var b = this.bt;
        if (b !== a && (v.e(a, "boolean", A, "isTreePathToChildren"), this.bt = a, this.d("isTreePathToChildren", b, a), !this.da.cb)) for (a = this.pk; a.next();) Fi(a.value)
    });
    v.a(A, "isCollapsingExpanding", A.prototype.rf);
    v.defineProperty(A, {
        rf: m
    },
    s("Wz"), ba("Wz"));
    function Gi(a, b) {
        var c = a.kw.ca(b);
        if (c !== m) return c;
        c = a.kw.ca(b.toLowerCase());
        if (c !== m) return c;
        v.g("Unknown DiagramEvent name: " + b);
        return m
    }
    A.prototype.addDiagramListener = A.prototype.UA = function(a, b) {
        v.e(a, "string", A, "addDiagramListener:name");
        v.e(b, "function", A, "addDiagramListener:listener");
        var c = Gi(this, a);
        c !== m && c.add(b)
    };
    A.prototype.removeDiagramListener = A.prototype.UC = function(a, b) {
        v.e(a, "string", A, "removeDiagramListener:name");
        v.e(b, "function", A, "addDiagramListener:listener");
        var c = Gi(this, a);
        c !== m && c.remove(b)
    };
    A.prototype.raiseDiagramEvent = A.prototype.ga = function(a, b, c) {
        t && v.e(a, "string", A, "raiseDiagramEvent:name");
        var d = Gi(this, a),
        e = new te;
        e.b = this;
        var g = this.jw.ca(a),
        a = g !== m ? g: this.jw.ca(a.toLowerCase());
        e.name = a;
        b !== f && (e.jv = b);
        c !== f && (e.Xu = c);
        for (b = d.f; b.next();) c = b.value,
        c(e);
        return e.cancel
    };
    function dg(a, b) {
        for (var c = a.xl(b,
        function(a) {
            return a.W
        },
        function(a) {
            return a instanceof U
        },
        h).f; c.next();) {
            var d = c.value;
            d.Ze === Qf && d.Tb()
        }
    }
    function Hi(a, b) {
        if (b !== m && b.canAvoid()) {
            for (var c = b.getAvoidableRectangle(), d = a.Pc.nl, e = a.Pc.ml, g = c.x + c.width, i = c.y + c.height, j = c.x; j < g; j += d) {
                for (var k = c.y; k < i; k += e) Ii(a.Pc, j, k);
                Ii(a.Pc, j, i)
            }
            for (k = c.y; k < i; k += e) Ii(a.Pc, g, k);
            Ii(a.Pc, g, i)
        }
    }
    function Ji(a, b) {
        if (a.Pc !== m && !a.Pc.En && (b === m || b.canAvoid())) a.Pc.En = h
    }
    function Sh(a, b, c) {
        if (Hf !== m) {
            c instanceof A || (c = m);
            var d = Of;
            c !== d && (d !== m && d.Vb.ie !== m && d.Vb.ie.HB(), c !== m && c.Vb.ie !== m && c.Vb.ie.GB());
            Of = c;
            if (c === m) return h;
            d = c.Vb.ie;
            d !== m && (a !== m && (b = c.uh(a)), c.pc.C = b, d.qF());
            return h
        }
        return p
    }
    function Uh(a, b, c, d) {
        if (Hf !== m) {
            d === m && (d = m);
            var e = Of;
            d !== e && (e !== m && e.Vb.ie !== m && e.Vb.ie.HB(), d !== m && d.Vb.ie !== m && d.Vb.ie.GB());
            Of = d;
            if (d === m) return Hf.doCancel(),
            h;
            if (d !== a) return a = c,
            b !== m && (a = d.uh(b)),
            d.pc.C = a,
            b = d.Vb.ie,
            b !== m && b.rF(),
            Hf !== m && Hf.doCancel(),
            h
        }
        return p
    }
    v.a(A, "autoScrollRegion", A.prototype.dB);
    v.defineProperty(A, {
        dB: "autoScrollRegion"
    },
    s("us"),
    function(a) {
        "number" === typeof a ? a = new Hb(a) : v.c(a, Hb, A, "autoScrollRegion");
        var b = this.us;
        b.u(a) || (this.us = a = a.B(), mi(this), this.d("autoScrollRegion", b, a))
    });
    function cg(a) {
        if (a.og === m) {
            a.og = {};
            var b;
            b = a.sa !== a.Vb.ie ? a.TD: a.UD;
            a.og.isEnabled = h;
            var c = setInterval(function() {
                var b = c;
                a.og !== m && a.og.isEnabled && (a.og = m, clearInterval(b), b = bg(a, a.Wv), b.Zh(a.position) || (a.position = b, a.F.C = a.FD(a.Wv), a.sa.doMouseMove(), a.Gj = h, li(a, a.Me()), a.qi = h, a.update(), cg(a)))
            },
            b);
            a.og.id = c
        }
    }
    function Jf(a) {
        a.og !== m && (a.og.isEnabled && clearInterval(a.og.id), a.og = m)
    }
    function bg(a, b) {
        var c = a.position,
        d = a.dB;
        if (0 >= d.top && 0 >= d.left && 0 >= d.right && 0 >= d.bottom) return c;
        var e = a.ob,
        g = new E(0, 0, e.width, e.height),
        e = new D(0, 0);
        if (b.x >= g.x && b.x < g.x + d.left) {
            var i = Math.max(a.Zr, 1),
            i = i | 0;
            e.x -= i;
            b.x < g.x + d.left / 2 && (e.x -= i);
            b.x < g.x + d.left / 4 && (e.x -= 4 * i)
        } else b.x <= g.x + g.width && b.x > g.x + g.width - d.right && (i = Math.max(a.Zr, 1), i |= 0, e.x += i, b.x > g.x + g.width - d.right / 2 && (e.x += i), b.x > g.x + g.width - d.right / 4 && (e.x += 4 * i));
        b.y >= g.y && b.y < g.y + d.top ? (i = Math.max(a.$r, 1), i |= 0, e.y -= i, b.y < g.y + d.top / 2 && (e.y -= i), b.y < g.y + d.top / 4 && (e.y -= 4 * i)) : b.y <= g.y + g.height && b.y > g.y + g.height - d.bottom && (i = Math.max(a.$r, 1), i |= 0, e.y += i, b.y > g.y + g.height - d.bottom / 2 && (e.y += i), b.y > g.y + g.height - d.bottom / 4 && (e.y += 4 * i));
        e.Zh(new D(0, 0)) || (d = a.scale, c = new D(c.x + e.x / d, c.y + e.y / d));
        return c
    }
    A.prototype.makeImage = A.prototype.GJ = function(a) {
        if (this.oa === m) return m;
        "object" !== typeof a && v.g("properties argument must be an Object.");
        this.To = p;
        Wh(this);
        var b = document.createElement("canvas");
        b.width = this.oa.width;
        b.height = this.oa.height;
        var c = b.getContext("2d");
        xh(this);
        this.fg(c);
        Wh(this);
        this.To = h;
        c = new Image;
        c.src = b.toDataURL(a.type, a.details);
        return c
    };
    A.prototype.makeImageData = A.prototype.HJ = function(a) {
        if (this.oa === m) return "";
        "object" !== typeof a && v.g("properties argument must be an Object.");
        this.To = p;
        Wh(this);
        var b = document.createElement("canvas");
        b.width = this.oa.width;
        b.height = this.oa.height;
        var c = b.getContext("2d");
        xh(this);
        this.fg(c);
        Wh(this);
        this.To = h;
        return b.toDataURL(a.type, a.details)
    };
    A.prototype.renderJson = A.prototype.mg = function(a) {
        this.sh = new oa;
        this.rg = new ya;
        v.Oa(a) && a._tabString !== f && (this.rg.JA = a._tabString);
        Ki(this, this);
        this.sh.clear();
        a = this.rg.toString();
        this.rg = m;
        return a
    };
    function Ki(a, b) {
        if (v.Oa(b) && (!(b instanceof R) || b.eb())) if (! (b instanceof P) || b.visible) if (! (b instanceof ff) || b.visible) {
            var c = a.rg;
            if (b instanceof D) c.add('"' + bb(b) + '"');
            else if (b instanceof sb) c.add('"' + tb(b) + '"');
            else if (b instanceof E) c.add('"' + yb(b) + '"');
            else if (b instanceof Hb) c.add('"' + Nb(b) + '"');
            else if (b instanceof F) c.add('"' + Ub(b) + '"');
            else {
                var d;
                b instanceof Hd ? d = a.sh.ca(b) : b instanceof Ke && (d = a.sh.ca(b));
                d = "number" === typeof d ? d: -1; - 1 < d ? c.add('{ "class":"ref", "id":' + d + " }") : (c.Dj++, c.add('{ "class": "' + v.Si(b) + '"'), d = -1, b instanceof Hd ? (d = a.sh.count, a.sh.add(b, d)) : b instanceof Ke && (d = a.sh.count, a.sh.add(b, d)), -1 < d && c.add(', "id":' + d), b instanceof P ? b.mg() : Li(a, b, Object.getPrototypeOf(b)), c.add(" }"), Ka(c))
            }
        }
    }
    function Li(a, b, c) {
        if (c && c.constructor !== Object && (Li(a, b, Object.getPrototypeOf(c)), c.constructor && (c = c.constructor.aH, Array.isArray(c)))) for (var d = 0; d < c.length; d++) {
            var e = c[d];
            if ("string" === typeof e) {
                var g = v.Za(b, e);
                Mi(a, e, g)
            }
        }
    }
    function Mi(a, b, c) {
        if (c !== f) {
            var d = a.rg;
            d.add(",");
            La(d);
            d.add('"' + b + '": ');
            Ni(a, c)
        }
    }
    function Ni(a, b) {
        var c = a.rg;
        if (b === f) c.add("undefined");
        else if (b === m) c.add("null");
        else if (b === h) c.add("true");
        else if (b === p) c.add("false");
        else if ("string" === typeof b) c.add(a.P.quote(b));
        else if ("number" === typeof b) Infinity === b && c.add("9e9999"),
        -Infinity === b && c.add("-9e9999"),
        isNaN(b) ? c.add('{"class":"NaN"}') : c.add(b.toString());
        else if ("function" === typeof b) c.add("null");
        else if (v.isArray(b)) {
            c = a.rg;
            c.Dj++;
            for (var d = v.Eb(b), e = p, g = 0; g < d; g++) {
                var i = v.qb(b, g);
                if ("object" === typeof i) {
                    e = h;
                    break
                }
            }
            c.add("[");
            e && La(c);
            for (g = 0; g < d; g++) i = v.qb(b, g),
            i !== f && (0 < g && (c.add(","), e && La(c)), Ni(a, i));
            e && c.add(" ");
            c.add("]");
            Ka(c)
        } else if (b instanceof na) c.add(a.P.quote(b.toString()));
        else if (b instanceof oa) {
            c = a.rg;
            c.Dj++;
            c.add("{");
            La(c);
            d = b.f;
            for (e = h; d.next();) g = d.key,
            i = d.value,
            e ? e = p: (c.add(","), La(c)),
            c.add('"' + g + '": '),
            Ni(a, i);
            c.add(" }");
            Ka(c)
        } else if (b instanceof y || b instanceof pa || b.f !== f) {
            c = a.rg;
            c.Dj++;
            c.add("[");
            La(c);
            d = b.f;
            for (e = 0; d.next();) g = d.value,
            g !== f && (0 < e && (c.add(","), La(c)), Ni(a, g), e++);
            c.add(" ]");
            Ka(c)
        } else v.Oa(b) ? Ki(a, b) : c.add(b.toString())
    }
    A.inherit = function(a, b) {
        v.pa(a, b)
    };
    function Oi(a) {
        A.call(this, a);
        this.mu = h;
        this.dk = p;
        this.Pa = h;
        this.uu = kc;
        this.xb = new Pi
    }
    v.H("Palette", Oi);
    v.pa(Oi, A);
    function Qi(a) {
        A.call(this, a);
        this.gc = h;
        this.Bi = m;
        var a = new R,
        b = new V;
        b.stroke = "magenta";
        b.Ua = 2;
        b.fill = m;
        b.name = "BOXSHAPE";
        a.ao = "BOXSHAPE";
        a.Lr = "BOXSHAPE";
        a.add(b);
        this.$l = a;
        a = new Ri;
        a.yf(this);
        this.Vb.oe.lc(0, a);
        var c = this;
        this.KC = function() {
            Si(c)
        };
        this.JC = function() {
            c.Bi !== m && (mi(c), xh(c))
        };
        this.Pa = h;
        this.Nh = this.Pd = p;
        this.Hx = ji;
        this.Vb.Fl = Bf;
        this.gc = p
    }
    v.H("Overview", Qi);
    v.pa(Qi, A);
    Qi.prototype.fg = function() {
        this.Hb === m && v.g("No div specified");
        this.oa === m && v.g("No canvas specified");
        if (this.qi) {
            var a = this.Bi;
            if (a !== m) {
                var b = this.Jk;
                b.Qv = "";
                b.setTransform(1, 0, 0, 1, 0, 0);
                b.clearRect(0, 0, this.oa.width, this.oa.height);
                var c = this.Md;
                c.reset();
                1 !== this.Qb && c.scale(this.scale); (0 !== this.position.x || 0 !== this.position.y) && c.translate( - this.kb.x, -this.kb.y);
                b.setTransform(c.m11, c.m12, c.m21, c.m22, c.Sa, c.Ta);
                for (var d = this.ob,
                e = a.Cb.length,
                c = 0; c < e; c++) for (var g = b,
                i = d,
                j = a.Cb.i[c].Db, k = j.length, l = 0; l < k; l++) {
                    var n = j.i[l];
                    n.la.Te(i) && n.fg(g, this)
                }
                a = this.Cb.length;
                for (c = 0; c < a; c++) this.Cb.i[c].fg(b, this);
                this.qi = this.vm = p
            }
        }
    };
    v.a(Qi, "observed", Qi.prototype.lG);
    v.defineProperty(Qi, {
        lG: "observed"
    },
    s("Bi"),
    function(a) {
        var b = this.Bi;
        a !== m && v.c(a, A, Qi, "observed");
        b !== a && !(a instanceof Qi) && (b !== m && (this.remove(this.cg), b.UC("ViewportBoundsChanged", this.KC), b.UC("DocumentBoundsChanged", this.JC), b.Dt.remove(this)), this.Bi = a, a !== m && (a.UA("ViewportBoundsChanged", this.KC), a.UA("DocumentBoundsChanged", this.JC), a.Dt.add(this), this.add(this.cg), Si(this)), mi(this), this.d("observed", b, a))
    });
    v.a(Qi, "box", Qi.prototype.cg);
    v.defineProperty(Qi, {
        cg: "box"
    },
    s("$l"),
    function(a) {
        var b = this.$l;
        b !== a && (this.$l = a, this.d("box", b, a))
    });
    function Si(a) {
        var b = a.cg;
        if (b !== m) {
            var c = a.Bi;
            if (c !== m) {
                a.qi = h;
                var c = c.ob,
                d = b.$n;
                d.ma = new sb(c.width, c.height);
                a = 2 / a.scale;
                d instanceof V && (d.Ua = a);
                b.location = new D(c.x - a / 2, c.y - a / 2)
            }
        }
    }
    Qi.prototype.Me = function() {
        var a = this.Bi;
        return a === m ? new E(0, 0, 0, 0) : a.yc
    };
    Qi.prototype.Wr = function(a) {
        this.gc || (Zh(this), xh(this), $h(this), mi(this), Si(this), this.ga("ViewportBoundsChanged", a))
    };
    function Ri() {
        zf.call(this);
        this.name = "MoveBox"
    }
    v.pa(Ri, zf);
    Ri.prototype.doStart = Ri.prototype.by = function() {
        this.T = this.b.Kc = h
    };
    Ri.prototype.doMouseMove = Ri.prototype.Zg = function() {
        if (this.T) {
            var a = this.b;
            if (! (a === m || a.Bi === m)) {
                var b = a.Bi,
                c = b.ob,
                d = a.F.C;
                b.position = new D(d.x - c.width / 2, d.y - c.height / 2);
                yf(a)
            }
        }
    };
    Ri.prototype.doMouseUp = Ri.prototype.Pe = function() {
        this.T && this.doMouseMove();
        this.stopTool()
    };
    Ri.prototype.doStop = Ri.prototype.Pi = function() {
        this.T = p;
        var a = this.b;
        a.Kc = p;
        Si(a)
    };
    function Ke(a) {
        v.Ob(this);
        this.Ma = p;
        a === f ? (this.K = Le, this.cm = "black") : "string" === typeof a ? (this.K = Le, this.cm = a) : (t && v.Va(a, Ke, Ke, "constructor:type"), this.K = a, this.cm = "black");
        a = this.K;
        a === Me ? (this.Om = kc, this.lm = sc) : this.lm = a === Ne ? this.Om = mc: this.Om = ac;
        this.Vt = 0;
        this.Ns = NaN;
        this.zz = this.Az = this.Lf = this.Ft = this.Jf = m
    }
    v.H("Brush", Ke);
    var Le;
    Ke.Solid = Le = v.l(Ke, "Solid", 0);
    var Me;
    Ke.Linear = Me = v.l(Ke, "Linear", 1);
    var Ne;
    Ke.Radial = Ne = v.l(Ke, "Radial", 2);
    var Ti;
    Ke.Pattern = Ti = v.l(Ke, "Pattern", 2);
    Ke.prototype.copy = Ke.prototype.copy = function() {
        var a = new Ke;
        a.K = this.K;
        a.cm = this.cm;
        a.Om = this.Om;
        a.lm = this.lm;
        a.Vt = this.Vt;
        a.Ns = this.Ns;
        this.Jf !== m && (a.Jf = this.Jf.copy());
        a.Ft = this.Ft;
        return a
    };
    Ke.prototype.La = function() {
        this.freeze();
        Object.freeze(this);
        return this
    };
    Ke.prototype.freeze = function() {
        this.Ma = h;
        this.Jf !== m && this.Jf.freeze();
        return this
    };
    Ke.prototype.qa = function() {
        Object.isFrozen(this) && v.g("cannot thaw constant: " + this);
        this.Ma = p;
        this.Jf !== m && this.Jf.qa();
        return this
    };
    Ke.prototype.toString = function() {
        var a = "Brush(";
        if (this.type === Le) a += this.color;
        else if (a = this.type === Me ? a + "Linear ": this.type === Ne ? a + "Radial ": this.type === Ti ? a + "Pattern ": a + "(unknown) ", a += this.start + " " + this.end, this.nn !== m) for (var b = this.nn.f; b.next();) a += " " + b.key + ":" + b.value;
        return a + ")"
    };
    Ke.prototype.addColorStop = Ke.prototype.addColorStop = function(a, b) {
        v.v(this); (a === m || 1 < a || 0 > a) && v.ha(a, "0 <= loc <= 1", Ke, "addColorStop:loc");
        v.e(b, "string", Ke, "addColorStop:color");
        this.Jf === m && (this.Jf = new oa("number", "string"));
        this.Jf.add(a, b);
        this.K === Le && (this.type = Me);
        this.Lf = m
    };
    v.a(Ke, "type", Ke.prototype.type);
    v.defineProperty(Ke, {
        type: "type"
    },
    s("K"),
    function(a) {
        v.v(this, a);
        v.Va(a, Ke, Ke, "type");
        this.K = a;
        Zb(this.start) && (a === Me ? this.start = kc: a === Ne && (this.start = mc));
        Zb(this.end) && (a === Me ? this.end = sc: a === Ne && (this.end = mc));
        this.Lf = m
    });
    v.a(Ke, "color", Ke.prototype.color);
    v.defineProperty(Ke, {
        color: "color"
    },
    s("cm"),
    function(a) {
        v.v(this, a);
        v.e(a, "string", Ke, "color");
        this.cm = a;
        this.Lf = m
    });
    v.a(Ke, "start", Ke.prototype.start);
    v.defineProperty(Ke, {
        start: "start"
    },
    s("Om"),
    function(a) {
        v.v(this, a);
        a instanceof F || v.Ac(a, "Spot", Ke, "start");
        this.Om = a.B();
        this.Lf = m
    });
    v.a(Ke, "end", Ke.prototype.end);
    v.defineProperty(Ke, {
        end: "end"
    },
    s("lm"),
    function(a) {
        v.v(this, a);
        a instanceof F || v.Ac(a, "Spot", Ke, "end");
        this.lm = a.B();
        this.Lf = m
    });
    v.a(Ke, "startRadius", Ke.prototype.ho);
    v.defineProperty(Ke, {
        ho: "startRadius"
    },
    s("Vt"),
    function(a) {
        v.v(this, a);
        v.j(a, Ke, "startRadius");
        0 > a && v.ha(a, ">= zero", Ke, "startRadius");
        this.Vt = a;
        this.Lf = m
    });
    v.a(Ke, "endRadius", Ke.prototype.sn);
    v.defineProperty(Ke, {
        sn: "endRadius"
    },
    s("Ns"),
    function(a) {
        v.v(this, a);
        v.j(a, Ke, "endRadius");
        0 > a && v.ha(a, ">= zero", Ke, "endRadius");
        this.Ns = a;
        this.Lf = m
    });
    v.a(Ke, "colorStops", Ke.prototype.nn);
    v.defineProperty(Ke, {
        nn: "colorStops"
    },
    s("Jf"),
    function(a) {
        v.v(this, a);
        t && v.c(a, oa, Ke, "colorStops");
        this.Jf = a;
        this.Lf = m
    });
    v.a(Ke, "pattern", Ke.prototype.pattern);
    v.defineProperty(Ke, {
        pattern: "pattern"
    },
    s("Ft"),
    function(a) {
        v.v(this, a);
        this.Ft = a;
        this.Lf = m
    });
    Ke.randomColor = function(a, b) {
        a === f && (a = 128);
        t && (v.j(a, Ke, "randomColor:min"), (0 > a || 255 < a) && v.ha(a, "0 <= min <= 255", Ke, "randomColor:min"));
        b === f && (b = Math.max(a, 255));
        t && (v.j(b, Ke, "randomColor:max"), (b < a || 255 < b) && v.ha(b, "min <= max <= 255", Ke, "randomColor:max"));
        var c = Math.abs(b - a),
        d = Math.floor(a + Math.random() * c).toString(16),
        e = Math.floor(a + Math.random() * c).toString(16),
        c = Math.floor(a + Math.random() * c).toString(16);
        2 > d.length && (d = "0" + d);
        2 > e.length && (e = "0" + e);
        2 > c.length && (c = "0" + c);
        return "#" + d + e + c
    };
    function P() {
        v.Ob(this);
        this.Sj = m;
        this.wb = "";
        this.hf = this.Ug = h;
        this.Ff = this.Gf = m;
        this.kb = (new D(NaN, NaN)).freeze();
        this.ae = (new sb(NaN, NaN)).freeze();
        this.wd = Yc;
        this.wi = Vc;
        this.Md = new ib;
        this.to = new ib;
        this.Cm = new ib;
        this.Qb = 1;
        this.Wb = 0;
        this.Lg = Qg;
        this.Mp = (new Hb(0)).freeze();
        this.Hc = (new E(NaN, NaN, NaN, NaN)).freeze();
        this.yb = (new E(NaN, NaN, NaN, NaN)).freeze();
        this.qc = (new E(0, 0, NaN, NaN)).freeze();
        this.Ec = this.ac = this.Ok = this.um = h;
        this.fq = m;
        this.yg = ac;
        this.ug = 10;
        this.tg = Ui;
        this.xg = 0;
        this.bp = m;
        this.dp = this.cp = p;
        this.ep = Infinity;
        this.Sg = ac;
        this.Og = 10;
        this.Ng = Ui;
        this.Rg = 0;
        this.Qq = m;
        this.Sq = this.Rq = p;
        this.Tq = Infinity;
        this.md = m;
        this.ja = ec;
        this.tp = p;
        this.so = ec;
        this.uq = 0;
        this.Xj = 1;
        this.I = 0;
        this.uj = 1;
        this.xq = -Infinity;
        this.wq = 0;
        this.yq = Oc;
        this.zq = Vi;
        this.Go = "";
        this.qh = this.Lh = this.Bh = this.Up = this.Tp = this.Ch = this.Dh = this.Eh = this.Wp = this.Vp = this.ph = this.rh = this.oh = m;
        this.np = p;
        this.Xb = this.no = this.qo = this.po = this.oo = m;
        this.Zl = p;
        this.Ik = m;
        this.LA = new E(NaN, NaN, NaN, NaN);
        this.zo = p;
        this.Ao = m;
        this.Yl = p;
        this.$k = m
    }
    v.H("GraphObject", P);
    P.prototype.jb = function(a) {
        a.wb = this.wb;
        a.Ug = this.Ug;
        a.hf = this.hf;
        a.Gf = this.Gf;
        a.Ff = this.Ff;
        a.kb.Ra(this.kb);
        a.ae.Ra(this.ae);
        a.wd = this.wd.B();
        a.wi = this.wi.B();
        a.Qb = this.Qb;
        a.Wb = this.Wb;
        a.Lg = this.Lg;
        a.Mp.Ra(this.Mp);
        a.Hc.Ra(this.Hc);
        a.yb.Ra(this.yb);
        a.qc.Ra(this.qc);
        a.fq = this.fq;
        a.yg = this.yg.B();
        a.ug = this.ug;
        a.tg = this.tg;
        a.xg = this.xg;
        a.bp = this.bp;
        a.cp = this.cp;
        a.dp = this.dp;
        a.ep = this.ep;
        a.Sg = this.Sg.B();
        a.Og = this.Og;
        a.Ng = this.Ng;
        a.Rg = this.Rg;
        a.Qq = this.Qq;
        a.Rq = this.Rq;
        a.Sq = this.Sq;
        a.Tq = this.Tq;
        a.ja = this.ja.B();
        a.tp = this.tp;
        a.so = this.so.B();
        a.uq = this.uq;
        a.Xj = this.Xj;
        a.I = this.I;
        a.uj = this.uj;
        a.xq = this.xq;
        a.wq = this.wq;
        a.yq = this.yq.B();
        a.zq = this.zq;
        a.Go = this.Go;
        a.oh = this.oh;
        a.rh = this.rh;
        a.ph = this.ph;
        a.Vp = this.Vp;
        a.Wp = this.Wp;
        a.Eh = this.Eh;
        a.Dh = this.Dh;
        a.Ch = this.Ch;
        a.Tp = this.Tp;
        a.Up = this.Up;
        a.Bh = this.Bh;
        a.Lh = this.Lh;
        a.qh = this.qh;
        a.np = this.np;
        a.oo = this.oo;
        a.po = this.po;
        a.qo = this.qo;
        a.no = this.no;
        a.Xb = this.Xb;
        a.Zl = this.Zl;
        if (Array.isArray(this.Ik)) {
            a.Ik = this.Ik.slice(0);
            for (var b = 0; b < this.Ik.length; b++) {
                var c = this.Ik[b];
                a[c] = this[c]
            }
        }
        a.Yl = this.Yl
    };
    P.prototype.Yg = function(a) {
        a.md = m;
        a.$k = m;
        a.J()
    };
    P.prototype.copy = P.prototype.copy = function() {
        var a = new this.constructor;
        this.jb(a);
        return a
    };
    P.prototype.toString = function() {
        return v.Si(Object.getPrototypeOf(this)) + "#" + v.kc(this)
    };
    var Wi;
    P.None = Wi = v.l(P, "None", 0);
    var Qg;
    P.Default = Qg = v.l(P, "Default", 0);
    var Qd;
    P.Fill = Qd = v.l(P, "Fill", 3);
    var Rg;
    P.Uniform = Rg = v.l(P, "Uniform", 1);
    var Sg;
    P.UniformToFill = Sg = v.l(P, "UniformToFill", 2);
    var Xi;
    P.Vertical = Xi = v.l(P, "Vertical", 4);
    var Yi;
    P.Horizontal = Yi = v.l(P, "Horizontal", 5);
    P.prototype.Yd = function(a, b, c, d, e, g, i) {
        var j = this.W;
        if (j !== m && (j.Jl(a, b, c, d, e, g, i), this.Zl && (c === this && a === De) && (a = this.wr(), a !== m))) for (c = this.Xb.f; c.next();) d = c.value,
        e = a.data,
        g = d.fo,
        g !== m && (e = a.Re(g)),
        e !== m && (d.JD(this, e, b), g = d.fo, g !== m && (e = a, "" !== g && (e = a.Re(g)), e !== m && (g = d.Ol, i = a, "" !== g && (i = a.Re(g)), i !== m && d.KD(i, e, b))))
    };
    P.prototype.d = function(a, b, c) {
        this.Yd(De, a, this, b, c)
    };
    function Zi(a, b, c, d, e) {
        var g = a.Hc,
        i = a.Cm;
        i.reset();
        $i(a, i, b, c, d, e);
        a.Cm = i;
        g.x = b;
        g.y = c;
        g.width = d;
        g.height = e;
        i.qy() || i.ED(g)
    }
    P.prototype.OB = function(a, b) {
        if (this.hf === p) return p;
        var c = this.ua,
        d = a.Ni(b);
        return nb(a.x, a.y, 0, 0, 0, c.height) < d || nb(a.x, a.y, 0, c.height, c.width, c.height) < d || nb(a.x, a.y, c.width, c.height, c.width, 0) < d || nb(a.x, a.y, c.width, 0, 0, 0) < d ? h: p
    };
    function aj(a, b, c, d) {
        if (a instanceof w) for (var e = a.wa.length; e--;) {
            var g = a.wa.i[e];
            if (g.visible) {
                var i = g.la,
                j = a.la;
                i.x > j.width || (i.y > j.height || 0 > i.x + i.width || 0 > i.y + i.height) || (aj(g, b, c, d), i = g, b !== m && (i = b(i)), i && (c === m || c(i)) && d.add(g))
            }
        }
    }
    P.prototype.hi = ca(h);
    P.prototype.containsPoint = P.prototype.fa = function(a) {
        t && v.c(a, D, P, "containsPoint:p");
        var b = Ob(this.transform, a),
        c = this.la;
        if (!c.aa()) return p;
        if (v.hx) {
            var d = this.ua,
            e = this.yl() * (this.b !== m ? this.b.scale: 1),
            g = 1 / e;
            if (10 > d.width * e && 10 > d.height * e) return Lb(c.x - 5 * g, c.y - 5 * g, c.width + 10 * g, c.height + 10 * g, b.x, b.y)
        }
        return (this.Od !== f || this instanceof V ? Lb(c.x - 5, c.y - 5, c.width + 10, c.height + 10, b.x, b.y) : c.fa(b)) ? this.Ao && !this.Ao.fa(b) ? p: this.Ff !== m && c.fa(b) || this.Gf !== m && this.qc.fa(a) ? h: this.Ji(a) : p
    };
    P.prototype.Ji = function(a) {
        var b = this.ua;
        return Lb(0, 0, b.width, b.height, a.x, a.y)
    };
    P.prototype.containsRect = P.prototype.pl = function(a) {
        t && v.c(a, E, P, "containsRect:r");
        if (0 === this.Qa) return this.la.pl(a);
        var b = this.ua,
        b = new E(0, 0, b.width, b.height),
        c = this.transform;
        return b.fa(c.bi(new D(a.x, a.y))) && b.fa(c.bi(new D(a.x, a.bottom))) && b.fa(c.bi(new D(a.right, a.bottom))) && b.fa(c.bi(new D(a.right, a.y)))
    };
    P.prototype.containedInRect = P.prototype.Vx = function(a, b) {
        t && v.c(a, E, P, "containedInRect:r");
        if (b === f) return a.pl(this.la);
        var c = this.ua;
        return ! a.fa(b.Bb(new D(0, 0))) || !a.fa(b.Bb(new D(0, c.height))) || !a.fa(b.Bb(new D(c.width, c.height))) || !a.fa(b.Bb(new D(c.width, 0))) ? p: h
    };
    P.prototype.intersectsRect = P.prototype.Te = function(a, b) {
        t && v.c(a, E, P, "intersectsRect:r");
        if (b === f && (b = this.transform, 0 === this.Qa)) return a.Te(this.la);
        var c = this.ua,
        d = b,
        e = new D(0, 0),
        g = new D(0, c.height),
        i = new D(c.width, c.height),
        j = new D(c.width, 0);
        if (a.fa(d.Bb(e)) || a.fa(d.Bb(g)) || a.fa(d.Bb(i)) || a.fa(d.Bb(j))) return h;
        c = new E(0, 0, c.width, c.height);
        return c.fa(d.bi(new D(a.x, a.y))) || c.fa(d.bi(new D(a.x, a.bottom))) || c.fa(d.bi(new D(a.right, a.bottom))) || c.fa(d.bi(new D(a.right, a.y))) || xd(a, e, g) || xd(a, g, i) || xd(a, i, j) || xd(a, j, e) ? h: p
    };
    P.prototype.getDocumentPoint = P.prototype.zb = function(a) {
        Zb(a) && v.g("Spot must be real");
        var b = this.ua,
        a = new D(a.x * b.width + a.offsetX, a.y * b.height + a.offsetY);
        this.ge.Bb(a);
        return a
    };
    P.prototype.getDocumentAngle = P.prototype.An = function() {
        var a = this.ge;
        return Math.atan2(a.m12, a.m11) * (180 / Math.PI)
    };
    P.prototype.getDocumentScale = P.prototype.yl = function() {
        var a = this.Qb;
        return this.Y !== m ? a * this.Y.yl() : a
    };
    P.prototype.getLocalPoint = P.prototype.UB = function(a) {
        return this.ge.bi(a.copy())
    };
    P.prototype.getNearestIntersectionPoint = P.prototype.Ju = function(a, b, c) {
        var d = this.transform.copy();
        d.Lu();
        if (this.Oh !== m) return wd(this.la, a, b, c);
        if (! (this instanceof w) || this instanceof w && this.background !== m) {
            var e = Ob(d, a),
            b = Ob(d, b),
            a = new D,
            b = wd(new E(0, 0, this.ua.width, this.ua.height), e, b, a),
            a = Ob(this.transform, a);
            c.x = a.x;
            c.y = a.y;
            return b
        }
        if (this instanceof w && (this.Oh === m || this.Oh === f)) {
            e = this.wa.i;
            a = Ob(d, a);
            d = Ob(d, b);
            c.set(d);
            for (var g = (d.x - a.x) * (d.x - a.x) + (d.y - a.y) * (d.y - a.y), b = p, i = e.length, j = new D, k = 0; k < i; k++) {
                var l = e[k];
                l.visible && l.Ju(a, d, j) && (b = h, l = (a.x - j.x) * (a.x - j.x) + (a.y - j.y) * (a.y - j.y), l < g && (g = l, c.set(j)))
            }
            c.transform(this.transform);
            return b
        }
        v.g("Unknown GraphObject case");
        return p
    };
    function mh(a, b, c, d, e) {
        if (a.ac !== p) {
            var g = a.margin,
            i = g.top + g.bottom,
            b = Math.max(b - (g.right + g.left), 0),
            c = Math.max(c - i, 0),
            g = a.ma,
            i = 0;
            a.Ua && (i = a.Ua);
            var b = isFinite(g.width) ? g.width + i: b,
            c = isFinite(g.height) ? g.height + i: c,
            g = d,
            i = e,
            j = a instanceof w;
            switch (bj(a)) {
            case Wi:
                i = g = 0;
                j && (c = b = Infinity);
                break;
            case Qd:
                isFinite(b) && b > d && (g = b);
                isFinite(c) && c > e && (i = c);
                break;
            case Yi:
                isFinite(b) && b > d && (g = b);
                i = 0;
                j && (c = Infinity);
                break;
            case Xi:
                isFinite(c) && c > e && (i = c),
                g = 0,
                j && (b = Infinity)
            }
            var j = a.Fd,
            k = a.Xd;
            g > j.width && k.width < j.width && (g = j.width);
            i > j.height && k.height < j.height && (i = j.height);
            d = Math.max(g / a.scale, k.width);
            e = Math.max(i / a.scale, k.height);
            j.width < d && (d = Math.min(k.width, d));
            j.height < e && (e = Math.min(k.height, e));
            b = Math.min(j.width, b);
            c = Math.min(j.height, c);
            b = Math.max(d, b);
            c = Math.max(e, c);
            g = a.Qa;
            if (90 === g || 270 === g) g = b,
            b = c,
            c = g,
            g = d,
            d = e,
            e = g;
            a.Hc.qa();
            a.Mr(b, c, d, e);
            a.Hc.freeze();
            a.Hc.aa() || v.g("Non-real measuredBounds has been set");
            a.ac = p
        }
    }
    da = P.prototype;
    da.vc = function(a, b, c, d, e) {
        cj(this);
        var g = this.LA;
        g.set(this.yb);
        this.yb.qa();
        if (this.Ec === p) {
            var i = this.yb;
            i.x = a;
            i.y = b;
            i.width = c;
            i.height = d
        } else this.Hi(a, b, c, d);
        this.yb.freeze();
        this.Ao = e === f ? m: e;
        e !== f ? this.zo = h: this.Y && (c = this.Y.qc, d = this.na, this.Oh !== m && (d = this.yb), e = b + d.height, i = a + d.width, this.zo = !(0 <= a && i <= c.width && 0 <= b && e <= c.height), this instanceof qa && (this.jt > d.height && (this.zo = h), this.Bm.ei > d.width && (this.zo = h)));
        this.yb.aa() || v.g("Non-real actualBounds has been set");
        dj(this, g, this.yb)
    };
    da.Hi = aa();
    function ej(a, b, c, d, e) {
        var g = a.la;
        g.x = b;
        g.y = c;
        g.width = d;
        g.height = e;
        if (!a.ma.aa()) {
            var g = a.Hc,
            c = a.margin,
            b = c.right + c.left,
            i = c.top + c.bottom,
            c = g.width + b,
            g = g.height + i,
            d = d + b,
            e = e + i,
            b = bj(a);
            c === d && g === e && (b = Wi);
            switch (b) {
            case Wi:
                if (c > d || g > e) a.ac = h,
                mh(a, c > d ? d: c, g > e ? e: g);
                break;
            case Qd:
                a.ac = h;
                mh(a, d, e, 0, 0);
                break;
            case Yi:
                a.ac = h;
                mh(a, d, g, 0, 0);
                break;
            case Xi:
                a.ac = h,
                mh(a, c, e, 0, 0)
            }
        }
    }
    function dj(a, b, c) {
        a.Ec = p;
        var d = a.W;
        if (d !== m) {
            var e = d.b;
            if (e !== m) if (fj(d), a instanceof R) {
                d = p;
                if (e.Gj === p) {
                    var g = e.yc,
                    i = e.padding,
                    e = g.x + i.left,
                    j = g.y + i.top,
                    k = g.width - 2 * i.right,
                    g = g.height - 2 * i.bottom;
                    b.aa() && (b.x > e && b.y > j && b.right < k && b.bottom < g && c.x > e && c.y > j && c.right < k && c.bottom < g) && (d = h)
                } (a.zt === h || !b.u(c)) && xi(a, d)
            } else if (gj(a, d), hj(a), b = a.W, b !== m && (b.$j === a || b.el === a || b.fl === a)) b.zt = h
        }
    }
    function gj(a, b) {
        a.pe !== m && (b.zt = h);
        if (a instanceof w) for (var c = a.wa,
        d = c.length,
        e = 0; e < d; e++) gj(c.i[e], b)
    }
    da.fg = function(a, b) {
        if (this.Ug) if (this instanceof w && (this.type === ij || this.type === jj)) {
            var c = this.yb;
            0 === c.width || (0 === c.height || isNaN(c.x) || isNaN(c.y)) || (this.Ff !== m && (kj(this, a, this.Ff, h, h), a.fillRect(c.x, c.y, c.width, c.height)), this.Gf !== m && (kj(this, a, this.Gf, h), a.fillRect(c.x, c.y, c.width, c.height)), this.rn(a, b))
        } else {
            var d = p;
            if (this instanceof R) {
                d = h;
                if (!this.eb()) return;
                if (this.Qf) {
                    var e = this.Nm;
                    a.shadowOffsetX = e.x * b.scale;
                    a.shadowOffsetY = e.y * b.scale;
                    a.shadowColor = this.Mm;
                    a.shadowBlur = this.Lm
                }
            }
            var g = p;
            this.W && (g = this.W.Dl);
            c = this.yb;
            if (! (0 === c.width || 0 === c.height || isNaN(c.x) || isNaN(c.y))) {
                var e = this.transform,
                i = this.Y,
                j = this.to;
                j.reset();
                i !== m && (i.hi() ? j.multiply(i.ge) : i.Y !== m && j.multiply(i.Y.ge));
                j.multiply(this.Md);
                if (j = this.zo) {
                    t && t.tF && t.trace("clip" + this.toString());
                    var k = i.hi() ? i.ua: i.la;
                    if (this.Ao) var l = this.Ao,
                    n = Math.max(l.x, Math.max(c.x, k.x)),
                    r = Math.max(l.y, Math.max(c.y, k.y)),
                    q = Math.abs(n - Math.min(l.right, Math.min(c.right, k.right))),
                    l = Math.abs(r - Math.min(l.bottom, Math.min(c.bottom, k.bottom)));
                    else n = Math.max(c.x, k.x),
                    r = Math.max(c.y, k.y),
                    q = Math.min(c.right, k.right) - n,
                    l = Math.min(c.bottom, k.bottom) - r;
                    if (n > c.width + c.x || c.x > k.width + k.x || r > c.height + c.y || c.y > k.height + k.y) return;
                    a.save();
                    a.beginPath();
                    a.rect(n, r, q, l);
                    a.clip()
                }
                this.Ff !== m && (kj(this, a, this.Ff, h, h), a.fillRect(c.x, c.y, c.width, c.height));
                e.qy() || a.transform(e.m11, e.m12, e.m21, e.m22, e.Sa, e.Ta);
                this.Gf !== m && (r = this.ua, k = c = 0, n = r.width, r = r.height, q = 0, this instanceof V && (r = this.xa.lb, c = r.x, k = r.y, n = r.width, r = r.height, q = this.Kh), kj(this, a, this.Gf, h), a.fillRect(c - q / 2, k - q / 2, n + q, r + q));
                if (g && (this.Gf !== m || this.Ff !== m || i !== m && i.Yl || i !== m && i.type === Qh && i.Nq !== this)) {
                    this.Yl = h;
                    var u = [a.shadowOffsetX, a.shadowOffsetY, a.shadowBlur];
                    a.shadowOffsetX = 0;
                    a.shadowOffsetY = 0;
                    a.shadowBlur = 0
                } else this.Yl = p;
                this.rn(a, b);
                g && this.Yl === h && (a.shadowOffsetX = u[0], a.shadowOffsetY = u[1], a.shadowBlur = u[2]);
                d && g && (a.shadowOffsetX = 0, a.shadowOffsetY = 0, a.shadowBlur = 0);
                j ? (a.restore(), Wh(b, a)) : e.qy() || (d = 1 / (e.m11 * e.m22 - e.m12 * e.m21), a.transform(e.m22 * d, -e.m12 * d, -e.m21 * d, e.m11 * d, d * (e.m21 * e.Ta - e.m22 * e.Sa), d * (e.m12 * e.Sa - e.m11 * e.Ta)))
            }
        }
    };
    da.rn = aa();
    da.mg = function() {
        var a = this.b;
        if (a !== m) {
            Mi(a, "naturalBounds", this.ua);
            Mi(a, "actualBounds", this.la);
            0 !== this.Qa && Mi(a, "angle", this.Qa);
            1 !== this.scale && Mi(a, "scale", this.scale);
            var b = this.ge;
            Mi(a, "allTransforms", [b.m11, b.m12, b.m21, b.m22, b.Sa, b.Ta]);
            this.background !== m && Mi(a, "background", this.background);
            this.Oh !== m && Mi(a, "areaBackground", this.Oh)
        }
    };
    function kj(a, b, c, d, e) {
        if (c !== m) if ("string" === typeof c) d ? b.Ul !== c && (b.fillStyle = c, b.Ul = c) : b.Vl !== c && (b.strokeStyle = c, b.Vl = c);
        else if (c.type === Le) c = c.color,
        d ? b.Ul !== c && (b.fillStyle = c, b.Ul = c) : b.Vl !== c && (b.strokeStyle = c, b.Vl = c);
        else {
            var g, i = a.ua,
            j = i.width,
            i = i.height;
            if (c.Lf && c.type === Ti || c.Az == j && c.zz == i) g = c.Lf;
            else {
                var k, l, n, r = n = 0;
                e && (a = a.la, j = a.width, i = a.height, n = a.x, r = a.y);
                c.start instanceof D ? (a = c.start.x, e = c.start.y) : c.start instanceof F ? (a = c.start.x * j, e = c.start.y * i) : (a = mc.x * j, e = mc.y * i);
                c.end instanceof D ? (k = c.end.x, l = c.end.y) : c.end instanceof F ? (k = c.end.x * j, l = c.end.y * i) : c.type === Me ? (k = sc.x * j, l = sc.y * i) : (k = mc.x * j, l = mc.y * i);
                a += n;
                k += n;
                e += r;
                l += r;
                c.type === Me ? g = b.createLinearGradient(a, e, k, l) : c.type === Ne ? (n = isNaN(c.sn) ? Math.max(j, i) / 2 : c.sn, isNaN(c.ho) ? (g = 0, n = Math.max(j, i) / 2) : g = c.ho, g = b.createRadialGradient(a, e, g, k, l, n)) : c.type === Ti ? g = b.createPattern(c.pattern, "repeat") : v.Ac(c.type, "Brush type");
                if (c.type !== Ti && (n = c.nn)) for (n = n.f; n.next();) g.addColorStop(n.key, n.value);
                c.Lf = g;
                c.Az = j;
                c.zz = i
            }
            d ? b.Ul !== g && (b.fillStyle = g, b.Ul = g) : b.Vl !== g && (b.strokeStyle = g, b.Vl = g)
        }
    }
    P.prototype.isContainedBy = P.prototype.ci = function(a) {
        if (a instanceof w) a: {
            if (! (this === a || a === m)) for (var b = this.Y; b !== m;) {
                if (b === a) {
                    a = h;
                    break a
                }
                b = b.Y
            }
            a = p
        } else a = p;
        return a
    };
    P.prototype.isVisibleObject = P.prototype.nk = function() {
        if (!this.visible) return p;
        var a = this.Y;
        return a !== m ? a.nk() : h
    };
    function lj(a) {
        if (a.um === h) {
            var b = a.Md;
            b.reset();
            if (!a.yb.aa() || !a.Hc.aa()) {
                a.um = p;
                return
            }
            b.translate(a.yb.x, a.yb.y);
            b.translate( - a.na.x, -a.na.y);
            var c = a.ua;
            $i(a, b, c.x, c.y, c.width, c.height);
            a.um = p;
            a.Ok = h
        }
        a.Ok === h && (a.Y === m ? (a.to.set(a.Md), a.Ok = p) : a.Y.ge !== m && (b = a.to, b.reset(), b.multiply(a.Y.to), b.multiply(a.Md), a.Ok = p))
    }
    function $i(a, b, c, d, e, g) {
        1 !== a.scale && b.scale(a.scale);
        if (0 !== a.Qa) {
            var i = mc;
            a.tf && Vb(a.tf) && (i = a.tf);
            var j = new D;
            if (a instanceof R && a.Ab !== a) {
                c = a.Ab;
                d = c.ua;
                j.Ml(d.x, d.y, d.width, d.height, i);
                c.Cm.Bb(j);
                j.offset( - c.na.x, -c.na.y);
                for (i = c.Y; i !== m && i !== a;) i.Cm.Bb(j),
                j.offset( - i.na.x, -i.na.y),
                i = i.Y
            } else j.Ml(c, d, e, g, i);
            b.rotate(a.Qa, j.x, j.y)
        }
    }
    P.prototype.J = function() {
        if (this.ac !== h) {
            this.Ec = this.ac = h;
            if (this.Y !== m) this.Y.ac = p,
            this.Y.J();
            else {
                var a = this.b;
                a !== m && (a.zg.add(this), this instanceof S && !a.da.cb && this.pf(), yf(a))
            }
            if (this instanceof w) for (var a = this.K === Qh,
            b = this.wa.i,
            c = b.length,
            d = 0; d < c; d++) {
                var e = b[d]; (a || !e.ma.aa() || bj(e) !== Wi) && e.J()
            }
            hj(this)
        }
    };
    function mj(a) {
        if (a.ac === p && (a.ac = h, a.Ec = h, a instanceof w)) for (var a = a.wa.i,
        b = a.length,
        c = 0; c < b; c++) mj(a[c])
    }
    function nj(a) {
        if (a.Ec === p) {
            if (a.Y !== m) nj(a.Y);
            else {
                var b = a.b;
                b !== m && (b.zg.add(a), a instanceof S && a.pf(), yf(b))
            }
            a.Ec = h
        }
    }
    function cj(a) {
        if (a.um === p && (a.um = h, a.Ok = h, a instanceof w)) for (a = a.elements; a.next();) oj(a.value)
    }
    function oj(a) {
        a.Ok = h;
        if (a instanceof w) for (a = a.elements; a.next();) oj(a.value)
    }
    function hj(a) {
        if (a.Y !== m) hj(a.Y);
        else {
            var b = a.b;
            b !== m && a.yb.aa() && xh(b, a.yb)
        }
    }
    function bj(a) {
        var b = a.jh,
        c = a.Y;
        if (c && c.K === pj) return qj(a, c.qd(a.Ub), c.qd(a.ic));
        if (c && c.K === Qh && c.Nq === a) return Qd;
        if (b === Qg) {
            if (c) {
                if (c.Nq === a) return Qd;
                a = c.Zx;
                return a === Qg ? Wi: a
            }
            return Wi
        }
        return b
    }
    function qj(a, b, c) {
        var d = a.jh;
        if (d !== Qg) return d;
        var e = d = f;
        switch (b.jh) {
        case Xi:
            e = h;
            break;
        case Qd:
            e = h
        }
        switch (c.jh) {
        case Yi:
            d = h;
            break;
        case Qd:
            d = h
        }
        a = a.Y.Zx;
        d = d === f && (a === Yi || a === Qd) ? h: p;
        e = e === f && (a === Xi || a === Qd) ? h: p;
        return d === h && e === h ? Qd: d === h ? Yi: e === h ? Xi: Wi
    }
    v.a(P, "segmentOrientation", P.prototype.as);
    v.defineProperty(P, {
        as: "segmentOrientation"
    },
    s("zq"),
    function(a) {
        var b = this.zq;
        b !== a && (t && v.Va(a, U, P, "segmentOrientation"), this.zq = a, this.J(), this.d("segmentOrientation", b, a))
    });
    v.a(P, "segmentIndex", P.prototype.ih);
    v.defineProperty(P, {
        ih: "segmentIndex"
    },
    s("xq"),
    function(a) {
        t && v.e(a, "number", P, "segmentIndex");
        var a = Math.round(a),
        b = this.xq;
        b !== a && (this.xq = a, this.J(), this.d("segmentIndex", b, a))
    });
    v.a(P, "segmentFraction", P.prototype.Sy);
    v.defineProperty(P, {
        Sy: "segmentFraction"
    },
    s("wq"),
    function(a) {
        t && v.e(a, "number", P, "segmentFraction");
        isNaN(a) ? a = 0 : 0 > a ? a = 0 : 1 < a && (a = 1);
        var b = this.wq;
        b !== a && (this.wq = a, this.J(), this.d("segmentFraction", b, a))
    });
    v.a(P, "segmentOffset", P.prototype.Ty);
    v.defineProperty(P, {
        Ty: "segmentOffset"
    },
    s("yq"),
    function(a) {
        var b = this.yq;
        b.u(a) || (t && v.c(a, D, P, "segmentOffset"), this.yq = a = a.B(), this.J(), this.d("segmentOffset", b, a))
    });
    v.a(P, "stretch", P.prototype.jh);
    v.defineProperty(P, {
        jh: "stretch"
    },
    s("Lg"),
    function(a) {
        var b = this.Lg;
        b !== a && (t && v.Va(a, P, P, "stretch"), this.Lg = a, this.J(), this.d("stretch", b, a))
    });
    v.a(P, "name", P.prototype.name);
    v.defineProperty(P, {
        name: "name"
    },
    s("wb"),
    function(a) {
        var b = this.wb;
        b !== a && (t && v.e(a, "string", P, "name"), this.wb = a, this.d("name", b, a))
    });
    v.a(P, "visible", P.prototype.visible);
    v.defineProperty(P, {
        visible: "visible"
    },
    s("Ug"),
    function(a) {
        var b = this.Ug;
        b !== a && (t && v.e(a, "boolean", P, "visible"), this.Ug = a, this.d("visible", b, a), b = this.Y, b !== m ? b.J() : this instanceof R && (this.J(), fj(this), a ? (this.r(rj), this.ii()) : (this.r(sj), this.Wg())), hj(this), uj(this))
    });
    v.a(P, "areaBackground", P.prototype.Oh);
    v.defineProperty(P, {
        Oh: "areaBackground"
    },
    s("Ff"),
    function(a) {
        var b = this.Ff;
        if (b !== a && (a === m || "string" === typeof a || a instanceof Ke)) a instanceof Ke && a.freeze(),
        this.Ff = a,
        hj(this),
        this.d("areaBackground", b, a)
    });
    v.a(P, "background", P.prototype.background);
    v.defineProperty(P, {
        background: "background"
    },
    s("Gf"),
    function(a) {
        var b = this.Gf;
        if (b !== a && (a === m || "string" === typeof a || a instanceof Ke)) a instanceof Ke && a.freeze(),
        this.Gf = a,
        hj(this),
        this.d("background", b, a)
    });
    v.m(P, {
        W: "part"
    },
    function() {
        if (this instanceof R) return this;
        if (this.$k) return this.$k;
        var a;
        for (a = this.Y; a;) {
            if (a instanceof R) return this.$k = a;
            a = a.Y
        }
        return m
    });
    P.prototype.tk = ba("Sj");
    v.m(P, {
        Y: "panel"
    },
    s("Sj"));
    v.m(P, {
        ta: "layer"
    },
    function() {
        var a = this.W;
        return a !== m ? a.ta: m
    });
    v.m(P, {
        b: "diagram"
    },
    function() {
        var a = this.W;
        return a !== m ? a.b: m
    },
    {
        configurable: h
    });
    v.a(P, "position", P.prototype.position);
    v.defineProperty(P, {
        position: "position"
    },
    s("kb"),
    function(a) {
        var b = this.kb;
        if (!b.u(a)) {
            t && v.c(a, D, P, "position");
            if (this instanceof R) {
                if (!a.aa()) return;
                var c = this.ui,
                d = this.ft,
                e = c.copy();
                c.yd(a.x + d.x, a.y + d.y);
                c.u(e) || this.d("location", e, c);
                if (this.Ec === p) {
                    this.kb = a = a.B();
                    Cj(this);
                    cj(this);
                    this.d("position", b, a);
                    return
                }
            }
            this.kb = a = a.B();
            nj(this);
            cj(this);
            this.d("position", b, a)
        }
    });
    v.m(P, {
        la: "actualBounds"
    },
    s("yb"));
    v.a(P, "scale", P.prototype.scale);
    v.defineProperty(P, {
        scale: "scale"
    },
    s("Qb"),
    function(a) {
        var b = this.Qb;
        b !== a && (t && v.j(a, P, "scale"), 0 >= a && v.g("GraphObject.scale must be greater than zero"), this.Qb = a, cj(this), this.J(), this.d("scale", b, a))
    });
    v.a(P, "angle", P.prototype.Qa);
    v.defineProperty(P, {
        Qa: "angle"
    },
    s("Wb"),
    function(a) {
        var b = this.Wb;
        b !== a && (t && v.j(a, P, "angle"), this.Wb = a, this.J(), cj(this), this.d("angle", b, a))
    });
    v.a(P, "desiredSize", P.prototype.ma);
    v.defineProperty(P, {
        ma: "desiredSize"
    },
    s("ae"),
    function(a) {
        var b = this.ae;
        b.u(a) || (t && v.c(a, sb, P, "desiredSize"), this.ae = a = a.B(), this.J(), this instanceof V && this.qf(), this.d("desiredSize", b, a))
    });
    v.a(P, "width", P.prototype.width);
    v.defineProperty(P, {
        width: "width"
    },
    function() {
        return this.ae.width
    },
    function(a) {
        if (this.ae.width !== a) {
            t && v.e(a, "number", P, "width");
            var b = this.ae;
            this.ae = a = (new sb(a, this.ae.height)).freeze();
            this.J();
            this instanceof V && this.qf();
            this.d("desiredSize", b, a)
        }
    });
    v.a(P, "height", P.prototype.height);
    v.defineProperty(P, {
        height: "height"
    },
    function() {
        return this.ae.height
    },
    function(a) {
        if (this.ae.height !== a) {
            t && v.e(a, "number", P, "height");
            var b = this.ae;
            this.ae = a = (new sb(this.ae.width, a)).freeze();
            this.J();
            this instanceof V && this.qf();
            this.d("desiredSize", b, a)
        }
    });
    v.a(P, "minSize", P.prototype.Xd);
    v.defineProperty(P, {
        Xd: "minSize"
    },
    s("wd"),
    function(a) {
        var b = this.wd;
        b.u(a) || (t && v.c(a, sb, P, "minSize"), a = a.copy(), isNaN(a.width) && (a.width = 0), isNaN(a.height) && (a.height = 0), a.freeze(), this.wd = a, this.J(), this.d("minSize", b, a))
    });
    v.a(P, "maxSize", P.prototype.Fd);
    v.defineProperty(P, {
        Fd: "maxSize"
    },
    s("wi"),
    function(a) {
        var b = this.wi;
        b.u(a) || (t && v.c(a, sb, P, "maxSize"), a = a.copy(), isNaN(a.width) && (a.width = Infinity), isNaN(a.height) && (a.height = Infinity), a.freeze(), this.wi = a, this.J(), this.d("maxSize", b, a))
    });
    v.m(P, {
        na: "measuredBounds"
    },
    s("Hc"));
    v.m(P, {
        ua: "naturalBounds"
    },
    s("qc"), {
        configurable: h
    });
    v.a(P, "margin", P.prototype.margin);
    v.defineProperty(P, {
        margin: "margin"
    },
    s("Mp"),
    function(a) {
        "number" === typeof a ? a = new Hb(a) : t && v.c(a, Hb, P, "margin");
        var b = this.Mp;
        b.u(a) || (this.Mp = a = a.B(), this.J(), this.d("margin", b, a))
    });
    v.m(P, {
        transform: m
    },
    function() {
        this.um === h && lj(this);
        return this.Md
    });
    v.m(P, {
        ge: m
    },
    function() {
        this.Ok === h && lj(this);
        return this.to
    });
    v.a(P, "alignment", P.prototype.pb);
    v.defineProperty(P, {
        pb: "alignment"
    },
    s("ja"),
    function(a) {
        var b = this.ja;
        b.u(a) || (t ? v.c(a, F, P, "alignment") : Zb(a) && !$b(a) && v.g("alignment must be a real Spot or Spot.Default"), this.ja = a = a.B(), nj(this), this.d("alignment", b, a))
    });
    v.a(P, "column", P.prototype.ic);
    v.defineProperty(P, {
        ic: "column"
    },
    s("I"),
    function(a) {
        t && v.j(a, P, "column");
        var a = Math.round(a),
        b = this.I;
        b !== a && (0 > a && v.ha(a, ">= 0", P, "column"), this.I = a, this.J(), this.d("column", b, a))
    });
    v.a(P, "columnSpan", P.prototype.lB);
    v.defineProperty(P, {
        lB: "columnSpan"
    },
    s("uj"),
    function(a) {
        t && v.j(a, P, "columnSpan");
        var a = Math.round(a),
        b = this.uj;
        b !== a && (1 > a && v.ha(a, ">= 1", P, "columnSpan"), this.uj = a, this.J(), this.d("columnSpan", b, a))
    });
    v.a(P, "row", P.prototype.Ub);
    v.defineProperty(P, {
        Ub: "row"
    },
    s("uq"),
    function(a) {
        t && v.j(a, P, "row");
        var a = Math.round(a),
        b = this.uq;
        b !== a && (0 > a && v.ha(a, ">= 0", P, "row"), this.uq = a, this.J(), this.d("row", b, a))
    });
    v.a(P, "rowSpan", P.prototype.rowSpan);
    v.defineProperty(P, {
        rowSpan: "rowSpan"
    },
    s("Xj"),
    function(a) {
        t && v.j(a, P, "rowSpan");
        var a = Math.round(a),
        b = this.Xj;
        b !== a && (1 > a && v.ha(a, ">= 1", P, "rowSpan"), this.Xj = a, this.J(), this.d("rowSpan", b, a))
    });
    v.a(P, "isPanelMain", P.prototype.Vi);
    v.defineProperty(P, {
        Vi: "isPanelMain"
    },
    s("tp"),
    function(a) {
        var b = this.tp;
        b !== a && (t && v.e(a, "boolean", P, "isPanelMain"), this.tp = a, this.J(), this.d("isPanelMain", b, a))
    });
    v.a(P, "alignmentFocus", P.prototype.Fi);
    v.defineProperty(P, {
        Fi: "alignmentFocus"
    },
    s("so"),
    function(a) {
        var b = this.so;
        b.u(a) || (t ? v.c(a, F, P, "alignmentFocus") : Zb(a) && !$b(a) && v.g("alignmentFocus must be a real Spot or Spot.Default"), this.so = a = a.B(), this.J(), this.d("alignmentFocus", b, a))
    });
    v.a(P, "portId", P.prototype.pe);
    v.defineProperty(P, {
        pe: "portId"
    },
    s("fq"),
    function(a) {
        var b = this.fq;
        if (b !== a) {
            t && a !== m && v.e(a, "string", P, "portId");
            var c = this.W;
            c !== m && !(c instanceof S) && (v.g("portID being set on a Link: " + a), c = m);
            b !== m && c && Fj(c, this);
            this.fq = a;
            a !== m && c && (c.rc === m && Gj(c), Hj(c, this));
            this.d("portId", b, a)
        }
    });
    function Ij(a) {
        var b = {
            value: m
        };
        Jj(a, b);
        return b.value
    }
    function Jj(a, b) {
        var c = a.Y;
        return c === m || !Jj(c, b) && a.visible ? (b.value = a, p) : h
    }
    function uj(a) {
        var b = a.W;
        b instanceof S && (a = a.b) && !a.da.cb && b.pf()
    }
    v.a(P, "toSpot", P.prototype.$a);
    v.defineProperty(P, {
        $a: "toSpot"
    },
    s("Sg"),
    function(a) {
        var b = this.Sg;
        b.u(a) || (t && v.c(a, F, P, "toSpot"), this.Sg = a = a.B(), this.d("toSpot", b, a), uj(this))
    });
    v.a(P, "toEndSegmentLength", P.prototype.vk);
    v.defineProperty(P, {
        vk: "toEndSegmentLength"
    },
    s("Og"),
    function(a) {
        var b = this.Og;
        b !== a && (t && v.e(a, "number", P, "toEndSegmentLength"), 0 > a && v.ha(a, ">= 0", P, "toEndSegmentLength"), this.Og = a, this.d("toEndSegmentLength", b, a), uj(this))
    });
    v.a(P, "toEndSegmentDirection", P.prototype.hs);
    v.defineProperty(P, {
        hs: "toEndSegmentDirection"
    },
    s("Ng"),
    function(a) {
        var b = this.Ng;
        b !== a && (t && v.Va(a, S, P, "toEndSegmentDirection"), this.Ng = a, this.d("toEndSegmentDirection", b, a), uj(this))
    });
    v.a(P, "toShortLength", P.prototype.is);
    v.defineProperty(P, {
        is: "toShortLength"
    },
    s("Rg"),
    function(a) {
        var b = this.Rg;
        b !== a && (t && v.e(a, "number", P, "toShortLength"), this.Rg = a, this.d("toShortLength", b, a), uj(this))
    });
    v.a(P, "toLinkable", P.prototype.fz);
    v.defineProperty(P, {
        fz: "toLinkable"
    },
    s("Qq"),
    function(a) {
        var b = this.Qq;
        b !== a && (t && a !== m && v.e(a, "boolean", P, "toLinkable"), this.Qq = a, this.d("toLinkable", b, a))
    });
    v.a(P, "toLinkableDuplicates", P.prototype.wD);
    v.defineProperty(P, {
        wD: "toLinkableDuplicates"
    },
    s("Rq"),
    function(a) {
        var b = this.Rq;
        b !== a && (t && v.e(a, "boolean", P, "toLinkableDuplicates"), this.Rq = a, this.d("toLinkableDuplicates", b, a))
    });
    v.a(P, "toLinkableSelfNode", P.prototype.xD);
    v.defineProperty(P, {
        xD: "toLinkableSelfNode"
    },
    s("Sq"),
    function(a) {
        var b = this.Sq;
        b !== a && (t && v.e(a, "boolean", P, "toLinkableSelfNode"), this.Sq = a, this.d("toLinkableSelfNode", b, a))
    });
    v.a(P, "toMaxLinks", P.prototype.yD);
    v.defineProperty(P, {
        yD: "toMaxLinks"
    },
    s("Tq"),
    function(a) {
        var b = this.Tq;
        b !== a && (t && v.j(a, P, "toMaxLinks"), 0 > a && v.ha(a, ">= 0", P, "toMaxLinks"), this.Tq = a, this.d("toMaxLinks", b, a))
    });
    v.a(P, "fromSpot", P.prototype.Ya);
    v.defineProperty(P, {
        Ya: "fromSpot"
    },
    s("yg"),
    function(a) {
        var b = this.yg;
        b.u(a) || (t && v.c(a, F, P, "fromSpot"), this.yg = a = a.B(), this.d("fromSpot", b, a), uj(this))
    });
    v.a(P, "fromEndSegmentLength", P.prototype.kk);
    v.defineProperty(P, {
        kk: "fromEndSegmentLength"
    },
    s("ug"),
    function(a) {
        var b = this.ug;
        b !== a && (t && v.e(a, "number", P, "fromEndSegmentLength"), 0 > a && v.ha(a, ">= 0", P, "fromEndSegmentLength"), this.ug = a, this.d("fromEndSegmentLength", b, a), uj(this))
    });
    v.a(P, "fromEndSegmentDirection", P.prototype.yr);
    v.defineProperty(P, {
        yr: "fromEndSegmentDirection"
    },
    s("tg"),
    function(a) {
        var b = this.tg;
        b !== a && (t && v.Va(a, S, P, "fromEndSegmentDirection"), this.tg = a, this.d("fromEndSegmentDirection", b, a), uj(this))
    });
    v.a(P, "fromShortLength", P.prototype.zr);
    v.defineProperty(P, {
        zr: "fromShortLength"
    },
    s("xg"),
    function(a) {
        var b = this.xg;
        b !== a && (t && v.e(a, "number", P, "fromShortLength"), this.xg = a, this.d("fromShortLength", b, a), uj(this))
    });
    v.a(P, "fromLinkable", P.prototype.hy);
    v.defineProperty(P, {
        hy: "fromLinkable"
    },
    s("bp"),
    function(a) {
        var b = this.bp;
        b !== a && (t && a !== m && v.e(a, "boolean", P, "fromLinkable"), this.bp = a, this.d("fromLinkable", b, a))
    });
    v.a(P, "fromLinkableDuplicates", P.prototype.PB);
    v.defineProperty(P, {
        PB: "fromLinkableDuplicates"
    },
    s("cp"),
    function(a) {
        var b = this.cp;
        b !== a && (t && v.e(a, "boolean", P, "fromLinkableDuplicates"), this.cp = a, this.d("fromLinkableDuplicates", b, a))
    });
    v.a(P, "fromLinkableSelfNode", P.prototype.QB);
    v.defineProperty(P, {
        QB: "fromLinkableSelfNode"
    },
    s("dp"),
    function(a) {
        var b = this.dp;
        b !== a && (t && v.e(a, "boolean", P, "fromLinkableSelfNode"), this.dp = a, this.d("fromLinkableSelfNode", b, a))
    });
    v.a(P, "fromMaxLinks", P.prototype.RB);
    v.defineProperty(P, {
        RB: "fromMaxLinks"
    },
    s("ep"),
    function(a) {
        var b = this.ep;
        b !== a && (t && v.j(a, P, "fromMaxLinks"), 0 > a && v.ha(a, ">= 0", P, "fromMaxLinks"), this.ep = a, this.d("fromMaxLinks", b, a))
    });
    v.a(P, "cursor", P.prototype.cursor);
    v.defineProperty(P, {
        cursor: "cursor"
    },
    s("Go"),
    function(a) {
        var b = this.Go;
        b !== a && (v.e(a, "string", P, "cursor"), this.Go = a, this.d("cursor", b, a))
    });
    v.a(P, "click", P.prototype.click);
    v.defineProperty(P, {
        click: "click"
    },
    s("oh"),
    function(a) {
        var b = this.oh;
        b !== a && (a !== m && v.e(a, "function", P, "click"), this.oh = a, this.d("click", b, a))
    });
    v.a(P, "doubleClick", P.prototype.ul);
    v.defineProperty(P, {
        ul: "doubleClick"
    },
    s("rh"),
    function(a) {
        var b = this.rh;
        b !== a && (a !== m && v.e(a, "function", P, "doubleClick"), this.rh = a, this.d("doubleClick", b, a))
    });
    v.a(P, "contextClick", P.prototype.nr);
    v.defineProperty(P, {
        nr: "contextClick"
    },
    s("ph"),
    function(a) {
        var b = this.ph;
        b !== a && (a !== m && v.e(a, "function", P, "contextClick"), this.ph = a, this.d("contextClick", b, a))
    });
    v.a(P, "mouseEnter", P.prototype.Fy);
    v.defineProperty(P, {
        Fy: "mouseEnter"
    },
    s("Vp"),
    function(a) {
        var b = this.Vp;
        b !== a && (a !== m && v.e(a, "function", P, "mouseEnter"), this.Vp = a, this.d("mouseEnter", b, a))
    });
    v.a(P, "mouseLeave", P.prototype.Gy);
    v.defineProperty(P, {
        Gy: "mouseLeave"
    },
    s("Wp"),
    function(a) {
        var b = this.Wp;
        b !== a && (a !== m && v.e(a, "function", P, "mouseLeave"), this.Wp = a, this.d("mouseLeave", b, a))
    });
    v.a(P, "mouseOver", P.prototype.Sr);
    v.defineProperty(P, {
        Sr: "mouseOver"
    },
    s("Eh"),
    function(a) {
        var b = this.Eh;
        b !== a && (a !== m && v.e(a, "function", P, "mouseOver"), this.Eh = a, this.d("mouseOver", b, a))
    });
    v.a(P, "mouseHover", P.prototype.Rr);
    v.defineProperty(P, {
        Rr: "mouseHover"
    },
    s("Dh"),
    function(a) {
        var b = this.Dh;
        b !== a && (a !== m && v.e(a, "function", P, "mouseHover"), this.Dh = a, this.d("mouseHover", b, a))
    });
    v.a(P, "mouseHold", P.prototype.Qr);
    v.defineProperty(P, {
        Qr: "mouseHold"
    },
    s("Ch"),
    function(a) {
        var b = this.Ch;
        b !== a && (a !== m && v.e(a, "function", P, "mouseHold"), this.Ch = a, this.d("mouseHold", b, a))
    });
    v.a(P, "mouseDragEnter", P.prototype.EC);
    v.defineProperty(P, {
        EC: "mouseDragEnter"
    },
    s("Tp"),
    function(a) {
        var b = this.Tp;
        b !== a && (a !== m && v.e(a, "function", P, "mouseDragEnter"), this.Tp = a, this.d("mouseDragEnter", b, a))
    });
    v.a(P, "mouseDragLeave", P.prototype.Ey);
    v.defineProperty(P, {
        Ey: "mouseDragLeave"
    },
    s("Up"),
    function(a) {
        var b = this.Up;
        b !== a && (a !== m && v.e(a, "function", P, "mouseDragLeave"), this.Up = a, this.d("mouseDragLeave", b, a))
    });
    v.a(P, "mouseDrop", P.prototype.Pr);
    v.defineProperty(P, {
        Pr: "mouseDrop"
    },
    s("Bh"),
    function(a) {
        var b = this.Bh;
        b !== a && (a !== m && v.e(a, "function", P, "mouseDrop"), this.Bh = a, this.d("mouseDrop", b, a))
    });
    v.a(P, "actionDown", P.prototype.yx);
    v.defineProperty(P, {
        yx: "actionDown"
    },
    s("oo"),
    function(a) {
        var b = this.oo;
        b !== a && (a !== m && v.e(a, "function", P, "actionDown"), this.oo = a, this.d("actionDown", b, a))
    });
    v.a(P, "actionUp", P.prototype.Ax);
    v.defineProperty(P, {
        Ax: "actionUp"
    },
    s("qo"),
    function(a) {
        var b = this.qo;
        b !== a && (a !== m && v.e(a, "function", P, "actionUp"), this.qo = a, this.d("actionUp", b, a))
    });
    v.a(P, "actionMove", P.prototype.zx);
    v.defineProperty(P, {
        zx: "actionMove"
    },
    s("po"),
    function(a) {
        var b = this.po;
        b !== a && (a !== m && v.e(a, "function", P, "actionMove"), this.po = a, this.d("actionMove", b, a))
    });
    v.a(P, "actionCancel", P.prototype.xx);
    v.defineProperty(P, {
        xx: "actionCancel"
    },
    s("no"),
    function(a) {
        var b = this.no;
        b !== a && (a !== m && v.e(a, "function", P, "actionCancel"), this.no = a, this.d("actionCancel", b, a))
    });
    v.a(P, "toolTip", P.prototype.js);
    v.defineProperty(P, {
        js: "toolTip"
    },
    s("Lh"),
    function(a) {
        var b = this.Lh;
        b !== a && (a !== m && v.c(a, lf, P, "toolTip"), this.Lh = a, this.d("toolTip", b, a))
    });
    v.a(P, "contextMenu", P.prototype.contextMenu);
    v.defineProperty(P, {
        contextMenu: "contextMenu"
    },
    s("qh"),
    function(a) {
        var b = this.qh;
        b !== a && (a !== m && v.c(a, lf, P, "contextMenu"), this.qh = a, this.d("contextMenu", b, a))
    });
    v.a(P, "isActionable", P.prototype.Mu);
    v.defineProperty(P, {
        Mu: "isActionable"
    },
    s("np"),
    function(a) {
        var b = this.np;
        b !== a && (v.e(a, "boolean", P, "isActionable"), this.np = a, this.d("isActionable", b, a))
    });
    v.a(P, "pickable", P.prototype.MC);
    v.defineProperty(P, {
        MC: "pickable"
    },
    s("hf"),
    function(a) {
        var b = this.hf;
        b !== a && (v.e(a, "boolean", P, "pickable"), this.hf = a, this.d("pickable", b, a))
    });
    P.prototype.bind = P.prototype.bind = function(a) {
        a.kf = this;
        var b = this.wr();
        b !== m && Kj(b) && v.g("Cannot add a Binding to a template that has already been copied: " + a);
        this.Xb === m && (this.Xb = new y(af));
        this.Xb.add(a)
    };
    P.prototype.findTemplateBinder = P.prototype.wr = function() {
        for (var a = this instanceof w ? this: this.Y; a !== m;) {
            if (a.Ek !== m && a instanceof w) return a;
            a = a.Y
        }
        return m
    };
    var Lj;
    P.make = Lj = function(a, b) {
        var c = m,
        d = m;
        if ("function" === typeof a) d = a;
        else if ("string" === typeof a) {
            var e = Mj.ca(a);
            "function" === typeof e ? c = e() : d = ea[a]
        }
        c === m && (d === f && (c = window.$, c !== f && c.noop !== f && v.g("GraphObject.make failed to complete. Is it conflicting with another $ var? (such as jQuery)"), v.g("GraphObject.make failed to complete, it may be conflicting with another var.")), (d === m || !d.constructor) && v.g("GraphObject.make requires a class function or class name, not: " + a), c = new d);
        e = 1;
        c instanceof A && 1 < arguments.length && (d = arguments[1], "string" === typeof d || d instanceof HTMLDivElement ? (c.Wh = m, Oh(c, d), e++) : v.g("Unknown argument to Diagram constructor: " + d));
        for (; e < arguments.length; e++) if (d = arguments[e], "string" === typeof d) if (c instanceof qa) c.text = d;
        else if (c instanceof V) c.Xa = d;
        else if (c instanceof Nj) c.source = d;
        else if (c instanceof w) {
            var g = v.wl(w, d);
            g !== m ? c.type = g: v.g("Unknown Panel type as an argument to GraphObject.make: " + d)
        } else c instanceof Ke ? (g = v.wl(Ke, d), g !== m ? c.type = g: v.g("Unknown Brush type as an argument to GraphObject.make: " + d)) : c instanceof Hd ? (g = v.wl(Hd, d), g !== m ? c.type = g: v.g("Unknown Geometry type as an argument to GraphObject.make: " + d)) : c instanceof re ? (g = v.wl(re, d), g !== m ? c.type = g: v.g("Unknown PathSegment type as an argument to GraphObject.make: " + d)) : v.g("Unable to use a string as an argument to GraphObject.make: " + d);
        else if (d instanceof P) c instanceof w || v.g("A GraphObject can only be added to a Panel, not to: " + c),
        c.add(d);
        else if (d instanceof Oj) c instanceof w || v.g("A RowColumnDefinition can only be added to a Panel, not to: " + c),
        g = d.Qu ? c.Td(d.index) : c.qd(d.index),
        v.c(d, Oj, Oj, "copyFrom:pd"),
        d.Qu ? g.height = d.height: g.width = d.width,
        g.uf = d.uf,
        g.Gd = d.Gd,
        g.pb = d.pb,
        g.ds = d.ds,
        g.Xb = d.Xb;
        else if (d instanceof na) c instanceof U && d.Rd === U ? d === Qf || d === wh ? c.Ze = d: d === Pj || d === Qj || d === Rj ? c.Ne = d: d === Sj || d === Tj || d === Uj ? c.ku = d: d === Vj || d === Vi || v.g("Unknown Link enum value for a Link property: " + d) : c instanceof w && d.Rd === w ? c.type = d: c instanceof qa && d.Rd === qa ? c.lz = d: c instanceof P && d.Rd === U ? 0 === d.name.indexOf("Orient") ? c.as = d: v.g("Unknown Link enum value for GraphObject.segmentOrientation property: " + d) : c instanceof P && d.Rd === P ? c.jh = d: c instanceof A && d.Rd === A ? c.Hx = d: c instanceof Ke && d.Rd === Ke ? c.type = d: c instanceof Hd && d.Rd === Hd ? c.type = d: c instanceof re && d.Rd === re ? c.type = d: c instanceof af && d.Rd === af ? c.mode = d: c instanceof Be && d.Rd === Be ? c.Sc = d: c instanceof W && d.Rd === W ? 0 === d.name.indexOf("Alignment") ? c.pb = d: 0 === d.name.indexOf("Arrangement") ? c.Qd = d: 0 === d.name.indexOf("Compaction") ? c.tu = d: 0 === d.name.indexOf("Path") ? c.path = d: 0 === d.name.indexOf("Sorting") ? c.zf = d: 0 === d.name.indexOf("Style") ? c.HD = d: v.g("Unknown enum value: " + d) : c instanceof X && d.Rd === X ? 0 === d.name.indexOf("Aggressive") ? c.YA = d: 0 === d.name.indexOf("Cycle") ? c.tB = d: 0 === d.name.indexOf("Init") ? c.hC = d: 0 === d.name.indexOf("Layer") ? c.pC = d: v.g("Unknown enum value: " + d) : c instanceof Pi && d.Rd === Pi ? d === Wj || d === Xj || d === Yj || d === Zj ? c.zf = d: d === $j || d === ak ? c.Qd = d: d === bk || d === ck ? c.pb = d: v.g("Unknown enum value: " + d) : c instanceof dk && d.Rd === dk ? d === ek || d === fk || d === gk || d === hk || d === ik ? c.zf = d: d === jk || d === kk || d === lk || d === mk ? c.direction = d: d === nk || d === ok || d === pk || d === qk ? c.Qd = d: d === rk || d === sk ? c.Vr = d: v.g("Unknown enum value: " + d) : v.g("No property to set for this enum value: " + d);
        else if (d instanceof af) c instanceof P || c instanceof Oj ? c.bind(d) : v.g("A Binding can only be applied to a GraphObject or RowColumnDefinition, not to: " + c);
        else if (d instanceof Pd) c instanceof Hd ? c.Kb.add(d) : v.g("A PathFigure can only be added to a Geometry, not to: " + c);
        else if (d instanceof re) c instanceof Pd ? c.gb.add(d) : v.g("A PathSegment can only be added to a PathFigure, not to: " + c);
        else if (v.Oa(d)) if (d instanceof Object && d.constructor !== Object && v.g("Can only get property values from a plain Object, not a: " + d), c instanceof Ke) {
            var g = {},
            i;
            for (i in d) {
                var j = parseFloat(i);
                isNaN(j) ? g[i] = d[i] : c.addColorStop(j, d[i])
            }
            v.Wy(c, g)
        } else c instanceof Oj ? (d.row !== f ? (g = d.row, (g === f || g === m || Infinity === g || isNaN(g) || 0 > g) && v.g("Must specify non-negative integer row for RowColumnDefinition " + d), c.Rk = h, c.R = g) : d.column !== f ? (g = d.column, (g === f || g === m || Infinity === g || isNaN(g) || 0 > g) && v.g("Must specify non-negative integer column for RowColumnDefinition " + d), c.Rk = p, c.R = g) : v.g("Must specify row or column value in a RowColumnDefinition " + d), g = v.dF(d, "row", "column"), v.Wy(c, g)) : v.Wy(c, d);
        else v.g('Unknown initializer "' + d + '" for object being constructed by GraphObject.make: ' + c);
        return c
    };
    var Mj;
    P.Builders = Mj = new oa("string", "function");
    Mj.add("Button",
    function() {
        var a = new Ke(Me);
        a.addColorStop(0, "white");
        a.addColorStop(1, "lightgray");
        var b = new Ke(Me);
        b.addColorStop(0, "white");
        b.addColorStop(1, "dodgerblue");
        var c = Lj(w, Qh, {
            Mu: h
        },
        Lj(V, {
            name: "ButtonBorder",
            Xa: "RoundedRectangle",
            fill: a,
            stroke: "gray"
        }));
        c.Fy = function(a, c) {
            var g = c.Z(0),
            i = c._buttonFillOver;
            i === f && (i = b);
            c._buttonFillNormal = g.fill;
            g.fill = i;
            i = c._buttonStrokeOver;
            i === f && (i = "blue");
            c._buttonStrokeNormal = g.stroke;
            g.stroke = i
        };
        c.Gy = function(b, c) {
            var g = c.Z(0),
            i = c._buttonFillNormal;
            i === f && (i = a);
            g.fill = i;
            i = c._buttonStrokeNormal;
            i === f && (i = "gray");
            g.stroke = i
        };
        return c
    });
    Mj.add("TreeExpanderButton",
    function() {
        var a = Lj("Button", Lj(V, {
            name: "ButtonIcon",
            Xa: "MinusLine",
            ma: new sb(6, 6)
        },
        (new af("figure", "isTreeExpanded",
        function(a, c) {
            var d = m,
            e = c.Y;
            e && (d = a ? e._treeExpandedFigure: e._treeCollapsedFigure);
            d || (d = a ? "MinusLine": "PlusLine");
            return d
        })).My("")), {
            visible: p
        },
        (new af("visible", "isTreeLeaf",
        function(a) {
            return ! a
        })).My(""));
        a.click = function(a, c) {
            var d = c.W;
            if (d instanceof S) {
                var e = d.b;
                e === m || e.Pa || (a.Bd = h, d.Wd ? e.Ad.mr(d) : e.Ad.sr(d))
            }
        };
        return a
    });
    Mj.add("SubGraphExpanderButton",
    function() {
        var a = Lj("Button", Lj(V, {
            name: "ButtonIcon",
            Xa: "MinusLine",
            ma: new sb(6, 6)
        },
        (new af("figure", "isSubGraphExpanded",
        function(a, c) {
            var d = m,
            e = c.Y;
            e && (d = a ? e._subGraphExpandedFigure: e._subGraphCollapsedFigure);
            d || (d = a ? "MinusLine": "PlusLine");
            return d
        })).My("")));
        a.click = function(a, c) {
            var d = c.W;
            if (d instanceof mf) {
                var e = d.b;
                e === m || e.Pa || (a.Bd = h, d.ke ? e.Ad.lr(d) : e.Ad.rr(d))
            }
        };
        return a
    });
    Mj.add("ContextMenuButton",
    function() {
        var a = Lj("Button");
        a.jh = Yi;
        var b = a.Re("ButtonBorder");
        b instanceof V && (b.Xa = "Rectangle", b.n = new F(0, 0, 2, 2), b.o = new F(1, 1, -2, -2));
        return a
    });
    function w(a) {
        P.call(this);
        a === f ? 0 === arguments.length ? this.K = Vg: v.g("invalid argument to Panel constructor: undefined") : (v.Va(a, w, w, "type"), this.K = a);
        this.wa = new y(P);
        this.Ld = (new Hb).freeze();
        this.Jo = ec;
        this.Pb = Qg;
        this.Ag = p;
        this.K === Yh && (this.Ag = h);
        this.Ge = [];
        this.we = [];
        this.Bo = this.vq = tk;
        this.Am = this.Wm = 0;
        this.Xm = Rg;
        this.ip = (new sb(10, 10)).freeze();
        this.jp = (new D(0, 0)).freeze();
        this.Ek = this.fm = m;
        this.Ew = "";
        this.Rf = this.Jj = m;
        this.wm = "category";
        this.df = m;
        this.Bk = new E(NaN, NaN, NaN, NaN);
        this.kE = new E(0, 0, 0, 0);
        this.bH = new sb(0, 0);
        this.Nq = m
    }
    v.H("Panel", w);
    v.pa(w, P);
    w.prototype.jb = function(a) {
        P.prototype.jb.call(this, a);
        a.K = this.K;
        a.Ld.Ra(this.Ld);
        a.Jo = this.Jo.B();
        a.Pb = this.Pb;
        if (0 < this.Ge.length) {
            for (var b = [], c = this.Ge, d = c.length, e = 0; e < d; e++) if (c[e] !== f) {
                var g = c[e].copy();
                g.tk(a);
                b[e] = g
            }
            a.Ge = b
        }
        if (0 < this.we.length) {
            b = [];
            c = this.we;
            d = c.length;
            for (e = 0; e < d; e++) c[e] !== f && (g = c[e].copy(), g.tk(a), b[e] = g);
            a.we = b
        }
        a.vq = this.vq;
        a.Bo = this.Bo;
        a.Wm = this.Wm;
        a.Am = this.Am;
        a.Xm = this.Xm;
        a.ip.Ra(this.ip);
        a.jp.Ra(this.jp);
        a.Ag = this.Ag;
        a.fm = this.fm;
        a.Ek = this.Ek;
        a.Ew = this.Ew;
        a.Jj = this.Jj;
        a.Rf = this.Rf;
        a.wm = this.wm;
        this._buttonFillNormal && (a._buttonFillNormal = this._buttonFillNormal);
        this._buttonFillOver && (a._buttonFillOver = this._buttonFillOver);
        this._buttonStrokeNormal && (a._buttonStrokeNormal = this._buttonStrokeNormal);
        this._buttonStrokeOver && (a._buttonStrokeOver = this._buttonStrokeOver);
        this._treeExpandedFigure && (a._treeExpandedFigure = this._treeExpandedFigure);
        this._treeCollapsedFigure && (a._treeCollapsedFigure = this._treeCollapsedFigure);
        this._subGraphExpandedFigure && (a._subGraphExpandedFigure = this._subGraphExpandedFigure);
        this._subGraphCollapsedFigure && (a._subGraphCollapsedFigure = this._subGraphCollapsedFigure)
    };
    w.prototype.Yg = function(a) {
        P.prototype.Yg.call(this, a);
        a.wa = this.wa;
        for (var b = a.wa.f; b.next();) b.value.Sj = a
    };
    w.prototype.copy = w.prototype.copy = function() {
        var a = P.prototype.copy.call(this);
        if (a instanceof w) {
            var b = this.wa;
            if (0 < b.length) for (var c = b.length,
            d = 0; d < c; d++) {
                var e = b.i[d].copy(),
                g = a;
                e.tk(g);
                e.$k = m;
                var i = g.wa,
                j = i.count;
                i.lc(j, e);
                i = g.W;
                if (i !== m) {
                    var k = g.b;
                    k !== m && k.da.cb || i.Yd(Ee, "elements", g, m, e, m, j)
                }
            }
            return a
        }
        return m
    };
    w.prototype.toString = function() {
        return "Panel(" + this.type + ")#" + v.kc(this)
    };
    var Vg;
    w.Position = Vg = v.l(w, "Position", 0);
    w.Horizontal = v.l(w, "Horizontal", 1);
    var Ph;
    w.Vertical = Ph = v.l(w, "Vertical", 2);
    var Og;
    w.Spot = Og = v.l(w, "Spot", 3);
    var Qh;
    w.Auto = Qh = v.l(w, "Auto", 4);
    var pj;
    w.Table = pj = v.l(w, "Table", 5);
    w.Viewbox = v.l(w, "Viewbox", 6);
    var ij;
    w.TableRow = ij = v.l(w, "TableRow", 7);
    var jj;
    w.TableColumn = jj = v.l(w, "TableColumn", 8);
    var zg;
    w.Link = zg = v.l(w, "Link", 9);
    var Yh;
    w.Grid = Yh = v.l(w, "Grid", 10);
    v.m(w, {
        elements: "elements"
    },
    function() {
        return this.wa.f
    });
    v.m(w, {
        ua: "naturalBounds"
    },
    s("qc"));
    v.a(w, "padding", w.prototype.padding);
    v.defineProperty(w, {
        padding: "padding"
    },
    s("Ld"),
    function(a) {
        "number" === typeof a ? a = new Hb(a) : v.c(a, Hb, w, "padding");
        var b = this.Ld;
        b.u(a) || (this.Ld = a = a.B(), this.J(), this.d("padding", b, a))
    });
    v.a(w, "type", w.prototype.type);
    v.defineProperty(w, {
        type: "type"
    },
    s("K"),
    function(a) {
        var b = this.K;
        b !== a && (t && v.Va(a, w, w, "type"), (b === ij || b === jj) && v.g("Cannot change Panel.type when it is already a TableRow or a TableColumn: " + a), this.K = a, this.K === Yh && (this.Ag = h), this.J(), this.d("type", b, a))
    });
    v.a(w, "defaultAlignment", w.prototype.Li);
    v.defineProperty(w, {
        Li: "defaultAlignment"
    },
    s("Jo"),
    function(a) {
        var b = this.Jo;
        b.u(a) || (t && v.c(a, F, w, "defaultAlignment"), this.Jo = a = a.B(), this.J(), this.d("defaultAlignment", b, a))
    });
    v.a(w, "defaultStretch", w.prototype.Zx);
    v.defineProperty(w, {
        Zx: "defaultStretch"
    },
    s("Pb"),
    function(a) {
        var b = this.Pb;
        b !== a && (v.Va(a, P, w, "defaultStretch"), this.Pb = a, this.J(), this.d("defaultStretch", b, a))
    });
    v.a(w, "viewboxStretch", w.prototype.kz);
    v.defineProperty(w, {
        kz: "viewboxStretch"
    },
    s("Xm"),
    function(a) {
        var b = this.Xm;
        b !== a && (v.Va(a, P, w, "viewboxStretch"), this.Xm = a, this.d("viewboxStretch", b, a))
    });
    v.a(w, "gridCellSize", w.prototype.Cr);
    v.defineProperty(w, {
        Cr: "gridCellSize"
    },
    s("ip"),
    function(a) {
        var b = this.ip;
        b.u(a) || (v.c(a, sb, w, "gridCellSize"), (!a.aa() || 0 === a.width || 0 === a.height) && v.g("Invalid Panel.gridCellSize: " + a), this.ip = a.B(), this.b !== m && this === this.b.Ku && qi(this.b), hj(this), this.d("gridCellSize", b, a))
    });
    v.a(w, "gridOrigin", w.prototype.jy);
    v.defineProperty(w, {
        jy: "gridOrigin"
    },
    s("jp"),
    function(a) {
        var b = this.jp;
        b.u(a) || (v.c(a, D, w, "gridOrigin"), a.aa() || v.g("Invalid Panel.gridOrigin: " + a), this.jp = a.B(), hj(this), this.d("gridOrigin", b, a))
    });
    da = w.prototype;
    da.rn = function(a, b) {
        if (this.K === Yh) {
            var c = this.yl() * b.scale;
            0 >= c && (c = 1);
            var d = this.Cr,
            e = d.width,
            d = d.height,
            g = this.ua,
            i = g.width,
            g = g.height,
            j = Math.ceil(i / e),
            k = Math.ceil(g / d),
            l = this.jy;
            a.save();
            a.beginPath();
            a.rect(0, 0, i, g);
            a.clip();
            for (var n = [], r = this.wa.i, q = this.wa.length, u = 0; u < q; u++) {
                var x = [];
                n.push(x);
                var z = r[u];
                if (z.visible) for (var z = "LineV" === z.Xa,
                C = u + 1; C < q; C++) {
                    var G = r[C];
                    G.visible && "LineV" === G.Xa === z && (G = G.$h, 2 <= G && x.push(G))
                }
            }
            r = this.wa.length;
            for (q = 0; q < r; q++) if (z = this.wa.i[q], z.visible) {
                u = n[q];
                x = z.$h;
                if ("LineV" === z.Xa) {
                    a.lineWidth = z.Ua;
                    kj(this, a, z.stroke, p);
                    a.beginPath();
                    for (C = z = Math.floor( - l.x / e); C <= z + j && !(G = C * e + l.x, 0 <= G && (G < i && uk(C, x, u)) && (a.moveTo(G, 0), a.lineTo(G, g), 2 > e * x * c)); C++);
                } else {
                    a.lineWidth = z.Ua;
                    kj(this, a, z.stroke, p);
                    a.beginPath();
                    for (C = z = Math.floor( - l.y / d); C <= z + k && !(G = C * d + l.y, 0 <= G && (G <= g && uk(C, x, u)) && (a.moveTo(0, G), a.lineTo(i, G), 2 > d * x * c)); C++);
                }
                a.stroke()
            }
            a.restore();
            Wh(b, a)
        } else {
            c = this.wa.length;
            for (e = 0; e < c; e++) this.wa.i[e].fg(a, b);
            t && t.AI && this instanceof U && t.zI(a, b, this)
        }
    };
    da.mg = function() {
        P.prototype.mg.call(this);
        var a = this.b;
        a !== m && (Mi(a, "type", this.type), this.kz !== Rg && Mi(a, "viewboxStretch", this.kz), Mi(a, "elements", this.elements))
    };
    function uk(a, b, c) {
        if (0 !== a % b) return p;
        for (var b = c.length,
        d = 0; d < b; d++) if (0 === a % c[d]) return p;
        return h
    }
    da.Mr = function(a, b, c, d) {
        var e = this.Bk;
        e.width = 0;
        e.height = 0;
        var g = this.ma,
        i = this.Xd;
        c === f && (c = i.width, d = i.height);
        var c = Math.max(c / this.scale, i.width),
        d = Math.max(d / this.scale, i.height),
        j = this.Fd;
        isNaN(g.width) || (a = Math.min(g.width, j.width));
        isNaN(g.height) || (b = Math.min(g.height, j.height));
        var a = Math.max(c, a),
        b = Math.max(d, b),
        k = this.padding,
        a = Math.max(a - k.left - k.right, 0),
        b = Math.max(b - k.top - k.bottom, 0),
        l = this.wa,
        n = l.length;
        if (0 === n) {
            var r = this.qc;
            ub(r, !isNaN(g.width) ? a: 0, !isNaN(g.height) ? b: 0);
            Zi(this, 0, 0, r.width, r.height)
        } else {
            var q = this.K.wb;
            switch (q) {
            case "Position":
                var u = a,
                x = b,
                z = c,
                C = d;
                e.x = 0;
                e.y = 0;
                e.width = 0;
                for (var G = e.height = 0; G < n; G++) {
                    var H = l.i[G];
                    if (H.visible || H === this.Ab) {
                        var I = H.margin,
                        M = I.right + I.left,
                        T = I.top + I.bottom;
                        mh(H, u, x, z, C);
                        var la = H.na,
                        fa = Math.max(la.width + M, 0),
                        Ca = Math.max(la.height + T, 0),
                        ra = H.position.x,
                        va = H.position.y;
                        isFinite(ra) || (ra = 0);
                        isFinite(va) || (va = 0);
                        xb(e, ra, va, fa, Ca)
                    }
                }
                break;
            case "Vertical":
                for (var Ja = a,
                jb = c,
                eb = d,
                wb = [], mb = 0; mb < n; mb++) {
                    var Xa = l.i[mb];
                    if (Xa.visible || Xa === this.Ab) {
                        var Eb = bj(Xa);
                        if (Eb !== Wi && Eb !== Xi) wb.push(Xa);
                        else {
                            var Ya = Xa.margin,
                            Pc = Ya.right + Ya.left,
                            yd = Ya.top + Ya.bottom;
                            mh(Xa, Ja, Infinity, jb, eb);
                            var cb = Xa.na,
                            ue = Math.max(cb.width + Pc, 0),
                            oc = Math.max(cb.height + yd, 0);
                            e.width = Math.max(e.width, ue);
                            e.height += oc
                        }
                    }
                }
                var md = wb.length;
                if (0 !== md) {
                    this.ma.width ? Ja = Math.min(this.ma.width, this.Fd.width) : 0 !== e.width && (Ja = Math.min(e.width, this.Fd.width));
                    for (mb = 0; mb < md; mb++) if (Xa = wb[mb], Xa.visible || Xa === this.Ab) Ya = Xa.margin,
                    Pc = Ya.right + Ya.left,
                    yd = Ya.top + Ya.bottom,
                    mh(Xa, Ja, Infinity, jb, eb),
                    cb = Xa.na,
                    ue = Math.max(cb.width + Pc, 0),
                    oc = Math.max(cb.height + yd, 0),
                    e.width = Math.max(e.width, ue),
                    e.height += oc
                }
                break;
            case "Horizontal":
                for (var vc = b,
                nd = c,
                od = d,
                Wb = [], wc = 0; wc < n; wc++) {
                    var Xb = l.i[wc];
                    if (Xb.visible || Xb === this.Ab) {
                        var Gc = bj(Xb);
                        if (Gc !== Wi && Gc !== Yi) Wb.push(Xb);
                        else {
                            var Hc = Xb.margin,
                            Ad = Hc.right + Hc.left,
                            Jd = Hc.top + Hc.bottom;
                            mh(Xb, Infinity, vc, nd, od);
                            var pd = Xb.na,
                            xc = Math.max(pd.width + Ad, 0),
                            Ud = Math.max(pd.height + Jd, 0);
                            e.width += xc;
                            e.height = Math.max(e.height, Ud)
                        }
                    }
                }
                var fe = Wb.length;
                if (0 !== fe) {
                    this.ma.height ? vc = Math.min(this.ma.height, this.Fd.height) : 0 !== e.height && (vc = Math.min(e.height, this.Fd.height));
                    for (wc = 0; wc < fe; wc++) if (Xb = Wb[wc], Xb.visible || Xb === this.Ab) Hc = Xb.margin,
                    Ad = Hc.right + Hc.left,
                    Jd = Hc.top + Hc.bottom,
                    mh(Xb, Infinity, vc, nd, od),
                    pd = Xb.na,
                    xc = Math.max(pd.width + Ad, 0),
                    Ud = Math.max(pd.height + Jd, 0),
                    e.width += xc,
                    e.height = Math.max(e.height, Ud)
                }
                break;
            case "Spot":
                a:
                {
                    var Mb = a,
                    bc = b,
                    qd = c,
                    gc = d,
                    pc = vk(this, l, n),
                    kb = pc.margin,
                    rb,
                    cc,
                    dc = kb.right + kb.left,
                    Kd = kb.top + kb.bottom;
                    mh(pc, Mb, bc, qd, gc);
                    var O = pc.na,
                    hb = O.width,
                    Q = O.height,
                    Z = Math.max(hb + dc, 0),
                    Bd = Math.max(Q + Kd, 0);
                    e.x = -kb.left;
                    e.y = -kb.top;
                    e.width = Z;
                    e.height = Bd;
                    for (var Cd = 0; Cd < n; Cd++) {
                        var Ga = l.i[Cd];
                        if (Ga !== pc && (Ga.visible || Ga === this.Ab)) {
                            kb = Ga.margin;
                            rb = kb.right + kb.left;
                            cc = kb.top + kb.bottom;
                            mh(Ga, Mb, bc, 0, 0);
                            var O = Ga.na,
                            Z = Math.max(O.width + rb, 0),
                            Bd = Math.max(O.height + cc, 0),
                            ja = Ga.pb;
                            $b(ja) && (ja = this.Li);
                            Vb(ja) || (ja = mc);
                            var Na = Ga.Fi;
                            $b(Na) && (Na = mc);
                            xb(e, ja.x * hb + ja.offsetX - (Na.x * O.width - Na.offsetX) - kb.left, ja.y * Q + ja.offsetY - (Na.y * O.height - Na.offsetY) - kb.top, Z, Bd)
                        }
                    }
                    var Qa = pc.jh;
                    Qa === Qg && (Qa = bj(pc));
                    switch (Qa) {
                    case Wi:
                        break a;
                    case Qd:
                        if (!isFinite(Mb) && !isFinite(bc)) break a;
                        break;
                    case Yi:
                        if (!isFinite(Mb)) break a;
                        break;
                    case Xi:
                        if (!isFinite(bc)) break a
                    }
                    O = pc.na;
                    hb = O.width;
                    Q = O.height;
                    Z = Math.max(hb + dc, 0);
                    Bd = Math.max(Q + Kd, 0);
                    kb = pc.margin;
                    e.x = -kb.left;
                    e.y = -kb.top;
                    e.width = Z;
                    e.height = Bd;
                    for (Cd = 0; Cd < n; Cd++) if (Ga = l.i[Cd], Ga !== pc && (Ga.visible || Ga === this.Ab)) kb = Ga.margin,
                    rb = kb.right + kb.left,
                    cc = kb.top + kb.bottom,
                    O = Ga.na,
                    Z = Math.max(O.width + rb, 0),
                    Bd = Math.max(O.height + cc, 0),
                    ja = Ga.pb,
                    $b(ja) && (ja = this.Li),
                    Vb(ja) || (ja = mc),
                    Na = Ga.Fi,
                    $b(Na) && (Na = mc),
                    xb(e, ja.x * hb + ja.offsetX - (Na.x * O.width - Na.offsetX) - kb.left, ja.y * Q + ja.offsetY - (Na.y * O.height - Na.offsetY) - kb.top, Z, Bd)
                }
                break;
            case "Auto":
                var Ic = a,
                hc = b,
                zb = c,
                ic = d,
                Fb = vk(this, l, n),
                ad = Fb.margin,
                Qc = ad.right + ad.left,
                ve = ad.top + ad.bottom;
                mh(Fb, Ic, hc, zb, ic);
                var bd = Fb.na,
                rd = Math.max(bd.width + Qc, 0),
                qc = Math.max(bd.height + ve, 0),
                Re = (new D).Ml(0, 0, rd, qc, wk(Fb)),
                Ld = (new D).Ml(0, 0, rd, qc, xk(Fb)),
                cd = new E(Re, Ld),
                sd = Ic,
                Gb = hc;
                isFinite(Ic) && (sd = cd.width);
                isFinite(hc) && (Gb = cd.height);
                for (var dd = new sb(0, 0), ge = 0; ge < n; ge++) {
                    var yc = l.i[ge];
                    if (yc !== Fb && (yc.visible || yc === this.Ab)) {
                        var ad = yc.margin,
                        ob = ad.right + ad.left,
                        pb = ad.top + ad.bottom;
                        mh(yc, sd, Gb, zb, ic);
                        bd = yc.na;
                        rd = Math.max(bd.width + ob, 0);
                        qc = Math.max(bd.height + pb, 0);
                        dd = new sb(Math.max(rd, dd.width), Math.max(qc, dd.height))
                    }
                }
                if (1 === n) e.width = rd,
                e.height = qc;
                else {
                    var Rb = wk(Fb),
                    xa = xk(Fb),
                    Za,
                    ta;
                    xa.x !== Rb.x && xa.y !== Rb.y && (Za = dd.width / Math.abs(xa.x - Rb.x), ta = dd.height / Math.abs(xa.y - Rb.y));
                    var Ab = 0;
                    Fb instanceof V && (Ab = Fb.Ua * Fb.scale);
                    Za += Math.abs(Rb.offsetX) + Math.abs(xa.offsetX) + Ab;
                    ta += Math.abs(Rb.offsetY) + Math.abs(xa.offsetY) + Ab;
                    var $a = Fb.jh;
                    $a === Qg && ($a = bj(Fb));
                    switch ($a) {
                    case Wi:
                        ic = zb = 0;
                        break;
                    case Qd:
                        isFinite(Ic) && (Za = Ic);
                        isFinite(hc) && (ta = hc);
                        break;
                    case Yi:
                        isFinite(Ic) && (Za = Ic);
                        ic = 0;
                        break;
                    case Xi:
                        zb = 0,
                        isFinite(hc) && (ta = hc)
                    }
                    Fb instanceof V && (Fb.Hg ? Fb.vj = m: Fb.xa = m);
                    mj(Fb);
                    mh(Fb, Za, ta, zb, ic);
                    e.width = Fb.na.width + Qc;
                    e.height = Fb.na.height + ve
                }
                break;
            case "Table":
                for (var zc = a,
                ma = b,
                ha = n,
                Ib = c,
                Rf = d,
                mg = [], we = [], Da = 0; Da < ha; Da++) {
                    var Ba = l.i[Da];
                    if (Ba instanceof w && (Ba.type === ij || Ba.type === jj)) {
                        we.push(Ba);
                        for (var Vd = Ba.wa,
                        Sf = Vd.length,
                        Rc = 0; Rc < Sf; Rc++) {
                            var Jc = Vd.i[Rc];
                            Ba.type === ij ? Jc.Ub = Ba.Ub: Ba.type === jj && (Jc.ic = Ba.ic);
                            mg.push(Jc)
                        }
                    } else mg.push(Ba)
                }
                for (var ha = mg.length,
                Kc = [], Da = 0; Da < ha; Da++) Ba = mg[Da],
                Ba.ac = h,
                Ba.Ec = h,
                Kc[Ba.Ub] || (Kc[Ba.Ub] = []),
                Kc[Ba.Ub][Ba.ic] || (Kc[Ba.Ub][Ba.ic] = []),
                Kc[Ba.Ub][Ba.ic].push(Ba);
                for (var ph = [], he = [], Wd = [], qf = {
                    count: 0
                },
                rf = {
                    count: 0
                },
                Md = zc, Se = ma, Ha, Nd, il = Kc.length, Da = 0; Da < il; Da++) if (Kc[Da]) {
                    var qh = Kc[Da].length,
                    Bb = this.Td(Da);
                    yk(Bb, 0);
                    for (Rc = 0; Rc < qh; Rc++) if (Kc[Da][Rc]) {
                        var Cb = this.qd(Rc);
                        ph[Rc] === f && (yk(Cb, 0), ph[Rc] = h);
                        for (var tj = Kc[Da][Rc], jl = tj.length, ai = 0; ai < jl; ai++) if (Ba = tj[ai], Ba.visible || Ba === this.Ab) if (1 < Ba.Xj || 1 < Ba.uj) he.push(Ba);
                        else {
                            var Sc = qj(Ba, Bb, Cb);
                            if (Sc !== Wi && !Ba.ma.aa()) qf[Rc] === f && (qf[Rc] = -1, qf.count++),
                            rf[Da] === f && (rf[Da] = -1, rf.count++),
                            Wd.push(Ba),
                            mh(Ba, Infinity, Infinity, Ib, Rf);
                            else {
                                var sf = isFinite(Cb.width) ? Cb.width: zc,
                                ie = isFinite(Bb.height) ? Bb.height: ma,
                                Jb = new sb(Math.max(Cb.uf, Math.min(sf, Cb.Gd)), Math.max(Bb.uf, Math.min(ie, Bb.Gd))),
                                jc = Ba.margin,
                                tf = jc.right + jc.left,
                                uf = jc.top + jc.bottom;
                                mh(Ba, Infinity, Infinity, Ib, Rf);
                                var Te = Ba.na,
                                Tf = Math.max(Te.width + tf, 0),
                                Tc = Math.max(Te.height + uf, 0);
                                Ha = this.Td(Da);
                                Nd = Math.max(Tc - Ha.Ja, 0);
                                Nd > Se && (Nd = Se);
                                yk(Ha, Ha.Ja + Nd);
                                Se = Math.max(Se - Nd, 0);
                                Ha = this.qd(Rc);
                                Nd = Math.max(Tf - Ha.Ja, 0);
                                Nd > Md && (Nd = Md);
                                yk(Ha, Ha.Ja + Nd);
                                Md = Math.max(Md - Nd, 0)
                            }
                        }
                    }
                }
                for (var je = 0,
                ke = 0,
                ha = this.ru,
                Da = 0; Da < ha; Da++) this.we[Da] !== f && (je += this.qd(Da).Ja);
                ha = this.bv;
                for (Da = 0; Da < ha; Da++) this.Ge[Da] !== f && (ke += this.Td(Da).Ja);
                Md = Math.max(zc - je, 0);
                Se = Math.max(ma - ke, 0);
                ha = Wd.length;
                for (Da = 0; Da < ha; Da++) {
                    var Ba = Wd[Da],
                    Bb = this.Td(Ba.Ub),
                    Cb = this.qd(Ba.ic),
                    xe = Ba.na,
                    jc = Ba.margin,
                    tf = jc.right + jc.left,
                    uf = jc.top + jc.bottom;
                    qf[Ba.ic] = Math.max(xe.width + tf - Cb.Nd, 0);
                    rf[Ba.Ub] = Math.max(xe.height + uf - Bb.Nd, 0)
                }
                var rh = 0,
                Fg = 0;
                for (Da in rf)"count" !== Da && (rh += rf[Da]);
                for (Da in qf)"count" !== Da && (Fg += qf[Da]);
                for (Da = 0; Da < ha; Da++) if (Ba = Wd[Da], Ba.visible || Ba === this.Ab) {
                    Bb = this.Td(Ba.Ub);
                    Cb = this.qd(Ba.ic);
                    sf = isFinite(Cb.width) ? Cb.width: isFinite(Md) ? Cb.Nd + qf[Ba.ic] / Fg * Md: Cb.Nd || Md;
                    ie = isFinite(Bb.height) ? Bb.height: isFinite(Se) ? Bb.Nd + rf[Ba.Ub] / rh * Se: Bb.Nd || Se;
                    Jb = new sb(Math.max(Cb.uf, Math.min(sf, Cb.Gd)), Math.max(Bb.uf, Math.min(ie, Bb.Gd)));
                    Sc = qj(Ba, Bb, Cb);
                    switch (Sc) {
                    case Yi:
                        Jb.height = Infinity;
                        break;
                    case Xi:
                        Jb.width = Infinity
                    }
                    jc = Ba.margin;
                    tf = jc.right + jc.left;
                    uf = jc.top + jc.bottom;
                    mj(Ba);
                    mh(Ba, Jb.width, Jb.height, Cb.uf, Bb.uf);
                    Te = Ba.na;
                    Tf = Math.max(Te.width + tf, 0);
                    Tc = Math.max(Te.height + uf, 0);
                    yk(Bb, Math.max(Bb.Ja, Tc));
                    yk(Cb, Math.max(Cb.Ja, Tf))
                }
                ha = he.length;
                for (Da = 0; Da < ha; Da++) if (Ba = he[Da], Ba.visible || Ba === this.Ab) {
                    Bb = this.Td(Ba.Ub);
                    Cb = this.qd(Ba.ic);
                    Jb = new sb(Math.max(Cb.uf, Math.min(zc, Cb.Gd)), Math.max(Bb.uf, Math.min(ma, Bb.Gd)));
                    Sc = qj(Ba, Bb, Cb);
                    switch (Sc) {
                    case Qd:
                        0 !== Cb.Nd && (Jb.width = Math.min(Jb.width, Cb.Nd));
                        0 !== Bb.Nd && (Jb.height = Math.min(Jb.height, Bb.Nd));
                        break;
                    case Yi:
                        0 !== Cb.Nd && (Jb.width = Math.min(Jb.width, Cb.Nd));
                        break;
                    case Xi:
                        0 !== Bb.Nd && (Jb.height = Math.min(Jb.height, Bb.Nd))
                    }
                    isFinite(Cb.width) && (Jb.width = Cb.width);
                    isFinite(Bb.height) && (Jb.height = Bb.height);
                    for (var Ue = new sb(0, 0), Uc = 1; Uc < Ba.Xj && !(Ba.Ub + Uc >= this.bv); Uc++) Ha = this.Td(Ba.Ub + Uc),
                    Ue.height += Math.max(Ha.uf, isNaN(Ha.He) ? Ha.Gd: Math.min(Ha.He, Ha.Gd));
                    for (Uc = 1; Uc < Ba.uj && !(Ba.ic + Uc >= this.ru); Uc++) Ha = this.qd(Ba.ic + Uc),
                    Ue.width += Math.max(Ha.uf, isNaN(Ha.He) ? Ha.Gd: Math.min(Ha.He, Ha.Gd));
                    Jb.width += Ue.width;
                    Jb.height += Ue.height;
                    jc = Ba.margin;
                    tf = jc.right + jc.left;
                    uf = jc.top + jc.bottom;
                    mh(Ba, Jb.width, Jb.height, Ib, Rf);
                    for (var Te = Ba.na,
                    Tf = Math.max(Te.width + tf, 0), Tc = Math.max(Te.height + uf, 0), vf = 0, Uc = 0; Uc < Ba.Xj; Uc++) Ha = this.Td(Ba.Ub + Uc),
                    vf += Ha.Ja || 0;
                    if (vf < Tc) for (var Od = Tc - vf; 0 < Od;) {
                        var Yd = Ha.Ja || 0;
                        isNaN(Ha.height) && Ha.Gd > Yd && (yk(Ha, Math.min(Ha.Gd, Yd + Od)), Ha.Ja !== Yd && (Od -= Ha.Ja - Yd));
                        if ( - 1 === Ha.index - 1) break;
                        Ha = this.Td(Ha.index - 1)
                    }
                    for (var Gg = 0,
                    Uc = 0; Uc < Ba.uj; Uc++) Ha = this.qd(Ba.ic + Uc),
                    Gg += Ha.Ja || 0;
                    if (Gg < Tf) for (Od = Tf - Gg; 0 < Od;) {
                        Yd = Ha.Ja || 0;
                        isNaN(Ha.width) && Ha.Gd > Yd && (yk(Ha, Math.min(Ha.Gd, Yd + Od)), Ha.Ja !== Yd && (Od -= Ha.Ja - Yd));
                        if ( - 1 === Ha.index - 1) break;
                        Ha = this.qd(Ha.index - 1)
                    }
                }
                for (var Ve = 0,
                td = 0,
                Sc = bj(this), We = this.ma, sh = this.Fd, wf = ke = je = 0, ng = 0, ha = this.ru, Da = 0; Da < ha; Da++) this.we[Da] !== f && (Ha = this.qd(Da), isFinite(Ha.width) ? wf += Ha.width: zk(Ha) === Ak ? wf += Ha.Ja: je += Ha.Ja);
                var Ve = isFinite(We.width) ? Math.min(We.width, sh.width) : Sc !== Wi && isFinite(zc) ? zc: je,
                Ve = Math.max(Ve, this.Xd.width),
                Ve = Math.max(Ve - wf, 0),
                og = Math.max(Ve / je, 1);
                isFinite(og) || (og = 1);
                for (Da = 0; Da < ha; Da++) this.we[Da] !== f && (Ha = this.qd(Da), !isFinite(Ha.width) && zk(Ha) !== Ak && yk(Ha, Ha.Ja * og), Ha.kb = e.width, e.width += Ha.Ja);
                ha = this.bv;
                for (Da = 0; Da < ha; Da++) this.Ge[Da] !== f && (Ha = this.Td(Da), isFinite(Ha.height) ? ng += Ha.height: zk(Ha) === Ak ? ng += Ha.Ja: ke += Ha.Ja);
                var td = isFinite(We.height) ? Math.min(We.height, sh.height) : Sc !== Wi && isFinite(ma) ? ma: ke,
                td = Math.max(td, this.Xd.height),
                td = Math.max(td - ng, 0),
                Xe = Math.max(td / ke, 1);
                isFinite(Xe) || (Xe = 1);
                for (Da = 0; Da < ha; Da++) this.Ge[Da] !== f && (Ha = this.Td(Da), !isFinite(Ha.height) && zk(Ha) !== Ak && yk(Ha, Ha.Ja * Xe), Ha.kb = e.height, e.height += Ha.Ja);
                ha = we.length;
                for (Da = 0; Da < ha; Da++) {
                    var ed = we[Da];
                    ed.type === ij ? (sf = e.width, Ha = this.Td(ed.Ub), ie = Ha.Nd) : (Ha = this.qd(ed.ic), sf = Ha.Nd, ie = e.height);
                    ed.Hc.yd(0, 0, sf, ie);
                    ed.ac = p;
                    Kc[ed.Ub] || (Kc[ed.Ub] = []);
                    Kc[ed.Ub][ed.ic] || (Kc[ed.Ub][ed.ic] = []);
                    Kc[ed.Ub][ed.ic].push(ed)
                }
                this.jE = Kc;
                break;
            case "Viewbox":
                var pg = a,
                ye = b,
                Rn = c,
                Sn = d;
                1 < n && v.g("Viewbox Panel cannot contain more than one GraphObject.");
                var le = l.i[0];
                le.Qb = 1;
                mj(le);
                mh(le, Infinity, Infinity, Rn, Sn);
                var bi = le.na,
                vj = le.margin,
                Tn = vj.right + vj.left,
                Un = vj.top + vj.bottom;
                if (isFinite(pg) || isFinite(ye)) {
                    var Hp = le.scale,
                    Vn = bi.width,
                    Wn = bi.height,
                    Xn = Math.max(pg - Tn, 0),
                    Yn = Math.max(ye - Un, 0);
                    le.Qb = this.Xm === Rg ? le.Qb * Math.min(Xn / Vn, Yn / Wn) : le.Qb * Math.max(Xn / Vn, Yn / Wn);
                    Hp !== le.scale && (le.ac = h, mh(le, Infinity, Infinity, Rn, Sn))
                }
                bi = le.na;
                e.width = isFinite(pg) ? pg: Math.max(bi.width + Tn, 0);
                e.height = isFinite(ye) ? ye: Math.max(bi.height + Un, 0);
                break;
            case "Link":
                var Zn = this instanceof lf ? this.cn: this;
                if (0 === n) {
                    var wj = this.qc;
                    ub(wj, 0, 0);
                    var Zd = this.na;
                    Zd.yd(0, 0, 0, 0)
                } else {
                    var xj = this.hp(),
                    Ye = this.Aj(),
                    Ze = Ye.copy();
                    Ze.x = 0;
                    Ze.y = 0;
                    var Ig, th = this.tw();
                    Ig = this.ba !== f ? this.ba: th.count;
                    for (var yj = new D(Infinity, Infinity), Jg = 0; Jg < Ig; Jg++) {
                        var $n = th.i[Jg];
                        yj.x = Math.min($n.x, yj.x);
                        yj.y = Math.min($n.y, yj.y)
                    }
                    this.ui = new D(Ye.x, Ye.y);
                    this.nh.clear();
                    xj !== m && (Bk(xj, Ye.width, Ye.height), Zd = xj.na, Ze.fj(Zd), this.nh.add(Zd));
                    for (var Kg = m,
                    qg = m,
                    Uf = m,
                    Jg = 0; Jg < n; Jg++) {
                        var rc = l.i[Jg];
                        if (rc !== xj) if (rc.Vi && rc instanceof V) Bk(rc, Ye.width, Ye.height),
                        Zd = rc.na,
                        Ze.fj(Zd),
                        this.nh.add(Zd);
                        else if (2 > Ig) mh(rc, Infinity, Infinity),
                        Zd = rc.na,
                        Ze.fj(Zd),
                        this.nh.add(Zd);
                        else {
                            Kg === m && (Kg = new ib, qg = new D, Uf = new D);
                            var Vf = rc.ih,
                            bo = rc.Sy,
                            kl = rc.Fi;
                            Zb(kl) && (kl = mc);
                            var zj = rc.as,
                            Ip = rc.Ty,
                            ci, di, Aj = 0;
                            if (Vf < -Ig || Vf >= Ig) {
                                var co = Zn.CC,
                                Bj = Zn.BC;
                                zj !== Vi && (Aj = Ck(zj, Bj), rc.Qa = Aj);
                                ci = co.x - Ye.x;
                                di = co.y - Ye.y
                            } else {
                                var xf, uh;
                                if (0 <= Vf) xf = th.i[Vf],
                                uh = Vf < Ig - 1 ? th.i[Vf + 1] : xf;
                                else {
                                    var ll = Ig + Vf;
                                    xf = th.i[ll];
                                    uh = 0 < ll ? th.i[ll - 1] : xf
                                }
                                Bj = 0 <= Vf ? xf.Vh(uh) : uh.Vh(xf);
                                zj !== Vi && (Aj = Ck(zj, Bj), rc.Wb = Aj);
                                ci = xf.x + (uh.x - xf.x) * bo - Ye.x;
                                di = xf.y + (uh.y - xf.y) * bo - Ye.y
                            }
                            mh(rc, Infinity, Infinity);
                            var Zd = rc.na,
                            wj = rc.ua,
                            ei = 0;
                            rc instanceof V && (ei = rc.Ua);
                            var eo = wj.width + ei,
                            fo = wj.height + ei;
                            Kg.reset();
                            Kg.translate( - Zd.x, -Zd.y);
                            Kg.scale(rc.scale, rc.scale);
                            Kg.rotate(rc.Qa, eo / 2, fo / 2);
                            var ho = new E(0, 0, eo, fo);
                            qg.bo(ho, kl);
                            Kg.Bb(qg);
                            var Jp = -qg.x + ei / 2,
                            Kp = -qg.y + ei / 2;
                            Uf.set(Ip);
                            isNaN(Uf.x) && (Uf.x = 0 <= Vf ? qg.x + 3 : -(qg.x + 3));
                            isNaN(Uf.y) && (Uf.y = -(qg.y + 3));
                            Uf.rotate(Bj);
                            ci += Uf.x;
                            di += Uf.y;
                            var fi = ho;
                            fi.set(Zd);
                            fi.x = ci + Jp;
                            fi.y = di + Kp;
                            this.nh.add(fi);
                            Ze.fj(fi)
                        }
                    }
                    if (this.ef) for (var io = this.di; io.next();) mh(io.value, Infinity, Infinity);
                    this.Bk = Ze;
                    var Dj = this.ui;
                    Dj && Dj.yd(Dj.x + Ze.x, Dj.y + Ze.y);
                    ub(e, Ze.width || 0, Ze.height || 0)
                }
                break;
            case "Grid":
                break;
            case "TableRow":
            case "TableColumn":
                v.g(this.toString() + " is not an element of a Table Panel. TableRow and TableColumn Panels can only be elements of a Table Panel.");
                break;
            default:
                v.g("Unknown panel type: " + q)
            }
            var ze = e.width,
            Ae = e.height,
            Ej = this.padding,
            Lp = Ej.top + Ej.bottom,
            ze = ze + (Ej.left + Ej.right),
            Ae = Ae + Lp;
            isFinite(g.width) && (ze = g.width);
            isFinite(g.height) && (Ae = g.height);
            ze = Math.min(j.width, ze);
            Ae = Math.min(j.height, Ae);
            ze = Math.max(i.width, ze);
            Ae = Math.max(i.height, Ae);
            ze = Math.max(c, ze);
            Ae = Math.max(d, Ae);
            e.width = ze;
            e.height = Ae;
            r = this.qc;
            ub(r, ze, Ae);
            Zi(this, 0, 0, ze, Ae)
        }
    };
    function vk(a, b, c) {
        for (var d = 0; d < c; d++) {
            var e = b.i[d];
            if (e.Vi === h) return a.Nq = e
        }
        b = b.i[0];
        return a.Nq = b
    }
    da.Hi = function(a, b, c, d) {
        var e = this.Bk,
        g = this.wa,
        i = g.length,
        j = this.kE;
        j.reset();
        if (0 === i) {
            var k = this.la;
            k.x = a;
            k.y = b;
            k.width = c;
            k.height = d
        } else {
            if (!this.ma.aa()) {
                var l = bj(this),
                n = this.Hc,
                r = n.width,
                q = n.height;
                r === c && q === d && (l = Wi);
                switch (l) {
                case Wi:
                    if (r > c || q > d) this.J(),
                    mh(this, r > c ? c: r, q > d ? d: q);
                    break;
                case Qd:
                    this.ac = h;
                    mh(this, c, d, 0, 0);
                    break;
                case Yi:
                    this.ac = h;
                    mh(this, c, q, 0, 0);
                    break;
                case Xi:
                    this.ac = h,
                    mh(this, r, d, 0, 0)
                }
            }
            k = this.la;
            k.x = a;
            k.y = b;
            k.width = c;
            k.height = d;
            var u = this.K.wb;
            switch (u) {
            case "Position":
                for (var x = e.x - this.padding.left,
                z = e.y - this.padding.top,
                C = 0; C < i; C++) {
                    var G = g.i[C],
                    H = G.na,
                    I = G.margin,
                    M = G.position.x,
                    T = G.position.y;
                    j.x = isNaN(M) ? -x: M - x;
                    j.y = isNaN(T) ? -z: T - z;
                    j.x += I.left;
                    j.y += I.top;
                    j.width = H.width;
                    j.height = H.height;
                    G.visible && G.vc(j.x, j.y, j.width, j.height)
                }
                break;
            case "Vertical":
                for (var la = this.padding.left,
                fa = this.padding.top,
                Ca = 0; Ca < i; Ca++) {
                    var ra = la,
                    va = g.i[Ca],
                    Ja = va.na,
                    jb = va.margin,
                    eb = jb.left + jb.right,
                    wb = la + this.padding.right,
                    mb = Ja.width,
                    Xa = bj(va);
                    if (isNaN(va.ma.width) && Xa === Qd || Xa === Yi) mb = Math.max(e.width - eb - wb, 0);
                    var Eb = mb + eb + wb,
                    Ya = va.pb;
                    $b(Ya) && (Ya = this.Li);
                    Vb(Ya) || (Ya = mc);
                    j.x = ra + Ya.offsetX + jb.left + (e.width * Ya.x - Eb * Ya.x);
                    j.y = fa + Ya.offsetY + jb.top;
                    j.width = mb;
                    j.height = Ja.height;
                    va.visible && (va.vc(j.x, j.y, j.width, j.height), fa += Ja.height + jb.bottom + jb.top)
                }
                break;
            case "Horizontal":
                for (var Pc = this.padding.top,
                yd = this.padding.left,
                cb = 0; cb < i; cb++) {
                    var ue = Pc,
                    oc = g.i[cb],
                    md = oc.na,
                    vc = oc.margin,
                    nd = vc.top + vc.bottom,
                    od = Pc + this.padding.bottom,
                    Wb = md.height,
                    wc = bj(oc);
                    if (isNaN(oc.ma.height) && wc === Qd || wc === Xi) Wb = Math.max(e.height - nd - od, 0);
                    var Xb = Wb + nd + od,
                    Gc = oc.pb;
                    $b(Gc) && (Gc = this.Li);
                    Vb(Gc) || (Gc = mc);
                    j.x = yd + Gc.offsetX + vc.left;
                    j.y = ue + Gc.offsetY + vc.top + (e.height * Gc.y - Xb * Gc.y);
                    j.width = md.width;
                    j.height = Wb;
                    oc.visible && (oc.vc(j.x, j.y, j.width, j.height), yd += md.width + vc.left + vc.right)
                }
                break;
            case "Spot":
                var Hc = vk(this, g, i),
                Ad = Hc.na,
                Jd = Ad.width,
                pd = Ad.height,
                xc = this.padding,
                Ud = xc.left,
                fe = xc.top;
                j.x = Ud - e.x;
                j.y = fe - e.y;
                Hc.vc(j.x, j.y, Jd, pd);
                for (var Mb = 0; Mb < i; Mb++) {
                    var bc = g.i[Mb];
                    if (bc !== Hc) {
                        var qd = bc.na,
                        gc = qd.width,
                        pc = qd.height,
                        kb = bc.pb;
                        $b(kb) && (kb = this.Li);
                        Vb(kb) || (kb = mc);
                        var rb = bc.Fi;
                        $b(rb) && (rb = mc);
                        j.x = kb.x * Jd + kb.offsetX - (rb.x * gc - rb.offsetX);
                        j.y = kb.y * pd + kb.offsetY - (rb.y * pc - rb.offsetY);
                        j.x -= e.x;
                        j.y -= e.y;
                        bc.visible && bc.vc(Ud + j.x, fe + j.y, gc, pc)
                    }
                }
                break;
            case "Auto":
                var cc = vk(this, g, i),
                dc = cc.na,
                Kd = new E(0, 0, dc.width, dc.height),
                O = new E(0, 0, 1, 1),
                hb = cc.margin,
                Q = hb.left,
                Z = hb.top,
                Bd = this.padding,
                Cd = Bd.left,
                Ga = Bd.top;
                j.x = Q;
                j.y = Z;
                j.width = dc.width;
                j.height = dc.height;
                cc.vc(Cd + j.x, Ga + j.y, j.width, j.height);
                var ja = wk(cc),
                Na = xk(cc),
                Qa = (new D).bo(Kd, ja),
                Ic = (new D).bo(Kd, Na);
                O.x = Qa.x;
                O.y = Qa.y;
                O.lv(Ic);
                O.x += Q + Cd;
                O.y += Z + Ga;
                for (var hc = 0; hc < i; hc++) {
                    var zb = g.i[hc];
                    if (zb !== cc) {
                        var ic = zb.na,
                        hb = zb.margin,
                        Fb = Math.max(ic.width + hb.right + hb.left, 0),
                        ad = Math.max(ic.height + hb.top + hb.bottom, 0),
                        Qc = zb.pb;
                        $b(Qc) && (Qc = this.Li);
                        Vb(Qc) || (Qc = mc);
                        j.x = O.width * Qc.x + Qc.offsetX - Fb * Qc.x + hb.left + O.x;
                        j.y = O.height * Qc.y + Qc.offsetY - ad * Qc.y + hb.top + O.y;
                        j.width = O.width;
                        j.height = O.height;
                        zb.visible && (Lb(O.x, O.y, O.width, O.height, j.x, j.y, ic.width, ic.height) ? zb.vc(j.x, j.y, ic.width, ic.height) : zb.vc(j.x, j.y, ic.width, ic.height, new E(O.x, O.y, O.width, O.height)))
                    }
                }
                break;
            case "Table":
                for (var ve = this.padding,
                bd = ve.left,
                rd = ve.top,
                qc = this.jE,
                Re, Ld, cd = qc.length,
                sd = 0,
                Gb = 0; Gb < cd; Gb++) qc[Gb] && (sd = Math.max(sd, qc[Gb].length));
                for (var dd = Math.min(this.Wm, cd - 1); dd !== cd && (this.Ge[dd] === f || 0 === this.Ge[dd].Ja);) dd++;
                for (var dd = Math.min(dd, cd - 1), ge = -this.Ge[dd].kb, yc = Math.min(this.Am, sd - 1); yc !== sd && (this.we[yc] === f || 0 === this.we[yc].Ja);) yc++;
                for (var yc = Math.min(yc, sd - 1), ob = -this.we[yc].kb, Gb = 0; Gb < cd; Gb++) if (qc[Gb]) {
                    var sd = qc[Gb].length,
                    pb = this.Td(Gb);
                    Ld = pb.kb + ge + rd;
                    for (var Rb = 0; Rb < sd; Rb++) if (qc[Gb][Rb]) {
                        var xa = this.qd(Rb);
                        Re = xa.kb + ob + bd;
                        for (var Za = qc[Gb][Rb], ta = Za.length, Ab = 0; Ab < ta; Ab++) {
                            var $a = Za[Ab],
                            zc = $a.na;
                            if ($a instanceof w && ($a.type === ij || $a.type === jj)) {
                                $a.yb.qa();
                                var ma = $a.yb;
                                ma.x = $a.type === ij ? bd: Re;
                                ma.y = $a.type === jj ? rd: Ld;
                                ma.width = zc.width;
                                ma.height = zc.height;
                                $a.yb.freeze();
                                $a.Ec = p
                            } else {
                                for (var ha = new sb(0, 0), Ib = 1; Ib < $a.rowSpan && !(Gb + Ib >= this.bv); Ib++) {
                                    var Rf = this.Td(Gb + Ib);
                                    ha.height += Rf.Ja
                                }
                                for (Ib = 1; Ib < $a.lB && !(Rb + Ib >= this.ru); Ib++) {
                                    var mg = this.qd(Rb + Ib);
                                    ha.width += mg.Ja
                                }
                                var we = xa.Ja + ha.width,
                                Da = pb.Ja + ha.height;
                                j.x = Re;
                                j.y = Ld;
                                j.width = we;
                                j.height = Da;
                                var Ba = Re,
                                Vd = Ld,
                                Sf = we,
                                Rc = Da,
                                Jc = $a.pb.copy();
                                if ($b(Jc)) {
                                    Jc.Ra(this.Li);
                                    Vb(Jc) || Jc.Ra(mc);
                                    var Kc = xa.pb;
                                    Vb(Kc) && (Jc.x = Kc.x, Jc.offsetX = Kc.offsetX);
                                    var ph = pb.pb;
                                    Vb(ph) && (Jc.y = ph.y, Jc.offsetY = ph.offsetY)
                                }
                                Vb(Jc) || (Jc = mc);
                                var he = zc.width,
                                Wd = zc.height,
                                qf = $a.Fd,
                                rf = $a.Xd,
                                he = Math.min(qf.width, he),
                                Wd = Math.min(qf.height, Wd),
                                he = Math.max(rf.width, he),
                                Wd = Math.max(rf.height, Wd),
                                Md = $a.margin,
                                Se = Md.left + Md.right,
                                Ha = Md.top + Md.bottom,
                                Nd = qj($a, pb, xa);
                                if (isNaN($a.ma.width) && Nd === Qd || Nd === Yi) he = Math.max(we - Se, 0);
                                if (isNaN($a.ma.height) && Nd === Qd || Nd === Xi) Wd = Math.max(Da - Ha, 0);
                                var il = Wd + Ha;
                                j.x += j.width * Jc.x - (he + Se) * Jc.x + Jc.offsetX + Md.left;
                                j.y += j.height * Jc.y - il * Jc.y + Jc.offsetY + Md.top;
                                $a.visible && (Lb(Ba, Vd, Sf, Rc, j.x, j.y, he, Wd) ? $a.vc(j.x, j.y, he, Wd) : $a.vc(j.x, j.y, he, Wd, new E(Ba, Vd, Sf, Rc)))
                            }
                        }
                    }
                }
                for (Gb = 0; Gb < i; Gb++) if ($a = g.i[Gb], $a instanceof w && ($a.type === ij || $a.type === jj)) ma = $a.yb,
                $a.qc.qa(),
                $a.qc.co(0, 0, ma.width, ma.height),
                $a.qc.freeze();
                break;
            case "Viewbox":
                var qh = g.i[0],
                Bb = qh.na,
                Cb = qh.margin,
                tj = Cb.top + Cb.bottom,
                jl = Math.max(Bb.width + (Cb.right + Cb.left), 0),
                ai = Math.max(Bb.height + tj, 0),
                Sc = qh.pb;
                $b(Sc) && (Sc = this.Li);
                Vb(Sc) || (Sc = mc);
                j.x = e.width * Sc.x - jl * Sc.x + Sc.offsetX;
                j.y = e.height * Sc.y - ai * Sc.y + Sc.offsetY;
                j.width = Bb.width;
                j.height = Bb.height;
                qh.vc(j.x, j.y, j.width, j.height);
                break;
            case "Link":
                var sf = this.hp(),
                ie = 0;
                if (sf !== m && ie < this.nh.count) {
                    var Jb = this.nh.i[ie];
                    ie++;
                    sf.vc(Jb.x - this.Bk.x, Jb.y - this.Bk.y, Jb.width, Jb.height)
                }
                for (var jc = 0; jc < i; jc++) {
                    var tf = g.i[jc];
                    tf !== sf && ie < this.nh.count && (Jb = this.nh.i[ie], ie++, tf.vc(Jb.x - this.Bk.x, Jb.y - this.Bk.y, Jb.width, Jb.height))
                }
                var uf = this.tw(),
                Te = uf.count;
                if (2 <= Te && this.ef) for (var Tf = this.di; Tf.next();) {
                    var Tc = Tf.value,
                    je = Te,
                    ke = uf,
                    xe = Tc.ih,
                    rh = Tc.Sy,
                    Fg = Tc.Fi;
                    Zb(Fg) && (Fg = mc);
                    var Ue = Tc.as,
                    Uc = Tc.Ty,
                    vf = f,
                    Od = f,
                    Yd = 0;
                    if (xe < -je || xe >= je) {
                        var Gg = this.CC,
                        Ve = this.BC;
                        Ue !== Vi && (Yd = Ck(Ue, Ve), Tc.Qa = Yd);
                        vf = Gg.x;
                        Od = Gg.y
                    } else {
                        var td = f,
                        We = f;
                        if (0 <= xe) td = ke.i[xe],
                        We = xe < je - 1 ? ke.i[xe + 1] : td;
                        else var sh = je + xe,
                        td = ke.i[sh],
                        We = 0 < sh ? ke.i[sh - 1] : td;
                        Ve = 0 <= xe ? td.Vh(We) : We.Vh(td);
                        Ue !== Vi && (Yd = Ck(Ue, Ve), Tc.Qa = Yd);
                        vf = td.x + (We.x - td.x) * rh;
                        Od = td.y + (We.y - td.y) * rh
                    }
                    var wf = new ib;
                    wf.scale(Tc.scale, Tc.scale);
                    wf.rotate(Tc.Qa, 0, 0);
                    var ng = Tc.ua,
                    og = new E(0, 0, ng.width, ng.height),
                    Xe = new D;
                    Xe.bo(og, Fg);
                    wf.Bb(Xe);
                    var ed = -Xe.x,
                    pg = -Xe.y,
                    ye = Uc.copy();
                    isNaN(ye.x) && (ye.x = 0 <= xe ? Xe.x + 3 : -(Xe.x + 3));
                    isNaN(ye.y) && (ye.y = -(Xe.y + 3));
                    ye.rotate(Ve);
                    vf += ye.x;
                    Od += ye.y;
                    wf.ED(og);
                    ed += og.x;
                    pg += og.y;
                    Tc.position = new D(vf + ed, Od + pg)
                }
                this instanceof U && si(this);
                break;
            case "Grid":
                break;
            case "TableRow":
            case "TableColumn":
                v.g(this.toString() + " is not an element of a Table Panel.TableRow and TableColumn panels can only be elements of a Table Panel.");
                break;
            default:
                v.g("Unknown panel type: " + u)
            }
        }
    };
    da.Ji = function(a) {
        var b = this.ua;
        if (Lb(0, 0, b.width, b.height, a.x, a.y)) {
            for (var c = this.wa.length,
            b = new D; c--;) {
                var d = this.wa.i[0];
                if (d.visible || d === this.Ab) if (lb(b.set(a), d.transform), d.fa(b)) return h
            }
            return this.Gf === m && this.Ff === m ? p: h
        }
        return p
    };
    function Dk(a, b, c) {
        c(a, b);
        if (b instanceof w) for (b = b.elements; b.next();) Dk(a, b.value, c)
    }
    function vi(a, b, c) {
        c(b);
        for (b = b.elements; b.next();) {
            var d = b.value;
            d instanceof w && vi(a, d, c)
        }
    }
    function Ek(a, b, c) {
        if (c(b)) return b;
        if (b instanceof w) for (b = b.elements; b.next();) {
            var d = Ek(a, b.value, c);
            if (d !== m) return b.Nf(),
            d
        }
        return m
    }
    w.prototype.findObject = w.prototype.Re = function(a) {
        if (this.name === a) return this;
        for (var b = this.elements; b.next();) {
            var c = b.value;
            if (c.name === a) return c;
            if (c instanceof w && !c.RF() && (c = c.Re(a), c !== m)) return c
        }
        return m
    };
    P.prototype.findObjectByPred = w.prototype.NB = function(a) {
        return a(this) ? this: Fk(this, a)
    };
    function Fk(a, b) {
        for (var c = a.elements; c.next();) {
            var d = c.value;
            if (b(d)) return d;
            if (d instanceof w && (d = Fk(d, b), d !== m)) return d
        }
        return m
    }
    da = w.prototype;
    da.hi = function() {
        return ! (this.type === ij || this.type === jj)
    };
    da.dd = function(a, b, c) {
        if (this.hf === p) return m;
        b === f && (b = m);
        c === f && (c = m);
        if (this.Ec) return m;
        var d = this.ua,
        e = 1 / this.yl(),
        g = this.hi() ? a: lb((new D).set(a), this.transform);
        if (Lb( - (5 * e), -(5 * e), d.width + 10 * e, d.height + 10 * e, g.x, g.y)) {
            if (!this.Ag) for (var i = this.wa.length,
            e = new D; i--;) {
                var j = this.wa.i[i];
                if (j.visible || j === this.Ab) {
                    j.hi() ? lb(e.set(a), j.transform) : e.set(a);
                    var k = m;
                    j instanceof w ? k = j.dd(e, b, c) : j.hf === h && j.fa(e) && (k = j);
                    if (k !== m && (b !== m && (k = b(k)), k && (c === m || c(k)))) return k
                }
            }
            return this.background === m && this.Oh === m ? m: Lb(0, 0, d.width, d.height, g.x, g.y) ? this: m
        }
        return m
    };
    da.xn = function(a, b, c, d) {
        if (this.hf === p) return p;
        b === f && (b = m);
        c === f && (c = m); ! (d instanceof y) && !(d instanceof pa) && (d = new y(P));
        var e = this.ua,
        g = this.hi() ? a: lb((new D).set(a), this.transform);
        if (Lb(0, 0, e.width, e.height, g.x, g.y)) {
            if (!this.Ag) {
                g = this.wa.length;
                for (e = new D; g--;) {
                    var i = this.wa.i[g];
                    if (i.visible || i === this.Ab) if (i.hi() ? lb(e.set(a), i.transform) : e.set(a), (i instanceof w ? i.xn(e, b, c, d) : i.fa(e)) && i.hf !== p) b !== m && (i = b(i)),
                    i && (c === m || c(i)) && d.add(i)
                }
            }
            return this.background !== m || this.Oh !== m
        }
        return p
    };
    da.xl = function(a, b, c, d, e, g) {
        if (this.hf === p) return p;
        g === f && (g = new ib);
        b === f && (b = m);
        c === f && (c = m);
        g.multiply(this.transform);
        if (this.Vx(a, g)) return aj(this, b, c, e),
        h;
        if (this.Te(a, g)) {
            if (!this.Ag) for (var i = this.wa.length; i--;) {
                var j = this.wa.i[i];
                if (j.visible || j === this.Ab) {
                    var k = j.la,
                    l = this.la;
                    if (! (k.x > l.width || k.y > l.height || 0 > k.x + k.width || 0 > k.y + k.height)) {
                        if (j instanceof w) k = j.xl(a, b, c, d, e, g.copy());
                        else {
                            var k = j,
                            l = a,
                            n = d,
                            r = g.copy();
                            k.hf === p ? k = p: (r === f && (r = new ib), r.multiply(k.transform), k = n ? k.Te(l, r) : k.Vx(l, r))
                        }
                        k && (b !== m && (j = b(j)), j && (c === m || c(j)) && e.add(j))
                    }
                }
            }
            return d
        }
        return p
    };
    da.yn = function(a, b, c, d, e) {
        if (this.hf === p) return p;
        c === f && (c = m);
        d === f && (d = m);
        var g = this.ua,
        i = this.hi() ? a: lb((new D).set(a), this.transform),
        j = this.hi() ? b: lb((new D).set(b), this.transform),
        j = i.Ni(j);
        if (0 < i.x && i.x < g.width && 0 < i.y && i.y < g.height || nb(i.x, i.y, 0, 0, 0, g.height) < j || nb(i.x, i.y, 0, g.height, g.width, g.height) < j || nb(i.x, i.y, g.width, g.height, g.width, 0) < j || nb(i.x, i.y, g.width, 0, 0, 0) < j) {
            if (!this.Ag) {
                g = new D;
                i = new D;
                for (j = this.wa.length; j--;) {
                    var k = this.wa.i[j];
                    if (k.visible || k === this.Ab) {
                        var l = k.la,
                        n = this.la;
                        if (! (l.x > n.width || l.y > n.height || 0 > l.x + l.width || 0 > l.y + l.height)) if (l = k.transform, k.hi() ? (lb(g.set(a), l), lb(i.set(b), l)) : (g.set(a), i.set(b)), k instanceof w ? k.yn(g, i, c, d, e) : k.OB(g, i)) c !== m && (k = c(k)),
                        k && (d === m || d(k)) && e.add(k)
                    }
                }
            }
            return h
        }
        return p
    };
    function wk(a) {
        var b = a.n;
        if (b === f || b === ec) b = m;
        b === m && a instanceof V && (a = a.xa, a !== m && (b = a.n));
        b === m && (b = fc);
        return b
    }
    function xk(a) {
        var b = a.o;
        if (b === f || b === ec) b = m;
        b === m && a instanceof V && (a = a.xa, a !== m && (b = a.o));
        b === m && (b = tc);
        return b
    }
    w.prototype.add = w.prototype.add = function(a) {
        v.c(a, P, w, "add:element");
        this.lc(this.wa.count, a)
    };
    w.prototype.elt = w.prototype.Z = function(a) {
        return this.wa.Z(a)
    };
    w.prototype.insertAt = w.prototype.lc = function(a, b) {
        b instanceof R && v.g("Cannot add a Part to a Panel: " + b);
        if (this === b || this.ci(b)) this === b && v.g("Cannot make a Panel contain itself: " + this.toString()),
        v.g("Cannot make a Panel indirectly contain itself: " + this.toString() + " already contains " + b.toString());
        var c = b.Y;
        c !== m && c !== this && v.g("Cannot add a GraphObject that already belongs to another Panel to this Panel: " + b.toString() + ", already contained by " + c.toString() + ", cannot be shared by this Panel: " + this.toString());
        this.K === Yh && !(b instanceof V) && v.g("Can only add Shapes to a Grid Panel, not: " + b);
        b.tk(this);
        b.$k = m;
        if (this.wy !== m) {
            var d = b.data;
            d !== m && "object" === typeof d && (this.df === m && (this.df = new oa(Object, w)), this.df.add(d, b))
        }
        var e = this.wa,
        d = -1;
        if (c === this) {
            for (var g = -1,
            i = e.count,
            j = 0; j < i; j++) if (e.i[j] === b) {
                g = j;
                break
            }
            if ( - 1 !== g) {
                if (g === a || g + 1 >= e.count && a >= e.count) return;
                e.qe(g);
                d = g
            } else v.g("element " + b.toString() + " has panel " + c.toString() + " but is not contained by it.")
        }
        a > e.count && (a = e.count);
        e.lc(a, b);
        this.J();
        b.J();
        c = this.W;
        c !== m && (e = this.b, e !== m && e.da.cb || ( - 1 !== d && c.Yd(Fe, "elements", this, b, m, d, m), c.Yd(Ee, "elements", this, m, b, m, a)))
    };
    w.prototype.remove = w.prototype.remove = function(a) {
        v.c(a, P, w, "remove:element");
        for (var b = this.wa,
        c = b.count,
        d = -1,
        e = 0; e < c; e++) if (b.i[e] === a) {
            d = e;
            break
        } - 1 !== d && this.Cd(d)
    };
    w.prototype.removeAt = w.prototype.qe = function(a) {
        t && v.j(a, w, "removeAt:idx");
        0 <= a && this.Cd(a)
    };
    w.prototype.Cd = function(a) {
        var b = this.wa,
        c = b.Z(a);
        c.$k = m;
        c.tk(m);
        if (this.df !== m) {
            var d = c.data;
            "object" === typeof d && this.df.remove(d)
        }
        b.qe(a);
        this.ac = p;
        this.J();
        b = this.W;
        b !== m && (d = this.b, d !== m && d.da.cb || b.Yd(Fe, "elements", this, c, m, a, m))
    };
    v.m(w, {
        bv: "rowCount"
    },
    function() {
        return this.Ge.length
    });
    w.prototype.getRowDefinition = w.prototype.Td = function(a) {
        t && v.j(a, w, "getRowDefinition:idx");
        0 > a && v.ha(a, ">= 0", w, "getRowDefinition:idx");
        var a = Math.round(a),
        b = this.Ge;
        if (b[a] === f) {
            var c = new Oj;
            c.tk(this);
            c.Rk = h;
            c.R = a;
            b[a] = c
        }
        return b[a]
    };
    w.prototype.removeRowDefinition = w.prototype.lK = function(a) {
        t && v.j(a, w, "removeRowDefinition:idx");
        0 > a && v.ha(a, ">= 0", w, "removeRowDefinition:idx");
        var a = Math.round(a),
        b = this.Ge;
        b[a] && (b[a] = f)
    };
    v.m(w, {
        ru: "columnCount"
    },
    function() {
        return this.we.length
    });
    w.prototype.getColumnDefinition = w.prototype.qd = function(a) {
        t && v.j(a, w, "getColumnDefinition:idx");
        0 > a && v.ha(a, ">= 0", w, "getColumnDefinition:idx");
        var a = Math.round(a),
        b = this.we;
        if (b[a] === f) {
            var c = new Oj;
            c.tk(this);
            c.Rk = h;
            c.R = a;
            b[a] = c
        }
        return b[a]
    };
    w.prototype.removeColumnDefinition = w.prototype.jK = function(a) {
        t && v.j(a, w, "removeColumnDefinition:idx");
        0 > a && v.ha(a, ">= 0", w, "removeColumnDefinition:idx");
        var a = Math.round(a),
        b = this.we;
        b[a] && (b[a] = f)
    };
    v.a(w, "rowSizing", w.prototype.gD);
    v.defineProperty(w, {
        gD: "rowSizing"
    },
    s("vq"),
    function(a) {
        var b = this.vq;
        b !== a && (a !== tk && a !== Ak && v.g("rowSizing must be RowColumnDefinition.ProportionalExtra or RowColumnDefinition.None"), this.vq = a, this.J(), this.d("rowSizing", b, a))
    });
    v.a(w, "columnSizing", w.prototype.kB);
    v.defineProperty(w, {
        kB: "columnSizing"
    },
    s("Bo"),
    function(a) {
        var b = this.Bo;
        b !== a && (a !== tk && a !== Ak && v.g("columnSizing must be RowColumnDefinition.ProportionalExtra or RowColumnDefinition.None"), this.Bo = a, this.J(), this.d("columnSizing", b, a))
    });
    v.a(w, "topIndex", w.prototype.TG);
    v.defineProperty(w, {
        TG: "topIndex"
    },
    s("Wm"),
    function(a) {
        var b = this.Wm;
        b !== a && ((!isFinite(a) || 0 > a) && v.g("topIndex must be greater than zero and a real number. Was " + a), this.Wm = a, nj(this), this.d("topIndex", b, a))
    });
    v.a(w, "leftIndex", w.prototype.ZF);
    v.defineProperty(w, {
        ZF: "leftIndex"
    },
    s("Am"),
    function(a) {
        var b = this.Am;
        b !== a && ((!isFinite(a) || 0 > a) && v.g("leftIndex must be greater than zero and a real number. Was " + a), this.Am = a, nj(this), this.d("leftIndex", b, a))
    });
    v.a(w, "data", w.prototype.data);
    v.defineProperty(w, {
        data: "data"
    },
    s("fm"),
    function(a) {
        var b = this.fm;
        if (b !== a) {
            var c = this instanceof R && !(this instanceof lf);
            c && v.e(a, "object", w, "data");
            of(this);
            this.fm = a;
            var d = this.b;
            d !== m && (c ? (b !== m && d.Mf.remove(b), a !== m && d.Mf.add(a, this)) : (c = this.Y, c !== m && c.df !== m && (b !== m && c.df.remove(b), a !== m && c.df.add(a, this))));
            this.d("data", b, a);
            d !== m && d.da.cb || a !== m && this.nc()
        }
    });
    function Kj(a) {
        a = a.Ek;
        return a !== m && a.Ma
    }
    function of(a) {
        var b = a.Ek;
        if (b === m) a.data !== m && v.g("Template cannot have .data be non-null: " + a),
        a.Ek = b = new y(af);
        else if (b.Ma) return;
        var c = new y(P);
        Dk(a, a,
        function(a, d) {
            var e = d.Xb;
            if (e !== m) {
                d.Zl = p;
                for (var g = e.f; g.next();) {
                    e = g.value;
                    e.mode === cf && (d.Zl = h);
                    var i = e.fo;
                    if (i !== m) {
                        var q = a;
                        "" !== i && (q = a.Re(i));
                        q !== m && (c.add(q), q.Jq === f && (q.Jq = new y(af)), q.Jq.add(e))
                    }
                    b.add(e)
                }
            }
            if (d instanceof w) {
                if (0 < d.Ge.length) {
                    g = d.Ge;
                    i = g.length;
                    for (q = 0; q < i; q++) {
                        var u = g[q];
                        if (u !== f && u.Xb !== m) for (var x = u.Xb.f; x.next();) e = x.value,
                        e.kf = u,
                        e.jx = 2,
                        e.Zt = u.index,
                        b.add(e)
                    }
                }
                if (0 < d.we.length) {
                    g = d.we;
                    i = g.length;
                    for (q = 0; q < i; q++) if (u = g[q], u !== f && u.Xb !== m) for (x = u.Xb.f; x.next();) e = x.value,
                    e.kf = u,
                    e.jx = 1,
                    e.Zt = u.index,
                    b.add(e)
                }
            }
        });
        for (var d = c.f; d.next();) {
            var e = d.value;
            if (e.Jq !== f) {
                e.Zl = h;
                for (var g = e.Jq.f; g.next();) {
                    var i = g.value;
                    e.Xb === m && (e.Xb = new y(af));
                    e.Xb.add(i)
                }
            }
            delete e.Jq
        }
        for (d = b.f; d.next();) e = d.value,
        g = e.kf,
        g !== m && (e.kf = m, g === a ? e.Ol = "": (g instanceof Oj && (g = g.Y), e.Ol = "" !== g.name ? g.name: g.name = "_" + v.kc(g)));
        b.freeze()
    }
    w.prototype.updateTargetBindings = w.prototype.nc = function(a) {
        var b = this.Ek;
        if (b !== m) {
            a === f && (a = "");
            for (b = b.f; b.next();) {
                var c = b.value,
                d = c.Zy;
                if (! ("" !== a && d !== a) && (d = c.dz, !(c.nB === m && "" === d))) {
                    var d = this.data,
                    e = c.fo;
                    e !== m && (d = this.Re(e));
                    if (d === m) t && v.trace("Binding error: missing GraphObject named " + e + " in " + this.toString());
                    else {
                        var e = this,
                        g = c.Ol;
                        if ("" !== g) {
                            if (e = this.Re(g), e === m) continue
                        } else c.kf !== m && (e = c.kf);
                        g = c.jx;
                        if (0 !== g) {
                            if (! (e instanceof w)) continue;
                            1 === g ? e = e.qd(c.Zt) : 2 === g && (e = e.Td(c.Zt))
                        }
                        e !== f && c.KD(e, d)
                    }
                }
            }
        }
    };
    v.a(w, "itemArray", w.prototype.wy);
    v.defineProperty(w, {
        wy: "itemArray"
    },
    s("Jj"),
    function(a) {
        var b = this.Jj;
        if (b !== a) {
            t && (a !== m && !v.isArray(a)) && v.g("Panel.itemArray must be an Array-like object or null, not: " + a);
            var c = this.b;
            c !== m && b !== m && yi(c, this);
            this.Jj = a;
            c !== m && a !== m && wi(c, this);
            this.d("itemArray", b, a);
            c !== m && c.da.cb || this.Py()
        }
    });
    w.prototype.rebuildItemElements = w.prototype.Py = function() {
        for (; 0 < this.wa.length;) this.Cd(0);
        var a = this.wy;
        if (a !== m) for (var b = v.Eb(a), c = 0; c < b; c++) Hh(this, v.qb(a, c))
    };
    function Hh(a, b, c) {
        if (! (b === f || b === m)) {
            var d = a.getCategoryForItemData(b),
            e = a.nC,
            g = m;
            e !== m && (g = e.ca(d));
            g === m && (v.qE === f && (v.qE = h, v.trace('No item template Panel found for category "' + d + '" on ' + a), v.trace(" Using default item template.")), g = a.b.YD);
            g instanceof w && (of(g), e = g.copy(), "object" === typeof b && (a.df === m && (a.df = new oa(Object, w)), a.df.add(b, e)), "number" === typeof c ? (a.lc(c, e), Gk(e, c), Ih(a, c)) : (a.add(e), Gk(e, a.wa.count - 1)), e.Ew = d, e.data = b)
        }
    }
    function Ih(a, b) {
        for (var c = a.wa,
        d = b + 1; d < c.length;) {
            var e = c.Z(d);
            e instanceof w && Gk(e, d);
            d++
        }
    }
    function Gk(a, b) {
        a.type === ij ? a.Ub = b: a.type === jj && (a.ic = b)
    }
    w.prototype.isItemPanel = w.prototype.RF = function() {
        return this.Jj !== m || this.Rf !== m
    };
    v.a(w, "itemTemplate", w.prototype.VF);
    v.defineProperty(w, {
        VF: "itemTemplate"
    },
    function() {
        return this.Rf === m ? m: this.Rf.ca("")
    },
    function(a) {
        this.Rf === m && (this.Rf = new oa("string", w));
        var b = this.Rf.ca("");
        b !== a && (v.c(a, w, w, "itemTemplate"), a instanceof R && v.g("itemTemplate must not be a Part: " + a), this.Rf.add("", a), this.d("itemTemplate", b, a), a = this.b, a !== m && a.da.cb || this.Py())
    });
    v.a(w, "itemTemplateMap", w.prototype.nC);
    v.defineProperty(w, {
        nC: "itemTemplateMap"
    },
    s("Rf"),
    function(a) {
        var b = this.Rf;
        if (b !== a) {
            v.c(a, oa, w, "itemTemplateMap");
            for (var c = a.f; c.next();) {
                var d = c.value;
                d instanceof R && v.g("Template in itemTemplateMap must not be a Part: " + d)
            }
            this.Rf = a;
            this.d("itemTemplateMap", b, a);
            a = this.b;
            a !== m && a.da.cb || this.Py()
        }
    });
    v.a(w, "itemCategoryProperty", w.prototype.UF);
    v.defineProperty(w, {
        UF: "itemCategoryProperty"
    },
    s("wm"),
    function(a) {
        var b = this.wm;
        b !== a && ("string" !== typeof a && "function" !== typeof a && v.Ac(a, "string or function", w, "itemCategoryProperty"), this.wm = a, this.d("itemCategoryProperty", b, a))
    });
    w.prototype.getCategoryForItemData = w.prototype.WI = function(a) {
        if (a === m) return "";
        var b = this.wm;
        if ("function" === typeof b) b = b(a);
        else if ("string" === typeof b && "object" === typeof a) {
            if ("" === b) return "";
            b = v.Za(a, b)
        } else return "";
        if (b === f) return "";
        if ("string" === typeof b) return b;
        t && v.trace("Panel.getCategoryForItemData found a non-string category for " + a + ": " + b);
        return ""
    };
    v.a(w, "isAtomic", w.prototype.OF);
    v.defineProperty(w, {
        OF: "isAtomic"
    },
    s("Ag"),
    function(a) {
        var b = this.Ag;
        b !== a && (v.e(a, "boolean", w, "isAtomic"), this.Ag = a, this.d("isAtomic", b, a))
    });
    function Oj() {
        v.Ob(this);
        this.Sj = m;
        this.Rk = h;
        this.R = 0;
        this.He = NaN;
        this.Xk = 0;
        this.Wk = Infinity;
        this.ja = ec;
        this.kb = this.Ja = 0;
        this.Xb = m;
        this.Gq = Hk;
        this.Lg = Qg
    }
    v.H("RowColumnDefinition", Oj);
    Oj.prototype.copy = function() {
        var a = new Oj;
        a.Rk = this.Rk;
        a.R = this.R;
        a.He = this.He;
        a.Xk = this.Xk;
        a.Wk = this.Wk;
        a.ja = this.ja;
        a.Ja = this.Ja;
        a.kb = this.kb;
        a.Lg = this.Lg;
        a.Gq = this.Gq;
        a.Xb = this.Xb;
        return a
    };
    var Hk;
    Oj.Default = Hk = v.l(Oj, "Default", 0);
    var Ak;
    Oj.None = Ak = v.l(Oj, "None", 1);
    var tk;
    Oj.ProportionalExtra = tk = v.l(Oj, "ProportionalExtra", 2);
    Oj.prototype.tk = ba("Sj");
    function yk(a, b) {
        a.Ja = isNaN(a.He) ? Math.max(Math.min(a.Wk, b), a.Xk) : Math.max(Math.min(a.Wk, a.He), a.Xk)
    }
    Oj.prototype.xd = function(a, b, c, d, e) {
        var g = this.Sj;
        if (g !== m) {
            g.J();
            for (var i = this.Qu,
            j = g.wa,
            k = j.length,
            l = 0; l < k; l++) {
                var n = j.i[l]; (i ? n.Ub: n.ic) === this.index && n.J()
            }
            g.Yd(De, a, this, b, c, d, e);
            if (this.Xb !== m && (b = g.wr(), b !== m && (b = b.data, b !== m))) for (c = this.Xb.f; c.next();) c.value.JD(this, b, a)
        }
    };
    v.m(Oj, {
        Y: "panel"
    },
    s("Sj"));
    v.m(Oj, {
        Qu: "isRow"
    },
    s("Rk"));
    v.m(Oj, {
        index: "index"
    },
    s("R"));
    v.a(Oj, "height", Oj.prototype.height);
    v.defineProperty(Oj, {
        height: "height"
    },
    s("He"),
    function(a) {
        var b = this.He;
        b !== a && (t && v.e(a, "number", Oj, "height"), 0 > a && v.ha(a, ">= 0", Oj, "height"), this.He = a, yk(this, this.Ja), this.xd("size", b, a))
    });
    v.a(Oj, "width", Oj.prototype.width);
    v.defineProperty(Oj, {
        width: "width"
    },
    s("He"),
    function(a) {
        var b = this.He;
        b !== a && (t && v.e(a, "number", Oj, "width"), 0 > a && v.ha(a, ">= 0", Oj, "width"), this.He = a, yk(this, this.Ja), this.xd("size", b, a))
    });
    v.a(Oj, "minimum", Oj.prototype.uf);
    v.defineProperty(Oj, {
        uf: "minimum"
    },
    s("Xk"),
    function(a) {
        var b = this.Xk;
        b !== a && (t && v.e(a, "number", Oj, "minimum"), (0 > a || !isFinite(a)) && v.ha(a, ">= 0", Oj, "minimum"), this.Xk = a, yk(this, this.Ja), this.xd("minimum", b, a))
    });
    v.a(Oj, "maximum", Oj.prototype.Gd);
    v.defineProperty(Oj, {
        Gd: "maximum"
    },
    s("Wk"),
    function(a) {
        var b = this.Wk;
        b !== a && (t && v.e(a, "number", Oj, "maximum"), 0 > a && v.ha(a, ">= 0", Oj, "maximum"), this.Wk = a, yk(this, this.Ja), this.xd("maximum", b, a))
    });
    v.a(Oj, "alignment", Oj.prototype.pb);
    v.defineProperty(Oj, {
        pb: "alignment"
    },
    s("ja"),
    function(a) {
        var b = this.ja;
        b.u(a) || (t && v.c(a, F, Oj, "alignment"), this.ja = a.B(), this.xd("alignment", b, a))
    });
    v.a(Oj, "stretch", Oj.prototype.jh);
    v.defineProperty(Oj, {
        jh: "stretch"
    },
    s("Lg"),
    function(a) {
        var b = this.Lg;
        b !== a && (t && v.Va(a, P, Oj, "stretch"), this.Lg = a, this.xd("stretch", b, a))
    });
    v.a(Oj, "sizing", Oj.prototype.ds);
    v.defineProperty(Oj, {
        ds: "sizing"
    },
    s("Gq"),
    function(a) {
        var b = this.Gq;
        b !== a && (t && v.Va(a, Oj, Oj, "sizing"), this.Gq = a, this.xd("sizing", b, a))
    });
    function zk(a) {
        if (a.ds === Hk) {
            var b = a.Sj;
            return a.Qu ? b.gD: b.kB
        }
        return a.ds
    }
    v.m(Oj, {
        Nd: "actual"
    },
    s("Ja"));
    v.m(Oj, {
        position: "position"
    },
    s("kb"));
    Oj.prototype.bind = Oj.prototype.bind = function(a) {
        a.kf = this;
        var b = this.Y;
        b !== m && (b = b.wr(), b !== m && Kj(b) && v.g("Cannot add a Binding to a RowColumnDefinition that is already frozen: " + a));
        this.Xb === m && (this.Xb = new y(af));
        this.Xb.add(a)
    };
    function V() {
        P.call(this);
        this.xa = m;
        this.Zo = "None";
        this.Hg = p;
        this.gp = Qg;
        this.vj = m;
        this.uc = this.af = "black";
        this.Kh = 1;
        this.Qm = "butt";
        this.Rm = "miter";
        this.Sm = 10;
        this.Ih = this.Hh = ec;
        this.eq = this.dq = 0;
        this.up = h;
        this.lE = new E;
        this.nm = this.Vm = "None";
        this.mp = 1
    }
    v.H("Shape", V);
    v.pa(V, P);
    V.prototype.jb = function(a) {
        P.prototype.jb.call(this, a);
        a.xa = this.xa;
        a.Zo = this.Zo;
        a.Hg = this.Hg;
        a.gp = this.gp;
        a.vj = this.vj;
        a.af = this.af;
        a.uc = this.uc;
        a.Kh = this.Kh;
        a.Qm = this.Qm;
        a.Rm = this.Rm;
        a.Sm = this.Sm;
        a.Hh = this.Hh.B();
        a.Ih = this.Ih.B();
        a.dq = this.dq;
        a.eq = this.eq;
        a.up = this.up;
        a.Vm = this.Vm;
        a.nm = this.nm;
        a.mp = this.mp
    };
    V.prototype.toString = function() {
        return "Shape(" + ("None" !== this.Xa ? this.Xa: "None" !== this.Rl ? this.Rl: this.Iu) + ")#" + v.kc(this)
    };
    V.prototype.rn = function(a) {
        if (! (this.uc === m && this.af === m)) {
            this.af !== m && kj(this, a, this.af, h);
            this.uc !== m && kj(this, a, this.uc, p);
            a.lineWidth = this.Kh;
            a.lineJoin = this.Rm;
            a.lineCap = this.Qm;
            a.miterLimit = this.Sm;
            var b = p;
            this.W && (b = this.W.Dl);
            var c = h;
            this.uc !== m && this.af === m && (c = p);
            var d = this.xa;
            if (d !== m) if (d.K === Rd) a.beginPath(),
            a.moveTo(d.Rb, d.cc),
            a.lineTo(d.Dc, d.Oc),
            this.af !== m && a.fill(),
            this.uc !== m && a.stroke();
            else if (d.K === Sd) {
                var e = d.Rb,
                g = d.cc,
                i = d.Dc,
                d = d.Oc,
                j = Math.min(e, i),
                k = Math.min(g, d),
                e = Math.abs(i - e),
                g = Math.abs(d - g);
                this.af !== m && a.fillRect(j, k, e, g);
                if (this.uc !== m) {
                    if (c && b) {
                        var l = [a.shadowOffsetX, a.shadowOffsetY, a.shadowBlur];
                        a.shadowOffsetX = 0;
                        a.shadowOffsetY = 0;
                        a.shadowBlur = 0
                    }
                    a.strokeRect(j, k, e, g);
                    c && b && (a.shadowOffsetX = l[0], a.shadowOffsetY = l[1], a.shadowBlur = l[2])
                }
            } else if (d.K === Td) e = d.Rb,
            g = d.cc,
            i = d.Dc,
            d = d.Oc,
            j = Math.abs(i - e) / 2,
            k = Math.abs(d - g) / 2,
            e = Math.min(e, i) + j,
            g = Math.min(g, d) + k,
            a.beginPath(),
            a.moveTo(e, g - k),
            a.bezierCurveTo(e + Nc * j, g - k, e + j, g - Nc * k, e + j, g),
            a.bezierCurveTo(e + j, g + Nc * k, e + Nc * j, g + k, e, g + k),
            a.bezierCurveTo(e - Nc * j, g + k, e - j, g + Nc * k, e - j, g),
            a.bezierCurveTo(e - j, g - Nc * k, e - Nc * j, g - k, e, g - k),
            a.closePath(),
            this.af !== m && a.fill(),
            this.uc !== m && (c && b && (l = [a.shadowOffsetX, a.shadowOffsetY, a.shadowBlur], a.shadowOffsetX = 0, a.shadowOffsetY = 0, a.shadowBlur = 0), a.stroke(), c && b && (a.shadowOffsetX = l[0], a.shadowOffsetY = l[1], a.shadowBlur = l[2]));
            else if (d.K === Id) {
                g = d.Lk;
                d = g.length;
                for (e = 0; e < d; e++) {
                    c = g.i[e];
                    a.beginPath();
                    a.moveTo(c.Ca, c.Da);
                    i = c.gb.i;
                    j = i.length;
                    for (k = 0; k < j; k++) {
                        var n = i[k];
                        switch (n.K) {
                        case de:
                            a.moveTo(n.N, n.O);
                            break;
                        case $d:
                            a.lineTo(n.N, n.O);
                            break;
                        case ee:
                            a.bezierCurveTo(n.Tj, n.Uj, n.al, n.bl, n.cl, n.dl);
                            break;
                        case me:
                            a.quadraticCurveTo(n.Tj, n.Uj, n.cl, n.dl);
                            break;
                        case ne:
                            var r = Math.PI / 180;
                            a.arc(n.am, n.bm, n.Il, n.fi * r, (n.fi + n.dj) * r, 0 > n.dj ? h: p);
                            break;
                        default:
                            v.g("Segment not of valid type")
                        }
                        n.si && a.closePath()
                    }
                    c.op === h && this.af !== m ? (a.fill(), c = h) : c = c.Qf ? p: h;
                    this.uc !== m && (c && b && (l = [a.shadowOffsetX, a.shadowOffsetY, a.shadowBlur], a.shadowOffsetX = 0, a.shadowOffsetY = 0, a.shadowBlur = 0), a.stroke(), c && b && (a.shadowOffsetX = l[0], a.shadowOffsetY = l[1], a.shadowBlur = l[2]))
                }
            }
        }
    };
    V.prototype.mg = function() {
        P.prototype.mg.call(this);
        var a = this.b;
        a !== m && (Mi(a, "fill", this.fill), Mi(a, "geometry", this.Ar), this.zn !== Qg && Mi(a, "geometryStretch", this.zn), Mi(a, "stroke", this.stroke), "butt" !== this.az && Mi(a, "strokeCap", this.az), "miter" !== this.bz && Mi(a, "strokeJoin", this.bz), 10 !== this.cz && Mi(a, "strokeMiterLimit", this.cz), Mi(a, "strokeWidth", this.Ua))
    };
    V.prototype.getDocumentPoint = V.prototype.zb = function(a) {
        Zb(a) && v.g("Spot must be real");
        var b = this.ua,
        c = this.Ua,
        a = new D(a.x * (b.width + c) - c / 2 + b.x + a.offsetX, a.y * (b.height + c) - c / 2 + b.y + a.offsetY);
        this.ge.Bb(a);
        return a
    };
    V.prototype.Ji = function(a, b) {
        var c = this.xa;
        if (c === m || this.fill === m && this.stroke === m) return p;
        var d = c.lb,
        e = this.Ua / 2;
        c.type === Rd && !b && (e += 2);
        var g = this.lE;
        g.set(d);
        g.of(e + 2, e + 2);
        if (!g.fa(a)) return p;
        d = e + 1E-4;
        if (c.type === Rd) {
            if (this.stroke === m) return p;
            d = (c.N - c.Ca) * (a.x - c.Ca) + (c.O - c.Da) * (a.y - c.Da);
            return 0 > (c.Ca - c.N) * (a.x - c.N) + (c.Da - c.O) * (a.y - c.O) || 0 > d ? p: $c(c.Ca, c.Da, c.N, c.O, e, a.x, a.y)
        }
        if (c.type === Sd) {
            var i = c.Ca,
            j = c.Da,
            k = c.N,
            l = c.O,
            c = Math.min(i, k),
            n = Math.min(j, l),
            i = Math.abs(k - i),
            j = Math.abs(l - j);
            g.x = c;
            g.y = n;
            g.width = i;
            g.height = j;
            if (this.fill === m) {
                g.of( - d, -d);
                if (g.fa(a)) return p;
                g.of(d, d)
            }
            this.stroke !== m && g.of(e, e);
            return g.fa(a)
        }
        if (c.type === Td) {
            i = c.Ca;
            j = c.Da;
            k = c.N;
            l = c.O;
            c = Math.min(i, k);
            n = Math.min(j, l);
            i = Math.abs(k - i);
            j = Math.abs(l - j);
            g = i / 2;
            j /= 2;
            c = a.x - (c + g);
            n = a.y - (n + j);
            if (this.fill === m) {
                g -= d;
                j -= d;
                if (0 >= g || 0 >= j || 1 >= c * c / (g * g) + n * n / (j * j)) return p;
                g += d;
                j += d
            }
            this.stroke !== m && (g += e, j += e);
            return 0 >= g || 0 >= j ? p: 1 >= c * c / (g * g) + n * n / (j * j)
        }
        if (c.type === Id) return this.fill === m ? qe(c, a.x, a.y, e) : c.fa(a, e, 1 < this.Ua, b);
        v.g("Unknown Geometry type");
        return p
    };
    V.prototype.Mr = function(a, b, c, d) {
        var e = this.ma,
        g = this.Kh,
        a = Math.max(a, 0),
        b = Math.max(b, 0),
        i;
        this.Hg ? i = this.xa.lb: (Ik[this.Xa] === f && v.g("Unsupported Figure:" + this.Xa), i = Ik[this.Xa].lb);
        var j = i.width,
        k = i.height,
        l = i.width;
        i = i.height;
        switch (bj(this)) {
        case Wi:
            d = c = 0;
            break;
        case Qd:
            l = Math.max(a - g, 0);
            i = Math.max(b - g, 0);
            break;
        case Yi:
            l = Math.max(a - g, 0);
            d = 0;
            break;
        case Xi:
            c = 0,
            i = Math.max(b - g, 0)
        }
        isFinite(e.width) && (l = e.width);
        isFinite(e.height) && (i = e.height);
        var e = this.Fd,
        n = this.Xd,
        c = Math.max(c / this.scale, n.width) - g,
        d = Math.max(d / this.scale, n.height) - g,
        l = Math.min(e.width, l);
        i = Math.min(e.height, i);
        l = isFinite(l) ? Math.max(c, l) : Math.max(j, c);
        i = isFinite(i) ? Math.max(d, i) : Math.max(k, d);
        c = this.zn;
        c = this.Hg ? c === Qg ? Qd: c: c === Qg ? Ik[this.Xa].Pb: c;
        switch (c) {
        case Wi:
            break;
        case Qd:
            j = l;
            k = i;
            break;
        case Rg:
            l = Math.min(l / j, i / k);
            isFinite(l) || (l = 1);
            j *= l;
            k *= l;
            break;
        default:
            v.g(c + "is not a valid geometryStretch.")
        }
        if (this.Hg) {
            d = this.Ar;
            i = j;
            c = k;
            l = d.copy();
            d = d.lb;
            i /= d.width;
            c /= d.height;
            isFinite(i) || (i = 1);
            isFinite(c) || (c = 1);
            if (! (1 === i && 1 === c)) {
                switch (l.type) {
                case Rd:
                case Sd:
                case Td:
                    l.Rb *= i;
                    l.cc *= c;
                    l.Dc *= i;
                    l.Oc *= c;
                    break;
                case Id:
                    d = l.Kb;
                    e = d.length;
                    for (n = 0; n < e; n++) {
                        var r = d.i[n];
                        r.Ca *= i;
                        r.Da *= c;
                        for (var r = r.gb,
                        q = r.length,
                        u = 0; u < q; u++) {
                            var x = r.i[u];
                            switch (x.type) {
                            case $d:
                            case de:
                                x.N *= i;
                                x.O *= c;
                                break;
                            case ee:
                                x.Tj *= i;
                                x.Uj *= c;
                                x.al *= i;
                                x.bl *= c;
                                x.Dc *= i;
                                x.Oc *= c;
                                break;
                            case me:
                                x.zc *= i;
                                x.rd *= c;
                                x.N *= i;
                                x.O *= c;
                                break;
                            case ne:
                                x.za *= i;
                                x.Aa *= c;
                                x.Il *= i;
                                x.Xn !== f && (x.Xn *= c);
                                break;
                            default:
                                v.g("Unknown Segment type: " + x.type)
                            }
                        }
                    }
                }
                l.Ia = h
            }
            this.xa = l
        } else if (this.xa === m || this.xa.Ws !== a || this.xa.Vs !== b) l = j,
        i = k,
        d = this.ma,
        c = d.width,
        d = d.height,
        l !== f && (!isNaN(l) && isFinite(l)) && (c = l),
        i !== f && (!isNaN(i) && isFinite(i)) && (d = i),
        isFinite(c) || (c = 100),
        isFinite(d) || (d = 100),
        e = f,
        "None" !== this.Rl ? e = Jk(this.Rl) : "None" !== this.Iu ? e = Jk(this.Iu) : (n = Kk[this.Xa], "string" === typeof n && (n = Kk[n]), n === f && v.g("Unknown Shape.figure: " + this.Xa), e = n(this, c, d), e.wd = new sb(c, d)),
        e === f && (n = Kk.Rectangle) && (e = n(this, c, d)),
        e.Ws = l,
        e.Vs = i,
        this.xa = e;
        i = this.xa.lb;
        Zi(this, i.x - g / 2, i.y - g / 2, 0 === a && 0 === j ? 0 : i.width + g, 0 === b && 0 === k ? 0 : i.height + g)
    };
    function Bk(a, b, c) {
        if (a.ac !== p) {
            a.Hc.qa();
            var d = a.Kh * a.Qb;
            Zi(a, -(d / 2), -(d / 2), b + d, c + d);
            b = a.Hc;
            c = a.Fd;
            d = a.Xd;
            b.width = Math.min(c.width, b.width);
            b.height = Math.min(c.height, b.height);
            b.width = Math.max(d.width, b.width);
            b.height = Math.max(d.height, b.height);
            a.Hc.freeze();
            a.Hc.aa() || v.g("Non-real measuredBounds has been set");
            a.ac = p
        }
    }
    V.prototype.Hi = function(a, b, c, d) {
        ej(this, a, b, c, d)
    };
    V.prototype.Ju = function(a, b, c) {
        var d = this.transform.copy();
        d.Lu();
        var e = Ob(d, a),
        g = Ob(d, b),
        i = this.Ua / 2,
        d = this.xa;
        d === m && (mh(this, Infinity, Infinity), d = this.xa);
        var j = d.lb,
        k = p;
        if (d.type === Rd) if (1.5 >= this.Ua) k = ud(d.Rb, d.cc, d.Dc, d.Oc, e.x, e.y, g.x, g.y, c);
        else {
            d.Rb === d.Dc ? (a = i, k = 0) : (a = (d.Oc - d.cc) / (d.Dc - d.Rb), k = i / Math.sqrt(1 + a * a), a *= k);
            i = [];
            b = new D;
            ud(d.Rb + a, d.cc + k, d.Dc + a, d.Oc + k, e.x, e.y, g.x, g.y, b) && i.push(b);
            b = new D;
            ud(d.Rb - a, d.cc - k, d.Dc - a, d.Oc - k, e.x, e.y, g.x, g.y, b) && i.push(b);
            b = new D;
            ud(d.Rb + a, d.cc + k, d.Rb - a, d.cc - k, e.x, e.y, g.x, g.y, b) && i.push(b);
            b = new D;
            ud(d.Dc + a, d.Oc + k, d.Dc - a, d.Oc - k, e.x, e.y, g.x, g.y, b) && i.push(b);
            if (0 === i.length) return p;
            k = h;
            g = Infinity;
            for (j = 0; j < i.length; j++) {
                var d = i[j],
                l = (d.x - e.x) * (d.x - e.x) + (d.y - e.y) * (d.y - e.y);
                l < g && (g = l, c.x = d.x, c.y = d.y)
            }
        } else if (d.type === Sd) k = wd(j.copy().of(i, i), e, g, c);
        else if (d.type === Td) a: if (d = j.copy().of(i, i), 0 === d.width) k = ud(d.x, d.y, d.x, d.y + d.height, e.x, e.y, g.x, g.y, c);
        else if (0 === d.height) k = ud(d.x, d.y, d.x + d.width, d.y, e.x, e.y, g.x, g.y, c);
        else {
            var a = d.width / 2,
            n = d.height / 2,
            k = d.x + a,
            d = d.y + n,
            b = 9999;
            e.x !== g.x && (b = (e.y - g.y) / (e.x - g.x));
            if (9999 > Math.abs(b)) {
                g = e.y - d - b * (e.x - k);
                if (0 > a * a * b * b + n * n - g * g) {
                    c.x = NaN;
                    c.y = NaN;
                    k = p;
                    break a
                }
                j = Math.sqrt(a * a * b * b + n * n - g * g);
                i = ( - (a * a * b * g) + a * n * j) / (n * n + a * a * b * b) + k;
                n = ( - (a * a * b * g) - a * n * j) / (n * n + a * a * b * b) + k;
                a = b * (i - k) + g + d;
                d = b * (n - k) + g + d;
                k = Math.abs((e.x - i) * (e.x - i)) + Math.abs((e.y - a) * (e.y - a));
                b = Math.abs((e.x - n) * (e.x - n)) + Math.abs((e.y - d) * (e.y - d));
                k < b ? (c.x = i, c.y = a) : (c.x = n, c.y = d)
            } else {
                i = n * n;
                k = e.x - k;
                k = i - i / (a * a) * k * k;
                if (0 > k) {
                    c.x = NaN;
                    c.y = NaN;
                    k = p;
                    break a
                }
                j = Math.sqrt(k);
                a = d + j;
                d -= j;
                k = Math.abs(a - e.y);
                b = Math.abs(d - e.y);
                k < b ? (c.x = e.x, c.y = a) : (c.x = e.x, c.y = d)
            }
            k = h
        } else if (d.type === Id) {
            var r, q, u, x = e.x,
            z = e.y,
            C = g.x,
            G = g.y,
            H = new D,
            g = e.Ni(g);
            c.x = C;
            c.y = G;
            for (j = 0; j < d.Kb.count; j++) {
                q = d.Kb.i[j];
                var I = q.gb;
                r = q.Ca;
                q = q.Da;
                for (var M = r,
                T = q,
                la, fa, Ca = 0; Ca < I.count; Ca++) {
                    la = I.i[Ca];
                    fa = la.type;
                    l = la.N;
                    u = la.O;
                    var ra = p;
                    switch (fa) {
                    case de:
                        M = l;
                        T = u;
                        break;
                    case $d:
                        ra = Lk(r, q, l, u, x, z, C, G, H);
                        break;
                    case ee:
                        ra = la.zc;
                        fa = la.rd;
                        var va = la.qk,
                        Ja = la.rk,
                        ra = jd(r, q, ra, fa, va, Ja, l, u, x, z, C, G, 0.5, H);
                        break;
                    case me:
                        ra = (r + 2 * la.zc) / 3;
                        fa = (q + 2 * la.rd) / 3;
                        va = (2 * la.zc + l) / 3;
                        Ja = (2 * la.zc + l) / 3;
                        ra = jd(r, q, ra, fa, va, Ja, l, u, x, z, C, G, 0.5, H);
                        break;
                    case ne:
                        u = oe(la);
                        fa = u.length;
                        for (j = 0; j < fa; j++) n = u[j],
                        0 === j && Lk(r, q, n.Sl, n.Tl, x, z, C, G, H) && (l = Mk(e, H, g, c), l < g && (g = l, k = h)),
                        jd(n.Sl, n.Tl, n.rv, n.tv, n.sv, n.uv, n.yk, n.zk, x, z, C, G, 0.5, H) && (l = Mk(e, H, g, c), l < g && (g = l, k = h));
                        l = n.yk;
                        u = n.zk;
                        break;
                    default:
                        v.g("Unknown Segment type: " + la.type)
                    }
                    r = l;
                    q = u;
                    ra && (l = Mk(e, H, g, c), l < g && (g = l, k = h));
                    la.Nu && (l = M, u = T, Lk(r, q, l, u, x, z, C, G, H) && (l = Mk(e, H, g, c), l < g && (g = l, k = h)))
                }
            }
            e = b.x - a.x;
            d = b.y - a.y;
            a = Math.sqrt(e * e + d * d);
            c.x -= e / a * i;
            c.y -= d / a * i
        } else v.g("Invalid Geometry type");
        if (!k) return p;
        b = Ob(this.transform, c);
        c.x = b.x;
        c.y = b.y;
        return h
    };
    function Mk(a, b, c, d) {
        a = a.Ni(b);
        return a < c ? (d.x = b.x, d.y = b.y, a) : c
    }
    function Lk(a, b, c, d, e, g, i, j, k) {
        var l = p,
        n = (e - i) * (b - d) - (g - j) * (a - c);
        if (0 === n) return p;
        k.x = ((e * j - g * i) * (a - c) - (e - i) * (a * d - b * c)) / n;
        k.y = ((e * j - g * i) * (b - d) - (g - j) * (a * d - b * c)) / n;
        if ((a > c ? a - c: c - a) < (b > d ? b - d: d - b)) {
            if (e = b < d ? b: d, a = b < d ? d: b, (k.y > e || db(k.y, e)) && (k.y < a || db(k.y, a))) l = h
        } else if (e = a < c ? a: c, a = a < c ? c: a, (k.x > e || db(k.x, e)) && (k.x < a || db(k.x, a))) l = h;
        return l
    }
    V.prototype.containedInRect = V.prototype.Vx = function(a, b) {
        if (b === f) return a.pl(this.la);
        var c = this.xa;
        c === m && (mh(this, Infinity, Infinity), c = this.xa);
        var c = c.lb,
        d = this.Ua / 2;
        return ! a.fa(b.Bb(new D(c.x - d, c.y - d))) || !a.fa(b.Bb(new D(c.x - d, c.bottom + d))) || !a.fa(b.Bb(new D(c.right + d, c.bottom + d))) || !a.fa(b.Bb(new D(c.right + d, c.y - d))) ? p: h
    };
    V.prototype.intersectsRect = V.prototype.Te = function(a) {
        function b(a, b) {
            i.x = a * c.m11 + b * c.m21 + c.Sa;
            i.y = a * c.m12 + b * c.m22 + c.Ta
        }
        if (a.pl(this.la)) return h;
        var c = this.transform.copy();
        c.Lu();
        var d = a.left,
        e = a.right,
        g = a.top,
        a = a.bottom,
        i = new D;
        b(d, g);
        if (this.Ji(i, h)) return h;
        b(e, g);
        if (this.Ji(i, h)) return h;
        b(d, a);
        if (this.Ji(i, h)) return h;
        b(e, a);
        if (this.Ji(i, h)) return h;
        var j = new D,
        k = new D;
        j.x = e;
        j.y = g;
        i.x = d;
        i.y = g;
        if (Nk(this, i, j, k)) return h;
        i.x = e;
        i.y = a;
        if (Nk(this, i, j, k)) return h;
        j.x = d;
        j.y = a;
        if (Nk(this, i, j, k)) return h;
        i.x = d;
        i.y = g;
        return Nk(this, i, j, k) ? h: p
    };
    function Nk(a, b, c, d) {
        if (!a.Ju(b, c, d)) return p;
        var a = b.x,
        b = b.y,
        e = c.x,
        g = c.y,
        c = d.x,
        d = d.y;
        if (a === e) {
            var i;
            b < g ? (i = b, a = g) : (i = g, a = b);
            return d >= i && d <= a
        }
        a < e ? (i = a, a = e) : i = e;
        return c >= i && c <= a
    }
    V.prototype.OB = function(a, b) {
        if (this.fill !== m && this.Ji(a, h)) return h;
        var c = a.Ni(b),
        d = c;
        1.5 < this.Ua && (c = this.Ua / 2 + Math.sqrt(c), c *= c);
        var e = this.xa;
        e === m && (mh(this, Infinity, Infinity), e = this.xa);
        var g = e.Rb,
        i = e.cc,
        j = e.Dc,
        k = e.Oc;
        if (e.type === Rd) {
            var e = nb(a.x, a.y, g, i, j, k),
            l = (g - j) * (a.x - j) + (i - k) * (a.y - k);
            if (e <= (0 <= (j - g) * (a.x - g) + (k - i) * (a.y - i) && 0 <= l ? c: d)) return h
        } else if (e.type === Sd) {
            if (nb(a.x, a.y, g, i, g, k) <= c || nb(a.x, a.y, g, i, j, i) <= c || nb(a.x, a.y, j, i, j, k) <= c || nb(a.x, a.y, g, k, j, k) <= c) return h
        } else if (e.type === Td) {
            var e = a.x - (g + j) / 2,
            d = a.y - (i + k) / 2,
            l = Math.abs(j - g) / 2,
            n = Math.abs(k - i) / 2;
            if (0 === l || 0 === n) return e = nb(a.x, a.y, g, i, j, k),
            e <= c ? h: p;
            g = new D(Infinity, Infinity);
            vd(e, d, 0, 0, -l, -n, l, n, g);
            vd(e, d, 0, n, -l, -n, l, n, g);
            vd(e, d, 0, -n, -l, -n, l, n, g);
            vd(e, d, 0, l, -l, -n, l, n, g);
            vd(e, d, 0, -l, -l, -n, l, n, g);
            vd(e, d, l / 2, n / 2, -l, -n, l, n, g);
            vd(e, d, -l / 2, n / 2, -l, -n, l, n, g);
            vd(e, d, l / 2, -n / 2, -l, -n, l, n, g);
            vd(e, d, -l / 2, -n / 2, -l, -n, l, n, g);
            if ((g.x - e) * (g.x - e) + (g.y - d) * (g.y - d) < c) return h
        } else if (e.type === Id) {
            k = e.lb;
            g = k.x;
            i = k.y;
            j = k.x + k.width;
            k = k.y + k.height;
            if (a.x > j && a.x < g && a.y > k && a.y < i && nb(a.x, a.y, g, i, g, k) > c && nb(a.x, a.y, g, i, j, i) > c && nb(a.x, a.y, j, k, g, k) > c && nb(a.x, a.y, j, k, j, i) > c) return p;
            c = Math.sqrt(c);
            if (this.fill === m ? qe(e, a.x, a.y, c) : e.fa(a, c, h)) return h
        }
        return p
    };
    v.a(V, "geometry", V.prototype.Ar);
    v.defineProperty(V, {
        Ar: "geometry"
    },
    function() {
        return this.vj ? this.vj: this.xa
    },
    function(a) {
        var b = this.xa;
        b !== a && (a !== m ? (t && v.c(a, Hd, V, "geometry"), this.vj = this.xa = a.freeze()) : this.vj = this.xa = m, this.Hg = h, this.J(), this.d("geometry", b, a))
    });
    V.prototype.qf = function() {
        this.Hg ? this.vj = m: this.xa = m;
        this.J()
    };
    v.a(V, "fill", V.prototype.fill);
    v.defineProperty(V, {
        fill: "fill"
    },
    s("af"),
    function(a) {
        var b = this.af;
        if (b !== a && (a === m || "string" === typeof a || a instanceof Ke)) a instanceof Ke && a.freeze(),
        this.af = a,
        hj(this),
        this.d("fill", b, a)
    });
    v.a(V, "stroke", V.prototype.stroke);
    v.defineProperty(V, {
        stroke: "stroke"
    },
    s("uc"),
    function(a) {
        var b = this.uc;
        if (b !== a && (a === m || "string" === typeof a || a instanceof Ke)) a instanceof Ke && a.freeze(),
        this.uc = a,
        hj(this),
        this.d("stroke", b, a)
    });
    v.a(V, "strokeWidth", V.prototype.Ua);
    v.defineProperty(V, {
        Ua: "strokeWidth"
    },
    s("Kh"),
    function(a) {
        var b = this.Kh;
        b !== a && (t && v.j(a, V, "strokeWidth"), 0 <= a && (this.Kh = a, this.J(), this.d("strokeWidth", b, a)))
    });
    v.a(V, "strokeCap", V.prototype.az);
    v.defineProperty(V, {
        az: "strokeCap"
    },
    s("Qm"),
    function(a) {
        var b = this.Qm;
        b !== a && ("string" === typeof a && ("butt" === a || "round" === a || "square" === a) ? (this.Qm = a, hj(this), this.d("strokeCap", b, a)) : v.ha(a, '"butt", "round", or "square"', V, "strokeCap"))
    });
    v.a(V, "strokeJoin", V.prototype.bz);
    v.defineProperty(V, {
        bz: "strokeJoin"
    },
    s("Rm"),
    function(a) {
        var b = this.Rm;
        b !== a && ("string" === typeof a && ("miter" === a || "bevel" === a || "round" === a) ? (this.Rm = a, hj(this), this.d("strokeJoin", b, a)) : v.ha(a, '"miter", "bevel", or "round"', V, "strokeJoin"))
    });
    v.a(V, "strokeMiterLimit", V.prototype.cz);
    v.defineProperty(V, {
        cz: "strokeMiterLimit"
    },
    s("Sm"),
    function(a) {
        var b = this.Sm;
        b !== a && (t && v.j(a, V, "strokeMiterLimit"), 0 < a && (this.Sm = a, hj(this), this.d("strokeMiterLimit", b, a)))
    });
    v.a(V, "figure", V.prototype.Xa);
    v.defineProperty(V, {
        Xa: "figure"
    },
    s("Zo"),
    function(a) {
        var b = this.Zo;
        if (b !== a) {
            t && v.e(a, "string", V, "figure");
            var c = Kk[a];
            "function" === typeof c ? c = a: (c = Kk[a.toLowerCase()]) || v.g("Unknown Shape.figure: " + a);
            b !== c && (this.Zo = c, this.Hg = p, this.qf(), this.d("figure", b, c))
        }
    });
    v.a(V, "toArrow", V.prototype.Rl);
    v.defineProperty(V, {
        Rl: "toArrow"
    },
    s("Vm"),
    function(a) {
        var b = this.Vm;
        a === h ? a = "Standard": a === p && (a = "None");
        if (b !== a) {
            t && v.e(a, "string", V, "toArrow");
            var c = Jk(a);
            c instanceof Hd ? c = a: (c = Jk(a.toLowerCase())) || v.g("Unknown Shape.toArrow: " + a);
            b !== c && (this.Vm = c, this.Hg = p, this.qf(), Ok(this, c), this.d("toArrow", b, c))
        }
    });
    v.a(V, "fromArrow", V.prototype.Iu);
    v.defineProperty(V, {
        Iu: "fromArrow"
    },
    s("nm"),
    function(a) {
        var b = this.nm;
        a === h ? a = "Standard": a === p && (a = "None");
        if (b !== a) {
            t && v.e(a, "string", V, "fromArrow");
            var c = Jk(a);
            c instanceof Hd ? c = a: (c = Jk(a.toLowerCase())) || v.g("Unknown Shape.fromArrow: " + a);
            b !== c && (this.nm = c, this.Hg = p, this.qf(), Ok(this, c), this.d("fromArrow", b, c))
        }
    });
    function Ok(a, b) {
        var c = a.b;
        if (! (c !== m && c.da.cb)) {
            a.as = Pk;
            c = Bc;
            switch (b) {
            case "halfarrowtop":
                c = tc;
                break;
            case "halftriangletop":
                c = tc;
                break;
            case "openrighttriangletop":
                c = tc;
                break;
            case "opentriangletop":
                c = tc
            }
            "None" !== a.Vm ? (a.ih = -1, a.Fi = c) : "None" !== a.nm && (a.ih = 0, a.Fi = new F(1 - c.x, c.y))
        }
    }
    v.defineProperty(V, {
        n: "spot1"
    },
    s("Hh"),
    function(a) {
        v.c(a, F, V, "spot1");
        var b = this.Hh;
        b.u(a) || (this.Hh = a = a.B(), this.J(), this.d("spot1", b, a))
    });
    v.defineProperty(V, {
        o: "spot2"
    },
    s("Ih"),
    function(a) {
        v.c(a, F, V, "spot2");
        var b = this.Ih;
        b.u(a) || (this.Ih = a = a.B(), this.J(), this.d("spot2", b, a))
    });
    v.defineProperty(V, {
        Mb: "parameter1"
    },
    s("dq"),
    function(a) {
        var b = this.dq;
        b !== a && (this.dq = a, this.J(), this.d("parameter1", b, a))
    });
    v.defineProperty(V, {
        Xr: "parameter2"
    },
    s("eq"),
    function(a) {
        var b = this.eq;
        b !== a && (this.eq = a, this.J(), this.d("parameter2", b, a))
    });
    v.m(V, {
        ua: "naturalBounds"
    },
    function() {
        if (this.xa !== m) return this.qc.Ra(this.xa.lb),
        this.qc;
        var a = this.ma;
        return new E(0, 0, a.width, a.height)
    });
    v.a(V, "isRectangular", V.prototype.TF);
    v.defineProperty(V, {
        TF: "isRectangular"
    },
    s("up"),
    function(a) {
        var b = this.up;
        b !== a && (t && v.e(a, "boolean", V, "isRectangular"), this.up = a, this.J(), this.d("isRectangular", b, a))
    });
    v.a(V, "geometryStretch", V.prototype.zn);
    v.defineProperty(V, {
        zn: "geometryStretch"
    },
    s("gp"),
    function(a) {
        var b = this.gp;
        b !== a && (v.Va(a, P, V, "geometryStretch"), this.gp = a, this.d("geometryStretch", b, a))
    });
    v.a(V, "interval", V.prototype.$h);
    v.defineProperty(V, {
        $h: "interval"
    },
    s("mp"),
    function(a) {
        var b = this.mp;
        t && v.j(a, V, "interval");
        a = Math.floor(a);
        b !== a && 0 <= a && (this.mp = a, this.J(), this.d("interval", b, a))
    });
    function qa() {
        P.call(this);
        this.nd = "";
        this.uc = "black";
        this.pi = "13px sans-serif";
        this.Ie = "start";
        this.rp = h;
        this.ct = p;
        this.il = Qk;
        this.jt = this.Vk = 0;
        this.zj = this.Iw = this.Jw = m;
        this.Bm = {};
        this.Xo = p;
        this.be = this.Ei = this.Pq = m
    }
    v.H("TextBlock", qa);
    v.pa(qa, P);
    qa.prototype.jb = function(a) {
        P.prototype.jb.call(this, a);
        a.nd = this.nd;
        a.uc = this.uc;
        a.pi = this.pi;
        a.Ie = this.Ie;
        a.rp = this.rp;
        a.ct = this.ct;
        a.il = this.il;
        a.Vk = this.Vk;
        a.jt = this.jt;
        a.Jw = this.Jw;
        a.Iw = this.Iw;
        a.zj = this.zj;
        a.Bm = this.Bm;
        a.Xo = this.Xo;
        a.Pq = this.Pq;
        a.Ei = this.Ei;
        a.be = this.be
    };
    qa.prototype.toString = function() {
        return 22 < this.nd.length ? 'TextBlock("' + this.nd.substring(0, 20) + '"...)': 'TextBlock("' + this.nd + '")'
    };
    var Rk;
    qa.None = Rk = v.l(qa, "None", 0);
    var Sk;
    qa.WrapFit = Sk = v.l(qa, "WrapFit", 1);
    var Qk;
    qa.WrapDesiredSize = Qk = v.l(qa, "WrapDesiredSize", 2);
    qa.prototype.J = function() {
        P.prototype.J.call(this);
        this.zj = this.Iw = this.Jw = m
    };
    v.a(qa, "font", qa.prototype.font);
    v.defineProperty(qa, {
        font: "font"
    },
    s("pi"),
    function(a) {
        var b = this.pi;
        b !== a && (t && v.e(a, "string", qa, "font"), this.pi = a, this.J(), this.d("font", b, a))
    });
    v.a(qa, "text", qa.prototype.text);
    v.defineProperty(qa, {
        text: "text"
    },
    s("nd"),
    function(a) {
        var b = this.nd,
        a = a !== m && a !== f ? a.toString() : "";
        b !== a && (this.nd = a, this.J(), this.d("text", b, a))
    });
    v.a(qa, "textAlign", qa.prototype.textAlign);
    v.defineProperty(qa, {
        textAlign: "textAlign"
    },
    s("Ie"),
    function(a) {
        var b = this.Ie;
        b !== a && (t && v.e(a, "string", qa, "textAlign"), "start" === a || "end" === a || "left" === a || "right" === a || "center" === a ? (this.Ie = a, hj(this), this.d("textAlign", b, a)) : v.ha(a, '"start", "end", "left", "right", or "center"', qa, "textAlign"))
    });
    v.m(qa, {
        ua: "naturalBounds"
    },
    function() {
        if (!this.qc.aa()) {
            var a = Tk(this, this.nd, this.font, {},
            999999).width,
            b = Uk(this, a, {}),
            c = this.ma;
            isNaN(c.width) || (a = c.width);
            isNaN(c.height) || (b = c.height);
            ub(this.qc, a, b)
        }
        return this.qc
    });
    v.a(qa, "isMultiline", qa.prototype.Pu);
    v.defineProperty(qa, {
        Pu: "isMultiline"
    },
    s("rp"),
    function(a) {
        var b = this.rp;
        b !== a && (t && v.e(a, "boolean", qa, "isMultiline"), this.rp = a, this.J(), this.d("isMultiline", b, a))
    });
    v.a(qa, "wrap", qa.prototype.lz);
    v.defineProperty(qa, {
        lz: "wrap"
    },
    s("il"),
    function(a) {
        var b = this.il;
        b !== a && (t && v.Va(a, qa, qa, "wrap"), this.il = a, this.J(), this.d("wrap", b, a))
    });
    v.a(qa, "stroke", qa.prototype.stroke);
    v.defineProperty(qa, {
        stroke: "stroke"
    },
    s("uc"),
    function(a) {
        var b = this.uc;
        if (b !== a && (a === m || "string" === typeof a || a instanceof Ke)) a instanceof Ke && a.freeze(),
        this.uc = a,
        hj(this),
        this.d("stroke", b, a)
    });
    v.m(qa, {
        FJ: "lineCount"
    },
    s("Vk"));
    v.a(qa, "editable", qa.prototype.Au);
    v.defineProperty(qa, {
        Au: "editable"
    },
    s("Xo"),
    function(a) {
        var b = this.Xo;
        b !== a && (t && v.e(a, "boolean", qa, "editable"), this.Xo = a, this.d("editable", b, a))
    });
    v.a(qa, "textEditor", qa.prototype.ez);
    v.defineProperty(qa, {
        ez: "textEditor"
    },
    s("Pq"),
    function(a) {
        var b = this.Pq;
        b !== a && (a instanceof HTMLElement || v.g("textEditor must be an HTMLElement"), this.Pq = a, this.d("textEditor", b, a))
    });
    v.a(qa, "errorFunction", qa.prototype.qr);
    v.defineProperty(qa, {
        qr: "errorFunction"
    },
    s("be"),
    function(a) {
        var b = this.be;
        b !== a && (a !== m && v.e(a, "function", qa, "errorFunction"), this.be = a, this.d("errorFunction", b, a))
    });
    qa.prototype.rn = function(a, b) {
        if (this.uc !== m && 0 !== this.nd.length) {
            var c = this.pi;
            if (c !== m) {
                var d = this.ua.width,
                e = nh(this, c);
                a.Qv !== c && (a.font = c, a.Qv = c);
                a.textAlign = this.Ie;
                kj(this, a, this.uc, h);
                this.ct && (kj(this, a, this.uc, p), a.lineWidth = 0.05 * e);
                var c = this.Bm,
                g = 0,
                i = p,
                j = this.ge.Bb(new D(0, 0)),
                k = this.ge.Bb(new D(0, e)),
                j = j.Ni(k),
                k = b.scale;
                3 > j * k * k && (i = h);
                j = c.Ph.length;
                for (k = 0; k < j; k++) {
                    var l = c.Ph[k],
                    n = c.ll[k];
                    l > d && (l = d);
                    var r = a,
                    q = g,
                    u = e,
                    x = i,
                    z = 0;
                    "start" === this.Ie || "left" === this.Ie ? z = 0 : "end" === this.Ie || "right" === this.Ie ? z = d: "center" === this.Ie ? z = d / 2 : v.g("textAlign must be start, end, left, right, or center");
                    x ? r.fillRect(0 + z - l / 2, q + 0.25 * u, l, 1) : (r.fillText(n, 0 + z, q + u - 0.25 * u), this.ct && ("end" === this.Ie || "right" === this.Ie ? z -= l: "center" === this.Ie && (z -= l / 2), r.moveTo(0 + z, q + u - 0.2 * u), r.lineTo(0 + z + l, q + u - 0.2 * u), r.stroke()));
                    g += e
                }
            }
        }
    };
    qa.prototype.Mr = function(a, b, c, d) {
        var e = {},
        g = 0,
        i = 0;
        if (isNaN(this.ma.width)) {
            g = this.nd;
            if (0 === g.length) g = 0;
            else if (this.Pu) {
                for (var j = i = 0,
                k = p,
                l = {
                    mh: 0
                }; ! k;) {
                    var n = Vk(g, j, l); - 1 === n && (n = g.length, k = h);
                    j = Wk(g.substr(j, n - j).replace(/^\s+|\s+$/g, ""), this.pi);
                    j > i && (i = j);
                    j = l.mh
                }
                g = i
            } else i = Vk(g, 0, {}),
            0 <= i && (g = g.substr(0, i)),
            g = j = Wk(g, this.pi);
            g = Math.min(g, a / this.scale)
        } else g = this.ma.width;
        this.Y && (g = Math.min(g, this.Y.Fd.width), g = Math.max(g, this.Y.Xd.width));
        i = Uk(this, g, e);
        i = isNaN(this.ma.height) ? Math.min(i, b / this.scale) : this.ma.height;
        if (this.lz === Sk || isNaN(this.ma.width)) g = e.ei;
        g = Math.max(c, g);
        i = Math.max(d, i);
        ub(this.qc, g, i);
        Zi(this, 0, 0, g, i);
        this.Bm = e
    };
    qa.prototype.Hi = function(a, b, c, d) {
        ej(this, a, b, c, d)
    };
    function Tk(a, b, c, d, e) {
        b = b.replace(/^\s+|\s+$/g, "");
        d.ei === f && (d.ei = 0);
        d.Ph === f && (d.Ph = []);
        d.ll === f && (d.ll = []);
        var g = 0,
        i;
        if (a.il === Rk) return d.mh = 1,
        d.ei = Wk(b, c),
        d.Ph.push(d.ei),
        d.ll.push(b),
        new sb(d.ei, nh(a, c));
        a.zj === m && (a.zj = nh(a, c));
        var a = a.zj,
        j = b,
        k = 0;
        0 === j.length && (k = 1, d.Ph.push(0), d.ll.push(j));
        for (; 0 < j.length;) {
            for (var l = Xk(j), j = j.substr(l.length); Wk(l, c) > e;) {
                var n = 1,
                b = Wk(l.substr(0, n), c);
                for (i = 0; b <= e;) n++,
                i = b,
                b = Wk(l.substr(0, n), c);
                1 === n ? (d.Ph[k] = b, g = Math.max(g, b)) : (d.Ph[k] = i, g = Math.max(g, i));
                n--;
                1 > n && (n = 1);
                d.ll[k] = l.substr(0, n);
                k++;
                l = l.substr(n)
            }
            i = Xk(j);
            for (b = Wk(l + i, c); 0 < i.length && b <= e;) l += i,
            j = j.substr(i.length),
            i = Xk(j),
            b = Wk((l + i).replace(/^\s+|\s+$/g, ""), c);
            l = l.replace(/^\s+|\s+$/g, "");
            "" !== l && (0 === i.length ? (d.Ph.push(b), g = Math.max(g, b)) : (i = Wk(l, c), d.Ph.push(i), g = Math.max(g, i)), d.ll.push(l), k++)
        }
        d.mh = k;
        d.ei = Math.max(d.ei, g);
        return new sb(d.ei, a * d.mh)
    }
    function Xk(a) {
        for (var b = a.length,
        c = 0; c < b && " " !== a.charAt(c);) c++;
        for (; c < b && " " === a.charAt(c);) c++;
        return c >= b ? a: a.substr(0, c)
    }
    function Wk(a, b) {
        v.St !== b && (v.Rt.font = b, v.St = b);
        return v.Rt.measureText(a).width
    }
    function nh(a, b) {
        if (a.zj !== m) return a.zj;
        v.St !== b && (v.Rt.font = b, v.St = b);
        var c = 0;
        v.sw[b] !== f && 5E3 > v.Qz ? c = v.sw[b] : (c = 1.3 * v.Rt.measureText("M").width, v.sw[b] = c, v.Qz++);
        return c
    }
    function Vk(a, b, c) {
        c.mh === f && (c.mh = 0);
        var d = a.indexOf("\r", b); - 1 === d && (d = a.indexOf("\n", b));
        0 <= d && (c.mh = "\r" === a[d] && d + 1 < a.length && "\n" === a[d + 1] ? d + 2 : d + 1);
        return d
    }
    function Uk(a, b, c) {
        var d = a.nd,
        e = a.pi,
        g = nh(a, e);
        if (0 === d.length) return c.ei = 0,
        a.Vk = 1,
        g;
        if (!a.Pu) {
            var i = Vk(d, 0, {});
            0 <= i && (d = d.substr(0, i))
        }
        for (var j = i = 0,
        k = 0,
        l = -1,
        n = {
            mh: 0
        },
        r = p; ! r;) l = Vk(d, k, n),
        -1 === l && (l = d.length, r = h),
        k <= l && (k = d.substr(k, l - k), a.il !== Rk ? (c.mh = 0, k = Tk(a, k, e, c, b), i += k.height, j += c.mh) : (Tk(a, k, e, c, Infinity), i += g, j++)),
        k = n.mh;
        a.Vk = j;
        return a.jt = i
    }
    qa.prototype.mg = function() {
        P.prototype.mg.call(this);
        var a = this.b;
        if (a !== m) {
            var b = this.Bm;
            b !== m && (Mi(a, "sizeArray", b.Ph), Mi(a, "textArray", b.ll), Mi(a, "font", this.font), Mi(a, "stroke", this.stroke), Mi(a, "textAlign", this.textAlign))
        }
    };
    v.a(qa, "textValidation", qa.prototype.gs);
    v.defineProperty(qa, {
        gs: "textValidation"
    },
    s("Ei"),
    function(a) {
        var b = this.Ei;
        b !== a && (a !== m && v.e(a, "function", qa, "textValidation"), this.Ei = a, this.d("textValidation", b, a))
    });
    function Nj() {
        P.call(this);
        this.sg = m;
        this.Iq = "";
        this.Di = (new E(NaN, NaN, NaN, NaN)).freeze();
        this.rm = Qd;
        this.Um = this.be = m;
        this.Xs = this.Oj = p
    }
    v.H("Picture", Nj);
    v.pa(Nj, P);
    Nj.prototype.jb = function(a) {
        P.prototype.jb.call(this, a);
        a.element = this.sg;
        a.Iq = this.Iq;
        a.Di.Ra(this.Di);
        a.rm = this.rm;
        a.be = this.be
    };
    Nj.prototype.toString = function() {
        return "Picture(" + this.source + ")#" + v.kc(this)
    };
    v.a(Nj, "element", Nj.prototype.element);
    v.defineProperty(Nj, {
        element: "element"
    },
    s("sg"),
    function(a) {
        var b = this.sg;
        if (b !== a) {
            a instanceof HTMLImageElement || (a instanceof HTMLVideoElement || a instanceof HTMLCanvasElement) || v.g("Picture.element must be an instance of Image, Canvas, or Video.");
            var c = this;
            a instanceof HTMLCanvasElement ? this.Xs = h: (this.Xs = p, a.onerror = function(a) {
                c.be !== m && c.be(c, a)
            });
            this.sg = a;
            this.d("element", b, a);
            a.complete === h || a.complete === f ? (this.Oj = h, this.ma.aa() || (this.ac = p, this.J())) : (v.sx.push(this), v.Gt === m && (v.Gt = setInterval(function() {
                for (var a = [], b = v.sx, c = b.length, i = 0; i < c; i++) {
                    var j = b[i];
                    Yk(j) || a.push(j)
                }
                0 === a.length && (clearInterval(v.Gt), v.Gt = m);
                v.sx = a
            },
            600)))
        }
    });
    function Yk(a) {
        var b = a.sg;
        if (!b) return h;
        if (!b.complete) return p;
        if (a.Oj === h) return h;
        a.Oj = h;
        if (a.b) a.ma.aa() || (a.ac = p, a.J(), a.b.ai()),
        xh(a.b);
        else {
            var a = v.Jz,
            c = a.length;
            if (0 === c) for (var c = document.getElementsByTagName("canvas"), d = c.length, b = 0; b < d; b++) {
                var e = c[b];
                e.parentElement && e.parentElement.L && a.push(e.parentElement.L)
            }
            c = a.length;
            for (b = 0; b < c; b++) xh(a[b])
        }
        return h
    }
    function Zk(a) {
        var b = document.createElement("canvas").getContext("2d");
        b.drawImage(a.sg, 0, 0);
        try {
            b.getImageData(0, 0, 1, 1),
            a.Um = p
        } catch(c) {
            a.Um = h
        }
    }
    v.a(Nj, "source", Nj.prototype.source);
    v.defineProperty(Nj, {
        source: "source"
    },
    s("Iq"),
    function(a) {
        var b = this.Iq;
        if (b !== a) if (v.e(a, "string", Nj, "source"), this.Iq = a, this.d("source", b, a), b = v.cE, b[a] !== f) this.element = b[a];
        else {
            var c = new Image;
            c.src = a;
            this.element = b[a] = c
        }
    });
    v.a(Nj, "sourceRect", Nj.prototype.Af);
    v.defineProperty(Nj, {
        Af: "sourceRect"
    },
    s("Di"),
    function(a) {
        var b = this.Di;
        b.u(a) || (v.c(a, E, Nj, "sourceRect"), this.Di = a = a.B(), this.d("sourceRect", b, a))
    });
    v.a(Nj, "imageStretch", Nj.prototype.eC);
    v.defineProperty(Nj, {
        eC: "imageStretch"
    },
    s("rm"),
    function(a) {
        var b = this.rm;
        b !== a && (v.Va(a, P, Nj, "imageStretch"), this.rm = a, this.d("imageStretch", b, a))
    });
    v.a(Nj, "errorFunction", Nj.prototype.qr);
    v.defineProperty(Nj, {
        qr: "errorFunction"
    },
    s("be"),
    function(a) {
        var b = this.be;
        if (b !== a) {
            a !== m && v.e(a, "function", Nj, "errorFunction");
            this.be = a;
            if (this.sg) {
                var c = this;
                this.sg.onerror = function(a) {
                    c.be !== m && c.be(c, a)
                }
            }
            this.d("errorFunction", b, a)
        }
    });
    Nj.prototype.rn = function(a, b) {
        if (!b.To && (this.Um === m && Zk(this), this.Um)) return;
        var c = this.sg;
        if (c !== m) {
            var d = c.src; (d === m || "" === d) && v.g("Element has no source attribute: " + c);
            var d = this.ua,
            e = 0,
            g = 0,
            i = this.Xs,
            j = i ? +c.width: c.naturalWidth,
            i = i ? +c.height: c.naturalHeight;
            if (! (0 === j || 0 === i)) {
                j === f && c.videoWidth && (j = c.videoWidth || d.width);
                i === f && c.videoHeight && (i = c.videoHeight || d.height);
                this.Af.aa() && (e = this.Di.x, g = this.Di.y, j = this.Di.width, i = this.Di.height);
                var k = j,
                l = i,
                n = this.rm;
                switch (n) {
                case Wi:
                    if (this.Af.aa()) break;
                    e += Math.max((k - d.width) / 2, 0);
                    g += Math.max((l - d.height) / 2, 0);
                    j = Math.min(d.width, k);
                    i = Math.min(d.height, l);
                    break;
                case Qd:
                    k = d.width;
                    l = d.height;
                    break;
                case Rg:
                case Sg:
                    n === Rg ? (n = Math.min(d.height / l, d.width / k), k *= n, l *= n) : n === Sg && (n = Math.max(d.height / l, d.width / k), k *= n, l *= n, e += (k - d.width) / 2, g += (l - d.height) / 2, j *= 1 / (k / d.width), i *= 1 / (l / d.height), k = d.width, l = d.height)
                }
                a.drawImage(c, e, g, j, i, Math.max((d.width - k) / 2, 0), Math.max((d.height - l) / 2, 0), Math.min(d.width, k), Math.min(d.height, l))
            }
        }
    };
    v.m(Nj, {
        ua: "naturalBounds"
    },
    s("qc"));
    Nj.prototype.Mr = function(a, b, c, d) {
        var e = this.ma,
        g = bj(this),
        i = this.sg,
        j = this.Xs;
        if (j || !this.Oj && i && i.complete) this.Oj = h;
        i === m && (b = a = 0);
        g !== Qd && g !== Yi ? isFinite(e.width) ? a = e.width: i !== m && this.Oj !== p && (a = this.Af.aa() ? this.Af.width: j ? +i.width: i.naturalWidth) : (isFinite(a) || (a = this.Af.aa() ? this.Af.width: j ? +i.width: i.naturalWidth), c = 0);
        g !== Qd && g !== Xi ? isFinite(e.height) ? b = e.height: i !== m && this.Oj !== p && (b = this.Af.aa() ? this.Af.height: j ? +i.height: i.naturalHeight) : (isFinite(b) || (b = this.Af.aa() ? this.Af.height: j ? +i.height: i.naturalHeight), d = 0);
        e = this.Fd;
        g = this.Xd;
        c = Math.max(c / this.scale, g.width);
        d = Math.max(d / this.scale, g.height);
        a = Math.min(e.width, a);
        b = Math.min(e.height, b);
        a = Math.max(c, a);
        b = Math.max(d, b);
        i !== m && !i.complete && (isFinite(a) || (a = 0), isFinite(b) || (b = 0));
        ub(this.qc, a, b);
        Zi(this, 0, 0, a, b)
    };
    Nj.prototype.Hi = function(a, b, c, d) {
        ej(this, a, b, c, d)
    };
    Nj.prototype.mg = function() {
        P.prototype.mg.call(this);
        var a = this.b;
        if (a !== m) {
            Mi(a, "source", this.source);
            Mi(a, "imageStretch", this.eC);
            this.Af.aa() && Mi(a, "sourceRect", this.Af);
            var b, c;
            this instanceof Nj && this.element !== m && (c = a.sh.ca(v.kc(this.element)));
            b = "number" === typeof c ? c: -1;
            if ( - 1 < b) a = a.rg,
            a.add(","),
            La(a),
            a.add('"base64": { "class":"ref", "id":' + b + " }");
            else {
                c = this.sg;
                b = c.naturalWidth;
                var d = c.naturalHeight;
                this.Um === m && Zk(this);
                if (! (this.Oj === p || this.Um === h || 0 === b || 0 === d)) {
                    b === f && c.videoWidth && (b = c.videoWidth);
                    d === f && c.videoHeight && (d = c.videoHeight);
                    var e = document.createElement("canvas");
                    e.width = b;
                    e.height = d;
                    e.getContext("2d").drawImage(c, 0, 0);
                    c = e.toDataURL();
                    b = -1;
                    this instanceof Nj && this.element !== m && (v.Dn(this.element), b = a.sh.count, a.sh.add(v.kc(this.element), b)); - 1 < b ? (a = a.rg, a.add(","), La(a), a.add('"base64": { "id":' + b + ', "value":"' + c + '" }')) : Mi(a, "base64", c)
                }
            }
        }
    };
    function J() {
        this.k = new Hd;
        this.fc = m
    }
    function K(a, b, c, d, e) {
        a.k === m && v.g("StreamGeometryContext has been closed");
        e !== f && e === h ? (a.fc === m && v.g("Need to call beginFigure first"), d = new re(de), d.N = b, d.O = c, a.fc.gb.add(d)) : (a.fc = new Pd, a.fc.Ca = b, a.fc.Da = c, a.fc.Gr = d, a.k.Kb.add(a.fc))
    }
    function ce(a) {
        a.k === m && v.g("StreamGeometryContext has been closed");
        a.fc === m && v.g("Need to call beginFigure first");
        var b = a.fc.gb.length;
        0 < b && a.fc.gb.i[b - 1].close()
    }
    function $k(a) {
        a.k === m && v.g("StreamGeometryContext has been closed");
        a.fc === m && v.g("Need to call beginFigure first");
        a.fc.Dl = p
    }
    J.prototype.moveTo = function(a, b, c) {
        this.k === m && v.g("StreamGeometryContext has been closed");
        this.fc === m && v.g("Need to call beginFigure first");
        var d = new re(de);
        d.N = a;
        d.O = b;
        c && d.close();
        this.fc.gb.add(d)
    };
    J.prototype.lineTo = function(a, b, c) {
        this.k === m && v.g("StreamGeometryContext has been closed");
        this.fc === m && v.g("Need to call beginFigure first");
        var d = new re($d);
        d.N = a;
        d.O = b;
        c && d.close();
        this.fc.gb.add(d)
    };
    function L(a, b, c, d, e, g, i, j) {
        a.k === m && v.g("StreamGeometryContext has been closed");
        a.fc === m && v.g("Need to call beginFigure first");
        var k = new re(ee);
        k.zc = b;
        k.rd = c;
        k.qk = d;
        k.rk = e;
        k.N = g;
        k.O = i;
        j && k.close();
        a.fc.gb.add(k)
    }
    function be(a, b, c, d, e) {
        a.k === m && v.g("StreamGeometryContext has been closed");
        a.fc === m && v.g("Need to call beginFigure first");
        var g = new re(me);
        g.zc = b;
        g.rd = c;
        g.N = d;
        g.O = e;
        a.fc.gb.add(g)
    }
    J.prototype.arcTo = function(a, b, c, d, e, g, i) {
        this.k === m && v.g("StreamGeometryContext has been closed");
        this.fc === m && v.g("Need to call beginFigure first");
        var j = new re(ne);
        j.fi = a;
        j.dj = b;
        j.za = c;
        j.Aa = d;
        j.Il = e;
        g && (j.Xn = g);
        i && j.close();
        this.fc.gb.add(j)
    };
    function al(a, b, c, d, e, g, i, j, k, l, n, r, q, u) {
        var x = 1 - k,
        a = a * x + c * k,
        b = b * x + d * k,
        c = c * x + e * k,
        d = d * x + g * k,
        e = e * x + i * k,
        g = g * x + j * k,
        j = a * x + c * k,
        i = b * x + d * k,
        c = c * x + e * k,
        d = d * x + g * k;
        l.x = a;
        l.y = b;
        n.x = j;
        n.y = i;
        r.x = j * x + c * k;
        r.y = i * x + d * k;
        q.x = c;
        q.y = d;
        u.x = e;
        u.y = g
    }
    function bl(a) {
        var a = cl(a),
        b = [];
        b[0] = a[0];
        for (var c = 1,
        d = 1; c < a.length; c += 2, d += 3) b[d] = a[c],
        b[d + 1] = a[c],
        b[d + 2] = a[c + 1];
        return b
    }
    function cl(a) {
        for (var b = dl(a), c = [], d = Math.floor(b.length / 2), e = b.length - 1, a = 0 === a % 2 ? 2 : 1, g = 0; g < e; g++) {
            var i = b[g],
            j = b[g + 1],
            k = b[(d + g - 1) % e],
            l = b[(d + g + a) % e];
            c[2 * g] = i;
            c[2 * g + 1] = el(i.x, i.y, k.x, k.y, j.x, j.y, l.x, l.y)
        }
        c[c.length] = c[0];
        return c
    }
    function el(a, b, c, d, e, g, i, j) {
        c = a - c;
        i = e - i;
        0 === c || 0 === i ? 0 === c ? (i = (g - j) / i, j = a, e = i * j + (g - i * e)) : (d = (b - d) / c, j = e, e = d * j + (b - d * a)) : (d = (b - d) / c, i = (g - j) / i, a = b - d * a, j = (g - i * e - a) / (d - i), e = d * j + a);
        return new D(j, e)
    }
    function dl(a) {
        for (var b = [], c = 1.5 * Math.PI, d = 0, e = 0; e < a; e++) d = 2 * Math.PI / a * e + c,
        b[e] = new D(0.5 + 0.5 * Math.cos(d), 0.5 + 0.5 * Math.sin(d));
        b.push(b[0]);
        return b
    }
    var Kk = {
        None: "Rectangle",
        Rectangle: function(a, b, c) {
            a = new Hd;
            a.type = Sd;
            a.Ca = 0;
            a.Da = 0;
            a.N = b;
            a.O = c;
            return a
        },
        Circle: function(a, b, c) {
            a = new Hd;
            a.Pb = Rg;
            a.type = Td;
            a.Ca = 0;
            a.Da = 0;
            a.N = b;
            a.O = c;
            a.n = new F(0.156, 0.156);
            a.o = new F(0.844, 0.844);
            return a
        },
        Connector: "Ellipse",
        Ellipse: function(a, b, c) {
            a = new Hd;
            a.type = Td;
            a.Ca = 0;
            a.Da = 0;
            a.N = b;
            a.O = c;
            a.n = new F(0.156, 0.156);
            a.o = new F(0.844, 0.844);
            return a
        },
        TriangleRight: function(a, b, c) {
            var a = new Hd,
            d = new Pd,
            e = new re;
            e.N = b;
            e.O = 0.5 * c;
            d.gb.add(e);
            b = new re;
            b.N = 0;
            b.O = c;
            d.gb.add(b.close());
            a.Kb.add(d);
            a.n = new F(0, 0.25);
            a.o = new F(0.5, 0.75);
            return a
        },
        TriangleDown: function(a, b, c) {
            var a = new Hd,
            d = new Pd,
            e = new re;
            e.N = b;
            e.O = 0;
            d.gb.add(e);
            e = new re;
            e.N = 0.5 * b;
            e.O = c;
            d.gb.add(e.close());
            a.Kb.add(d);
            a.n = new F(0.25, 0);
            a.o = new F(0.75, 0.5);
            return a
        },
        TriangleLeft: function(a, b, c) {
            var a = new Hd,
            d = new Pd;
            d.Ca = b;
            d.Da = c;
            var e = new re;
            e.N = 0;
            e.O = 0.5 * c;
            d.gb.add(e);
            c = new re;
            c.N = b;
            c.O = 0;
            d.gb.add(c.close());
            a.Kb.add(d);
            a.n = new F(0.5, 0.25);
            a.o = new F(1, 0.75);
            return a
        },
        TriangleUp: function(a, b, c) {
            var a = new Hd,
            d = new Pd;
            d.Ca = b;
            d.Da = c;
            var e = new re;
            e.N = 0;
            e.O = c;
            d.gb.add(e);
            c = new re;
            c.N = 0.5 * b;
            c.O = 0;
            d.gb.add(c.close());
            a.Kb.add(d);
            a.n = new F(0.25, 0.5);
            a.o = new F(0.75, 1);
            return a
        },
        Line1: function(a, b, c) {
            a = new Hd;
            a.type = Rd;
            a.Ca = 0;
            a.Da = 0;
            a.N = b;
            a.O = c;
            return a
        },
        Line2: function(a, b, c) {
            a = new Hd;
            a.type = Rd;
            a.Ca = b;
            a.Da = 0;
            a.N = 0;
            a.O = c;
            return a
        },
        MinusLine: "LineH",
        LineH: function(a, b, c) {
            a = new Hd;
            a.type = Rd;
            a.Ca = 0;
            a.Da = c / 2;
            a.N = b;
            a.O = c / 2;
            return a
        },
        LineV: function(a, b, c) {
            a = new Hd;
            a.type = Rd;
            a.Ca = b / 2;
            a.Da = 0;
            a.N = b / 2;
            a.O = c;
            return a
        },
        Curve1: function(a, b, c) {
            a = new J;
            K(a, 0, 0, p);
            L(a, Nc * b, 0, 1 * b, (1 - Nc) * c, b, c);
            return a.k
        },
        Curve2: function(a, b, c) {
            a = new J;
            K(a, 0, 0, p);
            L(a, 0, Nc * c, (1 - Nc) * b, c, b, c);
            return a.k
        },
        Curve3: function(a, b, c) {
            a = new J;
            K(a, 1 * b, 0, p);
            L(a, 1 * b, Nc * c, Nc * b, 1 * c, 0, 1 * c);
            return a.k
        },
        Curve4: function(a, b, c) {
            a = new J;
            K(a, 1 * b, 0, p);
            L(a, (1 - Nc) * b, 0, 0, (1 - Nc) * c, 0, 1 * c);
            return a.k
        },
        Alternative: "Triangle",
        Merge: "Triangle",
        Triangle: function(a, b, c) {
            a = new J;
            K(a, 0.5 * b, 0 * c, h);
            a.lineTo(0 * b, 1 * c);
            a.lineTo(1 * b, 1 * c, h);
            b = a.k;
            b.n = new F(0.25, 0.5);
            b.o = new F(0.75, 1);
            return b
        },
        Decision: "Diamond",
        Diamond: function(a, b, c) {
            a = new J;
            K(a, 0.5 * b, 0, h);
            a.lineTo(0, 0.5 * c);
            a.lineTo(0.5 * b, 1 * c);
            a.lineTo(1 * b, 0.5 * c, h);
            b = a.k;
            b.n = new F(0.25, 0.25);
            b.o = new F(0.75, 0.75);
            return b
        },
        Pentagon: function(a, b, c) {
            var a = dl(5),
            d = new J;
            K(d, a[0].x * b, a[0].y * c, h);
            for (var e = 1; 5 > e; e++) d.lineTo(a[e].x * b, a[e].y * c);
            ce(d);
            b = d.k;
            b.n = new F(0.2, 0.22);
            b.o = new F(0.8, 0.9);
            return b
        },
        DataTransmission: "Hexagon",
        Hexagon: function(a, b, c) {
            var a = dl(6),
            d = new J;
            K(d, a[0].x * b, a[0].y * c, h);
            for (var e = 1; 6 > e; e++) d.lineTo(a[e].x * b, a[e].y * c);
            ce(d);
            b = d.k;
            b.n = new F(0.07, 0.25);
            b.o = new F(0.93, 0.75);
            return b
        },
        Heptagon: function(a, b, c) {
            var a = dl(7),
            d = new J;
            K(d, a[0].x * b, a[0].y * c, h);
            for (var e = 1; 7 > e; e++) d.lineTo(a[e].x * b, a[e].y * c);
            ce(d);
            b = d.k;
            b.n = new F(0.2, 0.15);
            b.o = new F(0.8, 0.85);
            return b
        },
        Octagon: function(a, b, c) {
            var a = dl(8),
            d = new J;
            K(d, a[0].x * b, a[0].y * c, h);
            for (var e = 1; 8 > e; e++) d.lineTo(a[e].x * b, a[e].y * c);
            ce(d);
            b = d.k;
            b.n = new F(0.15, 0.15);
            b.o = new F(0.85, 0.85);
            return b
        },
        Nonagon: function(a, b, c) {
            var a = dl(9),
            d = new J;
            K(d, a[0].x * b, a[0].y * c, h);
            for (var e = 1; 9 > e; e++) d.lineTo(a[e].x * b, a[e].y * c);
            ce(d);
            b = d.k;
            b.n = new F(0.17, 0.13);
            b.o = new F(0.82, 0.82);
            return b
        },
        Decagon: function(a, b, c) {
            var a = dl(10),
            d = new J;
            K(d, a[0].x * b, a[0].y * c, h);
            for (var e = 1; 10 > e; e++) d.lineTo(a[e].x * b, a[e].y * c);
            ce(d);
            b = d.k;
            b.n = new F(0.16, 0.16);
            b.o = new F(0.84, 0.84);
            return b
        },
        Dodecagon: function(a, b, c) {
            var a = dl(12),
            d = new J;
            K(d, a[0].x * b, a[0].y * c, h);
            for (var e = 1; 12 > e; e++) d.lineTo(a[e].x * b, a[e].y * c);
            ce(d);
            b = d.k;
            b.n = new F(0.16, 0.16);
            b.o = new F(0.84, 0.84);
            return b
        },
        FivePointedStar: function(a, b, c) {
            var a = cl(5),
            d = new J;
            K(d, a[0].x * b, a[0].y * c, h);
            for (var e = 1; 10 > e; e++) d.lineTo(a[e].x * b, a[e].y * c);
            ce(d);
            b = d.k;
            b.n = new F(0.312, 0.383);
            b.o = new F(0.693, 0.765);
            return b
        },
        SixPointedStar: function(a, b, c) {
            var a = cl(6),
            d = new J;
            K(d, a[0].x * b, a[0].y * c, h);
            for (var e = 1; 12 > e; e++) d.lineTo(a[e].x * b, a[e].y * c);
            ce(d);
            b = d.k;
            b.n = new F(0.17, 0.251);
            b.o = new F(0.833, 0.755);
            return b
        },
        SevenPointedStar: function(a, b, c) {
            var a = cl(7),
            d = new J;
            K(d, a[0].x * b, a[0].y * c, h);
            for (var e = 1; 14 > e; e++) d.lineTo(a[e].x * b, a[e].y * c);
            ce(d);
            b = d.k;
            b.n = new F(0.363, 0.361);
            b.o = new F(0.641, 0.709);
            return b
        },
        EightPointedStar: function(a, b, c) {
            var a = cl(8),
            d = new J;
            K(d, a[0].x * b, a[0].y * c, h);
            for (var e = 1; 16 > e; e++) d.lineTo(a[e].x * b, a[e].y * c);
            ce(d);
            b = d.k;
            b.n = new F(0.252, 0.255);
            b.o = new F(0.75, 0.75);
            return b
        },
        NinePointedStar: function(a, b, c) {
            var a = cl(9),
            d = new J;
            K(d, a[0].x * b, a[0].y * c, h);
            for (var e = 1; 18 > e; e++) d.lineTo(a[e].x * b, a[e].y * c);
            ce(d);
            b = d.k;
            b.n = new F(0.355, 0.361);
            b.o = new F(0.645, 0.651);
            return b
        },
        TenPointedStar: function(a, b, c) {
            var a = cl(10),
            d = new J;
            K(d, a[0].x * b, a[0].y * c, h);
            for (var e = 1; 20 > e; e++) d.lineTo(a[e].x * b, a[e].y * c);
            ce(d);
            b = d.k;
            b.n = new F(0.281, 0.261);
            b.o = new F(0.723, 0.748);
            return b
        },
        FivePointedBurst: function(a, b, c) {
            var a = bl(5),
            d = new J;
            K(d, a[0].x * b, a[0].y * c, h);
            for (var e = 1; e < a.length; e += 3) L(d, a[e].x * b, a[e].y * c, a[e + 1].x * b, a[e + 1].y * c, a[e + 2].x * b, a[e + 2].y * c);
            ce(d);
            b = d.k;
            b.n = new F(0.312, 0.383);
            b.o = new F(0.693, 0.765);
            return b
        },
        SixPointedBurst: function(a, b, c) {
            var a = bl(6),
            d = new J;
            K(d, a[0].x * b, a[0].y * c, h);
            for (var e = 1; e < a.length; e += 3) L(d, a[e].x * b, a[e].y * c, a[e + 1].x * b, a[e + 1].y * c, a[e + 2].x * b, a[e + 2].y * c);
            ce(d);
            b = d.k;
            b.n = new F(0.17, 0.251);
            b.o = new F(0.833, 0.755);
            return b
        },
        SevenPointedBurst: function(a, b, c) {
            var a = bl(7),
            d = new J;
            K(d, a[0].x * b, a[0].y * c, h);
            for (var e = 1; e < a.length; e += 3) L(d, a[e].x * b, a[e].y * c, a[e + 1].x * b, a[e + 1].y * c, a[e + 2].x * b, a[e + 2].y * c);
            ce(d);
            b = d.k;
            b.n = new F(0.363, 0.361);
            b.o = new F(0.641, 0.709);
            return b
        },
        EightPointedBurst: function(a, b, c) {
            var a = bl(8),
            d = new J;
            K(d, a[0].x * b, a[0].y * c, h);
            for (var e = 1; e < a.length; e += 3) L(d, a[e].x * b, a[e].y * c, a[e + 1].x * b, a[e + 1].y * c, a[e + 2].x * b, a[e + 2].y * c);
            ce(d);
            b = d.k;
            b.n = new F(0.252, 0.255);
            b.o = new F(0.75, 0.75);
            return b
        },
        NinePointedBurst: function(a, b, c) {
            var a = bl(9),
            d = new J;
            K(d, a[0].x * b, a[0].y * c, h);
            for (var e = 1; e < a.length; e += 3) L(d, a[e].x * b, a[e].y * c, a[e + 1].x * b, a[e + 1].y * c, a[e + 2].x * b, a[e + 2].y * c);
            ce(d);
            b = d.k;
            b.n = new F(0.355, 0.361);
            b.o = new F(0.645, 0.651);
            return b
        },
        TenPointedBurst: function(a, b, c) {
            var a = bl(10),
            d = new J;
            K(d, a[0].x * b, a[0].y * c, h);
            for (var e = 1; e < a.length; e += 3) L(d, a[e].x * b, a[e].y * c, a[e + 1].x * b, a[e + 1].y * c, a[e + 2].x * b, a[e + 2].y * c);
            ce(d);
            b = d.k;
            b.n = new F(0.281, 0.261);
            b.o = new F(0.723, 0.748);
            return b
        },
        Cloud: function(a, b, c) {
            a = new J;
            K(a, 0.08034461 * b, 0.1944299 * c, h);
            L(a, -0.09239631 * b, 0.07836421 * c, 0.1406031 * b, -0.0542823 * c, 0.2008615 * b, 0.05349299 * c);
            L(a, 0.2450511 * b, -0.00697547 * c, 0.3776197 * b, -0.01112067 * c, 0.4338609 * b, 0.074219 * c);
            L(a, 0.4539471 * b, 0, 0.6066018 * b, -0.02526587 * c, 0.6558228 * b, 0.07004196 * c);
            L(a, 0.6914277 * b, -0.01904177 * c, 0.8921095 * b, -0.01220843 * c, 0.8921095 * b, 0.08370865 * c);
            L(a, 1.036446 * b, 0.04105738 * c, 1.020377 * b, 0.3022052 * c, 0.9147671 * b, 0.3194596 * c);
            L(a, 1.04448 * b, 0.360238 * c, 0.992256 * b, 0.5219009 * c, 0.9082935 * b, 0.562044 * c);
            L(a, 1.032337 * b, 0.5771781 * c, 1.018411 * b, 0.8120651 * c, 0.9212406 * b, 0.8217117 * c);
            L(a, 1.028411 * b, 0.9571472 * c, 0.8556702 * b, 1.052487 * c, 0.7592566 * b, 0.9156953 * c);
            L(a, 0.7431877 * b, 1.009325 * c, 0.5624123 * b, 1.021761 * c, 0.5101666 * b, 0.9310455 * c);
            L(a, 0.4820677 * b, 1.031761 * c, 0.3030112 * b, 1.002796 * c, 0.2609328 * b, 0.9344623 * c);
            L(a, 0.2329994 * b, 1.01518 * c, 0.03213784 * b, 1.01518 * c, 0.08034461 * b, 0.870098 * c);
            L(a, -0.02812061 * b, 0.9032597 * c, -0.01205169 * b, 0.6835638 * c, 0.06829292 * b, 0.6545475 * c);
            L(a, -0.01812061 * b, 0.6089503 * c, -0.00606892 * b, 0.4555777 * c, 0.06427569 * b, 0.4265613 * c);
            L(a, -0.01606892 * b, 0.3892545 * c, -0.01205169 * b, 0.1944299 * c, 0.08034461 * b, 0.1944299 * c);
            ce(a);
            b = a.k;
            b.n = new F(0.1, 0.1);
            b.o = new F(0.9, 0.9);
            return b
        },
        Gate: "Crescent",
        Crescent: function(a, b, c) {
            a = new J;
            K(a, 0, 0, h);
            L(a, 1 * b, 0, 1 * b, 1 * c, 0, 1 * c);
            L(a, 0.5 * b, 0.75 * c, 0.5 * b, 0.25 * c, 0, 0);
            ce(a);
            b = a.k;
            b.n = new F(0.511, 0.19);
            b.o = new F(0.776, 0.76);
            return b
        },
        FramedRectangle: function(a, b, c) {
            var d = new J,
            e = a ? a.Mb: 0,
            a = a ? a.Xr: 0;
            0 === e && (e = 0.1);
            0 === a && (a = 0.1);
            K(d, 0, 0, h);
            d.lineTo(1 * b, 0);
            d.lineTo(1 * b, 1 * c);
            d.lineTo(0, 1 * c, h);
            K(d, e * b, a * c, p, h);
            d.lineTo(e * b, (1 - a) * c);
            d.lineTo((1 - e) * b, (1 - a) * c);
            d.lineTo((1 - e) * b, a * c, h);
            b = d.k;
            b.n = new F(e, a);
            b.o = new F(1 - e, 1 - a);
            return b
        },
        Delay: "HalfEllipse",
        HalfEllipse: function(a, b, c) {
            a = new J;
            K(a, 0, 0, h);
            L(a, Nc * b, 0, 1 * b, (0.5 - Nc / 2) * c, 1 * b, 0.5 * c);
            L(a, 1 * b, (0.5 + Nc / 2) * c, Nc * b, 1 * c, 0, 1 * c);
            ce(a);
            b = a.k;
            b.n = new F(0, 0.2);
            b.o = new F(0.75, 0.8);
            return b
        },
        Heart: function(a, b, c) {
            a = new J;
            K(a, 0.5 * b, 1 * c, h);
            L(a, 0.1 * b, 0.8 * c, 0, 0.5 * c, 0 * b, 0.3 * c);
            L(a, 0 * b, 0, 0.45 * b, 0, 0.5 * b, 0.3 * c);
            L(a, 0.55 * b, 0, 1 * b, 0, 1 * b, 0.3 * c);
            L(a, b, 0.5 * c, 0.9 * b, 0.8 * c, 0.5 * b, 1 * c);
            ce(a);
            b = a.k;
            b.n = new F(0.15, 0.29);
            b.o = new F(0.86, 0.68);
            return b
        },
        Spade: function(a, b, c) {
            a = new J;
            K(a, 0.5 * b, 0, h);
            a.lineTo(0.51 * b, 0.01 * c);
            L(a, 0.6 * b, 0.2 * c, b, 0.25 * c, b, 0.5 * c);
            L(a, b, 0.8 * c, 0.6 * b, 0.8 * c, 0.55 * b, 0.7 * c);
            L(a, 0.5 * b, 0.75 * c, 0.55 * b, 0.95 * c, 0.75 * b, c);
            a.lineTo(0.25 * b, c);
            L(a, 0.45 * b, 0.95 * c, 0.5 * b, 0.75 * c, 0.45 * b, 0.7 * c);
            L(a, 0.4 * b, 0.8 * c, 0, 0.8 * c, 0, 0.5 * c);
            L(a, 0, 0.25 * c, 0.4 * b, 0.2 * c, 0.49 * b, 0.01 * c);
            ce(a);
            b = a.k;
            b.n = new F(0.19, 0.26);
            b.o = new F(0.8, 0.68);
            return b
        },
        Club: function(a, b, c) {
            a = new J;
            K(a, 0.4 * b, 0.6 * c, h);
            L(a, 0.5 * b, 0.75 * c, 0.45 * b, 0.95 * c, 0.15 * b, 1 * c);
            a.lineTo(0.85 * b, c);
            L(a, 0.55 * b, 0.95 * c, 0.5 * b, 0.75 * c, 0.6 * b, 0.6 * c);
            var d = 0.2,
            e = 0.3,
            g = 0,
            i = d * (4 * (Math.SQRT2 - 1) / 3);
            L(a, (0.5 - d + e) * b, (0.5 + i + g) * c, (0.5 - i + e) * b, (0.5 + d + g) * c, (0.5 + e) * b, (0.5 + d + g) * c);
            L(a, (0.5 + i + e) * b, (0.5 + d + g) * c, (0.5 + d + e) * b, (0.5 + i + g) * c, (0.5 + d + e) * b, (0.5 + g) * c);
            L(a, (0.5 + d + e) * b, (0.5 - i + g) * c, (0.5 + i + e) * b, (0.5 - d + g) * c, (0.5 + e) * b, (0.5 - d + g) * c);
            L(a, (0.5 - i + e) * b, (0.5 - d + g) * c, (0.5 - d + e + 0.05) * b, (0.5 - i + g - 0.02) * c, 0.65 * b, 0.36771243 * c);
            d = 0.2;
            e = 0;
            g = -0.3;
            i = d * (4 * (Math.SQRT2 - 1) / 3);
            L(a, (0.5 + i + e) * b, (0.5 + d + g) * c, (0.5 + d + e) * b, (0.5 + i + g) * c, (0.5 + d + e) * b, (0.5 + g) * c);
            L(a, (0.5 + d + e) * b, (0.5 - i + g) * c, (0.5 + i + e) * b, (0.5 - d + g) * c, (0.5 + e) * b, (0.5 - d + g) * c);
            L(a, (0.5 - i + e) * b, (0.5 - d + g) * c, (0.5 - d + e) * b, (0.5 - i + g) * c, (0.5 - d + e) * b, (0.5 + g) * c);
            L(a, (0.5 - d + e) * b, (0.5 + i + g) * c, (0.5 - i + e) * b, (0.5 + d + g) * c, 0.35 * b, 0.36771243 * c);
            d = 0.2;
            e = -0.3;
            g = 0;
            i = d * (4 * (Math.SQRT2 - 1) / 3);
            L(a, (0.5 + d + e - 0.05) * b, (0.5 - i + g - 0.02) * c, (0.5 + i + e) * b, (0.5 - d + g) * c, (0.5 + e) * b, (0.5 - d + g) * c);
            L(a, (0.5 - i + e) * b, (0.5 - d + g) * c, (0.5 - d + e) * b, (0.5 - i + g) * c, (0.5 - d + e) * b, (0.5 + g) * c);
            L(a, (0.5 - d + e) * b, (0.5 + i + g) * c, (0.5 - i + e) * b, (0.5 + d + g) * c, (0.5 + e) * b, (0.5 + d + g) * c);
            L(a, (0.5 + i + e) * b, (0.5 + d + g) * c, (0.5 + d + e) * b, (0.5 + i + g) * c, 0.4 * b, 0.6 * c);
            ce(a);
            b = a.k;
            b.n = new F(0.06, 0.39);
            b.o = new F(0.93, 0.58);
            return b
        },
        YinYang: function(a, b, c) {
            var a = 0.5,
            d = new J,
            a = 0.5;
            K(d, 0.5 * b, 0, h);
            d.arcTo(270, 180, 0.5 * b, 0.5 * b, 0.5 * b);
            L(d, 1 * b, a * c, 0, a * c, a * b, 0, h);
            var a = 0.1,
            e = 0.25;
            K(d, (0.5 + a) * b, e * c, h, h);
            d.arcTo(0, -360, 0.5 * b, c * e, a * b);
            ce(d);
            K(d, 0.5 * b, 0, p);
            d.arcTo(270, -180, 0.5 * b, 0.5 * b, 0.5 * b);
            $k(d);
            e = 0.75;
            K(d, (0.5 + a) * b, e * c, h);
            d.arcTo(0, 360, 0.5 * b, c * e, a * b);
            ce(d);
            b = d.k;
            b.Pb = Rg;
            return b
        },
        Peace: function(a, b, c) {
            var a = new J,
            d = 0.5 * (4 * (Math.SQRT2 - 1) / 3);
            K(a, b, 0.5 * c, h);
            L(a, b, (0.5 - d) * c, (0.5 + d) * b, 0, 0.5 * b, 0);
            L(a, (0.5 - d) * b, 0, 0, (0.5 - d) * c, 0, 0.5 * c);
            L(a, 0, (0.5 + d) * c, (0.5 - d) * b, c, 0.5 * b, c);
            L(a, (0.5 + d) * b, c, b, (0.5 + d) * c, b, 0.5 * c);
            d = 0.4 * (4 * (Math.SQRT2 - 1) / 3);
            K(a, 0.5 * b, 0.1 * c, h, h);
            L(a, (0.5 + d) * b, 0.1 * c, 0.9 * b, (0.5 - d) * c, 0.9 * b, 0.5 * c);
            L(a, 0.9 * b, (0.5 + d) * c, (0.5 + d) * b, 0.9 * c, 0.5 * b, 0.9 * c);
            L(a, (0.5 - d) * b, 0.9 * c, 0.1 * b, (0.5 + d) * c, 0.1 * b, 0.5 * c);
            L(a, 0.1 * b, (0.5 - d) * c, (0.5 - d) * b, 0.1 * c, 0.5 * b, 0.1 * c);
            var d = 0.07,
            e = 0,
            g = -0.707 * 0.11,
            i = d * (4 * (Math.SQRT2 - 1) / 3);
            K(a, (0.5 + d + e) * b, (0.5 + g) * c, h);
            L(a, (0.5 + d + e) * b, (0.5 - i + g) * c, (0.5 + i + e) * b, (0.5 - d + g) * c, (0.5 + e) * b, (0.5 - d + g) * c);
            L(a, (0.5 - i + e) * b, (0.5 - d + g) * c, (0.5 - d + e) * b, (0.5 - i + g) * c, (0.5 - d + e) * b, (0.5 + g) * c);
            L(a, (0.5 - d + e) * b, (0.5 + i + g) * c, (0.5 - i + e) * b, (0.5 + d + g) * c, (0.5 + e) * b, (0.5 + d + g) * c);
            L(a, (0.5 + i + e) * b, (0.5 + d + g) * c, (0.5 + d + e) * b, (0.5 + i + g) * c, (0.5 + d + e) * b, (0.5 + g) * c);
            d = 0.07;
            e = -0.707 * 0.11;
            g = 0.707 * 0.11;
            i = d * (4 * (Math.SQRT2 - 1) / 3);
            K(a, (0.5 + d + e) * b, (0.5 + g) * c, h);
            L(a, (0.5 + d + e) * b, (0.5 - i + g) * c, (0.5 + i + e) * b, (0.5 - d + g) * c, (0.5 + e) * b, (0.5 - d + g) * c);
            L(a, (0.5 - i + e) * b, (0.5 - d + g) * c, (0.5 - d + e) * b, (0.5 - i + g) * c, (0.5 - d + e) * b, (0.5 + g) * c);
            L(a, (0.5 - d + e) * b, (0.5 + i + g) * c, (0.5 - i + e) * b, (0.5 + d + g) * c, (0.5 + e) * b, (0.5 + d + g) * c);
            L(a, (0.5 + i + e) * b, (0.5 + d + g) * c, (0.5 + d + e) * b, (0.5 + i + g) * c, (0.5 + d + e) * b, (0.5 + g) * c);
            d = 0.07;
            e = 0.707 * 0.11;
            g = 0.707 * 0.11;
            i = d * (4 * (Math.SQRT2 - 1) / 3);
            K(a, (0.5 + d + e) * b, (0.5 + g) * c, h);
            L(a, (0.5 + d + e) * b, (0.5 - i + g) * c, (0.5 + i + e) * b, (0.5 - d + g) * c, (0.5 + e) * b, (0.5 - d + g) * c);
            L(a, (0.5 - i + e) * b, (0.5 - d + g) * c, (0.5 - d + e) * b, (0.5 - i + g) * c, (0.5 - d + e) * b, (0.5 + g) * c);
            L(a, (0.5 - d + e) * b, (0.5 + i + g) * c, (0.5 - i + e) * b, (0.5 + d + g) * c, (0.5 + e) * b, (0.5 + d + g) * c);
            L(a, (0.5 + i + e) * b, (0.5 + d + g) * c, (0.5 + d + e) * b, (0.5 + i + g) * c, (0.5 + d + e) * b, (0.5 + g) * c);
            b = a.k;
            b.n = new F(0.146, 0.146);
            b.o = new F(0.853, 0.853);
            b.Pb = Rg;
            return b
        },
        NotAllowed: function(a, b, c) {
            var a = 0.5 * Nc,
            d = 0.5,
            e = new J;
            K(e, 0.5 * b, (0.5 - d) * c, h);
            L(e, (0.5 - a) * b, (0.5 - d) * c, (0.5 - d) * b, (0.5 - a) * c, (0.5 - d) * b, 0.5 * c);
            L(e, (0.5 - d) * b, (0.5 + a) * c, (0.5 - a) * b, (0.5 + d) * c, 0.5 * b, (0.5 + d) * c);
            L(e, (0.5 + a) * b, (0.5 + d) * c, (0.5 + d) * b, (0.5 + a) * c, (0.5 + d) * b, 0.5 * c);
            L(e, (0.5 + d) * b, (0.5 - a) * c, (0.5 + a) * b, (0.5 - d) * c, 0.5 * b, (0.5 - d) * c);
            var d = 0.4,
            a = 0.4 * Nc,
            g = new D(0, 0),
            i = new D(0, 0),
            j = new D(0, 0),
            k = new D(0, 0);
            al(0.5, 0.5 - d, 0.5 + a, 0.5 - d, 0.5 + d, 0.5 - a, 0.5 + d, 0.5, 0.42, g, i, j, k, k);
            var l = new D(0, 0),
            n = new D(0, 0),
            r = new D(0, 0);
            al(0.5, 0.5 - d, 0.5 + a, 0.5 - d, 0.5 + d, 0.5 - a, 0.5 + d, 0.5, 0.58, k, k, r, l, n);
            var q = new D(0, 0),
            u = new D(0, 0),
            x = new D(0, 0);
            al(0.5, 0.5 + d, 0.5 - a, 0.5 + d, 0.5 - d, 0.5 + a, 0.5 - d, 0.5, 0.42, q, u, x, k, k);
            var z = new D(0, 0),
            C = new D(0, 0),
            G = new D(0, 0);
            al(0.5, 0.5 + d, 0.5 - a, 0.5 + d, 0.5 - d, 0.5 + a, 0.5 - d, 0.5, 0.58, k, k, G, z, C);
            K(e, G.x * b, G.y * c, h, h);
            L(e, z.x * b, z.y * c, C.x * b, C.y * c, (0.5 - d) * b, 0.5 * c);
            L(e, (0.5 - d) * b, (0.5 - a) * c, (0.5 - a) * b, (0.5 - d) * c, 0.5 * b, (0.5 - d) * c);
            L(e, g.x * b, g.y * c, i.x * b, i.y * c, j.x * b, j.y * c);
            e.lineTo(G.x * b, G.y * c);
            ce(e);
            K(e, x.x * b, x.y * c, h, h);
            e.lineTo(r.x * b, r.y * c);
            L(e, l.x * b, l.y * c, n.x * b, n.y * c, (0.5 + d) * b, 0.5 * c);
            L(e, (0.5 + d) * b, (0.5 + a) * c, (0.5 + a) * b, (0.5 + d) * c, 0.5 * b, (0.5 + d) * c);
            L(e, q.x * b, q.y * c, u.x * b, u.y * c, x.x * b, x.y * c);
            ce(e);
            e.k.Pb = Rg;
            return e.k
        },
        Fragile: function(a, b, c) {
            a = new J;
            K(a, 0, 0, h);
            a.lineTo(0.25 * b, 0);
            a.lineTo(0.2 * b, 0.15 * c);
            a.lineTo(0.3 * b, 0.25 * c);
            a.lineTo(0.29 * b, 0.33 * c);
            a.lineTo(0.35 * b, 0.25 * c);
            a.lineTo(0.3 * b, 0.15 * c);
            a.lineTo(0.4 * b, 0);
            a.lineTo(1 * b, 0);
            L(a, 1 * b, 0.25 * c, 0.75 * b, 0.5 * c, 0.55 * b, 0.5 * c);
            a.lineTo(0.55 * b, 0.9 * c);
            a.lineTo(0.7 * b, 0.9 * c);
            a.lineTo(0.7 * b, 1 * c);
            a.lineTo(0.3 * b, 1 * c);
            a.lineTo(0.3 * b, 0.9 * c);
            a.lineTo(0.45 * b, 0.9 * c);
            a.lineTo(0.45 * b, 0.5 * c);
            L(a, 0.25 * b, 0.5 * c, 0, 0.25 * c, 0, 0);
            ce(a);
            b = a.k;
            b.n = new F(0.25, 0);
            b.o = new F(0.75, 0.4);
            return b
        },
        HourGlass: function(a, b, c) {
            a = new J;
            K(a, 0.65 * b, 0.5 * c, h);
            a.lineTo(1 * b, 1 * c);
            a.lineTo(0, 1 * c);
            a.lineTo(0.35 * b, 0.5 * c);
            a.lineTo(0, 0);
            a.lineTo(1 * b, 0);
            ce(a);
            return a.k
        },
        Lightning: function(a, b, c) {
            a = new J;
            K(a, 0 * b, 0.55 * c, h);
            a.lineTo(0.75 * b, 0);
            a.lineTo(0.25 * b, 0.45 * c);
            a.lineTo(0.9 * b, 0.48 * c);
            a.lineTo(0.4 * b, 1 * c);
            a.lineTo(0.65 * b, 0.55 * c);
            ce(a);
            return a.k
        },
        Parallelogram1: function(a, b, c) {
            a = a ? a.Mb: 0;
            0 === a && (a = 0.1);
            var d = new J;
            K(d, a * b, 0, h);
            d.lineTo(1 * b, 0);
            d.lineTo((1 - a) * b, 1 * c);
            d.lineTo(0, 1 * c);
            ce(d);
            b = d.k;
            b.n = new F(a, 0);
            b.o = new F(1 - a, 1);
            return b
        },
        Input: "Output",
        Output: function(a, b, c) {
            a = new J;
            K(a, 0, 1 * c, h);
            a.lineTo(0.1 * b, 0);
            a.lineTo(1 * b, 0);
            a.lineTo(0.9 * b, 1 * c);
            ce(a);
            b = a.k;
            b.n = new F(0.1, 0);
            b.o = new F(0.9, 1);
            return b
        },
        Parallelogram2: function(a, b, c) {
            a = a ? a.Mb: 0;
            0 === a && (a = 0.25);
            var d = new J;
            K(d, a * b, 0, h);
            d.lineTo(1 * b, 0);
            d.lineTo((1 - a) * b, 1 * c);
            d.lineTo(0, 1 * c);
            ce(d);
            b = d.k;
            b.n = new F(a, 0);
            b.o = new F(1 - a, 1);
            return b
        },
        ThickCross: function(a, b, c) {
            a = a ? a.Mb: 0;
            0 === a && (a = 0.25);
            var d = new J;
            K(d, (0.5 - a / 2) * b, 0, h);
            d.lineTo((0.5 + a / 2) * b, 0);
            d.lineTo((0.5 + a / 2) * b, (0.5 - a / 2) * c);
            d.lineTo(1 * b, (0.5 - a / 2) * c);
            d.lineTo(1 * b, (0.5 + a / 2) * c);
            d.lineTo((0.5 + a / 2) * b, (0.5 + a / 2) * c);
            d.lineTo((0.5 + a / 2) * b, 1 * c);
            d.lineTo((0.5 - a / 2) * b, 1 * c);
            d.lineTo((0.5 - a / 2) * b, (0.5 + a / 2) * c);
            d.lineTo(0, (0.5 + a / 2) * c);
            d.lineTo(0, (0.5 - a / 2) * c);
            d.lineTo((0.5 - a / 2) * b, (0.5 - a / 2) * c);
            ce(d);
            b = d.k;
            b.n = new F(0.5 - a / 2, 0.5 - a / 2);
            b.o = new F(0.5 + a / 2, 0.5 + a / 2);
            return b
        },
        ThickX: function(a, b, c) {
            var a = 0.25 / Math.SQRT2,
            d = new J;
            K(d, 0.3 * b, 0, h);
            d.lineTo(0.5 * b, 0.2 * c);
            d.lineTo(0.7 * b, 0);
            d.lineTo(1 * b, 0.3 * c);
            d.lineTo(0.8 * b, 0.5 * c);
            d.lineTo(1 * b, 0.7 * c);
            d.lineTo(0.7 * b, 1 * c);
            d.lineTo(0.5 * b, 0.8 * c);
            d.lineTo(0.3 * b, 1 * c);
            d.lineTo(0, 0.7 * c);
            d.lineTo(0.2 * b, 0.5 * c);
            d.lineTo(0, 0.3 * c);
            ce(d);
            b = d.k;
            b.n = new F(0.5 - a, 0.5 - a);
            b.o = new F(0.5 + a, 0.5 + a);
            return b
        },
        ThinCross: function(a, b, c) {
            a = a ? a.Mb: 0;
            0 === a && (a = 0.1);
            var d = new J;
            K(d, (0.5 - a / 2) * b, 0, h);
            d.lineTo((0.5 + a / 2) * b, 0);
            d.lineTo((0.5 + a / 2) * b, (0.5 - a / 2) * c);
            d.lineTo(1 * b, (0.5 - a / 2) * c);
            d.lineTo(1 * b, (0.5 + a / 2) * c);
            d.lineTo((0.5 + a / 2) * b, (0.5 + a / 2) * c);
            d.lineTo((0.5 + a / 2) * b, 1 * c);
            d.lineTo((0.5 - a / 2) * b, 1 * c);
            d.lineTo((0.5 - a / 2) * b, (0.5 + a / 2) * c);
            d.lineTo(0, (0.5 + a / 2) * c);
            d.lineTo(0, (0.5 - a / 2) * c);
            d.lineTo((0.5 - a / 2) * b, (0.5 - a / 2) * c);
            ce(d);
            return d.k
        },
        ThinX: function(a, b, c) {
            a = new J;
            K(a, 0.1 * b, 0, h);
            a.lineTo(0.5 * b, 0.4 * c);
            a.lineTo(0.9 * b, 0);
            a.lineTo(1 * b, 0.1 * c);
            a.lineTo(0.6 * b, 0.5 * c);
            a.lineTo(1 * b, 0.9 * c);
            a.lineTo(0.9 * b, 1 * c);
            a.lineTo(0.5 * b, 0.6 * c);
            a.lineTo(0.1 * b, 1 * c);
            a.lineTo(0, 0.9 * c);
            a.lineTo(0.4 * b, 0.5 * c);
            a.lineTo(0, 0.1 * c);
            ce(a);
            return a.k
        },
        RightTriangle: function(a, b, c) {
            a = new J;
            K(a, 0, 0, h);
            a.lineTo(1 * b, 1 * c);
            a.lineTo(0, 1 * c);
            ce(a);
            b = a.k;
            b.n = new F(0, 0.5);
            b.o = new F(0.5, 1);
            return b
        },
        RoundedIBeam: function(a, b, c) {
            a = new J;
            K(a, 0, 0, h);
            a.lineTo(1 * b, 0);
            L(a, 0.5 * b, 0.25 * c, 0.5 * b, 0.75 * c, 1 * b, 1 * c);
            a.lineTo(0, 1 * c);
            L(a, 0.5 * b, 0.75 * c, 0.5 * b, 0.25 * c, 0, 0);
            ce(a);
            return a.k
        },
        RoundedRectangle: function(a, b, c) {
            var d = a ? a.Mb: 0;
            0 >= d && (d = 5);
            var d = Math.min(d, b / 3),
            d = Math.min(d, c / 3),
            a = d * Nc,
            e = new J;
            K(e, d, 0, h);
            e.lineTo(b - d, 0);
            L(e, b - a, 0, b, a, b, d);
            e.lineTo(b, c - d);
            L(e, b, c - a, b - a, c, b - d, c);
            e.lineTo(d, c);
            L(e, a, c, 0, c - a, 0, c - d);
            e.lineTo(0, d);
            L(e, 0, a, a, 0, d, 0);
            ce(e);
            b = e.k;
            1 < a ? (b.n = new F(0, 0, a, a), b.o = new F(1, 1, -a, -a)) : (b.n = fc, b.o = tc);
            return b
        },
        Border: function(a, b, c) {
            a = a ? a.Mb: 0;
            0 >= a && (a = 5);
            var a = Math.min(a, b / 3),
            a = Math.min(a, c / 3),
            d = new J;
            K(d, a, 0, h);
            d.lineTo(b - a, 0);
            L(d, b - 0, 0, b, 0, b, a);
            d.lineTo(b, c - a);
            L(d, b, c - 0, b - 0, c, b - a, c);
            d.lineTo(a, c);
            L(d, 0, c, 0, c - 0, 0, c - a);
            d.lineTo(0, a);
            L(d, 0, 0, 0, 0, a, 0);
            ce(d);
            b = d.k;
            b.n = fc;
            b.o = tc;
            return b
        },
        SquareIBeam: function(a, b, c) {
            a = a ? a.Mb: 0;
            0 === a && (a = 0.2);
            var d = new J;
            K(d, 0, 0, h);
            d.lineTo(1 * b, 0);
            d.lineTo(1 * b, a * c);
            d.lineTo((0.5 + a / 2) * b, a * c);
            d.lineTo((0.5 + a / 2) * b, (1 - a) * c);
            d.lineTo(1 * b, (1 - a) * c);
            d.lineTo(1 * b, 1 * c);
            d.lineTo(0, 1 * c);
            d.lineTo(0, (1 - a) * c);
            d.lineTo((0.5 - a / 2) * b, (1 - a) * c);
            d.lineTo((0.5 - a / 2) * b, a * c);
            d.lineTo(0, a * c);
            ce(d);
            return d.k
        },
        Trapezoid: function(a, b, c) {
            a = a ? a.Mb: 0;
            0 === a && (a = 0.2);
            var d = new J;
            K(d, a * b, 0, h);
            d.lineTo((1 - a) * b, 0);
            d.lineTo(1 * b, 1 * c);
            d.lineTo(0, 1 * c);
            ce(d);
            b = d.k;
            b.n = new F(a, 0);
            b.o = new F(1 - a, 1);
            return b
        },
        ManualLoop: "ManualOperation",
        ManualOperation: function(a, b, c) {
            var a = a ? a.Mb: 0,
            d = new J;
            K(d, a, 0, h);
            d.lineTo(0, 0);
            d.lineTo(1 * b, 0);
            d.lineTo(0.9 * b, 1 * c);
            d.lineTo(0.1 * b, 1 * c);
            ce(d);
            b = d.k;
            b.n = new F(0.1, 0);
            b.o = new F(0.9, 1);
            return b
        },
        GenderMale: function(a, b, c) {
            var a = new J,
            d = 0.4 * Nc,
            e = 0.4,
            g = new D(0, 0),
            i = new D(0, 0),
            j = new D(0, 0),
            k = new D(0, 0);
            K(a, (0.5 - e) * b, 0.5 * c, h);
            L(a, (0.5 - e) * b, (0.5 - d) * c, (0.5 - d) * b, (0.5 - e) * c, 0.5 * b, (0.5 - e) * c);
            al(0.5, 0.5 - e, 0.5 + d, 0.5 - e, 0.5 + e, 0.5 - d, 0.5 + e, 0.5, 0.44, j, k, i, g, g);
            L(a, j.x * b, j.y * c, k.x * b, k.y * c, i.x * b, i.y * c);
            var l = new D(i.x, i.y);
            al(0.5, 0.5 - e, 0.5 + d, 0.5 - e, 0.5 + e, 0.5 - d, 0.5 + e, 0.5, 0.56, g, g, i, j, k);
            g = new D(i.x, i.y);
            a.lineTo((0.1 * l.x + 0.855) * b, 0.1 * l.y * c);
            a.lineTo(0.85 * b, 0.1 * l.y * c);
            a.lineTo(0.85 * b, 0);
            a.lineTo(1 * b, 0);
            a.lineTo(1 * b, 0.15 * c);
            a.lineTo((0.1 * g.x + 0.9) * b, 0.15 * c);
            a.lineTo((0.1 * g.x + 0.9) * b, (0.1 * g.y + 0.05 * 0.9) * c);
            a.lineTo(g.x * b, g.y * c);
            L(a, j.x * b, j.y * c, k.x * b, k.y * c, (0.5 + e) * b, 0.5 * c);
            L(a, (0.5 + e) * b, (0.5 + d) * c, (0.5 + d) * b, (0.5 + e) * c, 0.5 * b, (0.5 + e) * c);
            L(a, (0.5 - d) * b, (0.5 + e) * c, (0.5 - e) * b, (0.5 + d) * c, (0.5 - e) * b, 0.5 * c);
            e = 0.35;
            d = 0.35 * Nc;
            K(a, 0.5 * b, (0.5 - e) * c, h, h);
            L(a, (0.5 - d) * b, (0.5 - e) * c, (0.5 - e) * b, (0.5 - d) * c, (0.5 - e) * b, 0.5 * c);
            L(a, (0.5 - e) * b, (0.5 + d) * c, (0.5 - d) * b, (0.5 + e) * c, 0.5 * b, (0.5 + e) * c);
            L(a, (0.5 + d) * b, (0.5 + e) * c, (0.5 + e) * b, (0.5 + d) * c, (0.5 + e) * b, 0.5 * c);
            L(a, (0.5 + e) * b, (0.5 - d) * c, (0.5 + d) * b, (0.5 - e) * c, 0.5 * b, (0.5 - e) * c);
            K(a, (0.5 - e) * b, 0.5 * c, h);
            b = a.k;
            b.n = new F(0.202, 0.257);
            b.o = new F(0.692, 0.839);
            b.Pb = Rg;
            return b
        },
        GenderFemale: function(a, b, c) {
            var a = new J,
            d = 0.375,
            e = 0,
            g = -0.125,
            i = d * (4 * (Math.SQRT2 - 1) / 3);
            K(a, (0.525 + e) * b, (0.5 + d + g) * c, h);
            L(a, (0.5 + i + e) * b, (0.5 + d + g) * c, (0.5 + d + e) * b, (0.5 + i + g) * c, (0.5 + d + e) * b, (0.5 + g) * c);
            L(a, (0.5 + d + e) * b, (0.5 - i + g) * c, (0.5 + i + e) * b, (0.5 - d + g) * c, (0.5 + e) * b, (0.5 - d + g) * c);
            L(a, (0.5 - i + e) * b, (0.5 - d + g) * c, (0.5 - d + e) * b, (0.5 - i + g) * c, (0.5 - d + e) * b, (0.5 + g) * c);
            L(a, (0.5 - d + e) * b, (0.5 + i + g) * c, (0.5 - i + e) * b, (0.5 + d + g) * c, (0.475 + e) * b, (0.5 + d + g) * c);
            a.lineTo(0.475 * b, 0.85 * c);
            a.lineTo(0.425 * b, 0.85 * c);
            a.lineTo(0.425 * b, 0.9 * c);
            a.lineTo(0.475 * b, 0.9 * c);
            a.lineTo(0.475 * b, 1 * c);
            a.lineTo(0.525 * b, 1 * c);
            a.lineTo(0.525 * b, 0.9 * c);
            a.lineTo(0.575 * b, 0.9 * c);
            a.lineTo(0.575 * b, 0.85 * c);
            a.lineTo(0.525 * b, 0.85 * c);
            ce(a);
            d = 0.325;
            e = 0;
            g = -0.125;
            i = d * (4 * (Math.SQRT2 - 1) / 3);
            K(a, (0.5 + d + e) * b, (0.5 + g) * c, h, h);
            L(a, (0.5 + d + e) * b, (0.5 + i + g) * c, (0.5 + i + e) * b, (0.5 + d + g) * c, (0.5 + e) * b, (0.5 + d + g) * c);
            L(a, (0.5 - i + e) * b, (0.5 + d + g) * c, (0.5 - d + e) * b, (0.5 + i + g) * c, (0.5 - d + e) * b, (0.5 + g) * c);
            L(a, (0.5 - d + e) * b, (0.5 - i + g) * c, (0.5 - i + e) * b, (0.5 - d + g) * c, (0.5 + e) * b, (0.5 - d + g) * c);
            L(a, (0.5 + i + e) * b, (0.5 - d + g) * c, (0.5 + d + e) * b, (0.5 - i + g) * c, (0.5 + d + e) * b, (0.5 + g) * c);
            K(a, (0.525 + e) * b, (0.5 + d + g) * c, h);
            b = a.k;
            b.n = new F(0.232, 0.136);
            b.o = new F(0.782, 0.611);
            b.Pb = Rg;
            return b
        },
        PlusLine: function(a, b, c) {
            a = new J;
            K(a, 0, 0.5 * c, p);
            a.lineTo(1 * b, 0.5 * c);
            a.moveTo(0.5 * b, 0);
            a.lineTo(0.5 * b, 1 * c);
            return a.k
        },
        XLine: function(a, b, c) {
            a = new J;
            K(a, 0, 1 * c, p);
            a.lineTo(1 * b, 0);
            a.moveTo(0, 0);
            a.lineTo(1 * b, 1 * c);
            return a.k
        },
        AsteriskLine: function(a, b, c) {
            var a = new J,
            d = 0.2 / Math.SQRT2;
            K(a, d * b, (1 - d) * c, p);
            a.lineTo((1 - d) * b, d * c);
            a.moveTo(d * b, d * c);
            a.lineTo((1 - d) * b, (1 - d) * c);
            a.moveTo(0 * b, 0.5 * c);
            a.lineTo(1 * b, 0.5 * c);
            a.moveTo(0.5 * b, 0 * c);
            a.lineTo(0.5 * b, 1 * c);
            return a.k
        },
        CircleLine: function(a, b, c) {
            var a = 0.5 * Nc,
            d = new J;
            K(d, 1 * b, 0.5 * c, p);
            L(d, 1 * b, (0.5 + a) * c, (0.5 + a) * b, 1 * c, 0.5 * b, 1 * c);
            L(d, (0.5 - a) * b, 1 * c, 0, (0.5 + a) * c, 0, 0.5 * c);
            L(d, 0, (0.5 - a) * c, (0.5 - a) * b, 0, 0.5 * b, 0);
            L(d, (0.5 + a) * b, 0, 1 * b, (0.5 - a) * c, 1 * b, 0.5 * c);
            b = d.k;
            b.n = new F(0.146, 0.146);
            b.o = new F(0.853, 0.853);
            b.Pb = Rg;
            return b
        },
        Pie: function(a, b, c) {
            var a = new J,
            d = 0.5 * (4 * (Math.SQRT2 - 1) / 3);
            K(a, (0.5 * Math.SQRT2 / 2 + 0.5) * b, (0.5 - 0.5 * Math.SQRT2 / 2) * c, h);
            L(a, 0.7 * b, 0 * c, 0.5 * b, 0 * c, 0.5 * b, 0 * c);
            L(a, (0.5 - d + 0) * b, 0 * c, 0 * b, (0.5 - d + 0) * c, 0 * b, 0.5 * c);
            L(a, 0 * b, (0.5 + d + 0) * c, (0.5 - d + 0) * b, 1 * c, 0.5 * b, 1 * c);
            L(a, (0.5 + d + 0) * b, 1 * c, 1 * b, (0.5 + d + 0) * c, 1 * b, 0.5 * c);
            a.lineTo(0.5 * b, 0.5 * c);
            ce(a);
            return a.k
        },
        PiePiece: function(a, b, c) {
            var a = 0.5 * (Nc / Math.SQRT2),
            d = Math.SQRT2 / 2,
            e = 1 - Math.SQRT2 / 2,
            g = new J;
            K(g, b, c, h);
            L(g, b, (1 - a) * c, (d + a) * b, (e + a) * c, d * b, e * c);
            g.lineTo(0, c);
            ce(g);
            return g.k
        },
        StopSign: function(a, b, c) {
            var d = 1 / (Math.SQRT2 + 2),
            e = new J;
            K(e, d * b, 0, h);
            e.lineTo((1 - d) * b, 0);
            e.lineTo(1 * b, d * c);
            e.lineTo(1 * b, (1 - d) * c);
            e.lineTo((1 - d) * b, 1 * c);
            e.lineTo(d * b, 1 * c);
            e.lineTo(0, (1 - d) * c);
            e.lineTo(0, d * c);
            ce(e);
            b = e.k;
            a && $b(a.n) && (a.n = new F(d / 2, d / 2));
            a && $b(a.o) && (a.o = new F(1 - d / 2, 1 - d / 2));
            return b
        },
        LogicImplies: function(a, b, c) {
            a = a ? a.Mb: 0;
            0 === a && (a = 0.2);
            var d = new J;
            K(d, (1 - a) * b, 0 * c, p);
            d.lineTo(1 * b, 0.5 * c);
            d.lineTo((1 - a) * b, c);
            d.moveTo(0, 0.5 * c);
            d.lineTo(b, 0.5 * c);
            b = d.k;
            b.n = new F(0, 0);
            b.o = new F(0.8, 0.5);
            return b
        },
        LogicIff: function(a, b, c) {
            a = a ? a.Mb: 0;
            0 === a && (a = 0.2);
            var d = new J;
            K(d, (1 - a) * b, 0 * c, p);
            d.lineTo(1 * b, 0.5 * c);
            d.lineTo((1 - a) * b, c);
            d.moveTo(0, 0.5 * c);
            d.lineTo(b, 0.5 * c);
            d.moveTo(a * b, 0);
            d.lineTo(0, 0.5 * c);
            d.lineTo(a * b, c);
            b = d.k;
            b.n = new F(0.2, 0);
            b.o = new F(0.8, 0.5);
            return b
        },
        LogicNot: function(a, b, c) {
            a = new J;
            K(a, 0, 0, p);
            a.lineTo(1 * b, 0);
            a.lineTo(1 * b, 1 * c);
            return a.k
        },
        LogicAnd: function(a, b, c) {
            a = new J;
            K(a, 0, 1 * c, p);
            a.lineTo(0.5 * b, 0);
            a.lineTo(1 * b, 1 * c);
            b = a.k;
            b.n = new F(0.25, 0.5);
            b.o = new F(0.75, 1);
            return b
        },
        LogicOr: function(a, b, c) {
            a = new J;
            K(a, 0, 0, p);
            a.lineTo(0.5 * b, 1 * c);
            a.lineTo(1 * b, 0);
            b = a.k;
            b.n = new F(0.219, 0);
            b.o = new F(0.78, 0.409);
            return b
        },
        LogicXor: function(a, b, c) {
            a = new J;
            K(a, 0.5 * b, 0, p);
            a.lineTo(0.5 * b, 1 * c);
            a.moveTo(0, 0.5 * c);
            a.lineTo(1 * b, 0.5 * c);
            var d = 0.5 * Nc;
            L(a, 1 * b, (0.5 + d) * c, (0.5 + d) * b, 1 * c, 0.5 * b, 1 * c);
            L(a, (0.5 - d) * b, 1 * c, 0, (0.5 + d) * c, 0, 0.5 * c);
            L(a, 0, (0.5 - d) * c, (0.5 - d) * b, 0, 0.5 * b, 0);
            L(a, (0.5 + d) * b, 0, 1 * b, (0.5 - d) * c, 1 * b, 0.5 * c);
            b = a.k;
            b.Pb = Rg;
            return b
        },
        LogicTruth: function(a, b, c) {
            a = new J;
            K(a, 0, 0, p);
            a.lineTo(1 * b, 0);
            a.moveTo(0.5 * b, 0);
            a.lineTo(0.5 * b, 1 * c);
            return a.k
        },
        LogicFalsity: function(a, b, c) {
            a = new J;
            K(a, 0, 1 * c, p);
            a.lineTo(1 * b, 1 * c);
            a.moveTo(0.5 * b, 1 * c);
            a.lineTo(0.5 * b, 0);
            return a.k
        },
        LogicThereExists: function(a, b, c) {
            a = new J;
            K(a, 0, 0, p);
            a.lineTo(1 * b, 0);
            a.lineTo(1 * b, 0.5 * c);
            a.lineTo(0, 0.5 * c);
            a.moveTo(1 * b, 0.5 * c);
            a.lineTo(1 * b, 1 * c);
            a.lineTo(0, 1 * c);
            return a.k
        },
        LogicForAll: function(a, b, c) {
            a = new J;
            K(a, 0, 0, p);
            a.lineTo(0.5 * b, 1 * c);
            a.lineTo(1 * b, 0);
            a.moveTo(0.25 * b, 0.5 * c);
            a.lineTo(0.75 * b, 0.5 * c);
            b = a.k;
            b.n = new F(0.25, 0);
            b.o = new F(0.75, 0.5);
            return b
        },
        LogicIsDefinedAs: function(a, b, c) {
            a = new J;
            K(a, 0, 0, p);
            a.lineTo(b, 0);
            a.moveTo(0, 0.5 * c);
            a.lineTo(b, 0.5 * c);
            a.moveTo(0, c);
            a.lineTo(b, c);
            b = a.k;
            b.n = new F(0.01, 0.01);
            b.o = new F(0.99, 0.49);
            return b
        },
        LogicIntersect: function(a, b, c) {
            var a = 0.5 * Nc,
            d = new J;
            K(d, 0, 1 * c, p);
            d.lineTo(0, 0.5 * c);
            L(d, 0, (0.5 - a) * c, (0.5 - a) * b, 0, 0.5 * b, 0);
            L(d, (0.5 + a) * b, 0, 1 * b, (0.5 - a) * c, 1 * b, 0.5 * c);
            d.lineTo(1 * b, 1 * c);
            b = d.k;
            b.n = new F(0, 0.5);
            b.o = new F(1, 1);
            return b
        },
        LogicUnion: function(a, b, c) {
            var a = 0.5 * Nc,
            d = new J;
            K(d, 1 * b, 0, p);
            d.lineTo(1 * b, 0.5 * c);
            L(d, 1 * b, (0.5 + a) * c, (0.5 + a) * b, 1 * c, 0.5 * b, 1 * c);
            L(d, (0.5 - a) * b, 1 * c, 0, (0.5 + a) * c, 0, 0.5 * c);
            d.lineTo(0, 0);
            b = d.k;
            b.n = new F(0, 0);
            b.o = new F(1, 0.5);
            return b
        },
        Arrow: function(a, b, c) {
            var d = a ? a.Mb: 0,
            a = a ? a.Xr: 0;
            0 === d && (d = 0.3);
            0 === a && (a = 0.3);
            var e = new J;
            K(e, 0, (0.5 - a / 2) * c, h);
            e.lineTo((1 - d) * b, (0.5 - a / 2) * c);
            e.lineTo((1 - d) * b, 0);
            e.lineTo(1 * b, 0.5 * c);
            e.lineTo((1 - d) * b, 1 * c);
            e.lineTo((1 - d) * b, (0.5 + a / 2) * c);
            e.lineTo(0, (0.5 + a / 2) * c);
            ce(e);
            b = e.k;
            b.n = new F(0, 0.5 - a / 2);
            d = el(0, 0.5 + a / 2, 1, 0.5 + a / 2, 1 - d, 1, 1, 0.5);
            b.o = new F(d.x, d.y);
            return b
        },
        ISOProcess: "Chevron",
        Chevron: function(a, b, c) {
            a = new J;
            K(a, 0, 0, h);
            a.lineTo(0.5 * b, 0);
            a.lineTo(1 * b, 0.5 * c);
            a.lineTo(0.5 * b, 1 * c);
            a.lineTo(0, 1 * c);
            a.lineTo(0.5 * b, 0.5 * c);
            ce(a);
            return a.k
        },
        DoubleArrow: function(a, b, c) {
            a = new J;
            K(a, 0, 0, h);
            a.lineTo(0.3 * b, 0.214 * c);
            a.lineTo(0.3 * b, 0);
            a.lineTo(1 * b, 0.5 * c);
            a.lineTo(0.3 * b, 1 * c);
            a.lineTo(0.3 * b, 0.786 * c);
            a.lineTo(0, 1 * c);
            ce(a);
            K(a, 0.3 * b, 0.214 * c, p);
            a.lineTo(0.3 * b, 0.786 * c);
            $k(a);
            return a.k
        },
        DoubleEndArrow: function(a, b, c) {
            a = new J;
            K(a, 1 * b, 0.5 * c, h);
            a.lineTo(0.7 * b, 1 * c);
            a.lineTo(0.7 * b, 0.7 * c);
            a.lineTo(0.3 * b, 0.7 * c);
            a.lineTo(0.3 * b, 1 * c);
            a.lineTo(0, 0.5 * c);
            a.lineTo(0.3 * b, 0);
            a.lineTo(0.3 * b, 0.3 * c);
            a.lineTo(0.7 * b, 0.3 * c);
            a.lineTo(0.7 * b, 0);
            ce(a);
            b = a.k;
            c = el(0, 0.5, 0.3, 0, 0, 0.3, 0.3, 0.3);
            b.n = new F(c.x, c.y);
            c = el(0.7, 1, 1, 0.5, 0.7, 0.7, 1, 0.7);
            b.o = new F(c.x, c.y);
            return b
        },
        IBeamArrow: function(a, b, c) {
            a = new J;
            K(a, 1 * b, 0.5 * c, h);
            a.lineTo(0.7 * b, 1 * c);
            a.lineTo(0.7 * b, 0.7 * c);
            a.lineTo(0.2 * b, 0.7 * c);
            a.lineTo(0.2 * b, 1 * c);
            a.lineTo(0, 1 * c);
            a.lineTo(0, 0);
            a.lineTo(0.2 * b, 0);
            a.lineTo(0.2 * b, 0.3 * c);
            a.lineTo(0.7 * b, 0.3 * c);
            a.lineTo(0.7 * b, 0);
            ce(a);
            b = a.k;
            b.n = new F(0, 0.3);
            c = el(0.7, 1, 1, 0.5, 0.7, 0.7, 1, 0.7);
            b.o = new F(c.x, c.y);
            return b
        },
        Pointer: function(a, b, c) {
            a = new J;
            K(a, 1 * b, 0.5 * c, h);
            a.lineTo(0, 1 * c);
            a.lineTo(0.2 * b, 0.5 * c);
            a.lineTo(0, 0);
            ce(a);
            b = a.k;
            b.n = new F(0.2, 0.35);
            c = el(0.2, 0.65, 1, 0.65, 0, 1, 1, 0.5);
            b.o = new F(c.x, c.y);
            return b
        },
        RoundedPointer: function(a, b, c) {
            a = new J;
            K(a, 1 * b, 0.5 * c, h);
            a.lineTo(0, 1 * c);
            L(a, 0.5 * b, 0.75 * c, 0.5 * b, 0.25 * c, 0, 0);
            ce(a);
            b = a.k;
            b.n = new F(0.4, 0.35);
            c = el(0.2, 0.65, 1, 0.65, 0, 1, 1, 0.5);
            b.o = new F(c.x, c.y);
            return b
        },
        SplitEndArrow: function(a, b, c) {
            a = new J;
            K(a, 1 * b, 0.5 * c, h);
            a.lineTo(0.7 * b, 1 * c);
            a.lineTo(0.7 * b, 0.7 * c);
            a.lineTo(0, 0.7 * c);
            a.lineTo(0.2 * b, 0.5 * c);
            a.lineTo(0, 0.3 * c);
            a.lineTo(0.7 * b, 0.3 * c);
            a.lineTo(0.7 * b, 0);
            ce(a);
            b = a.k;
            b.n = new F(0.2, 0.3);
            c = el(0.7, 1, 1, 0.5, 0.7, 0.7, 1, 0.7);
            b.o = new F(c.x, c.y);
            return b
        },
        MessageToUser: "SquareArrow",
        SquareArrow: function(a, b, c) {
            a = new J;
            K(a, 1 * b, 0.5 * c, h);
            a.lineTo(0.7 * b, 1 * c);
            a.lineTo(0, 1 * c);
            a.lineTo(0, 0);
            a.lineTo(0.7 * b, 0);
            ce(a);
            b = a.k;
            b.n = new F(0, 0);
            b.o = new F(0.7, 1);
            return b
        },
        Cone1: function(a, b, c) {
            var a = 0.5 * Nc,
            d = 0.1 * Nc,
            e = new J;
            K(e, 0, 0.9 * c, h);
            e.lineTo(0.5 * b, 0);
            e.lineTo(1 * b, 0.9 * c);
            L(e, 1 * b, (0.9 + d) * c, (0.5 + a) * b, 1 * c, 0.5 * b, 1 * c);
            L(e, (0.5 - a) * b, 1 * c, 0, (0.9 + d) * c, 0, 0.9 * c);
            ce(e);
            b = e.k;
            b.n = new F(0.25, 0.5);
            b.o = new F(0.75, 0.97);
            return b
        },
        Cone2: function(a, b, c) {
            a = new J;
            K(a, 0, 0.9 * c, h);
            L(a, (1 - 0.85 / 0.9) * b, 1 * c, 0.85 / 0.9 * b, 1 * c, 1 * b, 0.9 * c);
            a.lineTo(0.5 * b, 0);
            a.lineTo(0, 0.9 * c);
            ce(a);
            K(a, 0, 0.9 * c, p);
            L(a, (1 - 0.85 / 0.9) * b, 0.8 * c, 0.85 / 0.9 * b, 0.8 * c, 1 * b, 0.9 * c);
            $k(a);
            b = a.k;
            b.n = new F(0.25, 0.5);
            b.o = new F(0.75, 0.82);
            return b
        },
        Cube1: function(a, b, c) {
            a = new J;
            K(a, 0.5 * b, 1 * c, h);
            a.lineTo(1 * b, 0.85 * c);
            a.lineTo(1 * b, 0.15 * c);
            a.lineTo(0.5 * b, 0 * c);
            a.lineTo(0 * b, 0.15 * c);
            a.lineTo(0 * b, 0.85 * c);
            ce(a);
            K(a, 0.5 * b, 1 * c, p);
            a.lineTo(0.5 * b, 0.3 * c);
            a.lineTo(0, 0.15 * c);
            a.moveTo(0.5 * b, 0.3 * c);
            a.lineTo(1 * b, 0.15 * c);
            $k(a);
            b = a.k;
            b.n = new F(0, 0.3);
            b.o = new F(0.5, 0.85);
            return b
        },
        Cube2: function(a, b, c) {
            a = new J;
            K(a, 0, 0.3 * c, h);
            a.lineTo(0 * b, 1 * c);
            a.lineTo(0.7 * b, c);
            a.lineTo(1 * b, 0.7 * c);
            a.lineTo(1 * b, 0 * c);
            a.lineTo(0.3 * b, 0 * c);
            ce(a);
            K(a, 0, 0.3 * c, p);
            a.lineTo(0.7 * b, 0.3 * c);
            a.lineTo(1 * b, 0 * c);
            a.moveTo(0.7 * b, 0.3 * c);
            a.lineTo(0.7 * b, 1 * c);
            $k(a);
            b = a.k;
            b.n = new F(0, 0.3);
            b.o = new F(0.7, 1);
            return b
        },
        MagneticData: "Cylinder1",
        Cylinder1: function(a, b, c) {
            var a = 0.5 * Nc,
            d = 0.1 * Nc,
            e = new J;
            K(e, 0, 0.1 * c, h);
            L(e, 0, (0.1 - d) * c, (0.5 - a) * b, 0, 0.5 * b, 0);
            L(e, (0.5 + a) * b, 0, 1 * b, (0.1 - d) * c, 1 * b, 0.1 * c);
            e.lineTo(b, 0.9 * c);
            L(e, 1 * b, (0.9 + d) * c, (0.5 + a) * b, 1 * c, 0.5 * b, 1 * c);
            L(e, (0.5 - a) * b, 1 * c, 0, (0.9 + d) * c, 0, 0.9 * c);
            e.lineTo(0, 0.1 * c);
            K(e, 0, 0.1 * c, p);
            L(e, 0, (0.1 + d) * c, (0.5 - a) * b, 0.2 * c, 0.5 * b, 0.2 * c);
            L(e, (0.5 + a) * b, 0.2 * c, 1 * b, (0.1 + d) * c, 1 * b, 0.1 * c);
            $k(e);
            b = e.k;
            b.n = new F(0, 0.2);
            b.o = new F(1, 0.9);
            return b
        },
        Cylinder2: function(a, b, c) {
            var a = 0.5 * Nc,
            d = 0.1 * Nc,
            e = new J;
            K(e, 0, 0.9 * c, h);
            e.lineTo(0, 0.1 * c);
            L(e, 0, (0.1 - d) * c, (0.5 - a) * b, 0, 0.5 * b, 0);
            L(e, (0.5 + a) * b, 0, 1 * b, (0.1 - d) * c, 1 * b, 0.1 * c);
            e.lineTo(1 * b, 0.9 * c);
            L(e, 1 * b, (0.9 + d) * c, (0.5 + a) * b, 1 * c, 0.5 * b, 1 * c);
            L(e, (0.5 - a) * b, 1 * c, 0, (0.9 + d) * c, 0, 0.9 * c);
            K(e, 0, 0.9 * c, p);
            L(e, 0, (0.9 - d) * c, (0.5 - a) * b, 0.8 * c, 0.5 * b, 0.8 * c);
            L(e, (0.5 + a) * b, 0.8 * c, 1 * b, (0.9 - d) * c, 1 * b, 0.9 * c);
            $k(e);
            b = e.k;
            b.n = new F(0, 0.1);
            b.o = new F(1, 0.8);
            return b
        },
        Cylinder3: function(a, b, c) {
            var a = 0.1 * Nc,
            d = 0.5 * Nc,
            e = new J;
            K(e, 0.1 * b, 0, h);
            e.lineTo(0.9 * b, 0);
            L(e, (0.9 + a) * b, 0, 1 * b, (0.5 - d) * c, 1 * b, 0.5 * c);
            L(e, 1 * b, (0.5 + d) * c, (0.9 + a) * b, 1 * c, 0.9 * b, 1 * c);
            e.lineTo(0.1 * b, 1 * c);
            L(e, (0.1 - a) * b, 1 * c, 0, (0.5 + d) * c, 0, 0.5 * c);
            L(e, 0, (0.5 - d) * c, (0.1 - a) * b, 0, 0.1 * b, 0);
            K(e, 0.1 * b, 0, p);
            L(e, (0.1 + a) * b, 0, 0.2 * b, (0.5 - d) * c, 0.2 * b, 0.5 * c);
            L(e, 0.2 * b, (0.5 + d) * c, (0.1 + a) * b, 1 * c, 0.1 * b, 1 * c);
            $k(e);
            b = e.k;
            b.n = new F(0.2, 0);
            b.o = new F(0.9, 1);
            return b
        },
        DirectData: "Cylinder4",
        Cylinder4: function(a, b, c) {
            var a = 0.1 * Nc,
            d = 0.5 * Nc,
            e = new J;
            K(e, 0.9 * b, 0, h);
            L(e, (0.9 + a) * b, 0, 1 * b, (0.5 - d) * c, 1 * b, 0.5 * c);
            L(e, 1 * b, (0.5 + d) * c, (0.9 + a) * b, 1 * c, 0.9 * b, 1 * c);
            e.lineTo(0.1 * b, 1 * c);
            L(e, (0.1 - a) * b, 1 * c, 0, (0.5 + d) * c, 0, 0.5 * c);
            L(e, 0, (0.5 - d) * c, (0.1 - a) * b, 0, 0.1 * b, 0);
            e.lineTo(0.9 * b, 0);
            K(e, 0.9 * b, 0, p);
            L(e, (0.9 - a) * b, 0, 0.8 * b, (0.5 - d) * c, 0.8 * b, 0.5 * c);
            L(e, 0.8 * b, (0.5 + d) * c, (0.9 - a) * b, 1 * c, 0.9 * b, 1 * c);
            $k(e);
            b = e.k;
            b.n = new F(0.1, 0);
            b.o = new F(0.8, 1);
            return b
        },
        Prism1: function(a, b, c) {
            a = new J;
            K(a, 0.25 * b, 0.25 * c, h);
            a.lineTo(0.75 * b, 0);
            a.lineTo(b, 0.5 * c);
            a.lineTo(0.5 * b, c);
            a.lineTo(0, c);
            ce(a);
            K(a, 0.25 * b, 0.25 * c, p);
            a.lineTo(0.5 * b, c);
            $k(a);
            b = a.k;
            b.n = new F(0.408, 0.172);
            b.o = new F(0.833, 0.662);
            return b
        },
        Prism2: function(a, b, c) {
            a = new J;
            K(a, 0, 0.25 * c, h);
            a.lineTo(0.75 * b, 0);
            a.lineTo(1 * b, 0.25 * c);
            a.lineTo(0.75 * b, 0.75 * c);
            a.lineTo(0, 1 * c);
            ce(a);
            K(a, 0, c, p);
            a.lineTo(0.25 * b, 0.5 * c);
            a.lineTo(b, 0.25 * c);
            a.moveTo(0, 0.25 * c);
            a.lineTo(0.25 * b, 0.5 * c);
            $k(a);
            b = a.k;
            b.n = new F(0.25, 0.5);
            b.o = new F(0.75, 0.75);
            return b
        },
        Pyramid1: function(a, b, c) {
            a = new J;
            K(a, 0.5 * b, 0, h);
            a.lineTo(b, 0.75 * c);
            a.lineTo(0.5 * b, 1 * c);
            a.lineTo(0, 0.75 * c);
            ce(a);
            K(a, 0.5 * b, 0, p);
            a.lineTo(0.5 * b, 1 * c);
            $k(a);
            b = a.k;
            b.n = new F(0.25, 0.367);
            b.o = new F(0.75, 0.875);
            return b
        },
        Pyramid2: function(a, b, c) {
            a = new J;
            K(a, 0.5 * b, 0, h);
            a.lineTo(b, 0.85 * c);
            a.lineTo(0.5 * b, 1 * c);
            a.lineTo(0, 0.85 * c);
            ce(a);
            K(a, 0.5 * b, 0, p);
            a.lineTo(0.5 * b, 0.7 * c);
            a.lineTo(0, 0.85 * c);
            a.moveTo(0.5 * b, 0.7 * c);
            a.lineTo(1 * b, 0.85 * c);
            $k(a);
            b = a.k;
            b.n = new F(0.25, 0.367);
            b.o = new F(0.75, 0.875);
            return b
        },
        Actor: function(a, b, c) {
            var d = 0.2 * Nc,
            e = 0.1 * Nc,
            a = 0.5,
            g = 0.1,
            i = new J;
            K(i, a * b, (g + 0.1) * c, h);
            L(i, (a - d) * b, (g + 0.1) * c, (a - 0.2) * b, (g + e) * c, (a - 0.2) * b, g * c);
            L(i, (a - 0.2) * b, (g - e) * c, (a - d) * b, (g - 0.1) * c, a * b, (g - 0.1) * c);
            L(i, (a + d) * b, (g - 0.1) * c, (a + 0.2) * b, (g - e) * c, (a + 0.2) * b, g * c);
            L(i, (a + 0.2) * b, (g + e) * c, (a + d) * b, (g + 0.1) * c, a * b, (g + 0.1) * c);
            d = 0.05;
            e = Nc * d;
            K(i, 0.5 * b, 0.2 * c, h);
            i.lineTo(0.95 * b, 0.2 * c);
            a = 0.95;
            g = 0.25;
            L(i, (a + e) * b, (g - d) * c, (a + d) * b, (g - e) * c, (a + d) * b, g * c);
            i.lineTo(1 * b, 0.6 * c);
            i.lineTo(0.85 * b, 0.6 * c);
            i.lineTo(0.85 * b, 0.35 * c);
            d = 0.025;
            e = Nc * d;
            a = 0.825;
            g = 0.35;
            L(i, (a + d) * b, (g - e) * c, (a + e) * b, (g - d) * c, a * b, (g - d) * c);
            L(i, (a - e) * b, (g - d) * c, (a - d) * b, (g - e) * c, (a - d) * b, g * c);
            i.lineTo(0.8 * b, 1 * c);
            i.lineTo(0.55 * b, 1 * c);
            i.lineTo(0.55 * b, 0.7 * c);
            d = 0.05;
            e = Nc * d;
            a = 0.5;
            g = 0.7;
            L(i, (a + d) * b, (g - e) * c, (a + e) * b, (g - d) * c, a * b, (g - d) * c);
            L(i, (a - e) * b, (g - d) * c, (a - d) * b, (g - e) * c, (a - d) * b, g * c);
            i.lineTo(0.45 * b, 1 * c);
            i.lineTo(0.2 * b, 1 * c);
            i.lineTo(0.2 * b, 0.35 * c);
            d = 0.025;
            e = Nc * d;
            a = 0.175;
            g = 0.35;
            L(i, (a + d) * b, (g - e) * c, (a + e) * b, (g - d) * c, a * b, (g - d) * c);
            L(i, (a - e) * b, (g - d) * c, (a - d) * b, (g - e) * c, (a - d) * b, g * c);
            i.lineTo(0.15 * b, 0.6 * c);
            i.lineTo(0 * b, 0.6 * c);
            i.lineTo(0 * b, 0.25 * c);
            d = 0.05;
            e = Nc * d;
            a = 0.05;
            g = 0.25;
            L(i, (a - d) * b, (g - e) * c, (a - e) * b, (g - d) * c, a * b, (g - d) * c);
            i.lineTo(0.5 * b, 0.2 * c);
            b = i.k;
            b.n = new F(0.2, 0.2);
            b.o = new F(0.8, 0.65);
            return b
        },
        Card: function(a, b, c) {
            a = new J;
            K(a, 1 * b, 0 * c, h);
            a.lineTo(1 * b, 1 * c);
            a.lineTo(0 * b, 1 * c);
            a.lineTo(0 * b, 0.2 * c);
            a.lineTo(0.2 * b, 0 * c);
            ce(a);
            b = a.k;
            b.n = new F(0, 0.2);
            b.o = new F(1, 1);
            return b
        },
        Collate: function(a, b, c) {
            a = new J;
            K(a, 0.5 * b, 0.5 * c, h);
            a.lineTo(0, 0);
            a.lineTo(1 * b, 0);
            a.lineTo(0.5 * b, 0.5 * c);
            K(a, 0.5 * b, 0.5 * c, h);
            a.lineTo(1 * b, 1 * c);
            a.lineTo(0, 1 * c);
            a.lineTo(0.5 * b, 0.5 * c);
            b = a.k;
            b.n = new F(0.25, 0);
            b.o = new F(0.75, 0.25);
            return b
        },
        CreateRequest: function(a, b, c) {
            a = a ? a.Mb: 0;
            0 === a && (a = 0.1);
            var d = new J;
            K(d, 0, 0, h);
            d.lineTo(1 * b, 0);
            d.lineTo(1 * b, 1 * c);
            d.lineTo(0, 1 * c);
            ce(d);
            K(d, 0, a * c, p);
            d.lineTo(1 * b, a * c);
            d.moveTo(0, (1 - a) * c);
            d.lineTo(1 * b, (1 - a) * c);
            $k(d);
            b = d.k;
            b.n = new F(0, a);
            b.o = new F(1, 1 - a);
            return b
        },
        Database: function(a, b, c) {
            var a = new J,
            d = 0.5 * Nc,
            e = 0.1 * Nc;
            K(a, 1 * b, 0.1 * c, h);
            a.lineTo(1 * b, 0.9 * c);
            L(a, 1 * b, (0.9 + e) * c, (0.5 + d) * b, 1 * c, 0.5 * b, 1 * c);
            L(a, (0.5 - d) * b, 1 * c, 0, (0.9 + e) * c, 0, 0.9 * c);
            a.lineTo(0, 0.1 * c);
            L(a, 0, (0.1 - e) * c, (0.5 - d) * b, 0, 0.5 * b, 0);
            L(a, (0.5 + d) * b, 0, 1 * b, (0.1 - e) * c, 1 * b, 0.1 * c);
            K(a, 1 * b, 0.1 * c, p);
            L(a, 1 * b, (0.1 + e) * c, (0.5 + d) * b, 0.2 * c, 0.5 * b, 0.2 * c);
            L(a, (0.5 - d) * b, 0.2 * c, 0, (0.1 + e) * c, 0, 0.1 * c);
            a.moveTo(1 * b, 0.2 * c);
            L(a, 1 * b, (0.2 + e) * c, (0.5 + d) * b, 0.3 * c, 0.5 * b, 0.3 * c);
            L(a, (0.5 - d) * b, 0.3 * c, 0, (0.2 + e) * c, 0, 0.2 * c);
            a.moveTo(1 * b, 0.3 * c);
            L(a, 1 * b, (0.3 + e) * c, (0.5 + d) * b, 0.4 * c, 0.5 * b, 0.4 * c);
            L(a, (0.5 - d) * b, 0.4 * c, 0, (0.3 + e) * c, 0, 0.3 * c);
            $k(a);
            b = a.k;
            b.n = new F(0, 0.4);
            b.o = new F(1, 0.9);
            return b
        },
        StoredData: "DataStorage",
        DataStorage: function(a, b, c) {
            a = new J;
            K(a, 0, 0, h);
            a.lineTo(0.75 * b, 0);
            L(a, 1 * b, 0, 1 * b, 1 * c, 0.75 * b, 1 * c);
            a.lineTo(0, 1 * c);
            L(a, 0.25 * b, 0.9 * c, 0.25 * b, 0.1 * c, 0, 0);
            ce(a);
            b = a.k;
            b.n = new F(0.226, 0);
            b.o = new F(0.81, 1);
            return b
        },
        DiskStorage: function(a, b, c) {
            var a = new J,
            d = 0.5 * Nc,
            e = 0.1 * Nc;
            K(a, 1 * b, 0.1 * c, h);
            a.lineTo(1 * b, 0.9 * c);
            L(a, 1 * b, (0.9 + e) * c, (0.5 + d) * b, 1 * c, 0.5 * b, 1 * c);
            L(a, (0.5 - d) * b, 1 * c, 0, (0.9 + e) * c, 0, 0.9 * c);
            a.lineTo(0, 0.1 * c);
            L(a, 0, (0.1 - e) * c, (0.5 - d) * b, 0, 0.5 * b, 0);
            L(a, (0.5 + d) * b, 0, 1 * b, (0.1 - e) * c, 1 * b, 0.1 * c);
            K(a, 1 * b, 0.1 * c, p);
            L(a, 1 * b, (0.1 + e) * c, (0.5 + d) * b, 0.2 * c, 0.5 * b, 0.2 * c);
            L(a, (0.5 - d) * b, 0.2 * c, 0, (0.1 + e) * c, 0, 0.1 * c);
            a.moveTo(1 * b, 0.2 * c);
            L(a, 1 * b, (0.2 + e) * c, (0.5 + d) * b, 0.3 * c, 0.5 * b, 0.3 * c);
            L(a, (0.5 - d) * b, 0.3 * c, 0, (0.2 + e) * c, 0, 0.2 * c);
            $k(a);
            b = a.k;
            b.n = new F(0, 0.3);
            b.o = new F(1, 0.9);
            return b
        },
        Display: function(a, b, c) {
            a = new J;
            K(a, 0.25 * b, 0, h);
            a.lineTo(0.75 * b, 0);
            L(a, 1 * b, 0, 1 * b, 1 * c, 0.75 * b, 1 * c);
            a.lineTo(0.25 * b, 1 * c);
            a.lineTo(0, 0.5 * c);
            ce(a);
            b = a.k;
            b.n = new F(0.25, 0);
            b.o = new F(0.75, 1);
            return b
        },
        DividedEvent: function(a, b, c) {
            a = a ? a.Mb: 0;
            0 === a ? a = 0.2 : 0.15 > a && (a = 0.15);
            var d = new J,
            e = 0.2 * Nc;
            K(d, 0, 0.2 * c, h);
            L(d, 0, (0.2 - e) * c, (0.2 - e) * b, 0, 0.2 * b, 0);
            d.lineTo(0.8 * b, 0);
            L(d, (0.8 + e) * b, 0, 1 * b, (0.2 - e) * c, 1 * b, 0.2 * c);
            d.lineTo(1 * b, 0.8 * c);
            L(d, 1 * b, (0.8 + e) * c, (0.8 + e) * b, 1 * c, 0.8 * b, 1 * c);
            d.lineTo(0.2 * b, 1 * c);
            L(d, (0.2 - e) * b, 1 * c, 0, (0.8 + e) * c, 0, 0.8 * c);
            d.lineTo(0, 0.2 * c);
            K(d, 0, a * c, p);
            d.lineTo(1 * b, a * c);
            $k(d);
            b = d.k;
            b.n = new F(0, a);
            b.o = new F(1, 1 - a);
            return b
        },
        DividedProcess: function(a, b, c) {
            a = a ? a.Mb: 0;
            0.1 > a && (a = 0.1);
            var d = new J;
            K(d, 0, 0, h);
            d.lineTo(1 * b, 0);
            d.lineTo(1 * b, 1 * c);
            d.lineTo(0, 1 * c);
            ce(d);
            K(d, 0, a * c, p);
            d.lineTo(1 * b, a * c);
            $k(d);
            b = d.k;
            b.n = new F(0, a);
            b.o = new F(1, 1);
            return b
        },
        Document: function(a, b, c) {
            c /= 0.8;
            a = new J;
            K(a, 0, 0.7 * c, h);
            a.lineTo(0, 0);
            a.lineTo(1 * b, 0);
            a.lineTo(1 * b, 0.7 * c);
            L(a, 0.5 * b, 0.4 * c, 0.5 * b, 1 * c, 0, 0.7 * c);
            ce(a);
            b = a.k;
            b.n = new F(0, 0);
            b.o = new F(1, 0.6);
            return b
        },
        ExternalOrganization: function(a, b, c) {
            a = a ? a.Mb: 0;
            0.2 > a && (a = 0.2);
            var d = new J;
            K(d, 0, 0, h);
            d.lineTo(1 * b, 0);
            d.lineTo(1 * b, 1 * c);
            d.lineTo(0, 1 * c);
            ce(d);
            K(d, a * b, 0, p);
            d.lineTo(0, a * c);
            d.moveTo(1 * b, a * c);
            d.lineTo((1 - a) * b, 0);
            d.moveTo(0, (1 - a) * c);
            d.lineTo(a * b, 1 * c);
            d.moveTo((1 - a) * b, 1 * c);
            d.lineTo(1 * b, (1 - a) * c);
            $k(d);
            b = d.k;
            b.n = new F(a / 2, a / 2);
            b.o = new F(1 - a / 2, 1 - a / 2);
            return b
        },
        ExternalProcess: function(a, b, c) {
            a = new J;
            K(a, 0.5 * b, 0, h);
            a.lineTo(1 * b, 0.5 * c);
            a.lineTo(0.5 * b, 1 * c);
            a.lineTo(0, 0.5 * c);
            ce(a);
            K(a, 0.1 * b, 0.4 * c, p);
            a.lineTo(0.1 * b, 0.6 * c);
            a.moveTo(0.9 * b, 0.6 * c);
            a.lineTo(0.9 * b, 0.4 * c);
            a.moveTo(0.6 * b, 0.1 * c);
            a.lineTo(0.4 * b, 0.1 * c);
            a.moveTo(0.4 * b, 0.9 * c);
            a.lineTo(0.6 * b, 0.9 * c);
            $k(a);
            b = a.k;
            b.n = new F(0.25, 0.25);
            b.o = new F(0.75, 0.75);
            return b
        },
        File: function(a, b, c) {
            a = new J;
            K(a, 0, 0, h);
            a.lineTo(0.75 * b, 0);
            a.lineTo(1 * b, 0.25 * c);
            a.lineTo(1 * b, 1 * c);
            a.lineTo(0, 1 * c);
            ce(a);
            K(a, 0.75 * b, 0, p);
            a.lineTo(0.75 * b, 0.25 * c);
            a.lineTo(1 * b, 0.25 * c);
            $k(a);
            b = a.k;
            b.n = new F(0, 0.25);
            b.o = new F(1, 1);
            return b
        },
        Interrupt: function(a, b, c) {
            a = new J;
            K(a, 1 * b, 0.5 * c, h);
            a.lineTo(0, 1 * c);
            a.lineTo(0, 0);
            a.lineTo(1 * b, 0.5 * c);
            K(a, 1 * b, 0.5 * c, p);
            a.lineTo(1 * b, 1 * c);
            K(a, 1 * b, 0.5 * c, p);
            a.lineTo(1 * b, 0);
            b = a.k;
            b.n = new F(0, 0.25);
            b.o = new F(0.5, 0.75);
            return b
        },
        InternalStorage: function(a, b, c) {
            var d = a ? a.Mb: 0,
            a = a ? a.Xr: 0;
            0 === d && (d = 0.1);
            0 === a && (a = 0.1);
            var e = new J;
            K(e, 0, 0, h);
            e.lineTo(1 * b, 0);
            e.lineTo(1 * b, 1 * c);
            e.lineTo(0, 1 * c);
            ce(e);
            K(e, d * b, 0, p);
            e.lineTo(d * b, 1 * c);
            e.moveTo(0, a * c);
            e.lineTo(1 * b, a * c);
            $k(e);
            b = e.k;
            b.n = new F(d, a);
            b.o = new F(1, 1);
            return b
        },
        Junction: function(a, b, c) {
            var a = new J,
            d = 1 / Math.SQRT2,
            e = (1 - 1 / Math.SQRT2) / 2,
            g = 0.5 * Nc;
            K(a, 1 * b, 0.5 * c, h);
            L(a, 1 * b, (0.5 + g) * c, (0.5 + g) * b, 1 * c, 0.5 * b, 1 * c);
            L(a, (0.5 - g) * b, 1 * c, 0, (0.5 + g) * c, 0, 0.5 * c);
            L(a, 0, (0.5 - g) * c, (0.5 - g) * b, 0, 0.5 * b, 0);
            L(a, (0.5 + g) * b, 0, 1 * b, (0.5 - g) * c, 1 * b, 0.5 * c);
            K(a, (e + d) * b, (e + d) * c, p);
            a.lineTo(e * b, e * c);
            a.moveTo(e * b, (e + d) * c);
            a.lineTo((e + d) * b, e * c);
            $k(a);
            b = a.k;
            b.Pb = Rg;
            return b
        },
        LinedDocument: function(a, b, c) {
            c /= 0.8;
            a = new J;
            K(a, 0, 0.7 * c, h);
            a.lineTo(0, 0);
            a.lineTo(1 * b, 0);
            a.lineTo(1 * b, 0.7 * c);
            L(a, 0.5 * b, 0.4 * c, 0.5 * b, 1 * c, 0, 0.7 * c);
            ce(a);
            K(a, 0.1 * b, 0, p);
            a.lineTo(0.1 * b, 0.75 * c);
            $k(a);
            b = a.k;
            b.n = new F(0.1, 0);
            b.o = new F(1, 0.6);
            return b
        },
        LoopLimit: function(a, b, c) {
            a = new J;
            K(a, 0, 1 * c, h);
            a.lineTo(0, 0.25 * c);
            a.lineTo(0.25 * b, 0);
            a.lineTo(0.75 * b, 0);
            a.lineTo(1 * b, 0.25 * c);
            a.lineTo(1 * b, 1 * c);
            ce(a);
            b = a.k;
            b.n = new F(0, 0.25);
            b.o = new F(1, 1);
            return b
        },
        SequentialData: "MagneticTape",
        MagneticTape: function(a, b, c) {
            var a = new J,
            d = 0.5 * Nc;
            K(a, 0.5 * b, 1 * c, h);
            L(a, (0.5 - d) * b, 1 * c, 0, (0.5 + d) * c, 0, 0.5 * c);
            L(a, 0, (0.5 - d) * c, (0.5 - d) * b, 0, 0.5 * b, 0);
            L(a, (0.5 + d) * b, 0, 1 * b, (0.5 - d) * c, 1 * b, 0.5 * c);
            L(a, 1 * b, (0.5 + d) * c, (0.5 + d) * b, 0.9 * c, 0.6 * b, 0.9 * c);
            a.lineTo(1 * b, 0.9 * c);
            a.lineTo(1 * b, 1 * c);
            a.lineTo(0.5 * b, 1 * c);
            b = a.k;
            b.n = new F(0.15, 0.15);
            b.o = new F(0.85, 0.8);
            return b
        },
        ManualInput: function(a, b, c) {
            a = new J;
            K(a, 1 * b, 0, h);
            a.lineTo(1 * b, 1 * c);
            a.lineTo(0, 1 * c);
            a.lineTo(0, 0.25 * c);
            ce(a);
            b = a.k;
            b.n = new F(0, 0.25);
            b.o = new F(1, 1);
            return b
        },
        MessageFromUser: function(a, b, c) {
            a = a ? a.Mb: 0;
            0 === a && (a = 0.7);
            var d = new J;
            K(d, 0, 0, h);
            d.lineTo(1 * b, 0);
            d.lineTo(a * b, 0.5 * c);
            d.lineTo(1 * b, 1 * c);
            d.lineTo(0, 1 * c);
            ce(d);
            b = d.k;
            b.n = new F(0, 0);
            b.o = new F(a, 1);
            return b
        },
        MicroformProcessing: function(a, b, c) {
            a = a ? a.Mb: 0;
            0 === a && (a = 0.25);
            var d = new J;
            K(d, 0, 0, h);
            d.lineTo(0.5 * b, a * c);
            d.lineTo(1 * b, 0);
            d.lineTo(1 * b, 1 * c);
            d.lineTo(0.5 * b, (1 - a) * c);
            d.lineTo(0, 1 * c);
            ce(d);
            b = d.k;
            b.n = new F(0, a);
            b.o = new F(1, 1 - a);
            return b
        },
        MicroformRecording: function(a, b, c) {
            a = new J;
            K(a, 0, 0, h);
            a.lineTo(0.75 * b, 0.25 * c);
            a.lineTo(1 * b, 0.15 * c);
            a.lineTo(1 * b, 0.85 * c);
            a.lineTo(0.75 * b, 0.75 * c);
            a.lineTo(0, 1 * c);
            ce(a);
            b = a.k;
            b.n = new F(0, 0.25);
            b.o = new F(1, 0.75);
            return b
        },
        MultiDocument: function(a, b, c) {
            c /= 0.8;
            a = new J;
            K(a, b, 0, h);
            a.lineTo(b, 0.5 * c);
            L(a, 0.96 * b, 0.47 * c, 0.93 * b, 0.45 * c, 0.9 * b, 0.44 * c);
            a.lineTo(0.9 * b, 0.6 * c);
            L(a, 0.86 * b, 0.57 * c, 0.83 * b, 0.55 * c, 0.8 * b, 0.54 * c);
            a.lineTo(0.8 * b, 0.7 * c);
            L(a, 0.4 * b, 0.4 * c, 0.4 * b, 1 * c, 0, 0.7 * c);
            a.lineTo(0, 0.2 * c);
            a.lineTo(0.1 * b, 0.2 * c);
            a.lineTo(0.1 * b, 0.1 * c);
            a.lineTo(0.2 * b, 0.1 * c);
            a.lineTo(0.2 * b, 0);
            ce(a);
            K(a, 0.1 * b, 0.2 * c, p);
            a.lineTo(0.8 * b, 0.2 * c);
            a.lineTo(0.8 * b, 0.54 * c);
            a.moveTo(0.2 * b, 0.1 * c);
            a.lineTo(0.9 * b, 0.1 * c);
            a.lineTo(0.9 * b, 0.44 * c);
            $k(a);
            b = a.k;
            b.n = new F(0, 0.25);
            b.o = new F(0.8, 0.77);
            return b
        },
        MultiProcess: function(a, b, c) {
            a = new J;
            K(a, 0.1 * b, 0.1 * c, h);
            a.lineTo(0.2 * b, 0.1 * c);
            a.lineTo(0.2 * b, 0);
            a.lineTo(1 * b, 0);
            a.lineTo(1 * b, 0.8 * c);
            a.lineTo(0.9 * b, 0.8 * c);
            a.lineTo(0.9 * b, 0.9 * c);
            a.lineTo(0.8 * b, 0.9 * c);
            a.lineTo(0.8 * b, 1 * c);
            a.lineTo(0, 1 * c);
            a.lineTo(0, 0.2 * c);
            a.lineTo(0.1 * b, 0.2 * c);
            ce(a);
            K(a, 0.2 * b, 0.1 * c, p);
            a.lineTo(0.9 * b, 0.1 * c);
            a.lineTo(0.9 * b, 0.8 * c);
            a.moveTo(0.1 * b, 0.2 * c);
            a.lineTo(0.8 * b, 0.2 * c);
            a.lineTo(0.8 * b, 0.9 * c);
            $k(a);
            b = a.k;
            b.n = new F(0, 0.2);
            b.o = new F(0.8, 1);
            return b
        },
        OfflineStorage: function(a, b, c) {
            a = a ? a.Mb: 0;
            0 === a && (a = 0.1);
            var d = 1 - a,
            e = new J;
            K(e, 0, 0, h);
            e.lineTo(1 * b, 0);
            e.lineTo(0.5 * b, 1 * c);
            ce(e);
            K(e, 0.5 * a * b, a * c, p);
            e.lineTo((1 - 0.5 * a) * b, a * c);
            $k(e);
            b = e.k;
            b.n = new F(d / 4 + 0.5 * a, a);
            b.o = new F(3 * d / 4 + 0.5 * a, a + 0.5 * d);
            return b
        },
        OffPageConnector: function(a, b, c) {
            a = new J;
            K(a, 0, 0, h);
            a.lineTo(0.75 * b, 0);
            a.lineTo(1 * b, 0.5 * c);
            a.lineTo(0.75 * b, 1 * c);
            a.lineTo(0, 1 * c);
            ce(a);
            b = a.k;
            b.n = new F(0, 0);
            b.o = new F(0.75, 1);
            return b
        },
        Or: function(a, b, c) {
            var a = new J,
            d = 0.5 * Nc;
            K(a, 1 * b, 0.5 * c, h);
            L(a, 1 * b, (0.5 + d) * c, (0.5 + d) * b, 1 * c, 0.5 * b, 1 * c);
            L(a, (0.5 - d) * b, 1 * c, 0, (0.5 + d) * c, 0, 0.5 * c);
            L(a, 0, (0.5 - d) * c, (0.5 - d) * b, 0, 0.5 * b, 0);
            L(a, (0.5 + d) * b, 0, 1 * b, (0.5 - d) * c, 1 * b, 0.5 * c);
            K(a, 1 * b, 0.5 * c, p);
            a.lineTo(0, 0.5 * c);
            a.moveTo(0.5 * b, 1 * c);
            a.lineTo(0.5 * b, 0);
            $k(a);
            b = a.k;
            b.Pb = Rg;
            return b
        },
        PaperTape: function(a, b, c) {
            c /= 0.8;
            a = new J;
            K(a, 0, 0.7 * c, h);
            a.lineTo(0, 0.3 * c);
            L(a, 0.5 * b, 0.6 * c, 0.5 * b, 0, 1 * b, 0.3);
            a.lineTo(1 * b, 0.7 * c);
            L(a, 0.5 * b, 0.4 * c, 0.5 * b, 1 * c, 0, 0.7 * c);
            ce(a);
            b = a.k;
            b.n = new F(0, 0.49);
            b.o = new F(1, 0.75);
            return b
        },
        PrimitiveFromCall: function(a, b, c) {
            var d = a ? a.Mb: 0,
            a = a ? a.Xr: 0;
            0 === d && (d = 0.1);
            0 === a && (a = 0.3);
            var e = new J;
            K(e, 0, 0, h);
            e.lineTo(1 * b, 0);
            e.lineTo((1 - a) * b, 0.5 * c);
            e.lineTo(1 * b, 1 * c);
            e.lineTo(0, 1 * c);
            ce(e);
            b = e.k;
            b.n = new F(d, 0);
            b.o = new F(1 - a, 1);
            return b
        },
        PrimitiveToCall: function(a, b, c) {
            var d = a ? a.Mb: 0,
            a = a ? a.Xr: 0;
            0 === d && (d = 0.1);
            0 === a && (a = 0.3);
            var e = new J;
            K(e, 0, 0, h);
            e.lineTo((1 - a) * b, 0);
            e.lineTo(1 * b, 0.5 * c);
            e.lineTo((1 - a) * b, 1 * c);
            e.lineTo(0, 1 * c);
            ce(e);
            b = e.k;
            b.n = new F(d, 0);
            b.o = new F(1 - a, 1);
            return b
        },
        Subroutine: "Procedure",
        Procedure: function(a, b, c) {
            a = a ? a.Mb: 0;
            0 === a && (a = 0.1);
            var d = new J;
            K(d, 0, 0, h);
            d.lineTo(1 * b, 0);
            d.lineTo(1 * b, 1 * c);
            d.lineTo(0, 1 * c);
            ce(d);
            K(d, (1 - a) * b, 0, p);
            d.lineTo((1 - a) * b, 1 * c);
            d.moveTo(a * b, 0);
            d.lineTo(a * b, 1 * c);
            $k(d);
            b = d.k;
            b.n = new F(a, 0);
            b.o = new F(1 - a, 1);
            return b
        },
        Process: function(a, b, c) {
            a = a ? a.Mb: 0;
            0 === a && (a = 0.1);
            var d = new J;
            K(d, 0, 0, h);
            d.lineTo(1 * b, 0);
            d.lineTo(1 * b, 1 * c);
            d.lineTo(0, 1 * c);
            ce(d);
            K(d, a * b, 0, p);
            d.lineTo(a * b, 1 * c);
            $k(d);
            b = d.k;
            b.n = new F(a, 0);
            b.o = new F(1, 1);
            return b
        },
        Sort: function(a, b, c) {
            a = new J;
            K(a, 0.5 * b, 0, h);
            a.lineTo(1 * b, 0.5 * c);
            a.lineTo(0.5 * b, 1 * c);
            a.lineTo(0, 0.5 * c);
            ce(a);
            K(a, 0, 0.5 * c, p);
            a.lineTo(1 * b, 0.5 * c);
            $k(a);
            b = a.k;
            b.n = new F(0.25, 0.25);
            b.o = new F(0.75, 0.5);
            return b
        },
        Start: function(a, b, c) {
            a = new J;
            K(a, 0.25 * b, 0, h);
            a.lineTo(0.75 * b, 0);
            L(a, 1 * b, 0, 1 * b, 1 * c, 0.75 * b, 1 * c);
            a.lineTo(0.25 * b, 1 * c);
            L(a, 0, 1 * c, 0, 0, 0.25 * b, 0);
            K(a, 0.25 * b, 0, p);
            a.lineTo(0.25 * b, 1 * c);
            a.moveTo(0.75 * b, 0);
            a.lineTo(0.75 * b, 1 * c);
            $k(a);
            b = a.k;
            b.n = new F(0.25, 0);
            b.o = new F(0.75, 1);
            return b
        },
        Terminator: function(a, b, c) {
            a = new J;
            K(a, 0.25 * b, 0, h);
            a.lineTo(0.75 * b, 0);
            L(a, 1 * b, 0, 1 * b, 1 * c, 0.75 * b, 1 * c);
            a.lineTo(0.25 * b, 1 * c);
            L(a, 0, 1 * c, 0, 0, 0.25 * b, 0);
            b = a.k;
            b.n = new F(0.23, 0);
            b.o = new F(0.77, 1);
            return b
        },
        TransmittalTape: function(a, b, c) {
            a = a ? a.Mb: 0;
            0 === a && (a = 0.1);
            var d = new J;
            K(d, 0, 0, h);
            d.lineTo(1 * b, 0);
            d.lineTo(1 * b, 1 * c);
            d.lineTo(0.75 * b, (1 - a) * c);
            d.lineTo(0, (1 - a) * c);
            ce(d);
            b = d.k;
            b.n = new F(0, 0);
            b.o = new F(1, 1 - a);
            return b
        },
        AndGate: function(a, b, c) {
            var a = new J,
            d = 0.5 * Nc;
            K(a, 0, 0, h);
            a.lineTo(0.5 * b, 0);
            L(a, (0.5 + d) * b, 0, 1 * b, (0.5 - d) * c, 1 * b, 0.5 * c);
            L(a, 1 * b, (0.5 + d) * c, (0.5 + d) * b, 1 * c, 0.5 * b, 1 * c);
            a.lineTo(0, 1 * c);
            ce(a);
            b = a.k;
            b.n = new F(0, 0);
            b.o = new F(0.55, 1);
            return b
        },
        Buffer: function(a, b, c) {
            a = new J;
            K(a, 0, 0, h);
            a.lineTo(1 * b, 0.5 * c);
            a.lineTo(0, 1 * c);
            ce(a);
            b = a.k;
            b.n = new F(0, 0.25);
            b.o = new F(0.5, 0.75);
            return b
        },
        Clock: function(a, b, c) {
            var a = new J,
            d = 0.5 * Nc;
            K(a, 1 * b, 0.5 * c, h);
            L(a, 1 * b, (0.5 + d) * c, (0.5 + d) * b, 1 * c, 0.5 * b, 1 * c);
            L(a, (0.5 - d) * b, 1 * c, 0, (0.5 + d) * c, 0, 0.5 * c);
            L(a, 0, (0.5 - d) * c, (0.5 - d) * b, 0, 0.5 * b, 0);
            L(a, (0.5 + d) * b, 0, 1 * b, (0.5 - d) * c, 1 * b, 0.5 * c);
            K(a, 1 * b, 0.5 * c, p);
            a.lineTo(1 * b, 0.5 * c);
            K(a, 0.8 * b, 0.75 * c, p);
            a.lineTo(0.8 * b, 0.25 * c);
            a.lineTo(0.6 * b, 0.25 * c);
            a.lineTo(0.6 * b, 0.75 * c);
            a.lineTo(0.4 * b, 0.75 * c);
            a.lineTo(0.4 * b, 0.25 * c);
            a.lineTo(0.2 * b, 0.25 * c);
            a.lineTo(0.2 * b, 0.75 * c);
            $k(a);
            b = a.k;
            b.Pb = Rg;
            return b
        },
        Ground: function(a, b, c) {
            a = new J;
            K(a, 0.5 * b, 0, p);
            a.lineTo(0.5 * b, 0.4 * c);
            a.moveTo(0.2 * b, 0.6 * c);
            a.lineTo(0.8 * b, 0.6 * c);
            a.moveTo(0.3 * b, 0.8 * c);
            a.lineTo(0.7 * b, 0.8 * c);
            a.moveTo(0.4 * b, 1 * c);
            a.lineTo(0.6 * b, 1 * c);
            return a.k
        },
        Inverter: function(a, b, c) {
            var a = new J,
            d = 0.1 * Nc;
            K(a, 0.8 * b, 0.5 * c, h);
            a.lineTo(0, 1 * c);
            a.lineTo(0, 0);
            a.lineTo(0.8 * b, 0.5 * c);
            K(a, 1 * b, 0.5 * c, h);
            L(a, 1 * b, (0.5 + d) * c, (0.9 + d) * b, 0.6 * c, 0.9 * b, 0.6 * c);
            L(a, (0.9 - d) * b, 0.6 * c, 0.8 * b, (0.5 + d) * c, 0.8 * b, 0.5 * c);
            L(a, 0.8 * b, (0.5 - d) * c, (0.9 - d) * b, 0.4 * c, 0.9 * b, 0.4 * c);
            L(a, (0.9 + d) * b, 0.4 * c, 1 * b, (0.5 - d) * c, 1 * b, 0.5 * c);
            b = a.k;
            b.n = new F(0, 0.25);
            b.o = new F(0.4, 0.75);
            return b
        },
        NandGate: function(a, b, c) {
            var a = new J,
            d = 0.5 * Nc,
            e = 0.4 * Nc,
            g = 0.1 * Nc;
            K(a, 0.8 * b, 0.5 * c, h);
            L(a, 0.8 * b, (0.5 + e) * c, (0.4 + d) * b, 1 * c, 0.4 * b, 1 * c);
            a.lineTo(0, 1 * c);
            a.lineTo(0, 0);
            a.lineTo(0.4 * b, 0);
            L(a, (0.4 + d) * b, 0, 0.8 * b, (0.5 - e) * c, 0.8 * b, 0.5 * c);
            K(a, 1 * b, 0.5 * c, h);
            L(a, 1 * b, (0.5 + g) * c, (0.9 + g) * b, 0.6 * c, 0.9 * b, 0.6 * c);
            L(a, (0.9 - g) * b, 0.6 * c, 0.8 * b, (0.5 + g) * c, 0.8 * b, 0.5 * c);
            L(a, 0.8 * b, (0.5 - g) * c, (0.9 - g) * b, 0.4 * c, 0.9 * b, 0.4 * c);
            L(a, (0.9 + g) * b, 0.4 * c, 1 * b, (0.5 - g) * c, 1 * b, 0.5 * c);
            b = a.k;
            b.n = new F(0, 0.05);
            b.o = new F(0.55, 0.95);
            return b
        },
        NorGate: function(a, b, c) {
            var a = new J,
            d = 0.5,
            e = Nc * d,
            g = 0,
            i = 0.5;
            K(a, 0.8 * b, 0.5 * c, h);
            L(a, 0.7 * b, (i + e) * c, (g + e) * b, (i + d) * c, 0, 1 * c);
            L(a, 0.25 * b, 0.75 * c, 0.25 * b, 0.25 * c, 0, 0);
            L(a, (g + e) * b, (i - d) * c, 0.7 * b, (i - e) * c, 0.8 * b, 0.5 * c);
            d = 0.1;
            e = 0.1 * Nc;
            g = 0.9;
            i = 0.5;
            K(a, (g - d) * b, i * c, h);
            L(a, (g - d) * b, (i - e) * c, (g - e) * b, (i - d) * c, g * b, (i - d) * c);
            L(a, (g + e) * b, (i - d) * c, (g + d) * b, (i - e) * c, (g + d) * b, i * c);
            L(a, (g + d) * b, (i + e) * c, (g + e) * b, (i + d) * c, g * b, (i + d) * c);
            L(a, (g - e) * b, (i + d) * c, (g - d) * b, (i + e) * c, (g - d) * b, i * c);
            b = a.k;
            b.n = new F(0.2, 0.25);
            b.o = new F(0.6, 0.75);
            return b
        },
        OrGate: function(a, b, c) {
            var a = new J,
            d = 0.5 * Nc;
            K(a, 0, 0, h);
            L(a, (0 + d + d) * b, 0 * c, 0.8 * b, (0.5 - d) * c, 1 * b, 0.5 * c);
            L(a, 0.8 * b, (0.5 + d) * c, (0 + d + d) * b, 1 * c, 0, 1 * c);
            L(a, 0.25 * b, 0.75 * c, 0.25 * b, 0.25 * c, 0, 0);
            ce(a);
            b = a.k;
            b.n = new F(0.2, 0.25);
            b.o = new F(0.75, 0.75);
            return b
        },
        XnorGate: function(a, b, c) {
            var a = new J,
            d = 0.5,
            e = Nc * d,
            g = 0.2,
            i = 0.5;
            K(a, 0.1 * b, 0, p);
            L(a, 0.35 * b, 0.25 * c, 0.35 * b, 0.75 * c, 0.1 * b, 1 * c);
            K(a, 0.8 * b, 0.5 * c, h);
            L(a, 0.7 * b, (i + e) * c, (g + e) * b, (i + d) * c, 0.2 * b, 1 * c);
            L(a, 0.45 * b, 0.75 * c, 0.45 * b, 0.25 * c, 0.2 * b, 0);
            L(a, (g + e) * b, (i - d) * c, 0.7 * b, (i - e) * c, 0.8 * b, 0.5 * c);
            d = 0.1;
            e = 0.1 * Nc;
            g = 0.9;
            i = 0.5;
            K(a, (g - d) * b, i * c, h);
            L(a, (g - d) * b, (i - e) * c, (g - e) * b, (i - d) * c, g * b, (i - d) * c);
            L(a, (g + e) * b, (i - d) * c, (g + d) * b, (i - e) * c, (g + d) * b, i * c);
            L(a, (g + d) * b, (i + e) * c, (g + e) * b, (i + d) * c, g * b, (i + d) * c);
            L(a, (g - e) * b, (i + d) * c, (g - d) * b, (i + e) * c, (g - d) * b, i * c);
            b = a.k;
            b.n = new F(0.4, 0.25);
            b.o = new F(0.65, 0.75);
            return b
        },
        XorGate: function(a, b, c) {
            var a = new J,
            d = 0.5 * Nc;
            K(a, 0.1 * b, 0, p);
            L(a, 0.35 * b, 0.25 * c, 0.35 * b, 0.75 * c, 0.1 * b, 1 * c);
            K(a, 0.2 * b, 0, h);
            L(a, (0.2 + d) * b, 0 * c, 0.9 * b, (0.5 - d) * c, 1 * b, 0.5 * c);
            L(a, 0.9 * b, (0.5 + d) * c, (0.2 + d) * b, 1 * c, 0.2 * b, 1 * c);
            L(a, 0.45 * b, 0.75 * c, 0.45 * b, 0.25 * c, 0.2 * b, 0);
            ce(a);
            b = a.k;
            b.n = new F(0.4, 0.25);
            b.o = new F(0.8, 0.75);
            return b
        },
        Capacitor: function(a, b, c) {
            a = new J;
            K(a, 0, 0, p);
            a.lineTo(0, 1 * c);
            a.moveTo(1 * b, 0);
            a.lineTo(1 * b, 1 * c);
            return a.k
        },
        Resistor: function(a, b, c) {
            a = new J;
            K(a, 0, 0.5 * c, p);
            a.lineTo(0.1 * b, 0);
            a.lineTo(0.2 * b, 1 * c);
            a.lineTo(0.3 * b, 0);
            a.lineTo(0.4 * b, 1 * c);
            a.lineTo(0.5 * b, 0);
            a.lineTo(0.6 * b, 1 * c);
            a.lineTo(0.7 * b, 0.5 * c);
            return a.k
        },
        Inductor: function(a, b, c) {
            var a = new J,
            d = 0.1 * Nc,
            e = 0.1,
            g = 0.5;
            K(a, (e - 0.5 * d) * b, (g + 0.1) * c, p);
            L(a, (e - d) * b, (g + 0.1) * c, (e - 0.1) * b, (g + d) * c, (e + 0.1) * b, (g + d) * c);
            e = 0.3;
            g = 0.5;
            L(a, (e + 0.1) * b, (g + d) * c, (e + d) * b, (g + 0.1) * c, e * b, (g + 0.1) * c);
            L(a, (e - d) * b, (g + 0.1) * c, (e - 0.1) * b, (g + d) * c, (e + 0.1) * b, (g + d) * c);
            g = e = 0.5;
            L(a, (e + 0.1) * b, (g + d) * c, (e + d) * b, (g + 0.1) * c, e * b, (g + 0.1) * c);
            L(a, (e - d) * b, (g + 0.1) * c, (e - 0.1) * b, (g + d) * c, (e + 0.1) * b, (g + d) * c);
            e = 0.7;
            g = 0.5;
            L(a, (e + 0.1) * b, (g + d) * c, (e + d) * b, (g + 0.1) * c, e * b, (g + 0.1) * c);
            L(a, (e - d) * b, (g + 0.1) * c, (e - 0.1) * b, (g + d) * c, (e + 0.1) * b, (g + d) * c);
            e = 0.9;
            g = 0.5;
            L(a, (e + 0.1) * b, (g + d) * c, (e + d) * b, (g + 0.1) * c, (e + 0.5 * d) * b, (g + 0.1) * c);
            return a.k
        },
        ACvoltageSource: function(a, b, c) {
            var a = new J,
            d = 0.5 * Nc;
            K(a, 0 * b, 0.5 * c, p);
            L(a, 0 * b, (0.5 - d) * c, (0.5 - d) * b, 0 * c, 0.5 * b, 0 * c);
            L(a, (0.5 + d) * b, 0 * c, 1 * b, (0.5 - d) * c, 1 * b, 0.5 * c);
            L(a, 1 * b, (0.5 + d) * c, (0.5 + d) * b, 1 * c, 0.5 * b, 1 * c);
            L(a, (0.5 - d) * b, 1 * c, 0 * b, (0.5 + d) * c, 0 * b, 0.5 * c);
            a.moveTo(0.1 * b, 0.5 * c);
            L(a, 0.5 * b, 0 * c, 0.5 * b, 1 * c, 0.9 * b, 0.5 * c);
            b = a.k;
            b.Pb = Rg;
            return b
        },
        DCvoltageSource: function(a, b, c) {
            a = new J;
            K(a, 0, 0.75 * c, p);
            a.lineTo(0, 0.25 * c);
            a.moveTo(1 * b, 0);
            a.lineTo(1 * b, 1 * c);
            return a.k
        },
        Diode: function(a, b, c) {
            a = new J;
            K(a, 1 * b, 0, p);
            a.lineTo(1 * b, 0.5 * c);
            a.lineTo(0, 1 * c);
            a.lineTo(0, 0);
            a.lineTo(1 * b, 0.5 * c);
            a.lineTo(1 * b, 1 * c);
            b = a.k;
            b.n = new F(0, 0.25);
            b.o = new F(0.5, 0.75);
            return b
        },
        Wifi: function(a, b, c) {
            var d = b,
            e = c,
            b = 0.38 * b,
            c = 0.6 * c,
            a = new J,
            g = 0.8 * Nc,
            i = 0.8,
            j = 0,
            k = 0.5,
            d = (d - b) / 2,
            e = (e - c) / 2;
            K(a, j * b + d, (k + i) * c + e, h);
            L(a, (j - g) * b + d, (k + i) * c + e, (j - i) * b + d, (k + g) * c + e, (j - i) * b + d, k * c + e);
            L(a, (j - i) * b + d, (k - g) * c + e, (j - g) * b + d, (k - i) * c + e, j * b + d, (k - i) * c + e);
            L(a, j * b + d, (k - i) * c + e, (j - i + 0.5 * g) * b + d, (k - g) * c + e, (j - i + 0.5 * g) * b + d, k * c + e);
            L(a, (j - i + 0.5 * g) * b + d, (k + g) * c + e, j * b + d, (k + i) * c + e, j * b + d, (k + i) * c + e);
            ce(a);
            g = 0.4 * Nc;
            i = 0.4;
            j = 0.2;
            k = 0.5;
            K(a, j * b + d, (k + i) * c + e, h);
            L(a, (j - g) * b + d, (k + i) * c + e, (j - i) * b + d, (k + g) * c + e, (j - i) * b + d, k * c + e);
            L(a, (j - i) * b + d, (k - g) * c + e, (j - g) * b + d, (k - i) * c + e, j * b + d, (k - i) * c + e);
            L(a, j * b + d, (k - i) * c + e, (j - i + 0.5 * g) * b + d, (k - g) * c + e, (j - i + 0.5 * g) * b + d, k * c + e);
            L(a, (j - i + 0.5 * g) * b + d, (k + g) * c + e, j * b + d, (k + i) * c + e, j * b + d, (k + i) * c + e);
            ce(a);
            g = 0.2 * Nc;
            i = 0.2;
            k = j = 0.5;
            K(a, (j - i) * b + d, k * c + e, h);
            L(a, (j - i) * b + d, (k - g) * c + e, (j - g) * b + d, (k - i) * c + e, j * b + d, (k - i) * c + e);
            L(a, (j + g) * b + d, (k - i) * c + e, (j + i) * b + d, (k - g) * c + e, (j + i) * b + d, k * c + e);
            L(a, (j + i) * b + d, (k + g) * c + e, (j + g) * b + d, (k + i) * c + e, j * b + d, (k + i) * c + e);
            L(a, (j - g) * b + d, (k + i) * c + e, (j - i) * b + d, (k + g) * c + e, (j - i) * b + d, k * c + e);
            g = 0.4 * Nc;
            i = 0.4;
            j = 0.8;
            k = 0.5;
            K(a, j * b + d, (k - i) * c + e, h);
            L(a, (j + g) * b + d, (k - i) * c + e, (j + i) * b + d, (k - g) * c + e, (j + i) * b + d, k * c + e);
            L(a, (j + i) * b + d, (k + g) * c + e, (j + g) * b + d, (k + i) * c + e, j * b + d, (k + i) * c + e);
            L(a, j * b + d, (k + i) * c + e, (j + i - 0.5 * g) * b + d, (k + g) * c + e, (j + i - 0.5 * g) * b + d, k * c + e);
            L(a, (j + i - 0.5 * g) * b + d, (k - g) * c + e, j * b + d, (k - i) * c + e, j * b + d, (k - i) * c + e);
            ce(a);
            g = 0.8 * Nc;
            i = 0.8;
            j = 1;
            k = 0.5;
            K(a, j * b + d, (k - i) * c + e, h);
            L(a, (j + g) * b + d, (k - i) * c + e, (j + i) * b + d, (k - g) * c + e, (j + i) * b + d, k * c + e);
            L(a, (j + i) * b + d, (k + g) * c + e, (j + g) * b + d, (k + i) * c + e, j * b + d, (k + i) * c + e);
            L(a, j * b + d, (k + i) * c + e, (j + i - 0.5 * g) * b + d, (k + g) * c + e, (j + i - 0.5 * g) * b + d, k * c + e);
            L(a, (j + i - 0.5 * g) * b + d, (k - g) * c + e, j * b + d, (k - i) * c + e, j * b + d, (k - i) * c + e);
            ce(a);
            return a.k
        },
        Email: function(a, b, c) {
            a = new J;
            K(a, 0, 0, h);
            a.lineTo(1 * b, 0);
            a.lineTo(1 * b, 1 * c);
            a.lineTo(0, 1 * c);
            a.lineTo(0, 0);
            ce(a);
            K(a, 0, 0, p);
            a.lineTo(0.5 * b, 0.6 * c);
            a.lineTo(1 * b, 0);
            a.moveTo(0, 1 * c);
            a.lineTo(0.45 * b, 0.54 * c);
            a.moveTo(1 * b, 1 * c);
            a.lineTo(0.55 * b, 0.54 * c);
            $k(a);
            return a.k
        },
        Ethernet: function(a, b, c) {
            a = new J;
            K(a, 0.35 * b, 0, h);
            a.lineTo(0.65 * b, 0);
            a.lineTo(0.65 * b, 0.4 * c);
            a.lineTo(0.35 * b, 0.4 * c);
            a.lineTo(0.35 * b, 0);
            ce(a);
            K(a, 0.1 * b, 1 * c, h, h);
            a.lineTo(0.4 * b, 1 * c);
            a.lineTo(0.4 * b, 0.6 * c);
            a.lineTo(0.1 * b, 0.6 * c);
            a.lineTo(0.1 * b, 1 * c);
            ce(a);
            K(a, 0.6 * b, 1 * c, h, h);
            a.lineTo(0.9 * b, 1 * c);
            a.lineTo(0.9 * b, 0.6 * c);
            a.lineTo(0.6 * b, 0.6 * c);
            a.lineTo(0.6 * b, 1 * c);
            ce(a);
            K(a, 0, 0.5 * c, p);
            a.lineTo(1 * b, 0.5 * c);
            a.moveTo(0.5 * b, 0.5 * c);
            a.lineTo(0.5 * b, 0.4 * c);
            a.moveTo(0.75 * b, 0.5 * c);
            a.lineTo(0.75 * b, 0.6 * c);
            a.moveTo(0.25 * b, 0.5 * c);
            a.lineTo(0.25 * b, 0.6 * c);
            $k(a);
            return a.k
        },
        Power: function(a, b, c) {
            var a = new J,
            d = 0.4 * Nc,
            e = 0.4,
            g = new D(0, 0),
            i = new D(0, 0),
            j = new D(0, 0),
            k = new D(0, 0);
            new D(0, 0);
            al(0.5, 0.5 - e, 0.5 + d, 0.5 - e, 0.5 + e, 0.5 - d, 0.5 + e, 0.5, 0.5, g, g, i, j, k);
            new D(i.x, i.y);
            K(a, i.x * b, i.y * c, h);
            L(a, j.x * b, j.y * c, k.x * b, k.y * c, (0.5 + e) * b, 0.5 * c);
            L(a, (0.5 + e) * b, (0.5 + d) * c, (0.5 + d) * b, (0.5 + e) * c, 0.5 * b, (0.5 + e) * c);
            L(a, (0.5 - d) * b, (0.5 + e) * c, (0.5 - e) * b, (0.5 + d) * c, (0.5 - e) * b, 0.5 * c);
            al(0.5 - e, 0.5, 0.5 - e, 0.5 - d, 0.5 - d, 0.5 - e, 0.5, 0.5 - e, 0.5, j, k, i, g, g);
            L(a, j.x * b, j.y * c, k.x * b, k.y * c, i.x * b, i.y * c);
            d = 0.3 * Nc;
            e = 0.3;
            al(0.5 - e, 0.5, 0.5 - e, 0.5 - d, 0.5 - d, 0.5 - e, 0.5, 0.5 - e, 0.5, j, k, i, g, g);
            a.lineTo(i.x * b, i.y * c);
            L(a, k.x * b, k.y * c, j.x * b, j.y * c, (0.5 - e) * b, 0.5 * c);
            L(a, (0.5 - e) * b, (0.5 + d) * c, (0.5 - d) * b, (0.5 + e) * c, 0.5 * b, (0.5 + e) * c);
            L(a, (0.5 + d) * b, (0.5 + e) * c, (0.5 + e) * b, (0.5 + d) * c, (0.5 + e) * b, 0.5 * c);
            al(0.5, 0.5 - e, 0.5 + d, 0.5 - e, 0.5 + e, 0.5 - d, 0.5 + e, 0.5, 0.5, g, g, i, j, k);
            L(a, k.x * b, k.y * c, j.x * b, j.y * c, i.x * b, i.y * c);
            ce(a);
            K(a, 0.45 * b, 0, h);
            a.lineTo(0.45 * b, 0.5 * c);
            a.lineTo(0.55 * b, 0.5 * c);
            a.lineTo(0.55 * b, 0);
            ce(a);
            b = a.k;
            b.n = new F(0.25, 0.55);
            b.o = new F(0.75, 0.8);
            return b
        },
        Fallout: function(a, b, c) {
            var a = new J,
            d = 0.5 * Nc;
            K(a, 0 * b, 0.5 * c, h);
            L(a, 0 * b, (0.5 - d) * c, (0.5 - d) * b, 0 * c, 0.5 * b, 0 * c);
            L(a, (0.5 + d) * b, 0 * c, 1 * b, (0.5 - d) * c, 1 * b, 0.5 * c);
            L(a, 1 * b, (0.5 + d) * c, (0.5 + d) * b, 1 * c, 0.5 * b, 1 * c);
            L(a, (0.5 - d) * b, 1 * c, 0 * b, (0.5 + d) * c, 0 * b, 0.5 * c);
            var e = d = 0;
            K(a, (0.3 + d) * b, (0.8 + e) * c, h, h);
            a.lineTo((0.5 + d) * b, (0.5 + e) * c);
            a.lineTo((0.1 + d) * b, (0.5 + e) * c);
            a.lineTo((0.3 + d) * b, (0.8 + e) * c);
            d = 0.4;
            e = 0;
            ce(a);
            K(a, (0.3 + d) * b, (0.8 + e) * c, h, h);
            a.lineTo((0.5 + d) * b, (0.5 + e) * c);
            a.lineTo((0.1 + d) * b, (0.5 + e) * c);
            a.lineTo((0.3 + d) * b, (0.8 + e) * c);
            d = 0.2;
            e = -0.3;
            ce(a);
            K(a, (0.3 + d) * b, (0.8 + e) * c, h, h);
            a.lineTo((0.5 + d) * b, (0.5 + e) * c);
            a.lineTo((0.1 + d) * b, (0.5 + e) * c);
            a.lineTo((0.3 + d) * b, (0.8 + e) * c);
            ce(a);
            b = a.k;
            b.Pb = Rg;
            return b
        },
        IrritationHazard: function(a, b, c) {
            a = new J;
            K(a, 0.2 * b, 0 * c, h);
            a.lineTo(0.5 * b, 0.3 * c);
            a.lineTo(0.8 * b, 0 * c);
            a.lineTo(1 * b, 0.2 * c);
            a.lineTo(0.7 * b, 0.5 * c);
            a.lineTo(1 * b, 0.8 * c);
            a.lineTo(0.8 * b, 1 * c);
            a.lineTo(0.5 * b, 0.7 * c);
            a.lineTo(0.2 * b, 1 * c);
            a.lineTo(0 * b, 0.8 * c);
            a.lineTo(0.3 * b, 0.5 * c);
            a.lineTo(0 * b, 0.2 * c);
            ce(a);
            b = a.k;
            b.n = new F(0.3, 0.3);
            b.o = new F(0.7, 0.7);
            return b
        },
        ElectricalHazard: function(a, b, c) {
            a = new J;
            K(a, 0.37, 0 * c, h);
            a.lineTo(0.5 * b, 0.11 * c);
            a.lineTo(0.77 * b, 0.04 * c);
            a.lineTo(0.33 * b, 0.49 * c);
            a.lineTo(1 * b, 0.37 * c);
            a.lineTo(0.63 * b, 0.86 * c);
            a.lineTo(0.77 * b, 0.91 * c);
            a.lineTo(0.34 * b, 1 * c);
            a.lineTo(0.34 * b, 0.78 * c);
            a.lineTo(0.44 * b, 0.8 * c);
            a.lineTo(0.65 * b, 0.56 * c);
            a.lineTo(0 * b, 0.68 * c);
            ce(a);
            return a.k
        },
        FireHazard: function(a, b, c) {
            a = new J;
            K(a, 0.1 * b, 1 * c, h);
            L(a, -0.25 * b, 0.63 * c, 0.45 * b, 0.44 * c, 0.29 * b, 0 * c);
            L(a, 0.48 * b, 0.17 * c, 0.54 * b, 0.35 * c, 0.51 * b, 0.42 * c);
            L(a, 0.59 * b, 0.29 * c, 0.58 * b, 0.28 * c, 0.59 * b, 0.18 * c);
            L(a, 0.8 * b, 0.34 * c, 0.88 * b, 0.43 * c, 0.75 * b, 0.6 * c);
            L(a, 0.87 * b, 0.48 * c, 0.88 * b, 0.43 * c, 0.88 * b, 0.31 * c);
            L(a, 1.17 * b, 0.76 * c, 0.82 * b, 0.8 * c, 0.9 * b, 1 * c);
            ce(a);
            b = a.k;
            b.n = new F(0.05, 0.645);
            b.o = new F(0.884, 0.908);
            return b
        },
        BpmnActivityLoop: function(a, b, c) {
            var a = new J,
            d = 0.5 * (4 * (Math.SQRT2 - 1) / 3);
            K(a, (0.5 * Math.SQRT2 / 2 + 0.5) * b, (1 - (0.5 - 0.5 * Math.SQRT2 / 2)) * c, p);
            L(a, 1 * b, 0.7 * c, 1 * b, 0.5 * c, 1 * b, 0.5 * c);
            L(a, 1 * b, (0.5 - d + 0) * c, (0.5 + d + 0) * b, 0 * c, 0.5 * b, 0 * c);
            L(a, (0.5 - d + 0) * b, 0 * c, 0 * b, (0.5 - d + 0) * c, 0 * b, 0.5 * c);
            L(a, 0 * b, (0.5 + d + 0) * c, (0.5 - d + 0) * b, 1 * c, 0.35 * b, 0.98 * c);
            a.moveTo(0.35 * b, 0.8 * c);
            a.lineTo(0.35 * b, 1 * c);
            a.lineTo(0.15 * b, 1 * c);
            return a.k
        },
        BpmnActivityParallel: function(a, b, c) {
            a = new J;
            K(a, 0, 0, p);
            a.lineTo(0, 1 * c);
            a.moveTo(0.5 * b, 0);
            a.lineTo(0.5 * b, 1 * c);
            a.moveTo(1 * b, 0);
            a.lineTo(1 * b, 1 * c);
            return a.k
        },
        BpmnActivitySequential: function(a, b, c) {
            a = new J;
            K(a, 0, 0, p);
            a.lineTo(1 * b, 0);
            a.moveTo(0, 0.5 * c);
            a.lineTo(1 * b, 0.5 * c);
            a.moveTo(0, 1 * c);
            a.lineTo(1 * b, 1 * c);
            return a.k
        },
        BpmnActivityAdHoc: function(a, b, c) {
            a = new J;
            K(a, 0, 0, p);
            K(a, 1 * b, 1 * c, p);
            K(a, 0, 0.5 * c, p);
            L(a, 0.2 * b, 0.35 * c, 0.3 * b, 0.35 * c, 0.5 * b, 0.5 * c);
            L(a, 0.7 * b, 0.65 * c, 0.8 * b, 0.65 * c, 1 * b, 0.5 * c);
            return a.k
        },
        BpmnActivityCompensation: function(a, b, c) {
            a = new J;
            K(a, 0, 0.5 * c, h);
            a.lineTo(0.5 * b, 0);
            a.lineTo(0.5 * b, 0.5 * c);
            a.lineTo(1 * b, 1 * c);
            a.lineTo(1 * b, 0);
            a.lineTo(0.5 * b, 0.5 * c);
            a.lineTo(0.5 * b, 1 * c);
            ce(a);
            return a.k
        },
        BpmnTaskMessage: function(a, b, c) {
            a = new J;
            K(a, 0, 0.2 * c, h);
            a.lineTo(1 * b, 0.2 * c);
            a.lineTo(1 * b, 0.8 * c);
            a.lineTo(0, 0.8 * c);
            a.lineTo(0, 0.8 * c);
            ce(a);
            K(a, 0, 0.2 * c, p);
            a.lineTo(0.5 * b, 0.5 * c);
            a.lineTo(1 * b, 0.2 * c);
            $k(a);
            return a.k
        },
        BpmnTaskScript: function(a, b, c) {
            a = new J;
            K(a, 0.7 * b, 1 * c, h);
            a.lineTo(0.3 * b, 1 * c);
            L(a, 0.6 * b, 0.5 * c, 0, 0.5 * c, 0.3 * b, 0);
            a.lineTo(0.7 * b, 0);
            L(a, 0.4 * b, 0.5 * c, 1 * b, 0.5 * c, 0.7 * b, 1 * c);
            ce(a);
            K(a, 0.45 * b, 0.73 * c, p);
            a.lineTo(0.7 * b, 0.73 * c);
            a.moveTo(0.38 * b, 0.5 * c);
            a.lineTo(0.63 * b, 0.5 * c);
            a.moveTo(0.31 * b, 0.27 * c);
            a.lineTo(0.56 * b, 0.27 * c);
            $k(a);
            return a.k
        },
        BpmnTaskUser: function(a, b, c) {
            a = new J;
            K(a, 0, 0, p);
            K(a, 0.335 * b, (1 - 0.555) * c, h);
            a.lineTo(0.335 * b, 0.595 * c);
            a.lineTo(0.665 * b, 0.595 * c);
            a.lineTo(0.665 * b, (1 - 0.555) * c);
            L(a, 0.88 * b, 0.46 * c, 0.98 * b, 0.54 * c, 1 * b, 0.68 * c);
            a.lineTo(1 * b, 1 * c);
            a.lineTo(0, 1 * c);
            a.lineTo(0, 0.68 * c);
            L(a, 0.02 * b, 0.54 * c, 0.12 * b, 0.46 * c, 0.335 * b, (1 - 0.555) * c);
            a.lineTo(0.365 * b, 0.405 * c);
            var d = 0.5 - 0.285,
            e = Math.PI / 4,
            g = 4 * (1 - Math.cos(e)) / (3 * Math.sin(e)),
            e = g * d,
            g = g * d;
            L(a, (0.5 - (e + d) / 2) * b, (d + (d + g) / 2) * c, (0.5 - d) * b, (d + g) * c, (0.5 - d) * b, d * c);
            L(a, (0.5 - d) * b, (d - g) * c, (0.5 - e) * b, (d - d) * c, 0.5 * b, (d - d) * c);
            L(a, (0.5 + e) * b, (d - d) * c, (0.5 + d) * b, (d - g) * c, (0.5 + d) * b, d * c);
            L(a, (0.5 + d) * b, (d + g) * c, (0.5 + (e + d) / 2) * b, (d + (d + g) / 2) * c, 0.635 * b, 0.405 * c);
            a.lineTo(0.635 * b, 0.405 * c);
            a.lineTo(0.665 * b, (1 - 0.555) * c);
            a.lineTo(0.665 * b, 0.595 * c);
            a.lineTo(0.335 * b, 0.595 * c);
            K(a, 0.2 * b, 1 * c, p);
            a.lineTo(0.2 * b, 0.8 * c);
            K(a, 0.8 * b, 1 * c, p);
            a.lineTo(0.8 * b, 0.8 * c);
            return a.k
        },
        BpmnEventConditional: function(a, b, c) {
            a = new J;
            K(a, 0.1 * b, 0, h);
            a.lineTo(0.9 * b, 0);
            a.lineTo(0.9 * b, 1 * c);
            a.lineTo(0.1 * b, 1 * c);
            ce(a);
            K(a, 0.2 * b, 0.2 * c, p);
            a.lineTo(0.8 * b, 0.2 * c);
            a.moveTo(0.2 * b, 0.4 * c);
            a.lineTo(0.8 * b, 0.4 * c);
            a.moveTo(0.2 * b, 0.6 * c);
            a.lineTo(0.8 * b, 0.6 * c);
            a.moveTo(0.2 * b, 0.8 * c);
            a.lineTo(0.8 * b, 0.8 * c);
            $k(a);
            return a.k
        },
        BpmnEventError: function(a, b, c) {
            a = new J;
            K(a, 0, 1 * c, h);
            a.lineTo(0.33 * b, 0);
            a.lineTo(0.66 * b, 0.5 * c);
            a.lineTo(1 * b, 0);
            a.lineTo(0.66 * b, 1 * c);
            a.lineTo(0.33 * b, 0.5 * c);
            ce(a);
            return a.k
        },
        BpmnEventEscalation: function(a, b, c) {
            a = new J;
            K(a, 0, 0, p);
            K(a, 1 * b, 1 * c, p);
            K(a, 0.1 * b, 1 * c, h);
            a.lineTo(0.5 * b, 0);
            a.lineTo(0.9 * b, 1 * c);
            a.lineTo(0.5 * b, 0.5 * c);
            ce(a);
            return a.k
        },
        BpmnEventTimer: function(a, b, c) {
            var a = new J,
            d = 0.5 * Nc;
            K(a, 1 * b, 0.5 * c, h);
            L(a, 1 * b, (0.5 + d) * c, (0.5 + d) * b, 1 * c, 0.5 * b, 1 * c);
            L(a, (0.5 - d) * b, 1 * c, 0, (0.5 + d) * c, 0, 0.5 * c);
            L(a, 0, (0.5 - d) * c, (0.5 - d) * b, 0, 0.5 * b, 0);
            L(a, (0.5 + d) * b, 0, 1 * b, (0.5 - d) * c, 1 * b, 0.5 * c);
            K(a, 0.5 * b, 0, p);
            a.lineTo(0.5 * b, 0.15 * c);
            a.moveTo(0.5 * b, 1 * c);
            a.lineTo(0.5 * b, 0.85 * c);
            a.moveTo(0, 0.5 * c);
            a.lineTo(0.15 * b, 0.5 * c);
            a.moveTo(1 * b, 0.5 * c);
            a.lineTo(0.85 * b, 0.5 * c);
            a.moveTo(0.5 * b, 0.5 * c);
            a.lineTo(0.58 * b, 0.1 * c);
            a.moveTo(0.5 * b, 0.5 * c);
            a.lineTo(0.78 * b, 0.54 * c);
            $k(a);
            b = a.k;
            b.Pb = Rg;
            return b
        }
    },
    fl;
    for (fl in Kk) Kk[fl.toLowerCase()] = fl;
    var gl = {
        None: "",
        NormalArrow: "F1 m 0,2 l 4,0 0,-2 4,4 -4,4 0,-2 -4,0 z",
        Triangle: "F1 m 0,0 l 8,4.62 -8,4.62 z",
        Block: "F1 m 0,0 l 0,8 8,0 0,-8 z",
        OpenTriangle: "m 0,0 l 8,4 -8,4",
        Circle: "F1 m 8,4 b 0 360 -4 0 4 z",
        TailedNormalArrow: "F1 m 0,0 l 2,0 1,2 3,0 0,-2 2,4 -2,4 0,-2 -3,0 -1,2 -2,0 1,-4 -1,-4 z",
        ConcaveTailArrow: "F1 m 0,2 h 4 v -2 l 4,4 -4,4 v -2 h -4 l 2,-2 -2,-2 z",
        BigEndArrow: "F1 m 0,0 l 5,2 0,-2 3,4 -3,4 0,-2 -5,2 0,-8 z",
        Chevron: "F1 m 0,0 l 5,0 3,4 -3,4 -5,0 3,-4 -3,-4 z",
        Line: "m 0,0 l 0,8",
        DoubleLine: "m 0,0 l 0,8 m 2,0 l 0,-8",
        TripleLine: "m 0,0 l 0,8 m 2,0 l 0,-8 m 2,0 l 0,8",
        SimpleArrow: "F1 m 1,2 l -1,-2 2,0 1,2 -1,2 -2,0 1,-2 5,0 0,-2 2,2 -2,2 0,-2 z",
        X: "m 0,0 l 8,8 m 0,-8 l -8,8",
        Diamond: "F1 m 0,4 l 4,-4 4,4 -4,4 -4,-4 z",
        RoundedTriangle: "F1 m 0,1 a 1,1 0 0 1 1,-1 l 7,3 a 0.5,1 0 0 1 0,2 l -7,3 a 1,1 0 0 1 -1,-1 l 0,-6 z",
        AccelerationArrow: "F1 m 0,0 l 0,8 0.2,0 0,-8 -0.2,0 z m 2,0 l 0,8 1,0 0,-8 -1,0 z m 3,0 l 2,0 2,4 -2,4 -2,0 0,-8 z",
        BackwardOpenTriangle: "m 8,0 l -8,4 8,4",
        Boomerang: "F1 m 0,0 l 8,4 -8,4 4,-4 -4,-4 z",
        BoxArrow: "F1 m 0,0 l 4,0 0,2 2,0 0,-2 2,4 -2,4 0,-2 -2,0 0,2 -4,0 0,-8 z",
        TriangleLine: "F1 m 8,4 l -8,-4 0,8 8,-4 z m 0.5,4 l 0,-8",
        CircleEndedArrow: "F1 m 12,4 l -2,-3 0,2 -2,0 0,2 2,0 0,2 2,-3 z m -4,0 b 0 360 -4 0 4 z",
        Standard: "F1 m 0,0 l 8,4 -8,4 2,-4 z",
        DoubleTriangle: "F1 m 0,0 l 4,4 -4,4 0,-8 z m 4,0 l 4,4 -4,4 0,-8 z",
        DynamicWidthArrow: "F1 m 0,3 l 2,0 2,-1 2,-2 2,4 -2,4 -2,-2 -2,-1 -2,0 0,-2 z",
        EquilibriumArrow: "m 0,3 l 8,0 -3,-3 m 3,5 l -8,0 3,3",
        FastForward: "F1 m 0,0 l 3.5,4 0,-4 3.5,4 0,-4 1,0 0,8 -1,0 0,-4 -3.5,4 0,-4 -3.5,4 0,-8 z",
        HalfArrowBottom: "F1 m 0,8 l 4,-4 4,0 -8,4 z",
        HalfArrowTop: "F1 m 0,0 l 4,4 4,0 -8,-4 z m 0,8",
        Kite: "F1 m 0,4 l 2,-4 6,4 -6,4 -2,-4 z",
        OpposingDirectionDoubleArrow: "F1 m 0,4 l 2,-4 0,2 4,0 0,-2 2,4 -2,4 0,-2 -4,0 0,2 -2,-4 z",
        PartialDoubleTriangle: "F1 m 0,0 4,3 0,-3 4,4 -4,4 0,-3 -4,3 0,-8 z",
        BackwardTriangle: "F1 m 8,4 l 0,4 -8,-4 8,-4 0,4 z",
        SidewaysV: "m 0,0 l 8,4 -8,4 0,-1 6,-3 -6,-3 0,-1 z",
        StretchedChevron: "F1 m 0,0 l 8,0 3,4 -3,4 -8,0 3,-4 -3,-4 z",
        StretchedDiamond: "F1 m 0,3 l 5,-3 5,3 -5,3 -5,-3 z",
        ForwardSemiCircle: "m 4,0 b 270 180 0 4 4",
        BackwardSemiCircle: "m 4,8 b 90 180 0 -4 4",
        HalfTriangleTop: "F1 m 0,0 l 0,4 8,0 -8,-4 z m 0,8",
        HalfTriangleBottom: "F1 m 0,4 l 0,4 8,-4 -8,0 z",
        LineCircle: "F1 m 0,0 l 0,8 m 7 -4 b 0 360 -3 0 3 z",
        DoubleLineCircle: "F1 m 0,0 l 0,8 m 2,-8 l 0,8 m 7 -4 b 0 360 -3 0 3 z",
        TripleLineCircle: "F1 m 0,0 l 0,8 m 2,-8 l 0,8 m 2,-8 l 0,8 m 7 -4 b 0 360 -3 0 3 z",
        Fork: "m 0,4 l 8,0 m -6,0 l 6,-4 m -6,4 l 6,4",
        CircleFork: "F1 m 6,3 b 0 360 -3 0 3 m 0,0 l 6,0 m -6,0 l 6,-4 m -6,4 l 6,4",
        LineFork: "m 0,0 l 0,8 m 0,-4 l 6,0 m -6,0 l 6,-4 m -6,4 l 6,4",
        CircleLine: "F1 m 8 4 b 0 360 -3 0 3 z m 1,-4 l 0,8",
        CircleLineFork: "F1 m 6 4 b 0 360 -3 0 3 z m 1,-4 l 0,8 m 0,-4 l 6,0 m -6,0 l 6,-4 m -6,4 l 6,4",
        DiamondCircle: "F1 m 8,4 l -4,4 -4,-4 4,-4 4,4 m 8,0 b 0 360 -4 0 4 z",
        PlusCircle: "F1 m 8,4 b 0 360 -4 0 4 l -8 0 z m 4 -4 l 0 8",
        OpenTriangleTop: "m 0,0 l 8,4 -8,0 m 0,4",
        OpenTriangleBottom: "m 0,8 l 8,-4 -8,0",
        OpenRightTriangleTop: "m 8,0 l 0,4 -8,0 m 0,4",
        OpenRightTriangleBottom: "m 8,8 l 0,-4 -8,0",
        OpenTriangleLine: "m 0,0 8,4 -8,4 m 8.5,0 l 0,-8",
        PentagonArrow: "F1 m 8,4 l -4,-4 -4,0 0,8 4,0 4,-4 z",
        ForwardSlash: "m 0,8 l 5,-8",
        DoubleForwardSlash: "m 0,8 l 4,-8 m -2,8 l 4,-8",
        TripleForwardSlash: "m 0,8 l 4,-8 m -2,8 l 4,-8 m -2,8 l 4,-8",
        BackSlash: "m 0,0 l 5,8",
        DoubleBackSlash: "m 0,0 l 4,8 m -2,-8 l 4,8",
        TripleBackSlash: "m 0,0 l 4,8 m -2,-8 l 4,8 m -2,-8 l 4,8",
        DoubleFeathers: "m 0,0 l 3,4 -3,4 m 3,-8 l 3,4 -3,4",
        TripleFeathers: "m 0,0 l 3,4 -3,4 m 3,-8 l 3,4 -3,4 m 3,-8 l 3,4 -3,4",
        BackwardCircleFork: "F1 m 0,4 l 6,0 m -6,-4 l 6,4 m -6,4 l 6,-4 m 6,0 b 0 360 -3 0 3",
        BackwardCircleLineFork: "F1 m 0,4 l 6,0 m -6,-4 l 6,4 m -6,4 l 6,-4 m 0,-4 l 0,8 m 7,-4 b 0 360 -3 0 3"
    },
    Ik,
    hl = {},
    ml;
    for (ml in Kk) {
        var nl = Kk[ml];
        "string" === typeof nl && (nl = Kk[nl]);
        "string" === typeof nl && (nl = Kk[nl]);
        nl && (hl[ml] = nl(m, 100, 100));
        hl[ml].Me()
    }
    Ik = hl;
    var ol = {};
    function Jk(a) {
        if (gl) {
            for (var b in gl) {
                var c = ae(gl[b], p);
                ol[b] = c;
                ol[b.toLowerCase()] = b
            }
            gl = f
        }
        return ol[a]
    }
    V.FigureGenerators = Kk;
    V.ArrowheadGeometries = ol;
    function R(a) {
        0 === arguments.length ? w.call(this) : w.call(this, a);
        this.ym = this.tj = "";
        this.Bp = m;
        this.gq = this.Xp = this.kp = this.Oq = this.Ro = this.Eo = h;
        this.rq = this.mq = this.lq = p;
        this.Km = h;
        this.Eq = "";
        this.Bq = h;
        this.$j = this.sq = this.nq = this.Cq = m;
        this.$s = p;
        this.ng = this.Dq = m;
        this.pq = "";
        this.el = m;
        this.oq = (new sb(NaN, NaN)).freeze();
        this.tq = "";
        this.fl = m;
        this.nd = "";
        this.pp = h;
        this.s = this.Do = this.wj = m;
        this.ui = (new D(NaN, NaN)).freeze();
        this.ft = new D(NaN, NaN);
        this.Kp = "";
        this.vi = m;
        this.Lp = fc;
        this.Sp = Wc;
        this.Np = Xc;
        this.So = m;
        this.qp = h;
        this.Cp = pl;
        this.Qf = p;
        this.Nm = (new D(6, 6)).freeze();
        this.Mm = "gray";
        this.Lm = 4;
        this.eE = -1;
        this.ri = h;
        this.zt = this.bf = p
    }
    v.H("Part", R);
    v.pa(R, w);
    R.prototype.jb = function(a) {
        w.prototype.jb.call(this, a);
        a.tj = this.tj;
        a.ym = this.ym;
        a.Bp = this.Bp;
        a.Eo = this.Eo;
        a.Ro = this.Ro;
        a.Oq = this.Oq;
        a.kp = this.kp;
        a.Xp = this.Xp;
        a.gq = this.gq;
        a.lq = this.lq;
        a.mq = this.mq;
        a.rq = this.rq;
        a.Km = this.Km;
        a.Eq = this.Eq;
        a.Bq = this.Bq;
        a.Cq = this.Cq;
        a.nq = this.nq;
        a.sq = this.sq;
        a.$s = p;
        a.Dq = this.Dq;
        a.ng = m;
        a.pq = this.pq;
        a.oq.Ra(this.oq);
        a.tq = this.tq;
        a.nd = this.nd;
        a.pp = this.pp;
        a.Do = this.Do;
        a.ui.Ra(this.ui);
        a.Kp = this.Kp;
        a.Lp = this.Lp.B();
        a.Sp = this.Sp.B();
        a.Np = this.Np.B();
        a.So = this.So;
        a.qp = this.qp;
        a.Cp = this.Cp;
        a.Qf = this.Qf;
        a.Nm.Ra(this.Nm);
        a.Mm = this.Mm;
        a.Lm = this.Lm
    };
    R.prototype.Yg = function(a) {
        w.prototype.Yg.call(this, a);
        fj(a);
        a.$j = m;
        a.el = m;
        a.fl = m;
        a.vi = m
    };
    R.prototype.toString = function() {
        var a = v.Si(Object.getPrototypeOf(this)) + "#" + v.kc(this);
        this.data && (a += "(" + Ge(this.data) + ")");
        return a
    };
    R.prototype.dumpReferences = R.prototype.KB = function() {
        v.trace("References for " + this);
        this.ta && v.trace(" " + this.ta.toString() + ' LayerName: "' + this.Ed + '"');
        this.$n !== this && v.trace(" SelectionObject: " + this.$n.toString() + ' SelectionObjectName: "' + this.ao + '"');
        this.Ab !== this && v.trace(" LocationObject: " + this.Ab.toString() + ' LocationObjectName: "' + this.Lr + '"');
        if (this.ng) {
            for (var a = "",
            b = this.ng.f; b.next();) a += b.key + " ";
            v.trace(" Adornments: " + a)
        }
        this.Wa && v.trace(" ContainingGroup: " + this.Wa.toString());
        if (this instanceof S) {
            if (this.rc) for (b = this.rc.f; b.next(););
            if (0 < this.me.count) {
                a = "";
                for (b = this.me; b.next();) a += b.value.toString() + ", ";
                v.trace(" Links: " + a)
            }
            this.le && v.trace(" LabeledLink: " + this.le.toString());
            if (this instanceof mf) {
                v.trace(" Placeholder: " + this.placeholder);
                a = "";
                for (b = this.mc; b.next();) a += b.value.toString() + ", ";
                v.trace(" Members: " + a);
                a = "";
                for (b = this.Zk.f; b.next();) a += b.value.toString() + ", ";
                v.trace(" NestedGroups: " + a);
                v.trace(" Layout: " + this.xb)
            }
        } else if (this instanceof U) {
            v.trace(" Path: " + this.path);
            v.trace(" From: " + this.ea + " " + this.Jc + ' "' + this.dh + '"');
            v.trace(" To: " + this.ia + " " + this.sd + ' "' + this.gi + '"');
            a = "";
            for (b = this.di; b.next();) a += b.value.toString() + ", ";
            v.trace(" LabelNodes: " + a)
        }
    };
    R.LayoutNone = 0;
    var ui;
    R.LayoutAdded = ui = 1;
    var zi;
    R.LayoutRemoved = zi = 2;
    var rj;
    R.LayoutShown = rj = 4;
    var sj;
    R.LayoutHidden = sj = 8;
    R.LayoutNodeSized = 16;
    var Ei;
    R.LayoutGroupLayout = Ei = 32;
    var pl;
    R.LayoutStandard = pl = ui | zi | rj | sj | 16 | Ei;
    R.prototype.mg = function() {
        w.prototype.mg.call(this);
        var a = this.b;
        a !== m && this.Dl && (Mi(a, "shadowOffset", this.oD), Mi(a, "shadowColor", this.shadowColor), Mi(a, "shadowBlur", this.shadowBlur))
    };
    R.prototype.Jl = function(a, b, c, d, e, g, i) {
        var j = this.b;
        j !== m && (a === Ee && "elements" === b ? e instanceof w && vi(e, e,
        function(a) {
            wi(j, a)
        }) : a === Fe && "elements" === b && e instanceof w && vi(e, e,
        function(a) {
            yi(j, a)
        }), j.Yd(a, b, c, d, e, g, i))
    };
    R.prototype.updateTargetBindings = R.prototype.nc = function(a) {
        w.prototype.nc.call(this, a);
        if (this.data !== m) for (a = this.elements; a.next();) {
            var b = a.value;
            b instanceof w && vi(b, b,
            function(a) {
                a.data !== m && a.nc()
            })
        }
    };
    v.m(R, {
        yE: "adornments"
    },
    function() {
        return this.ng === m ? m: this.ng.f
    });
    R.prototype.findAdornment = R.prototype.tn = function(a) {
        t && v.e(a, "string", R, "findAdornment:category");
        var b = this.ng;
        return b === m ? m: b.ca(a)
    };
    R.prototype.addAdornment = R.prototype.Zm = function(a, b) {
        if (b !== m) {
            t && (v.e(a, "string", R, "addAdornment:category"), v.c(b, lf, R, "addAdornment:ad"));
            var c = m,
            d = this.ng;
            d !== m && (c = d.ca(a));
            if (c !== b) {
                if (c !== m) {
                    var e = c.ta;
                    e !== m && e.Cd( - 1, c)
                }
                d === m && (this.ng = d = new oa("string", lf));
                d.add(a, b);
                c = this.b;
                c !== m && (d = c.un("Adornment"), d === m && (d = c.un("")), d !== m && (d.lk(99999999, b), b.data = this.data))
            }
        }
    };
    R.prototype.removeAdornment = R.prototype.Ll = function(a) {
        t && v.e(a, "string", R, "removeAdornment:category");
        var b = this.ng;
        if (b !== m) {
            var c = b.ca(a);
            if (c !== m) {
                var d = c.ta;
                d !== m && d.Cd( - 1, c)
            }
            b.remove(a);
            0 === b.count && (this.ng = m)
        }
    };
    R.prototype.clearAdornments = R.prototype.Wg = function() {
        var a = this.ng;
        if (a !== m) {
            for (var b = [], a = a.f; a.next();) b.push(a.key);
            for (var a = b.length,
            c = 0; c < a; c++) this.Ll(b[c])
        }
    };
    R.prototype.updateAdornments = R.prototype.ii = function() {
        a: {
            var a = this.b;
            if (a !== m) {
                var b = m;
                if (this.Ha && this.jD) {
                    var c = this.$n;
                    if (c !== m && this.eb() && c.nk() && c.la.aa()) {
                        b = this.tn("Selection");
                        if (b === m) {
                            b = this.kD;
                            b === m && (this instanceof U ? b = a.uC: this instanceof R && (b = this instanceof mf ? a.YB: a.IC));
                            if (! (b instanceof lf)) break a;
                            of(b);
                            b = b.copy();
                            if (! (b instanceof lf)) break a;
                            b.od = "Selection";
                            b.Od = c
                        }
                        if (b !== m) {
                            a = b.placeholder;
                            if (a !== m) {
                                var d = c.yl(),
                                e = 0;
                                c instanceof V && (e = c.Ua);
                                a.ma = new sb((c.ua.width + e) * d, (c.ua.height + e) * d)
                            } else this instanceof U && (a = b.wa, a = vk(b, a, a.length), d = this.path, a instanceof V && d === c && (d = c.xa, si(this), d = c.xa, a.Ar = d, 0 === a.Ua && (a.Ua = c.Ua)));
                            b.Qa = c.An();
                            b.type !== zg && (b.location = c.zb(fc))
                        }
                    }
                    this.Zm("Selection", b)
                } else this.Ll("Selection")
            }
        }
        c = this.b;
        if (c !== m) {
            c = c.Vb.oe.i;
            b = c.length;
            for (a = 0; a < b; a++) d = c[a],
            d.isEnabled && d.updateAdornments(this)
        }
    };
    v.m(R, {
        ta: "layer"
    },
    s("s"));
    v.m(R, {
        b: "diagram"
    },
    function() {
        var a = this.s;
        return a !== m ? a.b: m
    });
    v.a(R, "layerName", R.prototype.Ed);
    v.defineProperty(R, {
        Ed: "layerName"
    },
    s("ym"),
    function(a) {
        var b = this.ym;
        if (b !== a && (v.e(a, "string", R, "layerName"), this.ym = a, this.d("layerName", b, a), b = this.ta, b !== m && b.name !== a)) {
            var c = b.b;
            if (c !== m && (a = c.un(a), a !== m && a !== b)) {
                var d = b.Cd( - 1, this, h);
                0 <= d && c.Yd(Fe, "parts", b, this, m, d, h);
                d = a.lk(99999999, this, h);
                0 <= d && c.Yd(Ee, "parts", a, m, this, h, d);
                d = this.Ir;
                if (d !== m) {
                    var e = c.ya;
                    c.ya = h;
                    d(this, b, a);
                    c.ya = e
                }
            }
        }
    });
    v.a(R, "layerChanged", R.prototype.Ir);
    v.defineProperty(R, {
        Ir: "layerChanged"
    },
    s("Bp"),
    function(a) {
        var b = this.Bp;
        b !== a && (a !== m && v.e(a, "function", R, "layerChanged"), this.Bp = a, this.d("layerChanged", b, a))
    });
    v.a(R, "location", R.prototype.location);
    v.defineProperty(R, {
        location: "location"
    },
    s("ui"),
    function(a) {
        var b = this.ui;
        if (!b.u(a)) {
            t && v.c(a, D, R, "location");
            this.ui = a = a.B();
            if (this.Ec === p) {
                var c = this.kb,
                d = this.ft,
                e = c.copy();
                c.yd(a.x - d.x, a.y - d.y);
                c.u(e) || this.d("position", e, c);
                Cj(this)
            }
            this.d("location", b, a)
        }
    });
    function Cj(a) {
        if (a.ri === p) {
            var b = a.b;
            b !== m && (b.zg.add(a), a instanceof S && !b.da.cb && a.pf(), yf(b));
            a.ri = h
        }
    }
    function ql(a) {
        if (a.ri !== p) {
            var b = a.kb,
            c = a.yb,
            d = c.copy();
            c.qa();
            c.x = b.x;
            c.y = b.y;
            c.freeze();
            dj(a, d, c);
            a.ri = p
        }
    }
    v.m(R, {
        Ab: "locationObject"
    },
    function() {
        if (this.vi === m) {
            var a = this.Lr;
            a !== f && a !== m && "" !== a ? (a = this.Re(a), this.vi = a !== m ? a: this) : this.vi = this
        }
        return this.vi.visible ? this.vi: this
    });
    v.a(R, "minLocation", R.prototype.DC);
    v.defineProperty(R, {
        DC: "minLocation"
    },
    s("Sp"),
    function(a) {
        var b = this.Sp;
        b.u(a) || (t && v.c(a, D, R, "minLocation"), this.Sp = a = a.B(), this.d("minLocation", b, a))
    });
    v.a(R, "maxLocation", R.prototype.xC);
    v.defineProperty(R, {
        xC: "maxLocation"
    },
    s("Np"),
    function(a) {
        var b = this.Np;
        b.u(a) || (t && v.c(a, D, R, "maxLocation"), this.Np = a = a.B(), this.d("maxLocation", b, a))
    });
    v.a(R, "locationObjectName", R.prototype.Lr);
    v.defineProperty(R, {
        Lr: "locationObjectName"
    },
    s("Kp"),
    function(a) {
        var b = this.Kp;
        b !== a && (t && v.e(a, "string", R, "locationObjectName"), this.Kp = a, this.vi = m, nj(this), this.d("locationObjectName", b, a))
    });
    v.a(R, "locationSpot", R.prototype.tf);
    v.defineProperty(R, {
        tf: "locationSpot"
    },
    s("Lp"),
    function(a) {
        var b = this.Lp;
        b.u(a) || (t && (v.c(a, F, R, "locationSpot"), Vb(a) || v.g("Part.locationSpot must be a specific Spot value, not: " + a)), this.Lp = a = a.B(), nj(this), this.d("locationSpot", b, a))
    });
    R.prototype.move = R.prototype.move = function(a) {
        this.position = a;
        this.Ec === p && ql(this)
    };
    R.prototype.isVisible = R.prototype.eb = function() {
        if (!this.Ug) return p;
        var a = this.ta;
        if (a !== m && !a.visible) return p;
        var b = this.Wa;
        if (b !== m && !b.ke) return p;
        if (this instanceof S) {
            if (a !== m) if (a.b.sf) for (a = this.Qe(); a.next();) {
                if (b = a.value, b = b.ea, b !== m && !b.Wd) return p
            } else for (a = this.tr(); a.next();) if (b = a.value, b = b.ia, b !== m && !b.Wd) return p;
            a = this.le;
            if (a !== m && !a.eb()) return p
        } else if (this instanceof U) {
            b = this.ea;
            if (b !== m && rl(b) === m) return p;
            b = this.ia;
            if (b !== m && rl(b) === m) return p
        }
        return h
    };
    function sl(a, b, c) {
        Zb(c) && (c = mc);
        var d = b.ua;
        if (b === m || b === a) return new D(d.width * c.x + c.offsetX, d.height * c.y + c.offsetY);
        c = new D(d.width * c.x + c.offsetX, d.height * c.y + c.offsetY);
        b.transform.Bb(c);
        for (b = b.Y; b !== m && b !== a;) b.transform.Bb(c),
        b = b.Y;
        a.Cm.Bb(c);
        c.offset( - a.Hc.x, -a.Hc.y);
        return c
    }
    R.prototype.ensureBounds = R.prototype.Yh = function() {
        mh(this, Infinity, Infinity);
        this.vc()
    };
    R.prototype.vc = function() {
        cj(this);
        if (this.Ec === p) ql(this);
        else {
            this instanceof lf && (this.K !== zg && this.bb !== m) && (this.vi = this.bb);
            var a = this.LA;
            a.set(this.yb);
            lj(this);
            this.yb.qa();
            var b = this.bf;
            this.Hi(0, 0, this.Hc.width, this.Hc.height);
            var c = NaN,
            d = NaN,
            e = this.tf,
            g = this.Ab;
            Zb(e) && v.g("Spot must be real: " + e.toString());
            var i = g.ua,
            j = this.ft;
            j.Ml(0, 0, i.width, i.height, e);
            if (g !== this) {
                g.transform.Bb(j);
                g.Ua && (e = g.Kh / 2, j.offset( - e, -e));
                for (g = g.Y; g !== m && g !== this;) g.transform.Bb(j),
                g = g.Y
            }
            this.Cm.Bb(j);
            j.offset( - this.Hc.x, -this.Hc.y);
            j = this.ft;
            g = this.position;
            e = this.location;
            e.aa() ? (c = e.x - j.x, d = e.y - j.y, g.copy(), g.yd(c, d)) : g.aa() && (c = g.x, d = g.y, e.copy(), e.yd(c + j.x, d + j.y));
            j = this.yb;
            j.x = c;
            j.y = d;
            j.freeze();
            cj(this);
            dj(this, a, j);
            a.u(j) ? this.bf = b: this.Vd() && (!fb(a.width, j.width) || !fb(a.height, j.height)) && this.r(16);
            this.ri = p
        }
    };
    function xi(a, b) {
        a.zt = p;
        var c = a.b;
        if (c !== m) {
            a.updateAdornments();
            var d = a.yE;
            if (d !== m) {
                cj(a);
                for (lj(a); d.next();) mh(d.value, Infinity, Infinity),
                d.value.vc()
            }
            a instanceof S && Ji(c, a); ! a.ta.Tc && !b && mi(c);
            var d = a.yb,
            e = c.ob;
            e.aa() ? a.bf ? d.Te(e) || (a.bf = p, xh(c)) : d.Te(e) && (a.bf = h) : c.vm = h;
            a.yb.aa() && xh(c, a.yb)
        }
    }
    R.prototype.mk = ca(h);
    R.prototype.Vd = ca(h);
    v.a(R, "isInDocumentBounds", R.prototype.Ou);
    v.defineProperty(R, {
        Ou: "isInDocumentBounds"
    },
    s("pp"),
    function(a) {
        var b = this.pp;
        b !== a && (t && v.e(a, "boolean", R, "isInDocumentBounds"), this.pp = a, this.d("isInDocumentBounds", b, a))
    });
    v.a(R, "category", R.prototype.od);
    v.defineProperty(R, {
        od: "category"
    },
    s("tj"),
    function(a) {
        var b = this.tj;
        if (b !== a) {
            v.e(a, "string", R, "category");
            this.tj = a;
            this.d("category", b, a);
            var b = this.b,
            c = this.data;
            if (b !== m && c !== m) {
                var d = b.P;
                this instanceof U ? (d instanceof N && d.mD(c, a), b = b.findTemplateForLinkData(c, a), b instanceof U && (of(b), b = b.copy(), b instanceof U && tl(this, b, a))) : this instanceof lf || (d !== m && d.Vy(c, a), b = b.findTemplateForNodeData(c, a), b instanceof R && (of(b), b = b.copy(), b instanceof R && tl(this, b, a)))
            }
        }
    });
    function tl(a, b, c) {
        a.Wg();
        var d = a.data,
        e = a.Ed,
        g = a.Ha;
        b.Yg(a);
        b.jb(a);
        a.tj = c;
        a.J();
        hj(a);
        b = a.b;
        c = h;
        b !== m && (c = b.nb, b.nb = h);
        a.fm = d;
        d !== m && a.nc();
        b !== m && (b.nb = c);
        d = a.Ed;
        d !== e && (a.ym = e, a.Ed = d);
        a.Ha = g
    }
    R.prototype.canCopy = R.prototype.nH = function() {
        if (!this.rB) return p;
        var a = this.ta;
        if (a === m) return h;
        if (!a.Nh) return p;
        a = a.b;
        return a === m ? h: !a.Nh ? p: h
    };
    R.prototype.canDelete = R.prototype.rH = function() {
        if (!this.BB) return p;
        var a = this.ta;
        if (a === m) return h;
        if (!a.ck) return p;
        a = a.b;
        return a === m ? h: !a.ck ? p: h
    };
    R.prototype.canEdit = R.prototype.tH = function() {
        if (!this.uD) return p;
        var a = this.ta;
        if (a === m) return h;
        if (!a.kn) return p;
        a = a.b;
        return a === m ? h: !a.kn ? p: h
    };
    R.prototype.canGroup = R.prototype.xH = function() {
        if (!this.ZB) return p;
        var a = this.ta;
        if (a === m) return h;
        if (!a.dn) return p;
        a = a.b;
        return a === m ? h: !a.dn ? p: h
    };
    R.prototype.canMove = R.prototype.AH = function() {
        if (!this.GC) return p;
        var a = this.ta;
        if (a === m) return h;
        if (!a.dk) return p;
        a = a.b;
        return a === m ? h: !a.dk ? p: h
    };
    R.prototype.canPrint = R.prototype.XE = function() {
        if (!this.OC) return p;
        var a = this.ta;
        if (a === m) return h;
        if (!a.fn) return p;
        a = a.b;
        return a === m ? h: !a.fn ? p: h
    };
    R.prototype.canReshape = R.prototype.FH = function() {
        if (!this.XC) return p;
        var a = this.ta;
        if (a === m) return h;
        if (!a.gn) return p;
        a = a.b;
        return a === m ? h: !a.gn ? p: h
    };
    R.prototype.canResize = R.prototype.GH = function() {
        if (!this.YC) return p;
        var a = this.ta;
        if (a === m) return h;
        if (!a.hn) return p;
        a = a.b;
        return a === m ? h: !a.hn ? p: h
    };
    R.prototype.canRotate = R.prototype.HH = function() {
        if (!this.cD) return p;
        var a = this.ta;
        if (a === m) return h;
        if (!a.jn) return p;
        a = a.b;
        return a === m ? h: !a.jn ? p: h
    };
    R.prototype.canSelect = R.prototype.Kx = function() {
        if (!this.sk) return p;
        var a = this.ta;
        if (a === m) return h;
        if (!a.Pd) return p;
        a = a.b;
        return a === m ? h: !a.Pd ? p: h
    };
    v.a(R, "copyable", R.prototype.rB);
    v.defineProperty(R, {
        rB: "copyable"
    },
    s("Eo"),
    function(a) {
        var b = this.Eo;
        b !== a && (t && v.e(a, "boolean", R, "copyable"), this.Eo = a, this.d("copyable", b, a))
    });
    v.a(R, "deletable", R.prototype.BB);
    v.defineProperty(R, {
        BB: "deletable"
    },
    s("Ro"),
    function(a) {
        var b = this.Ro;
        b !== a && (t && v.e(a, "boolean", R, "deletable"), this.Ro = a, this.d("deletable", b, a))
    });
    v.a(R, "textEditable", R.prototype.uD);
    v.defineProperty(R, {
        uD: "textEditable"
    },
    s("Oq"),
    function(a) {
        var b = this.Oq;
        b !== a && (t && v.e(a, "boolean", R, "textEditable"), this.Oq = a, this.d("textEditable", b, a), this.updateAdornments())
    });
    v.a(R, "groupable", R.prototype.ZB);
    v.defineProperty(R, {
        ZB: "groupable"
    },
    s("kp"),
    function(a) {
        var b = this.kp;
        b !== a && (t && v.e(a, "boolean", R, "groupable"), this.kp = a, this.d("groupable", b, a))
    });
    v.a(R, "movable", R.prototype.GC);
    v.defineProperty(R, {
        GC: "movable"
    },
    s("Xp"),
    function(a) {
        var b = this.Xp;
        b !== a && (t && v.e(a, "boolean", R, "movable"), this.Xp = a, this.d("movable", b, a))
    });
    v.a(R, "printable", R.prototype.OC);
    v.defineProperty(R, {
        OC: "printable"
    },
    s("gq"),
    function(a) {
        var b = this.gq;
        b !== a && (t && v.e(a, "boolean", R, "printable"), this.gq = a, this.d("printable", b, a))
    });
    v.a(R, "reshapable", R.prototype.XC);
    v.defineProperty(R, {
        XC: "reshapable"
    },
    s("lq"),
    function(a) {
        var b = this.lq;
        b !== a && (t && v.e(a, "boolean", R, "reshapable"), this.lq = a, this.d("reshapable", b, a), this.updateAdornments())
    });
    v.a(R, "resizable", R.prototype.YC);
    v.defineProperty(R, {
        YC: "resizable"
    },
    s("mq"),
    function(a) {
        var b = this.mq;
        b !== a && (t && v.e(a, "boolean", R, "resizable"), this.mq = a, this.d("resizable", b, a), this.updateAdornments())
    });
    v.a(R, "rotatable", R.prototype.cD);
    v.defineProperty(R, {
        cD: "rotatable"
    },
    s("rq"),
    function(a) {
        var b = this.rq;
        b !== a && (t && v.e(a, "boolean", R, "rotatable"), this.rq = a, this.d("rotatable", b, a), this.updateAdornments())
    });
    v.a(R, "selectable", R.prototype.sk);
    v.defineProperty(R, {
        sk: "selectable"
    },
    s("Km"),
    function(a) {
        var b = this.Km;
        b !== a && (t && v.e(a, "boolean", R, "selectable"), this.Km = a, this.d("selectable", b, a), this.updateAdornments())
    });
    v.a(R, "selectionObjectName", R.prototype.ao);
    v.defineProperty(R, {
        ao: "selectionObjectName"
    },
    s("Eq"),
    function(a) {
        var b = this.Eq;
        b !== a && (t && v.e(a, "string", R, "selectionObjectName"), this.Eq = a, this.$j = m, this.d("selectionObjectName", b, a))
    });
    v.a(R, "selectionAdorned", R.prototype.jD);
    v.defineProperty(R, {
        jD: "selectionAdorned"
    },
    s("Bq"),
    function(a) {
        var b = this.Bq;
        b !== a && (t && v.e(a, "boolean", R, "selectionAdorned"), this.Bq = a, this.d("selectionAdorned", b, a), this.updateAdornments())
    });
    v.a(R, "selectionAdornmentTemplate", R.prototype.kD);
    v.defineProperty(R, {
        kD: "selectionAdornmentTemplate"
    },
    s("Cq"),
    function(a) {
        var b = this.Cq;
        b !== a && (t && v.c(a, lf, R, "selectionAdornmentTemplate"), this instanceof U && (a.type = zg), this.Cq = a, this.d("selectionAdornmentTemplate", b, a))
    });
    v.m(R, {
        $n: "selectionObject"
    },
    function() {
        if (this.$j === m) {
            var a = this.ao;
            a !== m && "" !== a ? (a = this.Re(a), this.$j = a !== m ? a: this) : this instanceof U ? (a = this.path, this.$j = a !== m ? a: this) : this.$j = this
        }
        return this.$j
    });
    v.a(R, "isSelected", R.prototype.Ha);
    v.defineProperty(R, {
        Ha: "isSelected"
    },
    s("$s"),
    function(a) {
        var b = this.$s;
        if (b !== a) {
            t && v.e(a, "boolean", R, "isSelected");
            var c = this.b;
            if (!a || this.Kx() && !(c !== m && c.selection.count >= c.yC)) {
                this.$s = a;
                var d = p;
                if (c !== m) {
                    d = c.nb;
                    c.nb = h;
                    var e = c.selection;
                    e.qa();
                    a ? e.add(this) : e.remove(this);
                    e.freeze()
                }
                this.d("isSelected", b, a);
                this.updateAdornments();
                a = this.lD;
                a !== m && a(this);
                c !== m && (yf(c), c.nb = d)
            }
        }
    });
    v.a(R, "selectionChanged", R.prototype.lD);
    v.defineProperty(R, {
        lD: "selectionChanged"
    },
    s("Dq"),
    function(a) {
        var b = this.Dq;
        b !== a && (a !== m && v.e(a, "function", R, "selectionChanged"), this.Dq = a, this.d("selectionChanged", b, a))
    });
    v.a(R, "resizeAdornmentTemplate", R.prototype.ZC);
    v.defineProperty(R, {
        ZC: "resizeAdornmentTemplate"
    },
    s("nq"),
    function(a) {
        var b = this.nq;
        b !== a && (t && v.c(a, lf, R, "resizeAdornmentTemplate"), this.nq = a, this.d("resizeAdornmentTemplate", b, a))
    });
    v.a(R, "resizeObjectName", R.prototype.aD);
    v.defineProperty(R, {
        aD: "resizeObjectName"
    },
    s("pq"),
    function(a) {
        var b = this.pq;
        b !== a && (t && v.e(a, "string", R, "resizeObjectName"), this.pq = a, this.el = m, this.d("resizeObjectName", b, a))
    });
    v.m(R, {
        yG: "resizeObject"
    },
    function() {
        if (this.el === m) {
            var a = this.aD;
            a !== m && "" !== a ? (a = this.Re(a), this.el = a !== m ? a: this) : this.el = this
        }
        return this.el
    });
    v.a(R, "resizeCellSize", R.prototype.$C);
    v.defineProperty(R, {
        $C: "resizeCellSize"
    },
    s("oq"),
    function(a) {
        var b = this.oq;
        b.u(a) || (t && v.c(a, sb, R, "resizeCellSize"), this.oq = a = a.B(), this.d("resizeCellSize", b, a))
    });
    v.a(R, "rotateAdornmentTemplate", R.prototype.dD);
    v.defineProperty(R, {
        dD: "rotateAdornmentTemplate"
    },
    s("sq"),
    function(a) {
        var b = this.sq;
        b !== a && (t && v.c(a, lf, R, "rotateAdornmentTemplate"), this.sq = a, this.d("rotateAdornmentTemplate", b, a))
    });
    v.a(R, "rotateObjectName", R.prototype.eD);
    v.defineProperty(R, {
        eD: "rotateObjectName"
    },
    s("tq"),
    function(a) {
        var b = this.tq;
        b !== a && (t && v.e(a, "string", R, "rotateObjectName"), this.tq = a, this.fl = m, this.d("rotateObjectName", b, a))
    });
    v.m(R, {
        CG: "rotateObject"
    },
    function() {
        if (this.fl === m) {
            var a = this.eD;
            a !== m && "" !== a ? (a = this.Re(a), this.fl = a !== m ? a: this) : this.fl = this
        }
        return this.fl
    });
    v.a(R, "text", R.prototype.text);
    v.defineProperty(R, {
        text: "text"
    },
    s("nd"),
    function(a) {
        var b = this.nd;
        b !== a && (t && v.e(a, "string", R, "text"), this.nd = a, this.d("text", b, a))
    });
    v.a(R, "containingGroup", R.prototype.Wa);
    v.defineProperty(R, {
        Wa: "containingGroup"
    },
    s("wj"),
    function(a) {
        if (this.Vd()) {
            var b = this.wj;
            if (b !== a) {
                t && a !== m && v.c(a, mf, R, "containingGroup");
                if (a !== m && (this === a || a.Cl(this))) this === a && v.g("Cannot make a Group a member of itself: " + this.toString()),
                v.g("Cannot make a Group indirectly contain itself: " + this.toString() + " already contains " + a.toString());
                this.r(zi);
                var c = this.b;
                b !== m ? ul(b, this) : this instanceof mf && c !== m && c.gl.remove(this);
                this.wj = a;
                a !== m ? vl(a, this) : this instanceof mf && c !== m && c.gl.add(this);
                this.r(ui);
                if (c !== m) {
                    var d = this.data,
                    e = c.P;
                    d !== m && e instanceof N && e.Xy(d, e.dc(a !== m ? a.data: m))
                }
                d = this.Wx;
                d !== m && (e = h, c !== m && (e = c.ya, c.ya = h), d(this, b, a), c !== m && (c.ya = e));
                if (this instanceof mf) {
                    c = new pa(R);
                    kf(c, this, h, p);
                    for (c = c.f; c.next();) if (d = c.value, d instanceof S) for (d = d.me; d.next();) e = d.value,
                    Bi(e)
                }
                if (this instanceof S) for (d = this.me; d.next();) e = d.value,
                Bi(e);
                this.d("containingGroup", b, a);
                a !== m && a.hv()
            }
        } else v.g("cannot set the Part.containingGroup of a Link or Adornment")
    });
    function wl(a, b) {
        var c = a.wj;
        if (c !== b) {
            c !== m && ul(c, a);
            a.wj = b;
            b !== m && vl(b, a);
            var d = a.Wx;
            if (d !== m) {
                var e = h,
                g = a.b;
                g !== m && (e = g.ya, g.ya = h);
                d(a, c, b);
                g !== m && (g.ya = e)
            }
        }
    }
    function fj(a) {
        a = a.Wa;
        a !== m && (a.J(), a.bb !== m && a.bb.J(), a.pf())
    }
    R.prototype.Er = function() {
        var a = this.wj;
        a !== m && vl(a, this)
    };
    R.prototype.Fr = function() {
        var a = this.wj;
        a !== m && ul(a, this)
    };
    R.prototype.tl = function() {
        var a = this.data;
        if (a !== m) {
            var b = this.b;
            b !== m && (b = b.P, b !== m && b.VC(a))
        }
    };
    v.a(R, "containingGroupChanged", R.prototype.Wx);
    v.defineProperty(R, {
        Wx: "containingGroupChanged"
    },
    s("Do"),
    function(a) {
        var b = this.Do;
        b !== a && (a !== m && v.e(a, "function", R, "containingGroupChanged"), this.Do = a, this.d("containingGroupChanged", b, a))
    });
    v.m(R, {
        IK: "topLevelPart"
    },
    function() {
        return xl(this, this)
    });
    function xl(a, b) {
        var c = b.Wa;
        return c !== m ? xl(a, c) : b instanceof S && (c = b.le, c !== m) ? xl(a, c) : b
    }
    v.m(R, {
        Hr: "isTopLevel"
    },
    function() {
        return this.Wa !== m || this instanceof S && this.Ui ? p: h
    });
    R.prototype.isMemberOf = R.prototype.Cl = function(a) {
        return ! (a instanceof mf) ? p: yl(this, this, a)
    };
    function yl(a, b, c) {
        if (b === c || c === m) return p;
        var d = b.Wa;
        return d !== m && (d === c || yl(a, d, c)) ? h: b instanceof S && (b = b.le, b !== m) ? yl(a, b, c) : p
    }
    R.prototype.findCommonContainingGroup = R.prototype.vF = function(a) {
        return zl(this, this, a)
    };
    function zl(a, b, c) {
        if (b === m || c === m) return m;
        var d = b.Wa;
        if (d === m) return m;
        if (b === c) return d;
        var e = c.Wa;
        return e === m ? m: d === e ? e: yl(a, c, d) ? d: yl(a, b, e) ? e: zl(a, d, e)
    }
    v.a(R, "isLayoutPositioned", R.prototype.sy);
    v.defineProperty(R, {
        sy: "isLayoutPositioned"
    },
    s("qp"),
    function(a) {
        var b = this.qp;
        b !== a && (t && v.e(a, "boolean", R, "isLayoutPositioned"), this.qp = a, this.d("isLayoutPositioned", b, a), this.r(a ? rj: sj))
    });
    v.a(R, "layoutConditions", R.prototype.qC);
    v.defineProperty(R, {
        qC: "layoutConditions"
    },
    s("Cp"),
    function(a) {
        var b = this.Cp;
        b !== a && (t && v.e(a, "number", R, "layoutConditions"), this.Cp = a, this.d("layoutConditions", b, a))
    });
    R.prototype.canLayout = R.prototype.jr = function() {
        if (!this.sy || !this.eb()) return p;
        var a = this.ta;
        return a !== m && a.Tc || this instanceof S && this.Ui ? p: h
    };
    R.prototype.invalidateLayout = R.prototype.r = function(a) {
        a === f && (a = 16777215);
        var b; ! this.sy || 0 === (a & this.qC) ? b = p: (b = this.ta, b !== m && b.Tc || this instanceof S && this.Ui ? b = p: (b = this.b, b = b !== m && b.da.cb ? p: h));
        if (b) if (b = this.wj, b !== m) {
            var c = b.xb;
            c !== m ? c.r() : b.r(a)
        } else a = this.b,
        a !== m && (c = a.xb, c !== m && c.r())
    };
    v.a(R, "dragComputation", R.prototype.cy);
    v.defineProperty(R, {
        cy: "dragComputation"
    },
    s("So"),
    function(a) {
        var b = this.So;
        b !== a && (a !== m && v.e(a, "function", R, "dragComputation"), this.So = a, this.d("dragComputation", b, a))
    });
    v.a(R, "isShadowed", R.prototype.Dl);
    v.defineProperty(R, {
        Dl: "isShadowed"
    },
    s("Qf"),
    function(a) {
        var b = this.Qf;
        b !== a && (t && v.e(a, "boolean", R, "isShadowed"), this.Qf = a, hj(this), this.d("isShadowed", b, a))
    });
    v.a(R, "shadowOffset", R.prototype.oD);
    v.defineProperty(R, {
        oD: "shadowOffset"
    },
    s("Nm"),
    function(a) {
        var b = this.Nm;
        b.u(a) || (t && v.c(a, D, R, "shadowOffset"), this.Nm = a = a.B(), hj(this), this.d("shadowOffset", b, a))
    });
    v.a(R, "shadowColor", R.prototype.shadowColor);
    v.defineProperty(R, {
        shadowColor: "shadowColor"
    },
    s("Mm"),
    function(a) {
        var b = this.Mm;
        b !== a && (t && v.e(a, "string", R, "shadowColor"), this.Mm = a, hj(this), this.d("shadowColor", b, a))
    });
    v.a(R, "shadowBlur", R.prototype.shadowBlur);
    v.defineProperty(R, {
        shadowBlur: "shadowBlur"
    },
    s("Lm"),
    function(a) {
        var b = this.Lm;
        b !== a && (t && v.e(a, "number", R, "shadowBlur"), this.Lm = a, hj(this), this.d("shadowBlur", b, a))
    });
    function lf(a) {
        0 === arguments.length ? R.call(this, Vg) : R.call(this, a);
        this.Ed = "Adornment";
        this.va = m;
        this.Km = p;
        this.ui = new D(NaN, NaN);
        this.nh = new y(E);
        this.hc = m;
        this.Ic = (new y(D)).freeze();
        this.bu = new D;
        this.bb = m
    }
    v.H("Adornment", lf);
    v.pa(lf, R);
    lf.prototype.toString = function() {
        var a = this.cn;
        return "Adornment(" + this.od + ")" + (a !== m ? a.toString() : "")
    };
    lf.prototype.Aj = function() {
        return this.va && this.va.W instanceof U ? this.va.W.Aj() : m
    };
    lf.prototype.hp = ca(m);
    lf.prototype.tw = function() {
        var a = this.cn;
        return a instanceof U ? a.Ic: m
    };
    v.m(lf, {
        placeholder: "placeholder"
    },
    s("bb"));
    v.a(lf, "adornedObject", lf.prototype.Od);
    v.defineProperty(lf, {
        Od: "adornedObject"
    },
    s("va"), ba("va"));
    v.m(lf, {
        cn: "adornedPart"
    },
    function() {
        var a = this.va;
        return a !== m ? a.W: m
    });
    lf.prototype.mk = function() {
        var a = this.va;
        if (a === m) return h;
        a = a.W;
        return a === m || !a.Ec
    };
    lf.prototype.Vd = ca(p);
    v.m(lf, {
        Wa: "containingGroup"
    },
    ca(m));
    lf.prototype.Jl = function(a, b, c, d, e, g, i) {
        if (a === Ee && "elements" === b) if (e instanceof Pg) this.bb === m ? this.bb = e: this.bb !== e && v.g("Cannot insert a second Placeholder into the visual tree of an Adornment.");
        else {
            if (e instanceof w) {
                var j = Ek(e, e,
                function(a) {
                    return a instanceof Pg
                });
                j instanceof Pg && (this.bb === m ? this.bb = j: this.bb !== j && v.g("Cannot insert a second Placeholder into the visual tree of an Adornment."))
            }
        } else a === Fe && "elements" === b && (d === this.bb ? this.bb = m: d instanceof w && this.bb.ci(d) && (this.bb = m));
        R.prototype.Jl.call(this, a, b, c, d, e, g, i)
    };
    lf.prototype.updateAdornments = lf.prototype.ii = aa();
    lf.prototype.tl = aa();
    function S(a) {
        0 === arguments.length ? R.call(this, Vg) : R.call(this, a);
        this.vd = new y(U);
        this.xm = this.Hp = this.Fp = m;
        this.wp = h;
        this.br = p;
        this.Vq = m;
        this.xo = this.xp = h;
        this.yo = (new Hb(2)).freeze();
        this.rc = this.pg = m
    }
    v.H("Node", S);
    v.pa(S, R);
    S.prototype.jb = function(a) {
        R.prototype.jb.call(this, a);
        a.Fp = this.Fp;
        a.Hp = this.Hp;
        a.wp = this.wp;
        a.br = this.br;
        a.Vq = this.Vq;
        a.xp = this.xp;
        a.xo = this.xo;
        a.yo.Ra(this.yo)
    };
    S.prototype.Yg = function(a) {
        R.prototype.Yg.call(this, a);
        a.pf();
        a.pg = this.pg;
        a.rc = m
    };
    var Al;
    S.DirectionDefault = Al = v.l(S, "DirectionDefault", 0);
    S.DirectionAbsolute = v.l(S, "DirectionAbsolute", 1);
    var Bl;
    S.DirectionRotatedNode = Bl = v.l(S, "DirectionRotatedNode", 2);
    var Ui;
    S.DirectionRotatedNodeOrthogonal = Ui = v.l(S, "DirectionRotatedNodeOrthogonal", 3);
    function Cl(a, b) {
        b !== m && (a.pg == m && (a.pg = new pa(Dl)), a.pg.add(b))
    }
    S.prototype.Jl = function(a, b, c, d, e, g, i) {
        a === Ee && "elements" === b ? this.rc = m: a === Fe && "elements" === b && (this.b === m ? this.rc = m: d instanceof P && Dk(this, d,
        function(a, b) {
            Fj(a, b, h)
        }));
        R.prototype.Jl.call(this, a, b, c, d, e, g, i)
    };
    S.prototype.invalidateConnectedLinks = S.prototype.pf = function(a) {
        a === f && (a = m);
        for (var b = this.me; b.next();) {
            var c = b.value;
            if (! (a !== m && a.contains(c))) {
                var d = c.Jc;
                d !== m && (d.md = m);
                var e = c.sd;
                e !== m && e !== d && (e.md = m);
                c.Tb()
            }
        }
    };
    S.prototype.mk = function() {
        if (this.Ui === p) return h;
        var a = this.le;
        return a === m ? h: !a.Ec
    };
    v.a(S, "avoidable", S.prototype.Ix);
    v.defineProperty(S, {
        Ix: "avoidable"
    },
    s("xo"),
    function(a) {
        var b = this.xo;
        if (b !== a) {
            t && v.e(a, "boolean", S, "avoidable");
            this.xo = a;
            var c = this.b;
            c !== m && Ji(c, this);
            this.d("avoidable", b, a)
        }
    });
    v.a(S, "avoidableMargin", S.prototype.eB);
    v.defineProperty(S, {
        eB: "avoidableMargin"
    },
    s("yo"),
    function(a) {
        "number" === typeof a ? a = new Hb(a) : v.c(a, Hb, S, "avoidableMargin");
        var b = this.yo;
        if (!b.u(a)) {
            this.yo = a = a.B();
            var c = this.b;
            c !== m && Ji(c, this);
            this.d("avoidableMargin", b, a)
        }
    });
    S.prototype.canAvoid = S.prototype.kH = function() {
        return this.Ix && !this.Ui
    };
    S.prototype.getAvoidableRectangle = S.prototype.VI = function(a) {
        a === f && (a = new E);
        a.set(this.la);
        a.fr(this.eB);
        return a
    };
    function rl(a) {
        for (; a !== m && !a.eb();) a = a.Wa;
        return a
    }
    v.m(S, {
        me: "linksConnected"
    },
    function() {
        return this.vd.f
    });
    S.prototype.findLinksConnected = S.prototype.wF = function(a) {
        a === f && (a = m);
        if (a === m) return this.vd.f;
        t && v.e(a, "string", S, "findLinksConnected:pid");
        var b = new Pa(this.vd),
        c = this;
        b.Yu = function(b) {
            return b.ea === c && b.dh === a || b.ia === c && b.gi === a
        };
        return b
    };
    S.prototype.findLinksOutOf = S.prototype.tr = function(a) {
        a === f && (a = m);
        var b = new Pa(this.vd),
        c = this;
        b.Yu = function(b) {
            return b.ea !== c ? p: a === m ? h: b.dh === a
        };
        return b
    };
    S.prototype.findLinksInto = S.prototype.Qe = function(a) {
        a === f && (a = m);
        var b = new Pa(this.vd),
        c = this;
        b.Yu = function(b) {
            return b.ia !== c ? p: a === m ? h: b.gi === a
        };
        return b
    };
    S.prototype.findNodesConnected = S.prototype.MB = function(a) {
        a === f && (a = m);
        for (var b = m,
        c = m,
        d = this.vd.f; d.next();) {
            var e = d.value;
            if (e.ea === this) {
                if (a === m || e.dh === a) e = e.ia,
                b !== m ? b.add(e) : c !== m && c !== e ? (b = new pa(S), b.add(c), b.add(e)) : c = e
            } else if (e.ia === this && (a === m || e.gi === a)) e = e.ea,
            b !== m ? b.add(e) : c !== m && c !== e ? (b = new pa(S), b.add(c), b.add(e)) : c = e
        }
        return b !== m ? b.f: c !== m ? new Oa(c) : v.Ef
    };
    S.prototype.findNodesOutOf = S.prototype.wn = function(a) {
        a === f && (a = m);
        for (var b = m,
        c = m,
        d = this.vd.f; d.next();) {
            var e = d.value;
            if (e.ea === this && (a === m || e.dh === a)) e = e.ia,
            b !== m ? b.add(e) : c !== m && c !== e ? (b = new pa(S), b.add(c), b.add(e)) : c = e
        }
        return b !== m ? b.f: c !== m ? new Oa(c) : v.Ef
    };
    S.prototype.findNodesInto = S.prototype.vn = function(a) {
        a === f && (a = m);
        for (var b = m,
        c = m,
        d = this.vd.f; d.next();) {
            var e = d.value;
            if (e.ia === this && (a === m || e.gi === a)) e = e.ea,
            b !== m ? b.add(e) : c !== m && c !== e ? (b = new pa(S), b.add(c), b.add(e)) : c = e
        }
        return b !== m ? b.f: c !== m ? new Oa(c) : v.Ef
    };
    v.a(S, "linkConnected", S.prototype.rC);
    v.defineProperty(S, {
        rC: "linkConnected"
    },
    s("Fp"),
    function(a) {
        var b = this.Fp;
        b !== a && (a !== m && v.e(a, "function", S, "linkConnected"), this.Fp = a, this.d("linkConnected", b, a))
    });
    v.a(S, "linkDisconnected", S.prototype.sC);
    v.defineProperty(S, {
        sC: "linkDisconnected"
    },
    s("Hp"),
    function(a) {
        var b = this.Hp;
        b !== a && (a !== m && v.e(a, "function", S, "linkDisconnected"), this.Hp = a, this.d("linkDisconnected", b, a))
    });
    function El(a, b, c) {
        if (!a.vd.contains(b)) {
            a.vd.add(b);
            var d = a.rC;
            if (d !== m) {
                var e = h,
                g = a.b;
                g !== m && (e = g.ya, g.ya = h);
                d(a, b, c);
                g !== m && (g.ya = e)
            }
            a.Wi && (c = h, g = a.b, g !== m && (c = g.sf), c ? b.ea === a && (a.Wi = p) : b.ia === a && (a.Wi = p))
        }
    }
    function Fl(a, b, c) {
        if (a.vd.remove(b)) {
            var d = a.sC,
            e = a.b;
            if (d !== m) {
                var g = h;
                e !== m && (g = e.ya, e.ya = h);
                d(a, b, c);
                e !== m && (e.ya = g)
            } ! a.Wi && !(e !== m && e.da.cb) && (b = a.vd.count, 0 === b ? a.Wi = h: 1 === b && Fi(a))
        }
    }
    function Fi(a) {
        if (0 !== a.vd.count) {
            var b = h,
            c = a.b;
            c !== m && (b = c.sf);
            for (c = a.vd.f; c.next();) {
                var d = c.value;
                if (b) {
                    if (d.ea === a) {
                        a.Wi = p;
                        return
                    }
                } else if (d.ia === a) {
                    a.Wi = p;
                    return
                }
            }
            a.Wi = h
        }
    }
    S.prototype.Er = function() {
        R.prototype.Er.call(this);
        Fi(this);
        var a = this.xm;
        a !== m && Gl(a, this)
    };
    S.prototype.Fr = function() {
        R.prototype.Fr.call(this);
        var a = this.xm;
        a !== m && a.ef !== m && (a.ef.remove(this), a.J())
    };
    S.prototype.tl = function() {
        if (0 < this.vd.count) {
            var a = this.b;
            if (a === m) return;
            for (var b = this.vd.copy().f; b.next();) a.remove(b.value)
        }
        R.prototype.tl.call(this)
    };
    v.m(S, {
        Ui: "isLinkLabel"
    },
    function() {
        return this.xm !== m
    });
    v.a(S, "labeledLink", S.prototype.le);
    v.defineProperty(S, {
        le: "labeledLink"
    },
    s("xm"),
    function(a) {
        var b = this.xm;
        if (b !== a) {
            t && a !== m && v.c(a, U, S, "labeledLink");
            var c = this.b,
            d = this.data;
            if (b !== m && (b.ef !== m && (b.ef.remove(this), b.J()), c !== m && d !== m)) {
                var e = b.data,
                g = c.P;
                if (e !== m && g instanceof N) {
                    var i = g.dc(d);
                    i !== f && g.uG(e, i)
                }
            }
            this.xm = a;
            a !== m && (Gl(a, this), c !== m && d !== m && (e = a.data, g = c.P, e !== m && g instanceof N && (i = g.dc(d), i !== f && g.VA(e, i))));
            nj(this);
            this.d("labeledLink", b, a)
        }
    });
    S.prototype.findPort = S.prototype.vr = function(a) {
        t && v.e(a, "string", S, "findPort:pid");
        this.rc === m && Gj(this);
        if (this.rc !== m) {
            var b = this.rc.ca(a);
            if (b !== m) return b
        }
        if ("" !== a && this.rc !== m && (b = this.rc.ca(""), b !== m)) return b;
        this.rc === m && Gj(this);
        return this
    };
    v.m(S, {
        port: "port"
    },
    function() {
        return this.vr("")
    });
    v.m(S, {
        ports: "ports"
    },
    function() {
        this.rc === m && Gj(this);
        return this.rc !== m ? this.rc.f: v.Ef
    });
    function Gj(a) {
        a.rc !== m && a.rc.clear();
        Dk(a, a,
        function(a, c) {
            Hj(a, c)
        })
    }
    function Hj(a, b) {
        var c = b.pe;
        c !== m && (a.rc === m && (a.rc = new oa("string", P)), a.rc.add(c, b))
    }
    function Fj(a, b, c) {
        var d = b.pe;
        if (d !== m && (a.rc !== m && a.rc.remove(d), b = a.b, b !== m && c)) {
            c = m;
            for (a = a.wF(d); a.next();) c === m && (c = []),
            c.push(a.value);
            if (c !== m) for (a = 0; a < c.length; a++) b.remove(c[a])
        }
    }
    S.prototype.isInTreeOf = S.prototype.xJ = function(a) {
        if (a === m || a === this) return p;
        var b = h,
        c = this.b;
        c !== m && (b = c.sf);
        if (b) a: {
            for (b = this; b !== a;) {
                for (var c = m,
                d = b.Qe(); d.next() && !(c = d.value.ea, c !== b););
                if (c === m) {
                    a = p;
                    break a
                }
                b = c
            }
            a = h
        } else a: {
            for (b = this; b !== a;) {
                c = m;
                for (d = b.tr(); d.next() && !(c = d.value.ia, c !== b););
                if (c === m) {
                    a = p;
                    break a
                }
                b = c
            }
            a = h
        }
        return a
    };
    S.prototype.findTreeParts = S.prototype.TI = function() {
        var a = new pa(R);
        kf(a, this, p, h);
        return a
    };
    S.prototype.collapseTree = S.prototype.mr = function() {
        var a = this.b;
        if (a !== m && !a.rf) {
            a.rf = h;
            var b = a.sf,
            c = new pa(S);
            c.add(this);
            Hl(this, c, b);
            a.rf = p
        }
    };
    function Hl(a, b, c) {
        a.Wd = p;
        for (var d = c ? a.tr() : a.Qe(); d.next();) {
            var e = d.value,
            g = e.VB(a);
            g !== m && (g !== a && !b.contains(g)) && (b.add(g), hj(e), e.Wg(), hj(g), g.Wg(), fj(g), g.r(sj), g.Wd && (g.ov = g.Wd, Hl(g, b, c)))
        }
    }
    S.prototype.expandTree = S.prototype.sr = function() {
        var a = this.b;
        if (a !== m && !a.rf) {
            a.rf = h;
            var b = a.sf,
            c = new pa(S);
            c.add(this);
            Il(this, c, b);
            a.rf = p
        }
    };
    function Il(a, b, c) {
        a.Wd = h;
        for (var d = c ? a.tr() : a.Qe(); d.next();) {
            var e = d.value,
            g = e.VB(a);
            g !== m && (g !== a && !b.contains(g)) && (b.add(g), hj(e), e.ii(), hj(g), g.ii(), fj(g), g.r(rj), g.ov && (g.ov = p, Il(g, b, c)))
        }
    }
    v.a(S, "isTreeExpanded", S.prototype.Wd);
    v.defineProperty(S, {
        Wd: "isTreeExpanded"
    },
    s("wp"),
    function(a) {
        var b = this.wp;
        if (b !== a) {
            t && v.e(a, "boolean", S, "isTreeExpanded");
            this.wp = a;
            var c = this.b;
            c !== m && xh(c);
            this.d("isTreeExpanded", b, a);
            b = this.GD;
            if (b !== m) {
                var d = h;
                c !== m && (d = c.ya, c.ya = h);
                b(this);
                c !== m && (c.ya = d)
            }
            c !== m && c.da.cb || (a ? this.sr() : this.mr())
        }
    });
    v.a(S, "wasTreeExpanded", S.prototype.ov);
    v.defineProperty(S, {
        ov: "wasTreeExpanded"
    },
    s("br"),
    function(a) {
        var b = this.br;
        b !== a && (t && v.e(a, "boolean", S, "wasTreeExpanded"), this.br = a, this.d("wasTreeExpanded", b, a))
    });
    v.a(S, "treeExpandedChanged", S.prototype.GD);
    v.defineProperty(S, {
        GD: "treeExpandedChanged"
    },
    s("Vq"),
    function(a) {
        var b = this.Vq;
        b !== a && (a !== m && v.e(a, "function", S, "treeExpandedChanged"), this.Vq = a, this.d("treeExpandedChanged", b, a))
    });
    v.a(S, "isTreeLeaf", S.prototype.Wi);
    v.defineProperty(S, {
        Wi: "isTreeLeaf"
    },
    s("xp"),
    function(a) {
        var b = this.xp;
        b !== a && (t && v.e(a, "boolean", S, "isTreeLeaf"), this.xp = a, this.d("isTreeLeaf", b, a))
    });
    function U() {
        R.call(this, zg);
        this.vg = m;
        this.wg = "";
        this.fp = m;
        this.yg = ec;
        this.ug = NaN;
        this.tg = Al;
        this.xg = NaN;
        this.Pg = m;
        this.Qg = "";
        this.Uq = m;
        this.Sg = ec;
        this.Og = NaN;
        this.Ng = Al;
        this.Rg = NaN;
        this.kq = this.jq = p;
        this.ro = Vi;
        this.Fo = 0;
        this.Ho = Vi;
        this.Io = NaN;
        this.Ci = Vj;
        this.Hq = 0.5;
        this.hc = this.ef = m;
        this.Ic = (new y(D)).freeze();
        this.Yf = m;
        this.hl = p;
        this.Zw = m;
        this.Tm = p;
        this.Fk = this.th = this.xa = m;
        this.Zd = 0;
        this.nh = new y(E);
        this.bu = new D;
        this.bw = p
    }
    v.H("Link", U);
    v.pa(U, R);
    U.prototype.jb = function(a) {
        R.prototype.jb.call(this, a);
        a.wg = this.wg;
        a.fp = this.fp;
        a.yg = this.yg.B();
        a.ug = this.ug;
        a.tg = this.tg;
        a.xg = this.xg;
        a.Qg = this.Qg;
        a.Uq = this.Uq;
        a.Sg = this.Sg.B();
        a.Og = this.Og;
        a.Ng = this.Ng;
        a.Rg = this.Rg;
        a.jq = this.jq;
        a.kq = this.kq;
        a.ro = this.ro;
        a.Fo = this.Fo;
        a.Ho = this.Ho;
        a.Io = this.Io;
        a.Ci = this.Ci;
        a.Hq = this.Hq
    };
    U.prototype.Yg = function(a) {
        R.prototype.Yg.call(this, a);
        this.wg = a.wg;
        this.Qg = a.Qg;
        a.hc = m;
        a.Yf = m;
        a.Tb();
        a.Fk = this.Fk;
        a.Zd = this.Zd
    };
    var Vj;
    U.Normal = Vj = v.l(U, "Normal", 1);
    var wh;
    U.Orthogonal = wh = v.l(U, "Orthogonal", 2);
    var Qf;
    U.AvoidsNodes = Qf = v.l(U, "AvoidsNodes", 3);
    var Vi;
    U.None = Vi = v.l(U, "None", 0);
    var Pj;
    U.Bezier = Pj = v.l(U, "Bezier", 9);
    var Qj;
    U.JumpGap = Qj = v.l(U, "JumpGap", 10);
    var Rj;
    U.JumpOver = Rj = v.l(U, "JumpOver", 11);
    var Sj;
    U.End = Sj = v.l(U, "End", 17);
    var Tj;
    U.Scale = Tj = v.l(U, "Scale", 18);
    var Uj;
    U.Stretch = Uj = v.l(U, "Stretch", 19);
    var Pk;
    U.OrientAlong = Pk = v.l(U, "OrientAlong", 21);
    var Jl;
    U.OrientPlus90 = Jl = v.l(U, "OrientPlus90", 22);
    var Kl;
    U.OrientMinus90 = Kl = v.l(U, "OrientMinus90", 23);
    var Ll;
    U.OrientOpposite = Ll = v.l(U, "OrientOpposite", 24);
    var Ml;
    U.OrientUpright = Ml = v.l(U, "OrientUpright", 25);
    var Nl;
    U.OrientPlus90Upright = Nl = v.l(U, "OrientPlus90Upright", 26);
    var Ol;
    U.OrientMinus90Upright = Ol = v.l(U, "OrientMinus90Upright", 27);
    var Pl;
    U.OrientUpright45 = Pl = v.l(U, "OrientUpright45", 28);
    U.prototype.mk = function() {
        var a = this.ea;
        if (a !== m && (a.Ec || a.ri)) return p;
        a = this.ia;
        return a !== m && (a.Ec || a.ri) ? p: h
    };
    U.prototype.Vd = ca(p);
    function Ck(a, b) {
        var c;
        switch (a) {
        default:
        case Vi:
            c = 0;
            break;
        case Pk:
            c = b;
            break;
        case Jl:
            c = b + 90;
            break;
        case Kl:
            c = b - 90;
            break;
        case Ll:
            c = b + 180;
            break;
        case Ml:
            c = Ed(b);
            90 < c && 270 > c && (c -= 180);
            break;
        case Nl:
            c = Ed(b + 90);
            90 < c && 270 > c && (c -= 180);
            break;
        case Ol:
            c = Ed(b - 90);
            90 < c && 270 > c && (c -= 180);
            break;
        case Pl:
            c = Ed(b);
            if (45 < c && 135 > c || 225 < c && 315 > c) return 0;
            90 < c && 270 > c && (c -= 180)
        }
        return Ed(c)
    }
    v.a(U, "fromNode", U.prototype.ea);
    v.defineProperty(U, {
        ea: "fromNode"
    },
    s("vg"),
    function(a) {
        var b = this.vg;
        if (b !== a) {
            t && a !== m && v.c(a, S, U, "fromNode");
            var c = this.Jc;
            b !== m && (this.Pg !== b && Fl(b, this, c), c !== m && (c.md = m), Ql(this), b.r(zi));
            this.vg = a;
            this.th = m;
            this.Tb();
            var d = this.b;
            if (d !== m) {
                var e = this.data,
                g = d.P;
                e !== m && g instanceof N && g.fv(e, g.dc(a !== m ? a.data: m))
            }
            e = this.Jc;
            g = this.iy;
            if (g !== m) {
                var i = h;
                d !== m && (i = d.ya, d.ya = h);
                g(this, c, e);
                d !== m && (d.ya = i)
            }
            a !== m && (this.Pg !== a && El(a, this, e), e !== m && (e.md = m), Rl(this), a.r(ui));
            this.d("fromNode", b, a);
            Bi(this)
        }
    });
    v.a(U, "fromPortId", U.prototype.dh);
    v.defineProperty(U, {
        dh: "fromPortId"
    },
    s("wg"),
    function(a) {
        var b = this.wg;
        if (b !== a) {
            t && v.e(a, "string", U, "fromPortId");
            var c = this.Jc;
            c !== m && (c.md = m);
            Ql(this);
            this.wg = a;
            var d = this.Jc;
            d !== m && (d.md = m);
            var e = this.b;
            if (e !== m) {
                var g = this.data,
                i = e.P;
                g !== m && i instanceof N && i.bs(g, a)
            }
            c !== d && (this.th = m, this.Tb(), g = this.iy, g !== m && (i = h, e !== m && (i = e.ya, e.ya = h), g(this, c, d), e !== m && (e.ya = i)));
            Rl(this);
            this.d("fromPortId", b, a)
        }
    });
    v.m(U, {
        Jc: "fromPort"
    },
    function() {
        var a = this.vg;
        return a === m ? m: a.vr(this.wg)
    });
    v.a(U, "fromPortChanged", U.prototype.iy);
    v.defineProperty(U, {
        iy: "fromPortChanged"
    },
    s("fp"),
    function(a) {
        var b = this.fp;
        b !== a && (a !== m && v.e(a, "function", U, "fromPortChanged"), this.fp = a, this.d("fromPortChanged", b, a))
    });
    v.a(U, "toNode", U.prototype.ia);
    v.defineProperty(U, {
        ia: "toNode"
    },
    s("Pg"),
    function(a) {
        var b = this.Pg;
        if (b !== a) {
            t && a !== m && v.c(a, S, U, "toNode");
            var c = this.sd;
            b !== m && (this.vg !== b && Fl(b, this, c), c !== m && (c.md = m), Ql(this), b.r(zi));
            this.Pg = a;
            this.th = m;
            this.Tb();
            var d = this.b;
            if (d !== m) {
                var e = this.data,
                g = d.P;
                e !== m && g instanceof N && g.gv(e, g.dc(a !== m ? a.data: m))
            }
            e = this.sd;
            g = this.gz;
            if (g !== m) {
                var i = h;
                d !== m && (i = d.ya, d.ya = h);
                g(this, c, e);
                d !== m && (d.ya = i)
            }
            a !== m && (this.vg !== a && El(a, this, e), e !== m && (e.md = m), Rl(this), a.r(ui));
            this.d("toNode", b, a);
            Bi(this)
        }
    });
    v.a(U, "toPortId", U.prototype.gi);
    v.defineProperty(U, {
        gi: "toPortId"
    },
    s("Qg"),
    function(a) {
        var b = this.Qg;
        if (b !== a) {
            t && v.e(a, "string", U, "toPortId");
            var c = this.sd;
            c !== m && (c.md = m);
            Ql(this);
            this.Qg = a;
            var d = this.sd;
            d !== m && (d.md = m);
            var e = this.b;
            if (e !== m) {
                var g = this.data,
                i = e.P;
                g !== m && i instanceof N && i.cs(g, a)
            }
            c !== d && (this.th = m, this.Tb(), g = this.gz, g !== m && (i = h, e !== m && (i = e.ya, e.ya = h), g(this, c, d), e !== m && (e.ya = i)));
            Rl(this);
            this.d("toPortId", b, a)
        }
    });
    v.m(U, {
        sd: "toPort"
    },
    function() {
        var a = this.Pg;
        return a === m ? m: a.vr(this.Qg)
    });
    v.a(U, "toPortChanged", U.prototype.gz);
    v.defineProperty(U, {
        gz: "toPortChanged"
    },
    s("Uq"),
    function(a) {
        var b = this.Uq;
        b !== a && (a !== m && v.e(a, "function", U, "toPortChanged"), this.Uq = a, this.d("toPortChanged", b, a))
    });
    v.a(U, "fromSpot", U.prototype.Ya);
    v.defineProperty(U, {
        Ya: "fromSpot"
    },
    s("yg"),
    function(a) {
        var b = this.yg;
        b.u(a) || (t && v.c(a, F, U, "fromSpot"), this.yg = a = a.B(), this.d("fromSpot", b, a), this.Tb())
    });
    v.a(U, "fromEndSegmentLength", U.prototype.kk);
    v.defineProperty(U, {
        kk: "fromEndSegmentLength"
    },
    s("ug"),
    function(a) {
        var b = this.ug;
        b !== a && (t && v.e(a, "number", U, "fromEndSegmentLength"), 0 > a && v.ha(a, ">= 0", U, "fromEndSegmentLength"), this.ug = a, this.d("fromEndSegmentLength", b, a), this.Tb())
    });
    v.a(U, "fromEndSegmentDirection", U.prototype.yr);
    v.defineProperty(U, {
        yr: "fromEndSegmentDirection"
    },
    s("tg"),
    function(a) {
        var b = this.tg;
        b !== a && (t && v.Va(a, S, U, "fromEndSegmentDirection"), this.tg = a, this.d("fromEndSegmentDirection", b, a), this.Tb())
    });
    v.a(U, "fromShortLength", U.prototype.zr);
    v.defineProperty(U, {
        zr: "fromShortLength"
    },
    s("xg"),
    function(a) {
        var b = this.xg;
        b !== a && (t && v.e(a, "number", U, "fromShortLength"), this.xg = a, this.d("fromShortLength", b, a), this.Tb())
    });
    v.a(U, "toSpot", U.prototype.$a);
    v.defineProperty(U, {
        $a: "toSpot"
    },
    s("Sg"),
    function(a) {
        var b = this.Sg;
        b.u(a) || (t && v.c(a, F, U, "toSpot"), this.Sg = a = a.B(), this.d("toSpot", b, a), this.Tb())
    });
    v.a(U, "toEndSegmentLength", U.prototype.vk);
    v.defineProperty(U, {
        vk: "toEndSegmentLength"
    },
    s("Og"),
    function(a) {
        var b = this.Og;
        b !== a && (t && v.e(a, "number", U, "toEndSegmentLength"), 0 > a && v.ha(a, ">= 0", U, "toEndSegmentLength"), this.Og = a, this.d("toEndSegmentLength", b, a), this.Tb())
    });
    v.a(U, "toEndSegmentDirection", U.prototype.hs);
    v.defineProperty(U, {
        hs: "toEndSegmentDirection"
    },
    s("Ng"),
    function(a) {
        var b = this.Ng;
        b !== a && (t && v.Va(a, S, U, "toEndSegmentDirection"), this.Ng = a, this.d("toEndSegmentDirection", b, a), this.Tb())
    });
    v.a(U, "toShortLength", U.prototype.is);
    v.defineProperty(U, {
        is: "toShortLength"
    },
    s("Rg"),
    function(a) {
        var b = this.Rg;
        b !== a && (t && v.e(a, "number", U, "toShortLength"), this.Rg = a, this.d("toShortLength", b, a), this.Tb())
    });
    function Bi(a) {
        var b = a.ea,
        c = a.ia;
        b !== m && c !== m ? wl(a, b.vF(c)) : wl(a, m)
    }
    U.prototype.getOtherNode = U.prototype.VB = function(a) {
        t && v.c(a, S, U, "getOtherNode:node");
        var b = this.ea;
        return a === b ? this.ia: b
    };
    U.prototype.getOtherPort = U.prototype.aJ = function(a) {
        t && v.c(a, P, U, "getOtherPort:port");
        var b = this.Jc;
        return a === b ? this.sd: b
    };
    v.m(U, {
        di: "labelNodes"
    },
    function() {
        return this.ef === m ? v.Ef: this.ef.f
    });
    function Gl(a, b) {
        a.ef === m && (a.ef = new pa(S));
        a.ef.add(b);
        a.J()
    }
    U.prototype.Er = function() {
        R.prototype.Er.call(this);
        Sl(this) && Ag(this, this.la);
        var a = this.vg,
        b = this.Pg;
        if (a !== m) {
            var c = this.Jc;
            c !== m && (c.md = m);
            El(a, this, c);
            Rl(this)
        }
        b !== m && (c = this.sd, c !== m && (c.md = m), El(b, this, c), Rl(this))
    };
    U.prototype.Fr = function() {
        R.prototype.Fr.call(this);
        Sl(this) && Ag(this, this.la);
        var a = this.vg,
        b = this.Pg;
        if (a !== m) {
            var c = this.Jc;
            c !== m && (c.md = m);
            Fl(a, this, c);
            Ql(this)
        }
        b !== m && (c = this.sd, c !== m && (c.md = m), Fl(b, this, c), Ql(this))
    };
    U.prototype.tl = function() {
        if (this.ef !== m) {
            var a = this.b;
            if (a === m) return;
            for (var b = this.ef.copy().f; b.next();) a.remove(b.value)
        }
        b = this.data;
        b !== m && (a = this.b, a !== m && (a = a.P, a instanceof N && a.vG(b)))
    };
    U.prototype.move = U.prototype.move = function(a) {
        var b = this.position,
        c = b.x;
        isNaN(c) && (c = 0);
        b = b.y;
        isNaN(b) && (b = 0);
        c = a.x - c;
        b = a.y - b;
        R.prototype.move.call(this, a);
        this.ok(c, b);
        for (a = this.di; a.next();) {
            var d = a.value,
            e = d.position;
            d.move(new D(e.x + c, e.y + b))
        }
    };
    v.a(U, "relinkableFrom", U.prototype.RC);
    v.defineProperty(U, {
        RC: "relinkableFrom"
    },
    s("jq"),
    function(a) {
        var b = this.jq;
        b !== a && (t && v.e(a, "boolean", U, "relinkableFrom"), this.jq = a, this.d("relinkableFrom", b, a))
    });
    v.a(U, "relinkableTo", U.prototype.SC);
    v.defineProperty(U, {
        SC: "relinkableTo"
    },
    s("kq"),
    function(a) {
        var b = this.kq;
        b !== a && (t && v.e(a, "boolean", U, "relinkableTo"), this.kq = a, this.d("relinkableTo", b, a))
    });
    U.prototype.canRelinkFrom = U.prototype.CH = function() {
        if (!this.RC) return p;
        var a = this.ta;
        if (a !== m && !a.Gi) return p;
        a = a.b;
        return a !== m && !a.Gi ? p: h
    };
    U.prototype.canRelinkTo = U.prototype.DH = function() {
        if (!this.SC) return p;
        var a = this.ta;
        if (a !== m && !a.Gi) return p;
        a = a.b;
        return a !== m && !a.Gi ? p: h
    };
    v.m(U, {
        path: "path"
    },
    function() {
        var a = this.hc;
        if (a !== m) return a;
        a = this.wa;
        a = vk(this, a, a.length);
        return a instanceof V ? this.hc = a: m
    });
    U.prototype.hp = s("path");
    U.prototype.tw = s("Ic");
    U.prototype.Aj = function() {
        Tl(this);
        var a = this.Me();
        return this.Zw = a
    };
    U.prototype.Me = function() {
        var a = Infinity,
        b = Infinity,
        c = this.ba,
        d;
        if (0 === c) return new E(NaN, NaN, 0, 0);
        if (1 === c) c = this.h(0),
        a = Math.min(c.x, a),
        b = Math.min(c.y, b),
        d = new E(c.x, c.y, 0, 0);
        else if (2 === c) {
            d = this.h(0);
            var e = this.h(1),
            a = Math.min(d.x, e.x),
            b = Math.min(d.y, e.y);
            d = new E(d, e)
        } else if (Ul(this) === Pj && 3 <= c && !Lg(this)) if (e = this.h(0), a = e.x, b = e.y, d = new E(a, b, 0, 0), 3 === c) {
            var c = this.h(1),
            a = Math.min(c.x, a),
            b = Math.min(c.y, b),
            g = this.h(2),
            a = Math.min(g.x, a),
            b = Math.min(g.y, b);
            gd(e.x, e.y, c.x, c.y, c.x, c.y, g.x, g.y, 0.5, d)
        } else for (var i, j, k = 3; k < c; k += 3) i = this.h(k - 2),
        k + 3 >= c && (k = c - 1),
        j = this.h(k - 1),
        g = this.h(k),
        gd(e.x, e.y, i.x, i.y, j.x, j.y, g.x, g.y, 0.5, d),
        a = Math.min(g.x, a),
        b = Math.min(g.y, b),
        e = g;
        else {
            d = this.h(0);
            e = this.h(1);
            a = Math.min(d.x, e.x);
            b = Math.min(d.y, e.y);
            d = new E(d, e);
            for (k = 2; k < c; k++) e = this.h(k),
            a = Math.min(e.x, a),
            b = Math.min(e.y, b),
            d.lv(e)
        }
        this.bu.yd(a - d.x, b - d.y);
        return d
    };
    v.m(U, {
        CC: "midPoint"
    },
    function() {
        Tl(this);
        return Vl(this)
    });
    function Vl(a) {
        var b = a.ba;
        if (0 === b) return Zc;
        if (1 === b) return a.h(0);
        if (2 === b) {
            var c = a.h(0),
            d = a.h(1);
            return new D((c.x + d.x) / 2, (c.y + d.y) / 2)
        }
        if (Ul(a) === Pj && 3 <= b && !Lg(a)) {
            if (3 === b) return a.h(1);
            var c = (b - 1) / 3 | 0,
            e = 3 * (c / 2 | 0);
            if (1 === c % 2) {
                var c = a.h(e),
                d = a.h(e + 1),
                g = a.h(e + 2),
                a = a.h(e + 3),
                e = new D,
                b = d.x,
                i = d.y,
                d = g.x,
                j = g.y,
                g = (b + d) / 2,
                k = (i + j) / 2,
                i = ((c.y + i) / 2 + k) / 2,
                j = (k + (j + a.y) / 2) / 2;
                e.x = (((c.x + b) / 2 + g) / 2 + (g + (d + a.x) / 2) / 2) / 2;
                e.y = (i + j) / 2;
                return e
            }
            return a.h(e)
        }
        e = 0;
        g = [];
        for (i = 0; i < b - 1; i++) c = a.h(i),
        d = a.h(i + 1),
        db(c.x, d.x) ? (c = d.y - c.y, 0 > c && (c = -c)) : db(c.y, d.y) ? (c = d.x - c.x, 0 > c && (c = -c)) : c = Math.sqrt(c.Ni(d)),
        g.push(c),
        e += c;
        for (d = i = c = 0; c < e / 2 && i < b;) {
            d = g[i];
            if (c + d > e / 2) break;
            c += d;
            i++
        }
        b = a.h(i);
        a = a.h(i + 1);
        if (b.x === a.x) return b.y > a.y ? new D(b.x, b.y - (e / 2 - c)) : new D(b.x, b.y + (e / 2 - c));
        if (b.y === a.y) return b.x > a.x ? new D(b.x - (e / 2 - c), b.y) : new D(b.x + (e / 2 - c), b.y);
        c = (e / 2 - c) / d;
        return new D(b.x + c * (a.x - b.x), b.y + c * (a.y - b.y))
    }
    v.m(U, {
        BC: "midAngle"
    },
    function() {
        Tl(this);
        return Wl(this)
    });
    function Wl(a) {
        var b = a.ba;
        if (2 > b) return NaN;
        if (Ul(a) === Pj && 4 <= b && !Lg(a)) {
            var c = (b - 1) / 3 | 0,
            d = 3 * (c / 2 | 0);
            if (1 === c % 2) {
                var d = Math.floor(d),
                b = a.h(d),
                e = a.h(d + 1),
                c = a.h(d + 2),
                a = a.h(d + 3),
                d = e.x,
                e = e.y,
                g = c.x,
                c = c.y,
                i = (d + g) / 2,
                j = (e + c) / 2;
                return qb(((b.x + d) / 2 + i) / 2, ((b.y + e) / 2 + j) / 2, (i + (g + a.x) / 2) / 2, (j + (c + a.y) / 2) / 2)
            }
            if (0 < d && d + 1 < b) return b = a.h(d - 1),
            e = a.h(d + 1),
            b.Vh(e)
        }
        c = b / 2 | 0;
        if (0 === b % 2) return b = a.h(c - 1),
        e = a.h(c),
        b.Vh(e);
        b = a.h(c - 1);
        e = a.h(c);
        c = a.h(c + 1);
        a = b.Ni(e);
        d = e.Ni(c);
        return a > d ? b.Vh(e) : e.Vh(c)
    }
    v.a(U, "points", U.prototype.mb);
    v.defineProperty(U, {
        mb: "points"
    },
    s("Ic"),
    function(a) {
        t && v.c(a, y, U, "points");
        var b = this.Ic;
        if (b !== a && a !== m) {
            for (var c = a.f; c.next();) {
                var d = c.value;
                d.freeze()
            }
            a.freeze();
            this.Ic = a.copy();
            this.qf();
            Xl(this);
            for (var c = a.count,
            e = new y,
            g = 0; g < c; g++) d = a.i[g],
            e.add(d.copy());
            this.d("points", b, e)
        }
    });
    v.m(U, {
        ba: "pointsCount"
    },
    function() {
        return this.Ic.count
    });
    U.prototype.getPoint = U.prototype.h = function(a) {
        return this.Ic.i[a]
    };
    U.prototype.setPoint = U.prototype.w = function(a, b) {
        t && (v.c(b, D, U, "setPoint"), b.aa() || v.g("Link.setPoint called with a Point that does not have real numbers: " + b.toString()));
        this.Yf === m && v.g("Call Link.startRoute before modifying the points of the route.");
        this.Ic.ev(a, b)
    };
    U.prototype.insertPoint = U.prototype.q = function(a, b) {
        t && (v.c(b, D, U, "insertPoint"), b.aa() || v.g("Link.insertPoint called with a Point that does not have real numbers: " + b.toString()));
        this.Yf === m && v.g("Call Link.startRoute before modifying the points of the route.");
        this.Ic.lc(a, b)
    };
    U.prototype.addPoint = U.prototype.bd = function(a) {
        t && (v.c(a, D, U, "addPoint"), a.aa() || v.g("Link.addPoint called with a Point that does not have real numbers: " + a.toString()));
        this.Yf === m && v.g("Call Link.startRoute before modifying the points of the route.");
        this.Ic.add(a)
    };
    U.prototype.removePoint = U.prototype.WC = function(a) {
        this.Yf === m && v.g("Call Link.startRoute before modifying the points of the route.");
        this.Ic.qe(a)
    };
    U.prototype.clearPoints = U.prototype.mn = function() {
        this.Yf === m && v.g("Call Link.startRoute before modifying the points of the route.");
        this.Ic.clear()
    };
    U.prototype.movePoints = U.prototype.ok = function(a, b) {
        for (var c = new y(D), d = this.Ic.f; d.next();) {
            var e = d.value;
            c.add(new D(e.x + a, e.y + b))
        }
        this.mb = c
    };
    U.prototype.startRoute = U.prototype.uk = function() {
        if (this.Yf === m) {
            for (var a = new y(D), b = this.Ic.f; b.next();) a.add(b.value.B());
            this.Yf = a;
            this.Ic.qa()
        }
    };
    U.prototype.commitRoute = U.prototype.Th = function() {
        if (this.Yf !== m) {
            for (var a = this.Yf,
            b = Infinity,
            c = Infinity,
            d = a.count,
            e = 0; e < d; e++) var g = a.i[e],
            b = Math.min(g.x, b),
            c = Math.min(g.y, c);
            for (var i = Infinity,
            j = Infinity,
            k = this.Ic,
            l = k.count,
            e = 0; e < l; e++) g = k.i[e],
            i = Math.min(g.x, i),
            j = Math.min(g.y, j);
            if (l === d) for (e = 0; e < l; e++) if (g = a.i[e], d = k.i[e], g.x - b !== d.x - i || g.y - c !== d.y - j) {
                this.qf();
                break
            }
            this.Yf = m;
            this.Ic.freeze();
            Xl(this);
            b = new y(D);
            for (e = 0; e < l; e++) g = k.i[e],
            b.add(g.copy());
            this.d("points", a, b)
        }
    };
    U.prototype.rollbackRoute = U.prototype.zG = function() {
        this.Yf = m
    };
    function Xl(a) {
        0 === a.Ic.count ? a.hl = p: (a.hl = h, Yl(a, p))
    }
    U.prototype.invalidateRoute = U.prototype.Tb = function() {
        if (!this.Tm && (!this.b || !this.b.da.cb) && this.eb()) {
            this.hl = p;
            this.qf();
            var a = this.hp();
            a !== m && a.J()
        }
    };
    function Tl(a) {
        if (!a.hl && !a.bw) {
            var b = h;
            try {
                a.bw = h,
                a.uk(),
                b = a.computePoints()
            } finally {
                a.bw = p,
                b ? a.Th() : a.zG()
            }
        }
    }
    U.prototype.computePoints = U.prototype.WH = function() {
        var a = this.ea,
        b = m,
        b = a === m ? m: this.Jc;
        if (b !== m) {
            var c = Ij(b);
            if (c === a || !a.eb()) {
                var d = rl(a);
                d !== m && d !== a ? (a = d, b = d.vr("")) : a = d
            } else b = c
        }
        if (a === m || b === m || !a.location.aa()) return p;
        var e = this.ia,
        g = m,
        g = e === m ? m: this.sd;
        if (g !== m) {
            var i = Ij(g);
            if (i === e || !e.eb()) {
                var j = rl(e);
                j !== m && j !== e ? (e = j, g = j.vr("")) : e = j
            } else g = i
        }
        if (e === m || g === m || !e.location.aa()) return p;
        var k = this.ba,
        l = Zl(this, b),
        n = $l(this, g),
        r = b === g,
        q = Lg(this),
        u = this.Ne === Pj;
        this.th = r && !q ? u = h: p;
        var x = this.ku === Vi || r;
        if (!q && l === ac && n === ac && !r) {
            var z = p;
            if (!x && 3 <= k) var C = this.getLinkPoint(a, b, ac, h, p, e, g),
            G = this.getLinkPoint(e, g, ac, p, p, a, b),
            z = am(this, 0, C, k - 1, G);
            if (!z) if (this.mn(), u) {
                var H = a,
                I = b,
                M = e,
                T = g,
                la = this.getLinkPoint(H, I, ac, h, p, M, T),
                fa = this.getLinkPoint(M, T, ac, p, p, H, I),
                Ca = fa.x - la.x,
                ra = fa.y - la.y,
                va = this.computeCurviness(),
                Ja = 0,
                jb = 0,
                eb = la.x + Ca / 3,
                wb = la.y + ra / 3,
                mb = eb,
                Xa = wb;
                fb(ra, 0) ? Xa = 0 < Ca ? Xa - va: Xa + va: (Ja = -Ca / ra, jb = Math.sqrt(va * va / (Ja * Ja + 1)), 0 > va && (jb = -jb), mb = (0 > ra ? -1 : 1) * jb + eb, Xa = Ja * (mb - eb) + wb);
                var eb = la.x + 2 * Ca / 3,
                wb = la.y + 2 * ra / 3,
                Eb = eb,
                Ya = wb;
                fb(ra, 0) ? Ya = 0 < Ca ? Ya - va: Ya + va: (Eb = (0 > ra ? -1 : 1) * jb + eb, Ya = Ja * (Eb - eb) + wb);
                this.mn();
                this.bd(la);
                this.bd(new D(mb, Xa));
                this.bd(new D(Eb, Ya));
                this.bd(fa);
                this.w(0, this.getLinkPoint(H, I, ac, h, p, M, T));
                this.w(3, this.getLinkPoint(M, T, ac, p, p, H, I))
            } else {
                var Pc = a,
                yd = b,
                cb = e,
                ue = g,
                oc = this.getLinkPoint(Pc, yd, ac, h, p, cb, ue),
                md = this.getLinkPoint(cb, ue, ac, p, p, Pc, yd);
                if (this.hasCurviness()) {
                    var vc = md.x - oc.x,
                    nd = md.y - oc.y,
                    od = this.computeCurviness(),
                    Wb = oc.x + vc / 2,
                    wc = oc.y + nd / 2,
                    Xb = Wb,
                    Gc = wc;
                    if (fb(nd, 0)) Gc = 0 < vc ? Gc - od: Gc + od;
                    else {
                        var Hc = -vc / nd,
                        Ad = Math.sqrt(od * od / (Hc * Hc + 1));
                        0 > od && (Ad = -Ad);
                        Xb = (0 > nd ? -1 : 1) * Ad + Wb;
                        Gc = Hc * (Xb - Wb) + wc
                    }
                    this.bd(oc);
                    this.bd(new D(Xb, Gc))
                } else this.bd(oc);
                this.bd(md)
            }
        } else {
            var Jd = this.Ze === Qf;
            x && (q && Jd || r) && this.mn();
            var pd = this.computeCurviness(),
            xc = this.getLinkPoint(a, b, l, h, q, e, g),
            Ud = 0,
            fe = 0,
            Mb = 0;
            if (q || l !== ac || r) {
                var bc = this.getEndSegmentLength(a, b, l, h),
                Mb = this.getLinkDirection(a, b, xc, l, h, q, e, g);
                r && (Mb -= q ? 90 : 30, 0 > pd && (Mb -= 180));
                0 > Mb ? Mb += 360 : 360 <= Mb && (Mb -= 360);
                r && (bc += Math.abs(pd));
                0 === Mb ? Ud = bc: 90 === Mb ? fe = bc: 180 === Mb ? Ud = -bc: 270 === Mb ? fe = -bc: (Ud = bc * Math.cos(Mb * Math.PI / 180), fe = bc * Math.sin(Mb * Math.PI / 180));
                if (Zb(l) && r) var qd = b.zb(mc),
                xc = this.getLinkPointFromPoint(a, b, qd, new D(qd.x + 1E3 * Ud, qd.y + 1E3 * fe), h)
            }
            var gc = this.getLinkPoint(e, g, n, p, q, a, b),
            pc = 0,
            kb = 0,
            rb = 0;
            if (q || n !== ac || r) {
                var cc = this.getEndSegmentLength(e, g, n, p),
                rb = this.getLinkDirection(e, g, gc, n, p, q, a, b);
                r && (rb += q ? 0 : 30, 0 > pd && (rb += 180));
                0 > rb ? rb += 360 : 360 <= rb && (rb -= 360);
                r && (cc += Math.abs(pd));
                0 === rb ? pc = cc: 90 === rb ? kb = cc: 180 === rb ? pc = -cc: 270 === rb ? kb = -cc: (pc = cc * Math.cos(rb * Math.PI / 180), kb = cc * Math.sin(rb * Math.PI / 180));
                Zb(n) && r && (qd = g.zb(mc), gc = this.getLinkPointFromPoint(e, g, qd, new D(qd.x + 1E3 * pc, qd.y + 1E3 * kb), p))
            }
            var dc = xc;
            if (q || l !== ac || r) dc = new D(xc.x + Ud, xc.y + fe);
            var Kd = gc;
            if (q || n !== ac || r) Kd = new D(gc.x + pc, gc.y + kb);
            if (x || q || !Zb(l) || !(3 < k && am(this, 0, xc, k - 2, Kd))) if (!x && !q && Zb(n) && 3 < k && am(this, 1, dc, k - 1, gc)) this.w(0, xc);
            else if (!x && !q && 4 < k && am(this, 1, dc, k - 2, Kd)) this.w(0, xc),
            this.w(k - 1, gc);
            else if (!x && q && 6 <= k && !Jd && am(this, 1, dc, k - 2, Kd)) this.w(0, xc),
            this.w(k - 1, gc);
            else {
                this.mn();
                this.bd(xc); (q || l !== ac || r) && this.bd(dc);
                if (q) a: {
                    var O = dc,
                    hb = Mb,
                    Q = Kd,
                    Z = rb,
                    Bd = a,
                    Cd = e,
                    hb = -45 <= hb && 45 > hb ? 0 : 45 <= hb && 135 > hb ? 90 : 135 <= hb && 225 > hb ? 180 : 270,
                    Z = -45 <= Z && 45 > Z ? 0 : 45 <= Z && 135 > Z ? 90 : 135 <= Z && 225 > Z ? 180 : 270,
                    Ga = Bd.la.copy(),
                    ja = Cd.la.copy();
                    if (Ga.aa() && ja.aa()) {
                        Ga.of(8, 8);
                        ja.of(8, 8);
                        Ga.lv(O);
                        ja.lv(Q);
                        var Na = this.b;
                        if (this.Ze === Qf && Na !== m && !Ga.fa(Q) && !ja.fa(O) && Bd !== Cd && !this.ta.Tc) {
                            var Qa;
                            Na.Pc === m && (Na.Pc = new bm);
                            var Ic = m;
                            Na.Pc.En || (Ic = this !== m ? this.Wa: m);
                            if (Na.Pc.En || Na.Pc.group !== Ic) {
                                if (Ic === m) {
                                    var hc, zb;
                                    if (Na.Gj) if (Na.xr.aa()) {
                                        var ic = Na.xr.copy();
                                        ic.fr(Na.padding);
                                        zb = ic
                                    } else {
                                        for (var Fb, ad = h,
                                        Qc = Na.Cb,
                                        ve = Qc.length,
                                        bd = 0; bd < ve; bd++) {
                                            var rd = Qc.i[bd];
                                            if (rd.visible && !rd.Tc) for (var qc = rd.Db,
                                            Re = qc.length,
                                            Ld = 0; Ld < Re; Ld++) {
                                                var cd = qc.i[Ld];
                                                if (cd.Ou && cd.eb()) {
                                                    var sd = cd.la;
                                                    sd.aa() && (ad ? (ad = p, Fb = sd.copy()) : Fb.fj(sd))
                                                }
                                            }
                                        }
                                        ad && (Fb = new E(0, 0, 0, 0));
                                        Fb.fr(Na.padding);
                                        zb = Fb
                                    } else zb = Na.yc.copy();
                                    hc = zb;
                                    hc.of(100, 100);
                                    cm(Na.Pc, hc);
                                    for (var Gb = Na.pk; Gb.next();) {
                                        var dd = Gb.value,
                                        ge = dd.ta;
                                        ge === m || (!ge.visible || ge.Tc) || Hi(Na, dd)
                                    }
                                } else {
                                    var yc = Ic.la.copy();
                                    yc.of(20, 20);
                                    cm(Na.Pc, yc);
                                    for (var ob = Ic.mc; ob.next();) {
                                        var pb = ob.value;
                                        pb instanceof S && Hi(Na, pb)
                                    }
                                }
                                Na.Pc.group = Ic;
                                Na.Pc.En = p
                            } else dm(Na.Pc);
                            Qa = Na.Pc;
                            var Rb = Ga.copy().fj(ja);
                            Rb.of(2 * Qa.nl, 2 * Qa.ml);
                            em(Qa, O, hb, Q, Z, Rb);
                            var xa = fm(Qa, Q.x, Q.y);
                            if (!Qa.abort && xa === gm) {
                                dm(Qa);
                                var Za = Qa.pD;
                                Rb.of(Qa.nl * Za, Qa.ml * Za);
                                em(Qa, O, hb, Q, Z, Rb);
                                xa = fm(Qa, Q.x, Q.y)
                            } ! Qa.abort && xa === gm && (dm(Qa), Za = Qa.oC, Rb.of(Qa.nl * Za, Qa.ml * Za), em(Qa, O, hb, Q, Z, Rb), xa = fm(Qa, Q.x, Q.y)); ! Qa.abort && (xa === gm && Qa.MD) && (dm(Qa), em(Qa, O, hb, Q, Z, Qa.lb), xa = fm(Qa, Q.x, Q.y));
                            if (!Qa.abort && xa < gm && 0 !== fm(Qa, Q.x, Q.y)) {
                                hm(this, Qa, Q.x, Q.y, Z, h);
                                var ta = this.h(2);
                                if (4 > this.ba) 0 === hb || 180 === hb ? (ta.x = O.x, ta.y = Q.y) : (ta.x = Q.x, ta.y = O.y),
                                this.w(2, ta),
                                this.q(3, ta);
                                else {
                                    var Ab = this.h(3);
                                    if (0 === hb || 180 === hb) if (fb(ta.x, Ab.x)) {
                                        var $a = 0 === hb ? Math.max(ta.x, O.x) : Math.min(ta.x, O.x);
                                        this.w(2, new D($a, O.y));
                                        this.w(3, new D($a, Ab.y))
                                    } else fb(ta.y, Ab.y) ? (Math.abs(O.y - ta.y) <= Qa.ml / 2 && (this.w(2, new D(ta.x, O.y)), this.w(3, new D(Ab.x, O.y))), this.q(2, new D(ta.x, O.y))) : this.w(2, new D(O.x, ta.y));
                                    else if (90 === hb || 270 === hb) if (fb(ta.y, Ab.y)) {
                                        var zc = 90 === hb ? Math.max(ta.y, O.y) : Math.min(ta.y, O.y);
                                        this.w(2, new D(O.x, zc));
                                        this.w(3, new D(Ab.x, zc))
                                    } else fb(ta.x, Ab.x) ? (Math.abs(O.x - ta.x) <= Qa.nl / 2 && (this.w(2, new D(O.x, ta.y)), this.w(3, new D(O.x, Ab.y))), this.q(2, new D(O.x, ta.y))) : this.w(2, new D(ta.x, O.y))
                                }
                                break a
                            }
                        }
                        var ma, ha;
                        if (0 === hb) if (Q.x > O.x || 270 === Z && Q.y < O.y && ja.right > O.x || 90 === Z && Q.y > O.y && ja.right > O.x) ma = new D(Q.x, O.y),
                        ha = new D(Q.x, (O.y + Q.y) / 2),
                        180 === Z ? (ma.x = im(this, O.x, Q.x), ha.x = ma.x, ha.y = Q.y) : 270 === Z && Q.y < O.y || 90 === Z && Q.y > O.y ? (ma.x = O.x < ja.left ? im(this, O.x, ja.left) : O.x < ja.right && (270 === Z && O.y < ja.top || 90 === Z && O.y > ja.bottom) ? im(this, O.x, Q.x) : ja.right, ha.x = ma.x, ha.y = Q.y) : 0 === Z && (O.x < ja.left && O.y > ja.top && O.y < ja.bottom) && (ma.x = O.x, ma.y = O.y < Q.y ? Math.min(Q.y, ja.top) : Math.max(Q.y, ja.bottom), ha.y = ma.y);
                        else {
                            ma = new D(O.x, Q.y);
                            ha = new D((O.x + Q.x) / 2, Q.y);
                            if (180 === Z || 90 === Z && Q.y < Ga.top || 270 === Z && Q.y > Ga.bottom) {
                                if (180 === Z && (ja.fa(O) || Ga.fa(Q))) ma.y = im(this, O.y, Q.y);
                                else if (Q.y < O.y && (180 === Z || 90 === Z)) ma.y = im(this, Ga.top, Math.max(Q.y, ja.bottom));
                                else if (Q.y > O.y && (180 === Z || 270 === Z)) ma.y = im(this, Ga.bottom, Math.min(Q.y, ja.top));
                                ha.x = Q.x;
                                ha.y = ma.y
                            }
                            if (ma.y > Ga.top && ma.y < Ga.bottom) if (Q.x >= Ga.left && Q.x <= O.x || O.x <= ja.right && O.x >= Q.x) {
                                if (90 === Z || 270 === Z) ma = new D(Math.max((O.x + Q.x) / 2, O.x), O.y),
                                ha = new D(ma.x, Q.y)
                            } else ma.y = 270 === Z || (0 === Z || 180 === Z) && Q.y < O.y ? Math.min(Q.y, 0 === Z ? Ga.top: Math.min(Ga.top, ja.top)) : Math.max(Q.y, 0 === Z ? Ga.bottom: Math.max(Ga.bottom, ja.bottom)),
                            ha.x = Q.x,
                            ha.y = ma.y
                        } else if (180 === hb) if (Q.x < O.x || 270 === Z && Q.y < O.y && ja.left < O.x || 90 === Z && Q.y > O.y && ja.left < O.x) ma = new D(Q.x, O.y),
                        ha = new D(Q.x, (O.y + Q.y) / 2),
                        0 === Z ? (ma.x = im(this, O.x, Q.x), ha.x = ma.x, ha.y = Q.y) : 270 === Z && Q.y < O.y || 90 === Z && Q.y > O.y ? (ma.x = O.x > ja.right ? im(this, O.x, ja.right) : O.x > ja.left && (270 === Z && O.y < ja.top || 90 === Z && O.y > ja.bottom) ? im(this, O.x, Q.x) : ja.left, ha.x = ma.x, ha.y = Q.y) : 180 === Z && (O.x > ja.right && O.y > ja.top && O.y < ja.bottom) && (ma.x = O.x, ma.y = O.y < Q.y ? Math.min(Q.y, ja.top) : Math.max(Q.y, ja.bottom), ha.y = ma.y);
                        else {
                            ma = new D(O.x, Q.y);
                            ha = new D((O.x + Q.x) / 2, Q.y);
                            if (0 === Z || 90 === Z && Q.y < Ga.top || 270 === Z && Q.y > Ga.bottom) {
                                if (0 === Z && (ja.fa(O) || Ga.fa(Q))) ma.y = im(this, O.y, Q.y);
                                else if (Q.y < O.y && (0 === Z || 90 === Z)) ma.y = im(this, Ga.top, Math.max(Q.y, ja.bottom));
                                else if (Q.y > O.y && (0 === Z || 270 === Z)) ma.y = im(this, Ga.bottom, Math.min(Q.y, ja.top));
                                ha.x = Q.x;
                                ha.y = ma.y
                            }
                            if (ma.y > Ga.top && ma.y < Ga.bottom) if (Q.x <= Ga.right && Q.x >= O.x || O.x >= ja.left && O.x <= Q.x) {
                                if (90 === Z || 270 === Z) ma = new D(Math.min((O.x + Q.x) / 2, O.x), O.y),
                                ha = new D(ma.x, Q.y)
                            } else ma.y = 270 === Z || (0 === Z || 180 === Z) && Q.y < O.y ? Math.min(Q.y, 180 === Z ? Ga.top: Math.min(Ga.top, ja.top)) : Math.max(Q.y, 180 === Z ? Ga.bottom: Math.max(Ga.bottom, ja.bottom)),
                            ha.x = Q.x,
                            ha.y = ma.y
                        } else if (90 === hb) if (Q.y > O.y || 180 === Z && Q.x < O.x && ja.bottom > O.y || 0 === Z && Q.x > O.x && ja.bottom > O.y) ma = new D(O.x, Q.y),
                        ha = new D((O.x + Q.x) / 2, Q.y),
                        270 === Z ? (ma.y = im(this, O.y, Q.y), ha.x = Q.x, ha.y = ma.y) : 180 === Z && Q.x < O.x || 0 === Z && Q.x > O.x ? (ma.y = O.y < ja.top ? im(this, O.y, ja.top) : O.y < ja.bottom && (180 === Z && O.x < ja.left || 0 === Z && O.x > ja.right) ? im(this, O.y, Q.y) : ja.bottom, ha.x = Q.x, ha.y = ma.y) : 90 === Z && (O.y < ja.top && O.x > ja.left && O.x < ja.right) && (ma.x = O.x < Q.x ? Math.min(Q.x, ja.left) : Math.max(Q.x, ja.right), ma.y = O.y, ha.x = ma.x);
                        else {
                            ma = new D(Q.x, O.y);
                            ha = new D(Q.x, (O.y + Q.y) / 2);
                            if (270 === Z || 0 === Z && Q.x < Ga.left || 180 === Z && Q.x > Ga.right) {
                                if (270 === Z && (ja.fa(O) || Ga.fa(Q))) ma.x = im(this, O.x, Q.x);
                                else if (Q.x < O.x && (270 === Z || 0 === Z)) ma.x = im(this, Ga.left, Math.max(Q.x, ja.right));
                                else if (Q.x > O.x && (270 === Z || 180 === Z)) ma.x = im(this, Ga.right, Math.min(Q.x, ja.left));
                                ha.x = ma.x;
                                ha.y = Q.y
                            }
                            if (ma.x > Ga.left && ma.x < Ga.right) if (Q.y >= Ga.top && Q.y <= O.y || O.y <= ja.bottom && O.y >= Q.y) {
                                if (0 === Z || 180 === Z) ma = new D(O.x, Math.max((O.y + Q.y) / 2, O.y)),
                                ha = new D(Q.x, ma.y)
                            } else ma.x = 180 === Z || (90 === Z || 270 === Z) && Q.x < O.x ? Math.min(Q.x, 90 === Z ? Ga.left: Math.min(Ga.left, ja.left)) : Math.max(Q.x, 90 === Z ? Ga.right: Math.max(Ga.right, ja.right)),
                            ha.x = ma.x,
                            ha.y = Q.y
                        } else if (Q.y < O.y || 180 === Z && Q.x < O.x && ja.top < O.y || 0 === Z && Q.x > O.x && ja.top < O.y) ma = new D(O.x, Q.y),
                        ha = new D((O.x + Q.x) / 2, Q.y),
                        90 === Z ? (ma.y = im(this, O.y, Q.y), ha.x = Q.x, ha.y = ma.y) : 180 === Z && Q.x < O.x || 0 === Z && Q.x >= O.x ? (ma.y = O.y > ja.bottom ? im(this, O.y, ja.bottom) : O.y > ja.top && (180 === Z && O.x < ja.left || 0 === Z && O.x > ja.right) ? im(this, O.y, Q.y) : ja.top, ha.x = Q.x, ha.y = ma.y) : 270 === Z && (O.y > ja.bottom && O.x > ja.left && O.x < ja.right) && (ma.x = O.x < Q.x ? Math.min(Q.x, ja.left) : Math.max(Q.x, ja.right), ma.y = O.y, ha.x = ma.x);
                        else {
                            ma = new D(Q.x, O.y);
                            ha = new D(Q.x, (O.y + Q.y) / 2);
                            if (90 === Z || 0 === Z && Q.x < Ga.left || 180 === Z && Q.x > Ga.right) {
                                if (90 === Z && (ja.fa(O) || Ga.fa(Q))) ma.x = im(this, O.x, Q.x);
                                else if (Q.x < O.x && (90 === Z || 0 === Z)) ma.x = im(this, Ga.left, Math.max(Q.x, ja.right));
                                else if (Q.x > O.x && (90 === Z || 180 === Z)) ma.x = im(this, Ga.right, Math.min(Q.x, ja.left));
                                ha.x = ma.x;
                                ha.y = Q.y
                            }
                            if (ma.x > Ga.left && ma.x < Ga.right) if (Q.y <= Ga.bottom && Q.y >= O.y || O.y >= ja.top && O.y <= Q.y) {
                                if (0 === Z || 180 === Z) ma = new D(O.x, Math.min((O.y + Q.y) / 2, O.y)),
                                ha = new D(Q.x, ma.y)
                            } else ma.x = 180 === Z || (90 === Z || 270 === Z) && Q.x < O.x ? Math.min(Q.x, 270 === Z ? Ga.left: Math.min(Ga.left, ja.left)) : Math.max(Q.x, 270 === Z ? Ga.right: Math.max(Ga.right, ja.right)),
                            ha.x = ma.x,
                            ha.y = Q.y
                        }
                        this.bd(ma);
                        this.bd(ha)
                    }
                } (q || n !== ac || r) && this.bd(Kd);
                this.bd(gc)
            }
        }
        return h
    };
    function jm(a, b) {
        Math.abs(b.x - a.x) > Math.abs(b.y - a.y) ? (b.x = b.x >= a.x ? a.x + 9E9: a.x - 9E9, b.y = a.y) : (b.y = b.y >= a.y ? a.y + 9E9: a.y - 9E9, b.x = a.x);
        return b
    }
    U.prototype.getLinkPointFromPoint = U.prototype.$I = function(a, b, c, d) {
        if (a === m || b === m) return c;
        if (!a.eb()) {
            var e = rl(a);
            e !== m && e !== a && (b = e.port)
        }
        a = b.Y === m ? new ib: b.Y.ge.copy();
        e = a.copy();
        e.Lu();
        d = Ob(e, d);
        e = Ob(e, c);
        c = e.copy();
        b.Ju(d, e, c);
        b = Ob(a, c);
        c.x = b.x;
        c.y = b.y;
        return c
    };
    function km(a, b) {
        var c = a.md;
        c === m && (c = new lm, c.port = a, c.lg = a.W, a.md = c);
        return mm(c, b)
    }
    U.prototype.getLinkPoint = U.prototype.ZI = function(a, b, c, d, e, g, i) {
        if (Vb(c)) return c = b.zb(c);
        if (Yb(c) && (c = km(b, this), c !== m)) return c = c.Mn;
        c = b.zb(mc);
        this.ba > (e ? 6 : 2) ? (i = d ? this.h(1) : this.h(this.ba - 2), e && (i = jm(c, i.copy()))) : (i = i.zb(mc), e && (i = jm(c, i)));
        return this.getLinkPointFromPoint(a, b, c, i, d)
    };
    U.prototype.getLinkDirection = U.prototype.YI = function(a, b, c, d, e, g, i, j) {
        a: if (Vb(d)) c = d.x > d.y ? d.x > 1 - d.y ? 0 : d.x < 1 - d.y ? 270 : 315 : d.x < d.y ? d.x > 1 - d.y ? 90 : d.x < 1 - d.y ? 180 : 135 : 0.5 > d.x ? 225 : 0.5 < d.x ? 45 : 0;
        else {
            if (Yb(d) && (d = km(b, this), d !== m)) switch (d.Hd) {
            case v.Uc:
                c = 270;
                break a;
            case v.Bc:
                c = 180;
                break a;
            default:
            case v.Nc:
                c = 0;
                break a;
            case v.Mc:
                c = 90;
                break a
            }
            d = b.zb(mc);
            this.ba > (g ? 6 : 2) ? (j = e ? this.h(1) : this.h(this.ba - 2), j = g ? jm(d, j.copy()) : c) : j = j.zb(mc);
            c = Math.abs(j.x - d.x) > Math.abs(j.y - d.y) ? j.x >= d.x ? 0 : 180 : j.y >= d.y ? 90 : 270
        }
        g = Al;
        g = e ? this.yr: this.hs;
        g === Al && (g = e ? b.yr: b.hs);
        switch (g) {
        case Bl:
            a = a.Qa;
            c += a;
            360 <= c && (c -= 360);
            break;
        case Al:
        case Ui:
            a = a.Qa;
            if (0 === a) break;
            45 <= a && 135 > a ? c += 90 : 135 <= a && 225 > a ? c += 180 : 225 <= a && 315 > a && (c += 270);
            360 <= c && (c -= 360)
        }
        return c
    };
    U.prototype.getEndSegmentLength = U.prototype.XI = function(a, b, c, d) {
        if (Yb(c) && (a = km(b, this), a !== m)) return a.Bu;
        a = NaN;
        a = d ? this.kk: this.vk;
        isNaN(a) && (a = d ? b.kk: b.vk);
        isNaN(a) && (a = 10);
        return a
    };
    function Zl(a, b) {
        var c = a.Ya;
        $b(c) && (b === f && (b = a.Jc), b !== m && (c = b.Ya));
        return c === ec ? ac: c
    }
    function $l(a, b) {
        var c = a.$a;
        $b(c) && (b === f && (b = a.sd), b !== m && (c = b.$a));
        return c === ec ? ac: c
    }
    function nm(a) {
        var b = a.zr;
        isNaN(b) && (a = a.Jc, a !== m && (b = a.zr));
        return isNaN(b) ? 0 : b
    }
    function om(a) {
        var b = a.is;
        isNaN(b) && (a = a.sd, a !== m && (b = a.is));
        return isNaN(b) ? 0 : b
    }
    function Lg(a) {
        a = a.Ze;
        return a === wh || a === Qf
    }
    function Ul(a) {
        if (a.th === m) {
            var b = Lg(a);
            a.th = a.Jc === a.sd && !b
        }
        return a.th ? Pj: a.Ne
    }
    function pm(a) {
        if (a.Ne === Pj) return 0;
        a = a.sB;
        if (isNaN(a) || 0 > a) a = 10;
        return a
    }
    U.prototype.computeCurviness = U.prototype.RH = function() {
        var a = this.Xx;
        if (isNaN(a)) {
            var b = this.Zd;
            if (0 !== b) {
                var c = this.Fk,
                a = c !== m ? c.bj: 10,
                c = Math.abs(b),
                a = a / 2 + ((c - 1) / 2 | 0) * a;
                0 === c % 2 && (a = -a);
                0 > b && (a = -a)
            } else a = 10
        }
        return a
    };
    U.prototype.hasCurviness = U.prototype.iJ = function() {
        return ! isNaN(this.Xx) || 0 !== this.Zd && !Lg(this)
    };
    function am(a, b, c, d, e) {
        var g = a.ku;
        if (Lg(a)) {
            if (g === Tj) return p;
            g === Uj && (g = Sj)
        }
        switch (g) {
        case Tj:
            var i = a.h(b),
            j = a.h(d);
            if (!i.u(c) || !j.u(e)) {
                var g = i.x,
                i = i.y,
                k = j.x - g,
                l = j.y - i,
                n = Math.sqrt(k * k + l * l);
                if (!fb(n, 0)) {
                    var r;
                    fb(k, 0) ? r = 0 > l ? -Math.PI / 2 : Math.PI / 2 : (r = Math.atan(l / Math.abs(k)), 0 > k && (r = Math.PI - r));
                    var j = c.x,
                    q = c.y,
                    k = e.x - j,
                    u = e.y - q,
                    l = Math.sqrt(k * k + u * u);
                    fb(k, 0) ? u = 0 > u ? -Math.PI / 2 : Math.PI / 2 : (u = Math.atan(u / Math.abs(k)), 0 > k && (u = Math.PI - u));
                    n = l / n;
                    r = u - r;
                    a.w(b, c);
                    for (b += 1; b < d; b++) c = a.h(b),
                    k = c.x - g,
                    l = c.y - i,
                    c = Math.sqrt(k * k + l * l),
                    fb(c, 0) || (fb(k, 0) ? l = 0 > l ? -Math.PI / 2 : Math.PI / 2 : (l = Math.atan(l / Math.abs(k)), 0 > k && (l = Math.PI - l)), k = l + r, c *= n, a.w(b, new D(j + c * Math.cos(k), q + c * Math.sin(k))));
                    a.w(d, e)
                }
            }
            return h;
        case Uj:
            i = a.h(b);
            q = a.h(d);
            if (!i.u(c) || !q.u(e)) {
                g = i.x;
                i = i.y;
                j = q.x;
                q = q.y;
                n = (j - g) * (j - g) + (q - i) * (q - i);
                k = c.x;
                r = c.y;
                var l = e.x,
                u = e.y,
                x = 0,
                z = 1,
                x = 0 !== l - k ? (u - r) / (l - k) : 9E9;
                0 !== x && (z = Math.sqrt(1 + 1 / (x * x)));
                a.w(b, c);
                for (b += 1; b < d; b++) {
                    var c = a.h(b),
                    C = c.x,
                    G = c.y,
                    H = 0.5;
                    0 !== n && (H = ((g - C) * (g - j) + (i - G) * (i - q)) / n);
                    var I = g + H * (j - g),
                    M = i + H * (q - i),
                    c = Math.sqrt((C - I) * (C - I) + (G - M) * (G - M));
                    G < x * (C - I) + M && (c = -c);
                    0 < x && (c = -c);
                    C = k + H * (l - k);
                    H = r + H * (u - r);
                    0 !== x ? (c = C + c / z, a.w(b, new D(c, H - (c - C) / x))) : a.w(b, new D(C, H + c))
                }
                a.w(d, e)
            }
            return h;
        case Sj:
            return Lg(a) && (g = a.h(b + 1), i = a.h(b + 2), fb(g.x, i.x) && !fb(g.y, i.y) ? a.w(b + 1, new D(g.x, c.y)) : fb(g.y, i.y) && a.w(b + 1, new D(c.x, g.y)), g = a.h(d - 1), i = a.h(d - 2), fb(g.x, i.x) && !fb(g.y, i.y) ? a.w(d - 1, new D(g.x, e.y)) : fb(g.y, i.y) && a.w(d - 1, new D(e.x, g.y))),
            a.w(b, c),
            a.w(d, e),
            h;
        default:
            return p
        }
    }
    function im(a, b, c) {
        return a.hasCurviness() ? (a = a.computeCurviness(), (b + c) / 2 + a) : (b + c) / 2
    }
    function hm(a, b, c, d, e, g) {
        var i = b.nl,
        j = b.ml,
        k = fm(b, c, d),
        l = c,
        n = d;
        for (0 === e ? l += i: 90 === e ? n += j: 180 === e ? l -= i: n -= j; k > qm && fm(b, l, n) === k - rm;) c = l,
        d = n,
        0 === e ? l += i: 90 === e ? n += j: 180 === e ? l -= i: n -= j,
        k -= rm;
        if (g) {
            if (k > qm) if (180 === e || 0 === e) c = Math.floor(c / i) * i + i / 2;
            else if (90 === e || 270 === e) d = Math.floor(d / j) * j + j / 2
        } else c = Math.floor(c / i) * i + i / 2,
        d = Math.floor(d / j) * j + j / 2;
        k > qm && (g = e, l = c, n = d, 0 === e ? (g = 90, n += j) : 90 === e ? (g = 180, l -= i) : 180 === e ? (g = 270, n -= j) : 270 === e && (g = 0, l += i), fm(b, l, n) === k - rm ? hm(a, b, l, n, g, p) : (l = c, n = d, 0 === e ? (g = 270, n -= j) : 90 === e ? (g = 0, l += i) : 180 === e ? (g = 90, n += j) : 270 === e && (g = 180, l -= i), fm(b, l, n) === k - rm && hm(a, b, l, n, g, p)));
        a.bd(new D(c, d))
    }
    U.prototype.findClosestSegment = U.prototype.II = function(a) {
        t && v.c(a, D, U, "findClosestSegment:p");
        for (var b = a.x,
        a = a.y,
        c = this.h(0), d = this.h(1), e = nb(b, a, c.x, c.y, d.x, d.y), g = 0, i = 1; i < this.ba - 1; i++) {
            var c = this.h(i + 1),
            j = nb(b, a, d.x, d.y, c.x, c.y),
            d = c;
            j < e && (g = i, e = j)
        }
        return g
    };
    U.prototype.invalidateGeometry = U.prototype.qf = function() {
        this.hc = this.xa = m;
        this.J()
    };
    v.m(U, {
        Ar: "geometry"
    },
    function() {
        this.xa === m && (Tl(this), this.xa = sm(this));
        return this.xa
    });
    function si(a) {
        if (a.xa === m && a.hl !== p) {
            a.xa = sm(a);
            var b = a.hp();
            if (b !== m) {
                b.xa = a.xa;
                for (var c = a.wa,
                d = c.length,
                e = 0; e < d; e++) {
                    var g = c.i[e];
                    g !== b && (g.Vi && g instanceof V) && (g.xa = a.xa)
                }
            }
        }
    }
    function sm(a) {
        var b = a.ba;
        if (2 > b) {
            var a = new Hd(Id),
            c = new Pd(0, 0);
            a.Kb.add(c);
            return a
        }
        var d, e = a.h(0).copy(),
        g = new D(Infinity, Infinity);
        g.x = Math.min(e.x, g.x);
        g.y = Math.min(e.y, g.y);
        var i = Ul(a);
        if (i === Pj && 3 <= b && !db(a.es, 0)) if (3 === b) {
            var j = a.h(1),
            c = Math.min(e.x, j.x);
            d = Math.min(e.y, j.y);
            j = a.h(2);
            c = Math.min(c, j.x);
            d = Math.min(d, j.y)
        } else {
            if (Lg(a)) for (j = 0; j < b; j++) c = a.Ic.i[j],
            g.x = Math.min(c.x, g.x),
            g.y = Math.min(c.y, g.y);
            else for (var k, j = 3; j < b; j += 3) j + 3 >= b && (j = b - 1),
            k = a.h(j),
            g.x = Math.min(k.x, g.x),
            g.y = Math.min(k.y, g.y);
            c = g.x;
            d = g.y
        } else {
            for (j = 0; j < b; j++) c = a.Ic.i[j],
            g.x = Math.min(c.x, g.x),
            g.y = Math.min(c.y, g.y);
            c = g.x;
            d = g.y
        }
        c -= a.bu.x;
        d -= a.bu.y;
        e.x -= c;
        e.y -= d;
        if (2 === b) {
            var l = a.h(1).copy();
            l.x -= c;
            l.y -= d;
            0 !== nm(a) && tm(a, e, h, g);
            0 !== om(a) && tm(a, l, p, g);
            a = new Hd(Rd);
            a.Ca = e.x;
            a.Da = e.y;
            a.N = l.x;
            a.O = l.y;
            return a
        }
        l = new J;
        0 !== nm(a) && tm(a, e, h, g);
        K(l, e.x, e.y, p, p);
        if (i === Pj && 3 <= b && !db(a.es, 0)) if (3 === b) j = a.h(1),
        b = j.x - c,
        e = j.y - d,
        j = a.h(2).copy(),
        j.x -= c,
        j.y -= d,
        0 !== om(a) && tm(a, j, p, g),
        L(l, b, e, b, e, j.x, j.y);
        else if (Lg(a)) {
            e = new D(c, d);
            i = a.h(1).copy();
            k = new D(c, d);
            for (var b = new D(c, d), g = a.h(0), n = m, r = a.es / 3, j = 1; j < a.ba - 1; j++) {
                var n = a.h(j),
                q = g,
                u = n,
                x = a.h(um(a, n, j, p));
                if (!db(q.x, u.x) || !db(u.x, x.x)) if (!db(q.y, u.y) || !db(u.y, x.y)) {
                    var z = r,
                    C = k,
                    G = b;
                    isNaN(z) && (z = a.es / 3);
                    var H = q.x,
                    q = q.y,
                    I = u.x,
                    u = u.y,
                    M = x.x,
                    x = x.y,
                    T = z * vm(H, q, I, u),
                    z = z * vm(I, u, M, x);
                    db(q, u) && db(I, M) && (I > H ? x > u ? (C.x = I - T, C.y = u - T, G.x = I + z, G.y = u + z) : (C.x = I - T, C.y = u + T, G.x = I + z, G.y = u - z) : x > u ? (C.x = I + T, C.y = u - T, G.x = I - z, G.y = u + z) : (C.x = I + T, C.y = u + T, G.x = I - z, G.y = u - z));
                    db(H, I) && db(u, x) && (u > q ? (M > I ? (C.x = I - T, C.y = u - T, G.x = I + z) : (C.x = I + T, C.y = u - T, G.x = I - z), G.y = u + z) : (M > I ? (C.x = I - T, C.y = u + T, G.x = I + z) : (C.x = I + T, C.y = u + T, G.x = I - z), G.y = u - z));
                    if (db(H, I) && db(I, M) || db(q, u) && db(u, x)) H = 0.5 * (H + M),
                    q = 0.5 * (q + x),
                    C.x = H,
                    C.y = q,
                    G.x = H,
                    G.y = q;
                    1 === j ? (i.x = 0.5 * (g.x + n.x), i.y = 0.5 * (g.y + n.y)) : 2 === j && (db(g.x, a.h(0).x) && db(g.y, a.h(0).y)) && (i.x = 0.5 * (g.x + n.x), i.y = 0.5 * (g.y + n.y));
                    L(l, i.x - c, i.y - d, k.x - c, k.y - d, n.x - c, n.y - d);
                    e.set(k);
                    i.set(b);
                    g = n
                }
            }
            j = g.x;
            g = g.y;
            a = a.h(a.ba - 1);
            j = 0.5 * (j + a.x);
            g = 0.5 * (g + a.y);
            L(l, b.x - c, b.y - d, j - c, g - d, a.x - c, a.y - d)
        } else for (j = 3; j < b; j += 3) g = a.h(j - 2),
        j + 3 >= b && (j = b - 1),
        e = a.h(j - 1),
        k = a.h(j),
        j === b - 1 && 0 !== om(a) && (k = k.copy(), tm(a, k, p, Oc)),
        L(l, g.x - c, g.y - d, e.x - c, e.y - d, k.x - c, k.y - d);
        else {
            n = a.h(0);
            for (j = 1; j < b;) {
                j = um(a, n, j, 1 < j);
                r = a.h(j);
                if (j >= b - 1) {
                    n !== r && (0 !== om(a) && (r = r.copy(), tm(a, r, p, Oc)), wm(a, l, -c, -d, n, r));
                    break
                }
                j = um(a, r, j + 1, j < b - 3);
                g = a;
                e = l;
                i = -c;
                k = -d;
                C = a.h(j);
                fb(n.y, r.y) && fb(r.x, C.x) ? (G = pm(g), G = Math.min(G, Math.abs(r.x - n.x) / 2), G = H = Math.min(G, Math.abs(C.y - r.y) / 2), fb(G, 0) ? (wm(g, e, i, k, n, r), n = r) : (q = r.x, z = r.y, I = q, u = z, q = r.x > n.x ? r.x - G: r.x + G, u = C.y > r.y ? r.y + H: r.y - H, wm(g, e, i, k, n, new D(q, z)), be(e, r.x + i, r.y + k, I + i, u + k), n = new D(I, u))) : fb(n.x, r.x) && fb(r.y, C.y) ? (G = pm(g), H = Math.min(G, Math.abs(r.y - n.y) / 2), H = G = Math.min(H, Math.abs(C.x - r.x) / 2), fb(G, 0) ? (wm(g, e, i, k, n, r), n = r) : (q = r.x, u = z = r.y, z = r.y > n.y ? r.y - H: r.y + H, I = C.x > r.x ? r.x + G: r.x - G, wm(g, e, i, k, n, new D(q, z)), be(e, r.x + i, r.y + k, I + i, u + k), n = new D(I, u))) : (wm(g, e, i, k, n, r), n = r)
            }
        }
        return l.k
    }
    function vm(a, b, c, d) {
        a = c - a;
        if (isNaN(a) || Infinity === a || -Infinity === a) return NaN;
        0 > a && (a = -a);
        b = d - b;
        if (isNaN(b) || Infinity === b || -Infinity === b) return NaN;
        0 > b && (b = -b);
        return db(a, 0) ? b: db(b, 0) ? a: Math.sqrt(a * a + b * b)
    }
    function tm(a, b, c, d) {
        var e = a.ba;
        if (! (2 > e)) if (c) {
            var g = a.h(1),
            c = g.x - d.x,
            d = g.y - d.y,
            g = vm(b.x, b.y, c, d);
            0 !== g && (e = 2 === e ? 0.5 * g: g, a = nm(a), a > e && (a = e), c = a * (c - b.x) / g, a = a * (d - b.y) / g, b.x += c, b.y += a)
        } else g = a.h(e - 2),
        c = g.x - d.x,
        d = g.y - d.y,
        g = vm(b.x, b.y, c, d),
        0 !== g && (e = 2 === e ? 0.5 * g: g, a = om(a), a > e && (a = e), c = a * (b.x - c) / g, a = a * (b.y - d) / g, b.x -= c, b.y -= a)
    }
    function um(a, b, c, d) {
        for (var e = a.ba,
        g = b; db(b.x, g.x) && db(b.y, g.y);) {
            if (c >= e) return e - 1;
            g = a.h(c++)
        }
        if (!db(b.x, g.x) && !db(b.y, g.y)) return c - 1;
        for (var i = g; db(b.x, g.x) && db(g.x, i.x) && (!d || (b.y >= g.y ? g.y >= i.y: g.y <= i.y)) || db(b.y, g.y) && db(g.y, i.y) && (!d || (b.x >= g.x ? g.x >= i.x: g.x <= i.x));) {
            if (c >= e) return e - 1;
            i = a.h(c++)
        }
        return c - 2
    }
    function wm(a, b, c, d, e, g) {
        if (Sl(a)) {
            var i = new y("number"),
            j;
            a: if (j = a.b, j === m) j = 0;
            else {
                Math.min(e.x, g.x);
                Math.min(e.y, g.y);
                Math.max(e.x, g.x);
                Math.max(e.y, g.y);
                for (j = j.Kr; j.next();) {
                    var k = j.value;
                    if (k !== m && k.visible) for (k = k.Zi; k.next();) {
                        var l = k.value;
                        if (l === a) {
                            0 < i.length && i.sort(function(a, b) {
                                return a - b
                            });
                            j = i.length;
                            break a
                        }
                        if (l instanceof U && a.eb() && l.eb() && Sl(l) && a.Aj().Te(l.Aj()) && !a.usesSamePort(l)) {
                            var n = l.path;
                            if (n !== m && n.nk()) for (var n = e,
                            r = g,
                            q = i,
                            u = l.ba,
                            x = 1; x < u; x++) {
                                var z = l.h(x - 1),
                                C = l.h(x),
                                G = new D,
                                H;
                                b: {
                                    H = n;
                                    var I = r,
                                    M = G;
                                    if (fb(H.x, I.x)) {
                                        if (fb(z.y, C.y) && Math.min(H.y, I.y) <= z.y && Math.max(H.y, I.y) >= z.y && Math.min(z.x, C.x) <= H.x && Math.max(z.x, C.x) >= H.x && !fb(z.x, C.x)) {
                                            M.x = H.x;
                                            M.y = z.y;
                                            H = h;
                                            break b
                                        }
                                    } else if (fb(z.x, C.x) && Math.min(H.x, I.x) <= z.x && Math.max(H.x, I.x) >= z.x && Math.min(z.y, C.y) <= H.y && Math.max(z.y, C.y) >= H.y && !fb(z.y, C.y)) {
                                        M.x = z.x;
                                        M.y = H.y;
                                        H = h;
                                        break b
                                    }
                                    M.x = 0;
                                    M.y = 0;
                                    H = p
                                }
                                H && (fb(n.y, r.y) ? q.add(G.x) : q.add(G.y))
                            }
                        }
                    }
                }
                0 < i.length && i.sort(function(a, b) {
                    return a - b
                });
                j = i.length
            }
            n = e.x;
            n = e.y;
            if (0 < j) if (fb(e.y, g.y)) if (e.x < g.x) for (k = 0; k < j;) {
                q = Math.max(e.x, Math.min(i.i[k++] - 5, g.x - 10));
                b.lineTo(q + c, g.y + d);
                n = q + c;
                for (r = Math.min(q + 10, g.x); k < j;) if (l = i.i[k], l < r + 10) k++,
                r = Math.min(l + 5, g.x);
                else break;
                l = (q + r) / 2 + c;
                l = g.y - 10 + d;
                q = r + c;
                r = g.y + d;
                a.Ne === Qj ? K(b, q, r, p, p) : L(b, n, l, q, l, q, r)
            } else for (k = j - 1; 0 <= k;) {
                q = Math.min(e.x, Math.max(i.i[k--] + 5, g.x + 10));
                b.lineTo(q + c, g.y + d);
                n = q + c;
                for (r = Math.max(q - 10, g.x); 0 <= k;) if (l = i.i[k], l > r - 10) k--,
                r = Math.max(l - 5, g.x);
                else break;
                l = g.y - 10 + d;
                q = r + c;
                r = g.y + d;
                a.Ne === Qj ? K(b, q, r, p, p) : L(b, n, l, q, l, q, r)
            } else if (fb(e.x, g.x)) if (e.y < g.y) for (k = 0; k < j;) {
                q = Math.max(e.y, Math.min(i.i[k++] - 5, g.y - 10));
                b.lineTo(g.x + c, q + d);
                n = q + d;
                for (r = Math.min(q + 10, g.y); k < j;) if (l = i.i[k], l < r + 10) k++,
                r = Math.min(l + 5, g.y);
                else break;
                l = g.x - 10 + c;
                q = g.x + c;
                r += d;
                a.Ne === Qj ? K(b, q, r, p, p) : L(b, l, n, l, r, q, r)
            } else for (k = j - 1; 0 <= k;) {
                q = Math.min(e.y, Math.max(i.i[k--] + 5, g.y + 10));
                b.lineTo(g.x + c, q + d);
                n = q + d;
                for (r = Math.max(q - 10, g.y); 0 <= k;) if (l = i.i[k], l > r - 10) k--,
                r = Math.max(l - 5, g.y);
                else break;
                l = g.x - 10 + c;
                q = g.x + c;
                r += d;
                a.Ne === Qj ? K(b, q, r, p, p) : L(b, l, n, l, r, q, r)
            }
        }
        b.lineTo(g.x + c, g.y + d)
    }
    v.m(U, {
        Fu: "firstPickIndex"
    },
    function() {
        return 2 >= this.ba ? 0 : Lg(this) || Zl(this) !== ac ? 1 : 0
    });
    v.m(U, {
        xy: "lastPickIndex"
    },
    function() {
        var a = this.ba;
        return 0 === a ? 0 : 2 >= a ? a - 1 : Lg(this) || $l(this) !== ac ? a - 2 : a - 1
    });
    function Sl(a) {
        a = a.Ne;
        return a === Rj || a === Qj
    }
    function Yl(a, b) {
        if (b || Sl(a)) {
            var c = a.b;
            c !== m && (!c.im.contains(a) && a.Zw !== m) && c.im.add(a, a.Zw)
        }
    }
    function Ag(a, b) {
        var c = a.ta;
        if (! (c === m || !c.visible || c.Tc)) {
            var d = c.b;
            if (d !== m) for (var e = p,
            d = d.Kr; d.next();) {
                var g = d.value;
                if (g.visible) if (g === c) for (var e = h,
                i = p,
                g = g.Zi; g.next();) {
                    var j = g.value;
                    j instanceof U && (j === a ? i = h: i && xm(a, j, b))
                } else if (e) for (g = g.Zi; g.next();) j = g.value,
                j instanceof U && xm(a, j, b)
            }
        }
    }
    function xm(a, b, c) {
        if (b !== m && Sl(b) && b.xa !== m && (a.Aj().Te(b.Aj()) || c.Te(b.Aj()))) a.usesSamePort(b) || b.qf()
    }
    U.prototype.usesSamePort = U.prototype.NK = function(a) {
        var b = this.ba,
        c = a.ba;
        if (0 < b && 0 < c) {
            if (this.h(0).Zh(a.h(0)) || this.h(b - 1).Zh(a.h(c - 1))) return h
        } else if (this.ea === a.ea || this.ia === a.ia) return h;
        return p
    };
    v.a(U, "adjusting", U.prototype.ku);
    v.defineProperty(U, {
        ku: "adjusting"
    },
    s("ro"),
    function(a) {
        var b = this.ro;
        b !== a && (t && v.Va(a, U, U, "adjusting"), this.ro = a, this.d("adjusting", b, a))
    });
    v.a(U, "corner", U.prototype.sB);
    v.defineProperty(U, {
        sB: "corner"
    },
    s("Fo"),
    function(a) {
        var b = this.Fo;
        b !== a && (t && v.e(a, "number", U, "corner"), this.Fo = a, this.qf(), this.d("corner", b, a))
    });
    v.a(U, "curve", U.prototype.Ne);
    v.defineProperty(U, {
        Ne: "curve"
    },
    s("Ho"),
    function(a) {
        var b = this.Ho;
        b !== a && (t && v.Va(a, U, U, "curve"), this.Ho = a, this.Tb(), Yl(this, b === Qj || b === Rj || a === Qj || a === Rj), this.d("curve", b, a))
    });
    v.a(U, "curviness", U.prototype.Xx);
    v.defineProperty(U, {
        Xx: "curviness"
    },
    s("Io"),
    function(a) {
        var b = this.Io;
        b !== a && (t && v.e(a, "number", U, "curviness"), this.Io = a, this.Tb(), this.d("curviness", b, a))
    });
    v.a(U, "routing", U.prototype.Ze);
    v.defineProperty(U, {
        Ze: "routing"
    },
    s("Ci"),
    function(a) {
        var b = this.Ci;
        b !== a && (t && v.Va(a, U, U, "routing"), this.Ci = a, this.th = m, this.Tb(), Yl(this, b === wh || b === Qf || a === wh || a === Qf), this.d("routing", b, a))
    });
    v.a(U, "smoothness", U.prototype.es);
    v.defineProperty(U, {
        es: "smoothness"
    },
    s("Hq"),
    function(a) {
        var b = this.Hq;
        b !== a && (t && v.e(a, "number", U, "smoothness"), this.Hq = a, this.qf(), this.d("smoothness", b, a))
    });
    function Rl(a) {
        var b = a.vg;
        if (b !== m) {
            var c = a.Pg;
            if (c !== m) {
                var d = a.wg,
                a = a.Qg,
                e;
                a: {
                    if (! (c === m || b.pg === m)) for (e = b.pg.f; e.next();) {
                        var g = e.value;
                        if (g.Tn === b && g.Ur === c && g.Vu === d && g.Wu === a || g.Tn === c && g.Ur === b && g.Vu === a && g.Wu === d) {
                            e = g;
                            break a
                        }
                    }
                    e = m
                }
                for (var i = g = m,
                j = b.vd.i,
                k = j.length,
                l = 0; l < k; l++) {
                    var n = j[l];
                    if (n.vg === b && n.wg === d && n.Pg === c && n.Qg === a || n.vg === c && n.wg === a && n.Pg === b && n.Qg === d) i === m ? i = n: (g === m && (g = new y(U), g.add(i)), g.add(n))
                }
                if (g !== m) {
                    e === m && (e = new Dl, e.Tn = b, e.Vu = d, e.Ur = c, e.Wu = a, Cl(b, e), Cl(c, e));
                    e.links = g;
                    for (l = 0; l < g.count; l++) if (n = g.i[l], 0 === n.Zd) {
                        b = 1;
                        for (c = 0; c < g.count; c++) Math.abs(g.i[c].Zd) === b && (b++, c = -1);
                        n.Fk = e;
                        n.Zd = n.ea === e.Tn ? b: -b;
                        n.Tb()
                    }
                }
            }
        }
    }
    function Ql(a) {
        var b = a.Fk;
        if (b !== m) {
            var c = a.Zd;
            a.Fk = m;
            a.Zd = 0;
            a.Tb();
            b.links.remove(a);
            if (2 > b.links.count) 1 === b.links.count && (c = b.links.i[0], c.Fk = m, c.Zd = 0, c.Tb()),
            c = b.Tn,
            b !== m && c.pg !== m && c.pg.remove(b),
            c = b.Ur,
            b !== m && c.pg !== m && c.pg.remove(b);
            else {
                c = Math.abs(c);
                a = 0 === c % 2;
                for (b = b.links.f; b.next();) {
                    var d = b.value,
                    e = Math.abs(d.Zd),
                    g = 0 === e % 2;
                    e > c && a === g && (d.Zd = 0 < d.Zd ? d.Zd - 2 : d.Zd + 2, d.Tb())
                }
            }
        }
    }
    function Dl() {
        v.Ob(this);
        this.links = this.Wu = this.Ur = this.Vu = this.Tn = m;
        this.bj = 10
    }
    v.pd(Dl, {
        Tn: h,
        Vu: h,
        Ur: h,
        Wu: h,
        links: h,
        bj: h
    });
    function bm() {
        v.Ob(this);
        this.group = m;
        this.En = h;
        this.abort = p;
        this.Fg = this.Eg = 1;
        this.nt = this.mt = -1;
        this.Jd = this.Id = 8;
        this.Fb = m;
        this.MD = p;
        this.pD = 22;
        this.oC = 111
    }
    v.pd(bm, {
        group: h,
        En: h,
        abort: h,
        MD: h,
        pD: h,
        oC: h
    });
    var qm = 1,
    rm = 1,
    gm = 999999999,
    ym = gm;
    function cm(a, b) {
        if (! (0 >= b.width || 0 >= b.height)) {
            var c = b.y,
            d = b.x + b.width,
            e = b.y + b.height;
            a.Eg = Math.floor((b.x - a.Id) / a.Id) * a.Id;
            a.Fg = Math.floor((c - a.Jd) / a.Jd) * a.Jd;
            a.mt = Math.ceil((d + 2 * a.Id) / a.Id) * a.Id;
            a.nt = Math.ceil((e + 2 * a.Jd) / a.Jd) * a.Jd;
            c = 1 + (Math.ceil((a.mt - a.Eg) / a.Id) | 0);
            d = 1 + (Math.ceil((a.nt - a.Fg) / a.Jd) | 0);
            if (a.Fb === m || a.Yq < c - 1 || a.Zq < d - 1) {
                for (var e = [], g = 0; g <= c; g++) {
                    for (var i = [], j = 0; j <= d; j++) i[j] = 0;
                    e[g] = i
                }
                a.Fb = e;
                a.Yq = c - 1;
                a.Zq = d - 1
            }
            if (a.Fb !== m) for (c = 0; c <= a.Yq; c++) for (d = 0; d <= a.Zq; d++) a.Fb[c][d] = ym
        }
    }
    v.m(bm, {
        lb: m
    },
    function() {
        return new E(this.Eg, this.Fg, this.mt - this.Eg, this.nt - this.Fg)
    });
    v.a(bm, "cellWidth", bm.prototype.nl);
    v.defineProperty(bm, {
        nl: m
    },
    s("Id"),
    function(a) {
        0 < a && a !== this.Id && (this.Id = a, cm(this, this.lb))
    });
    v.a(bm, "cellHeight", bm.prototype.ml);
    v.defineProperty(bm, {
        ml: m
    },
    s("Jd"),
    function(a) {
        0 < a && a !== this.Jd && (this.Jd = a, cm(this, this.lb))
    });
    function zm(a, b, c) {
        return a.Eg <= b && b <= a.mt && a.Fg <= c && c <= a.nt
    }
    function fm(a, b, c) {
        if (!zm(a, b, c)) return 0;
        b -= a.Eg;
        b /= a.Id;
        c -= a.Fg;
        c /= a.Jd;
        return a.Fb[b | 0][c | 0]
    }
    function Ii(a, b, c) {
        zm(a, b, c) && (b -= a.Eg, b /= a.Id, c -= a.Fg, c /= a.Jd, a.Fb[b | 0][c | 0] = 0)
    }
    function dm(a) {
        if (a.Fb !== m) for (var b = 0; b <= a.Yq; b++) for (var c = 0; c <= a.Zq; c++) a.Fb[b][c] >= qm && (a.Fb[b][c] |= gm)
    }
    function Am(a, b, c, d, e, g, i, j, k) {
        if (! (b < g || b > i || c < j || c > k)) {
            var l, n;
            l = b | 0;
            n = c | 0;
            var r = a.Fb[l][n];
            if (r >= qm && r < gm) {
                e ? n += d: l += d;
                for (r += rm; g <= l && (l <= i && j <= n && n <= k) && !(r >= a.Fb[l][n]);) a.Fb[l][n] = r,
                r += rm,
                e ? n += d: l += d
            }
            l = e ? n: l;
            if (e) if (0 < d) for (c += d; c < l; c += d) Am(a, b, c, 1, !e, g, i, j, k),
            Am(a, b, c, -1, !e, g, i, j, k);
            else for (c += d; c > l; c += d) Am(a, b, c, 1, !e, g, i, j, k),
            Am(a, b, c, -1, !e, g, i, j, k);
            else if (0 < d) for (b += d; b < l; b += d) Am(a, b, c, 1, !e, g, i, j, k),
            Am(a, b, c, -1, !e, g, i, j, k);
            else for (b += d; b > l; b += d) Am(a, b, c, 1, !e, g, i, j, k),
            Am(a, b, c, -1, !e, g, i, j, k)
        }
    }
    function Bm(a, b, c, d, e, g, i, j, k, l, n) {
        for (var r = b | 0,
        q = c | 0,
        u = a.Fb[r][q]; 0 === u && r > j && r < k && q > l && q < n;) if (i ? q += g: r += g, u = a.Fb[r][q], 1 >= Math.abs(r - d) && 1 >= Math.abs(q - e)) return a.abort = h,
        0;
        r = b | 0;
        q = c | 0;
        u = a.Fb[r][q];
        b = qm;
        for (a.Fb[r][q] = b; 0 === u && r > j && r < k && q > l && q < n;) i ? q += g: r += g,
        u = a.Fb[r][q],
        a.Fb[r][q] = b,
        b += rm;
        return i ? q: r
    }
    function em(a, b, c, d, e, g) {
        if (a.Fb !== m) {
            a.abort = p;
            var i = b.x,
            j = b.y;
            if (zm(a, i, j)) {
                var i = i - a.Eg,
                i = i / a.Id,
                j = j - a.Fg,
                j = j / a.Jd,
                k = d.x,
                l = d.y;
                if (zm(a, k, l)) if (k -= a.Eg, k /= a.Id, l -= a.Fg, l /= a.Jd, 1 >= Math.abs(i - k) && 1 >= Math.abs(j - l)) a.abort = h;
                else {
                    var n = g.x,
                    b = g.y,
                    d = g.x + g.width,
                    r = g.y + g.height,
                    n = n - a.Eg,
                    n = n / a.Id,
                    b = b - a.Fg,
                    b = b / a.Jd,
                    d = d - a.Eg,
                    d = d / a.Id,
                    r = r - a.Fg,
                    r = r / a.Jd,
                    g = Math.max(0, Math.min(a.Yq, n | 0)),
                    d = Math.min(a.Yq, Math.max(0, d | 0)),
                    b = Math.max(0, Math.min(a.Zq, b | 0)),
                    r = Math.min(a.Zq, Math.max(0, r | 0)),
                    i = i | 0,
                    j = j | 0,
                    k = k | 0,
                    l = l | 0,
                    n = i,
                    q = j,
                    u = 0 === c || 90 === c ? 1 : -1; (c = 90 === c || 270 === c) ? q = Bm(a, i, j, k, l, u, c, g, d, b, r) : n = Bm(a, i, j, k, l, u, c, g, d, b, r);
                    if (!a.abort) {
                        a: {
                            for (var c = 0 === e || 90 === e ? 1 : -1, e = 90 === e || 270 === e, u = k | 0, x = l | 0, z = a.Fb[u][x]; 0 === z && u > g && u < d && x > b && x < r;) if (e ? x += c: u += c, z = a.Fb[u][x], 1 >= Math.abs(u - i) && 1 >= Math.abs(x - j)) {
                                a.abort = h;
                                break a
                            }
                            u = k | 0;
                            x = l | 0;
                            z = a.Fb[u][x];
                            for (a.Fb[u][x] = ym; 0 === z && u > g && u < d && x > b && x < r;) e ? x += c: u += c,
                            z = a.Fb[u][x],
                            a.Fb[u][x] = ym
                        }
                        a.abort || (Am(a, n, q, 1, p, g, d, b, r), Am(a, n, q, -1, p, g, d, b, r), Am(a, n, q, 1, h, g, d, b, r), Am(a, n, q, -1, h, g, d, b, r))
                    }
                }
            }
        }
    }
    function lm() {
        v.Ob(this);
        this.vf = this.port = this.lg = m;
        this.Tr = p
    }
    v.pd(lm, {
        lg: h,
        port: h,
        vf: h,
        Tr: h
    });
    lm.prototype.toString = function() {
        for (var a = this.vf,
        b = this.lg.toString() + " " + a.length.toString() + ":", c = 0; c < a.length; c++) {
            var d = a[c];
            d !== m && (b += "\n " + d.toString())
        }
        return b
    };
    function Cm(a, b, c, d) {
        b = b.offsetY;
        switch (b) {
        case v.Mc:
            return 90;
        case v.Bc:
            return 180;
        case v.Uc:
            return 270;
        case v.Nc:
            return 0
        }
        switch (b) {
        case v.Mc | v.Uc: return 180 < c ? 270 : 90;
        case v.Bc | v.Nc: return 90 < c && 270 >= c ? 180 : 0
        }
        a = 180 * Math.atan2(a.height, a.width) / Math.PI;
        switch (b) {
        case v.Bc | v.Uc: return c > a && c <= 180 + a ? 180 : 270;
        case v.Uc | v.Nc: return c > 180 - a && c <= 360 - a ? 270 : 0;
        case v.Nc | v.Mc: return c > a && c <= 180 + a ? 90 : 0;
        case v.Mc | v.Bc: return c > 180 - a && c <= 360 - a ? 180 : 90;
        case v.Bc | v.Uc | v.Nc: return 90 < c && c <= 180 + a ? 180 : c > 180 + a && c <= 360 - a ? 270 : 0;
        case v.Uc | v.Nc | v.Mc: return 180 < c && c <= 360 - a ? 270 : c > a && 180 >= c ? 90 : 0;
        case v.Nc | v.Mc | v.Bc: return c > a && c <= 180 - a ? 90 : c > 180 - a && 270 >= c ? 180 : 0;
        case v.Mc | v.Bc | v.Uc: return c > 180 - a && c <= 180 + a ? 180 : c > 180 + a ? 270 : 90
        }
        d && b !== (v.Bc | v.Uc | v.Nc | v.Mc) && (c -= 15, 0 > c && (c += 360));
        return c > a && c < 180 - a ? 90 : c >= 180 - a && c <= 180 + a ? 180 : c > 180 + a && c < 360 - a ? 270 : 0
    }
    function mm(a, b) {
        var c = a.vf;
        if (c === m) {
            if (!a.Tr) {
                c = a.Tr;
                a.Tr = h;
                var d = a.lg.me;
                a.vf = [];
                for (var e = 0,
                g = new E(a.port.zb(fc), a.port.zb(tc)), d = d.f; d.next();) {
                    var i = d.value;
                    if (i.eb()) {
                        var j = ac,
                        j = i.Jc === a.port ? Zl(i, a.port) : $l(i, a.port);
                        if (Yb(j)) {
                            var k;
                            k = i.Jc === a.port ? i.sd: i.Jc;
                            if (k !== m && k.W !== m) {
                                var l = k.zb(mc);
                                k = k.md;
                                k = k !== m ? mm(k, i) : m;
                                k !== m && (l = k.Mn);
                                k = g.pu.Vh(l);
                                var j = Cm(g, j, k, Lg(i)),
                                n;
                                0 === j ? (n = v.Nc, 180 < k && (k -= 360)) : n = 90 === j ? v.Mc: 180 === j ? v.Bc: v.Uc; (j = a.vf[e]) ? (j.link = i, j.Qa = k, j.Hd = n) : (j = new Dm(i, k, n), a.vf[e] = j);
                                j.Uu.set(l);
                                e++
                            }
                        }
                    }
                }
                a.vf.sort(lm.prototype.iG);
                g = a.vf.length;
                d = -1;
                for (e = i = 0; e < g; e++) j = a.vf[e],
                j !== m && (j.Hd !== d && (d = j.Hd, i = 0), j.Al = i, i++);
                d = -1;
                i = 0;
                for (e = g - 1; 0 <= e; e--) j = a.vf[e],
                j !== m && (j.Hd !== d && (d = j.Hd, i = j.Al + 1), j.or = i);
                e = a.vf;
                for (g = 0; g < e.length; g++) if (d = e[g], d !== m) {
                    l = d;
                    j = a.port;
                    i = d = f;
                    switch (l.Hd) {
                    case v.Mc:
                        d = j.zb(tc);
                        i = j.zb(nc);
                        break;
                    case v.Bc:
                        d = j.zb(nc);
                        i = j.zb(fc);
                        break;
                    case v.Uc:
                        d = j.zb(fc);
                        i = j.zb(lc);
                        break;
                    default:
                    case v.Nc:
                        d = j.zb(lc),
                        i = j.zb(tc)
                    }
                    j = i.y - d.y;
                    k = (l.Al + 1) / (l.or + 1);
                    l = l.Mn;
                    l.x = d.x + (i.x - d.x) * k;
                    l.y = d.y + j * k
                }
                e = a.vf;
                for (g = 0; g < e.length; g++) if (i = e[g], i !== m) {
                    d = i;
                    k = i;
                    n = k.link;
                    i = n.getEndSegmentLength(a.lg, a.port, ac, n.Jc === a.port);
                    l = k.Al;
                    if (! (0 > l) && (j = k.or, !(1 >= j) && Lg(n))) {
                        n = k.Uu;
                        var r = k.Mn;
                        if (k.Hd === v.Bc || k.Hd === v.Mc) l = j - 1 - l;
                        i = ((k = k.Hd === v.Bc || k.Hd === v.Nc) ? n.y < r.y: n.x < r.x) ? i + 8 * l: (k ? n.y === r.y: n.x === r.x) ? i: i + 8 * (j - 1 - l)
                    }
                    d.Bu = i
                }
                a.Tr = c
            }
            c = a.vf
        }
        for (e = 0; e < c.length; e++) if (g = c[e], g !== m && g.link === b) return g;
        return m
    }
    lm.prototype.iG = function(a, b) {
        return a === b ? 0 : a === m ? -1 : b === m ? 1 : a.Hd < b.Hd ? -1 : a.Hd > b.Hd ? 1 : a.Qa < b.Qa ? -1 : a.Qa > b.Qa ? 1 : 0
    };
    function Dm(a, b, c) {
        this.link = a;
        this.Qa = b;
        this.Hd = c;
        this.Uu = new D;
        this.Al = this.or = this.Al = 0;
        this.Mn = new D;
        this.Bu = 0
    }
    v.pd(Dm, {
        link: h,
        Qa: h,
        Hd: h,
        Uu: h,
        Al: h,
        or: h,
        Mn: h,
        Bu: h
    });
    Dm.prototype.toString = function() {
        return this.link.toString() + " " + this.Qa.toString() + " " + this.Hd.toString() + ":" + this.Al.toString() + "/" + this.or.toString() + " " + this.Mn.toString() + " " + this.Bu.toString() + " " + this.Uu.toString()
    };
    function mf(a) {
        0 === arguments.length ? S.call(this, Vg) : S.call(this, a);
        this.Pp = new pa(R);
        this.Zk = new pa(mf);
        this.Pj = this.Qp = this.Op = m;
        this.Wq = p;
        this.vp = h;
        this.ar = p;
        this.bb = this.Mq = m;
        this.Co = p;
        this.Zc = new Mh;
        this.Zc.group = this
    }
    v.H("Group", mf);
    v.pa(mf, S);
    da = mf.prototype;
    da.jb = function(a) {
        S.prototype.jb.call(this, a);
        a.Op = this.Op;
        a.Qp = this.Qp;
        a.Pj = this.Pj;
        a.Wq = this.Wq;
        a.vp = this.vp;
        a.ar = this.ar;
        a.Mq = this.Mq;
        var b = Ek(a, a,
        function(a) {
            return a instanceof Pg
        });
        a.bb = b instanceof Pg ? b: m;
        a.Co = this.Co;
        this.Zc !== m ? (a.Zc = this.Zc.copy(), a instanceof mf && (a.Zc.group = a)) : (a.Zc !== m && (a.Zc.group = m), a.Zc = m)
    };
    da.Yg = function(a) {
        S.prototype.Yg.call(this, a);
        for (var b = a.Eu(), a = a.mc; a.next();) {
            var c = a.value;
            c.J();
            c.r(sj);
            c.Wg();
            c instanceof mf && (c.nv = c.ke, Em(c, b));
            if (c instanceof S) c.pf(b);
            else if (c instanceof U) for (c = c.di; c.next();) c.value.pf(b)
        }
    };
    da.Jl = function(a, b, c, d, e, g, i) {
        if (a === Ee && "elements" === b) if (e instanceof Pg) this.bb === m ? this.bb = e: this.bb !== e && v.g("Cannot insert a second Placeholder into the visual tree of a Group.");
        else {
            if (e instanceof w) {
                var j = Ek(e, e,
                function(a) {
                    return a instanceof Pg
                });
                j instanceof Pg && (this.bb === m ? this.bb = j: this.bb !== j && v.g("Cannot insert a second Placeholder into the visual tree of a Group."))
            }
        } else a === Fe && "elements" === b && (d === this.bb ? this.bb = m: d instanceof w && this.bb.ci(d) && (this.bb = m));
        S.prototype.Jl.call(this, a, b, c, d, e, g, i)
    };
    da.Hi = function(a, b, c, d) {
        this.vi = this.bb;
        w.prototype.Hi.call(this, a, b, c, d);
        this.bb !== m && (a = this.bb.Jm, this.location = new D(a.x, a.y))
    };
    da.mk = function() {
        if (!S.prototype.mk.call(this)) return p;
        for (var a = this.mc; a.next();) {
            var b = a.value;
            if (b instanceof S) {
                if (b.eb() && b.Ec) return p
            } else if (b instanceof U && b.eb() && b.Ec && b.ea !== this && b.ia !== this) return p
        }
        return h
    };
    v.m(mf, {
        placeholder: "placeholder"
    },
    s("bb"));
    v.a(mf, "computesBoundsAfterDrag", mf.prototype.Ux);
    v.defineProperty(mf, {
        Ux: "computesBoundsAfterDrag"
    },
    s("Co"),
    function(a) {
        var b = this.Co;
        b !== a && (v.e(a, "boolean", mf, "computesBoundsAfterDrag"), this.Co = a, this.d("computesBoundsAfterDrag", b, a))
    });
    v.m(mf, {
        mc: "memberParts"
    },
    function() {
        return this.Pp.f
    });
    function vl(a, b) {
        if (a.Pp.add(b)) {
            b instanceof mf && a.Zk.add(b);
            var c = a.zC;
            if (c !== m) {
                var d = h,
                e = a.b;
                e !== m && (d = e.ya, e.ya = h);
                c(a, b);
                e !== m && (e.ya = d)
            }
        }
        c = a.bb;
        c === m && (c = a);
        c.J()
    }
    function ul(a, b) {
        if (a.Pp.remove(b)) {
            b instanceof mf && a.Zk.remove(b);
            var c = a.AC;
            if (c !== m) {
                var d = h,
                e = a.b;
                e !== m && (d = e.ya, e.ya = h);
                c(a, b);
                e !== m && (e.ya = d)
            }
        }
        c = a.bb;
        c === m && (c = a);
        c.J()
    }
    mf.prototype.tl = function() {
        if (0 < this.Pp.count) {
            var a = this.b;
            if (a === m) return;
            for (var b = this.Pp.copy().f; b.next();) a.remove(b.value)
        }
        S.prototype.tl.call(this)
    };
    mf.prototype.hv = function() {
        var a = this.ta;
        a !== m && a.hv(this)
    };
    v.a(mf, "layout", mf.prototype.xb);
    v.defineProperty(mf, {
        xb: "layout"
    },
    s("Zc"),
    function(a) {
        var b = this.Zc;
        b !== a && (a !== m && v.c(a, Mh, mf, "layout"), b !== m && (b.b = m, b.group = m), this.Zc = a, a !== m && (a.b = this.b, a.group = this), this.d("layout", b, a))
    });
    v.a(mf, "memberAdded", mf.prototype.zC);
    v.defineProperty(mf, {
        zC: "memberAdded"
    },
    s("Op"),
    function(a) {
        var b = this.Op;
        b !== a && (a !== m && v.e(a, "function", mf, "memberAdded"), this.Op = a, this.d("memberAdded", b, a))
    });
    v.a(mf, "memberRemoved", mf.prototype.AC);
    v.defineProperty(mf, {
        AC: "memberRemoved"
    },
    s("Qp"),
    function(a) {
        var b = this.Qp;
        b !== a && (a !== m && v.e(a, "function", mf, "memberRemoved"), this.Qp = a, this.d("memberRemoved", b, a))
    });
    v.a(mf, "memberValidation", mf.prototype.Nr);
    v.defineProperty(mf, {
        Nr: "memberValidation"
    },
    s("Pj"),
    function(a) {
        var b = this.Pj;
        b !== a && (a !== m && v.e(a, "function", mf, "memberValidation"), this.Pj = a, this.d("memberValidation", b, a))
    });
    mf.prototype.canAddMembers = mf.prototype.jH = function(a) {
        var b = this.b;
        if (b === m) return p;
        b = b.Ad;
        for (a = b.gy(a).f; a.next();) if (!b.vy(this, a.value)) return p;
        return h
    };
    mf.prototype.addMembers = mf.prototype.gH = function(a, b) {
        var c = this.b;
        if (c === m) return p;
        for (var c = c.Ad,
        d = h,
        e = c.gy(a).f; e.next();) {
            var g = e.value; ! b || c.vy(this, g) ? g.Wa = this: d = p
        }
        return d
    };
    v.a(mf, "ungroupable", mf.prototype.ID);
    v.defineProperty(mf, {
        ID: "ungroupable"
    },
    s("Wq"),
    function(a) {
        var b = this.Wq;
        b !== a && (v.e(a, "boolean", mf, "ungroupable"), this.Wq = a, this.d("ungroupable", b, a))
    });
    mf.prototype.canUngroup = mf.prototype.KH = function() {
        if (!this.ID) return p;
        var a = this.ta;
        if (a !== m && !a.ln) return p;
        a = a.b;
        return a !== m && !a.ln ? p: h
    };
    mf.prototype.findSubGraphParts = mf.prototype.Eu = function() {
        var a = new pa(R);
        kf(a, this, h, p);
        a.remove(this);
        return a
    };
    mf.prototype.collapseSubGraph = mf.prototype.lr = function() {
        var a = this.b;
        if (a !== m && !a.rf) {
            a.rf = h;
            var b = this.Eu();
            Em(this, b);
            a.rf = p
        }
    };
    function Em(a, b) {
        a.ke = p;
        for (var c = a.mc; c.next();) {
            var d = c.value;
            d.J();
            d.r(sj);
            d.Wg();
            d instanceof mf && (d.nv = d.ke, Em(d, b));
            if (d instanceof S) d.pf(b);
            else if (d instanceof U) for (d = d.di; d.next();) d.value.pf(b)
        }
    }
    mf.prototype.expandSubGraph = mf.prototype.rr = function() {
        var a = this.b;
        if (a !== m && !a.rf) {
            a.rf = h;
            var b = this.Eu();
            Fm(this, b);
            a.rf = p
        }
    };
    function Fm(a, b) {
        a.ke = h;
        for (var c = a.mc; c.next();) {
            var d = c.value;
            d.J();
            d.r(rj);
            d.ii();
            d instanceof mf && d.nv && Fm(d, b);
            if (d instanceof S) d.pf(b);
            else if (d instanceof U) for (d = d.di; d.next();) d.value.pf(b)
        }
    }
    v.a(mf, "isSubGraphExpanded", mf.prototype.ke);
    v.defineProperty(mf, {
        ke: "isSubGraphExpanded"
    },
    s("vp"),
    function(a) {
        var b = this.vp;
        if (b !== a) {
            v.e(a, "boolean", mf, "isSubGraphExpanded");
            this.vp = a;
            var c = this.b;
            c !== m && xh(c);
            this.d("isSubGraphExpanded", b, a);
            b = this.tD;
            if (b !== m) {
                var d = h;
                c !== m && (d = c.ya, c.ya = h);
                b(this);
                c !== m && (c.ya = d)
            }
            c !== m && c.da.cb || (a ? this.rr() : this.lr())
        }
    });
    v.a(mf, "wasSubGraphExpanded", mf.prototype.nv);
    v.defineProperty(mf, {
        nv: "wasSubGraphExpanded"
    },
    s("ar"),
    function(a) {
        var b = this.ar;
        b !== a && (v.e(a, "boolean", mf, "wasSubGraphExpanded"), this.ar = a, this.d("wasSubGraphExpanded", b, a))
    });
    v.a(mf, "subGraphExpandedChanged", mf.prototype.tD);
    v.defineProperty(mf, {
        tD: "subGraphExpandedChanged"
    },
    s("Mq"),
    function(a) {
        var b = this.Mq;
        b !== a && (a !== m && v.e(a, "function", mf, "subGraphExpandedChanged"), this.Mq = a, this.d("subGraphExpandedChanged", b, a))
    });
    mf.prototype.move = mf.prototype.move = function(a) {
        var b = this.position,
        c = b.x;
        isNaN(c) && (c = 0);
        b = b.y;
        isNaN(b) && (b = 0);
        c = a.x - c;
        b = a.y - b;
        S.prototype.move.call(this, a);
        for (a = this.Eu().f; a.next();) {
            var d = a.value,
            e = d.position;
            S.prototype.move.call(d, new D(e.x + c, e.y + b))
        }
    };
    function Pg() {
        P.call(this);
        this.Ld = (new Hb(0)).freeze();
        this.Jm = new E(NaN, NaN, NaN, NaN)
    }
    v.H("Placeholder", Pg);
    v.pa(Pg, P);
    Pg.prototype.jb = function(a) {
        P.prototype.jb.call(this, a);
        a.Ld = this.Ld.B();
        a.Jm = this.Jm.copy()
    };
    Pg.prototype.Ji = function(a) {
        if (this.background === m && this.Oh === m) return p;
        var b = this.ua;
        return Lb(0, 0, b.width, b.height, a.x, a.y)
    };
    Pg.prototype.Mr = function() {
        var a = this.W; (a === m || !(a instanceof mf) && !(a instanceof lf)) && v.g("Placeholder is not inside a Group or Adornment.");
        if (a instanceof mf) {
            var b;
            a: {
                b = this.W;
                if (b instanceof mf && b.Ux && this.Jm.aa()) {
                    var c = b.b;
                    if (c !== m && (c = c.sa, c instanceof Ef && !c.Uo && c.Jb !== m && !c.Jb.contains(b))) {
                        b = this.Jm;
                        break a
                    }
                }
                b = this.W;
                if (b instanceof mf) {
                    for (var d = c = Infinity,
                    e = -Infinity,
                    g = -Infinity,
                    i = b.mc; i.next();) {
                        var j = i.value;
                        if (j.eb()) {
                            if (j instanceof U) {
                                if (j.ac) continue;
                                if (j.ea === b || j.ia === b) continue
                            }
                            j = j.la;
                            j.left < c && (c = j.left);
                            j.top < d && (d = j.top);
                            j.right > e && (e = j.right);
                            j.bottom > g && (g = j.bottom)
                        }
                    } ! isFinite(c) || !isFinite(d) ? (b = b.location, c = this.padding, b = new E(b.x + c.left, b.y + c.top, 0, 0)) : b = new E(c, d, e - c, g - d)
                } else b = new E;
                c = this.padding;
                b = new E(b.x - c.left, b.y - c.top, b.width + c.left + c.right, b.height + c.top + c.bottom)
            }
            this.Jm = b;
            c = this.qc;
            ub(c, b.width || 0, b.height || 0);
            Zi(this, 0, 0, c.width, c.height);
            c = a.mc;
            for (d = p; c.next();) if (c.value.eb()) {
                d = h;
                break
            }
            d && (!isNaN(b.x) && !isNaN(b.y)) && (a.location = new D(b.x, b.y))
        } else b = this.ma,
        c = this.qc,
        a = this.padding,
        ub(c, b.width + (a.left + a.right) || 0, b.height + (a.top + a.bottom) || 0),
        Zi(this, -a.left, -a.top, c.width, c.height)
    };
    Pg.prototype.Hi = function(a, b, c, d) {
        var e = this.la;
        e.x = a;
        e.y = b;
        e.width = c;
        e.height = d
    };
    v.a(Pg, "padding", Pg.prototype.padding);
    v.defineProperty(Pg, {
        padding: "padding"
    },
    s("Ld"),
    function(a) {
        "number" === typeof a ? a = new Hb(a) : v.c(a, Hb, w, "padding");
        var b = this.Ld;
        b.u(a) || (this.Ld = a = a.B(), this.d("padding", b, a))
    });
    function Mh() {
        v.Ob(this);
        this.xw = this.L = m;
        this.Zs = this.sp = h;
        this.zp = this.yp = p;
        this.uo = (new D(0, 0)).freeze();
        this.p = m
    }
    v.H("Layout", Mh);
    Mh.prototype.cloneProtected = Mh.prototype.jb = function(a) {
        a.sp = this.sp;
        a.Zs = this.Zs;
        a.zp = this.zp;
        a.uo = this.uo.B()
    };
    Mh.prototype.copy = Mh.prototype.copy = function() {
        var a = new this.constructor;
        this.jb(a);
        return a
    };
    Mh.prototype.toString = function() {
        var a = v.Si(Object.getPrototypeOf(this)),
        a = a + "(";
        this.group !== m && (a += " in " + this.group);
        this.b !== m && (a += " for " + this.b);
        return a + ")"
    };
    v.a(Mh, "diagram", Mh.prototype.b);
    v.defineProperty(Mh, {
        b: "diagram"
    },
    s("L"),
    function(a) {
        this.L !== a && (a !== m && v.c(a, A, Mh, "diagram"), this.L = a)
    });
    v.a(Mh, "group", Mh.prototype.group);
    v.defineProperty(Mh, {
        group: "group"
    },
    s("xw"),
    function(a) {
        this.xw !== a && (a !== m && v.c(a, mf, Mh, "group"), this.xw = a)
    });
    v.a(Mh, "isOngoing", Mh.prototype.lC);
    v.defineProperty(Mh, {
        lC: "isOngoing"
    },
    s("sp"),
    function(a) {
        this.sp !== a && (v.e(a, "boolean", Mh, "isOngoing"), this.sp = a)
    });
    v.a(Mh, "isInitial", Mh.prototype.kC);
    v.defineProperty(Mh, {
        kC: "isInitial"
    },
    s("Zs"),
    function(a) {
        v.e(a, "boolean", Mh, "isInitial");
        this.Zs = a;
        a || (this.yp = h)
    });
    v.a(Mh, "isValidLayout", Mh.prototype.Ue);
    v.defineProperty(Mh, {
        Ue: "isValidLayout"
    },
    s("yp"),
    function(a) {
        this.yp !== a && (this.yp = a, a || (a = this.b, a !== m && (a.ts = h)))
    });
    Mh.prototype.invalidateLayout = Mh.prototype.r = function() {
        if (this.yp) {
            var a = this.b;
            if (a !== m && !a.da.cb && (this.lC && a.Pf || this.kC && !a.Pf)) this.Ue = p,
            a.Xq = h,
            yf(a)
        }
    };
    v.a(Mh, "isViewportSized", Mh.prototype.Ru);
    v.defineProperty(Mh, {
        Ru: "isViewportSized"
    },
    s("zp"),
    function(a) {
        this.zp !== a && (this.zp = a) && this.r()
    });
    v.a(Mh, "network", Mh.prototype.Lc);
    v.defineProperty(Mh, {
        Lc: "network"
    },
    s("p"),
    function(a) {
        var b = this.p;
        b !== a && (a !== m && v.c(a, Gm, Mh, "network"), b !== m && Hm(b, m), this.p = a, a !== m && Hm(a, this))
    });
    Mh.prototype.createNetwork = Mh.prototype.vu = function() {
        var a = new Gm;
        Hm(a, this);
        return a
    };
    Mh.prototype.makeNetwork = Mh.prototype.cG = function(a) {
        var b = this.createNetwork();
        a instanceof A ? (b.gr(a.pk, h), b.gr(a.links, h)) : a instanceof mf ? b.gr(a.mc) : a.f && b.gr(a.f);
        return b
    };
    Mh.prototype.updateParts = Mh.prototype.MK = function() {
        var a = this.b;
        if (a === m && this.p !== m) for (var b = this.p.S.f; b.next();) {
            var c = b.value.Fa;
            if (c !== m && (a = c.b, a !== m)) break
        }
        a !== m && a.Nb("Layout");
        this.commitLayout();
        a !== m && a.Sd("Layout")
    };
    Mh.prototype.commitLayout = Mh.prototype.su = aa();
    Mh.prototype.doLayout = Mh.prototype.pr = function(a) {
        a === m && v.g("Layout.doLayout(collection) argument must not be null");
        var b = new pa(R);
        a === this.b ? (Im(this, b, a.pk, h, this.Hy, h, p, h), Im(this, b, a.Zi, h, this.Hy, h, p, h)) : a === this.group && Im(this, b, a.mc, p, this.Hy, h, p, h);
        var c = b.count;
        if (0 < c) {
            a = this.b;
            a !== m && a.Nb("Layout");
            for (var c = Math.ceil(Math.sqrt(c)), d = this.Rc.x, e = d, g = this.Rc.y, i = 0, j = 0, b = b.f; b.next();) {
                var k = b.value;
                k.Yh();
                var l = k.la.width,
                n = k.la.height;
                k.move(new D(e, g));
                delete k.kA;
                e += Math.max(l, 50) + 20;
                j = Math.max(j, Math.max(n, 50));
                i >= c - 1 ? (i = 0, e = d, g += j + 20, j = 0) : i++
            }
            a !== m && a.Sd("Layout")
        }
        this.Ue = h
    };
    Mh.prototype.Hy = function(a) {
        return ! a.location.aa() || a instanceof mf && a.kA ? h: p
    };
    function Im(a, b, c, d, e, g, i, j) {
        for (c = c.f; c.next();) {
            var k = c.value;
            if (!d || k.Hr) if (!e || e(k)) k.jr() && (g && k instanceof S ? k.Ui || (k instanceof mf && k.xb === m ? Im(a, b, k.mc, p, e, g, i, j) : b.add(k)) : i && k instanceof U ? b.add(k) : j && (k.Vd() && !(k instanceof S)) && b.add(k))
        }
    }
    v.a(Mh, "arrangementOrigin", Mh.prototype.Rc);
    v.defineProperty(Mh, {
        Rc: "arrangementOrigin"
    },
    s("uo"),
    function(a) {
        this.uo.u(a) || (t && v.c(a, D, Mh, "arrangementOrigin"), this.uo.Ra(a), this.r())
    });
    function Jm(a, b) {
        var c = a.group;
        if (c !== m) {
            var d = c.location;
            if (isNaN(d.x) || isNaN(d.y)) return b;
            var e = c.placeholder;
            e !== m ? (d = e.zb(fc), d.x += e.padding.left, d.y += e.padding.top) : d = c.position.copy();
            return d
        }
        return b
    }
    function Gm() {
        v.Ob(this);
        this.Zc = m;
        this.clear()
    }
    v.H("LayoutNetwork", Gm);
    Gm.prototype.clear = function() {
        if (this.$q) for (var a = this.$q.f; a.next();) {
            var b = a.value;
            b.clear();
            b.p = m
        }
        if (this.Wo) for (a = this.Wo.f; a.next();) b = a.value,
        b.clear(),
        b.p = m;
        this.$q = new pa(Km);
        this.Wo = new pa(Lm);
        this.Pw = new oa(S, Km);
        this.Hw = new oa(U, Lm)
    };
    Gm.prototype.toString = function() {
        return "LayoutNetwork" + (this.xb !== m ? "(" + this.xb.toString() + ")": "")
    };
    v.m(Gm, {
        xb: "layout"
    },
    s("Zc"));
    function Hm(a, b) {
        t && b !== m && v.c(b, Mh, Gm, "setLayout");
        a.Zc = b
    }
    v.m(Gm, {
        S: "vertexes"
    },
    s("$q"));
    v.m(Gm, {
        Sb: "edges"
    },
    s("Wo"));
    Gm.prototype.createVertex = Gm.prototype.Ki = function() {
        return new Km
    };
    Gm.prototype.createEdge = Gm.prototype.pn = function() {
        return new Lm
    };
    Gm.prototype.addParts = Gm.prototype.gr = function(a, b) {
        if (a !== m) {
            b === f && (b = p);
            v.e(b, "boolean", Gm, "addParts:toplevelonly");
            for (var c = a.f; c.next();) {
                var d = c.value;
                if (d instanceof S && (!b || d.Hr) && d.jr() && !d.Ui) if (d instanceof mf && d.xb === m) this.gr(d.mc, p);
                else if (this.je(d) === m) {
                    var e = this.Ki();
                    e.lg = d;
                    this.bk(e)
                }
            }
            for (c.reset(); c.next();) if (d = c.value, d instanceof U && (!b || d.Hr) && d.jr() && this.Cu(d) === m) {
                var g = d.ea,
                e = d.ia;
                g !== e && (g = this.Du(g), e = this.Du(e), g !== m && e !== m && this.El(g, e, d))
            }
        }
    };
    Gm.prototype.findGroupVertex = Gm.prototype.Du = function(a) {
        if (a === m) return m;
        a = rl(a);
        if (a === m) return m;
        var b = this.je(a);
        if (b !== m) return b;
        a = a.Wa;
        return a !== m && (b = this.je(a), b !== m) ? b: m
    };
    Gm.prototype.addVertex = Gm.prototype.bk = function(a) {
        if (a !== m) {
            t && v.c(a, Km, Gm, "addVertex:vertex");
            this.$q.add(a);
            var b = a.Fa;
            b !== m && this.Pw.add(b, a);
            a.p = this
        }
    };
    Gm.prototype.addNode = Gm.prototype.an = function(a) {
        if (a === m) return m;
        t && v.c(a, S, Gm, "addNode:node");
        var b = this.je(a);
        b === m && (b = this.Ki(), b.lg = a, this.bk(b));
        return b
    };
    Gm.prototype.deleteVertex = Gm.prototype.EB = function(a) {
        if (a !== m && (t && v.c(a, Km, Gm, "deleteVertex:vertex"), Mm(this, a))) {
            for (var b = a.jf,
            c = b.count - 1; 0 <= c; c--) {
                var d = b.Z(c);
                this.qn(d)
            }
            b = a.xe;
            for (c = b.count - 1; 0 <= c; c--) d = b.Z(c),
            this.qn(d)
        }
    };
    function Mm(a, b) {
        if (b === m) return p;
        var c = a.$q.remove(b);
        c && (a.Pw.remove(b.Fa), b.p = m);
        return c
    }
    Gm.prototype.deleteNode = Gm.prototype.jI = function(a) {
        a !== m && (t && v.c(a, S, Gm, "deleteNode:node"), a = this.je(a), a !== m && this.EB(a))
    };
    Gm.prototype.findVertex = Gm.prototype.je = function(a) {
        if (a === m) return m;
        t && v.c(a, S, Gm, "findVertex:node");
        return this.Pw.ca(a)
    };
    Gm.prototype.addEdge = Gm.prototype.$m = function(a) {
        if (a !== m) {
            t && v.c(a, Lm, Gm, "addEdge:edge");
            this.Wo.add(a);
            var b = a.Ea;
            b !== m && this.Cu(b) === m && this.Hw.add(b, a);
            b = a.D;
            b !== m && b.XA(a);
            b = a.G;
            b !== m && b.TA(a);
            a.p = this
        }
    };
    Gm.prototype.addLink = Gm.prototype.fH = function(a) {
        if (a === m) return m;
        t && v.c(a, U, Gm, "addLink:link");
        var b = a.ea,
        c = a.ia,
        d = this.Cu(a);
        d === m ? (d = this.pn(), d.Ea = a, b !== m && (d.G = this.an(b)), c !== m && (d.D = this.an(c)), this.$m(d)) : (d.G = b !== m ? this.an(b) : m, d.D = c !== m ? this.an(c) : m);
        return d
    };
    Gm.prototype.deleteEdge = Gm.prototype.qn = function(a) {
        if (a !== m) {
            t && v.c(a, Lm, Gm, "deleteEdge:edge");
            var b = a.D;
            b !== m && b.DB(a);
            b = a.G;
            b !== m && b.CB(a);
            Nm(this, a)
        }
    };
    function Nm(a, b) {
        b !== m && a.Wo.remove(b) && (a.Hw.remove(b.Ea), b.p = m)
    }
    Gm.prototype.deleteLink = Gm.prototype.iI = function(a) {
        a !== m && (t && v.c(a, U, Gm, "deleteLink:link"), a = this.Cu(a), a !== m && this.qn(a))
    };
    Gm.prototype.findEdge = Gm.prototype.Cu = function(a) {
        if (a === m) return m;
        t && v.c(a, U, Gm, "findEdge:link");
        return this.Hw.ca(a)
    };
    Gm.prototype.linkVertexes = Gm.prototype.El = function(a, b, c) {
        if (a === m || b === m) return m;
        t && (v.c(a, Km, Gm, "linkVertexes:fromVertex"), v.c(b, Km, Gm, "linkVertexes:toVertex"), v.c(c, U, Gm, "linkVertexes:link"));
        if (a.p === this && b.p === this) {
            var d = this.pn();
            d.Ea = c;
            d.G = a;
            d.D = b;
            this.$m(d);
            return d
        }
        return m
    };
    Gm.prototype.reverseEdge = Gm.prototype.av = function(a) {
        if (a !== m) {
            t && v.c(a, Lm, Gm, "reverseEdge:edge");
            var b = a.G,
            c = a.D;
            b === m || c === m || (b.CB(a), c.DB(a), a.av(), b.XA(a), c.TA(a))
        }
    };
    Gm.prototype.deleteSelfEdges = Gm.prototype.yu = function() {
        for (var a = [], b = this.Sb.f; b.next();) {
            var c = b.value;
            c.G === c.D && a.push(c)
        }
        b = a.length;
        for (c = 0; c < b; c++) this.qn(a[c])
    };
    Gm.prototype.deleteArtificialVertexes = Gm.prototype.jF = function() {
        for (var a = [], b = this.S.f; b.next();) {
            var c = b.value;
            c.Fa === m && a.push(c)
        }
        c = a.length;
        for (b = 0; b < c; b++) this.EB(a[b]);
        a = [];
        for (b = this.Sb.f; b.next();) c = b.value,
        c.Ea === m && a.push(c);
        c = a.length;
        for (b = 0; b < c; b++) this.qn(a[b])
    };
    Gm.prototype.splitIntoSubNetworks = Gm.prototype.JG = function() {
        this.jF();
        for (var a = [], b = this.Sb.f; b.next();) {
            var c = b.value; (c.G === m || c.D === m) && a.push(c)
        }
        b = a.length;
        for (c = 0; c < b; c++) this.qn(a[c]);
        this.yu();
        a = new y(Gm);
        for (c = h; c;) for (var c = p,
        d = this.S.f; d.next();) if (b = d.value, 0 < b.jf.count || 0 < b.xe.count) {
            c = this.xb.createNetwork();
            a.add(c);
            Om(this, c, b);
            c = h;
            break
        }
        a.sort(function(a, b) {
            return a === m || b === m || a === b ? 0 : b.S.count - a.S.count
        });
        return a
    };
    function Om(a, b, c) {
        if (c !== m && c.p !== b) {
            Mm(a, c);
            b.bk(c);
            for (var d = c.tb; d.next();) {
                var e = d.value;
                e.p !== b && (Nm(a, e), b.$m(e), Om(a, b, e.G))
            }
            for (d = c.rb; d.next();) e = d.value,
            e.p !== b && (Nm(a, e), b.$m(e), Om(a, b, e.D))
        }
    }
    Gm.prototype.getParts = Gm.prototype.cJ = function() {
        for (var a = new pa(R), b = this.S.f; b.next();) a.add(b.value.Fa);
        for (b = this.Sb.f; b.next();) a.add(b.value.Ea);
        return a
    };
    function Km() {
        v.Ob(this);
        this.p = m;
        this.A = (new E(0, 0, 10, 10)).freeze();
        this.z = (new D(5, 5)).freeze();
        this.clear()
    }
    v.H("LayoutVertex", Km);
    Km.prototype.clear = function() {
        this.Fa = m;
        this.jf = new y(Lm);
        this.xe = new y(Lm)
    };
    Km.prototype.toString = function() {
        return "LayoutVertex#" + v.kc(this) + (this.Fa !== m ? "(" + this.Fa.toString() + ")": "")
    };
    v.a(Km, "network", Km.prototype.Lc);
    v.defineProperty(Km, {
        Lc: "network"
    },
    s("p"),
    function(a) {
        this.p !== a && (a !== m && v.c(a, Gm, Km, "network"), this.p = a)
    });
    v.a(Km, "node", Km.prototype.lg);
    v.defineProperty(Km, {
        lg: "node"
    },
    s("Fa"),
    function(a) {
        if (this.Fa !== a) {
            t && a !== m && v.c(a, S, Km, "node");
            this.Fa = a;
            a.Yh();
            var b = a.la;
            if (b.aa() && (this.A.Ra(b), a = a.location, a.aa())) {
                var c = this.z;
                c.qa();
                c.x = a.x - b.x;
                c.y = a.y - b.y;
                c.freeze()
            }
        }
    });
    v.a(Km, "bounds", Km.prototype.lb);
    v.defineProperty(Km, {
        lb: "bounds"
    },
    s("A"),
    function(a) {
        this.A.u(a) || (t && v.c(a, E, Km, "bounds"), this.A.Ra(a))
    });
    v.a(Km, "focus", Km.prototype.focus);
    v.defineProperty(Km, {
        focus: "focus"
    },
    s("z"),
    function(a) {
        this.z.u(a) || (t && v.c(a, D, Km, "focus"), this.z.Ra(a))
    });
    v.a(Km, "centerX", Km.prototype.za);
    v.defineProperty(Km, {
        za: "centerX"
    },
    function() {
        return this.A.x + this.z.x
    },
    function(a) {
        var b = this.A;
        b.x + this.z.x !== a && (t && v.j(a, Km, "centerX"), b.qa(), b.x = a - this.z.x, b.freeze())
    });
    v.a(Km, "centerY", Km.prototype.Aa);
    v.defineProperty(Km, {
        Aa: "centerY"
    },
    function() {
        return this.A.y + this.z.y
    },
    function(a) {
        var b = this.A;
        b.y + this.z.y !== a && (t && v.j(a, Km, "centerY"), b.qa(), b.y = a - this.z.y, b.freeze())
    });
    v.a(Km, "focusX", Km.prototype.Gu);
    v.defineProperty(Km, {
        Gu: "focusX"
    },
    function() {
        return this.z.x
    },
    function(a) {
        var b = this.z;
        b.x !== a && (b.qa(), b.x = a, b.freeze())
    });
    v.a(Km, "focusY", Km.prototype.Hu);
    v.defineProperty(Km, {
        Hu: "focusY"
    },
    function() {
        return this.z.y
    },
    function(a) {
        var b = this.z;
        b.y !== a && (b.qa(), b.y = a, b.freeze())
    });
    v.a(Km, "x", Km.prototype.x);
    v.defineProperty(Km, {
        x: "x"
    },
    function() {
        return this.A.x
    },
    function(a) {
        var b = this.A;
        b.x !== a && (b.qa(), b.x = a, b.freeze())
    });
    v.a(Km, "y", Km.prototype.y);
    v.defineProperty(Km, {
        y: "y"
    },
    function() {
        return this.A.y
    },
    function(a) {
        var b = this.A;
        b.y !== a && (b.qa(), b.y = a, b.freeze())
    });
    v.a(Km, "width", Km.prototype.width);
    v.defineProperty(Km, {
        width: "width"
    },
    function() {
        return this.A.width
    },
    function(a) {
        var b = this.A;
        b.width !== a && (b.qa(), b.width = a, b.freeze())
    });
    v.a(Km, "height", Km.prototype.height);
    v.defineProperty(Km, {
        height: "height"
    },
    function() {
        return this.A.height
    },
    function(a) {
        var b = this.A;
        b.height !== a && (b.qa(), b.height = a, b.freeze())
    });
    Km.prototype.commit = Km.prototype.Sh = function() {
        var a = this.Fa;
        a !== m && a.move(this.lb.position)
    };
    Km.prototype.addSourceEdge = Km.prototype.XA = function(a) {
        a !== m && (t && v.c(a, Lm, Km, "addSourceEdge:edge"), this.jf.contains(a) || this.jf.add(a))
    };
    Km.prototype.deleteSourceEdge = Km.prototype.DB = function(a) {
        a !== m && (t && v.c(a, Lm, Km, "deleteSourceEdge:edge"), this.jf.remove(a))
    };
    Km.prototype.addDestinationEdge = Km.prototype.TA = function(a) {
        a !== m && (t && v.c(a, Lm, Km, "addDestinationEdge:edge"), this.xe.contains(a) || this.xe.add(a))
    };
    Km.prototype.deleteDestinationEdge = Km.prototype.CB = function(a) {
        a !== m && (t && v.c(a, Lm, Km, "deleteDestinationEdge:edge"), this.xe.remove(a))
    };
    v.m(Km, {
        IG: "sourceVertexes"
    },
    function() {
        for (var a = new pa(Km), b = this.tb; b.next();) {
            var c = b.value.G;
            c !== m && !a.contains(c) && a.add(c)
        }
        return a.f
    });
    v.m(Km, {
        mF: "destinationVertexes"
    },
    function() {
        for (var a = new pa(Km), b = this.rb; b.next();) {
            var c = b.value.D;
            c !== m && !a.contains(c) && a.add(c)
        }
        return a.f
    });
    v.m(Km, {
        S: "vertexes"
    },
    function() {
        for (var a = new pa(Km), b = this.tb; b.next();) {
            var c = b.value,
            c = c.G;
            c !== m && !a.contains(c) && a.add(c)
        }
        for (b = this.rb; b.next();) c = b.value,
        c = c.D,
        c !== m && !a.contains(c) && a.add(c);
        return a.f
    });
    v.m(Km, {
        tb: "sourceEdges"
    },
    function() {
        return this.jf.f
    });
    v.m(Km, {
        rb: "destinationEdges"
    },
    function() {
        return this.xe.f
    });
    v.m(Km, {
        Sb: "edges"
    },
    function() {
        for (var a = new y(Lm), b = this.tb; b.next();) {
            var c = b.value;
            a.add(c)
        }
        for (b = this.rb; b.next();) c = b.value,
        a.add(c);
        return a.f
    });
    v.m(Km, {
        uF: "edgesCount"
    },
    function() {
        return this.jf.count + this.xe.count
    });
    var Pm;
    Km.standardComparer = Pm = function(a, b) {
        t && v.c(a, Km, Km, "standardComparer:m");
        t && v.c(b, Km, Km, "standardComparer:n");
        var c = a.Fa,
        d = b.Fa;
        return c ? d ? (c = c.text, d = d.text, c < d ? -1 : c > d ? 1 : 0) : 1 : d !== m ? -1 : 0
    };
    Km.smartComparer = function(a, b) {
        t && v.c(a, Km, Km, "smartComparer:m");
        t && v.c(b, Km, Km, "smartComparer:n");
        if (a !== m) {
            if (b !== m) {
                var c = a.Fa,
                d = b.Fa;
                if (c !== m) {
                    if (d !== m) {
                        var c = c.text.toLocaleLowerCase().split(/([+\-]?[\.]?\d+(?:\.\d*)?(?:e[+\-]?\d+)?)/),
                        d = d.text.toLocaleLowerCase().split(/([+\-]?[\.]?\d+(?:\.\d*)?(?:e[+\-]?\d+)?)/),
                        e;
                        for (e = 0; e < c.length; e++) if ("" !== d[e] && d[e] !== f) {
                            var g = parseFloat(c[e]),
                            i = parseFloat(d[e]);
                            if (isNaN(g)) if (isNaN(i)) {
                                if (0 !== c[e].localeCompare(d[e])) return c[e].localeCompare(d[e])
                            } else return 1;
                            else {
                                if (isNaN(i)) return - 1;
                                if (0 !== g - i) return g - i
                            }
                        } else if ("" !== c[e]) return 1;
                        return "" !== d[e] && d[e] !== f ? -1 : 0
                    }
                    return 1
                }
                return d !== m ? -1 : 0
            }
            return 1
        }
        return b !== m ? -1 : 0
    };
    function Lm() {
        v.Ob(this);
        this.p = m;
        this.clear()
    }
    v.H("LayoutEdge", Lm);
    Lm.prototype.clear = function() {
        this.D = this.G = this.Ea = m
    };
    Lm.prototype.toString = function() {
        return "LayoutEdge#" + v.kc(this) + (this.Ea !== m ? "(" + this.Ea.toString() + ")": "")
    };
    v.a(Lm, "network", Lm.prototype.Lc);
    v.defineProperty(Lm, {
        Lc: "network"
    },
    s("p"),
    function(a) {
        this.p !== a && (t && a !== m && v.c(a, Gm, Lm, "network"), this.p = a)
    });
    v.a(Lm, "link", Lm.prototype.link);
    v.defineProperty(Lm, {
        link: "link"
    },
    s("Ea"),
    function(a) {
        this.Ea !== a && (t && a !== m && v.c(a, U, Lm, "link"), this.Ea = a)
    });
    v.a(Lm, "fromVertex", Lm.prototype.BF);
    v.defineProperty(Lm, {
        BF: "fromVertex"
    },
    s("G"),
    function(a) {
        this.G !== a && (t && a !== m && v.c(a, Km, Lm, "fromVertex"), this.G = a)
    });
    v.a(Lm, "toVertex", Lm.prototype.SG);
    v.defineProperty(Lm, {
        SG: "toVertex"
    },
    s("D"),
    function(a) {
        this.D !== a && (t && a !== m && v.c(a, Km, Lm, "toVertex"), this.D = a)
    });
    Lm.prototype.av = function() {
        var a = this.G;
        this.G = this.D;
        this.D = a
    };
    Lm.prototype.commit = Lm.prototype.Sh = aa();
    Lm.prototype.getOtherVertex = Lm.prototype.DF = function(a) {
        t && v.c(a, Km, Lm, "getOtherVertex:v");
        return this.D === a ? this.G: this.G === a ? this.D: m
    };
    function Pi() {
        Mh.call(this);
        this.Ru = h;
        this.cr = this.dr = NaN;
        this.ki = (new sb(NaN, NaN)).freeze();
        this.Jg = (new sb(10, 10)).freeze();
        this.ja = bk;
        this.Cc = $j;
        this.bc = Wj;
        this.Zb = Qm
    }
    v.H("GridLayout", Pi);
    v.pa(Pi, Mh);
    Pi.prototype.cloneProtected = Pi.prototype.jb = function(a) {
        Mh.prototype.jb.call(this, a);
        a.dr = this.dr;
        a.cr = this.cr;
        a.ki = this.ki.B();
        a.Jg = this.Jg.B();
        a.ja = this.ja;
        a.Cc = this.Cc;
        a.bc = this.bc;
        a.Zb = this.Zb
    };
    Pi.prototype.doLayout = Pi.prototype.pr = function(a) {
        var b = this.b;
        b === m && v.g("The diagram for this layout is not set.");
        this.Rc = Jm(this, this.Rc);
        var c = new pa(R);
        a === this.b ? (Im(this, c, a.pk, h, m, h, p, h), Im(this, c, a.links, h, m, h, p, h), Im(this, c, a.Zi, h, m, h, p, h)) : a === this.group && Im(this, c, a.mc, p, m, h, p, h);
        for (a = c.copy().f; a.next();) {
            var d = a.value;
            if (d instanceof U && (d.ea !== m || d.ia !== m)) c.remove(d);
            else if (d.Yh(), d instanceof mf) for (d = d.mc; d.next();) c.remove(d.value)
        }
        c = c.Df();
        if (0 !== c.length) {
            switch (this.zf) {
            case Zj:
                c.reverse();
                break;
            case Wj:
                c.sort(this.Xg);
                break;
            case Xj:
                c.sort(this.Xg),
                c.reverse()
            }
            d = this.ND;
            isNaN(d) && (d = 0);
            a = this.mz;
            a = isNaN(a) ? Math.max(this.b.ob.width - b.padding.left - b.padding.right, 0) : Math.max(this.mz, 0);
            0 >= d && 0 >= a && (d = 1);
            var e = this.bj.width;
            isFinite(e) || (e = 0);
            var g = this.bj.height;
            isFinite(g) || (g = 0);
            b.Nb("Layout");
            switch (this.pb) {
            case ck:
                var i = Math.max(this.gk.width, 1);
                if (!isFinite(i)) for (var j = i = 0; j < c.length; j++) var k = c[j],
                l = k.ua,
                i = Math.max(i, l.width);
                var i = Math.max(i + e, 1),
                n = Math.max(this.gk.height, 1);
                if (!isFinite(n)) for (j = n = 0; j < c.length; j++) k = c[j],
                l = k.ua,
                n = Math.max(n, l.height);
                for (var n = Math.max(n + g, 1), r = this.Qd, q = this.Rc.x, u = q, x = this.Rc.y, z = 0, C = 0, j = 0; j < c.length; j++) {
                    var k = c[j],
                    l = k.ua,
                    G = Math.ceil((l.width + e) / i) * i,
                    H = Math.ceil((l.height + g) / n) * n,
                    I;
                    switch (r) {
                    case ak:
                        I = Math.abs(u - l.width) + q;
                        break;
                    default:
                        I = u + l.width - q
                    }
                    if (0 < d && z > d - 1 || 0 < a && 0 < z && I > a) z = 0,
                    u = q,
                    x += C,
                    C = 0;
                    C = Math.max(C, H);
                    switch (r) {
                    case ak:
                        l = -l.width;
                        break;
                    default:
                        l = 0
                    }
                    k.move(new D(u + l, x));
                    switch (r) {
                    case ak:
                        u -= G;
                        break;
                    default:
                        u += G
                    }
                    z++
                }
                break;
            case bk:
                i = Math.max(this.gk.width, 1);
                for (k = j = z = x = 0; k < c.length; k++) n = c[k],
                r = n.ua,
                q = sl(n, n.Ab, n.tf),
                x = Math.max(x, q.x),
                z = Math.max(z, r.width - q.x),
                j = Math.max(j, q.y);
                u = this.Qd;
                switch (u) {
                case ak:
                    x += e;
                    break;
                default:
                    z += e
                }
                var i = isFinite(i) ? Math.max(i + e, 1) : Math.max(x + z, 1),
                M = x = this.Rc.x,
                z = this.Rc.y,
                G = C = 0,
                l = Math.max(this.gk.height, 1),
                H = j = 0;
                I = h;
                for (k = 0; k < c.length; k++) {
                    n = c[k];
                    r = n.ua;
                    q = sl(n, n.Ab, n.tf);
                    if (0 < C) switch (u) {
                    case ak:
                        M = Math.floor((M - x - (r.width - q.x)) / i) * i + x;
                        break;
                    default:
                        M = Math.ceil((M - x + q.x) / i) * i + x
                    } else switch (u) {
                    case ak:
                        G = M + q.x + r.width;
                        break;
                    default:
                        G = M - q.x
                    }
                    var T;
                    switch (u) {
                    case ak:
                        T = -(M + q.x) + x + G;
                        break;
                    default:
                        T = M + r.width - q.x - x - G
                    }
                    if (0 < d && C > d - 1 || 0 < a && 0 < C && T > a) {
                        for (M = 0; M < C && k !== C; M++) {
                            T = c[k - C + M];
                            var la = sl(T, T.Ab, T.tf);
                            T.move(new D(T.position.x, T.position.y + j - la.y))
                        }
                        H += g;
                        z = I ? z + H: z + (H + j);
                        C = H = j = 0;
                        M = x;
                        I = p
                    }
                    j = Math.max(j, q.y);
                    H = Math.max(H, r.height - q.y);
                    isFinite(l) && (H = Math.max(H, Math.max(r.height, l) - q.y));
                    I ? n.move(new D(M - q.x, z - q.y)) : n.move(new D(M - q.x, z));
                    switch (u) {
                    case ak:
                        M -= q.x + e;
                        break;
                    default:
                        M += r.width - q.x + e
                    }
                    C++
                }
                for (M = 0; M < C && k !== C; M++) T = c[k - C + M],
                la = sl(T, T.Ab, T.tf),
                T.move(new D(T.position.x, T.position.y + j - la.y))
            }
            b.Sd("Layout");
            this.Ue = h
        }
    };
    v.a(Pi, "wrappingWidth", Pi.prototype.mz);
    v.defineProperty(Pi, {
        mz: "wrappingWidth"
    },
    s("dr"),
    function(a) {
        if (this.dr !== a && (0 < a || isNaN(a))) this.dr = a,
        this.Ru = isNaN(a),
        this.r()
    });
    v.a(Pi, "wrappingColumn", Pi.prototype.ND);
    v.defineProperty(Pi, {
        ND: "wrappingColumn"
    },
    s("cr"),
    function(a) {
        if (this.cr !== a && (0 < a || isNaN(a))) this.cr = a,
        this.r()
    });
    v.a(Pi, "cellSize", Pi.prototype.gk);
    v.defineProperty(Pi, {
        gk: "cellSize"
    },
    s("ki"),
    function(a) {
        this.ki.u(a) || (this.ki.Ra(a), this.r())
    });
    v.a(Pi, "spacing", Pi.prototype.bj);
    v.defineProperty(Pi, {
        bj: "spacing"
    },
    s("Jg"),
    function(a) {
        this.Jg.u(a) || (this.Jg.Ra(a), this.r())
    });
    v.a(Pi, "alignment", Pi.prototype.pb);
    v.defineProperty(Pi, {
        pb: "alignment"
    },
    s("ja"),
    function(a) {
        if (this.ja !== a && (t && v.c(a, na, Pi, "alignment"), a === bk || a === ck)) this.ja = a,
        this.r()
    });
    v.a(Pi, "arrangement", Pi.prototype.Qd);
    v.defineProperty(Pi, {
        Qd: "arrangement"
    },
    s("Cc"),
    function(a) {
        if (this.Cc !== a && (t && v.c(a, na, Pi, "arrangement"), a === $j || a === ak)) this.Cc = a,
        this.r()
    });
    v.a(Pi, "sorting", Pi.prototype.zf);
    v.defineProperty(Pi, {
        zf: "sorting"
    },
    s("bc"),
    function(a) {
        if (this.bc !== a && (t && v.c(a, na, Pi, "sorting"), a === Yj || a === Zj || a === Wj || Xj)) this.bc = a,
        this.r()
    });
    v.a(Pi, "comparer", Pi.prototype.Xg);
    v.defineProperty(Pi, {
        Xg: "comparer"
    },
    s("Zb"),
    function(a) {
        this.Zb !== a && (t && v.e(a, "function", Pi, "comparer"), this.Zb = a, this.r())
    });
    var Qm;
    Pi.standardComparer = Qm = function(a, b) {
        t && v.c(a, R, Pi, "standardComparer:a");
        t && v.c(b, R, Pi, "standardComparer:b");
        var c = a.text,
        d = b.text;
        return c < d ? -1 : c > d ? 1 : 0
    };
    Pi.smartComparer = function(a, b) {
        t && v.c(a, R, Pi, "standardComparer:a");
        t && v.c(b, R, Pi, "standardComparer:b");
        if (a !== m) {
            if (b !== m) {
                var c = a.text.toLocaleLowerCase().split(/([+\-]?[\.]?\d+(?:\.\d*)?(?:e[+\-]?\d+)?)/),
                d = b.text.toLocaleLowerCase().split(/([+\-]?[\.]?\d+(?:\.\d*)?(?:e[+\-]?\d+)?)/),
                e;
                for (e = 0; e < c.length; e++) if ("" !== d[e] && d[e] !== f) {
                    var g = parseFloat(c[e]),
                    i = parseFloat(d[e]);
                    if (isNaN(g)) if (isNaN(i)) {
                        if (0 !== c[e].localeCompare(d[e])) return c[e].localeCompare(d[e])
                    } else return 1;
                    else {
                        if (isNaN(i)) return - 1;
                        if (0 !== g - i) return g - i
                    }
                } else if ("" !== c[e]) return 1;
                return "" !== d[e] && d[e] !== f ? -1 : 0
            }
            return 1
        }
        return b !== m ? -1 : 0
    };
    var ck;
    Pi.Position = ck = v.l(Pi, "Position", 0);
    var bk;
    Pi.Location = bk = v.l(Pi, "Location", 1);
    var $j;
    Pi.LeftToRight = $j = v.l(Pi, "LeftToRight", 2);
    var ak;
    Pi.RightToLeft = ak = v.l(Pi, "RightToLeft", 3);
    var Yj;
    Pi.Forward = Yj = v.l(Pi, "Forward", 4);
    var Zj;
    Pi.Reverse = Zj = v.l(Pi, "Reverse", 5);
    var Wj;
    Pi.Ascending = Wj = v.l(Pi, "Ascending", 6);
    var Xj;
    Pi.Descending = Xj = v.l(Pi, "Descending", 7);
    function dk() {
        Mh.call(this);
        this.nw = this.km = this.ec = 0;
        this.Vo = 360;
        this.mw = pk;
        this.Ds = this.fe = this.OA = this.yj = 0;
        this.fu = new Rm;
        this.Gs = this.Gm = 0;
        this.tA = function(a) {
            a || (a = (new Date).getTime());
            return (9301 * a + 49297) % 233280 / 233280
        };
        this.iE = 600;
        this.hq = NaN;
        this.wo = 1;
        this.Kg = 0;
        this.Mg = 360;
        this.Cc = pk;
        this.Q = lk;
        this.bc = ik;
        this.Zb = Pm;
        this.Jg = 6;
        this.aq = sk
    }
    v.H("CircularLayout", dk);
    v.pa(dk, Mh);
    dk.prototype.cloneProtected = dk.prototype.jb = function(a) {
        Mh.prototype.jb.call(this, a);
        a.hq = this.hq;
        a.wo = this.wo;
        a.Kg = this.Kg;
        a.Mg = this.Mg;
        a.Cc = this.Cc;
        a.Q = this.Q;
        a.bc = this.bc;
        a.Zb = this.Zb;
        a.Jg = this.Jg;
        a.aq = this.aq
    };
    dk.prototype.createNetwork = dk.prototype.vu = function() {
        var a = new Sm;
        Hm(a, this);
        return a
    };
    dk.prototype.doLayout = dk.prototype.pr = function(a) {
        this.Lc === m && (this.Lc = this.makeNetwork(a));
        if (1 === this.p.S.count) a = this.p.S.Z(0),
        a.za = 0,
        a.Aa = 0;
        else {
            for (var a = this.p.S.f,
            b = new y(Tm); a.next();) {
                var c = a.value,
                d = c.Fa;
                d !== m && (c.width = d.na.width, c.height = d.na.height);
                b.add(c)
            }
            var a = new y(Tm),
            c = new y(Tm),
            b = this.sort(b),
            a = new y(Tm),
            c = new y(Tm),
            d = this.mw,
            e = this.aE,
            g = this.ec,
            i = this.km,
            j = this.nw,
            k = this.Vo,
            l = this.yj,
            n = this.OA,
            r = this.fe,
            q = this.Ds,
            d = this.Qd,
            e = this.Vr,
            g = this.PC;
            if (!isFinite(g) || 0 >= g) g = NaN;
            i = this.cB;
            if (!isFinite(i) || 0 >= i) i = 1;
            j = this.fi;
            isFinite(j) || (j = 0);
            k = this.dj;
            if (!isFinite(k) || 360 < k || 1 > k) k = 360;
            l = this.bj;
            isFinite(l) || (l = NaN);
            d === qk && e === rk ? d = pk: d === qk && e !== rk && (e = rk, d = this.Qd);
            if ((this.direction === jk || this.direction === kk) && this.zf !== ik) {
                for (var u = 0; ! (u >= b.length); u += 2) {
                    a.add(b.Z(u));
                    if (u + 1 >= b.length) break;
                    c.add(b.Z(u + 1))
                }
                this.direction === jk ? (this.Qd === qk && a.reverse(), b = new y(Tm), b.bg(a), b.bg(c)) : (this.Qd === qk && c.reverse(), b = new y(Tm), b.bg(c), b.bg(a))
            }
            for (var x = b.length,
            z = n = 0,
            u = 0; u < b.length; u++) {
                var r = j + k * z * (this.direction === lk ? 1 : -1) / x,
                C = b.Z(u).Oe;
                isNaN(C) && (C = Um(b.Z(u), r));
                if (360 > k && (0 === u || u === b.length - 1)) C /= 2;
                n += C;
                z++
            }
            if (isNaN(g) || d === qk) {
                isNaN(l) && (l = 6);
                if (d !== pk && d !== qk) {
                    C = -Infinity;
                    for (u = 0; u < x; u++) {
                        var q = b.Z(u),
                        G = b.Z(u === x - 1 ? 0 : u + 1);
                        isNaN(q.Oe) && Um(q, 0);
                        isNaN(G.Oe) && Um(G, 0);
                        C = Math.max(C, (q.Oe + G.Oe) / 2)
                    }
                    q = C + l;
                    d === nk ? (r = 2 * Math.PI / x, g = (C + l) / r) : g = Vm(this, q * (360 <= k ? x: x - 1), i, j * Math.PI / 180, k * Math.PI / 180)
                } else g = Vm(this, n + (360 <= k ? x: x - 1) * (d !== qk ? l: 1.6 * l), i, j * Math.PI / 180, k * Math.PI / 180);
                r = g * i
            } else if (r = g * i, z = Wm(this, g, r, j * Math.PI / 180, k * Math.PI / 180), isNaN(l)) {
                if (d === pk || d === qk) l = (z - n) / (360 <= k ? x: x - 1)
            } else if (d === pk || d === qk) u = (z - n) / (360 <= k ? x: x - 1),
            u < l ? (g = Vm(this, n + l * (360 <= k ? x: x - 1), i, j * Math.PI / 180, k * Math.PI / 180), r = g * i) : l = u;
            else {
                C = -Infinity;
                for (u = 0; u < x; u++) q = b.Z(u),
                G = b.Z(u === x - 1 ? 0 : u + 1),
                isNaN(q.Oe) && Um(q, 0),
                isNaN(G.Oe) && Um(G, 0),
                C = Math.max(C, (q.Oe + G.Oe) / 2);
                q = C + l;
                u = Vm(this, q * (360 <= k ? x: x - 1), i, j * Math.PI / 180, k * Math.PI / 180);
                u > g ? (g = u, r = g * i) : q = z / (360 <= k ? x: x - 1)
            }
            this.mw = d;
            this.aE = e;
            this.ec = g;
            this.km = i;
            this.nw = j;
            this.Vo = k;
            this.yj = l;
            this.OA = n;
            this.fe = r;
            this.Ds = q;
            c = [b, a, c];
            b = c[0];
            a = c[1];
            c = c[2];
            d = this.mw;
            e = this.ec;
            i = this.nw;
            j = this.Vo;
            k = this.yj;
            l = this.fe;
            n = this.Ds;
            if ((this.direction === jk || this.direction === kk) && d === qk) Xm(this, b, j, i - j / 2, lk);
            else if (this.direction === jk || this.direction === kk) {
                g = 0;
                switch (d) {
                case ok:
                    g = 180 * Ym(this, e, l, i, n) / Math.PI;
                    break;
                case pk:
                    n = b = 0;
                    g = a.sb();
                    g !== m && (b = Um(g, Math.PI / 2));
                    g = c.sb();
                    g !== m && (n = Um(g, Math.PI / 2));
                    g = 180 * Ym(this, e, l, i, k + (b + n) / 2) / Math.PI;
                    break;
                case nk:
                    g = j / b.length
                }
                if (this.direction === jk) {
                    switch (d) {
                    case ok:
                        Zm(this, a, i, mk);
                        break;
                    case pk:
                        $m(this, a, i, mk);
                        break;
                    case nk:
                        an(this, a, j / 2, i, mk)
                    }
                    switch (d) {
                    case ok:
                        Zm(this, c, i + g, lk);
                        break;
                    case pk:
                        $m(this, c, i + g, lk);
                        break;
                    case nk:
                        an(this, c, j / 2, i + g, lk)
                    }
                } else {
                    switch (d) {
                    case ok:
                        Zm(this, c, i, mk);
                        break;
                    case pk:
                        $m(this, c, i, mk);
                        break;
                    case nk:
                        an(this, c, j / 2, i, mk)
                    }
                    switch (d) {
                    case ok:
                        Zm(this, a, i + g, lk);
                        break;
                    case pk:
                        $m(this, a, i + g, lk);
                        break;
                    case nk:
                        an(this, a, j / 2, i + g, lk)
                    }
                }
            } else switch (d) {
            case ok:
                Zm(this, b, i, this.direction);
                break;
            case pk:
                $m(this, b, i, this.direction);
                break;
            case nk:
                an(this, b, j, i, this.direction);
                break;
            case qk:
                Xm(this, b, j, i, this.direction)
            }
            this.updateParts();
            this.Lc = m;
            this.Ue = h
        }
    };
    function an(a, b, c, d, e) {
        for (var g = a.Vo,
        i = a.ec,
        a = a.fe,
        d = d * Math.PI / 180,
        c = c * Math.PI / 180,
        j = b.length,
        k = 0; k < j; k++) {
            var l = d + (e === lk ? k * c / (360 <= g ? j: j - 1) : -(k * c) / j),
            n = b.Z(k),
            r = i * Math.tan(l) / a,
            r = Math.sqrt((i * i + a * a * r * r) / (1 + r * r));
            n.za = r * Math.cos(l);
            n.Aa = r * Math.sin(l);
            n.iu = 180 * l / Math.PI
        }
    }
    function $m(a, b, c, d) {
        for (var e = a.ec,
        g = a.fe,
        i = a.yj,
        c = c * Math.PI / 180,
        j = b.length,
        k = 0; k < j; k++) {
            var l = b.Z(k),
            n = b.Z(k === j - 1 ? 0 : k + 1),
            r = g * Math.sin(c);
            l.za = e * Math.cos(c);
            l.Aa = r;
            l.iu = 180 * c / Math.PI;
            isNaN(l.Oe) && Um(l, 0);
            isNaN(n.Oe) && Um(n, 0);
            l = Ym(a, e, g, d === lk ? c: -c, (l.Oe + n.Oe) / 2 + i);
            c += d === lk ? l: -l
        }
    }
    function Zm(a, b, c, d) {
        for (var e = a.ec,
        g = a.fe,
        i = a.Ds,
        c = c * Math.PI / 180,
        j = b.length,
        k = 0; k < j; k++) {
            var l = b.Z(k);
            l.za = e * Math.cos(c);
            l.Aa = g * Math.sin(c);
            l.iu = 180 * c / Math.PI;
            l = Ym(a, e, g, d === lk ? c: -c, i);
            c += d === lk ? l: -l
        }
    }
    function Xm(a, b, c, d, e) {
        var g = a.Gs,
        g = a.Vo;
        a.sA = 0;
        a.fu = new Rm;
        if (360 > c) {
            for (g = d + (e === lk ? g: -g); 0 > g;) g += 360;
            g %= 360;
            180 < g && (g -= 360);
            g *= Math.PI / 180;
            a.Gs = g;
            bn(a, b, c, d, e)
        } else cn(a, b, c, d, e);
        a.fu.Sh(b)
    }
    function cn(a, b, c, d, e) {
        for (var g = a.yj,
        i = a.km,
        j = a.ec * Math.cos(d * Math.PI / 180), k = a.fe * Math.sin(d * Math.PI / 180), l = b.Df(), n = 0; n < l.length; n++) {
            l[n].za = j;
            l[n].Aa = k;
            if (n === l.length - 1) break;
            var r = [],
            r = dn(a, j, k, l, n, e);
            r[0] || (r = en(a, j, k, l, n, e));
            j = r[1];
            k = r[2]
        }
        a.Gm++;
        if (! (128 < a.Gm)) {
            var j = l[0].za,
            k = l[0].Aa,
            n = l[l.length - 1].za,
            r = l[l.length - 1].Aa,
            q = Math.abs(j - n) - ((l[0].width + l[l.length - 1].width) / 2 + g),
            u = Math.abs(k - r) - ((l[0].height + l[l.length - 1].height) / 2 + g),
            g = 0;
            2.5 > Math.abs(u) ? Math.abs(j - n) < (l[0].width + l[l.length - 1].width) / 2 && (g = 0) : g = 0 < u ? u: 2.5 > Math.abs(q) ? 0 : q;
            q = p;
            q = Math.abs(n) > Math.abs(r) ? 0 < n ^ k > r: 0 < r ^ j < n;
            if (q = e === lk ? q: !q) g = -Math.abs(g),
            g = Math.min(g, -l[l.length - 1].width),
            g = Math.min(g, -l[l.length - 1].height);
            j = a.fu;
            if (0 < g && 0 > j.om || Math.abs(g) < Math.abs(j.om) && !(0 > g && 0 < j.om)) {
                j.om = g;
                j.jl = [];
                j.Ym = [];
                for (k = 0; k < l.length; k++) j.jl[k] = l[k].lb.x,
                j.Ym[k] = l[k].lb.y
            }
            l = a.Gm;
            36 < l && 0 === l % 13 && (a.ec *= (0 === l % 2 ? 0.75 : 1.1) + 0.15 * a.tA(a.Gm), a.fe = a.ec * i);
            2.5 < Math.abs(g) && (a.ec -= g / (2 * Math.PI), a.fe = a.ec * i, cn(a, b, c, d, e))
        }
    }
    function bn(a, b, c, d, e) {
        for (var g = a.ec,
        i = a.fe,
        j = a.km,
        k = g * Math.cos(d * Math.PI / 180), l = i * Math.sin(d * Math.PI / 180), n = b.Df(), r = 0; r < n.length; r++) {
            n[r].za = k;
            n[r].Aa = l;
            if (r === n.length - 1) break;
            var q = [],
            q = dn(a, k, l, n, r, e);
            q[0] || (q = en(a, k, l, n, r, e));
            k = q[1];
            l = q[2]
        }
        a.sA++;
        if (! (128 < a.sA)) {
            b.Z(b.length - 1);
            k = Math.atan2(l, k);
            k = e === lk ? a.Gs - k: k - a.Gs;
            k = Math.abs(k) < Math.abs(k - 2 * Math.PI) ? k: k - 2 * Math.PI;
            g = k * (g + i) / 2;
            i = a.fu;
            if (Math.abs(g) < Math.abs(i.om)) {
                i.om = g;
                i.jl = [];
                i.Ym = [];
                for (k = 0; k < n.length; k++) i.jl[k] = n[k].lb.x,
                i.Ym[k] = n[k].lb.y
            }
            n = a.Gm;
            36 < n && 0 === n % 13 && (a.ec *= (0 == n % 2 ? 0.75 : 1.1) + 0.15 * a.tA(a.Gm), a.fe = a.ec * j);
            2.5 < Math.abs(g) && (a.ec -= g / (2 * Math.PI), a.fe = a.ec * j, bn(a, b, c, d, e))
        }
    }
    function dn(a, b, c, d, e, g) {
        var i = a.yj,
        j = a.ec,
        a = a.fe,
        k = 0,
        l = 0,
        n = p;
        if (0 <= c ^ g === lk) {
            if (k = b + ((d[e].width + d[e + 1].width) / 2 + i), k > j) {
                k = b - ((d[e].width + d[e + 1].width) / 2 + i);
                if (k < -j) return [p, k, l];
                n = h
            }
        } else if (k = b - ((d[e].width + d[e + 1].width) / 2 + i), k < -j) {
            k = b + ((d[e].width + d[e + 1].width) / 2 + i);
            if (k > j) return [p, k, l];
            n = h
        }
        l = Math.sqrt(1 - k * k / (j * j)) * a;
        0 > c ^ n && (l = -l);
        return Math.abs(c - l) > (d[e].height + d[e + 1].height) / 2 ? [p, k, l] : [h, k, l]
    }
    function en(a, b, c, d, e, g) {
        var i = a.yj,
        j = a.ec,
        a = a.fe,
        k = 0,
        l = 0,
        n = p;
        if (0 <= b ^ g === lk) {
            if (l = c - ((d[e].height + d[e + 1].height) / 2 + i), l < -a) {
                l = c + ((d[e].height + d[e + 1].height) / 2 + i);
                if (l > a) return [p, k, l];
                n = h
            }
        } else if (l = c + ((d[e].height + d[e + 1].height) / 2 + i), l > a) {
            l = c - ((d[e].height + d[e + 1].height) / 2 + i);
            if (l < -a) return [p, k, l];
            n = h
        }
        k = Math.sqrt(1 - l * l / (a * a)) * j;
        0 > b ^ n && (k = -k);
        return Math.abs(b - k) > (d[e].width + d[e + 1].width) / 2 ? [p, k, l] : [h, k, l]
    }
    function Rm() {
        this.om = -Infinity;
        this.Ym = this.jl = m
    }
    Rm.prototype.Sh = function(a) {
        if (! (this.jl === m || this.Ym === m)) for (var b = 0; b < this.jl.length; b++) {
            var c = a.Z(b);
            c.x = this.jl[b];
            c.y = this.Ym[b]
        }
    };
    dk.prototype.commitLayout = dk.prototype.su = function() {
        this.commitNodes();
        this.commitLinks()
    };
    dk.prototype.commitNodes = dk.prototype.Tx = function() {
        for (var a = this.tE,
        b = this.p.S.f,
        c; b.next();) c = b.value,
        c.x += a.x,
        c.y += a.y,
        c.Sh()
    };
    dk.prototype.commitLinks = dk.prototype.Sx = function() {
        for (var a = this.p.Sb.f; a.next();) a.value.Sh()
    };
    function Wm(a, b, c, d, e) {
        var g = a.iE;
        if (0.0010 > Math.abs(a.km - 1)) return d !== f && e !== f ? e * b: 2 * Math.PI * b;
        var a = b > c ? Math.sqrt(b * b - c * c) / b: Math.sqrt(c * c - b * b) / c,
        i = 0,
        j;
        j = d !== f && e !== f ? e / (g + 1) : Math.PI / (2 * (g + 1));
        for (var k = 0; k <= g; k++) var l = Math.sin(d !== f && e !== f ? d + k * e / g: k * Math.PI / (2 * g)),
        i = i + Math.sqrt(1 - a * a * l * l) * j;
        return d !== f && e !== f ? (b > c ? b: c) * i: 4 * (b > c ? b: c) * i
    }
    function Vm(a, b, c, d, e) {
        return b / (d !== f && e !== f ? Wm(a, 1, c, d, e) : Wm(a, 1, c))
    }
    function Ym(a, b, c, d, e) {
        if (0.0010 > Math.abs(a.km - 1)) return e / b;
        var g = b > c ? Math.sqrt(b * b - c * c) / b: Math.sqrt(c * c - b * b) / c,
        i = 0,
        a = 2 * Math.PI / (700 * a.p.S.count);
        b > c && (d += Math.PI / 2);
        for (var j = 0;; j++) {
            var k = Math.sin(d + j * a),
            i = i + (b > c ? b: c) * Math.sqrt(1 - g * g * k * k) * a;
            if (i >= e) return j * a
        }
        return 0
    }
    dk.prototype.sort = function(a) {
        switch (this.zf) {
        case gk:
            break;
        case hk:
            a.reverse();
            break;
        case ek:
            a.sort(this.Xg);
            break;
        case fk:
            a.sort(this.Xg);
            a.reverse();
            break;
        case ik:
            for (var b = [], c = 0; c < a.length; c++) b.push(0);
            for (var d = new y(Tm), c = 0; c < a.length; c++) {
                var e = -1,
                g = -1;
                if (0 === c) for (var i = 0; i < a.length; i++) {
                    var j = a.Z(i).uF;
                    j > e && (e = j, g = i)
                } else for (i = 0; i < a.length; i++) j = b[i],
                j > e && (e = j, g = i);
                d.add(a.Z(g));
                b[g] = -1;
                g = a.Z(g);
                e = g.tb;
                for (g = g.rb; e.next();) i = e.value,
                i = i.G,
                i = a.indexOf(i),
                0 > i || 0 <= b[i] && b[i]++;
                for (; g.next();) i = g.value,
                i = i.D,
                i = a.indexOf(i),
                0 > i || 0 <= b[i] && b[i]++
            }
            a = [];
            for (b = 0; b < d.length; b++) {
                j = d.Z(b);
                a[b] = [];
                for (var c = j.rb,
                e = j.tb,
                k, l; c.next();) k = c.value,
                l = d.indexOf(k.D),
                l !== b && 0 > a[b].indexOf(l) && a[b].push(l);
                for (; e.next();) k = e.value,
                l = d.indexOf(k.G),
                l !== b && 0 > a[b].indexOf(l) && a[b].push(l)
            }
            j = [];
            for (b = 0; b < a.length; b++) j[b] = 0;
            for (var c = [], n = [], r = [], e = [], g = new y(Tm), i = b = 0; b < a.length; b++) {
                var q = a[b].length;
                if (1 === q) e.push(b);
                else if (0 === q) g.add(d.Z(b));
                else {
                    if (0 === i) c.push(b);
                    else {
                        for (var u = Infinity,
                        x = Infinity,
                        z = -1,
                        C = [], q = 0; q < c.length; q++) if (0 > a[c[q]].indexOf(c[q === c.length - 1 ? 0 : q + 1])) C.push(q === c.length - 1 ? 0 : q + 1);
                        if (0 === C.length) for (q = 0; q < c.length; q++) C.push(q);
                        for (q = 0; q < C.length; q++) {
                            var G = C[q],
                            H;
                            l = a[b];
                            k = n;
                            H = r;
                            for (var I = j,
                            M = G,
                            T = c,
                            la = 0,
                            fa = 0; fa < k.length; fa++) {
                                var Ca = I[k[fa]],
                                ra = I[H[fa]],
                                va = 0,
                                Ja = 0;
                                Ca < ra ? (va = Ca, Ja = ra) : (va = ra, Ja = Ca);
                                if (va < M && M <= Ja) for (Ca = 0; Ca < l.length; Ca++) ra = l[Ca],
                                0 > T.indexOf(ra) || va < I[ra] && I[ra] < Ja || (va === I[ra] || Ja === I[ra]) || la++;
                                else for (Ca = 0; Ca < l.length; Ca++) ra = l[Ca],
                                0 > T.indexOf(ra) || va < I[ra] && I[ra] < Ja && !(va === I[ra] || Ja === I[ra]) && la++
                            }
                            H = la;
                            for (k = I = 0; k < a[b].length; k++) l = c.indexOf(a[b][k]),
                            0 <= l && (l = Math.abs(G - (l >= G ? l + 1 : l)), I += l < c.length + 1 - l ? l: c.length + 1 - l);
                            for (k = 0; k < n.length; k++) l = j[n[k]],
                            M = j[r[k]],
                            l >= G && l++,
                            M >= G && M++,
                            l > M && (T = M, M = l, l = T),
                            M - l < (c.length + 2) / 2 ^ (l < G && G <= M) || I++;
                            if (H < u || H === u && I < x) u = H,
                            x = I,
                            z = G
                        }
                        c.splice(z, 0, b);
                        for (q = 0; q < c.length; q++) j[c[q]] = q;
                        for (q = 0; q < a[b].length; q++) u = a[b][q],
                        0 <= c.indexOf(u) && (n.push(b), r.push(u))
                    }
                    i++
                }
            }
            n = p;
            for (r = c.length;;) {
                n = h;
                for (j = 0; j < e.length; j++) if (b = e[j], q = a[b][0], l = c.indexOf(q), 0 <= l) {
                    for (i = x = 0; i < a[q].length; i++) u = a[q][i],
                    u = c.indexOf(u),
                    0 > u || u === l || (z = u > l ? u - l: l - u, x += u < l ^ z > r - z ? 1 : -1);
                    c.splice(0 > x ? l: l + 1, 0, b);
                    e.splice(j, 1);
                    j--
                } else n = p;
                if (n) break;
                else c.push(e[0]),
                e.splice(0, 1)
            }
            for (b = 0; b < c.length; b++) l = c[b],
            g.add(d.Z(l));
            return g;
        default:
            v.g("Invalid sorting type.")
        }
        return a
    };
    v.a(dk, "radius", dk.prototype.PC);
    v.defineProperty(dk, {
        PC: "radius"
    },
    s("hq"),
    function(a) {
        if (this.hq !== a && (0 < a || isNaN(a))) this.hq = a,
        this.r()
    });
    v.a(dk, "aspectRatio", dk.prototype.cB);
    v.defineProperty(dk, {
        cB: "aspectRatio"
    },
    s("wo"),
    function(a) {
        this.wo !== a && 0 < a && (this.wo = a, this.r())
    });
    v.a(dk, "startAngle", dk.prototype.fi);
    v.defineProperty(dk, {
        fi: "startAngle"
    },
    s("Kg"),
    function(a) {
        this.Kg !== a && (this.Kg = a, this.r())
    });
    v.a(dk, "sweepAngle", dk.prototype.dj);
    v.defineProperty(dk, {
        dj: "sweepAngle"
    },
    s("Mg"),
    function(a) {
        this.Mg !== a && (this.Mg = 0 < a && 360 >= a ? a: 360, this.r())
    });
    v.a(dk, "arrangement", dk.prototype.Qd);
    v.defineProperty(dk, {
        Qd: "arrangement"
    },
    s("Cc"),
    function(a) {
        if (this.Cc !== a && (t && v.c(a, na, dk, "arrangement"), a === qk || a === pk || a === ok || a === nk)) this.Cc = a,
        this.r()
    });
    v.a(dk, "direction", dk.prototype.direction);
    v.defineProperty(dk, {
        direction: "direction"
    },
    s("Q"),
    function(a) {
        if (this.Q !== a && (t && v.c(a, na, dk, "direction"), a === lk || a === mk || a === jk || a === kk)) this.Q = a,
        this.r()
    });
    v.a(dk, "sorting", dk.prototype.zf);
    v.defineProperty(dk, {
        zf: "sorting"
    },
    s("bc"),
    function(a) {
        if (this.bc !== a && (t && v.c(a, na, dk, "sorting"), a === gk || a === hk || a === ek || fk || a === ik)) this.bc = a,
        this.r()
    });
    v.a(dk, "comparer", dk.prototype.Xg);
    v.defineProperty(dk, {
        Xg: "comparer"
    },
    s("Zb"),
    function(a) {
        this.Zb !== a && (t && v.e(a, "function", dk, "comparer"), this.Zb = a, this.r())
    });
    v.a(dk, "spacing", dk.prototype.bj);
    v.defineProperty(dk, {
        bj: "spacing"
    },
    s("Jg"),
    function(a) {
        this.Jg !== a && (this.Jg = a, this.r())
    });
    v.a(dk, "nodeDiameterFormula", dk.prototype.Vr);
    v.defineProperty(dk, {
        Vr: "nodeDiameterFormula"
    },
    s("aq"),
    function(a) {
        if (this.aq !== a && (t && v.c(a, na, dk, "nodeDiameterFormula"), a === sk || a === rk)) this.aq = a,
        this.r()
    });
    v.m(dk, {
        uE: "actualXRadius"
    },
    s("ec"));
    v.m(dk, {
        vE: "actualYRadius"
    },
    s("fe"));
    v.m(dk, {
        dH: "actualSpacing"
    },
    s("yj"));
    v.m(dk, {
        tE: "actualCenter"
    },
    function() {
        return isNaN(this.Rc.x) || isNaN(this.Rc.y) ? new D(0, 0) : new D(this.Rc.x + this.uE, this.Rc.y + this.vE)
    });
    var pk;
    dk.ConstantSpacing = pk = v.l(dk, "ConstantSpacing", 0);
    var ok;
    dk.ConstantDistance = ok = v.l(dk, "ConstantDistance", 1);
    var nk;
    dk.ConstantAngle = nk = v.l(dk, "ConstantAngle", 2);
    var qk;
    dk.Packed = qk = v.l(dk, "Packed", 3);
    var lk;
    dk.Clockwise = lk = v.l(dk, "Clockwise", 4);
    var mk;
    dk.Counterclockwise = mk = v.l(dk, "Counterclockwise", 5);
    var jk;
    dk.BidirectionalLeft = jk = v.l(dk, "BidirectionalLeft", 6);
    var kk;
    dk.BidirectionalRight = kk = v.l(dk, "BidirectionalRight", 7);
    var gk;
    dk.Forwards = gk = v.l(dk, "Forwards", 8);
    var hk;
    dk.Reverse = hk = v.l(dk, "Reverse", 9);
    var ek;
    dk.Ascending = ek = v.l(dk, "Ascending", 10);
    var fk;
    dk.Descending = fk = v.l(dk, "Descending", 11);
    var ik;
    dk.Optimized = ik = v.l(dk, "Optimized", 12);
    var sk;
    dk.Pythagorean = sk = v.l(dk, "Pythagorean", 13);
    var rk;
    dk.Circular = rk = v.l(dk, "Circular", 14);
    function Sm() {
        Gm.call(this)
    }
    v.H("CircularNetwork", Sm);
    v.pa(Sm, Gm);
    Sm.prototype.createVertex = Sm.prototype.Ki = function() {
        return new Tm
    };
    Sm.prototype.createEdge = Sm.prototype.pn = function() {
        return new fn
    };
    function Tm() {
        Km.call(this);
        this.uz = this.jm = NaN
    }
    v.H("CircularVertex", Tm);
    v.pa(Tm, Km);
    function Um(a, b) {
        var c = a.p;
        if (c === m) return NaN;
        c = c.xb;
        if (c === m) return NaN;
        if (c.Qd === qk) if (c.Vr === rk) a.jm = Math.max(a.width, a.height);
        else {
            var c = Math.abs(Math.sin(b)),
            d = Math.abs(Math.cos(b));
            if (0 === c) return a.width;
            if (0 === d) return a.height;
            a.jm = Math.min(a.height / c, a.width / d)
        } else a.jm = c.Vr === rk ? Math.max(a.width, a.height) : Math.sqrt(a.width * a.width + a.height * a.height);
        return a.jm
    }
    v.a(Tm, "diameter", Tm.prototype.Oe);
    v.defineProperty(Tm, {
        Oe: "diameter"
    },
    s("jm"), ba("jm"));
    v.a(Tm, "actualAngle", Tm.prototype.iu);
    v.defineProperty(Tm, {
        iu: "actualAngle"
    },
    s("uz"), ba("uz"));
    function fn() {
        Lm.call(this)
    }
    v.H("CircularEdge", fn);
    v.pa(fn, Lm);
    function gn() {
        Mh.call(this);
        this.lf = m;
        this.Ap = 0;
        this.$e = (new sb(100, 100)).freeze();
        this.vo = p;
        this.jd = this.Ig = h;
        this.Em = 100;
        this.Yo = 1;
        this.lp = 1E3;
        this.Qo = 0.05;
        this.Po = 50;
        this.No = 150;
        this.Oo = 0;
        this.Lo = 20;
        this.Ko = 25
    }
    v.H("ForceDirectedLayout", gn);
    v.pa(gn, Mh);
    gn.prototype.cloneProtected = gn.prototype.jb = function(a) {
        Mh.prototype.jb.call(this, a);
        a.$e = this.$e.B();
        a.vo = this.vo;
        a.Ig = this.Ig;
        a.jd = this.jd;
        a.Em = this.Em;
        a.Yo = this.Yo;
        a.lp = this.lp;
        a.Qo = this.Qo;
        a.Po = this.Po;
        a.No = this.No;
        a.Oo = this.Oo;
        a.Lo = this.Lo;
        a.Ko = this.Ko
    };
    gn.prototype.createNetwork = gn.prototype.vu = function() {
        var a = new hn;
        Hm(a, this);
        return a
    };
    gn.prototype.doLayout = gn.prototype.pr = function(a) {
        this.Lc === m && (this.Lc = this.makeNetwork(a));
        a = this.Su;
        if (0 < this.p.S.count) {
            this.p.yu();
            for (var b = this.p.S.f; b.next();) {
                var c = b.value;
                c.mi = this.electricalCharge(c);
                c.Dm = this.gravitationalMass(c);
                var d = c.Fa;
                if (d !== m) {
                    var e = d.la.width,
                    d = d.la.height;
                    c.width = e;
                    c.height = d;
                    c.Gu = 0.5 * e;
                    c.Hu = 0.5 * d
                }
            }
            for (b = this.p.Sb.f; b.next();) c = b.value,
            c.Kq = this.springStiffness(c),
            c.yh = this.springLength(c);
            this.Ap = 0;
            a: {
                if (! (3 > this.p.S.count)) {
                    e = b = 0;
                    c = this.p.S.f;
                    c.next();
                    for (d = c.value.A; c.next();) {
                        if (c.value.A.Te(d) && (b++, 1 < b)) {
                            b = h;
                            break a
                        }
                        if (10 < e) break;
                        e++
                    }
                }
                b = p
            }
            if (b) {
                b = this.p;
                for (e = b.JG().f; e.next();) {
                    this.Lc = d = e.value;
                    for (c = this.p.S.f; c.next();) {
                        for (var d = c.value,
                        g = 0,
                        i = d.S; i.next();) g++;
                        d.Be = g;
                        d.Ai = 1;
                        d.Gk = m;
                        d.Zf = m
                    }
                    jn(this, 0, a)
                }
                this.Lc = b;
                e.reset();
                t && v.c(b, hn, gn, "arrangeConnectedGraphs:singletons");
                for (var c = this.nu,
                j = e.count,
                d = h,
                i = g = 0,
                k = [], l = 0; l < j + b.S.count + 2; l++) k[l] = m;
                j = 0;
                for (e.reset(); e.next();) {
                    var n = e.value,
                    l = this.Me(n);
                    if (d) d = p,
                    g = l.x + l.width / 2,
                    i = l.y + l.height / 2,
                    k[0] = new D(l.right + c.width, l.top),
                    k[1] = new D(l.left, l.bottom + c.height),
                    j = 2;
                    else {
                        var r = kn(k, j, new D(g, i), new sb(l.width, l.height), c),
                        q = k[r],
                        u = new D(q.x + l.width + c.width, q.y),
                        x = new D(q.x, q.y + l.height + c.height);
                        r + 1 < j && k.splice(r + 1, 0, m);
                        k[r] = u;
                        k[r + 1] = x;
                        j++;
                        r = q.x - l.x;
                        l = q.y - l.y;
                        for (n = n.S.f; n.next();) {
                            var z = n.value;
                            z.za += r;
                            z.Aa += l
                        }
                    }
                }
                for (n = b.S.f; n.next();) z = n.value,
                l = z.A,
                2 > j ? (g = l.x + l.width / 2, i = l.y + l.height / 2, k[0] = new D(l.right + c.width, l.top), k[1] = new D(l.left, l.bottom + c.height), j = 2) : (r = kn(k, j, new D(g, i), new sb(l.width, l.height), c), q = k[r], u = new D(q.x + l.width + c.width, q.y), x = new D(q.x, q.y + l.height + c.height), r + 1 < j && k.splice(r + 1, 0, m), k[r] = u, k[r + 1] = x, j++, z.za = q.x + z.width / 2, z.Aa = q.y + z.height / 2);
                for (e.reset(); e.next();) {
                    d = e.value;
                    for (g = d.S.f; g.next();) c = g.value,
                    b.bk(c);
                    for (d = d.Sb.f; d.next();) c = d.value,
                    b.$m(c)
                }
            }
            ln(this, a);
            this.updateParts()
        }
        this.Em = a;
        this.Lc = m;
        this.Ue = h
    };
    gn.prototype.Me = function(a) {
        t && v.c(a, hn, gn, "computeBounds:net");
        for (var b = new E,
        c = h,
        a = a.S.f; a.next();) {
            var d = a.value;
            c ? (c = p, b.set(d.A)) : b.fj(d.A)
        }
        return b
    };
    function mn(a, b, c) {
        t && (v.j(b, gn, "computeClusterLayoutIterations:level"), v.j(c, gn, "computeClusterLayoutIterations:maxiter"));
        return Math.max(Math.min(a.p.S.count, c * (b + 1) / 11), 10)
    }
    function jn(a, b, c) {
        t && (v.j(b, gn, "layoutClusters:level"), v.j(c, gn, "layoutClusters:maxiter"));
        var d;
        t && v.j(b, gn, "hasClusters:level");
        if (10 < b || 3 > a.p.S.count) d = p;
        else {
            a.lf === m ? a.lf = new y(nn) : a.lf.clear();
            a.lf.bg(a.p.S);
            d = a.lf;
            d.sort(function(a, b) {
                return a === m || b === m || a === b ? 0 : b.Be - a.Be
            });
            for (var e = d.count - 1; 0 <= e && 1 >= d.i[e].Be;) e--;
            d = 1 < d.count - e
        }
        if (d) {
            d = a.Bl;
            a.Bl *= 1 + 1 / (b + 1);
            t && v.j(b, gn, "pushSubNetwork:level");
            for (var e = a.p,
            g = new hn,
            i = a.lf.f; i.next();) {
                var j = i.value;
                if (1 < j.Be) {
                    g.bk(j);
                    var k = {
                        pz: j.Be,
                        qz: j.width,
                        oz: j.height,
                        PD: j.z.x,
                        QD: j.z.y
                    };
                    j.Zf === m && (j.Zf = new y);
                    j.Zf.add(k);
                    j.bx = j.Zf.count - 1
                } else break
            }
            for (var l = e.Sb.f; l.next();) {
                var n = l.value;
                if (n.G.p === g && n.D.p === g) g.$m(n);
                else if (n.G.p === g) {
                    var r = n.G.Gk;
                    r === m && (r = new y(nn), n.G.Gk = r);
                    r.add(n.D);
                    n.G.Be--;
                    n.G.Ai += n.D.Ai
                } else n.D.p === g && (r = n.D.Gk, r === m && (r = new y(nn), n.D.Gk = r), r.add(n.G), n.D.Be--, n.D.Ai += n.G.Ai)
            }
            for (l = g.Sb.f; l.next();) n = l.value,
            n.yh *= Math.max(1, Math.sqrt((n.G.Ai + n.D.Ai) / (4 * b + 1)));
            for (i = g.S.f; i.next();) if (j = i.value, r = j.Gk, r !== m && 0 < r.count && (k = j.Zf.i[j.Zf.count - 1], k = k.pz - j.Be, !(0 >= k))) {
                for (var q = 0,
                u = 0,
                x = r.count - k; x < r.count; x++) {
                    for (var z = r.i[x], n = m, l = z.Sb.f; l.next();) {
                        var C = l.value;
                        if (C.DF(z) === j) {
                            n = C;
                            break
                        }
                    }
                    n !== m && (u += n.yh, q += z.width * z.height)
                }
                r = j.za;
                l = j.Aa;
                n = j.width;
                x = j.height;
                z = j.z;
                C = n * x;
                1 > C && (C = 1);
                q = Math.sqrt((q + C + 4 * u * u / (k * k)) / C);
                k = (q - 1) * n / 2;
                q = (q - 1) * x / 2;
                j.lb = new E(r - z.x - k, l - z.y - q, n + 2 * k, x + 2 * q);
                j.focus = new D(z.x + k, z.y + q)
            }
            a.Lc = g;
            g = Math.max(0, mn(a, b, c));
            a.Su += g;
            jn(a, b + 1, c);
            ln(a, g);
            t && (v.c(e, hn, gn, "popNetwork:oldnet"), v.j(b, gn, "popNetwork:level"));
            for (c = a.p.S.f; c.next();) g = c.value,
            g.p = e,
            g.Zf !== m && (i = g.Zf.i[g.bx], g.Be = i.pz, j = i.PD, k = i.QD, g.lb = new E(g.za - j, g.Aa - k, i.qz, i.oz), g.focus = new D(j, k), g.bx--);
            for (c = a.p.Sb.f; c.next();) c.value.p = e;
            a.Lc = e;
            c = a.lf;
            c === m ? c = new y(nn) : c.clear();
            c.bg(e.S);
            c.sort(function(a, b) {
                return a === m || b === m || a === b ? 0 : b.Be - a.Be
            });
            for (e = c.f; e.next();) on(a, e.value, b);
            a.Bl = d
        }
    }
    function on(a, b, c) {
        t && (v.c(b, nn, gn, "surroundNode:oldnet"), v.j(c, gn, "surroundNode:level"));
        var d = b.Gk;
        if (! (d === m || 0 === d.count)) {
            var c = b.za,
            e = b.Aa,
            g = b.width,
            i = b.height;
            b.Zf !== m && 0 < b.Zf.count && (i = b.Zf.i[0], g = i.qz, i = i.oz);
            for (var g = Math.sqrt(g * g + i * i) / 2, j = p, k = i = 0, l = 0, n = b.S.f; n.next();) {
                var r = n.value;
                1 >= r.Be ? k++:(j = h, l++, i += Math.atan2(b.Aa - r.Aa, b.za - r.za))
            }
            if (0 !== k) {
                0 < l && (i /= l);
                l = b = 0;
                b = j ? 2 * Math.PI / (k + 1) : 2 * Math.PI / k;
                0 === k % 2 && (l = b / 2);
                1 < d.count && d.sort(function(a, b) {
                    return a === m || b === m || a === b ? 0 : b.width * b.height - a.width * a.height
                });
                j = 0 === k % 2 ? 0 : 1;
                for (n = d.f; n.next();) if (r = n.value, !(1 < r.Be) && !a.isFixed(r)) {
                    d = m;
                    for (k = r.Sb.f; k.next();) {
                        d = k.value;
                        break
                    }
                    var k = r.width,
                    q = r.height,
                    d = g + d.yh + Math.sqrt(k * k + q * q) / 2,
                    k = i + (b * (j / 2 >> 1) + l) * (0 == j % 2 ? 1 : -1);
                    r.za = c + d * Math.cos(k);
                    r.Aa = e + d * Math.sin(k);
                    j++
                }
            }
        }
    }
    function kn(a, b, c, d, e) {
        var g = 9E19,
        i = -1,
        j = 0;
        a: for (; j < b; j++) {
            var k = a[j],
            l = k.x - c.x,
            n = k.y - c.y,
            l = l * l + n * n;
            if (l < g) {
                for (n = j - 1; 0 <= n; n--) if (a[n].y > k.y && a[n].x - k.x < d.width + e.width) continue a;
                for (n = j + 1; n < b; n++) if (a[n].x > k.x && a[n].y - k.y < d.height + e.height) continue a;
                i = j;
                g = l
            }
        }
        return i
    }
    gn.prototype.SA = function(a) {
        var b = a.Fa;
        if (b !== m) for (b = b.MB(); b.next();) {
            var c = b.value;
            if ("Comment" === c.od) {
                var d = this.p.je(c);
                d === m && (d = this.p.an(c), d.mi = this.uB, c = this.p.El(a, d, m), c !== m && (c.yh = this.vB))
            }
        }
    };
    function pn(a, b) {
        t && (v.c(a, nn, gn, "getNodeDistance:vertexA"), v.c(b, nn, gn, "getNodeDistance:vertexB"));
        var c = a.lb,
        d = c.x,
        e = c.y,
        g = c.width,
        c = c.height,
        i = b.lb,
        j = i.x,
        k = i.y,
        l = i.width,
        i = i.height;
        return d + g < j ? e > k + i ? (d = d + g - j, e = e - k - i, Math.sqrt(d * d + e * e)) : e + c < k ? (d = d + g - j, e = e + c - k, Math.sqrt(d * d + e * e)) : j - (d + g) : d > j + l ? e > k + i ? (d = d - j - l, e = e - k - i, Math.sqrt(d * d + e * e)) : e + c < k ? (d = d - j - l, e = e + c - k, Math.sqrt(d * d + e * e)) : d - (j + l) : e > k + i ? e - (k + i) : e + c < k ? k - (e + c) : 0.1
    }
    function ln(a, b) {
        t && v.j(b, gn, "performIterations:num");
        a.lf = m;
        for (var c = a.Ap + b; a.Ap < c && !(a.Ap++, !qn(a)););
        a.lf = m
    }
    function qn(a) {
        a.lf === m && (a.lf = new y(nn), a.lf.bg(a.p.S));
        var b = a.lf;
        if (0 >= b.count) return p;
        var c = b.i[0];
        c.td = 0;
        c.ud = 0;
        for (var d = c.za,
        e = d,
        g = c.Aa,
        i = g,
        c = 1; c < b.count; c++) {
            var j = b.i[c];
            j.td = 0;
            j.ud = 0;
            var k = j.za,
            j = j.Aa,
            d = Math.min(d, k),
            e = Math.max(e, k),
            g = Math.min(g, j),
            i = Math.max(i, j)
        } (i = e - d > i - g) ? b.sort(function(a, b) {
            return a === m || b === m || a === b ? 0 : a.za - b.za
        }) : b.sort(function(a, b) {
            return a === m || b === m || a === b ? 0 : a.Aa - b.Aa
        });
        for (var l = 0,
        n = k = 0,
        c = 0; c < b.count; c++) {
            j = b.i[c];
            d = j.za;
            e = j.Aa;
            k = j.mi * a.electricalFieldX(d, e);
            n = j.mi * a.electricalFieldY(d, e);
            j.td += k;
            j.ud += n;
            k = j.Dm * a.gravitationalFieldX(d, e);
            n = j.Dm * a.gravitationalFieldY(d, e);
            j.td += k;
            j.ud += n;
            for (var r = a.Bl,
            q = c + 1; q < b.count; q++) if (g = b.i[q], g !== j) {
                var n = g.za,
                u = g.Aa;
                if (Math.abs(d - n) > r) {
                    if (i) break
                } else if (Math.abs(e - u) > r) {
                    if (!i) break
                } else {
                    var x = pn(j, g);
                    1 > x ? (d > n ? (k = Math.abs(g.A.right - j.A.left), k = rn(1 + k)) : d < n ? (k = Math.abs(g.A.left - j.A.right), k = -rn(1 + k)) : (k = Math.max(g.width, j.width), k = rn(1 + k) - k / 2), e > u ? (n = Math.abs(g.A.bottom - j.A.top), n = rn(1 + n)) : d < n ? (n = Math.abs(g.A.top - j.A.bottom), n = -rn(1 + n)) : (n = Math.max(g.height, j.height), n = rn(1 + n) - n / 2)) : (l = -(j.mi * g.mi) / (x * x), k = l * ((n - d) / x), n = l * ((u - e) / x));
                    j.td += k;
                    j.ud += n;
                    g.td -= k;
                    g.ud -= n
                }
            }
        }
        for (c = a.p.Sb.f; c.next();) i = c.value,
        j = i.G,
        g = i.D,
        d = j.za,
        e = j.Aa,
        n = g.za,
        u = g.Aa,
        x = pn(j, g),
        1 > x ? (k = (d > n ? 1 : -1) * rn(1 + Math.max(g.width, j.width)), n = (e > u ? 1 : -1) * rn(1 + Math.max(g.height, j.height))) : (l = i.Kq * (x - i.yh), k = l * ((n - d) / x), n = l * ((u - e) / x)),
        j.td += k,
        j.ud += n,
        g.td -= k,
        g.ud -= n;
        c = 0;
        d = Math.max(a.Bl / 20, 50);
        for (e = 0; e < b.count; e++) j = b.i[e],
        a.isFixed(j) || (g = j.td, i = j.ud, g < -d ? g = -d: g > d && (g = d), i < -d ? i = -d: i > d && (i = d), j.za += g, j.Aa += i, c = Math.max(c, g * g + i * i));
        return c > a.ey * a.ey
    }
    function rn(a) {
        t && v.j(a, gn, "randNext:max");
        return Math.floor(a * Math.random())
    }
    gn.prototype.commitLayout = gn.prototype.su = function() {
        this.Yy();
        this.commitNodes();
        this.commitLinks()
    };
    gn.prototype.Yy = function() {
        if (this.Nl) for (var a = this.p.Sb.f; a.next();) {
            var b = a.value.Ea;
            b !== m && (b.Ya = ec, b.$a = ec)
        }
    };
    gn.prototype.commitNodes = gn.prototype.Tx = function() {
        var a = 0,
        b = 0;
        if (this.bB) var b = this.Me(this.p),
        c = this.Rc,
        a = c.x - b.x,
        b = c.y - b.y;
        for (var c = new E,
        d = this.p.S.f; d.next();) {
            var e = d.value;
            if (0 !== a || 0 !== b) c.set(e.A),
            c.x += a,
            c.y += b,
            e.lb = c;
            e.Sh()
        }
    };
    gn.prototype.commitLinks = gn.prototype.Sx = function() {
        for (var a = this.p.Sb.f; a.next();) a.value.Sh()
    };
    gn.prototype.springStiffness = gn.prototype.zK = function(a) {
        a = a.Kq;
        return ! isNaN(a) ? a: this.zB
    };
    gn.prototype.springLength = gn.prototype.yK = function(a) {
        a = a.yh;
        return ! isNaN(a) ? a: this.yB
    };
    gn.prototype.electricalCharge = gn.prototype.FI = function(a) {
        a = a.mi;
        return ! isNaN(a) ? a: this.wB
    };
    gn.prototype.electricalFieldX = gn.prototype.GI = ca(0);
    gn.prototype.electricalFieldY = gn.prototype.HI = ca(0);
    gn.prototype.gravitationalMass = gn.prototype.fJ = function(a) {
        a = a.Dm;
        return ! isNaN(a) ? a: this.xB
    };
    gn.prototype.gravitationalFieldX = gn.prototype.dJ = ca(0);
    gn.prototype.gravitationalFieldY = gn.prototype.eJ = ca(0);
    gn.prototype.isFixed = gn.prototype.jC = function(a) {
        return a.Cw
    };
    v.m(gn, {
        fI: "currentIteration"
    },
    s("Ap"));
    v.a(gn, "arrangementSpacing", gn.prototype.nu);
    v.defineProperty(gn, {
        nu: "arrangementSpacing"
    },
    s("$e"),
    function(a) {
        this.$e.u(a) || (this.$e.Ra(a), this.r())
    });
    v.a(gn, "arrangesToOrigin", gn.prototype.bB);
    v.defineProperty(gn, {
        bB: "arrangesToOrigin"
    },
    s("vo"),
    function(a) {
        this.vo !== a && (this.vo = a, this.r())
    });
    v.a(gn, "setsPortSpots", gn.prototype.Nl);
    v.defineProperty(gn, {
        Nl: "setsPortSpots"
    },
    s("Ig"),
    function(a) {
        this.Ig !== a && (this.Ig = a, this.r())
    });
    v.a(gn, "comments", gn.prototype.Rx);
    v.defineProperty(gn, {
        Rx: "comments"
    },
    s("jd"),
    function(a) {
        this.jd !== a && (this.jd = a, this.r())
    });
    v.a(gn, "maxIterations", gn.prototype.Su);
    v.defineProperty(gn, {
        Su: "maxIterations"
    },
    s("Em"),
    function(a) {
        this.Em !== a && 0 <= a && (this.Em = a, this.r())
    });
    v.a(gn, "epsilonDistance", gn.prototype.ey);
    v.defineProperty(gn, {
        ey: "epsilonDistance"
    },
    s("Yo"),
    function(a) {
        this.Yo !== a && 0 < a && (this.Yo = a, this.r())
    });
    v.a(gn, "infinityDistance", gn.prototype.Bl);
    v.defineProperty(gn, {
        Bl: "infinityDistance"
    },
    s("lp"),
    function(a) {
        this.lp !== a && 1 < a && (this.lp = a, this.r())
    });
    v.a(gn, "defaultSpringStiffness", gn.prototype.zB);
    v.defineProperty(gn, {
        zB: "defaultSpringStiffness"
    },
    s("Qo"),
    function(a) {
        this.Qo !== a && (this.Qo = a, this.r())
    });
    v.a(gn, "defaultSpringLength", gn.prototype.yB);
    v.defineProperty(gn, {
        yB: "defaultSpringLength"
    },
    s("Po"),
    function(a) {
        this.Po !== a && (this.Po = a, this.r())
    });
    v.a(gn, "defaultElectricalCharge", gn.prototype.wB);
    v.defineProperty(gn, {
        wB: "defaultElectricalCharge"
    },
    s("No"),
    function(a) {
        this.No !== a && (this.No = a, this.r())
    });
    v.a(gn, "defaultGravitationalMass", gn.prototype.xB);
    v.defineProperty(gn, {
        xB: "defaultGravitationalMass"
    },
    s("Oo"),
    function(a) {
        this.Oo !== a && (this.Oo = a, this.r())
    });
    v.a(gn, "defaultCommentSpringLength", gn.prototype.vB);
    v.defineProperty(gn, {
        vB: "defaultCommentSpringLength"
    },
    s("Lo"),
    function(a) {
        this.Lo !== a && (this.Lo = a, this.r())
    });
    v.a(gn, "defaultCommentElectricalCharge", gn.prototype.uB);
    v.defineProperty(gn, {
        uB: "defaultCommentElectricalCharge"
    },
    s("Ko"),
    function(a) {
        this.Ko !== a && (this.Ko = a, this.r())
    });
    function hn() {
        Gm.call(this)
    }
    v.H("ForceDirectedNetwork", hn);
    v.pa(hn, Gm);
    hn.prototype.createVertex = hn.prototype.Ki = function() {
        return new nn
    };
    hn.prototype.createEdge = hn.prototype.pn = function() {
        return new sn
    };
    function nn() {
        Km.call(this);
        this.Cw = p;
        this.Dm = this.mi = NaN;
        this.Ai = this.Be = this.ud = this.td = 0;
        this.Zf = this.Gk = m;
        this.bx = 0
    }
    v.H("ForceDirectedVertex", nn);
    v.pa(nn, Km);
    v.a(nn, "isFixed", nn.prototype.jC);
    v.defineProperty(nn, {
        jC: "isFixed"
    },
    s("Cw"), ba("Cw"));
    v.a(nn, "charge", nn.prototype.YE);
    v.defineProperty(nn, {
        YE: "charge"
    },
    s("mi"), ba("mi"));
    v.a(nn, "mass", nn.prototype.eG);
    v.defineProperty(nn, {
        eG: "mass"
    },
    s("Dm"), ba("Dm"));
    v.a(nn, "forceX", nn.prototype.xF);
    v.defineProperty(nn, {
        xF: "forceX"
    },
    s("td"), ba("td"));
    v.a(nn, "forceY", nn.prototype.yF);
    v.defineProperty(nn, {
        yF: "forceY"
    },
    s("ud"), ba("ud"));
    function sn() {
        Lm.call(this);
        this.yh = this.Kq = NaN
    }
    v.H("ForceDirectedEdge", sn);
    v.pa(sn, Lm);
    v.a(sn, "stiffness", sn.prototype.LG);
    v.defineProperty(sn, {
        LG: "stiffness"
    },
    s("Kq"), ba("Kq"));
    v.a(sn, "length", sn.prototype.length);
    v.defineProperty(sn, {
        length: "length"
    },
    s("yh"), ba("yh"));
    function X() {
        Mh.call(this);
        this.Vc = this.ld = 25;
        this.Q = 0;
        this.em = tn;
        this.zm = un;
        this.tm = vn;
        this.Tk = 4;
        this.Xl = wn;
        this.Fh = xn;
        this.Ig = h;
        this.ab = this.it = this.Na = -1;
        this.Ae = this.Rp = 0;
        this.Yc = this.ye = this.Sf = this.Dg = this.Xc = m;
        this.Yp = 0;
        this.tt = this.Yk = m;
        this.gf = 0;
        this.Zp = m;
        this.Uf = [];
        this.Uf.length = 100
    }
    v.H("LayeredDigraphLayout", X);
    v.pa(X, Mh);
    X.prototype.cloneProtected = X.prototype.jb = function(a) {
        Mh.prototype.jb.call(this, a);
        a.ld = this.ld;
        a.Vc = this.Vc;
        a.Q = this.Q;
        a.em = this.em;
        a.zm = this.zm;
        a.tm = this.tm;
        a.Tk = this.Tk;
        a.Xl = this.Xl;
        a.Fh = this.Fh;
        a.Ig = this.Ig
    };
    X.prototype.createNetwork = X.prototype.vu = function() {
        var a = new yn;
        Hm(a, this);
        return a
    };
    X.prototype.doLayout = X.prototype.pr = function(a) {
        this.Lc === m && (this.Lc = this.makeNetwork(a));
        this.Rc = Jm(this, this.Rc);
        this.it = -1;
        this.Ae = this.Rp = 0;
        this.Zp = this.tt = this.Yk = m;
        var b;
        for (b = 0; b < this.Uf.length; b++) this.Uf[b] = m;
        if (0 < this.p.S.count) {
            this.p.yu();
            for (var c = this.p.Sb.f; c.next();) c.value.ib = p;
            switch (this.em) {
            default:
            case zn:
                var d = 0,
                e = this.p.S.count - 1,
                g = [];
                g.length = e + 1;
                for (var i = this.p.S.f; i.next();) i.value.ka = h;
                for (; An(this.p) !== m;) {
                    var j;
                    for (j = Bn(this.p); j !== m;) g[e] = j,
                    e--,
                    j.ka = p,
                    j = Bn(this.p);
                    for (j = Cn(this.p); j !== m;) g[d] = j,
                    d++,
                    j.ka = p,
                    j = Cn(this.p);
                    t && v.c(this.p, Gm, X, "greedyCycleRemovalFindNodeMaxDegDiff:network");
                    for (var k = m,
                    l = 0,
                    n = this.p.S.f; n.next();) {
                        var r = n.value;
                        if (r.ka) {
                            for (var q = 0,
                            u = r.rb; u.next();) u.value.D.ka && q++;
                            for (var x = 0,
                            z = r.tb; z.next();) z.value.G.ka && x++;
                            if (k === m || l < q - x) k = r,
                            l = q - x
                        }
                    }
                    j = k;
                    j !== m && (g[d] = j, d++, j.ka = p)
                }
                var C;
                for (C = 0; C < this.p.S.count; C++) g[C].R = C;
                for (var G = this.p.Sb.f; G.next();) {
                    var H = G.value;
                    H.G.R > H.D.R && (this.p.av(H), H.ib = h)
                }
                break;
            case tn:
                for (var I = this.p.S.f; I.next();) I.value.xj = -1,
                I.value.mm = -1;
                for (var M = this.p.Sb.f; M.next();) M.value.ap = p;
                this.Yp = 0;
                for (I.reset(); I.next();) 0 === I.value.tb.count && Dn(this, I.value);
                for (I.reset(); I.next();) - 1 === I.value.xj && Dn(this, I.value);
                for (M.reset(); M.next();) {
                    var T = M.value;
                    if (!T.ap) {
                        var la = T.G,
                        fa = la.mm,
                        Ca = T.D,
                        ra = Ca.mm;
                        Ca.xj < la.xj && fa < ra && (this.p.av(T), T.ib = h)
                    }
                }
            }
            for (var va = this.p.S.f,
            Ja; va.next();) {
                Ja = va.value;
                Ja.s = -1;
                var jb = Ja.Fa;
                if ("undefined" !== typeof jb && jb !== m) {
                    var eb = jb.la.width,
                    wb = jb.la.height;
                    Ja.width = eb;
                    Ja.height = wb;
                    Ja.Gu = 0.5 * eb;
                    Ja.Hu = 0.5 * wb
                }
            }
            this.Na = -1;
            switch (this.zm) {
            case En:
                Fn(this);
                break;
            case Gn:
                for (var mb, Xa = this.p.S.f; Xa.next();) mb = Hn(this, Xa.value),
                this.Na = Math.max(mb, this.Na);
                Xa.reset();
                for (var Eb; Xa.next();) Eb = Xa.value,
                Eb.s = this.Na - Eb.s;
                break;
            default:
            case un:
                Fn(this);
                for (var Ya = this.p.S.f; Ya.next();) Ya.value.ka = p;
                for (Ya.reset(); Ya.next();) 0 === Ya.value.tb.count && In(this, Ya.value);
                var Pc = Infinity;
                for (Ya.reset(); Ya.next();) Pc = Math.min(Pc, Ya.value.s);
                this.Na = -1;
                for (Ya.reset(); Ya.next();) Ya.value.s -= Pc,
                this.Na = Math.max(this.Na, Ya.value.s)
            }
            for (va.reset(); va.next();) this.Na = Math.max(this.Na, va.value.s);
            for (var yd = this.p.Sb.f,
            cb, ue = []; yd.next();) cb = yd.value,
            cb.ka = p,
            ue.push(cb);
            for (var oc = 0; oc < ue.length; oc++) if (cb = ue[oc], !cb.ka && !((cb.G.Fa === m || cb.D.Fa === m) && cb.G.s === cb.D.s)) {
                var md, vc, nd, od;
                md = vc = nd = od = 0;
                var Wb = cb.G,
                wc = cb.D;
                if (cb.Ea !== m) {
                    var Xb = cb.Ea;
                    if (Xb === m) continue;
                    var Gc = Wb.Fa,
                    Hc = wc.Fa;
                    if (Gc === m || Hc === m) continue;
                    var Ad = Xb.ea,
                    Jd = Xb.ia,
                    pd = Xb.Jc,
                    xc = Xb.sd;
                    if (cb.ib) var Ud = Ad,
                    fe = pd,
                    Ad = Jd,
                    pd = xc,
                    Jd = Ud,
                    xc = fe;
                    var Mb = Wb.z.copy(),
                    bc = cb.D.z.copy(),
                    qd = cb.ib ? wc.A.copy() : Wb.A.copy(),
                    gc = isNaN(qd.x) ? Mb.copy() : sl(Ad, pd, mc);
                    if (Gc !== Ad && !isNaN(qd.x) && Ad.eb()) {
                        var pc = Wb.A.copy();
                        isNaN(pc.x) || (gc.x += qd.x - pc.x, gc.y += qd.y - pc.y)
                    }
                    var kb = cb.ib ? Wb.A.copy() : wc.A.copy(),
                    rb = isNaN(kb.x) ? bc.copy() : sl(Jd, xc, mc);
                    if (Hc !== Jd && !isNaN(kb.x) && Jd.eb()) {
                        var cc = wc.A;
                        isNaN(cc.x) || (rb.x += kb.x - cc.x, rb.y += kb.y - cc.y)
                    }
                    90 === this.Q || 270 === this.Q ? (md = Math.round((gc.x - Mb.x) / this.Vc), nd = gc.x, vc = Math.round((rb.x - bc.x) / this.Vc), od = rb.x) : (md = Math.round((gc.y - Mb.y) / this.Vc), nd = gc.y, vc = Math.round((rb.y - bc.y) / this.Vc), od = rb.y);
                    cb.Ce = md;
                    cb.De = nd;
                    cb.ce = vc;
                    cb.Fe = od
                } else cb.Ce = 0,
                cb.De = 0,
                cb.ce = 0,
                cb.Fe = 0;
                var dc = Wb.s,
                Kd = wc.s,
                O, hb = cb;
                t && v.c(hb, Jn, X, "_goesAround:edge");
                var Q = 0,
                Z = hb.Ea;
                if (Z !== m) {
                    if (Z.Jc !== m) {
                        var Bd = Z.ea;
                        Zl(Z) === Kn(this, hb, h) ? Q += 1 : this.Nl && Bd !== m && 1 === Bd.ports.count && hb.ib && (Q += 1)
                    }
                    if (Z.sd !== m) {
                        var Cd = Z.ia;
                        $l(Z) === Kn(this, hb, p) ? Q += 2 : this.Nl && Cd !== m && 1 === Cd.ports.count && hb.ib && (Q += 2)
                    }
                }
                O = Q;
                var Ga = 1 === O || 3 === O ? h: p,
                ja = 2 === O || 3 === O ? h: p,
                Na,
                Qa;
                ja && (Qa = this.p.Ki(), Qa.Fa = m, Qa.Ck = 1, Qa.s = dc, Qa.xi = Wb, this.p.bk(Qa), Na = this.p.El(Wb, Qa, cb.Ea), Na.ka = p, Na.ib = cb.ib, Na.Ce = md, Na.ce = 0, Na.De = nd, Na.Fe = 0, Wb = Qa);
                var Ic = 1;
                Ga && Ic--;
                if (dc - Kd > Ic && 0 < dc) {
                    cb.ka = p;
                    Qa = this.p.Ki();
                    Qa.Fa = m;
                    Qa.Ck = 2;
                    Qa.s = dc - 1;
                    this.p.bk(Qa);
                    Na = this.p.El(Wb, Qa, cb.Ea);
                    Na.ka = h;
                    Na.ib = cb.ib;
                    Na.Ce = ja ? 0 : md;
                    Na.ce = 0;
                    Na.De = ja ? 0 : nd;
                    Na.Fe = 0;
                    Wb = Qa;
                    for (dc--; dc - Kd > Ic && 0 < dc;) Qa = this.p.Ki(),
                    Qa.Fa = m,
                    Qa.Ck = 3,
                    Qa.s = dc - 1,
                    this.p.bk(Qa),
                    Na = this.p.El(Wb, Qa, cb.Ea),
                    Na.ka = h,
                    Na.ib = cb.ib,
                    Na.Ce = 0,
                    Na.ce = 0,
                    Na.De = 0,
                    Na.Fe = 0,
                    Wb = Qa,
                    dc--;
                    Na = this.p.El(Qa, wc, cb.Ea);
                    Na.ka = !Ga;
                    Ga && (Qa.xi = wc);
                    Na.ib = cb.ib;
                    Na.Ce = 0;
                    Na.ce = vc;
                    Na.De = 0;
                    Na.Fe = od
                } else cb.ka = h
            }
            var hc = this.Xc = [],
            zb;
            for (zb = 0; zb <= this.Na; zb++) hc[zb] = 0;
            for (var ic = this.p.S.f; ic.next();) ic.value.R = -1;
            switch (this.tm) {
            default:
            case Ln:
                for (var Fb, ad = this.p.S.f; ad.next();) {
                    var Qc = ad.value;
                    Fb = Qc.s;
                    Qc.R = this.Xc[Fb];
                    this.Xc[Fb]++
                }
                break;
            case vn:
                var ve, bd = this.p.S.f;
                for (ve = this.Na; 0 <= ve; ve--) {
                    for (; bd.next();) bd.value.s === ve && -1 === bd.value.R && Mn(this, bd.value);
                    bd.reset()
                }
                break;
            case Nn:
                var rd, qc = this.p.S.f;
                for (rd = 0; rd <= this.Na; rd++) {
                    for (; qc.next();) qc.value.s === rd && -1 === qc.value.R && On(this, qc.value);
                    qc.reset()
                }
            }
            this.it = -1;
            for (zb = this.Ae = this.Rp = 0; zb <= this.Na; zb++) hc[zb] > hc[this.Ae] && (this.it = hc[zb] - 1, this.Ae = zb),
            hc[zb] < hc[this.Rp] && (this.Rp = zb);
            this.Zp = [];
            for (zb = 0; zb < hc.length; zb++) this.Zp[zb] = [];
            ic.reset();
            for (var Re, Ld; ic.next();) Ld = ic.value,
            Re = Ld.s,
            this.Zp[Re][Ld.R] = Ld;
            this.ab = -1;
            for (var cd = 0; cd <= this.Na; cd++) {
                for (var sd = Pn(this, cd), Gb = 0, dd = this.Xc[cd], ge = 0; ge < dd; ge++) {
                    var yc = sd[ge],
                    Gb = Gb + Qn(this, yc, h);
                    yc.I = Gb;
                    Gb += 1;
                    Gb += Qn(this, yc, p)
                }
                this.ab = Math.max(this.ab, Gb - 1);
                ao(this, cd, sd)
            }
            var ob = jo(this),
            pb = ko(this),
            Rb,
            xa,
            Za;
            for (Rb = 0; Rb < this.Tk; Rb++) {
                for (xa = 0; xa <= this.Na; xa++) lo(this, xa, 1),
                mo(this, xa, 1, 1);
                Za = jo(this);
                Za < ob && (ob = Za, pb = ko(this));
                for (xa = this.Na; 0 <= xa; xa--) lo(this, xa, -1),
                mo(this, xa, -1, -1);
                Za = jo(this);
                Za < ob && (ob = Za, pb = ko(this))
            }
            no(this, pb);
            for (Rb = 0; Rb < this.Tk; Rb++) {
                for (xa = 0; xa <= this.Na; xa++) lo(this, xa, 0),
                mo(this, xa, 0, 0);
                Za = jo(this);
                Za < ob && (ob = Za, pb = ko(this));
                for (xa = this.Na; 0 <= xa; xa--) lo(this, xa, 0),
                mo(this, xa, 0, 0);
                Za = jo(this);
                Za < ob && (ob = Za, pb = ko(this))
            }
            no(this, pb);
            var ta, Ab, $a, zc, ma;
            switch (this.Xl) {
            case oo:
                break;
            case po:
                for (zc = ob + 1; (ma = jo(this)) < zc;) {
                    zc = ma;
                    for (Ab = this.Na; 0 <= Ab; Ab--) for ($a = 0; $a <= Ab; $a++) {
                        for (ta = h; ta;) {
                            ta = p;
                            for (xa = Ab; xa >= $a; xa--) ta = mo(this, xa, -1, -1) || ta
                        }
                        Za = jo(this);
                        Za >= ob ? no(this, pb) : (ob = Za, pb = ko(this));
                        for (ta = h; ta;) {
                            ta = p;
                            for (xa = Ab; xa >= $a; xa--) ta = mo(this, xa, 1, 1) || ta
                        }
                        Za = jo(this);
                        Za >= ob ? no(this, pb) : (ob = Za, pb = ko(this));
                        for (ta = h; ta;) {
                            ta = p;
                            for (xa = $a; xa <= Ab; xa++) ta = mo(this, xa, 1, 1) || ta
                        }
                        Za >= ob ? no(this, pb) : (ob = Za, pb = ko(this));
                        for (ta = h; ta;) {
                            ta = p;
                            for (xa = $a; xa <= Ab; xa++) ta = mo(this, xa, -1, -1) || ta
                        }
                        Za >= ob ? no(this, pb) : (ob = Za, pb = ko(this));
                        for (ta = h; ta;) {
                            ta = p;
                            for (xa = Ab; xa >= $a; xa--) ta = mo(this, xa, 0, 0) || ta
                        }
                        Za >= ob ? no(this, pb) : (ob = Za, pb = ko(this));
                        for (ta = h; ta;) {
                            ta = p;
                            for (xa = $a; xa <= Ab; xa++) ta = mo(this, xa, 0, 0) || ta
                        }
                        Za >= ob ? no(this, pb) : (ob = Za, pb = ko(this))
                    }
                }
                break;
            default:
            case wn:
                Ab = this.Na;
                $a = 0;
                for (zc = ob + 1; (ma = jo(this)) < zc;) {
                    zc = ma;
                    for (ta = h; ta;) {
                        ta = p;
                        for (xa = Ab; xa >= $a; xa--) ta = mo(this, xa, -1, -1) || ta
                    }
                    Za = jo(this);
                    Za >= ob ? no(this, pb) : (ob = Za, pb = ko(this));
                    for (ta = h; ta;) {
                        ta = p;
                        for (xa = Ab; xa >= $a; xa--) ta = mo(this, xa, 1, 1) || ta
                    }
                    Za = jo(this);
                    Za >= ob ? no(this, pb) : (ob = Za, pb = ko(this));
                    for (ta = h; ta;) {
                        ta = p;
                        for (xa = $a; xa <= Ab; xa++) ta = mo(this, xa, 1, 1) || ta
                    }
                    Za >= ob ? no(this, pb) : (ob = Za, pb = ko(this));
                    for (ta = h; ta;) {
                        ta = p;
                        for (xa = $a; xa <= Ab; xa++) ta = mo(this, xa, -1, -1) || ta
                    }
                    Za >= ob ? no(this, pb) : (ob = Za, pb = ko(this));
                    for (ta = h; ta;) {
                        ta = p;
                        for (xa = Ab; xa >= $a; xa--) ta = mo(this, xa, 0, 0) || ta
                    }
                    Za >= ob ? no(this, pb) : (ob = Za, pb = ko(this));
                    for (ta = h; ta;) {
                        ta = p;
                        for (xa = $a; xa <= Ab; xa++) ta = mo(this, xa, 0, 0) || ta
                    }
                    Za >= ob ? no(this, pb) : (ob = Za, pb = ko(this))
                }
            }
            no(this, pb);
            var ha, Ib, Rf = 0 !== (this.Fh & qo),
            mg = this.Fh === xn;
            1E3 < this.p.Sb.count && !mg && (Rf = p);
            if (Rf) {
                var we = [],
                Da;
                for (Da = 0; Da <= this.Na; Da++) we[Da] = 0;
                for (var Ba = this.p.S.f,
                Vd, Sf; Ba.next();) {
                    Vd = Ba.value;
                    ha = Vd.s;
                    Sf = Vd.I;
                    var Rc = Qn(this, Vd, p);
                    we[ha] = Math.max(we[ha], Sf + Rc)
                }
                for (Ba.reset(); Ba.next();) Vd = Ba.value,
                ha = Vd.s,
                Sf = Vd.I,
                Vd.I = (8 * (this.ab - we[ha]) >> 1) + 8 * Sf;
                this.ab *= 8
            }
            if (0 !== (this.Fh & ro)) for (Ib = h; Ib;) {
                Ib = p;
                for (ha = this.Ae + 1; ha <= this.Na; ha++) Ib = so(this, ha, 1) || Ib;
                for (ha = this.Ae - 1; 0 <= ha; ha--) Ib = so(this, ha, -1) || Ib;
                Ib = so(this, this.Ae, 0) || Ib
            }
            if (0 !== (this.Fh & to)) {
                for (ha = this.Ae + 1; ha <= this.Na; ha++) uo(this, ha, 1);
                for (ha = this.Ae - 1; 0 <= ha; ha--) uo(this, ha, -1);
                uo(this, this.Ae, 0)
            }
            Rf && (vo(this, -1), vo(this, 1));
            if (0 !== (this.Fh & ro)) for (Ib = h; Ib;) {
                Ib = p;
                Ib = so(this, this.Ae, 0) || Ib;
                for (ha = this.Ae + 1; ha <= this.Na; ha++) Ib = so(this, ha, 0) || Ib;
                for (ha = this.Ae - 1; 0 <= ha; ha--) Ib = so(this, ha, 0) || Ib
            }
            this.updateParts()
        }
        this.Lc = m;
        this.Ue = h
    };
    function wo(a) {
        t && v.c(a, Lm, X, "linkMinLength:edge");
        for (var b = a.D,
        c = 0,
        a = a.G.rb; a.next();) a.value.D === b && c++;
        return 1 < c ? 2 : 1
    }
    function xo(a) {
        t && v.c(a, Lm, X, "linkLengthWeight:edge");
        return 1
    }
    function yo(a) {
        t && v.c(a, Lm, X, "linkStraightenWeight:edge");
        var b = a.G.Fa,
        a = a.D.Fa;
        return b === m && a === m ? 8 : b === m || a === m ? 4 : 1
    }
    function zo(a, b, c) {
        t && (v.c(b, Ao, X, "nodeMinLayerSpace:v"), v.e(c, "boolean", X, "nodeMinLayerSpace:topleft"));
        return b.Fa === m ? 0 : 90 === a.Q || 270 === a.Q ? c ? b.z.y + 10 : b.A.height - b.z.y + 10 : c ? b.z.x + 10 : b.A.width - b.z.x + 10
    }
    function Qn(a, b, c) {
        t && (v.c(b, Ao, X, "nodeMinColumnSpace:v"), v.e(c, "boolean", X, "nodeMinColumnSpace:topleft"));
        if (b.Fa === m) return 0;
        var d = c ? b.Nw: b.Mw;
        if (d !== f) return d;
        d = a.Q;
        return 90 === d || 270 === d ? c ? b.Nw = b.z.x / a.Vc + 1 | 0 : b.Mw = (b.A.width - b.z.x) / a.Vc + 1 | 0 : c ? b.Nw = b.z.y / a.Vc + 1 | 0 : b.Mw = (b.A.height - b.z.y) / a.Vc + 1 | 0
    }
    function ko(a) {
        a.Yk === m && (a.Yk = []);
        for (var b = 0,
        c = a.p.S.f,
        d; c.next();) d = c.value,
        a.Yk[b] = d.s,
        b++,
        a.Yk[b] = d.I,
        b++,
        a.Yk[b] = d.R,
        b++;
        return a.Yk
    }
    function no(a, b) {
        t && v.c(b, Array, X, "restoreLayout:layout");
        for (var c = 0,
        d = a.p.S.f,
        e; d.next();) e = d.value,
        e.s = b[c],
        c++,
        e.I = b[c],
        c++,
        e.R = b[c],
        c++
    }
    function Bo(a, b, c) {
        t && (v.j(b, X, "crossingMatrix:unfixedLayer"), v.j(c, X, "crossingMatrix:direction"));
        var d = Pn(a, b),
        e = a.Xc[b];
        a.tt || (a.tt = []);
        for (var g = a.tt,
        i, j = 0; j < e; j++) {
            i = 0;
            var k = d[j],
            l = k.xi,
            n,
            r;
            if (l !== m && l.s === k.s) if (k = l.R, k > j) for (r = j + 1; r < k; r++) n = d[r],
            (n.xi !== l || n.Ck !== l.Ck) && i++;
            else for (r = j - 1; r > k; r--) n = d[r],
            (n.xi !== l || n.Ck !== l.Ck) && i++;
            var q, u, x, z, C, G;
            if (0 <= c) {
                k = d[j].jf;
                for (l = 0; l < k.count; l++) if (q = k.i[l], q.ka && q.G.s !== b) {
                    n = q.G.R;
                    r = q.Fe;
                    q = q.De;
                    for (u = l + 1; u < k.count; u++) x = k.i[u],
                    x.ka && x.G.s !== b && (z = x.G.R, C = x.Fe, x = x.De, r < C && (n > z || n === z && q > x) && i++, C < r && (z > n || z === n && x > q) && i++)
                }
            }
            if (0 >= c) {
                k = d[j].xe;
                for (l = 0; l < k.count; l++) if (q = k.i[l], q.ka && q.D.s !== b) {
                    n = q.D.R;
                    r = q.Fe;
                    q = q.De;
                    for (u = l + 1; u < k.count; u++) x = k.i[u],
                    x.ka && x.D.s !== b && (z = x.D.R, C = x.Fe, x = x.De, q < x && (n > z || n === z && r > C) && i++, x < q && (z > n || z === n && C > r) && i++)
                }
            }
            g[j * e + j] = i;
            for (k = j + 1; k < e; k++) {
                var H = 0,
                I = 0;
                if (0 <= c) {
                    i = d[j].jf;
                    G = d[k].jf;
                    for (l = 0; l < i.count; l++) if (q = i.i[l], q.ka && q.G.s !== b) {
                        n = q.G.R;
                        q = q.De;
                        for (u = 0; u < G.count; u++) x = G.i[u],
                        x.ka && x.G.s !== b && (z = x.G.R, x = x.De, (n < z || n === z && q < x) && I++, (z < n || z === n && x < q) && H++)
                    }
                }
                if (0 >= c) {
                    i = d[j].xe;
                    G = d[k].xe;
                    for (l = 0; l < i.count; l++) if (q = i.i[l], q.ka && q.D.s !== b) {
                        n = q.D.R;
                        r = q.Fe;
                        for (u = 0; u < G.count; u++) x = G.i[u],
                        x.ka && x.D.s !== b && (z = x.D.R, C = x.Fe, (n < z || n === z && r < C) && I++, (z < n || z === n && C < r) && H++)
                    }
                }
                g[j * e + k] = H;
                g[k * e + j] = I
            }
        }
        ao(a, b, d);
        return g
    }
    function jo(a) {
        var b, c = 0,
        d, e;
        for (b = 0; b <= a.Na; b++) {
            d = Bo(a, b, 1);
            e = a.Xc[b];
            for (var g = 0; g < e; g++) for (var i = g; i < e; i++) c += d[g * e + i]
        }
        return c
    }
    function Co(a) {
        t && v.e(h, "boolean", X, "countBends:weighted");
        for (var b = 0,
        c = 0; c <= a.Na; c++) {
            var d = a,
            e = c;
            t && (v.j(e, X, "bends:unfixedLayer"), v.j(1, X, "bends:direction"), v.e(h, "boolean", X, "bends:weighted"));
            for (var g = Pn(d, e), i = d.Xc[e], j = 0, k = f, k = 0; k < i; k++) {
                var l = g[k].xe,
                n,
                r,
                q;
                if ("undefined" !== typeof l) for (var u = 0; u < l.count; u++) n = l.i[u],
                n.ka && n.D.s !== e && (r = n.G.I + n.Ce, q = n.D.I + n.ce, j += (Math.abs(r - q) + 1) * yo(n))
            }
            ao(d, e, g);
            b += j
        }
        return b
    }
    X.prototype.normalize = function() {
        var a = Infinity;
        this.ab = -1;
        for (var b = this.p.S.f,
        c; b.next();) c = b.value,
        a = Math.min(a, c.I - Qn(this, c, h)),
        this.ab = Math.max(this.ab, c.I + Qn(this, c, p));
        for (b.reset(); b.next();) b.value.I -= a;
        this.ab -= a
    };
    function Do(a, b, c) {
        t && (v.j(b, X, "barycenters:unfixedLayer"), v.j(c, X, "barycenters:direction"));
        var d = Pn(a, b),
        e = a.Xc[b],
        g = [],
        i;
        for (i = 0; i < e; i++) {
            var j = d[i],
            k = m;
            0 >= c && (k = j.jf);
            var l = m;
            0 <= c && (l = j.xe);
            var n = 0,
            r = 0,
            q = j.xi;
            q !== m && q.s === j.s && (n += q.I - 1, r++);
            if (k !== m) for (q = 0; q < k.count; q++) {
                var j = k.i[q],
                u = j.G;
                j.ka && (!j.ib && u.s !== b) && (n += u.I + j.Ce, r++)
            }
            if (l !== m) for (k = 0; k < l.count; k++) j = l.i[k],
            q = j.D,
            j.ka && (!j.ib && q.s !== b) && (n += q.I + j.ce, r++);
            g[i] = 0 === r ? -1 : n / r
        }
        ao(a, b, d);
        return g
    }
    function Eo(a, b, c) {
        t && (v.j(b, X, "medians:unfixedLayer"), v.j(c, X, "medians:direction"));
        for (var d = Pn(a, b), e = a.Xc[b], g = [], i = 0; i < e; i++) {
            var j = d[i],
            k = m;
            0 >= c && (k = j.jf);
            var l = m;
            0 <= c && (l = j.xe);
            var n = 0,
            r = [],
            q = j.xi;
            q !== m && q.s === j.s && (r[n] = q.I - 1, n++);
            if (k !== m) for (q = 0; q < k.count; q++) {
                var j = k.i[q],
                u = j.G;
                j.ka && (!j.ib && u.s !== b) && (r[n] = u.I + j.Ce, n++)
            }
            if (l !== m) for (k = 0; k < l.count; k++) j = l.i[k],
            q = j.D,
            j.ka && (!j.ib && q.s !== b) && (r[n] = q.I + j.ce, n++);
            0 === n ? g[i] = -1 : (r.sort(function(a, b) {
                return a - b
            }), l = n >> 1, g[i] = n & 1 ? r[l] : r[l - 1] + r[l] >> 1)
        }
        ao(a, b, d);
        return g
    }
    function Fo(a, b, c, d, e, g) {
        t && (v.c(b, Ao, X, "tightComponentUnset:v"), v.j(c, X, "tightComponentUnset:component"), v.j(d, X, "tightComponentUnset:unset"), v.e(e, "boolean", X, "tightComponentUnset:forward"), v.e(g, "boolean", X, "tightComponentUnset:backward"));
        if (b.vb === d) {
            b.vb = c;
            var i, j;
            if (e) for (var k = b.rb; k.next();) {
                var l = k.value.D;
                i = b.s - l.s;
                j = wo(k.value);
                i === j && Fo(a, l, c, d, e, g)
            }
            if (g) for (k = b.tb; k.next();) l = k.value.G,
            i = l.s - b.s,
            j = wo(k.value),
            i === j && Fo(a, l, c, d, e, g)
        }
    }
    function Go(a, b, c, d, e, g) {
        t && (v.c(b, Ao, X, "componentUnset:v"), v.j(c, X, "componentUnset:component"), v.j(d, X, "componentUnset:unset"), v.e(e, "boolean", X, "componentUnset:forward"), v.e(g, "boolean", X, "componentUnset:backward"));
        if (b.vb === d) {
            b.vb = c;
            if (e) for (var i = b.rb,
            j; i.next();) j = i.value.D,
            Go(a, j, c, d, e, g);
            if (g) for (b = b.tb; b.next();) i = b.value.G,
            Go(a, i, c, d, e, g)
        }
    }
    function An(a) {
        t && v.c(a, Gm, X, "greedyCycleRemovalFindNode:network");
        for (a = a.S.f; a.next();) {
            var b = a.value;
            if (b.ka) return b
        }
        return m
    }
    function Bn(a) {
        t && v.c(a, Gm, X, "greedyCycleRemovalFindSink:network");
        for (a = a.S.f; a.next();) {
            var b = a.value;
            if (b.ka) {
                for (var c = h,
                d = b.rb; d.next();) if (d.value.D.ka) {
                    c = p;
                    break
                }
                if (c) return b
            }
        }
        return m
    }
    function Cn(a) {
        t && v.c(a, Gm, X, "greedyCycleRemovalFindSource:network");
        for (a = a.S.f; a.next();) {
            var b = a.value;
            if (b.ka) {
                for (var c = h,
                d = b.tb; d.next();) if (d.value.G.ka) {
                    c = p;
                    break
                }
                if (c) return b
            }
        }
        return m
    }
    function Dn(a, b) {
        t && v.c(b, Ao, X, "depthFirstSearchCycleRemovalVisit:v");
        b.xj = a.Yp;
        a.Yp++;
        for (var c = b.rb; c.next();) {
            var d = c.value,
            e = d.D; - 1 === e.xj && (d.ap = h, Dn(a, e))
        }
        b.mm = a.Yp;
        a.Yp++
    }
    function Fn(a) {
        for (var b = a.p.S.f; b.next();) {
            var c = Ho(a, b.value);
            a.Na = Math.max(c, a.Na)
        }
    }
    function Ho(a, b) {
        t && v.c(b, Ao, X, "longestPathSinkLayeringLength:v");
        var c = 0;
        if ( - 1 === b.s) {
            for (var d = b.rb; d.next();) var e = d.value,
            g = wo(e),
            c = Math.max(c, Ho(a, e.D) + g);
            b.s = c
        } else c = b.s;
        return c
    }
    function Hn(a, b) {
        t && v.c(b, Ao, X, "longestPathSourceLayeringLength:v");
        var c = 0;
        if ( - 1 === b.s) {
            for (var d, e, g = b.tb; g.next();) e = g.value,
            d = wo(e),
            c = Math.max(c, Hn(a, e.G) + d);
            b.s = c
        } else c = b.s;
        return c
    }
    function In(a, b) {
        t && v.c(b, Ao, X, "optimalLinkLengthLayeringDepthFirstSearch:v");
        if (!b.ka) {
            b.ka = h;
            for (var c = b.rb; c.next();) In(a, c.value.D);
            t && v.c(b, Ao, X, "optimalLinkLengthLayeringPull:v");
            for (c = a.p.S.f; c.next();) c.value.vb = -1;
            for (var d = b.tb; d.next();) {
                var e = d.value,
                g = wo(e);
                e.G.s - e.D.s > g && Fo(a, e.G, 0, -1, h, p)
            }
            for (Fo(a, b, 1, -1, h, h); 0 !== b.vb;) {
                for (var g = 0,
                d = Infinity,
                i = 0,
                j = m,
                k = a.p.S.f; k.next();) {
                    var l = k.value;
                    if (1 === l.vb) {
                        for (var n = 0,
                        r = p,
                        q = l.tb; q.next();) {
                            var e = q.value,
                            u = e.G,
                            n = n + xo(e);
                            1 !== u.vb && (g += xo(e), u = u.s - l.s, e = wo(e), d = Math.min(d, u - e))
                        }
                        for (e = l.rb; e.next();) q = e.value,
                        u = q.D,
                        n -= xo(q),
                        1 !== u.vb ? g -= xo(q) : r = h;
                        if ((j === m || n < i) && !r) j = l,
                        i = n
                    }
                }
                if (0 < g) {
                    for (c.reset(); c.next();) g = c.value,
                    1 === g.vb && (g.s += d);
                    b.vb = 0
                } else j.vb = 0
            }
            t && v.c(b, Ao, X, "optimalLinkLengthLayeringPush:v");
            for (c = a.p.S.f; c.next();) c.value.vb = -1;
            for (Fo(a, b, 1, -1, h, p); 0 !== b.vb;) {
                g = 0;
                d = Infinity;
                i = 0;
                j = m;
                for (k = a.p.S.f; k.next();) if (l = k.value, 1 === l.vb) {
                    n = 0;
                    r = p;
                    for (e = l.tb; e.next();) q = e.value.G,
                    n += xo(e.value),
                    1 !== q.vb ? g += xo(e.value) : r = h;
                    for (e = k.value.rb; e.next();) q = e.value,
                    u = q.D,
                    n -= xo(q),
                    1 !== u.vb && (g -= xo(q), u = l.s - u.s, q = wo(q), d = Math.min(d, u - q));
                    if ((j === m || n > i) && !r) j = l,
                    i = n
                }
                if (0 > g) {
                    for (c.reset(); c.next();) g = c.value,
                    1 === g.vb && (g.s -= d);
                    b.vb = 0
                } else j.vb = 0
            }
        }
    }
    function Kn(a, b, c) {
        t && (v.c(b, Jn, X, "_oppositeSpotDir:edge"), v.e(c, "boolean", X, "_oppositeSpotDir:from"));
        return 90 === a.Q ? c && !b.ib || !c && b.ib ? kc: sc: 180 === a.Q ? c && !b.ib || !c && b.ib ? Bc: Ac: 270 === a.Q ? c && !b.ib || !c && b.ib ? sc: kc: c && !b.ib || !c && b.ib ? Ac: Bc
    }
    function Mn(a, b) {
        t && v.c(b, Ao, X, "depthFirstOutInitializeIndicesVisit:v");
        var c = b.s;
        b.R = a.Xc[c];
        a.Xc[c]++;
        for (var c = b.xe.Df(), d = h, e; d;) {
            d = p;
            for (e = 0; e < c.length - 1; e++) {
                var g = c[e],
                i = c[e + 1];
                g.Ce > i.Ce && (d = h, c[e] = i, c[e + 1] = g)
            }
        }
        for (e = 0; e < c.length; e++) d = c[e],
        d.ka && (d = d.D, -1 === d.R && Mn(a, d))
    }
    function On(a, b) {
        t && v.c(b, Ao, X, "depthFirstInInitializeIndicesVisit:v");
        var c = b.s;
        b.R = a.Xc[c];
        a.Xc[c]++;
        for (var c = b.jf.Df(), d = h, e; d;) {
            d = p;
            for (e = 0; e < c.length - 1; e++) {
                var g = c[e],
                i = c[e + 1];
                g.ce > i.ce && (d = h, c[e] = i, c[e + 1] = g)
            }
        }
        for (e = 0; e < c.length; e++) d = c[e],
        d.ka && (d = d.G, -1 === d.R && On(a, d))
    }
    function lo(a, b, c) {
        t && (v.j(b, X, "medianBarycenterCrossingReduction:unfixedLayer"), v.j(c, X, "medianBarycenterCrossingReduction:direction"));
        for (var d = Pn(a, b), e = a.Xc[b], g = Eo(a, b, c), i = Do(a, b, c), c = 0; c < e; c++) - 1 === i[c] && (i[c] = d[c].I),
        -1 === g[c] && (g[c] = d[c].I);
        for (var j = h,
        k; j;) {
            j = p;
            for (c = 0; c < e - 1; c++) if (g[c + 1] < g[c] || g[c + 1] === g[c] && i[c + 1] < i[c]) j = h,
            k = g[c],
            g[c] = g[c + 1],
            g[c + 1] = k,
            k = i[c],
            i[c] = i[c + 1],
            i[c + 1] = k,
            k = d[c],
            d[c] = d[c + 1],
            d[c + 1] = k
        }
        for (c = g = 0; c < e; c++) k = d[c],
        k.R = c,
        g += Qn(a, k, h),
        k.I = g,
        g += 1,
        g += Qn(a, k, p);
        ao(a, b, d)
    }
    function mo(a, b, c, d) {
        t && (v.j(b, X, "adjacentExchangeCrossingReductionBendStraighten:unfixedLayer"), v.j(c, X, "adjacentExchangeCrossingReductionBendStraighten:directionCR"), v.e(p, "boolean", X, "adjacentExchangeCrossingReductionBendStraighten:straighten"), v.j(d, X, "adjacentExchangeCrossingReductionBendStraighten:directionBS"));
        var d = Pn(a, b),
        e = a.Xc[b],
        c = Bo(a, b, c),
        g,
        i;
        i = [];
        for (g = 0; g < e; g++) i[g] = -1;
        var j;
        j = [];
        for (g = 0; g < e; g++) j[g] = -1;
        for (var k = p,
        l = h; l;) {
            l = p;
            for (g = 0; g < e - 1; g++) {
                var n = c[d[g].R * e + d[g + 1].R],
                r = c[d[g + 1].R * e + d[g].R],
                q = 0,
                u = 0,
                x = d[g].I,
                z = d[g + 1].I,
                C = Qn(a, d[g], h),
                G = Qn(a, d[g], p),
                H = Qn(a, d[g + 1], h),
                I = Qn(a, d[g + 1], p),
                C = x - C + H,
                G = z - G + I,
                M = d[g].tb.f;
                for (M.reset(); M.next();) if (I = M.value, I.ka && I.G.s === b) {
                    I = I.G;
                    for (H = 0; d[H] !== I;) H++;
                    H < g && (q += 2 * (g - H), u += 2 * (g + 1 - H));
                    H === g + 1 && (q += 1);
                    H > g + 1 && (q += 4 * (H - g), u += 4 * (H - (g + 1)))
                }
                M = d[g].rb.f;
                for (M.reset(); M.next();) if (I = M.value, I.ka && I.D.s === b) {
                    I = I.D;
                    for (H = 0; d[H] !== I;) H++;
                    H === g + 1 && (u += 1)
                }
                M = d[g + 1].tb.f;
                for (M.reset(); M.next();) if (I = M.value, I.ka && I.G.s === b) {
                    I = I.G;
                    for (H = 0; d[H] !== I;) H++;
                    H < g && (q += 2 * (g + 1 - H), u += 2 * (g - H));
                    H === g && (u += 1);
                    H > g + 1 && (q += 4 * (H - (g + 1)), u += 4 * (H - g))
                }
                M = d[g + 1].rb.f;
                for (M.reset(); M.next();) if (I = M.value, I.ka && I.D.s === b) {
                    I = I.D;
                    for (H = 0; d[H] !== I;) H++;
                    H === g && (q += 1)
                }
                var H = I = 0,
                M = i[d[g].R],
                T = j[d[g].R],
                la = i[d[g + 1].R],
                fa = j[d[g + 1].R]; - 1 !== M && (I += Math.abs(M - x), H += Math.abs(M - G)); - 1 !== T && (I += Math.abs(T - x), H += Math.abs(T - G)); - 1 !== la && (I += Math.abs(la - z), H += Math.abs(la - C)); - 1 !== fa && (I += Math.abs(fa - z), H += Math.abs(fa - C));
                if (u < q - 0.5 || u === q && r < n - 0.5 || u === q && r === n && H < I - 0.5) l = k = h,
                d[g].I = G,
                d[g + 1].I = C,
                n = d[g],
                d[g] = d[g + 1],
                d[g + 1] = n
            }
        }
        for (g = 0; g < e; g++) d[g].R = g;
        ao(a, b, d);
        return k
    }
    function so(a, b, c) {
        t && (v.j(b, X, "bendStraighten:unfixedLayer"), v.j(c, X, "bendStraighten:direction"));
        for (var d = p; Io(a, b, c);) d = h;
        return d
    }
    function Io(a, b, c) {
        t && (v.j(b, X, "shiftbendStraighten:unfixedLayer"), v.j(c, X, "shiftbendStraighten:direction"));
        var d, e = Pn(a, b),
        g = a.Xc[b],
        i = Do(a, b, -1);
        if (0 < c) for (d = 0; d < g; d++) i[d] = -1;
        var j = Do(a, b, 1);
        if (0 > c) for (d = 0; d < g; d++) j[d] = -1;
        for (var k = p,
        l = h; l;) {
            l = p;
            for (d = 0; d < g; d++) {
                var n = e[d].I,
                r = Qn(a, e[d], h),
                q = Qn(a, e[d], p),
                r = 0 > d - 1 || n - e[d - 1].I - 1 > r + Qn(a, e[d - 1], p) ? n - 1 : n,
                q = d + 1 >= g || e[d + 1].I - n - 1 > q + Qn(a, e[d + 1], h) ? n + 1 : n,
                u = 0,
                x = 0,
                z = 0,
                C,
                G,
                H,
                I;
                if (0 >= c) for (var M = e[d].tb.f; M.next();) C = M.value,
                C.ka && C.G.s !== b && (G = yo(C), H = C.Ce, I = C.ce, C = C.G.I, u += (Math.abs(n + I - (C + H)) + 1) * G, x += (Math.abs(r + I - (C + H)) + 1) * G, z += (Math.abs(q + I - (C + H)) + 1) * G);
                if (0 <= c) for (M = e[d].rb.f; M.next();) C = M.value,
                C.ka && C.D.s !== b && (G = yo(C), H = C.Ce, I = C.ce, C = C.D.I, u += (Math.abs(n + H - (C + I)) + 1) * G, x += (Math.abs(r + H - (C + I)) + 1) * G, z += (Math.abs(q + H - (C + I)) + 1) * G);
                I = H = G = 0;
                C = i[e[d].R];
                M = j[e[d].R]; - 1 !== C && (G += Math.abs(C - n), H += Math.abs(C - r), I += Math.abs(C - q)); - 1 !== M && (G += Math.abs(M - n), H += Math.abs(M - r), I += Math.abs(M - q));
                if (x < u || x === u && H < G) l = k = h,
                e[d].I = r;
                if (z < u || z === u && I < G) l = k = h,
                e[d].I = q
            }
        }
        ao(a, b, e);
        a.normalize();
        return k
    }
    function uo(a, b, c) {
        t && (v.j(b, X, "medianStraighten:unfixedLayer"), v.j(c, X, "medianStraighten:direction"));
        for (var d = Pn(a, b), e = a.Xc[b], g = Eo(a, b, c), i = [], c = 0; c < e; c++) i[c] = g[c];
        for (g = h; g;) {
            g = p;
            for (c = 0; c < e; c++) {
                var j = d[c].I,
                k = Qn(a, d[c], h),
                l = Qn(a, d[c], p),
                n = 0,
                r; - 1 === i[c] ? 0 === c && c === e - 1 ? n = j: 0 === c ? (r = d[c + 1].I, n = r - j === l + Qn(a, d[c + 1], h) ? j - 1 : j) : c === e - 1 ? (r = d[c - 1].I, n = j - r === k + Qn(a, d[c - 1], p) ? j + 1 : j) : (r = d[c - 1].I, k = r + Qn(a, d[c - 1], p) + k + 1, r = d[c + 1].I, l = r - Qn(a, d[c + 1], h) - l - 1, n = (k + l) / 2 | 0) : 0 === c && c === e - 1 ? n = i[c] : 0 === c ? (r = d[c + 1].I, l = r - Qn(a, d[c + 1], h) - l - 1, n = Math.min(i[c], l)) : c === e - 1 ? (r = d[c - 1].I, k = r + Qn(a, d[c - 1], p) + k + 1, n = Math.max(i[c], k)) : (r = d[c - 1].I, k = r + Qn(a, d[c - 1], p) + k + 1, r = d[c + 1].I, l = r - Qn(a, d[c + 1], h) - l - 1, k < i[c] && i[c] < l ? n = i[c] : k >= i[c] ? n = k: l <= i[c] && (n = l));
                n !== j && (g = h, d[c].I = n)
            }
        }
        ao(a, b, d);
        a.normalize()
    }
    function Jo(a, b) {
        t && (v.j(b, X, "packAux:column"), v.j(1, X, "packAux:direction"));
        for (var c = h,
        d = a.p.S.f,
        e; d.next();) {
            e = d.value;
            var g = Qn(a, e, h),
            i = Qn(a, e, p);
            if (e.I - g <= b && e.I + i >= b) {
                c = p;
                break
            }
        }
        g = p;
        if (c) for (d.reset(); d.next();) e = d.value,
        e.I > b && (e.I -= 1, g = h);
        return g
    }
    function Ko(a, b) {
        t && (v.j(b, X, "tightPackAux:column"), v.j(1, X, "tightPackAux:direction"));
        var c = b,
        c = b + 1,
        d, e = [],
        g = [];
        for (d = 0; d <= a.Na; d++) e[d] = p,
        g[d] = p;
        for (var i = a.p.S.f; i.next();) {
            d = i.value;
            var j = d.I - Qn(a, d, h),
            k = d.I + Qn(a, d, p);
            j <= b && k >= b && (e[d.s] = h);
            j <= c && k >= c && (g[d.s] = h)
        }
        j = h;
        c = p;
        for (d = 0; d <= a.Na; d++) j = j && !(e[d] && g[d]);
        if (j) for (i.reset(); i.next();) d = i.value,
        d.I > b && (d.I -= 1, c = h);
        return c
    }
    function vo(a, b) {
        t && v.j(b, X, "componentPack:direction");
        for (var c = 0; c <= a.ab; c++) for (; Jo(a, c););
        a.normalize();
        for (c = 0; c < a.ab; c++) for (; Ko(a, c););
        a.normalize();
        var d, e, g, i;
        if (0 < b) for (c = 0; c <= a.ab; c++) {
            d = ko(a);
            e = Co(a);
            for (g = e + 1; e < g;) g = e,
            Lo(a, c, 1),
            i = Co(a),
            i > e ? no(a, d) : i < e && (e = i, d = ko(a))
        }
        if (0 > b) for (c = a.ab; 0 <= c; c--) {
            d = ko(a);
            e = Co(a);
            for (g = e + 1; e < g;) g = e,
            Lo(a, c, -1),
            i = Co(a),
            i > e ? no(a, d) : i < e && (e = i, d = ko(a))
        }
        a.normalize()
    }
    function Lo(a, b, c) {
        t && (v.j(b, X, "componentPackAux:column"), v.j(c, X, "componentPackAux:direction"));
        a.gf = 0;
        for (var d = a.p.S.f,
        e; d.next();) d.value.vb = -1;
        if (0 < c) for (d.reset(); d.next();) e = d.value,
        e.I - Qn(a, e, h) <= b && (e.vb = a.gf);
        if (0 > c) for (d.reset(); d.next();) e = d.value,
        e.I + Qn(a, e, p) >= b && (e.vb = a.gf);
        a.gf++;
        for (d.reset(); d.next();) e = d.value,
        -1 === e.vb && (Go(a, e, a.gf, -1, h, h), a.gf++);
        b = [];
        for (e = 0; e < a.gf * a.gf; e++) b[e] = p;
        var g = [];
        for (e = 0; e < (a.Na + 1) * (a.ab + 1); e++) g[e] = -1;
        for (d.reset(); d.next();) {
            e = d.value;
            for (var i = e.s,
            j = Math.max(0, e.I - Qn(a, e, h)), k = Math.min(a.ab, e.I + Qn(a, e, p)); j <= k; j++) g[i * (a.ab + 1) + j] = e.vb
        }
        for (e = 0; e <= a.Na; e++) {
            if (0 < c) for (j = 0; j < a.ab; j++) - 1 !== g[e * (a.ab + 1) + j] && ( - 1 !== g[e * (a.ab + 1) + j + 1] && g[e * (a.ab + 1) + j] !== g[e * (a.ab + 1) + j + 1]) && (b[g[e * (a.ab + 1) + j] * a.gf + g[e * (a.ab + 1) + j + 1]] = h);
            if (0 > c) for (j = a.ab; 0 < j; j--) - 1 !== g[e * (a.ab + 1) + j] && ( - 1 !== g[e * (a.ab + 1) + j - 1] && g[e * (a.ab + 1) + j] !== g[e * (a.ab + 1) + j - 1]) && (b[g[e * (a.ab + 1) + j] * a.gf + g[e * (a.ab + 1) + j - 1]] = h)
        }
        g = [];
        for (e = 0; e < a.gf; e++) g[e] = h;
        i = new y("number");
        for (i.add(0); 0 !== i.count;) if (k = i.i[i.count - 1], i.qe(i.count - 1), g[k]) {
            g[k] = p;
            for (e = 0; e < a.gf; e++) b[k * a.gf + e] && i.lc(0, e)
        }
        if (0 < c) for (d.reset(); d.next();) e = d.value,
        g[e.vb] && (e.I -= 1);
        if (0 > c) for (d.reset(); d.next();) e = d.value,
        g[e.vb] && (e.I += 1)
    }
    X.prototype.commitLayout = X.prototype.su = function() {
        if (this.Nl) {
            var a, b;
            270 === this.Q ? (a = uc, b = Cc) : 90 === this.Q ? (a = Cc, b = uc) : 180 === this.Q ? (a = Ac, b = Bc) : (a = Bc, b = Ac);
            for (var c = this.p.Sb.f,
            d; c.next();) d = c.value.Ea,
            d !== m && (d.Ya = a, d.$a = b)
        }
        this.commitNodes();
        this.commitLinks()
    };
    X.prototype.commitNodes = X.prototype.Tx = function() {
        this.Dg = [];
        this.Sf = [];
        this.ye = [];
        this.Yc = [];
        for (var a = 0; a <= this.Na; a++) this.Dg[a] = 0,
        this.Sf[a] = 0,
        this.ye[a] = 0,
        this.Yc[a] = 0;
        for (var a = this.p.S.f,
        b, c; a.next();) b = a.value,
        c = b.s,
        this.Dg[c] = Math.max(this.Dg[c], zo(this, b, h)),
        this.Sf[c] = Math.max(this.Sf[c], zo(this, b, p));
        b = 0;
        for (var d = this.ld,
        e = 0; e <= this.Na; e++) c = d,
        0 >= this.Dg[e] + this.Sf[e] && (c = 0),
        0 < e && (b += c / 2),
        90 === this.Q || 0 === this.Q ? (b += this.Sf[e], this.ye[e] = b, b += this.Dg[e]) : (b += this.Dg[e], this.ye[e] = b, b += this.Sf[e]),
        e < this.Na && (b += c / 2),
        this.Yc[e] = b;
        d = this.Rc.copy();
        for (e = 0; e <= this.Na; e++) 270 === this.Q ? (this.ye[e] = d.y + this.ye[e], this.Yc[e] = d.y + this.Yc[e]) : 90 === this.Q ? (this.ye[e] = d.y + b - this.ye[e], this.Yc[e] = d.y + b - this.Yc[e]) : 180 === this.Q ? (this.ye[e] = d.x + this.ye[e], this.Yc[e] = d.x + this.Yc[e]) : (this.ye[e] = d.x + b - this.ye[e], this.Yc[e] = d.x + b - this.Yc[e]);
        for (a.reset(); a.next();) {
            b = a.value;
            c = b.s;
            var g = b.I | 0;
            270 === this.Q || 90 === this.Q ? (e = d.x + this.Vc * g, c = this.ye[c]) : (e = this.ye[c], c = d.y + this.Vc * g);
            b.za = e;
            b.Aa = c;
            b.Sh()
        }
    };
    X.prototype.commitLinks = X.prototype.Sx = function() {
        for (var a = this.p.Sb.f,
        b, c; a.next();) c = a.value.Ea,
        "undefined" !== typeof c && c !== m && (c.uk(), c.mn(), c.Th());
        for (a.reset(); a.next();) c = a.value.Ea,
        "undefined" !== typeof c && c !== m && Tl(c);
        for (a.reset(); a.next();) if (b = a.value, c = b.Ea) {
            c.uk();
            var d = c,
            e = d.ea,
            g = d.ia,
            i = d.Jc,
            j = d.sd;
            if (b.ka) {
                if (c.Ne === Pj && 4 === c.ba) {
                    b.ib && (d = e, e = g, g = d, d = i, i = j, j = d);
                    var k, l, n, r;
                    if (b.G.I === b.D.I) k = c.getLinkPoint(e, i, Zl(c), h, p, g, j).copy(),
                    l = c.getLinkPoint(g, j, $l(c), p, p, e, i).copy(),
                    n = new D((2 * k.x + l.x) / 3, (2 * k.y + l.y) / 3),
                    r = new D((k.x + 2 * l.x) / 3, (k.y + 2 * l.y) / 3),
                    c.mn(),
                    c.bd(k),
                    c.bd(n),
                    c.bd(r),
                    c.bd(l);
                    else {
                        d = b = p;
                        i !== m && Zl(c) === ac && (b = h);
                        j !== m && $l(c) === ac && (d = h);
                        if (b || d) k = c.h(0).copy(),
                        n = c.h(1).copy(),
                        r = c.h(2).copy(),
                        l = c.h(3).copy();
                        b && (90 === this.Q || 270 === this.Q ? (n.x = k.x, n.y = (k.y + l.y) / 2) : (n.x = (k.x + l.x) / 2, n.y = k.y), c.w(1, n), c.w(0, c.getLinkPoint(e, i, Zl(c), h, p, g, j).copy()));
                        d && (90 === this.Q || 270 === this.Q ? (r.x = l.x, r.y = (k.y + l.y) / 2) : (r.x = (k.x + l.x) / 2, r.y = l.y), c.w(2, r), c.w(3, c.getLinkPoint(g, j, $l(c), p, p, e, i).copy()))
                    }
                }
                c.Th()
            } else if (b.G.s === b.D.s) c.Th();
            else {
                var q = p,
                u = p,
                x, z = c.Fu + 1;
                if (Lg(c)) u = h,
                x = c.ba,
                4 < x && c.mb.removeRange(2, x - 3);
                else if (c.Ne === Pj) q = h,
                x = c.ba,
                4 < x && c.mb.removeRange(2, x - 3),
                z = 2;
                else {
                    x = c.ba;
                    var C = Zl(c) === ac,
                    G = $l(c) === ac;
                    2 < x && C && G ? c.mb.removeRange(1, x - 2) : 3 < x && C && !G ? c.mb.removeRange(1, x - 3) : 3 < x && !C && G ? c.mb.removeRange(2, x - 2) : 4 < x && (!C && !G) && c.mb.removeRange(2, x - 3)
                }
                x = b.G;
                var G = b.D,
                H;
                if (b.ib) {
                    for (; G !== m && x !== G;) {
                        H = C = m;
                        for (var I = G.tb.f; I.next() && !(M = I.value, M.Ea === b.Ea && (C = M.G, H = M.D, C.Fa === m)););
                        C !== x && (M = c.h(z - 1).copy(), I = new D(C.za, C.Aa), u ? 180 === this.Q || 0 === this.Q ? 2 === z ? (c.q(z++, new D(M.x, M.y)), c.q(z++, new D(M.x, I.y))) : (H = H !== m ? new D(H.za, H.Aa) : M.copy(), H.y !== I.y && (H = this.Yc[C.s - 1], c.q(z++, new D(H, M.y)), c.q(z++, new D(H, I.y)))) : 2 === z ? (c.q(z++, new D(M.x, M.y)), c.q(z++, new D(I.x, M.y))) : (H = H !== m ? new D(H.za, H.Aa) : M.copy(), H.x !== I.x && (H = this.Yc[C.s - 1], c.q(z++, new D(M.x, H)), c.q(z++, new D(I.x, H)))) : 2 === z ? q ? (H = Math.max(10, this.Dg[G.s]), T = Math.max(10, this.Sf[G.s]), 180 === this.Q ? (G = G.A.x, c.q(z++, new D(G - H, I.y)), c.q(z++, new D(G, I.y)), c.q(z++, new D(G + T, I.y))) : 90 === this.Q ? (G = G.A.y + G.A.height, c.q(z++, new D(I.x, G + T)), c.q(z++, new D(I.x, G)), c.q(z++, new D(I.x, G - H))) : 270 === this.Q ? (G = G.A.y, c.q(z++, new D(I.x, G - H)), c.q(z++, new D(I.x, G)), c.q(z++, new D(I.x, G + T))) : (G = G.A.x + G.A.width, c.q(z++, new D(G + T, I.y)), c.q(z++, new D(G, I.y)), c.q(z++, new D(G - H, I.y)))) : (c.q(z++, M), 180 === this.Q || 0 === this.Q ? c.q(z++, new D(M.x, I.y)) : c.q(z++, new D(I.x, M.y)), c.q(z++, new D(I.x, I.y))) : (H = Math.max(10, this.Dg[C.s]), T = Math.max(10, this.Sf[C.s]), 180 === this.Q ? (q && c.q(z++, new D(I.x - H, I.y)), c.q(z++, I), q && c.q(z++, new D(I.x + T, I.y))) : 90 === this.Q ? (q && c.q(z++, new D(I.x, I.y + T)), c.q(z++, I), q && c.q(z++, new D(I.x, I.y - H))) : 270 === this.Q ? (q && c.q(z++, new D(I.x, I.y - H)), c.q(z++, I), q && c.q(z++, new D(I.x, I.y + T))) : (q && c.q(z++, new D(I.x + T, I.y)), c.q(z++, I), q && c.q(z++, new D(I.x - H, I.y)))));
                        G = C
                    }
                    if (j === m || !$l(c).u(ac)) M = c.h(z - 1).copy(),
                    I = c.h(z).copy(),
                    u ? (C = this.Sf[x.s], 180 === this.Q || 0 === this.Q ? (u = M.y, u >= x.A.y && u <= x.A.bottom && (G = x.za + C, u = u < x.A.y + x.A.height / 2 ? x.A.y - this.Vc / 2 : x.A.bottom + this.Vc / 2, c.q(z++, new D(G, M.y)), c.q(z++, new D(G, u))), c.q(z++, new D(I.x, u))) : (u = M.x, u >= x.A.x && u <= x.A.right && (G = x.Aa + C, u = u < x.A.x + x.A.width / 2 ? x.A.x - this.Vc / 2 : x.A.right + this.Vc / 2, c.q(z++, new D(M.x, G)), c.q(z++, new D(u, G))), c.q(z++, new D(u, I.y))), c.q(z++, I)) : q ? (H = Math.max(10, this.Dg[x.s]), T = Math.max(10, this.Sf[x.s]), 180 === this.Q ? (G = x.A.x + x.A.width, c.w(z - 2, new D(G, M.y)), c.w(z - 1, new D(G + T, M.y))) : 90 === this.Q ? (G = x.A.y, c.w(z - 2, new D(M.x, G)), c.w(z - 1, new D(M.x, G - H))) : 270 === this.Q ? (G = x.A.y + x.A.height, c.w(z - 2, new D(M.x, G)), c.w(z - 1, new D(M.x, G + T))) : (G = x.A.x, c.w(z - 2, new D(G, M.y)), c.w(z - 1, new D(G - H, M.y)))) : (180 === this.Q || 0 === this.Q ? c.q(z++, new D(I.x, M.y)) : c.q(z++, new D(M.x, I.y)), c.q(z++, I))
                } else {
                    for (; x !== m && x !== G;) {
                        H = C = m;
                        x = x.rb.f;
                        for (var M; x.next() && !(M = x.value, M.Ea === b.Ea && (C = M.D, H = M.G, H.Fa !== m && (H = m), C.Fa === m)););
                        var T;
                        C !== G && (M = c.h(z - 1).copy(), I = new D(C.za, C.Aa), u ? 180 === this.Q || 0 === this.Q ? (H = H !== m ? new D(H.za, H.Aa) : M.copy(), H.y !== I.y && (H = this.Yc[C.s], 2 === z && (H = 0 === this.Q ? Math.max(H, M.x) : Math.min(H, M.x)), c.q(z++, new D(H, M.y)), c.q(z++, new D(H, I.y)))) : (H = H !== m ? new D(H.za, H.Aa) : M.copy(), H.x !== I.x && (H = this.Yc[C.s], 2 === z && (H = 90 === this.Q ? Math.max(H, M.y) : Math.min(H, M.y)), c.q(z++, new D(M.x, H)), c.q(z++, new D(I.x, H)))) : (H = Math.max(10, this.Dg[C.s]), T = Math.max(10, this.Sf[C.s]), 180 === this.Q ? (c.q(z++, new D(I.x + T, I.y)), q && c.q(z++, I), c.q(z++, new D(I.x - H, I.y))) : 90 === this.Q ? (c.q(z++, new D(I.x, I.y - H)), q && c.q(z++, I), c.q(z++, new D(I.x, I.y + T))) : 270 === this.Q ? (c.q(z++, new D(I.x, I.y + T)), q && c.q(z++, I), c.q(z++, new D(I.x, I.y - H))) : (c.q(z++, new D(I.x - H, I.y)), q && c.q(z++, I), c.q(z++, new D(I.x + T, I.y)))));
                        x = C
                    }
                    u && (M = c.h(z - 1).copy(), I = c.h(z).copy(), 180 === this.Q || 0 === this.Q ? M.y !== I.y && (H = 0 === this.Q ? Math.min(Math.max((I.x + M.x) / 2, this.Yc[G.s]), I.x) : Math.max(Math.min((I.x + M.x) / 2, this.Yc[G.s]), I.x), c.q(z++, new D(H, M.y)), c.q(z++, new D(H, I.y))) : M.x !== I.x && (H = 90 === this.Q ? Math.min(Math.max((I.y + M.y) / 2, this.Yc[G.s]), I.y) : Math.max(Math.min((I.y + M.y) / 2, this.Yc[G.s]), I.y), c.q(z++, new D(M.x, H)), c.q(z++, new D(I.x, H))))
                }
                d !== m && q && (i !== m && (Zb(Zl(c)) && (d = c.h(0).copy(), q = c.h(2).copy(), d.u(q) || c.w(1, new D((d.x + q.x) / 2, (d.y + q.y) / 2))), c.w(0, c.getLinkPoint(e, i, ac, h, p, g, j))), j !== m && (Zb($l(c)) && (d = c.h(c.ba - 1), q = c.h(c.ba - 3), d.u(q) || c.w(c.ba - 2, new D((d.x + q.x) / 2, (d.y + q.y) / 2))), c.w(c.ba - 1, c.getLinkPoint(g, j, ac, p, p, e, i))));
                c.Th();
                b.Sh()
            }
        }
        e = new y(U);
        for (a = this.p.Sb.f; a.next();) c = a.value.Ea,
        c !== m && (Lg(c) && !e.contains(c)) && e.add(c);
        if (0 < e.count) if (90 === this.Q || 270 === this.Q) {
            t && v.c(e, y, X, "adjustOverlapsH:routables");
            a = 0;
            c = new y(Mo);
            for (k = e.f; k.next();) if (g = k.value, g !== m && Lg(g)) for (e = 2; e < g.ba - 3; e++) i = g.h(e).copy(),
            j = g.h(e + 1).copy(),
            No(i.y, j.y) && !No(i.x, j.x) && (l = new Mo, l.s = Math.floor(i.y / 2), n = g.h(0).copy(), r = g.h(g.ba - 1).copy(), l.sb = n.x * n.x + n.y, l.ed = r.x * r.x + r.y, l.zd = Math.min(i.x, j.x), l.cd = Math.max(i.x, j.x), l.R = e, l.Ea = g, e + 2 < g.ba && (n = g.h(e - 1).copy(), r = g.h(e + 2).copy(), b = 0, n.y < i.y ? b = r.y < i.y ? 3 : i.x < j.x ? 2 : 1 : n.y > i.y && (b = r.y > i.y ? 0 : j.x < i.x ? 2 : 1), l.lh = b), c.add(l));
            if (1 < c.count) {
                c.sort(this.iD);
                for (k = 0; k < c.count;) {
                    e = c.i[k].s;
                    for (l = k + 1; l < c.count && c.i[l].s === e;) l++;
                    if (1 < l - k) for (g = k; g < l;) {
                        e = c.i[g].cd;
                        for (n = k + 1; n < l && c.i[n].zd < e;) e = Math.max(e, c.i[n].cd),
                        n++;
                        i = n - g;
                        if (1 < i) {
                            c.eo(this.dv, g, g + i);
                            j = 1;
                            r = c.i[g].ed;
                            for (e = g; e < n; e++) b = c.i[e],
                            b.ed !== r && (j++, r = b.ed);
                            c.eo(this.hD, g, g + i);
                            q = 1;
                            r = c.i[g].sb;
                            for (e = g; e < n; e++) b = c.i[e],
                            b.sb !== r && (q++, r = b.sb);
                            j < q ? (d = p, q = j, r = c.i[g].ed, c.eo(this.dv, g, g + i)) : (d = h, r = c.i[g].sb);
                            z = 0;
                            for (e = g; e < n; e++) {
                                b = c.i[e];
                                if ((d ? b.sb: b.ed) !== r) z++,
                                r = d ? b.sb: b.ed;
                                g = b.Ea;
                                i = g.h(b.R).copy();
                                j = g.h(b.R + 1).copy();
                                u = 4 * (z - (q - 1) / 2);
                                if (g.Ze !== Qf || Oo(i.x, i.y + u, j.x, j.y + u)) a++,
                                g.uk(),
                                g.w(b.R, new D(i.x, i.y + u)),
                                g.w(b.R + 1, new D(j.x, j.y + u)),
                                g.Th()
                            }
                        }
                        g = n
                    }
                    k = l
                }
            }
        } else {
            t && v.c(e, y, X, "adjustOverlapsV:routables");
            a = 0;
            c = new y(Mo);
            for (k = e.f; k.next();) if (g = k.value, g !== m && Lg(g)) for (e = 2; e < g.ba - 3; e++) i = g.h(e).copy(),
            j = g.h(e + 1).copy(),
            No(i.x, j.x) && !No(i.y, j.y) && (l = new Mo, l.s = Math.floor(i.x / 2), n = g.h(0).copy(), r = g.h(g.ba - 1).copy(), l.sb = n.x + n.y * n.y, l.ed = r.x + r.y * r.y, l.zd = Math.min(i.y, j.y), l.cd = Math.max(i.y, j.y), l.R = e, l.Ea = g, e + 2 < g.ba && (n = g.h(e - 1).copy(), r = g.h(e + 2).copy(), b = 0, n.x < i.x ? b = r.x < i.x ? 3 : i.y < j.y ? 2 : 1 : n.x > i.x && (b = r.x > i.x ? 0 : j.y < i.y ? 2 : 1), l.lh = b), c.add(l));
            if (1 < c.count) {
                c.sort(this.iD);
                for (k = 0; k < c.count;) {
                    e = c.i[k].s;
                    for (l = k + 1; l < c.count && c.i[l].s === e;) l++;
                    if (1 < l - k) for (g = k; g < l;) {
                        e = c.i[g].cd;
                        for (n = k + 1; n < l && c.i[n].zd < e;) e = Math.max(e, c.i[n].cd),
                        n++;
                        i = n - g;
                        if (1 < i) {
                            c.eo(this.dv, g, g + i);
                            j = 1;
                            r = c.i[g].ed;
                            for (e = g; e < n; e++) b = c.i[e],
                            b.ed !== r && (j++, r = b.ed);
                            c.eo(this.hD, g, g + i);
                            q = 1;
                            r = c.i[g].sb;
                            for (e = g; e < n; e++) b = c.i[e],
                            b.sb !== r && (q++, r = b.sb);
                            j < q ? (d = p, q = j, r = c.i[g].ed, c.eo(this.dv, g, g + i)) : (d = h, r = c.i[g].sb);
                            z = 0;
                            for (e = g; e < n; e++) {
                                b = c.i[e];
                                if ((d ? b.sb: b.ed) !== r) z++,
                                r = d ? b.sb: b.ed;
                                g = b.Ea;
                                i = g.h(b.R).copy();
                                j = g.h(b.R + 1).copy();
                                u = 4 * (z - (q - 1) / 2);
                                if (g.Ze !== Qf || Oo(i.x + u, i.y, j.x + u, j.y)) a++,
                                g.uk(),
                                g.w(b.R, new D(i.x + u, i.y)),
                                g.w(b.R + 1, new D(j.x + u, j.y)),
                                g.Th()
                            }
                        }
                        g = n
                    }
                    k = l
                }
            }
        }
    };
    function Mo() {
        this.R = this.cd = this.zd = this.ed = this.sb = this.s = 0;
        this.Ea = m;
        this.lh = 0
    }
    v.pd(Mo, {
        ta: h,
        sb: h,
        ed: h,
        zd: h,
        cd: h,
        index: h,
        link: h,
        lh: h
    });
    X.prototype.iD = function(a, b) {
        return ! (a instanceof Mo) || !(b instanceof Mo) || a === b ? 0 : a.s < b.s ? -1 : a.s > b.s ? 1 : a.zd < b.zd ? -1 : a.zd > b.zd ? 1 : a.cd < b.cd ? -1 : a.cd > b.cd ? 1 : 0
    };
    X.prototype.hD = function(a, b) {
        return ! (a instanceof Mo) || !(b instanceof Mo) || a === b ? 0 : a.sb < b.sb ? -1 : a.sb > b.sb || a.lh < b.lh ? 1 : a.lh > b.lh || a.zd < b.zd ? -1 : a.zd > b.zd ? 1 : a.cd < b.cd ? -1 : a.cd > b.cd ? 1 : 0
    };
    X.prototype.dv = function(a, b) {
        return ! (a instanceof Mo) || !(b instanceof Mo) || a === b ? 0 : a.ed < b.ed ? -1 : a.ed > b.ed || a.lh < b.lh ? 1 : a.lh > b.lh || a.zd < b.zd ? -1 : a.zd > b.zd ? 1 : a.cd < b.cd ? -1 : a.cd > b.cd ? 1 : 0
    };
    function No(a, b) {
        t && (v.j(a, X, "isApprox:a"), v.j(b, X, "isApprox:b"));
        var c = a - b;
        return - 1 < c && 1 > c
    }
    function Oo(a, b, c, d) {
        t && (v.j(a, X, "isUnoccupied2:px"), v.j(b, X, "isUnoccupied2:py"), v.j(c, X, "isUnoccupied2:qx"), v.j(d, X, "isUnoccupied2:qy"));
        return h
    }
    function Pn(a, b) {
        var c, d = a.Xc[b];
        if (d >= a.Uf.length) {
            c = [];
            var e;
            for (e = 0; e < a.Uf.length; e++) c[e] = a.Uf[e];
            a.Uf = c
        }
        "undefined" === typeof a.Uf[d] || a.Uf[d] === m ? c = [] : (c = a.Uf[d], a.Uf[d] = m);
        var d = a.Zp[b],
        g;
        for (e = 0; e < d.length; e++) g = d[e],
        g instanceof Ao && (c[g.R] = g);
        return c
    }
    function ao(a, b, c) {
        a.Uf[a.Xc[b]] = c
    }
    v.a(X, "layerSpacing", X.prototype.Jr);
    v.defineProperty(X, {
        Jr: "layerSpacing"
    },
    s("ld"),
    function(a) {
        this.ld !== a && ("number" === typeof a && 0 <= a) && (this.ld = a, this.r())
    });
    v.a(X, "columnSpacing", X.prototype.bF);
    v.defineProperty(X, {
        bF: "columnSpacing"
    },
    s("Vc"),
    function(a) {
        this.Vc !== a && ("number" === typeof a && 0 <= a) && (this.Vc = a, this.r())
    });
    v.a(X, "direction", X.prototype.direction);
    v.defineProperty(X, {
        direction: "direction"
    },
    s("Q"),
    function(a) {
        this.Q !== a && "number" === typeof a && (this.Q = a, this.r())
    });
    v.a(X, "cycleRemoveOption", X.prototype.tB);
    v.defineProperty(X, {
        tB: "cycleRemoveOption"
    },
    s("em"),
    function(a) {
        if (this.em !== a && (t && v.c(a, na, yn, "cycleRemoveOption"), a === zn || a === tn)) this.em = a,
        this.r()
    });
    v.a(X, "layeringOption", X.prototype.pC);
    v.defineProperty(X, {
        pC: "layeringOption"
    },
    s("zm"),
    function(a) {
        if (this.zm !== a && (t && v.c(a, na, yn, "layeringOption"), a === un || a === En || a === Gn)) this.zm = a,
        this.r()
    });
    v.a(X, "initializeOption", X.prototype.hC);
    v.defineProperty(X, {
        hC: "initializeOption"
    },
    s("tm"),
    function(a) {
        if (this.tm !== a && (t && v.c(a, na, yn, "initializeOption"), a === vn || a === Nn || a === Ln)) this.tm = a,
        this.r()
    });
    v.a(X, "iterations", X.prototype.WF);
    v.defineProperty(X, {
        WF: "iterations"
    },
    s("Tk"),
    function(a) {
        t && v.j(a, yn, "iterations");
        this.Tk !== a && ("number" === typeof a && 0 <= a) && (this.Tk = a, this.r())
    });
    v.a(X, "aggressiveOption", X.prototype.YA);
    v.defineProperty(X, {
        YA: "aggressiveOption"
    },
    s("Xl"),
    function(a) {
        if (this.Xl !== a && (t && v.c(a, na, yn, "cycleRemoveOption"), a === oo || a === wn || a === po)) this.Xl = a,
        this.r()
    });
    v.a(X, "packOption", X.prototype.mG);
    v.defineProperty(X, {
        mG: "packOption"
    },
    s("Fh"),
    function(a) {
        this.Fh !== a && ("number" === typeof a && 0 <= a && 8 > a) && (this.Fh = a, this.r())
    });
    v.a(X, "setsPortSpots", X.prototype.Nl);
    v.defineProperty(X, {
        Nl: "setsPortSpots"
    },
    s("Ig"),
    function(a) {
        this.Ig !== a && "boolean" === typeof a && (this.Ig = a, this.r())
    });
    v.m(X, {
        MJ: "maxLayer"
    },
    s("Na"));
    v.m(X, {
        KJ: "maxIndex"
    },
    s("it"));
    v.m(X, {
        JJ: "maxColumn"
    },
    s("ab"));
    v.m(X, {
        SJ: "minIndexLayer"
    },
    s("Rp"));
    v.m(X, {
        LJ: "maxIndexLayer"
    },
    s("Ae"));
    var tn;
    X.CycleDepthFirst = tn = v.l(X, "CycleDepthFirst", 0);
    var zn;
    X.CycleGreedy = zn = v.l(X, "CycleGreedy", 1);
    var un;
    X.LayerOptimalLinkLength = un = v.l(X, "LayerOptimalLinkLength", 0);
    var En;
    X.LayerLongestPathSink = En = v.l(X, "LayerLongestPathSink", 1);
    var Gn;
    X.LayerLongestPathSource = Gn = v.l(X, "LayerLongestPathSource", 2);
    var vn;
    X.InitDepthFirstOut = vn = v.l(X, "InitDepthFirstOut", 0);
    var Nn;
    X.InitDepthFirstIn = Nn = v.l(X, "InitDepthFirstIn", 1);
    var Ln;
    X.InitNaive = Ln = v.l(X, "InitNaive", 2);
    var oo;
    X.AggressiveNone = oo = v.l(X, "AggressiveNone", 0);
    var wn;
    X.AggressiveLess = wn = v.l(X, "AggressiveLess", 1);
    var po;
    X.AggressiveMore = po = v.l(X, "AggressiveMore", 2);
    X.PackNone = 0;
    var qo;
    X.PackExpand = qo = 1;
    var ro;
    X.PackStraighten = ro = 2;
    var to;
    X.PackMedian = to = 4;
    var xn;
    X.PackAll = xn = 7;
    function yn() {
        Gm.call(this)
    }
    v.H("LayeredDigraphNetwork", yn);
    v.pa(yn, Gm);
    yn.prototype.createVertex = yn.prototype.Ki = function() {
        return new Ao
    };
    yn.prototype.createEdge = yn.prototype.pn = function() {
        return new Jn
    };
    function Ao() {
        Km.call(this);
        this.R = this.I = this.s = -1;
        this.ka = p;
        this.vb = this.mm = this.xj = NaN;
        this.xi = m;
        this.Ck = 0;
        this.Mw = this.Nw = f
    }
    v.H("LayeredDigraphVertex", Ao);
    v.pa(Ao, Km);
    v.a(Ao, "layer", Ao.prototype.ta);
    v.defineProperty(Ao, {
        ta: "layer"
    },
    s("s"), ba("s"));
    v.a(Ao, "column", Ao.prototype.ic);
    v.defineProperty(Ao, {
        ic: "column"
    },
    s("I"), ba("I"));
    v.a(Ao, "index", Ao.prototype.index);
    v.defineProperty(Ao, {
        index: "index"
    },
    s("R"), ba("R"));
    v.a(Ao, "valid", Ao.prototype.valid);
    v.defineProperty(Ao, {
        valid: "valid"
    },
    s("ka"), ba("ka"));
    v.a(Ao, "discover", Ao.prototype.nF);
    v.defineProperty(Ao, {
        nF: "discover"
    },
    s("xj"), ba("xj"));
    v.a(Ao, "finish", Ao.prototype.finish);
    v.defineProperty(Ao, {
        finish: "finish"
    },
    s("mm"), ba("mm"));
    v.a(Ao, "component", Ao.prototype.cF);
    v.defineProperty(Ao, {
        cF: "component"
    },
    s("vb"), ba("vb"));
    v.a(Ao, "near", Ao.prototype.jG);
    v.defineProperty(Ao, {
        jG: "near"
    },
    s("xi"),
    function(a) {
        a !== m && v.c(a, Ao, Ao, "layeredDigraphVertex");
        this.xi = a
    });
    function Jn() {
        Lm.call(this);
        this.ap = this.ib = this.ka = p;
        this.Fe = this.De = NaN;
        this.ce = this.$G = 0
    }
    v.H("LayeredDigraphEdge", Jn);
    v.pa(Jn, Lm);
    v.a(Jn, "valid", Jn.prototype.valid);
    v.defineProperty(Jn, {
        valid: "valid"
    },
    s("ka"), ba("ka"));
    v.a(Jn, "rev", Jn.prototype.rev);
    v.defineProperty(Jn, {
        rev: "rev"
    },
    s("ib"), ba("ib"));
    v.a(Jn, "forest", Jn.prototype.zF);
    v.defineProperty(Jn, {
        zF: "forest"
    },
    s("ap"), ba("ap"));
    v.a(Jn, "portFromPos", Jn.prototype.oG);
    v.defineProperty(Jn, {
        oG: "portFromPos"
    },
    s("De"), ba("De"));
    v.a(Jn, "portToPos", Jn.prototype.qG);
    v.defineProperty(Jn, {
        qG: "portToPos"
    },
    s("Fe"), ba("Fe"));
    v.a(Jn, "portFromColOffset", Jn.prototype.nG);
    v.defineProperty(Jn, {
        nG: "portFromColOffset"
    },
    s("Ce"), ba("Ce"));
    v.a(Jn, "portToColOffset", Jn.prototype.pG);
    v.defineProperty(Jn, {
        pG: "portToColOffset"
    },
    s("ce"), ba("ce"));
    function W() {
        Mh.call(this);
        this.tc = new y(S);
        this.hc = Po;
        this.Lq = Qo;
        this.Cc = Ro;
        this.$e = (new sb(10, 10)).freeze();
        this.V = new Y;
        this.U = new Y
    }
    v.H("TreeLayout", W);
    v.pa(W, Mh);
    W.prototype.cloneProtected = W.prototype.jb = function(a) {
        Mh.prototype.jb.call(this, a);
        a.hc = this.hc;
        a.Lq = this.Lq;
        a.Cc = this.Cc;
        a.$e = this.$e.B();
        So(a.V, this.V);
        So(a.U, this.U)
    };
    W.prototype.createNetwork = W.prototype.vu = function() {
        var a = new To;
        Hm(a, this);
        return a
    };
    W.prototype.makeNetwork = W.prototype.cG = function(a) {
        var b = this.createNetwork();
        a instanceof A ? (Uo(this, b, a.pk, h), Uo(this, b, a.links, h)) : a instanceof mf ? Uo(this, b, a.mc, p) : a.f && Uo(this, b, a.f, p);
        return b
    };
    function Uo(a, b, c, d) {
        for (c = c.f; c.next();) {
            var e = c.value;
            if (e instanceof S && e.jr() && "Comment" !== e.od && (!d || e.Hr)) e.Ui || (e instanceof mf && e.xb === m ? Uo(a, b, e.mc, p) : b.an(e))
        }
        for (c.reset(); c.next();) if (e = c.value, e instanceof U && e.jr() && "Comment" !== e.od && (!d || e.Hr)) {
            var g = e.ea,
            a = e.ia;
            if (! (g === m || a === m || g === a) && "Comment" !== g.od && "Comment" !== a.od) g = b.Du(g),
            a = b.Du(a),
            g !== m && a !== m && b.El(g, a, e)
        }
    }
    W.prototype.doLayout = W.prototype.pr = function(a) {
        this.Lc === m && (this.Lc = this.makeNetwork(a));
        this.tc === m && (this.tc = new y(S));
        this.Qd !== Vo && (this.Rc = Jm(this, this.Rc));
        if (0 < this.p.S.count) {
            this.p.yu();
            for (var b = this.p.S.f; b.next();) a = b.value,
            a.Fj = p,
            a.Uk = 0,
            a.hb = m,
            a.Gb = [];
            for (var c = this.tc.f; c.next();) b = c.value,
            a = this.p.je(b),
            a === m && this.tc.remove(b);
            if (0 === this.tc.length) {
                for (a = this.p.S.f; a.next();) switch (b = a.value, this.hc) {
                case Po:
                    0 === b.tb.count && this.tc.add(b.Fa);
                    break;
                case Wo:
                    0 === b.rb.count && this.tc.add(b.Fa);
                    break;
                default:
                    v.g("Unhandled path value " + this.hc.toString())
                }
                if (0 === this.tc.count) {
                    a = 999999;
                    b = m;
                    for (c = this.p.S.f; c.next();) {
                        var d = c.value;
                        switch (this.hc) {
                        case Po:
                            d.tb.count < a && (a = d.tb.count, b = d);
                            break;
                        case Wo:
                            d.rb.count < a && (a = d.rb.count, b = d);
                            break;
                        default:
                            v.g("Unhandled path value " + this.hc.toString())
                        }
                    }
                    b !== m && this.tc.add(b.Fa)
                }
            }
            for (c = this.tc.f; c.next();) b = c.value,
            a = this.p.je(b),
            a !== m && !a.Fj && (a.Fj = h, Xo(this, a));
            for (a = this.tc.f; a.next();) b = this.p.je(a.value),
            Yo(this, b);
            for (a = this.tc.f; a.next();) b = this.p.je(a.value),
            Zo(this, b);
            for (a = this.tc.f; a.next();) $o(this, this.p.je(a.value));
            for (a = this.p.S.f; a.next();) this.SA(a.value);
            for (a = this.tc.f; a.next();) ap(this, this.p.je(a.value));
            if (this.Cc === Vo) for (a = this.tc.f; a.next();) c = a.value,
            b = this.p.je(c),
            d = c.position,
            c = d.x,
            d = d.y,
            isFinite(c) || (c = 0),
            isFinite(d) || (d = 0),
            bp(this, b, c, d);
            else {
                d = this.Rc.copy();
                for (a = this.tc.f; a.next();) if (c = a.value, b = this.p.je(c), b !== m) switch (bp(this, b, d.x + b.ra.x, d.y + b.ra.y), this.Cc) {
                case Ro:
                    d.y += b.Ga.height + this.$e.height;
                    break;
                case cp:
                    d.x += b.Ga.width + this.$e.width;
                    break;
                default:
                    v.g("Unhandled arrangement value " + this.Cc.toString())
                }
                d.freeze()
            }
            this.updateParts()
        }
        this.tc = this.Lc = m;
        this.Ue = h
    };
    function Xo(a, b) {
        t && v.c(b, Y, W, "walkTree:v");
        if (b !== m) {
            var c, d, e;
            switch (a.hc) {
            case Po:
                if (0 < b.rb.count) {
                    c = new y(Y);
                    for (d = b.mF; d.next();) e = d.value,
                    dp(a, b, e) && c.add(e);
                    0 < c.count && (b.Gb = c.Df())
                }
                break;
            case Wo:
                if (0 < b.tb.count) {
                    c = new y(Y);
                    for (d = b.IG; d.next();) e = d.value,
                    dp(a, b, e) && c.add(e);
                    0 < c.count && (b.Gb = c.Df())
                }
                break;
            default:
                v.g("Unhandled path value" + a.hc.toString())
            }
            d = b.Gb;
            var g = d.length;
            for (c = 0; c < g; c++) e = d[c],
            e.Fj = h,
            e.Uk = b.Uk + 1,
            e.hb = b,
            a.tc.remove(e.Fa);
            for (c = 0; c < g; c++) e = d[c],
            Xo(a, e)
        }
    }
    function dp(a, b, c) {
        t && v.c(b, Y, W, "walkOK:v");
        t && v.c(c, Y, W, "walkOK:c");
        if (c.Fj) {
            var d;
            t && v.c(c, Y, W, "isAncestor:a");
            t && v.c(b, Y, W, "isAncestor:b");
            if (b === m) d = p;
            else {
                for (d = b.hb; d !== m && d !== c;) d = d.hb;
                d = d === c
            }
            if (d || c.Uk > b.Uk) return p;
            a.removeChild(c.hb, c)
        }
        return h
    }
    W.prototype.removeChild = function(a, b) {
        t && v.c(a, Y, W, "removeChild:p");
        t && v.c(b, Y, W, "removeChild:c");
        if (a !== m && b !== m) {
            var c = a.Gb,
            d = 0,
            e;
            for (e = 0; e < c.length; e++) c[e] === b && d++;
            if (0 < d) {
                var d = Array(c.length - d),
                g = 0;
                for (e = 0; e < c.length; e++) c[e] !== b && (d[g++] = c[e]);
                a.Gb = d
            }
        }
    };
    function Yo(a, b) {
        t && v.c(b, Y, W, "initializeTree:v");
        if (b !== m) {
            t && v.c(b, Y, W, "initializeTreeVertexValues:v");
            var c = ep(a, b);
            So(b, c);
            if (b.hb !== m && b.hb.ja === fp) {
                for (var c = b.Qa,
                d = b.hb.Gb,
                e = 0; e < d.length && b !== d[e];) e++;
                0 === e % 2 ? e !== d.length - 1 && (c = 90 === c ? 180 : 180 === c ? 270 : 270 === c ? 180 : 270) : c = 90 === c ? 0 : 180 === c ? 90 : 270 === c ? 0 : 90;
                b.Qa = c
            }
            d = b.Fa;
            d !== m && (c = d.na.width, d = d.na.height, b.width = c, b.height = d, b.Gu = c / 2, b.Hu = d / 2);
            b.Fj = h;
            b.ja === fp && gp(b);
            for (var c = 0,
            d = b.ol,
            e = 0,
            g = b.Gb,
            i = g.length,
            j = 0; j < i; j++) {
                var k = g[j];
                Yo(a, k);
                c += k.Ls + 1;
                d = Math.max(d, k.ht);
                e = Math.max(e, k.Ah)
            }
            b.Ls = c;
            b.ht = d;
            b.Ah = 0 < d ? e + 1 : 0
        }
    }
    function ep(a, b) {
        t && v.c(b, Y, W, "mom:v");
        switch (a.Lq) {
        default:
        case Qo:
            return b.hb !== m ? b.hb: a.V;
        case hp:
            return b.hb === m ? a.V: b.hb.hb === m ? a.U: b.hb;
        case ip:
            if (b.hb !== m) return b.hb.hb !== m ? b.hb.hb: a.U;
        case jp:
            var c = h;
            if (0 === b.ol) c = p;
            else for (var d = b.Gb,
            e = d.length,
            g = 0; g < e; g++) if (0 < d[g].ol) {
                c = p;
                break
            }
            return c && b.hb !== m ? a.U: b.hb !== m ? b.hb: a.V
        }
    }
    function Zo(a, b) {
        t && v.c(b, Y, W, "assignTree:v");
        if (b !== m) {
            t && v.c(b, Y, W, "assignTreeVertexValues:v");
            for (var c = b.Gb,
            d = c.length,
            e = 0; e < d; e++) Zo(a, c[e])
        }
    }
    function $o(a, b) {
        t && v.c(b, Y, W, "sortTree:v");
        if (b !== m) {
            b.ja !== fp && gp(b);
            for (var c = b.Gb,
            d = c.length,
            e = 0; e < d; e++) $o(a, c[e])
        }
    }
    function gp(a) {
        t && v.c(a, Y, W, "sortTreeVertexChildren:v");
        switch (a.bc) {
        case kp:
            break;
        case lp:
            a.Gb.reverse();
            break;
        case mp:
            a.Gb.sort(a.Zb);
            break;
        case np:
            a.Gb.sort(a.Zb);
            a.Gb.reverse();
            break;
        default:
            v.g("Unhandled sorting value " + a.bc.toString())
        }
    }
    W.prototype.SA = function(a) {
        t && v.c(a, Y, W, "addComments:v");
        var b = a.Wb,
        c = a.hb,
        d = 0,
        e = op,
        e = p;
        c !== m && (d = c.Wb, e = c.ja, e = pp(e));
        var b = 90 === b || 270 === b,
        d = 90 === d || 270 === d,
        c = 0 === a.ol,
        g = new E,
        i = g.width,
        g = g.height,
        j = 0,
        k = a.hd;
        if (a.Fa !== m) for (var l = a.Fa.MB(); l.next();) {
            var n = l.value;
            "Comment" === n.od && n.eb() && (a.jd === m && (a.jd = []), a.jd.push(n), n.Yh(), n = n.na, b && !c || !e && !d && c || e && d && c ? (i = Math.max(i, n.width), g += n.height + Math.abs(j)) : (i += n.width + Math.abs(j), g = Math.max(g, n.height)), j = k)
        }
        a.jd !== m && (b && !c || !e && !d && c || e && d && c ? (i += Math.abs(a.Yb), g = Math.max(0, g - a.height)) : (g += Math.abs(a.Yb), i = Math.max(0, i - a.width)), a.lb = new E(0, 0, a.A.width + i, a.A.height + g))
    };
    function pp(a) {
        return a === qp || a === fp || a === rp || a === sp
    }
    function tp(a) {
        return a === qp || a === fp
    }
    function up(a) {
        t && v.c(a, Y, W, "isLeftSideBus:v");
        var b = a.hb;
        if (b !== m) {
            var c = b.pb;
            if (pp(c)) {
                if (tp(c)) {
                    b = b.children;
                    for (c = 0; c < b.length && a !== b[c];) c++;
                    return 0 === c % 2
                }
                if (c === rp) return h
            }
        }
        return p
    }
    function ap(a, b) {
        t && v.c(b, Y, W, "layoutTree:v");
        if (b !== m) {
            var c = b.Gb,
            d = c.length,
            e, g;
            for (g = 0; g < d; g++) e = c[g],
            ap(a, e);
            switch (b.Kf) {
            case vp:
                wp(a, b);
                break;
            case xp:
                if (b.ja === fp) wp(a, b);
                else if (t && v.c(b, Y, W, "layoutTreeBlock:v"), 0 === b.ol) e = b.hb,
                c = p,
                d = 0,
                g = op,
                e !== m && (d = e.Wb, g = e.ja, c = pp(g)),
                e = up(b),
                b.M = new D(0, 0),
                b.Ga = new sb(b.width, b.height),
                b.ra = b.hb !== m && b.jd !== m && ((180 === d || 270 === d) && !c || e) ? 180 === d && !c || (90 === d || 270 === d) && e ? new D(b.width - 2 * b.z.x, 0) : new D(0, b.height - 2 * b.z.y) : new D(0, 0),
                b.Dp = m,
                b.qq = m;
                else {
                    var i = yp(b),
                    c = 90 === i || 270 === i,
                    j = 0,
                    k,
                    l,
                    n = b.Gb,
                    r = n.length;
                    for (k = 0; k < r; k++) l = n[k],
                    j = Math.max(j, c ? l.Ga.width: l.Ga.height);
                    var q = b.ja;
                    e = q === zp;
                    var u = q === Ap,
                    x = pp(q),
                    z = Math.max(0, b.Hf),
                    d = Bp(b),
                    C = b.ad,
                    G = Cp(b),
                    H = b.de,
                    I = 0;
                    if (e || u || b.Vj || b.Wj && 1 === b.Ah) I = Math.max(0, b.Qc);
                    e = b.width;
                    g = b.height;
                    var M = 0,
                    T = 0,
                    la = 0,
                    fa = m,
                    Ca = m,
                    ra = new sb(0, 0),
                    va = 0,
                    Ja = 0,
                    jb = 0,
                    eb = 0,
                    wb = 0,
                    mb = 0;
                    l = 0;
                    x && !tp(q) && 135 < i && n.reverse();
                    if (tp(q)) if (1 < r) for (k = 0; k < r; k++) 0 === k % 2 && k !== r - 1 ? mb = Math.max(mb, c ? n[k].Ga.width: n[k].Ga.height) : 0 !== k % 2 && (l = Math.max(l, c ? n[k].Ga.width: n[k].Ga.height));
                    else 1 === r && (mb = c ? n[0].Ga.width: n[0].Ga.height);
                    var Xa;
                    if (x) {
                        switch (q) {
                        case qp:
                            k = 135 > i ? Dp(b, n, mb, M, T) : Ep(b, n, mb, M, T);
                            mb = k[0];
                            M = k[1];
                            T = k[2];
                            break;
                        case rp:
                            for (k = 0; k < r; k++) l = n[k],
                            Xa = l.Ga,
                            fa = 0 === eb ? 0 : H,
                            c ? (l.M = new D(j - Xa.width, Ja + fa), M = Math.max(M, Xa.width), T = Math.max(T, Ja + fa + Xa.height), Ja += fa + Xa.height) : (l.M = new D(va + fa, j - Xa.height), M = Math.max(M, va + fa + Xa.width), T = Math.max(T, Xa.height), va += fa + Xa.width),
                            eb++;
                            break;
                        case sp:
                            for (k = 0; k < r; k++) l = n[k],
                            Xa = l.Ga,
                            fa = 0 === eb ? 0 : H,
                            c ? (l.M = new D(C / 2 + b.z.x, Ja + fa), M = Math.max(M, Xa.width), T = Math.max(T, Ja + fa + Xa.height), Ja += fa + Xa.height) : (l.M = new D(va + fa, C / 2 + b.z.y), M = Math.max(M, va + fa + Xa.width), T = Math.max(T, Xa.height), va += fa + Xa.width),
                            eb++
                        }
                        fa = [];
                        Ca = [];
                        c ? (fa[0] = new D(0, 0), fa[1] = new D(0, T), Ca[0] = new D(M, 0)) : (fa[0] = new D(0, 0), fa[1] = new D(M, 0), Ca[0] = new D(0, T));
                        Ca[1] = new D(M, T)
                    } else for (var Eb, Ya = 0; Ya < r; Ya++) {
                        l = n[Ya];
                        Xa = l.Ga;
                        if (c) {
                            0 < z && (0 < eb && va + C + Xa.width > z) && (va < j && Fp(b, q, j - va, 0, wb, Ya - 1), jb++, eb = 0, wb = Ya, la = T, va = 0, Ja = 135 < i ? -T - H: T + H);
                            Gp(a, l, new D(0, Ja));
                            Eb = 0;
                            if (0 === eb) {
                                if (fa = l.Dp, Ca = l.qq, ra = Xa.copy(), fa === m || Ca === m || i !== yp(l)) fa = [],
                                Ca = [],
                                fa[0] = new D(0, 0),
                                fa[1] = new D(0, ra.height),
                                Ca[0] = new D(ra.width, 0),
                                Ca[1] = new D(ra.width, ra.height)
                            } else k = Mp(b, l, fa, Ca, ra.width, ra.height),
                            Eb = k[0],
                            fa = k[1],
                            Ca = k[2],
                            ra.width = k[3],
                            ra.height = k[4],
                            va < Xa.width && 0 > Eb && (Np(b, -Eb, 0, wb, Ya - 1), Op(fa, -Eb, 0), Op(Ca, -Eb, 0), Eb = 0);
                            l.M = new D(Eb, Ja);
                            M = Math.max(M, ra.width);
                            T = Math.max(T, la + (0 === jb ? 0 : H) + Xa.height);
                            va = ra.width
                        } else {
                            0 < z && (0 < eb && Ja + C + Xa.height > z) && (Ja < j && Fp(b, q, 0, j - Ja, wb, Ya - 1), jb++, eb = 0, wb = Ya, la = M, Ja = 0, va = 135 < i ? -M - H: M + H);
                            Gp(a, l, new D(va, 0));
                            Eb = 0;
                            if (0 === eb) {
                                if (fa = l.Dp, Ca = l.qq, ra = Xa.copy(), fa === m || Ca === m || i !== yp(l)) fa = [],
                                Ca = [],
                                fa[0] = new D(0, 0),
                                fa[1] = new D(ra.width, 0),
                                Ca[0] = new D(0, ra.height),
                                Ca[1] = new D(ra.width, ra.height)
                            } else k = Mp(b, l, fa, Ca, ra.width, ra.height),
                            Eb = k[0],
                            fa = k[1],
                            Ca = k[2],
                            ra.width = k[3],
                            ra.height = k[4],
                            Ja < Xa.height && 0 > Eb && (Np(b, 0, -Eb, wb, Ya - 1), Op(fa, 0, -Eb), Op(Ca, 0, -Eb), Eb = 0);
                            l.M = new D(va, Eb);
                            T = Math.max(T, ra.height);
                            M = Math.max(M, la + (0 === jb ? 0 : H) + Xa.width);
                            Ja = ra.height
                        }
                        eb++
                    }
                    0 < jb && (c ? (T += Math.max(0, d), va < M && Fp(b, q, M - va, 0, wb, r - 1), 0 < I && (u || Np(b, I, 0, 0, r - 1), M += I)) : (M += Math.max(0, d), Ja < T && Fp(b, q, 0, T - Ja, wb, r - 1), 0 < I && (u || Np(b, 0, I, 0, r - 1), T += I)));
                    j = new D(0, 0);
                    switch (q) {
                    case Pp:
                        c ? j.x += M / 2 - b.z.x - G / 2 : j.y += T / 2 - b.z.y - G / 2;
                        break;
                    case op:
                        0 < jb ? c ? j.x += M / 2 - b.z.x - G / 2 : j.y += T / 2 - b.z.y - G / 2 : c ? (k = n[0].M.x + n[0].ra.x, u = n[r - 1].M.x + n[r - 1].ra.x + 2 * n[r - 1].z.x, j.x += (u + k) / 2 - b.z.x - G / 2) : (k = n[0].M.y + n[0].ra.y, u = n[r - 1].M.y + n[r - 1].ra.y + 2 * n[r - 1].z.y, j.y += (u + k) / 2 - b.z.y - G / 2);
                        break;
                    case zp:
                        c ? (j.x -= G, M += G) : (j.y -= G, T += G);
                        break;
                    case Ap:
                        c ? (j.x += M - b.width + G, M += G) : (j.y += T - b.height + G, T += G);
                        break;
                    case qp:
                        c ? j.x = 1 < r ? j.x + (mb + C / 2 - b.z.x) : j.x + (n[0].z.x - b.z.x + n[0].ra.x) : j.y = 1 < r ? j.y + (mb + C / 2 - b.z.y) : j.y + (n[0].z.y - b.z.y + n[0].ra.y);
                        break;
                    case rp:
                        c ? j.x += M + C / 2 - b.z.x: j.y += T + C / 2 - b.z.y;
                        break;
                    case sp:
                        break;
                    default:
                        v.g("Unhandled alignment value " + q.toString())
                    }
                    for (k = 0; k < r; k++) l = n[k],
                    l.M = c ? new D(l.M.x + l.ra.x - j.x, l.M.y + (135 < i ? (x ? -T: -l.Ga.height) + l.ra.y - d: g + d + l.ra.y)) : new D(l.M.x + (135 < i ? (x ? -M: -l.Ga.width) + l.ra.x - d: e + d + l.ra.x), l.M.y + l.ra.y - j.y);
                    n = new sb(0, 0);
                    x ? c ? (M = Qp(b, M, j.x), 0 > j.x && (j.x = 0), 135 < i && (j.y += T + d), T += g + d, q === sp && (n.width += C / 2 + b.z.x), n.height += g + d) : (135 < i && (j.x += M + d), M += e + d, T = Rp(b, T, j.y), 0 > j.y && (j.y = 0), q === sp && (n.height += C / 2 + b.z.y), n.width += e + d) : c ? (b.jd === m ? e > M && (q = Sp(q, e - M, 0), n.width = q[0], n.height = q[1], M = e, j.x = 0) : M = Qp(b, M, j.x), 0 > j.x && (n.width -= j.x, j.x = 0), 135 < i && (j.y += T + d), T = Math.max(Math.max(T, g), T + g + d), n.height += g + d) : (135 < i && (j.x += M + d), M = Math.max(Math.max(M, e), M + e + d), b.jd === m ? g > T && (q = Sp(q, 0, g - T), n.width = q[0], n.height = q[1], T = g, j.y = 0) : T = Rp(b, T, j.y), 0 > j.y && (n.height -= j.y, j.y = 0), n.width += e + d);
                    if (0 < jb) i = [],
                    q = [],
                    c ? (i[2] = new D(0, g + d), i[3] = new D(i[2].x, T), q[2] = new D(M, i[2].y), q[3] = new D(q[2].x, i[3].y)) : (i[2] = new D(e + d, 0), i[3] = new D(M, i[2].y), q[2] = new D(i[2].x, T), q[3] = new D(i[3].x, q[2].y));
                    else {
                        i = [];
                        q = [];
                        for (k = 0; k < fa.length; k++) x = fa[k],
                        i[k + 2] = new D(x.x + n.width, x.y + n.height);
                        for (k = 0; k < Ca.length; k++) x = Ca[k],
                        q[k + 2] = new D(x.x + n.width, x.y + n.height)
                    }
                    c ? (i[0] = new D(j.x, 0), i[1] = new D(i[0].x, g), i[2].y < i[1].y && (i[2].x > i[0].x ? i[2] = i[1].copy() : i[1] = i[2].copy()), i[3].y < i[2].y && (i[3].x > i[0].x ? i[3] = i[2].copy() : i[2] = i[3].copy()), q[0] = new D(j.x + e, 0), q[1] = new D(q[0].x, g), q[2].y < q[1].y && (q[2].x < q[0].x ? q[2] = q[1].copy() : q[1] = q[2].copy()), q[3].y < q[2].y && (q[3].x < q[0].x ? q[3] = q[2].copy() : q[2] = q[3].copy()), i[2].y -= d / 2, q[2].y -= d / 2) : (i[0] = new D(0, j.y), i[1] = new D(e, i[0].y), i[2].x < i[1].x && (i[2].y > i[0].y ? i[2] = i[1].copy() : i[1] = i[2].copy()), i[3].x < i[2].x && (i[3].y > i[0].y ? i[3] = i[2].copy() : i[2] = i[3].copy()), q[0] = new D(0, j.y + g), q[1] = new D(e, q[0].y), q[2].x < q[1].x && (q[2].y < q[0].y ? q[2] = q[1].copy() : q[1] = q[2].copy()), q[3].x < q[2].x && (q[3].y < q[0].y ? q[3] = q[2].copy() : q[2] = q[3].copy()), i[2].x -= d / 2, q[2].x -= d / 2);
                    b.Dp = i;
                    b.qq = q;
                    b.ra = j;
                    b.Ga = new sb(M, T)
                }
                break;
            default:
                v.g("Unhandled compaction value " + b.Kf.toString())
            }
        }
    }
    function wp(a, b) {
        t && v.c(b, Y, W, "layoutTreeNone:v");
        if (0 === b.ol) {
            var c = b.hb,
            d = p,
            e = 0,
            g = op;
            c !== m && (e = c.Wb, g = c.ja, d = pp(g));
            c = up(b);
            b.M = new D(0, 0);
            b.Ga = new sb(b.width, b.height);
            b.ra = b.hb !== m && b.jd !== m && ((180 === e || 270 === e) && !d || c) ? 180 === e && !d || (90 === e || 270 === e) && c ? new D(b.width - 2 * b.z.x, 0) : new D(0, b.height - 2 * b.z.y) : new D(0, 0)
        } else {
            var d = yp(b),
            e = 90 === d || 270 === d,
            i = 0,
            j,
            k,
            c = b.Gb,
            g = c.length,
            l;
            for (j = 0; j < g; j++) k = c[j],
            i = Math.max(i, e ? k.Ga.width: k.Ga.height);
            var n = b.ja,
            r = n === zp,
            q = n === Ap,
            u = pp(n),
            x = Math.max(0, b.Hf),
            z = Bp(b),
            C = b.ad,
            G = Cp(b),
            H = r || q ? 0 : G / 2,
            I = b.de,
            M = 0;
            if (r || q || b.Vj || b.Wj && 1 === b.Ah) M = Math.max(0, b.Qc);
            var r = b.width,
            T = b.height,
            la = 0,
            fa = 0,
            Ca = 0,
            ra = 0,
            va = 0,
            Ja = 0,
            jb = 0,
            eb = 0,
            wb = 0,
            mb = 0;
            u && !tp(n) && 135 < d && c.reverse();
            if (tp(n)) if (1 < g) for (j = 0; j < g; j++) k = c[j],
            l = k.Ga,
            0 === j % 2 && j !== g - 1 ? wb = Math.max(wb, (e ? l.width: l.height) + Tp(k) - C) : 0 !== j % 2 && (mb = Math.max(mb, (e ? l.width: l.height) + Tp(k) - C));
            else 1 === g && (wb = e ? c[0].Ga.width: c[0].Ga.height);
            if (u) switch (n) {
            case qp:
            case fp:
                k = [];
                k = 135 > d ? Dp(b, c, wb, la, fa) : Ep(b, c, wb, la, fa);
                wb = k[0];
                la = k[1];
                fa = k[2];
                break;
            case rp:
                for (j = 0; j < g; j++) k = c[j],
                l = k.Ga,
                x = 0 === jb ? 0 : I,
                e ? (k.M = new D(i - l.width, va + x), la = Math.max(la, l.width), fa = Math.max(fa, va + x + l.height), va += x + l.height) : (k.M = new D(ra + x, i - l.height), la = Math.max(la, ra + x + l.width), fa = Math.max(fa, l.height), ra += x + l.width),
                jb++;
                break;
            case sp:
                for (i = 0; i < g; i++) k = c[i],
                l = k.Ga,
                x = 0 === jb ? 0 : I,
                e ? (k.M = new D(C / 2 + b.z.x, va + x), la = Math.max(la, l.width), fa = Math.max(fa, va + x + l.height), va += x + l.height) : (k.M = new D(ra + x, C / 2 + b.z.y), la = Math.max(la, ra + x + l.width), fa = Math.max(fa, l.height), ra += x + l.width),
                jb++
            } else for (mb = 0; mb < g; mb++) k = c[mb],
            l = k.Ga,
            e ? (0 < x && (0 < jb && ra + C + l.width > x) && (ra < i && Fp(b, n, i - ra, 0, eb, mb - 1), Ja++, jb = 0, eb = mb, Ca = fa, ra = 0, va = 135 < d ? -fa - I: fa + I), j = 0 === jb ? H: C, Gp(a, k, new D(0, va)), k.M = new D(ra + j, va), la = Math.max(la, ra + j + l.width), fa = Math.max(fa, Ca + (0 === Ja ? 0 : I) + l.height), ra += j + l.width) : (0 < x && (0 < jb && va + C + l.height > x) && (va < i && Fp(b, n, 0, i - va, eb, mb - 1), Ja++, jb = 0, eb = mb, Ca = la, va = 0, ra = 135 < d ? -la - I: la + I), j = 0 === jb ? H: C, Gp(a, k, new D(ra, 0)), k.M = new D(ra, va + j), fa = Math.max(fa, va + j + l.height), la = Math.max(la, Ca + (0 === Ja ? 0 : I) + l.width), va += j + l.height),
            jb++;
            0 < Ja && (e ? (fa += Math.max(0, z), ra < la && Fp(b, n, la - ra, 0, eb, g - 1), 0 < M && (q || Np(b, M, 0, 0, g - 1), la += M)) : (la += Math.max(0, z), va < fa && Fp(b, n, 0, fa - va, eb, g - 1), 0 < M && (q || Np(b, 0, M, 0, g - 1), fa += M)));
            q = new D(0, 0);
            switch (n) {
            case Pp:
                e ? q.x += la / 2 - b.z.x - G / 2 : q.y += fa / 2 - b.z.y - G / 2;
                break;
            case op:
                0 < Ja ? e ? q.x += la / 2 - b.z.x - G / 2 : q.y += fa / 2 - b.z.y - G / 2 : e ? (n = c[0].M.x + c[0].ra.x, C = c[g - 1].M.x + c[g - 1].ra.x + 2 * c[g - 1].z.x, q.x += n + (C - n) / 2 - b.z.x - G / 2) : (n = c[0].M.y + c[0].ra.y, C = c[g - 1].M.y + c[g - 1].ra.y + 2 * c[g - 1].z.y, q.y += n + (C - n) / 2 - b.z.y - G / 2);
                break;
            case zp:
                e ? (q.x -= G, la += G) : (q.y -= G, fa += G);
                break;
            case Ap:
                e ? (q.x += la - b.width + G, la += G) : (q.y += fa - b.height + G, fa += G);
                break;
            case qp:
            case fp:
                e ? q.x = 1 < g ? q.x + (wb + C / 2 - b.z.x) : q.x + (c[0].z.x - b.z.x + c[0].ra.x) : q.y = 1 < g ? q.y + (wb + C / 2 - b.z.y) : q.y + (c[0].z.y - b.z.y + c[0].ra.y);
                break;
            case rp:
                e ? q.x += la + C / 2 - b.z.x: q.y += fa + C / 2 - b.z.y;
                break;
            case sp:
                break;
            default:
                v.g("Unhandled alignment value " + n.toString())
            }
            for (j = 0; j < g; j++) k = c[j],
            k.M = e ? new D(k.M.x + k.ra.x - q.x, k.M.y + (135 < d ? (u ? -fa: -k.Ga.height) + k.ra.y - z: T + z + k.ra.y)) : new D(k.M.x + (135 < d ? (u ? -la: -k.Ga.width) + k.ra.x - z: r + z + k.ra.x), k.M.y + k.ra.y - q.y);
            e ? (la = Qp(b, la, q.x), 0 > q.x && (q.x = 0), 135 < d && (q.y += fa + z), fa += T + z) : (135 < d && (q.x += la + z), la += r + z, fa = Rp(b, fa, q.y), 0 > q.y && (q.y = 0));
            b.ra = q;
            b.Ga = new sb(la, fa)
        }
    }
    function Dp(a, b, c, d, e) {
        t && v.c(a, Y, W, "layoutBusChildrenPosDir:v");
        var g = b.length,
        i, j;
        if (0 === g) return a = [c, d, e];
        if (1 === g) return i = b[0],
        j = i.Ga,
        d = j.width,
        e = j.height,
        a = [c, d, e];
        var k = a.ad,
        l = a.de,
        n = 90 === yp(a),
        r = 0,
        q = 0,
        u = 0,
        x = 0,
        z = 0,
        C = 0,
        x = C = 0,
        G,
        H;
        for (G = 0; G < g; G++) 0 !== G % 2 || 1 < g && G === g - 1 || (i = b[G], j = i.Ga, H = 0 === r ? 0 : l, n ? (C = Tp(i) - k, i.M = new D(c - (j.width + C), u + H), d = Math.max(d, j.width + C), e = Math.max(e, u + H + j.height), u += H + j.height) : (C = Tp(i) - k, i.M = new D(q + H, c - (j.height + C)), e = Math.max(e, j.height + C), d = Math.max(d, q + H + j.width), q += H + j.width), r++);
        r = 0;
        x = q;
        z = u;
        n ? (q = c + k, u = 0) : (q = 0, u = c + k);
        for (G = 0; G < g; G++) 0 !== G % 2 && (i = b[G], j = i.Ga, H = 0 === r ? 0 : l, n ? (C = Tp(i) - k, i.M = new D(q + C, u + H), d = Math.max(d, q + j.width + C), e = Math.max(e, u + H + j.height), u += H + j.height) : (C = Tp(i) - k, i.M = new D(q + H, u + C), d = Math.max(d, q + H + j.width), e = Math.max(e, u + j.height + C), q += H + j.width), r++);
        1 < g && 1 === g % 2 && (i = b[g - 1], j = i.Ga, n ? (b = Up(i, Math.max(Math.abs(z), Math.abs(u))), i.M = new D(c + k / 2 - i.z.x - i.ra.x, e + b), x = c + k / 2 - i.z.x - i.ra.x, d = Math.max(d, x + j.width), 0 > x && (d -= x), e = Math.max(e, Math.max(z, u) + b + j.height), 0 > i.M.x && (c = Vp(a, i.M.x, p, c, k))) : (b = Up(i, Math.max(Math.abs(x), Math.abs(q))), i.M = new D(d + b, c + k / 2 - i.z.y - i.ra.y), d = Math.max(d, Math.max(x, q) + b + j.width), x = c + k / 2 - i.z.y - i.ra.y, e = Math.max(e, x + j.height), 0 > x && (e -= x), 0 > i.M.y && (c = Vp(a, i.M.y, h, c, k))));
        return a = [c, d, e]
    }
    function Ep(a, b, c, d, e) {
        t && v.c(a, Y, W, "layoutBusChildrenNegDir:v");
        var g = b.length,
        i, j;
        if (0 === g) return a = [c, d, e];
        if (1 === g) return i = b[0],
        j = i.Ga,
        d = j.width,
        e = j.height,
        a = [c, d, e];
        var k = a.ad,
        l = a.de,
        n = 270 === yp(a),
        r = 0,
        q = 0,
        u = 0,
        x = 0,
        z = 0,
        C = 0,
        x = C = 0,
        G,
        H;
        for (G = 0; G < g; G++) 0 !== G % 2 || 1 < g && G === g - 1 || (i = b[G], j = i.Ga, H = 0 === r ? 0 : l, n ? (C = Tp(i) - k, u -= H + j.height, i.M = new D(c - (j.width + C), u), d = Math.max(d, j.width + C), e = Math.max(e, Math.abs(u))) : (C = Tp(i) - k, q -= H + j.width, i.M = new D(q, c - (j.height + C)), e = Math.max(e, j.height + C), d = Math.max(d, Math.abs(q))), r++);
        r = 0;
        x = q;
        z = u;
        n ? (q = c + k, u = 0) : (q = 0, u = c + k);
        for (G = 0; G < g; G++) 0 !== G % 2 && (i = b[G], j = i.Ga, H = 0 === r ? 0 : l, n ? (C = Tp(i) - k, u -= H + j.height, i.M = new D(q + C, u), d = Math.max(d, q + j.width + C), e = Math.max(e, Math.abs(u))) : (C = Tp(i) - k, q -= H + j.width, i.M = new D(q, u + C), e = Math.max(e, u + j.height + C), d = Math.max(d, Math.abs(q))), r++);
        1 < g && 1 === g % 2 && (i = b[g - 1], j = i.Ga, n ? (l = Up(i, Math.max(Math.abs(z), Math.abs(u))), i.M = new D(c + k / 2 - i.z.x - i.ra.x, -e - j.height - l), x = c + k / 2 - i.z.x - i.ra.x, d = Math.max(d, x + j.width), 0 > x && (d -= x), e = Math.max(e, Math.abs(Math.min(z, u)) + l + j.height), 0 > i.M.x && (c = Vp(a, i.M.x, p, c, k))) : (l = Up(i, Math.max(Math.abs(q), Math.abs(q))), i.M = new D( - d - j.width - l, c + k / 2 - i.z.y - i.ra.y), d = Math.max(d, Math.abs(Math.min(x, q)) + l + j.width), x = c + k / 2 - i.z.y - i.ra.y, e = Math.max(e, x + j.height), 0 > x && (e -= x), 0 > i.M.y && (c = Vp(a, i.M.y, h, c, k))));
        for (G = 0; G < g; G++) i = b[G],
        i.M = n ? new D(i.M.x, i.M.y + e) : new D(i.M.x + d, i.M.y);
        return a = [c, d, e]
    }
    function Tp(a) {
        t && v.c(a, Y, W, "fixRelativePostions:child");
        return a.parent === m ? 0 : a.parent.Tu
    }
    function Up(a) {
        t && v.c(a, Y, W, "fixRelativePostions:lastchild");
        return a.parent === m ? 0 : a.parent.cv
    }
    function Vp(a, b, c, d, e) {
        t && v.c(a, Y, W, "fixRelativePostions:v");
        for (var a = a.Gb,
        g = a.length,
        i = 0; i < g; i++) a[i].M = c ? new D(a[i].M.x, a[i].M.y - b) : new D(a[i].M.x - b, a[i].M.y);
        b = a[g - 1];
        return Math.max(d, c ? b.ra.y - b.z.y - e / 2 : b.ra.x - b.z.x - e / 2)
    }
    function Qp(a, b, c) {
        t && v.c(a, Y, W, "calculateSubwidth:v");
        switch (a.ja) {
        case op:
        case Pp:
            var d = b;
            c + a.width > d && (d = c + a.width);
            0 > c && (d -= c);
            return d;
        case zp:
            return a.width > b ? a.width: b;
        case Ap:
            return 2 * a.z.x > b ? a.width: b + a.width - 2 * a.z.x;
        case qp:
        case fp:
            return d = Math.min(0, c),
            c = Math.max(b, c + a.width),
            Math.max(a.width, c - d);
        case rp:
            return a.width - a.z.x + a.ad / 2 + b;
        case sp:
            return Math.max(a.width, a.z.x + a.ad / 2 + b);
        default:
            return b
        }
    }
    function Rp(a, b, c) {
        t && v.c(a, Y, W, "calculateSubheight:v");
        switch (a.ja) {
        case op:
        case Pp:
            var d = b;
            c + a.height > d && (d = c + a.height);
            0 > c && (d -= c);
            return d;
        case zp:
            return a.height > b ? a.height: b;
        case Ap:
            return 2 * a.z.y > b ? a.height: b + a.height - 2 * a.z.y;
        case qp:
        case fp:
            return d = Math.min(0, c),
            c = Math.max(b, c + a.height),
            Math.max(a.height, c - d);
        case rp:
            return a.height - a.z.y + a.ad / 2 + b;
        case sp:
            return Math.max(a.height, a.z.y + a.ad / 2 + b);
        default:
            return b
        }
    }
    function Sp(a, b, c) {
        t && v.c(a, na, W, "alignOffset:align");
        switch (a) {
        case Pp:
            b /= 2;
            c /= 2;
            break;
        case op:
            b /= 2;
            c /= 2;
            break;
        case zp:
            c = b = 0;
            break;
        case Ap:
            break;
        default:
            v.g("Unhandled alignment value " + a.toString())
        }
        return [b, c]
    }
    function Fp(a, b, c, d, e, g) {
        t && v.c(a, Y, W, "shiftRelPosAlign:v");
        t && v.c(b, na, W, "shiftRelPosAlign:align");
        b = Sp(b, c, d);
        Np(a, b[0], b[1], e, g)
    }
    function Np(a, b, c, d, e) {
        t && v.c(a, Y, W, "shiftRelPos:v");
        if (! (0 === b && 0 === c)) for (a = a.Gb; d <= e; d++) {
            var g = a[d];
            g.M.x += b;
            g.M.y += c
        }
    }
    function Gp(a, b, c) {
        t && v.c(b, Y, W, "recordMidPoints:v");
        t && v.c(c, D, W, "recordMidPoints:p");
        var d = b.hb;
        switch (a.hc) {
        case Po:
            for (a = b.tb; a.next();) b = a.value,
            b.G === d && (b.iq = c);
            break;
        case Wo:
            for (a = b.rb; a.next();) b = a.value,
            b.D === d && (b.iq = c);
            break;
        default:
            v.g("Unhandled path value " + a.hc.toString())
        }
    }
    function Op(a, b, c) {
        for (var d = 0; d < a.length; d++) a[d].x += b,
        a[d].y += c
    }
    function Mp(a, b, c, d, e, g) {
        t && v.c(a, Y, W, "mergeFringes:parent");
        t && v.c(b, Y, W, "mergeFringes:child");
        var i = yp(a),
        j = 90 === i || 270 === i,
        k = a.ad,
        l = e,
        n = g,
        r = b.Dp,
        e = b.qq,
        g = b.Ga,
        a = j ? Math.max(n, g.height) : Math.max(l, g.width);
        if (r === m || i !== yp(b)) r = [],
        e = [],
        j ? (r[0] = new D(0, 0), r[1] = new D(0, g.height), e[0] = new D(g.width, 0), e[1] = new D(e[0].x, r[1].y)) : (r[0] = new D(0, 0), r[1] = new D(g.width, 0), e[0] = new D(0, g.height), e[1] = new D(r[1].x, e[0].y));
        if (j) {
            b = j = l;
            i = r;
            l = 9999999;
            if (! (d === m || 2 > d.length || i === m || 2 > i.length)) for (var q = n = 0; n < d.length && q < i.length;) {
                var u = d[n],
                x = i[q].copy();
                x.x += j;
                var z = u;
                n + 1 < d.length && (z = d[n + 1]);
                var C = x;
                q + 1 < i.length && (C = i[q + 1].copy(), C.x += j);
                var G = l;
                u.y === x.y ? G = x.x - u.x: u.y > x.y && u.y < C.y ? G = x.x + (u.y - x.y) / (C.y - x.y) * (C.x - x.x) - u.x: x.y > u.y && x.y < z.y && (G = x.x - (u.x + (x.y - u.y) / (z.y - u.y) * (z.x - u.x)));
                G < l && (l = G);
                z.y <= u.y ? n++:C.y <= x.y ? q++:(z.y <= C.y && n++, C.y <= z.y && q++)
            }
            b -= l;
            b += k;
            k = r;
            r = b;
            if (c === m || 2 > c.length || k === m || 2 > k.length) c = m;
            else {
                i = [];
                for (l = j = q = 0; j < k.length && k[j].y < c[0].y;) n = k[j++].copy(),
                n.x += r,
                i[l++] = n;
                for (; q < c.length;) n = c[q++],
                i[l++] = n;
                for (c = c[c.length - 1].y; j < k.length && k[j].y <= c;) j++;
                for (; j < k.length && k[j].y > c;) n = k[j++].copy(),
                n.x += r,
                i[l++] = n;
                c = i
            }
            j = e;
            l = b;
            if (d === m || 2 > d.length || j === m || 2 > j.length) d = m;
            else {
                e = [];
                for (r = n = k = 0; k < d.length && d[k].y < j[0].y;) i = d[k++],
                e[r++] = i;
                for (; n < j.length;) i = j[n++].copy(),
                i.x += l,
                e[r++] = i;
                for (j = j[j.length - 1].y; k < d.length && d[k].y <= j;) k++;
                for (; k < d.length && d[k].y > j;) i = d[k++],
                e[r++] = i;
                d = e
            }
            e = Math.max(0, b) + g.width;
            g = a
        } else {
            b = j = n;
            i = r;
            l = 9999999;
            if (! (d === m || 2 > d.length || i === m || 2 > i.length)) for (q = n = 0; n < d.length && q < i.length;) u = d[n],
            x = i[q].copy(),
            x.y += j,
            z = u,
            n + 1 < d.length && (z = d[n + 1]),
            C = x,
            q + 1 < i.length && (C = i[q + 1].copy(), C.y += j),
            G = l,
            u.x === x.x ? G = x.y - u.y: u.x > x.x && u.x < C.x ? G = x.y + (u.x - x.x) / (C.x - x.x) * (C.y - x.y) - u.y: x.x > u.x && x.x < z.x && (G = x.y - (u.y + (x.x - u.x) / (z.x - u.x) * (z.y - u.y))),
            G < l && (l = G),
            z.x <= u.x ? n++:C.x <= x.x ? q++:(z.x <= C.x && n++, C.x <= z.x && q++);
            b -= l;
            b += k;
            k = r;
            r = b;
            if (c === m || 2 > c.length || k === m || 2 > k.length) c = m;
            else {
                i = [];
                for (l = j = q = 0; j < k.length && k[j].x < c[0].x;) n = k[j++].copy(),
                n.y += r,
                i[l++] = n;
                for (; q < c.length;) n = c[q++],
                i[l++] = n;
                for (c = c[c.length - 1].x; j < k.length && k[j].x <= c;) j++;
                for (; j < k.length && k[j].x > c;) n = k[j++].copy(),
                n.y += r,
                i[l++] = n;
                c = i
            }
            j = e;
            l = b;
            if (d === m || 2 > d.length || j === m || 2 > j.length) d = m;
            else {
                e = [];
                for (r = n = k = 0; k < d.length && d[k].x < j[0].x;) i = d[k++],
                e[r++] = i;
                for (; n < j.length;) i = j[n++].copy(),
                i.y += l,
                e[r++] = i;
                for (j = j[j.length - 1].x; k < d.length && d[k].x <= j;) k++;
                for (; k < d.length && d[k].x > j;) i = d[k++],
                e[r++] = i;
                d = e
            }
            e = a;
            g = Math.max(0, b) + g.height
        }
        return [b, c, d, e, g]
    }
    function bp(a, b, c, d) {
        t && v.c(b, Y, W, "assignAbsolutePositions:v");
        if (b !== m) {
            b.x = c;
            b.y = d;
            for (var b = b.Gb,
            e = b.length,
            g = 0; g < e; g++) {
                var i = b[g];
                bp(a, i, c + i.M.x, d + i.M.y)
            }
        }
    }
    W.prototype.commitLayout = W.prototype.su = function() {
        this.Yy();
        this.commitNodes();
        this.commitLinks()
    };
    W.prototype.commitNodes = W.prototype.Tx = function() {
        for (var a = this.p.S.f,
        b; a.next();) b = a.value,
        b.commit();
        for (a.reset(); a.next();) if (b = a.value, t && v.c(b, Y, W, "layoutComments:v"), b.jd !== m) {
            var c = b.lg.la,
            d = b.hb,
            e = f,
            e = f,
            e = b.Wb,
            g = 0,
            i = op,
            i = p;
            d !== m && (g = d.Wb, i = d.ja, i = pp(i));
            for (var d = 90 === e || 270 === e,
            j = 90 === g || 270 === g,
            k = 0 === b.ol,
            l = up(b), n = 0, r = b.jd, q = r.length, u = 0; u < q; u++) {
                var e = r[u],
                x = e.na,
                z;
                if (d && !k || !i && !j && k || i && j && k) {
                    if (135 < g && !i || j && l) if (0 <= b.Yb) {
                        e.location = new D(b.A.x - b.Yb - x.width, b.A.y + n);
                        for (z = e.Qe(); z.next();) e = z.value,
                        e.Ya = Ac,
                        e.$a = Bc
                    } else {
                        e.location = new D(b.A.x + 2 * b.z.x - b.Yb, b.A.y + n);
                        for (z = e.Qe(); z.next();) e = z.value,
                        e.Ya = Bc,
                        e.$a = Ac
                    } else if (0 <= b.Yb) {
                        e.location = new D(b.A.x + 2 * b.z.x + b.Yb, b.A.y + n);
                        for (z = e.Qe(); z.next();) e = z.value,
                        e.Ya = Bc,
                        e.$a = Ac
                    } else {
                        e.location = new D(b.A.x + b.Yb - x.width, b.A.y + n);
                        for (z = e.Qe(); z.next();) e = z.value,
                        e.Ya = Ac,
                        e.$a = Bc
                    }
                    n = 0 <= b.hd ? n + (x.height + b.hd) : n + (b.hd - x.height)
                } else {
                    if (135 < g && !i || !j && l) if (0 <= b.Yb) {
                        e.location = new D(b.A.x + n, b.A.y - b.Yb - x.height);
                        for (z = e.Qe(); z.next();) e = z.value,
                        e.Ya = kc,
                        e.$a = sc
                    } else {
                        e.location = new D(b.A.x + n, b.A.y + 2 * b.z.y - b.Yb);
                        for (z = e.Qe(); z.next();) e = z.value,
                        e.Ya = sc,
                        e.$a = kc
                    } else if (0 <= b.Yb) {
                        e.location = new D(b.A.x + n, b.A.y + 2 * b.z.y + b.Yb);
                        for (z = e.Qe(); z.next();) e = z.value,
                        e.Ya = sc,
                        e.$a = kc
                    } else {
                        e.location = new D(b.A.x + n, b.A.y + b.Yb - x.height);
                        for (z = e.Qe(); z.next();) e = z.value,
                        e.Ya = kc,
                        e.$a = sc
                    }
                    n = 0 <= b.hd ? n + (x.width + b.hd) : n + (b.hd - x.width)
                }
            }
            c = n - b.hd - (d ? c.height: c.width);
            if (this.path === Po) for (b = b.rb; b.next();) {
                if (e = b.value, (e = e.link) && e.Ze !== Qf) e.kk = 0 < c ? c: NaN
            } else for (b = b.tb; b.next();) if (e = b.value, (e = e.link) && e.Ze !== Qf) e.vk = 0 < c ? c: NaN
        }
    };
    W.prototype.commitLinks = W.prototype.Sx = function() {
        for (var a = this.p.Sb.f; a.next();) a.value.commit()
    };
    W.prototype.Yy = function() {
        for (var a = this.tc.f; a.next();) {
            var b = this.p.je(a.value);
            Wp(this, b)
        }
    };
    function Wp(a, b) {
        t && v.c(b, Y, W, "setPortSpotsTree:v");
        if (b !== m) {
            t && v.c(b, Y, W, "setPortSpots:v");
            var c = b.ja;
            if (pp(c)) {
                t && v.c(b, Y, W, "setPortSpotsBus:v");
                t && v.c(c, na, W, "setPortSpots:align");
                var d = a.hc === Po,
                e = yp(b),
                g;
                switch (e) {
                case 0:
                    g = Bc;
                    break;
                case 90:
                    g = sc;
                    break;
                case 180:
                    g = Ac;
                    break;
                default:
                    g = kc
                }
                var i, j, k, l = b.Gb,
                n = l.length;
                switch (c) {
                case qp:
                case fp:
                    for (c = 0; c < n; c++) if (i = l[c], j = d ? i.tb: i.rb, j.next(), k = j.value, k !== m && (k = k.Ea, k !== m)) {
                        i = 90 === e || 270 === e ? Ac: kc;
                        if (1 === n || c === n - 1 && 1 === n % 2) switch (e) {
                        case 0:
                            i = Ac;
                            break;
                        case 90:
                            i = kc;
                            break;
                        case 180:
                            i = Bc;
                            break;
                        default:
                            i = sc
                        } else 0 === c % 2 && (i = 90 === e || 270 === e ? Bc: sc);
                        d ? (b.aj && (k.Ya = g), b.$i && (k.$a = i)) : (b.aj && (k.Ya = i), b.$i && (k.$a = g))
                    }
                    break;
                case rp:
                    i = 90 === e || 270 === e ? Bc: sc;
                    for (j = d ? b.rb: b.tb; j.next();) k = j.value,
                    k = k.Ea,
                    k !== m && (d ? (b.aj && (k.Ya = g), b.$i && (k.$a = i)) : (b.aj && (k.Ya = i), b.$i && (k.$a = g)));
                    break;
                case sp:
                    i = 90 === e || 270 === e ? Ac: kc;
                    for (j = d ? b.rb: b.tb; j.next();) k = j.value,
                    k = k.Ea,
                    k !== m && (d ? (b.aj && (k.Ya = g), b.$i && (k.$a = i)) : (b.aj && (k.Ya = i), b.$i && (k.$a = g)))
                }
            } else if (d = yp(b), a.hc === Po) for (e = b.rb; e.next();) {
                if (g = e.value, g = g.Ea, g !== m) {
                    if (b.ag) if ($b(b.Ee)) switch (d) {
                    case 0:
                        g.Ya = Bc;
                        break;
                    case 90:
                        g.Ya = sc;
                        break;
                    case 180:
                        g.Ya = Ac;
                        break;
                    default:
                        g.Ya = kc
                    } else g.Ya = b.Ee;
                    if (b.$f) if ($b(b.ve)) switch (d) {
                    case 0:
                        g.$a = Ac;
                        break;
                    case 90:
                        g.$a = kc;
                        break;
                    case 180:
                        g.$a = Bc;
                        break;
                    default:
                        g.$a = sc
                    } else g.$a = b.ve
                }
            } else for (e = b.tb; e.next();) if (g = e.value, g = g.Ea, g !== m) {
                if (b.ag) if ($b(b.Ee)) switch (d) {
                case 0:
                    g.$a = Bc;
                    break;
                case 90:
                    g.$a = sc;
                    break;
                case 180:
                    g.$a = Ac;
                    break;
                default:
                    g.$a = kc
                } else g.$a = b.Ee;
                if (b.$f) if ($b(b.ve)) switch (d) {
                case 0:
                    g.Ya = Ac;
                    break;
                case 90:
                    g.Ya = kc;
                    break;
                case 180:
                    g.Ya = Bc;
                    break;
                default:
                    g.Ya = sc
                } else g.Ya = b.ve
            }
            d = b.Gb;
            e = d.length;
            for (g = 0; g < e; g++) Wp(a, d[g])
        }
    }
    function yp(a) {
        t && v.c(a, Y, W, "orthoAngle:v");
        a = a.Wb;
        return 45 >= a ? 0 : 135 >= a ? 90 : 225 >= a ? 180 : 315 >= a ? 270 : 0
    }
    function Bp(a) {
        t && v.c(a, Y, W, "computeLayerSpacing:v");
        var b = yp(a),
        b = 90 === b || 270 === b,
        c = a.ld;
        if (0 < a.Tf) var d = Math.min(1, a.Tf),
        c = c - (b ? a.height * d: a.width * d);
        if (c < (b ? -a.height: -a.width)) c = b ? -a.height: -a.width;
        return c
    }
    function Cp(a) {
        t && v.c(a, Y, W, "computeNodeIndent:v");
        var b = yp(a),
        b = 90 === b || 270 === b,
        c = a.Gg;
        if (0 < a.Xf) var d = Math.min(1, a.Xf),
        c = c + (b ? a.width * d: a.height * d);
        return c = Math.max(0, c)
    }
    v.a(W, "roots", W.prototype.BG);
    v.defineProperty(W, {
        BG: "roots"
    },
    s("tc"),
    function(a) {
        this.tc !== a && (this.tc = a, this.r())
    });
    v.a(W, "path", W.prototype.path);
    v.defineProperty(W, {
        path: "path"
    },
    s("hc"),
    function(a) {
        if (this.hc !== a && (t && v.c(a, na, W, "path"), a === Po || a === Wo)) this.hc = a,
        this.r()
    });
    v.a(W, "treeStyle", W.prototype.HD);
    v.defineProperty(W, {
        HD: "treeStyle"
    },
    s("Lq"),
    function(a) {
        if (this.Cc !== a && (t && v.c(a, na, W, "treeStyle"), a === Qo || a === ip || a === jp || a === hp)) this.Lq = a,
        this.r()
    });
    v.a(W, "arrangement", W.prototype.Qd);
    v.defineProperty(W, {
        Qd: "arrangement"
    },
    s("Cc"),
    function(a) {
        if (this.Cc !== a && (t && v.c(a, na, W, "arrangement"), a === Ro || a === cp || a === Vo)) this.Cc = a,
        this.r()
    });
    v.a(W, "arrangementSpacing", W.prototype.nu);
    v.defineProperty(W, {
        nu: "arrangementSpacing"
    },
    s("$e"),
    function(a) {
        this.$e.u(a) || (this.$e.Ra(a), this.r())
    });
    v.a(W, "rootDefaults", W.prototype.AG);
    v.defineProperty(W, {
        AG: "rootDefaults"
    },
    s("V"),
    function(a) {
        this.V !== a && (t && v.c(a, Y, W, "rootDefaults"), this.V = a, this.r())
    });
    v.a(W, "alternateDefaults", W.prototype.IE);
    v.defineProperty(W, {
        IE: "alternateDefaults"
    },
    s("U"),
    function(a) {
        this.U !== a && (t && v.c(a, Y, W, "alternateDefaults"), this.U = a, this.r())
    });
    v.a(W, "sorting", W.prototype.zf);
    v.defineProperty(W, {
        zf: "sorting"
    },
    function() {
        return this.V.bc
    },
    function(a) {
        if (this.V.bc !== a && (t && v.c(a, na, W, "sorting"), a === kp || a === lp || a === mp || np)) this.V.bc = a,
        this.r()
    });
    v.a(W, "comparer", W.prototype.Xg);
    v.defineProperty(W, {
        Xg: "comparer"
    },
    function() {
        return this.V.Zb
    },
    function(a) {
        this.V.Zb !== a && (t && v.e(a, "function", W, "comparer"), this.V.Zb = a, this.r())
    });
    v.a(W, "angle", W.prototype.Qa);
    v.defineProperty(W, {
        Qa: "angle"
    },
    function() {
        return this.V.Wb
    },
    function(a) {
        if (this.V.Wb !== a && (0 === a || 90 === a || 180 === a || 270 === a)) this.V.Wb = a,
        this.r()
    });
    v.a(W, "alignment", W.prototype.pb);
    v.defineProperty(W, {
        pb: "alignment"
    },
    function() {
        return this.V.ja
    },
    function(a) {
        this.V.ja !== a && (t && v.Va(a, W, W, "alignment"), this.V.ja = a, this.r())
    });
    v.a(W, "nodeIndent", W.prototype.Iy);
    v.defineProperty(W, {
        Iy: "nodeIndent"
    },
    function() {
        return this.V.Gg
    },
    function(a) {
        this.V.Gg !== a && 0 <= a && (this.V.Gg = a, this.r())
    });
    v.a(W, "nodeIndentPastParent", W.prototype.Jy);
    v.defineProperty(W, {
        Jy: "nodeIndentPastParent"
    },
    function() {
        return this.V.Xf
    },
    function(a) {
        this.V.Xf !== a && (0 <= a && 1 >= a) && (this.V.Xf = a, this.r())
    });
    v.a(W, "nodeSpacing", W.prototype.Tu);
    v.defineProperty(W, {
        Tu: "nodeSpacing"
    },
    function() {
        return this.V.ad
    },
    function(a) {
        this.V.ad !== a && (this.V.ad = a, this.r())
    });
    v.a(W, "layerSpacing", W.prototype.Jr);
    v.defineProperty(W, {
        Jr: "layerSpacing"
    },
    function() {
        return this.V.ld
    },
    function(a) {
        this.V.ld !== a && (this.V.ld = a, this.r())
    });
    v.a(W, "layerSpacingParentOverlap", W.prototype.yy);
    v.defineProperty(W, {
        yy: "layerSpacingParentOverlap"
    },
    function() {
        return this.V.Tf
    },
    function(a) {
        this.V.Tf !== a && (0 <= a && 1 >= a) && (this.V.Tf = a, this.r())
    });
    v.a(W, "compaction", W.prototype.tu);
    v.defineProperty(W, {
        tu: "compaction"
    },
    function() {
        return this.V.Kf
    },
    function(a) {
        if (this.V.Kf !== a && (t && v.c(a, na, W, "compaction"), a === vp || a === xp)) this.V.Kf = a,
        this.r()
    });
    v.a(W, "breadthLimit", W.prototype.Jx);
    v.defineProperty(W, {
        Jx: "breadthLimit"
    },
    function() {
        return this.V.Hf
    },
    function(a) {
        this.V.Hf !== a && 0 <= a && (this.V.Hf = a, this.r())
    });
    v.a(W, "rowSpacing", W.prototype.cv);
    v.defineProperty(W, {
        cv: "rowSpacing"
    },
    function() {
        return this.V.de
    },
    function(a) {
        this.V.de !== a && (this.V.de = a, this.r())
    });
    v.a(W, "rowIndent", W.prototype.Ry);
    v.defineProperty(W, {
        Ry: "rowIndent"
    },
    function() {
        return this.V.Qc
    },
    function(a) {
        this.V.Qc !== a && 0 <= a && (this.V.Qc = a, this.r())
    });
    v.a(W, "commentSpacing", W.prototype.Qx);
    v.defineProperty(W, {
        Qx: "commentSpacing"
    },
    function() {
        return this.V.hd
    },
    function(a) {
        this.V.hd !== a && (this.V.hd = a, this.r())
    });
    v.a(W, "commentMargin", W.prototype.Px);
    v.defineProperty(W, {
        Px: "commentMargin"
    },
    function() {
        return this.V.Yb
    },
    function(a) {
        this.V.Yb !== a && (this.V.Yb = a, this.r())
    });
    v.a(W, "setsPortSpot", W.prototype.aj);
    v.defineProperty(W, {
        aj: "setsPortSpot"
    },
    function() {
        return this.V.ag
    },
    function(a) {
        this.V.ag !== a && (this.V.ag = a, this.r())
    });
    v.a(W, "portSpot", W.prototype.Ny);
    v.defineProperty(W, {
        Ny: "portSpot"
    },
    function() {
        return this.V.Ee
    },
    function(a) {
        this.V.Ee.u(a) || (this.V.Ee = a, this.r())
    });
    v.a(W, "setsChildPortSpot", W.prototype.$i);
    v.defineProperty(W, {
        $i: "setsChildPortSpot"
    },
    function() {
        return this.V.$f
    },
    function(a) {
        this.V.$f !== a && (this.V.$f = a, this.r())
    });
    v.a(W, "childPortSpot", W.prototype.Nx);
    v.defineProperty(W, {
        Nx: "childPortSpot"
    },
    function() {
        return this.V.ve
    },
    function(a) {
        this.V.ve.u(a) || (this.V.ve = a, this.r())
    });
    v.a(W, "alternateSorting", W.prototype.TE);
    v.defineProperty(W, {
        TE: "alternateSorting"
    },
    function() {
        return this.U.bc
    },
    function(a) {
        if (this.U.bc !== a && (t && v.c(a, na, W, "alternateSorting"), a === kp || a === lp || a === mp || np)) this.U.bc = a,
        this.r()
    });
    v.a(W, "alternateComparer", W.prototype.GE);
    v.defineProperty(W, {
        GE: "alternateComparer"
    },
    function() {
        return this.U.Zb
    },
    function(a) {
        this.U.Zb !== a && (t && v.e(a, "function", W, "alternateComparer"), this.U.Zb = a, this.r())
    });
    v.a(W, "alternateAngle", W.prototype.AE);
    v.defineProperty(W, {
        AE: "alternateAngle"
    },
    function() {
        return this.U.Wb
    },
    function(a) {
        if (this.U.Wb !== a && (0 === a || 90 === a || 180 === a || 270 === a)) this.U.Wb = a,
        this.r()
    });
    v.a(W, "alternateAlignment", W.prototype.zE);
    v.defineProperty(W, {
        zE: "alternateAlignment"
    },
    function() {
        return this.U.ja
    },
    function(a) {
        this.U.ja !== a && (t && v.Va(a, W, W, "alternateAlignment"), this.U.ja = a, this.r())
    });
    v.a(W, "alternateNodeIndent", W.prototype.LE);
    v.defineProperty(W, {
        LE: "alternateNodeIndent"
    },
    function() {
        return this.U.Gg
    },
    function(a) {
        this.U.Gg !== a && 0 <= a && (this.U.Gg = a, this.r())
    });
    v.a(W, "alternateNodeIndentPastParent", W.prototype.ME);
    v.defineProperty(W, {
        ME: "alternateNodeIndentPastParent"
    },
    function() {
        return this.U.Xf
    },
    function(a) {
        this.U.Xf !== a && (0 <= a && 1 >= a) && (this.U.Xf = a, this.r())
    });
    v.a(W, "alternateNodeSpacing", W.prototype.NE);
    v.defineProperty(W, {
        NE: "alternateNodeSpacing"
    },
    function() {
        return this.U.ad
    },
    function(a) {
        this.U.ad !== a && (this.U.ad = a, this.r())
    });
    v.a(W, "alternateLayerSpacing", W.prototype.JE);
    v.defineProperty(W, {
        JE: "alternateLayerSpacing"
    },
    function() {
        return this.U.ld
    },
    function(a) {
        this.U.ld !== a && (this.U.ld = a, this.r())
    });
    v.a(W, "alternateLayerSpacingParentOverlap", W.prototype.KE);
    v.defineProperty(W, {
        KE: "alternateLayerSpacingParentOverlap"
    },
    function() {
        return this.U.Tf
    },
    function(a) {
        this.U.Tf !== a && (0 <= a && 1 >= a) && (this.U.Tf = a, this.r())
    });
    v.a(W, "alternateCompaction", W.prototype.FE);
    v.defineProperty(W, {
        FE: "alternateCompaction"
    },
    function() {
        return this.U.Kf
    },
    function(a) {
        if (this.U.Kf !== a && (t && v.c(a, na, W, "alternateCompaction"), a === vp || a === xp)) this.U.Kf = a,
        this.r()
    });
    v.a(W, "alternateBreadthLimit", W.prototype.BE);
    v.defineProperty(W, {
        BE: "alternateBreadthLimit"
    },
    function() {
        return this.U.Hf
    },
    function(a) {
        this.U.Hf !== a && 0 <= a && (this.U.Hf = a, this.r())
    });
    v.a(W, "alternateRowSpacing", W.prototype.QE);
    v.defineProperty(W, {
        QE: "alternateRowSpacing"
    },
    function() {
        return this.U.de
    },
    function(a) {
        this.U.de !== a && (this.U.de = a, this.r())
    });
    v.a(W, "alternateRowIndent", W.prototype.PE);
    v.defineProperty(W, {
        PE: "alternateRowIndent"
    },
    function() {
        return this.U.Qc
    },
    function(a) {
        this.U.Qc !== a && 0 <= a && (this.U.Qc = a, this.r())
    });
    v.a(W, "alternateCommentSpacing", W.prototype.EE);
    v.defineProperty(W, {
        EE: "alternateCommentSpacing"
    },
    function() {
        return this.U.hd
    },
    function(a) {
        this.U.hd !== a && (this.U.hd = a, this.r())
    });
    v.a(W, "alternateCommentMargin", W.prototype.DE);
    v.defineProperty(W, {
        DE: "alternateCommentMargin"
    },
    function() {
        return this.U.Yb
    },
    function(a) {
        this.U.Yb !== a && (this.U.Yb = a, this.r())
    });
    v.a(W, "alternateSetsPortSpot", W.prototype.SE);
    v.defineProperty(W, {
        SE: "alternateSetsPortSpot"
    },
    function() {
        return this.U.ag
    },
    function(a) {
        this.U.ag !== a && (this.U.ag = a, this.r())
    });
    v.a(W, "alternatePortSpot", W.prototype.OE);
    v.defineProperty(W, {
        OE: "alternatePortSpot"
    },
    function() {
        return this.U.Ee
    },
    function(a) {
        this.U.Ee.u(a) || (this.U.Ee = a, this.r())
    });
    v.a(W, "alternateSetsChildPortSpot", W.prototype.RE);
    v.defineProperty(W, {
        RE: "alternateSetsChildPortSpot"
    },
    function() {
        return this.U.$f
    },
    function(a) {
        this.U.$f !== a && (this.U.$f = a, this.r())
    });
    v.a(W, "alternateChildPortSpot", W.prototype.CE);
    v.defineProperty(W, {
        CE: "alternateChildPortSpot"
    },
    function() {
        return this.U.ve
    },
    function(a) {
        this.U.ve.u(a) || (this.U.ve = a, this.r())
    });
    var Po;
    W.PathDestination = Po = v.l(W, "PathDestination", 0);
    var Wo;
    W.PathSource = Wo = v.l(W, "PathSource", 1);
    var kp;
    W.SortingForwards = kp = v.l(W, "SortingForwards", 10);
    var lp;
    W.SortingReverse = lp = v.l(W, "SortingReverse", 11);
    var mp;
    W.SortingAscending = mp = v.l(W, "SortingAscending", 12);
    var np;
    W.SortingDescending = np = v.l(W, "SortingDescending", 13);
    var Pp;
    W.AlignmentCenterSubtrees = Pp = v.l(W, "AlignmentCenterSubtrees", 20);
    var op;
    W.AlignmentCenterChildren = op = v.l(W, "AlignmentCenterChildren", 21);
    var zp;
    W.AlignmentStart = zp = v.l(W, "AlignmentStart", 22);
    var Ap;
    W.AlignmentEnd = Ap = v.l(W, "AlignmentEnd", 23);
    var qp;
    W.AlignmentBus = qp = v.l(W, "AlignmentBus", 24);
    var fp;
    W.AlignmentBusBranching = fp = v.l(W, "AlignmentBusBranching", 25);
    var rp;
    W.AlignmentTopLeftBus = rp = v.l(W, "AlignmentTopLeftBus", 26);
    var sp;
    W.AlignmentBottomRightBus = sp = v.l(W, "AlignmentBottomRightBus", 27);
    var vp;
    W.CompactionNone = vp = v.l(W, "CompactionNone", 30);
    var xp;
    W.CompactionBlock = xp = v.l(W, "CompactionBlock", 31);
    var Qo;
    W.StyleLayered = Qo = v.l(W, "StyleLayered", 40);
    var jp;
    W.StyleLastParents = jp = v.l(W, "StyleLastParents", 41);
    var ip;
    W.StyleAlternating = ip = v.l(W, "StyleAlternating", 42);
    var hp;
    W.StyleRootOnly = hp = v.l(W, "StyleRootOnly", 43);
    var Ro;
    W.ArrangementVertical = Ro = v.l(W, "ArrangementVertical", 50);
    var cp;
    W.ArrangementHorizontal = cp = v.l(W, "ArrangementHorizontal", 51);
    var Vo;
    W.ArrangementFixedRoots = Vo = v.l(W, "ArrangementFixedRoots", 52);
    function To() {
        Gm.call(this)
    }
    v.H("TreeNetwork", To);
    v.pa(To, Gm);
    To.prototype.createVertex = To.prototype.Ki = function() {
        return new Y
    };
    To.prototype.createEdge = To.prototype.pn = function() {
        return new Xp
    };
    function Y() {
        Km.call(this);
        this.Fj = p;
        this.hb = m;
        this.Gb = [];
        this.Ah = this.ht = this.Ls = this.Uk = this.VG = 0;
        this.qq = this.Dp = this.jd = this.ra = this.Ga = this.M = m;
        this.Wj = this.Vj = this.ax = p;
        this.bc = kp;
        this.Zb = Pm;
        this.Wb = 0;
        this.ja = op;
        this.Xf = this.Gg = 0;
        this.ad = 20;
        this.ld = 50;
        this.Tf = 0;
        this.Kf = xp;
        this.Hf = 0;
        this.de = 25;
        this.hd = this.Qc = 10;
        this.Yb = 20;
        this.ag = h;
        this.Ee = ec;
        this.$f = h;
        this.ve = ec
    }
    v.H("TreeVertex", Y);
    v.pa(Y, Km);
    function So(a, b) {
        b !== m && (a.bc = b.bc, a.Zb = b.Zb, a.Wb = b.Wb, a.ja = b.ja, a.Gg = b.Gg, a.Xf = b.Xf, a.ad = b.ad, a.ld = b.ld, a.Tf = b.Tf, a.Kf = b.Kf, a.Hf = b.Hf, a.de = b.de, a.Qc = b.Qc, a.hd = b.hd, a.Yb = b.Yb, a.ag = b.ag, a.Ee = b.Ee, a.$f = b.$f, a.ve = b.ve)
    }
    v.a(Y, "initialized", Y.prototype.MF);
    v.defineProperty(Y, {
        MF: "initialized"
    },
    s("Fj"), ba("Fj"));
    v.a(Y, "parent", Y.prototype.parent);
    v.defineProperty(Y, {
        parent: "parent"
    },
    s("hb"), ba("hb"));
    v.a(Y, "children", Y.prototype.children);
    v.defineProperty(Y, {
        children: "children"
    },
    s("Gb"), ba("Gb"));
    v.m(Y, {
        ol: "childrenCount"
    },
    function() {
        return this.Gb.length
    });
    v.a(Y, "level", Y.prototype.$F);
    v.defineProperty(Y, {
        $F: "level"
    },
    s("Uk"), ba("Uk"));
    v.a(Y, "descendantCount", Y.prototype.lF);
    v.defineProperty(Y, {
        lF: "descendantCount"
    },
    s("Ls"), ba("Ls"));
    v.a(Y, "maxChildrenCount", Y.prototype.fG);
    v.defineProperty(Y, {
        fG: "maxChildrenCount"
    },
    s("ht"), ba("ht"));
    v.a(Y, "maxGenerationCount", Y.prototype.gG);
    v.defineProperty(Y, {
        gG: "maxGenerationCount"
    },
    s("Ah"), ba("Ah"));
    v.a(Y, "relativePosition", Y.prototype.tG);
    v.defineProperty(Y, {
        tG: "relativePosition"
    },
    s("M"),
    function(a) {
        v.c(a, D, Y, "relativePosition");
        this.M = a
    });
    v.a(Y, "subtreeSize", Y.prototype.NG);
    v.defineProperty(Y, {
        NG: "subtreeSize"
    },
    s("Ga"),
    function(a) {
        v.c(a, sb, Y, "subtreeSize");
        this.Ga = a
    });
    v.a(Y, "subtreeOffset", Y.prototype.MG);
    v.defineProperty(Y, {
        MG: "subtreeOffset"
    },
    s("ra"),
    function(a) {
        v.c(a, D, Y, "subtreeOffset");
        this.ra = a
    });
    v.a(Y, "comments", Y.prototype.Rx);
    v.defineProperty(Y, {
        Rx: "comments"
    },
    s("jd"), ba("jd"));
    v.a(Y, "sorting", Y.prototype.zf);
    v.defineProperty(Y, {
        zf: "sorting"
    },
    s("bc"), ba("bc"));
    v.a(Y, "comparer", Y.prototype.Xg);
    v.defineProperty(Y, {
        Xg: "comparer"
    },
    s("Zb"), ba("Zb"));
    v.a(Y, "angle", Y.prototype.Qa);
    v.defineProperty(Y, {
        Qa: "angle"
    },
    s("Wb"), ba("Wb"));
    v.a(Y, "alignment", Y.prototype.pb);
    v.defineProperty(Y, {
        pb: "alignment"
    },
    s("ja"), ba("ja"));
    v.a(Y, "nodeIndent", Y.prototype.Iy);
    v.defineProperty(Y, {
        Iy: "nodeIndent"
    },
    s("Gg"), ba("Gg"));
    v.a(Y, "nodeIndentPastParent", Y.prototype.Jy);
    v.defineProperty(Y, {
        Jy: "nodeIndentPastParent"
    },
    s("Xf"), ba("Xf"));
    v.a(Y, "nodeSpacing", Y.prototype.Tu);
    v.defineProperty(Y, {
        Tu: "nodeSpacing"
    },
    s("ad"), ba("ad"));
    v.a(Y, "layerSpacing", Y.prototype.Jr);
    v.defineProperty(Y, {
        Jr: "layerSpacing"
    },
    s("ld"), ba("ld"));
    v.a(Y, "layerSpacingParentOverlap", Y.prototype.yy);
    v.defineProperty(Y, {
        yy: "layerSpacingParentOverlap"
    },
    s("Tf"), ba("Tf"));
    v.a(Y, "compaction", Y.prototype.tu);
    v.defineProperty(Y, {
        tu: "compaction"
    },
    s("Kf"), ba("Kf"));
    v.a(Y, "breadthLimit", Y.prototype.Jx);
    v.defineProperty(Y, {
        Jx: "breadthLimit"
    },
    s("Hf"), ba("Hf"));
    v.a(Y, "rowSpacing", Y.prototype.cv);
    v.defineProperty(Y, {
        cv: "rowSpacing"
    },
    s("de"), ba("de"));
    v.a(Y, "rowIndent", Y.prototype.Ry);
    v.defineProperty(Y, {
        Ry: "rowIndent"
    },
    s("Qc"), ba("Qc"));
    v.a(Y, "commentSpacing", Y.prototype.Qx);
    v.defineProperty(Y, {
        Qx: "commentSpacing"
    },
    s("hd"), ba("hd"));
    v.a(Y, "commentMargin", Y.prototype.Px);
    v.defineProperty(Y, {
        Px: "commentMargin"
    },
    s("Yb"), ba("Yb"));
    v.a(Y, "setsPortSpot", Y.prototype.aj);
    v.defineProperty(Y, {
        aj: "setsPortSpot"
    },
    s("ag"), ba("ag"));
    v.a(Y, "portSpot", Y.prototype.Ny);
    v.defineProperty(Y, {
        Ny: "portSpot"
    },
    s("Ee"), ba("Ee"));
    v.a(Y, "setsChildPortSpot", Y.prototype.$i);
    v.defineProperty(Y, {
        $i: "setsChildPortSpot"
    },
    s("$f"), ba("$f"));
    v.a(Y, "childPortSpot", Y.prototype.Nx);
    v.defineProperty(Y, {
        Nx: "childPortSpot"
    },
    s("ve"), ba("ve"));
    v.a(Y, "routeFirstRow", Y.prototype.FG);
    v.defineProperty(Y, {
        FG: "routeFirstRow"
    },
    s("ax"), ba("ax"));
    v.a(Y, "routeAroundCentered", Y.prototype.DG);
    v.defineProperty(Y, {
        DG: "routeAroundCentered"
    },
    s("Vj"), ba("Vj"));
    v.a(Y, "routeAroundLastParent", Y.prototype.EG);
    v.defineProperty(Y, {
        EG: "routeAroundLastParent"
    },
    s("Wj"), ba("Wj"));
    function Xp() {
        Lm.call(this);
        this.iq = new D(0, 0)
    }
    v.H("TreeEdge", Xp);
    v.pa(Xp, Lm);
    Xp.prototype.commit = Xp.prototype.Sh = function() {
        var a = this.Ea;
        if (a !== m && a.Ze !== Qf) {
            var b = this.p.xb,
            c = m,
            d = m;
            switch (b.hc) {
            case Po:
                c = this.G;
                d = this.D;
                break;
            case Wo:
                c = this.D;
                d = this.G;
                break;
            default:
                v.g("Unhandled path value " + b.hc.toString())
            }
            if (! (c === m || d === m)) if (b = this.iq, 0 === b.x && 0 === b.y && !c.ax) {
                var e = c;
                t && v.c(e, Y, Xp, "adjustRouteForAngleChange:parent");
                t && v.c(d, Y, Xp, "adjustRouteForAngleChange:child");
                a = this.Ea;
                c = yp(e);
                b = yp(d);
                if (c !== b && (b = Bp(e), e = e.lb, d = d.lb, !(0 === c && d.left - e.right < b + 1 || 90 === c && d.top - e.bottom < b + 1 || 180 === c && e.left - d.right < b + 1 || 270 === c && e.top - d.bottom < b + 1))) {
                    Tl(a);
                    var d = a.Ne === Pj,
                    g = a.Ze === wh,
                    i = pp(this.G.ja);
                    a.uk();
                    0 === c ? (c = e.right + b / 2, d ? 4 === a.ba && (b = a.h(3).y, a.w(1, new D(c - 20, a.h(1).y)), a.q(2, new D(c - 20, b)), a.q(3, new D(c, b)), a.q(4, new D(c + 20, b)), a.w(5, new D(a.h(5).x, b))) : g ? i ? a.w(3, new D(a.h(2).x, a.h(4).y)) : 6 === a.ba && (a.w(2, new D(c, a.h(2).y)), a.w(3, new D(c, a.h(3).y))) : 4 === a.ba ? a.q(2, new D(c, a.h(2).y)) : 3 === a.ba ? a.w(1, new D(c, a.h(2).y)) : 2 === a.ba && a.q(1, new D(c, a.h(1).y))) : 90 === c ? (b = e.bottom + b / 2, d ? 4 === a.ba && (c = a.h(3).x, a.w(1, new D(a.h(1).x, b - 20)), a.q(2, new D(c, b - 20)), a.q(3, new D(c, b)), a.q(4, new D(c, b + 20)), a.w(5, new D(c, a.h(5).y))) : g ? i ? a.w(3, new D(a.h(2).x, a.h(4).y)) : 6 === a.ba && (a.w(2, new D(a.h(2).x, b)), a.w(3, new D(a.h(3).x, b))) : 4 === a.ba ? a.q(2, new D(a.h(2).x, b)) : 3 === a.ba ? a.w(1, new D(a.h(2).x, b)) : 2 === a.ba && a.q(1, new D(a.h(1).x, b))) : 180 === c ? (c = e.left - b / 2, d ? 4 === a.ba && (b = a.h(3).y, a.w(1, new D(c + 20, a.h(1).y)), a.q(2, new D(c + 20, b)), a.q(3, new D(c, b)), a.q(4, new D(c - 20, b)), a.w(5, new D(a.h(5).x, b))) : g ? i ? a.w(3, new D(a.h(2).x, a.h(4).y)) : 6 === a.ba && (a.w(2, new D(c, a.h(2).y)), a.w(3, new D(c, a.h(3).y))) : 4 === a.ba ? a.q(2, new D(c, a.h(2).y)) : 3 === a.ba ? a.w(1, new D(c, a.h(2).y)) : 2 === a.ba && a.q(1, new D(c, a.h(1).y))) : 270 === c && (b = e.top - b / 2, d ? 4 === a.ba && (c = a.h(3).x, a.w(1, new D(a.h(1).x, b + 20)), a.q(2, new D(c, b + 20)), a.q(3, new D(c, b)), a.q(4, new D(c, b - 20)), a.w(5, new D(c, a.h(5).y))) : g ? i ? a.w(3, new D(a.h(2).x, a.h(4).y)) : 6 === a.ba && (a.w(2, new D(a.h(2).x, b)), a.w(3, new D(a.h(3).x, b))) : 4 === a.ba ? a.q(2, new D(a.h(2).x, b)) : 3 === a.ba ? a.w(1, new D(a.h(2).x, b)) : 2 === a.ba && a.q(1, new D(a.h(1).x, b)));
                    a.Th()
                }
            } else {
                var e = c.lb,
                j = yp(c),
                d = Bp(c),
                g = c.de;
                Tl(a);
                var i = a.Ne === Pj,
                k = a.Ze === wh,
                l, n, r, q;
                a.uk();
                if (k || i) {
                    for (l = 2; 4 < a.ba;) a.WC(2);
                    n = a.h(1);
                    r = a.h(2)
                } else {
                    for (l = 1; 3 < a.ba;) a.WC(1);
                    n = a.h(0);
                    r = a.h(a.ba - 1)
                }
                q = a.h(a.ba - 1);
                0 === j ? (c.ja === Ap ? (j = e.bottom + b.y, 0 === b.y && n.y > q.y + c.Qc && (j = Math.min(j, Math.max(n.y, j - Cp(c))))) : c.ja === zp ? (j = e.top + b.y, 0 === b.y && n.y < q.y - c.Qc && (j = Math.max(j, Math.min(n.y, j + Cp(c))))) : j = c.Vj || c.Wj && 1 === c.Ah ? e.top - c.ra.y + b.y: e.y + e.height / 2 + b.y, i ? (a.q(l, new D(n.x, j)), l++, a.q(l, new D(e.right + d, j)), l++, a.q(l, new D(e.right + d + (b.x - g) / 3, j)), l++, a.q(l, new D(e.right + d + 2 * (b.x - g) / 3, j)), l++, a.q(l, new D(e.right + d + (b.x - g), j)), l++, a.q(l, new D(r.x, j))) : (k && (a.q(l, new D(e.right + d / 2, n.y)), l++), a.q(l, new D(e.right + d / 2, j)), l++, a.q(l, new D(e.right + d + b.x - (k ? g / 2 : g), j)), l++, k && a.q(l, new D(a.h(l - 1).x, r.y)))) : 90 === j ? (c.ja === Ap ? (j = e.right + b.x, 0 === b.x && n.x > q.x + c.Qc && (j = Math.min(j, Math.max(n.x, j - Cp(c))))) : c.ja === zp ? (j = e.left + b.x, 0 === b.x && n.x < q.x - c.Qc && (j = Math.max(j, Math.min(n.x, j + Cp(c))))) : j = c.Vj || c.Wj && 1 === c.Ah ? e.left - c.ra.x + b.x: e.x + e.width / 2 + b.x, i ? (a.q(l, new D(j, n.y)), l++, a.q(l, new D(j, e.bottom + d)), l++, a.q(l, new D(j, e.bottom + d + (b.y - g) / 3)), l++, a.q(l, new D(j, e.bottom + d + 2 * (b.y - g) / 3)), l++, a.q(l, new D(j, e.bottom + d + (b.y - g))), l++, a.q(l, new D(j, r.y))) : (k && (a.q(l, new D(n.x, e.bottom + d / 2)), l++), a.q(l, new D(j, e.bottom + d / 2)), l++, a.q(l, new D(j, e.bottom + d + b.y - (k ? g / 2 : g))), l++, k && a.q(l, new D(r.x, a.h(l - 1).y)))) : 180 === j ? (c.ja === Ap ? (j = e.bottom + b.y, 0 === b.y && n.y > q.y + c.Qc && (j = Math.min(j, Math.max(n.y, j - Cp(c))))) : c.ja === zp ? (j = e.top + b.y, 0 === b.y && n.y < q.y - c.Qc && (j = Math.max(j, Math.min(n.y, j + Cp(c))))) : j = c.Vj || c.Wj && 1 === c.Ah ? e.top - c.ra.y + b.y: e.y + e.height / 2 + b.y, i ? (a.q(l, new D(n.x, j)), l++, a.q(l, new D(e.left - d, j)), l++, a.q(l, new D(e.left - d + (b.x + g) / 3, j)), l++, a.q(l, new D(e.left - d + 2 * (b.x + g) / 3, j)), l++, a.q(l, new D(e.left - d + (b.x + g), j)), l++, a.q(l, new D(r.x, j))) : (k && (a.q(l, new D(e.left - d / 2, n.y)), l++), a.q(l, new D(e.left - d / 2, j)), l++, a.q(l, new D(e.left - d + b.x + (k ? g / 2 : g), j)), l++, k && a.q(l, new D(a.h(l - 1).x, r.y)))) : 270 === j ? (c.ja === Ap ? (j = e.right + b.x, 0 === b.x && n.x > q.x + c.Qc && (j = Math.min(j, Math.max(n.x, j - Cp(c))))) : c.ja === zp ? (j = e.left + b.x, 0 === b.x && n.x < q.x - c.Qc && (j = Math.max(j, Math.min(n.x, j + Cp(c))))) : j = c.Vj || c.Wj && 1 === c.Ah ? e.left - c.ra.x + b.x: e.x + e.width / 2 + b.x, i ? (a.q(l, new D(j, n.y)), l++, a.q(l, new D(j, e.top - d)), l++, a.q(l, new D(j, e.top - d + (b.y + g) / 3)), l++, a.q(l, new D(j, e.top - d + 2 * (b.y + g) / 3)), l++, a.q(l, new D(j, e.top - d + (b.y + g))), l++, a.q(l, new D(j, r.y))) : (k && (a.q(l, new D(n.x, e.top - d / 2)), l++), a.q(l, new D(j, e.top - d / 2)), l++, a.q(l, new D(j, e.top - d + b.y + (k ? g / 2 : g))), l++, k && a.q(l, new D(r.x, a.h(l - 1).y)))) : v.g("Invalid angle " + j);
                a.Th()
            }
        }
    };
    v.a(Xp, "relativePoint", Xp.prototype.sG);
    v.defineProperty(Xp, {
        sG: "relativePoint"
    },
    s("iq"), ba("iq"));
    window.go = ea;
    ea.version = "1.0.8";
})(window);