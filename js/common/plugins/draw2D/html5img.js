
(function(window) { var f=void 0,h=!0,n=null,q=!1;function aa(){return function(){}}function ba(a){return function(b){this[a]=b}}function t(a){return function(){return this[a]}}function ca(a){return function(){return a}}var da,ea={};
if(document.createElement("canvas").getContext===f)throw window.console&&window.console.log("The HTML Canvas element is not supported in this browser,or this browser is in Compatibility mode."),Error("The HTML Canvas element is not supported in this browser,or this browser is in Compatibility mode.");if(!Object.prototype.__defineGetter__&&!Object.defineProperty)throw Error("GoJS requires a newer version of JavaScript");
Object.prototype.__defineGetter__&&!Object.defineProperty&&(Object.defineProperty=function(a,b,c){c.get&&a.__defineGetter__(b,c.get);c.set&&a.__defineSetter__(b,c.set)});Object.prototype.__lookupGetter__&&!Object.getOwnPropertyDescriptor&&(Object.getOwnPropertyDescriptor=function(a,b){return{get:a.__lookupGetter__(b),set:a.__lookupSetter__(b)}});Object.getPrototypeOf||(Object.getPrototypeOf=function(a){return a.__proto__});Object.isFrozen||(Object.isFrozen=function(a){return a.aF===h});
Object.freeze||(Object.freeze=function(a){a.aF=h});Array.isArray||(Array.isArray=function(a){return"[object Array]"===Object.prototype.toString.call(a)});Function.prototype.bind||(Function.prototype.bind=function(a){function b(){return g.apply(a,e.concat(d.call(arguments)))}function c(){}var d=Array.prototype.slice,e=d.call(arguments,1),g=this;c.prototype=this.prototype;b.prototype=new c;return b});
for(var fa=0,ha=["ms","moz","webkit","o"],ia=0;ia<ha.length&&!window.requestAnimationFrame;++ia)window.requestAnimationFrame=window[ha[ia]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[ha[ia]+"CancelAnimationFrame"]||window[ha[ia]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(a){var b=(new Date).getTime(),c=Math.max(8,16-(b-fa)),d=window.setTimeout(function(){a(b+c)},c);fa=b+c;return d});
window.cancelAnimationFrame||(window.cancelAnimationFrame=function(a){clearTimeout(a)});var u={dC:q,bK:q,HD:q,YC:q,fI:q,trace:aa(),UF:q,assert:q,CJ:n,SJ:aa(),UJ:aa(),TJ:aa(),RJ:aa(),ZJ:aa(),VJ:aa(),XJ:aa(),WJ:aa(),HJ:q,DL:q,yL:q,zL:q,oG:q,YJ:aa()},u=n;ea.Debug=n;
var w={ex:{},NA:0,$E:{},wu:document.createElement("canvas").getContext("2d"),xu:"",ny:[],nu:n,EA:[],Zx:"ontouchstart"in window,zB:"ongesturestart"in window,zA:q,m:function(a){u&&u.UF&&alert(a);throw Error(a);},H:function(a,b){if(a.$a){var c="The object is frozen, so its properties cannot be set: "+a.toString();b!==f&&(c+="  to value: "+b);w.m(c)}},i:function(a,b,c,d){a instanceof b||(c=w.zh(c),d!==f&&(c+="."+d),w.hc(a,b,c))},k:function(a,b,c,d){typeof a!==b&&(c=w.zh(c),d!==f&&(c+="."+d),w.hc(a,b,
c))},o:function(a,b,c){isFinite(a)||(b=w.zh(b),c!==f&&(b+="."+c),w.m(b+" must be a real number and not NaN or Infinity: "+a))},jb:function(a,b,c,d){if(!(a instanceof ja)||a.le!==b)c=w.zh(c),d!==f&&(c+="."+d),w.hc(a,"a constant of class "+w.Ok(b),c)},hc:function(a,b,c,d){b=w.zh(b);c=w.zh(c);d!==f&&(c+="."+d);w.m(c+" value is not an instance of "+b+": "+a)},ra:function(a,b,c,d){c=w.zh(c);d!==f&&(c+="."+d);w.m(c+" is not in the range "+b+": "+a)},trace:function(a){window&&window.console&&window.console.log(a);
u&&u.fI&&w.m(a)},mb:function(a){return"object"===typeof a&&a!==n},isArray:function(a){return Array.isArray(a)||a instanceof NodeList||a instanceof HTMLCollection},Er:function(a,b,c){w.isArray(a)||w.hc(a,"Array or NodeList or HTMLCollection",b,c)},Rb:function(a){return a.length},Db:function(a,b){return a[b]},ZB:function(a,b,c){Array.isArray(a)?a[b]=c:w.m("Cannot replace an object in an HTMLCollection or NodeList at "+b)},By:function(a,b){if(Array.isArray(a))return a.indexOf(b);for(var c=a.length,d=
0;d<c;d++)if(a[d]===b)return d;return-1},qi:function(a,b,c){Array.isArray(a)?b>=a.length?a.push(c):a.splice(b,0,c):w.m("Cannot insert an object into an HTMLCollection or NodeList: "+c+" at "+b)},ri:function(a,b){Array.isArray(a)?b>=a.length?a.pop():a.splice(b,1):w.m("Cannot remove an object from an HTMLCollection or NodeList at "+b)},iA:1,ic:function(a){a.__gohashid=w.iA++},Xr:function(a){var b=a.__gohashid;b===f&&(b=w.iA++,a.__gohashid=b);return b},ec:function(a){return a.__gohashid},g:function(a,
b,c){"name"!==b&&"length"!==b&&(a[b]=c)},P:function(a,b){b.qA=a;ea[a]=b},Da:function(a,b){function c(){}c.prototype=b.prototype;a.prototype=new c;a.prototype.constructor=a},defineProperty:function(a,b,c,d,e){w.k(a,"function","Util.defineProperty:classfunc");w.k(b,"object","Util.defineProperty:propobj");w.k(c,"function","Util.defineProperty:getter");w.k(d,"function","Util.defineProperty:setter");for(var g in b){b=b[g];c={get:c,set:d};if(e!==f)for(var i in e)c[i]=e[i];Object.defineProperty(a.prototype,
g,c);e=Object.getOwnPropertyDescriptor(a.prototype,g);b&&e&&Object.defineProperty(a.prototype,b,e);break}},u:function(a,b,c,d){w.k(a,"function","Util.defineReadOnlyProperty:classfunc");w.k(b,"object","Util.defineReadOnlyProperty:propobj");w.k(c,"function","Util.defineReadOnlyProperty:getter");for(var e in b){var g=b[e],b={get:c,set:function(a){w.m('The property "'+g+'" is read-only and cannot be set to '+a)}};if(d!==f)for(var i in d)b[i]=d[i];Object.defineProperty(a.prototype,e,b);d=Object.getOwnPropertyDescriptor(a.prototype,
e);g&&d&&Object.defineProperty(a.prototype,g,d);break}},Jd:function(a,b){for(var c in b)b[c]=h;a.prototype.cF=b},zh:function(a){return a===f?"":"string"===typeof a?a:"function"===typeof a?w.Ok(a):a===n?"*":""},Ok:function(a){return"function"===typeof a?a.qA:"object"===typeof a&&a.constructor?a.constructor.qA:typeof a},s:function(a,b,c){w.k(a,"function","Util.defineEnumValue:classfunc");w.k(b,"string","Util.defineEnumValue:name");w.k(c,"number","Util.defineEnumValue:num");c=new ja(a,b,c);Object.freeze(c);
a[b]=c;var d=a.hA;d||(d=new la("string",ja),a.hA=d);d.add(b,c);return c},Ul:function(a,b){if(!b)return n;w.k(a,"function","Util.findEnumValueForName:classfunc");w.k(b,"string","Util.findEnumValueForName:name");var c=a.hA;return!c?n:c.qa(b)},cG:function(a,b,c,d){var e={},g;for(g in a){for(var i=q,j=1;j<arguments.length;j++)if(arguments[j]===g){i=h;break}i||(e[g]=a[g])}return e},Va:function(a,b){if(!a||!b)return n;var c=f;try{"function"===typeof b?c=b(a):"function"===typeof a.getAttribute?(c=a.getAttribute(b),
c===n&&(c=f)):c=a[b]}catch(d){u&&w.trace("property get error: "+d.toString())}return c},Ka:function(a,b,c){if(a&&b)try{"function"===typeof b?b(a,c):"function"===typeof a.setAttribute?a.setAttribute(b,c):a[b]=c}catch(d){u&&w.trace("property set error: "+d.toString())}},Oz:function(a,b){w.k(a,"object","Setting properties requires Objects as arguments");w.k(b,"object","Setting properties requires Objects as arguments");var c=u;c||(u=w);var d=a instanceof x,e;for(e in b){var g=a,i=e;if(d){var j=e.indexOf(".");
if(0<j){var k=e.substring(0,j),g=a.Ie(k);g!==n?i=e.substr(j+1):w.m("Unable to find object named: "+k+" in panel "+a.toString()+" when trying to set property: "+e)}}"_"!==i[0]&&!w.fz(g,i)&&w.m('Trying to set undefined property "'+i+'" on object: '+g.toString());g[i]=b[e];"_"===i[0]&&(j=g.kl,j||(j=[],g.kl=j),j.push(i))}u=c;return a},fz:function(a,b){for(var c=Object.getPrototypeOf(a);c&&c!==Function;){if(c.hasOwnProperty(b))return h;var d=c.cF;if(d&&d[b])return h;c=Object.getPrototypeOf(c)}return q},
eC:function(a,b){if(!w.mb(b)||b instanceof Element||b instanceof CanvasRenderingContext2D)return"";var c="",d;for(d in b)if("string"!==typeof d)""===c&&(c=b+"\n"),c+="  "+d+" is not a string property\n";else if("_"!==d.charAt(0)&&!(2>=d.length)){var e=w.Va(b,d);e!==n&&("function"!==typeof e&&!w.fz(b,d))&&(""===c&&(c=b+"\n"),c+='  unknown property "'+d+'" has value: '+e+" at "+a+"\n")}return c},Xu:function(a,b){if(b&&!("number"===typeof b||"string"===typeof b||"boolean"===typeof b||"function"===typeof b))if(w.ec(b)!==
f){if(!w.tu.contains(b))if(w.tu.add(b),w.Ut.add(w.eC(a,b)),b instanceof z||b instanceof ma||b instanceof la)for(var c=b.l;c.next();)w.Xu(a+"["+c.key+"]",c.value);else for(c in b){var d=w.Va(b,c);if(!(d===f||d===n||!w.mb(d))&&"_ownProperties"!==c){if(b instanceof na){if("_lines"===c)continue}else if(b instanceof x){if("data"===c||"_data"===c)continue;if("itemArray"===c||"_itemArray"===c)continue}else if(!(b instanceof A))if(b instanceof qa){if("archetypeGroupData"===c||"_archetypeGroupData"===c)continue}else if(b instanceof
ra){if("archetypeLinkData"===c||"_archetypeLinkData"===c)continue;if("archetypeLabelNodeData"===c||"_archetypeLabelNodeData"===c)continue}else if(b instanceof sa){if("archetypeNodeData"===c||"_archetypeNodeData"===c)continue}else if(b instanceof B){if("nodeDataArray"===c||"_nodeDataArray"===c)continue;if("linkDataArray"===c||"_linkDataArray"===c||"_linkDataSet"===c)continue;if("_mapKeyNodeData"===c||"_delayedNodeReferences"===c)continue}w.Xu(a+"."+c,d)}}}else if(Array.isArray(b))for(c=0;c<b.length;c++)w.Xu(a+
"["+c+"]",b[c]);else w.Ut.add(w.eC(a,b))},WF:function(a){w.tu===f?w.tu=new ma:w.tu.clear();w.Ut=new ta;w.Xu("",a);a=w.Ut.toString();w.Ut=n;return a},zH:function(a){for(var b=[],c=0;256>c;c++)b[c]=c;for(var d=0,e,c=0;256>c;c++)d=(d+b[c]+119)%256,e=b[c],b[c]=b[d],b[d]=e;for(var d=c=0,g="",i=0;i<a.length;i++)c=(c+1)%256,d=(d+b[c])%256,e=b[c],b[c]=b[d],b[d]=e,g+=String.fromCharCode(a.charCodeAt(i)^b[(b[c]+b[d])%256]);return g},FG:function(a){for(var b=[],c=0;256>c;c++)b["0123456789abcdef".charAt(c>>4)+
"0123456789abcdef".charAt(c&15)]=String.fromCharCode(c);a.length%2&&(a="0"+a);for(var d=[],e=0,c=0;c<a.length;c+=2)d[e++]=b[a.substr(c,2)];a=d.join("");return""===a?"0":a},Oa:function(a){return w.zH(w.FG(a))},Is:n,yy:"7da71ca0ad381e90",XF:"@COLOR1",YF:"@COLOR2"},va=w,xa=document.createElement("canvas"),ya=xa.getContext("2d");va.Is=xa;function ja(a,b,c){w.ic(this);this.pA=a;this.Ab=b;this.mF=c}
ja.prototype.toString=function(){return w.Ok(this.pA)+"."+this.Ab};w.u(ja,{le:"classType"},t("pA"));w.u(ja,{name:"name"},t("Ab"));w.u(ja,{value:"value"},t("mF"));function ta(){this.oA=[];this.lI=0;this.pI="  "}ta.prototype.toString=function(){return this.oA.join("")};ta.prototype.add=function(a){a&&this.oA.push(a)};function Ga(){}w.u(Ga,{l:"iterator"},function(){return this});Ga.prototype.reset=Ga.prototype.reset=aa();Ga.prototype.next=Ga.prototype.next=ca(q);Ga.prototype.first=Ga.prototype.zb=ca(n);
w.u(Ga,{count:"count"},ca(0));Ga.prototype.ug=aa();Ga.prototype.toString=ca("EmptyIterator");w.Ef=new Ga;function Ia(a){this.key=-1;this.value=a}w.Jd(Ia,{key:h,value:h});w.u(Ia,{l:"iterator"},function(){return this});Ia.prototype.reset=Ia.prototype.reset=function(){this.key=-1};Ia.prototype.next=Ia.prototype.next=function(){return-1===this.key?(this.key=0,h):q};Ia.prototype.first=Ia.prototype.zb=function(){this.key=0;return this.value};w.u(Ia,{count:"count"},ca(1));
Ia.prototype.ug=function(){this.value=n};Ia.prototype.toString=function(){return"SingletonIterator("+this.value+")"};function Ja(a){this.bf=a;this.an=n;this.reset()}w.Jd(Ja,{key:h,value:h});w.u(Ja,{l:"iterator"},function(){return this});w.g(Ja,"predicate",Ja.prototype.Nv);w.defineProperty(Ja,{Nv:"predicate"},t("an"),ba("an"));Ja.prototype.reset=Ja.prototype.reset=function(){var a=this.bf;a.bh=n;this.Ya=a.Ib;this.ea=-1};
Ja.prototype.next=Ja.prototype.next=function(){var a=this.bf;a.Ib!==this.Ya&&w.m("the List has been modified during iteration");var a=a.n,b=a.length,c=++this.ea,d=this.an;if(d!==n)for(;c<b;){var e=a[c];if(d(e))return this.key=this.ea=c,this.value=e,h;c++}else{if(c<b)return this.key=c,this.value=a[c],h;this.ug()}return q};
Ja.prototype.first=Ja.prototype.zb=function(){var a=this.bf;this.Ya=a.Ib;this.ea=0;var a=a.n,b=a.length,c=this.an;if(c!==n){for(var d=0;d<b;){var e=a[d];if(c(e))return this.key=this.ea=d,this.value=e;d++}return n}return 0<b?(e=a[0],this.key=0,this.value=e):n};w.u(Ja,{count:"count"},function(){var a=this.an;if(a!==n){for(var b=0,c=this.bf.n,d=c.length,e=0;e<d;e++)a(c[e])&&b++;return b}return this.bf.n.length});Ja.prototype.ug=function(){this.key=-1;this.value=n;this.Ya=-1;this.an=n;this.bf.bh=this};
Ja.prototype.toString=function(){return"ListIterator@"+this.ea+"/"+this.bf.count};function Ka(a){this.bf=a;this.reset()}w.Jd(Ka,{key:h,value:h});w.u(Ka,{l:"iterator"},function(){return this});Ka.prototype.reset=Ka.prototype.reset=function(){var a=this.bf;a.ux=n;this.Ya=a.Ib;this.ea=a.n.length};Ka.prototype.next=Ka.prototype.next=function(){var a=this.bf;a.Ib!==this.Ya&&w.m("the List has been modified during iteration");var b=--this.ea;if(0<=b)return this.key=b,this.value=a.n[b],h;this.ug();return q};
Ka.prototype.first=Ka.prototype.zb=function(){var a=this.bf;this.Ya=a.Ib;var b=a.n;this.ea=a=b.length-1;return 0<=a?(b=b[a],this.key=a,this.value=b):n};w.u(Ka,{count:"count"},function(){return this.bf.n.length});Ka.prototype.ug=function(){this.key=-1;this.value=n;this.Ya=-1;this.bf.ux=this};Ka.prototype.toString=function(){return"ListIteratorBackwards("+this.ea+"/"+this.bf.count+")"};
function z(a){w.ic(this);this.$a=q;this.n=[];this.Ib=0;this.ux=this.bh=n;a===f||a===n?this.S=n:"string"===typeof a?"object"===a||"string"===a||"number"===a||"boolean"===a||"function"===a?this.S=a:w.ra(a,"the string 'object', 'number', 'string', 'boolean', or 'function'","List constructor: type"):"function"===typeof a?this.S=a===Object?"object":a===String?"string":a===Number?"number":a===Boolean?"boolean":a===Function?"function":a:w.ra(a,"null, a primitive type name, or a class type","List constructor: type")}
w.P("List",z);z.prototype.pg=function(a){this.S!==n&&("string"===typeof this.S?(typeof a!==this.S||a===n)&&w.hc(a,this.S):a instanceof this.S||w.hc(a,this.S))};z.prototype.qd=function(){var a=this.Ib;a++;999999999<a&&(a=0);this.Ib=a};z.prototype.freeze=z.prototype.freeze=function(){this.$a=h;return this};z.prototype.thaw=z.prototype.Ia=function(){this.$a=q;return this};z.prototype.toString=function(){return"List("+w.zh(this.S)+")#"+w.ec(this)};
z.prototype.add=z.prototype.add=function(a){a!==n&&(u&&this.pg(a),w.H(this,a),this.n.push(a),this.qd())};z.prototype.addAll=z.prototype.Tf=function(a){if(a===n)return this;w.H(this);var b=this.n;if(w.isArray(a))for(var c=w.Rb(a),d=0;d<c;d++){var e=w.Db(a,d);u&&this.pg(e);b.push(e)}else for(a=a.l;a.next();)e=a.value,u&&this.pg(e),b.push(e);this.qd();return this};z.prototype.clear=z.prototype.clear=function(){w.H(this);this.n=[];this.qd()};
z.prototype.contains=z.prototype.contains=function(a){if(a===n)return q;u&&this.pg(a);return-1!==this.n.indexOf(a)};z.prototype.indexOf=z.prototype.indexOf=function(a){if(a===n)return-1;u&&this.pg(a);return this.n.indexOf(a)};z.prototype.elt=z.prototype.oa=function(a){u&&w.o(a,z,"elt:i");var b=this.n;(0>a||a>=b.length)&&w.ra(a,"0 <= i < length",z,"elt:i");return b[a]};
z.prototype.setElt=z.prototype.Vv=function(a,b){u&&(this.pg(b),w.o(a,z,"setElt:i"));var c=this.n;(0>a||a>=c.length)&&w.ra(a,"0 <= i < length",z,"setElt:i");w.H(this,a);c[a]=b};z.prototype.first=z.prototype.zb=function(){var a=this.n;return 0===a.length?n:a[0]};z.prototype.insertAt=z.prototype.xc=function(a,b){u&&(this.pg(b),w.o(a,z,"insertAt:i"));0>a&&w.ra(a,">= 0",z,"insertAt:i");w.H(this,a);var c=this.n;a>=c.length?c.push(b):c.splice(a,0,b);this.qd();return h};
z.prototype.remove=z.prototype.remove=function(a){if(a===n)return q;u&&this.pg(a);w.H(this,a);var b=this.n,a=b.indexOf(a);if(-1===a)return q;a===b.length-1?b.pop():b.splice(a,1);this.qd();return h};z.prototype.removeAt=z.prototype.Se=function(a){u&&w.o(a,z,"removeAt:i");var b=this.n;(0>a||a>=b.length)&&w.ra(a,"0 <= i < length",z,"removeAt:i");w.H(this,a);a===b.length-1?b.pop():b.splice(a,1);this.qd()};
z.prototype.removeRange=z.prototype.removeRange=function(a,b){u&&(w.o(a,z,"removeRange:from"),w.o(b,z,"removeRange:to"));var c=this.n;(0>a||a>=c.length)&&w.ra(a,"0 <= from < length",z,"elt:from");(0>b||b>=c.length)&&w.ra(b,"0 <= to < length",z,"elt:to");w.H(this,a);var d=c.slice((b||a)+1||c.length);c.length=0>a?c.length+a:a;c.push.apply(c,d);this.qd()};z.prototype.copy=z.prototype.copy=function(){for(var a=new z(this.S),b=this.n,c=this.count,d=0;d<c;d++)a.add(b[d]);return a};
z.prototype.toArray=z.prototype.ng=function(){for(var a=[],b=this.n,c=this.count,d=0;d<c;d++)a.push(b[d]);return a};z.prototype.toSet=z.prototype.dI=function(){for(var a=new ma(this.S),b=this.n,c=this.count,d=0;d<c;d++)a.add(b[d]);return a};z.prototype.sort=z.prototype.sort=function(a){u&&w.k(a,"function",z,"sort:sortfunc");w.H(this);this.n.sort(a);this.qd();return this};
z.prototype.sortRange=z.prototype.Ao=function(a,b,c){var d=this.n,e=d.length;b===f&&(b=0);c===f&&(c=e);u&&(w.k(a,"function",z,"sortRange:sortfunc"),w.o(b,z,"sortRange:from"),w.o(c,z,"sortRange:to"));w.H(this);var g=c-b;if(1>=g)return this;(0>b||b>=e-1)&&w.ra(b,"0 <= from < length",z,"sortRange:from");if(2===g)return c=d[b],e=d[b+1],0<a(c,e)&&(d[b]=e,d[b+1]=c,this.qd()),this;if(0===b)if(c>=e)d.sort(a);else{g=d.slice(0,c);g.sort(a);for(a=0;a<c;a++)d[a]=g[a]}else if(c>=e){g=d.slice(b);g.sort(a);for(a=
b;a<e;a++)d[a]=g[a-b]}else{g=d.slice(b,c);g.sort(a);for(a=b;a<c;a++)d[a]=g[a-b]}this.qd();return this};z.prototype.reverse=z.prototype.reverse=function(){w.H(this);this.n.reverse();this.qd();return this};w.u(z,{count:"count"},function(){return this.n.length});w.u(z,{length:"length"},function(){return this.n.length});w.u(z,{l:"iterator"},function(){if(0>=this.n.length)return w.Ef;var a=this.bh;return a!==n?(a.reset(),a):new Ja(this)});
w.u(z,{ao:"iteratorBackwards"},function(){if(0>=this.n.length)return w.Ef;var a=this.ux;return a!==n?(a.reset(),a):new Ka(this)});function La(a){this.V=a;this.reset()}w.Jd(La,{key:h,value:h});w.u(La,{l:"iterator"},function(){return this});La.prototype.reset=La.prototype.reset=function(){var a=this.V;a.bh=n;this.Ya=a.Ib;this.Cd=n};
La.prototype.next=La.prototype.next=function(){var a=this.V;a.Ib!==this.Ya&&w.m("the Set has been modified during iteration");var b=this.Cd,b=b===n?a.fe:b.ej;if(b!==n)return this.Cd=b,this.value=b.value,this.key=b.key,h;this.ug();return q};La.prototype.first=La.prototype.zb=function(){var a=this.V;this.Ya=a.Ib;a=a.fe;if(a!==n){this.Cd=a;var b=a.value;this.key=a.key;return this.value=b}return n};w.u(La,{count:"count"},function(){return this.V.ye});
La.prototype.ug=function(){this.value=n;this.Ya=-1;this.V.bh=this};La.prototype.toString=function(){return this.Cd!==n?"SetIterator@"+this.Cd.value:"SetIterator"};
function ma(a){w.ic(this);this.$a=q;a===f||a===n?this.S=n:"string"===typeof a?"object"===a||"string"===a||"number"===a?this.S=a:w.ra(a,"the string 'object', 'number' or 'string'","Set constructor: type"):"function"===typeof a?this.S=a===Object?"object":a===String?"string":a===Number?"number":a:w.ra(a,"null, a primitive type name, or a class type","Set constructor: type");this.Gc={};this.ye=0;this.bh=n;this.Ib=0;this.dh=this.fe=n}w.P("Set",ma);
ma.prototype.pg=function(a){this.S!==n&&("string"===typeof this.S?(typeof a!==this.S||a===n)&&w.hc(a,this.S):a instanceof this.S||w.hc(a,this.S))};ma.prototype.qd=function(){var a=this.Ib;a++;999999999<a&&(a=0);this.Ib=a};ma.prototype.freeze=ma.prototype.freeze=function(){this.$a=h;return this};ma.prototype.thaw=ma.prototype.Ia=function(){this.$a=q;return this};ma.prototype.toString=function(){return"Set("+w.zh(this.S)+")#"+w.ec(this)};
ma.prototype.add=ma.prototype.add=function(a){if(a===n)return q;u&&this.pg(a);w.H(this,a);var b=a;w.mb(a)&&(b=w.Xr(a));return this.Gc[b]===f?(this.ye++,a=new Ma(a,a),this.Gc[b]=a,b=this.dh,b===n?this.fe=a:(a.bn=b,b.ej=a),this.dh=a,this.qd(),h):q};ma.prototype.addAll=ma.prototype.Tf=function(a){if(a===n)return this;w.H(this);if(w.isArray(a))for(var b=w.Rb(a),c=0;c<b;c++)this.add(w.Db(a,c));else for(a=a.l;a.next();)this.add(a.value);return this};
ma.prototype.contains=ma.prototype.contains=function(a){if(a===n)return q;u&&this.pg(a);var b=a;return w.mb(a)&&(b=w.ec(a),b===f)?q:this.Gc[b]!==f};ma.prototype.containsAll=ma.prototype.tJ=function(a){if(a===n)return h;for(a=a.l;a.next();)if(!this.contains(a.value))return q;return h};ma.prototype.containsAny=ma.prototype.uJ=function(a){if(a===n)return h;for(a=a.l;a.next();)if(this.contains(a.value))return h;return q};ma.prototype.first=ma.prototype.zb=function(){var a=this.fe;return a===n?n:a.value};
ma.prototype.remove=ma.prototype.remove=function(a){if(a===n)return q;u&&this.pg(a);w.H(this,a);var b=a;if(w.mb(a)&&(b=w.ec(a),b===f))return q;a=this.Gc[b];if(a===f)return q;var c=a.ej,d=a.bn;c!==n&&(c.bn=d);d!==n&&(d.ej=c);this.fe===a&&(this.fe=c);this.dh===a&&(this.dh=d);delete this.Gc[b];this.ye--;this.qd();return h};ma.prototype.removeAll=ma.prototype.JL=function(a){if(a===n)return this;w.H(this);for(a=a.l;a.next();)this.remove(a.value);return this};
ma.prototype.retainAll=ma.prototype.QL=function(a){if(a===n||0===this.count)return this;w.H(this);var b=new ma(this.S);b.Tf(a);for(var a=new z(this.S),c=this.l;c.next();)b.contains(c.value)||a.add(c.value);for(b=a.l;b.next();)this.remove(b.value);return this};ma.prototype.clear=ma.prototype.clear=function(){w.H(this);this.Gc={};this.ye=0;this.dh=this.fe=n;this.qd()};ma.prototype.copy=ma.prototype.copy=function(){var a=new ma(this.S),b=this.Gc,c;for(c in b)a.add(b[c].value);return a};
ma.prototype.toArray=ma.prototype.ng=function(){var a=[],b=this.Gc,c;for(c in b)a.push(b[c].value);return a};ma.prototype.toList=ma.prototype.cI=function(){var a=new z(this.S),b=this.Gc,c;for(c in b)a.add(b[c]);return a};w.u(ma,{count:"count"},t("ye"));w.u(ma,{l:"iterator"},function(){if(0>=this.ye)return w.Ef;var a=this.bh;return a!==n?(a.reset(),a):new La(this)});function Oa(a){this.Qc=a;this.reset()}w.Jd(Oa,{key:h,value:h});w.u(Oa,{l:"iterator"},function(){return this});
Oa.prototype.reset=Oa.prototype.reset=function(){this.Ya=this.Qc.Ib;this.Cd=n};Oa.prototype.next=Oa.prototype.next=function(){var a=this.Qc;a.Ib!==this.Ya&&w.m("the Map has been modified during iteration");var b=this.Cd,b=b===n?a.fe:b.ej;if(b!==n)return this.Cd=b,this.value=b.key,h;this.ug();return q};Oa.prototype.first=Oa.prototype.zb=function(){var a=this.Qc;this.Ya=a.Ib;a=a.fe;if(a!==n){this.Cd=a;var b=a.value;this.key=a.key;return this.value=b}return n};w.u(Oa,{count:"count"},function(){return this.Qc.ye});
Oa.prototype.ug=function(){this.value=n;this.Ya=-1};Oa.prototype.toString=function(){return this.Cd!==n?"MapKeySetIterator@"+this.Cd.value:"MapKeySetIterator"};function Pa(a){w.ic(this);this.Qc=a}w.Da(Pa,ma);Pa.prototype.freeze=function(){return this};Pa.prototype.Ia=function(){return this};Pa.prototype.toString=function(){return"MapKeySet("+this.Qc.toString()+")"};Pa.prototype.add=Pa.prototype.add=function(){w.m("This Set is read-only: "+this.toString());return q};
Pa.prototype.contains=Pa.prototype.contains=function(a){return this.Qc.contains(a)};Pa.prototype.remove=Pa.prototype.remove=function(){w.m("This Set is read-only: "+this.toString());return q};Pa.prototype.clear=Pa.prototype.clear=function(){w.m("This Set is read-only: "+this.toString())};Pa.prototype.copy=Pa.prototype.copy=function(){return new Pa(this.Qc)};Pa.prototype.toSet=Pa.prototype.dI=function(){var a=new ma(this.Qc.S),b=this.Qc.Gc,c;for(c in b)a.add(b[c].key);return a};
Pa.prototype.toArray=Pa.prototype.ng=function(){var a=[],b=this.Qc.Gc,c;for(c in b)a.push(b[c].key);return a};Pa.prototype.toList=Pa.prototype.cI=function(){var a=new z(this.S),b=this.Qc.Gc,c;for(c in b)a.add(b[c].key);return a};w.u(Pa,{count:"count"},function(){return this.Qc.ye});w.u(Pa,{l:"iterator"},function(){return 0>=this.Qc.ye?w.Ef:new Oa(this.Qc)});function Ma(a,b){this.key=a;this.value=b;this.bn=this.ej=n}w.Jd(Ma,{key:h,value:h});
Ma.prototype.toString=function(){return"{"+this.key+":"+this.value+"}"};function Qa(a){this.Qc=a;this.reset()}w.Jd(Qa,{key:h,value:h});w.u(Qa,{l:"iterator"},function(){return this});Qa.prototype.reset=Qa.prototype.reset=function(){var a=this.Qc;a.bh=n;this.Ya=a.Ib;this.Cd=n};
Qa.prototype.next=Qa.prototype.next=function(){var a=this.Qc;a.Ib!==this.Ya&&w.m("the Map has been modified during iteration");var b=this.Cd,b=b===n?a.fe:b.ej;if(b!==n)return this.Cd=b,this.key=b.key,this.value=b.value,h;this.ug();return q};Qa.prototype.first=Qa.prototype.zb=function(){var a=this.Qc;this.Ya=a.Ib;a=a.fe;if(a!==n){this.Cd=a;var b=a.key;this.key=b;this.value=a.value;return b}return n};w.u(Qa,{count:"count"},function(){return this.Qc.ye});
Qa.prototype.ug=function(){this.value=this.key=n;this.Ya=-1;this.Qc.bh=this};Qa.prototype.toString=function(){return this.Cd!==n?"MapIterator@"+this.Cd:"MapIterator"};
function la(a,b){w.ic(this);this.$a=q;a===f||a===n?this.Xh=n:"string"===typeof a?"object"===a||"string"===a||"number"===a?this.Xh=a:w.ra(a,"the string 'object', 'number' or 'string'","Map constructor: keytype"):"function"===typeof a?this.Xh=a===Object?"object":a===String?"string":a===Number?"number":a:w.ra(a,"null, a primitive type name, or a class type","Map constructor: keytype");b===f||b===n?this.pi=n:"string"===typeof b?"object"===b||"string"===b||"boolean"===b||"number"===b||"function"===b?this.pi=
b:w.ra(b,"the string 'object', 'number', 'string', 'boolean', or 'function'","Map constructor: valtype"):"function"===typeof b?this.pi=b===Object?"object":b===String?"string":b===Number?"number":b===Boolean?"boolean":b===Function?"function":b:w.ra(b,"null, a primitive type name, or a class type","Map constructor: valtype");this.Gc={};this.ye=0;this.bh=n;this.Ib=0;this.dh=this.fe=n}w.P("Map",la);
function Ra(a,b){a.Xh!==n&&("string"===typeof a.Xh?(typeof b!==a.Xh||b===n)&&w.hc(b,a.Xh):b instanceof a.Xh||w.hc(b,a.Xh))}la.prototype.qd=function(){var a=this.Ib;a++;999999999<a&&(a=0);this.Ib=a};la.prototype.freeze=la.prototype.freeze=function(){this.$a=h;return this};la.prototype.thaw=la.prototype.Ia=function(){this.$a=q;return this};la.prototype.toString=function(){return"Map("+w.zh(this.Xh)+","+w.zh(this.pi)+")#"+w.ec(this)};
la.prototype.add=la.prototype.add=function(a,b){u&&(Ra(this,a),this.pi!==n&&("string"===typeof this.pi?(typeof b!==this.pi||b===n)&&w.hc(b,this.pi):b instanceof this.pi||w.hc(b,this.pi)));w.H(this,a);var c=a;w.mb(a)&&(c=w.Xr(a));var d=this.Gc[c];if(d===f)return this.ye++,d=new Ma(a,b),this.Gc[c]=d,c=this.dh,c===n?this.fe=d:(d.bn=c,c.ej=d),this.dh=d,this.qd(),h;d.value=b;return q};
la.prototype.addAll=la.prototype.Tf=function(a){if(a===n)return this;u&&w.i(a,la,la,"addAll:map");for(a=a.l;a.next();)this.add(a.key,a.value);return this};la.prototype.contains=la.prototype.contains=function(a){u&&Ra(this,a);var b=a;return w.mb(a)&&(b=w.ec(a),b===f)?q:this.Gc[b]!==f};la.prototype.getValue=la.prototype.qa=function(a){u&&Ra(this,a);var b=a;if(w.mb(a)&&(b=w.ec(a),b===f))return n;a=this.Gc[b];return a===f?n:a.value};
la.prototype.remove=la.prototype.remove=function(a){if(a===n)return q;u&&Ra(this,a);w.H(this,a);var b=a;if(w.mb(a)&&(b=w.ec(a),b===f))return q;a=this.Gc[b];if(a===f)return q;var c=a.ej,d=a.bn;c!==n&&(c.bn=d);d!==n&&(d.ej=c);this.fe===a&&(this.fe=c);this.dh===a&&(this.dh=d);delete this.Gc[b];this.ye--;this.qd();return h};la.prototype.clear=la.prototype.clear=function(){w.H(this);this.Gc={};this.ye=0;this.dh=this.fe=n;this.qd()};
la.prototype.copy=la.prototype.copy=function(){var a=new la(this.Xh,this.pi),b=this.Gc,c;for(c in b){var d=b[c];a.add(d.key,d.value)}return a};la.prototype.toArray=la.prototype.ng=function(){var a=[],b=this.Gc,c;for(c in b){var d=b[c];a.push(new Ma(d.key,d.value))}return a};la.prototype.toKeySet=la.prototype.Kj=function(){return new Pa(this)};w.u(la,{count:"count"},t("ye"));w.u(la,{l:"iterator"},function(){if(0>=this.count)return w.Ef;var a=this.bh;return a!==n?(a.reset(),a):new Qa(this)});
function F(a,b){a===f?this.y=this.x=0:"number"===typeof a&&"number"===typeof b?(this.x=a,this.y=b):w.m("Invalid arguments to Point constructor")}w.P("Point",F);w.Jd(F,{x:h,y:h});F.prototype.Xa=function(a){u&&w.i(a,F,F,"assign:p");this.x=a.x;this.y=a.y};F.prototype.V=function(a,b){this.x=a;this.y=b};F.prototype.setTo=F.prototype.zo=function(a,b){u&&(w.k(a,"number",F,"setTo:x"),w.k(b,"number",F,"setTo:y"));w.H(this);this.x=a;this.y=b;return this};
F.prototype.set=F.prototype.set=function(a){u&&w.i(a,F,F,"set:p");w.H(this);this.x=a.x;this.y=a.y;return this};F.prototype.copy=F.prototype.copy=function(){var a=new F;a.x=this.x;a.y=this.y;return a};F.prototype.Za=function(){this.$a=h;Object.freeze(this);return this};F.prototype.O=function(){return Object.isFrozen(this)?this:this.copy().freeze()};F.prototype.freeze=function(){this.$a=h;return this};F.prototype.Ia=function(){Object.isFrozen(this)&&w.m("cannot thaw constant: "+this);this.$a=q;return this};
F.parse=function(a){if("string"===typeof a){for(var a=a.split(" "),b=0,c=0;""===a[b];)b++;var d=a[b++];d&&(c=parseFloat(d));for(var e=0;""===a[b];)b++;(d=a[b++])&&(e=parseFloat(d));return new F(c,e)}return new F};F.stringify=function(a){return a instanceof F?a.x.toString()+" "+a.y.toString():a.toString()};F.prototype.toString=function(){return"Point("+this.x+","+this.y+")"};F.prototype.equals=F.prototype.I=function(a){return!(a instanceof F)?q:this.x===a.x&&this.y===a.y};
F.prototype.equalTo=F.prototype.Zy=function(a,b){return this.x===a&&this.y===b};F.prototype.Aj=function(a){return Sa(this.x,a.x)&&Sa(this.y,a.y)};F.prototype.yi=function(a){return Ta(this.x,a.x)&&Ta(this.y,a.y)};F.prototype.add=F.prototype.add=function(a){u&&w.i(a,F,F,"add:p");w.H(this);this.x+=a.x;this.y+=a.y;return this};F.prototype.subtract=F.prototype.Bs=function(a){u&&w.i(a,F,F,"subtract:p");w.H(this);this.x-=a.x;this.y-=a.y;return this};
F.prototype.offset=F.prototype.offset=function(a,b){u&&(w.o(a,F,"offset:dx"),w.o(b,F,"offset:dy"));w.H(this);this.x+=a;this.y+=b;return this};F.prototype.rotate=F.prototype.rotate=function(a){u&&w.o(a,F,"rotate:angle");w.H(this);if(0===a)return this;var b=this.x,c=this.y;if(0===b&&0===c)return this;var d=a*Math.PI/180,a=Math.cos(d),d=Math.sin(d);this.x=a*b-d*c;this.y=d*b+a*c;return this};
F.prototype.scale=F.prototype.scale=function(a,b){u&&(w.o(a,F,"scale:sx"),w.o(b,F,"scale:sy"));this.x*=a;this.y*=b;return this};F.prototype.distanceSquaredPoint=F.prototype.Rl=function(a){u&&w.i(a,F,F,"distanceSquaredPoint:p");var b=a.x-this.x,a=a.y-this.y;return b*b+a*a};F.prototype.distanceSquared=F.prototype.IJ=function(a,b){u&&(w.o(a,F,"distanceSquared:px"),w.o(b,F,"distanceSquared:py"));var c=a-this.x,d=b-this.y;return c*c+d*d};
F.prototype.normalize=F.prototype.normalize=function(){w.H(this);var a=this.x,b=this.y,c=Math.sqrt(a*a+b*b);0<c&&(this.x=a/c,this.y=b/c);return this};F.prototype.directionPoint=F.prototype.ui=function(a){u&&w.i(a,F,F,"directionPoint:p");return Va(a.x-this.x,a.y-this.y)};F.prototype.direction=F.prototype.direction=function(a,b){u&&(w.o(a,F,"direction:px"),w.o(b,F,"direction:py"));return Va(a-this.x,b-this.y)};
function Va(a,b){if(0===a)return 0<b?90:0>b?270:0;if(0===b)return 0<a?0:180;if(isNaN(a)||isNaN(b))return 0;var c=180*Math.atan(Math.abs(b/a))/Math.PI;0>a?c=0>b?c+180:180-c:0>b&&(c=360-c);return c}F.prototype.setRectSpot=F.prototype.yo=function(a,b){u&&(w.i(a,G,F,"setRectSpot:r"),w.i(b,H,F,"setRectSpot:spot"));w.H(this);this.x=a.x+b.x*a.width+b.offsetX;this.y=a.y+b.y*a.height+b.offsetY;return this};
F.prototype.setSpot=F.prototype.hm=function(a,b,c,d,e){u&&(w.o(a,F,"setSpot:x"),w.o(b,F,"setSpot:y"),w.o(c,F,"setSpot:w"),w.o(d,F,"setSpot:h"),(0>c||0>d)&&w.m("Point.setSpot:Width and height cannot be negative"),w.i(e,H,F,"setSpot:spot"));w.H(this);this.x=a+e.x*c+e.offsetX;this.y=b+e.y*d+e.offsetY;return this};F.prototype.transform=function(a){u&&w.i(a,Wa,F,"transform:t");a.Ta(this);return this};function Za(a,b){u&&w.i(b,Wa,F,"transformInverted:t");b.Ci(a);return a}var $a;
F.distanceLineSegmentSquared=$a=function(a,b,c,d,e,g){u&&(w.o(a,F,"distanceLineSegmentSquared:px"),w.o(b,F,"distanceLineSegmentSquared:py"),w.o(c,F,"distanceLineSegmentSquared:ax"),w.o(d,F,"distanceLineSegmentSquared:ay"),w.o(e,F,"distanceLineSegmentSquared:bx"),w.o(g,F,"distanceLineSegmentSquared:by"));var i=e-c,j=g-d,k=i*i+j*j,c=c-a,d=d-b,l=-c*i-d*j;if(0>=l||l>=k)return i=e-a,j=g-b,Math.min(c*c+d*d,i*i+j*j);a=i*d-j*c;return a*a/k};
F.distanceSquared=function(a,b,c,d){u&&(w.o(a,F,"distanceSquared:px"),w.o(b,F,"distanceSquared:py"),w.o(c,F,"distanceSquared:qx"),w.o(d,F,"distanceSquared:qy"));a=c-a;b=d-b;return a*a+b*b};var ab;
F.direction=ab=function(a,b,c,d){u&&(w.o(a,F,"direction:px"),w.o(b,F,"direction:py"),w.o(c,F,"direction:qx"),w.o(d,F,"direction:qy"));a=c-a;b=d-b;if(0===a)return 0<b?90:0>b?270:0;if(0===b)return 0<a?0:180;if(isNaN(a)||isNaN(b))return 0;d=180*Math.atan(Math.abs(b/a))/Math.PI;0>a?d=0>b?d+180:180-d:0>b&&(d=360-d);return d};F.prototype.isReal=F.prototype.T=function(){return isFinite(this.x)&&isFinite(this.y)};
function cb(a,b){a===f?this.height=this.width=0:"number"===typeof a&&(0<=a||isNaN(a))&&"number"===typeof b&&(0<=b||isNaN(b))?(this.width=a,this.height=b):w.m("Invalid arguments to Size constructor")}w.P("Size",cb);w.Jd(cb,{width:h,height:h});cb.prototype.Xa=function(a){u&&w.i(a,cb,cb,"assign:s");this.width=a.width;this.height=a.height};cb.prototype.V=function(a,b){this.width=a;this.height=b};
cb.prototype.setTo=cb.prototype.zo=function(a,b){u&&(w.k(a,"number",cb,"setTo:w"),w.k(b,"number",cb,"setTo:h"));0>a&&w.ra(a,">= 0",cb,"setTo:w");0>b&&w.ra(b,">= 0",cb,"setTo:h");w.H(this);this.width=a;this.height=b;return this};cb.prototype.set=cb.prototype.set=function(a){u&&w.i(a,cb,cb,"set:s");w.H(this);this.width=a.width;this.height=a.height;return this};cb.prototype.copy=cb.prototype.copy=function(){var a=new cb;a.width=this.width;a.height=this.height;return a};
cb.prototype.Za=function(){this.$a=h;Object.freeze(this);return this};cb.prototype.O=function(){return Object.isFrozen(this)?this:this.copy().freeze()};cb.prototype.freeze=function(){this.$a=h;return this};cb.prototype.Ia=function(){Object.isFrozen(this)&&w.m("cannot thaw constant: "+this);this.$a=q;return this};
cb.parse=function(a){if("string"===typeof a){for(var a=a.split(" "),b=0,c=0;""===a[b];)b++;var d=a[b++];d&&(c=parseFloat(d));for(var e=0;""===a[b];)b++;(d=a[b++])&&(e=parseFloat(d));return new cb(c,e)}return new cb};cb.stringify=function(a){return a instanceof cb?a.width.toString()+" "+a.height.toString():a.toString()};cb.prototype.toString=function(){return"Size("+this.width+","+this.height+")"};
cb.prototype.equals=cb.prototype.I=function(a){return!(a instanceof cb)?q:this.width===a.width&&this.height===a.height};cb.prototype.equalTo=cb.prototype.Zy=function(a,b){return this.width===a&&this.height===b};cb.prototype.Aj=function(a){return Sa(this.width,a.width)&&Sa(this.height,a.height)};cb.prototype.yi=function(a){return Ta(this.width,a.width)&&Ta(this.height,a.height)};cb.prototype.isReal=cb.prototype.T=function(){return isFinite(this.width)&&isFinite(this.height)};
function G(a,b,c,d){a===f?this.height=this.width=this.y=this.x=0:a instanceof F?b instanceof F?(this.x=Math.min(a.x,b.x),this.y=Math.min(a.y,b.y),this.width=Math.abs(a.x-b.x),this.height=Math.abs(a.y-b.y)):b instanceof cb?(this.x=a.x,this.y=a.y,this.width=b.width,this.height=b.height):w.m("Incorrect arguments supplied"):!u||"number"===typeof a&&"number"===typeof b&&"number"===typeof c&&(0<=c||isNaN(c))&&"number"===typeof d&&(0<=d||isNaN(d))?(this.x=a,this.y=b,this.width=c,this.height=d):w.m("Invalid arguments to Rect constructor")}
w.P("Rect",G);w.Jd(G,{x:h,y:h,width:h,height:h});G.prototype.Xa=function(a){u&&w.i(a,G,G,"assign:r");this.x=a.x;this.y=a.y;this.width=a.width;this.height=a.height};G.prototype.V=function(a,b,c,d){this.x=a;this.y=b;this.width=c;this.height=d};function db(a,b,c){a.width=b;a.height=c}
G.prototype.setTo=G.prototype.zo=function(a,b,c,d){u&&(w.k(a,"number",G,"setTo:x"),w.k(b,"number",G,"setTo:y"),w.k(c,"number",G,"setTo:w"),w.k(d,"number",G,"setTo:h"));0>c&&w.ra(c,">= 0",G,"setTo:w");0>d&&w.ra(d,">= 0",G,"setTo:h");w.H(this);this.x=a;this.y=b;this.width=c;this.height=d;return this};G.prototype.set=G.prototype.set=function(a){u&&w.i(a,G,G,"set:r");w.H(this);this.x=a.x;this.y=a.y;this.width=a.width;this.height=a.height;return this};
G.prototype.setPoint=G.prototype.J=function(a){u&&w.i(a,F,G,"setPoint:p");w.H(this);this.x=a.x;this.y=a.y;return this};G.prototype.setSize=G.prototype.PH=function(a){u&&w.i(a,cb,G,"setSize:s");w.H(this);this.width=a.width;this.height=a.height;return this};G.prototype.copy=G.prototype.copy=function(){var a=new G;a.x=this.x;a.y=this.y;a.width=this.width;a.height=this.height;return a};G.prototype.Za=function(){this.$a=h;Object.freeze(this);return this};
G.prototype.O=function(){return Object.isFrozen(this)?this:this.copy().freeze()};G.prototype.freeze=function(){this.$a=h;return this};G.prototype.Ia=function(){Object.isFrozen(this)&&w.m("cannot thaw constant: "+this);this.$a=q;return this};
G.parse=function(a){if("string"===typeof a){for(var a=a.split(" "),b=0,c=0;""===a[b];)b++;var d=a[b++];d&&(c=parseFloat(d));for(var e=0;""===a[b];)b++;(d=a[b++])&&(e=parseFloat(d));for(var g=0;""===a[b];)b++;(d=a[b++])&&(g=parseFloat(d));for(var i=0;""===a[b];)b++;(d=a[b++])&&(i=parseFloat(d));return new G(c,e,g,i)}return new G};G.stringify=function(a){return a instanceof G?a.x.toString()+" "+a.y.toString()+" "+a.width.toString()+" "+a.height.toString():a.toString()};
G.prototype.toString=function(){return"Rect("+this.x+","+this.y+","+this.width+","+this.height+")"};G.prototype.equals=G.prototype.I=function(a){return!(a instanceof G)?q:this.x===a.x&&this.y===a.y&&this.width===a.width&&this.height===a.height};G.prototype.equalTo=G.prototype.Zy=function(a,b,c,d){return this.x===a&&this.y===b&&this.width===c&&this.height===d};G.prototype.Aj=function(a){return Sa(this.x,a.x)&&Sa(this.y,a.y)&&Sa(this.width,a.width)&&Sa(this.height,a.height)};
G.prototype.yi=function(a){return Ta(this.x,a.x)&&Ta(this.y,a.y)&&Ta(this.width,a.width)&&Ta(this.height,a.height)};G.prototype.containsPoint=G.prototype.ua=function(a){u&&w.i(a,F,G,"containsPoint:p");return this.x<=a.x&&this.x+this.width>=a.x&&this.y<=a.y&&this.y+this.height>=a.y};G.prototype.containsRect=G.prototype.Nl=function(a){u&&w.i(a,G,G,"containsRect:r");return this.x<=a.x&&a.x+a.width<=this.x+this.width&&this.y<=a.y&&a.y+a.height<=this.y+this.height};
G.prototype.contains=G.prototype.contains=function(a,b,c,d){u?(w.o(a,G,"contains:x"),w.o(b,G,"contains:y"),c===f?c=0:w.o(c,G,"contains:w"),d===f?d=0:w.o(d,G,"contains:h"),(0>c||0>d)&&w.m("Rect.contains:Width and height cannot be negative")):(c===f&&(c=0),d===f&&(d=0));return this.x<=a&&a+c<=this.x+this.width&&this.y<=b&&b+d<=this.y+this.height};G.prototype.reset=function(){w.H(this);this.height=this.width=this.y=this.x=0};
G.prototype.offset=G.prototype.offset=function(a,b){u&&(w.o(a,G,"offset:dx"),w.o(b,G,"offset:dy"));w.H(this);this.x+=a;this.y+=b;return this};G.prototype.inflate=G.prototype.Kg=function(a,b){u&&(w.o(a,G,"inflate:w"),w.o(b,G,"inflate:h"));return eb(this,b,a,b,a)};G.prototype.addMargin=G.prototype.wr=function(a){u&&w.i(a,gb,G,"addMargin:m");return eb(this,a.top,a.right,a.bottom,a.left)};
G.prototype.subtractMargin=G.prototype.YH=function(a){u&&w.i(a,gb,G,"subtractMargin:m");return eb(this,-a.top,-a.right,-a.bottom,-a.left)};G.prototype.grow=G.prototype.JK=function(a,b,c,d){u&&(w.o(a,G,"grow:t"),w.o(b,G,"grow:r"),w.o(c,G,"grow:b"),w.o(d,G,"grow:l"));return eb(this,a,b,c,d)};function eb(a,b,c,d,e){w.H(a);var g=a.width;c+e<=-g?(a.x+=g/2,a.width=0):(a.x-=e,a.width+=c+e);c=a.height;b+d<=-c?(a.y+=c/2,a.height=0):(a.y-=b,a.height+=b+d);return a}
G.prototype.intersectRect=G.prototype.WK=function(a){u&&w.i(a,G,G,"intersectRect:r");return hb(this,a.x,a.y,a.width,a.height)};G.prototype.intersect=G.prototype.VK=function(a,b,c,d){u&&(w.o(a,G,"intersect:x"),w.o(b,G,"intersect:y"),w.o(c,G,"intersect:w"),w.o(d,G,"intersect:h"),(0>c||0>d)&&w.m("Rect.intersect:Width and height cannot be negative"));return hb(this,a,b,c,d)};
function hb(a,b,c,d,e){w.H(a);var g=Math.max(a.x,b),i=Math.max(a.y,c),b=Math.min(a.x+a.width,b+d),c=Math.min(a.y+a.height,c+e);a.x=g;a.y=i;a.width=Math.max(0,b-g);a.height=Math.max(0,c-i);return a}G.prototype.intersectsRect=G.prototype.Le=function(a){u&&w.i(a,G,G,"intersectsRect:r");return this.LG(a.x,a.y,a.width,a.height)};
G.prototype.intersects=G.prototype.LG=function(a,b,c,d){u&&(w.o(a,G,"intersects:x"),w.o(b,G,"intersects:y"),w.o(a,G,"intersects:w"),w.o(b,G,"intersects:h"),(0>c||0>d)&&w.m("Rect.intersects:Width and height cannot be negative"));var e=this.width,g=this.x;if(Infinity!==e&&Infinity!==c&&(e+=g,c+=a,isNaN(c)||isNaN(e)||g>c||a>e))return q;a=this.height;e=this.y;return Infinity!==a&&Infinity!==d&&(a+=e,d+=b,isNaN(d)||isNaN(a)||e>d||b>a)?q:h};
G.prototype.unionPoint=G.prototype.bw=function(a){u&&w.i(a,F,G,"unionPoint:p");return this.Wb(a.x,a.y,0,0)};G.prototype.unionRect=G.prototype.Hi=function(a){u&&w.i(a,G,G,"unionRect:r");return this.Wb(a.x,a.y,a.width,a.height)};
G.prototype.union=G.prototype.kM=function(a,b,c,d){w.H(this);u?(w.o(a,G,"union:x"),w.o(b,G,"union:y"),c===f?c=0:w.o(c,G,"union:w"),d===f?d=0:w.o(d,G,"union:h"),(0>c||0>d)&&w.m("Rect.union:Width and height cannot be negative")):(c===f&&(c=0),d===f&&(d=0));return this.Wb(a,b,c,d)};G.prototype.Wb=function(a,b,c,d){var e=Math.min(this.x,a),g=Math.min(this.y,b),a=Math.max(this.x+this.width,a+c),b=Math.max(this.y+this.height,b+d);this.x=e;this.y=g;this.width=a-e;this.height=b-g;return this};
G.prototype.setSpot=G.prototype.hm=function(a,b,c){u&&(w.o(a,G,"setSpot:x"),w.o(b,G,"setSpot:y"),w.i(c,H,G,"setSpot:spot"));w.H(this);this.x=a-c.offsetX-c.x*this.width;this.y=b-c.offsetY-c.y*this.height;return this};var jb;
G.contains=jb=function(a,b,c,d,e,g,i,j){u?(w.o(a,G,"contains:rx"),w.o(b,G,"contains:ry"),w.o(c,G,"contains:rw"),w.o(d,G,"contains:rh"),w.o(e,G,"contains:x"),w.o(g,G,"contains:y"),i===f?i=0:w.o(i,G,"contains:w"),j===f?j=0:w.o(j,G,"contains:h"),(0>c||0>d||0>i||0>j)&&w.m("Rect.contains:Width and height cannot be negative")):(i===f&&(i=0),j===f&&(j=0));return a<=e&&e+i<=a+c&&b<=g&&g+j<=b+d};
G.intersects=function(a,b,c,d,e,g,i,j){u&&(w.o(a,G,"intersects:rx"),w.o(b,G,"intersects:ry"),w.o(c,G,"intersects:rw"),w.o(d,G,"intersects:rh"),w.o(e,G,"intersects:x"),w.o(g,G,"intersects:y"),w.o(i,G,"intersects:w"),w.o(j,G,"intersects:h"),(0>c||0>d||0>i||0>j)&&w.m("Rect.intersects:Width and height cannot be negative"));c+=a;i+=e;if(a>i||e>c)return q;a=d+b;j+=g;return b>j||g>a?q:h};w.g(G,"left",G.prototype.left);
w.defineProperty(G,{left:"left"},t("x"),function(a){w.H(this,a);u&&w.k(a,"number",G,"left");this.x=a});w.g(G,"top",G.prototype.top);w.defineProperty(G,{top:"top"},t("y"),function(a){w.H(this,a);u&&w.k(a,"number",G,"top");this.y=a});w.g(G,"right",G.prototype.right);w.defineProperty(G,{right:"right"},function(){return this.x+this.width},function(a){w.H(this,a);u&&w.o(a,G,"right");this.x+=a-(this.x+this.width)});w.g(G,"bottom",G.prototype.bottom);
w.defineProperty(G,{bottom:"bottom"},function(){return this.y+this.height},function(a){w.H(this,a);u&&w.o(a,G,"top");this.y+=a-(this.y+this.height)});w.g(G,"position",G.prototype.position);w.defineProperty(G,{position:"position"},function(){return new F(this.x,this.y)},function(a){w.H(this,a);u&&w.i(a,F,G,"position");this.x=a.x;this.y=a.y});w.g(G,"size",G.prototype.size);
w.defineProperty(G,{size:"size"},function(){return new cb(this.width,this.height)},function(a){w.H(this,a);u&&w.i(a,cb,G,"size");this.width=a.width;this.height=a.height});w.g(G,"center",G.prototype.Wu);w.defineProperty(G,{Wu:"center"},function(){return new F(this.x+this.width/2,this.y+this.height/2)},function(a){w.H(this,a);u&&w.i(a,F,G,"center");this.x=a.x-this.width/2;this.y=a.y-this.height/2});w.g(G,"centerX",G.prototype.pa);
w.defineProperty(G,{pa:"centerX"},function(){return this.x+this.width/2},function(a){w.H(this,a);u&&w.o(a,G,"centerX");this.x=a-this.width/2});w.g(G,"centerY",G.prototype.ta);w.defineProperty(G,{ta:"centerY"},function(){return this.y+this.height/2},function(a){w.H(this,a);u&&w.o(a,G,"centerY");this.y=a-this.height/2});G.prototype.isReal=G.prototype.T=function(){return isFinite(this.x)&&isFinite(this.y)&&isFinite(this.width)&&isFinite(this.height)};
G.prototype.isEmpty=G.prototype.YK=function(){return 0===this.width&&0===this.height};function gb(a,b,c,d){a===f?this.left=this.bottom=this.right=this.top=0:b===f?this.left=this.bottom=this.right=this.top=a:c===f?(d=b,this.top=a,this.right=b,this.bottom=a,this.left=d):d!==f?(this.top=a,this.right=b,this.bottom=c,this.left=d):w.m("Invalid arguments to Margin constructor")}w.P("Margin",gb);w.Jd(gb,{top:h,right:h,bottom:h,left:h});
gb.prototype.Xa=function(a){u&&w.i(a,gb,gb,"assign:m");this.top=a.top;this.right=a.right;this.bottom=a.bottom;this.left=a.left};gb.prototype.setTo=gb.prototype.zo=function(a,b,c,d){u&&(w.k(a,"number",gb,"setTo:t"),w.k(b,"number",gb,"setTo:r"),w.k(c,"number",gb,"setTo:b"),w.k(d,"number",gb,"setTo:l"));w.H(this);this.top=a;this.right=b;this.bottom=c;this.left=d;return this};
gb.prototype.set=gb.prototype.set=function(a){u&&w.i(a,gb,gb,"assign:m");w.H(this);this.top=a.top;this.right=a.right;this.bottom=a.bottom;this.left=a.left;return this};gb.prototype.copy=gb.prototype.copy=function(){var a=new gb;a.top=this.top;a.right=this.right;a.bottom=this.bottom;a.left=this.left;return a};gb.prototype.Za=function(){this.$a=h;Object.freeze(this);return this};gb.prototype.O=function(){return Object.isFrozen(this)?this:this.copy().freeze()};
gb.prototype.freeze=function(){this.$a=h;return this};gb.prototype.Ia=function(){Object.isFrozen(this)&&w.m("cannot thaw constant: "+this);this.$a=q;return this};gb.parse=function(a){if("string"===typeof a){for(var a=a.split(" "),b=0,c=0;""===a[b];)b++;var d=a[b++];d&&(c=parseFloat(d));for(var e=0;""===a[b];)b++;(d=a[b++])&&(e=parseFloat(d));for(var g=0;""===a[b];)b++;(d=a[b++])&&(g=parseFloat(d));for(var i=0;""===a[b];)b++;(d=a[b++])&&(i=parseFloat(d));return new gb(c,e,g,i)}return new gb};
gb.stringify=function(a){return a instanceof gb?a.top.toString()+" "+a.right.toString()+" "+a.bottom.toString()+" "+a.left.toString():a.toString()};gb.prototype.toString=function(){return"Margin("+this.top+","+this.right+","+this.bottom+","+this.left+")"};gb.prototype.equals=gb.prototype.I=function(a){return!(a instanceof gb)?q:this.top===a.top&&this.right===a.right&&this.bottom===a.bottom&&this.left===a.left};
gb.prototype.equalTo=gb.prototype.Zy=function(a,b,c,d){return this.top===a&&this.right===b&&this.bottom===c&&this.left===d};gb.prototype.Aj=function(a){return Sa(this.top,a.top)&&Sa(this.right,a.right)&&Sa(this.bottom,a.bottom)&&Sa(this.left,a.left)};gb.prototype.yi=function(a){return Ta(this.top,a.top)&&Ta(this.right,a.right)&&Ta(this.bottom,a.bottom)&&Ta(this.left,a.left)};gb.prototype.isReal=gb.prototype.T=function(){return isFinite(this.top)&&isFinite(this.right)&&isFinite(this.bottom)&&isFinite(this.left)};
function Wa(){this.m11=1;this.m21=this.m12=0;this.m22=1;this.dy=this.dx=0}w.Jd(Wa,{m11:h,m12:h,m21:h,m22:h,dx:h,dy:h});Wa.prototype.set=Wa.prototype.set=function(a){u&&w.i(a,Wa,Wa,"set:t");this.m11=a.m11;this.m12=a.m12;this.m21=a.m21;this.m22=a.m22;this.dx=a.dx;this.dy=a.dy;return this};Wa.prototype.copy=Wa.prototype.copy=function(){var a=new Wa;a.m11=this.m11;a.m12=this.m12;a.m21=this.m21;a.m22=this.m22;a.dx=this.dx;a.dy=this.dy;return a};
Wa.prototype.toString=function(){return"Transform("+this.m11+","+this.m12+","+this.m21+","+this.m22+","+this.dx+","+this.dy+")"};Wa.prototype.equals=Wa.prototype.I=function(a){return!(a instanceof Wa)?q:this.m11===a.m11&&this.m12===a.m12&&this.m21===a.m21&&this.m22===a.m22&&this.dx===a.dx&&this.dy===a.dy};Wa.prototype.reset=Wa.prototype.reset=function(){this.m11=1;this.m21=this.m12=0;this.m22=1;this.dy=this.dx=0};
Wa.prototype.multiply=Wa.prototype.multiply=function(a){u&&w.i(a,Wa,Wa,"multiply:matrix");var b=this.m12*a.m11+this.m22*a.m12,c=this.m11*a.m21+this.m21*a.m22,d=this.m12*a.m21+this.m22*a.m22,e=this.m11*a.dx+this.m21*a.dy+this.dx,g=this.m12*a.dx+this.m22*a.dy+this.dy;this.m11=this.m11*a.m11+this.m21*a.m12;this.m12=b;this.m21=c;this.m22=d;this.dx=e;this.dy=g;return this};
Wa.prototype.multiplyInverted=Wa.prototype.iH=function(a){u&&w.i(a,Wa,Wa,"multiplyInverted:matrix");var b=1/(a.m11*a.m22-a.m12*a.m21),c=a.m22*b,d=-a.m12*b,e=-a.m21*b,g=a.m11*b,i=b*(a.m21*a.dy-a.m22*a.dx),j=b*(a.m12*a.dx-a.m11*a.dy),a=this.m12*c+this.m22*d,b=this.m11*e+this.m21*g,e=this.m12*e+this.m22*g,g=this.m11*i+this.m21*j+this.dx,i=this.m12*i+this.m22*j+this.dy;this.m11=this.m11*c+this.m21*d;this.m12=a;this.m21=b;this.m22=e;this.dx=g;this.dy=i;return this};
Wa.prototype.invert=Wa.prototype.gD=function(){var a=1/(this.m11*this.m22-this.m12*this.m21),b=-this.m12*a,c=-this.m21*a,d=this.m11*a,e=a*(this.m21*this.dy-this.m22*this.dx),g=a*(this.m12*this.dx-this.m11*this.dy);this.m11=this.m22*a;this.m12=b;this.m21=c;this.m22=d;this.dx=e;this.dy=g};
Wa.prototype.rotate=Wa.prototype.rotate=function(a,b,c){u&&(w.o(a,Wa,"rotate:angle"),w.o(b,Wa,"rotate:rx"),w.o(c,Wa,"rotate:ry"));this.translate(b,c);var d=a*Math.PI/180,a=Math.cos(d),d=Math.sin(d),e=this.m12*a+this.m22*d,g=this.m11*-d+this.m21*a,i=this.m12*-d+this.m22*a;this.m11=this.m11*a+this.m21*d;this.m12=e;this.m21=g;this.m22=i;this.translate(-b,-c)};
Wa.prototype.translate=Wa.prototype.translate=function(a,b){u&&(w.o(a,Wa,"translate:x"),w.o(b,Wa,"translate:y"));this.dx+=this.m11*a+this.m21*b;this.dy+=this.m12*a+this.m22*b};Wa.prototype.scale=Wa.prototype.scale=function(a,b){b===f&&(b=a);u&&(w.o(a,Wa,"translate:sx"),w.o(b,Wa,"translate:sy"));this.m11*=a;this.m12*=a;this.m21*=b;this.m22*=b};
Wa.prototype.transformPoint=Wa.prototype.Ta=function(a){u&&w.i(a,F,Wa,"transformPoint:p");var b=a.x,c=a.y;a.x=b*this.m11+c*this.m21+this.dx;a.y=b*this.m12+c*this.m22+this.dy;return a};Wa.prototype.invertedTransformPoint=Wa.prototype.Ci=function(a){u&&w.i(a,F,Wa,"invertedTransformPoint:p");var b=1/(this.m11*this.m22-this.m12*this.m21),c=-this.m12*b,d=this.m11*b,e=b*(this.m12*this.dx-this.m11*this.dy),g=a.x,i=a.y;a.x=g*this.m22*b+i*-this.m21*b+b*(this.m21*this.dy-this.m22*this.dx);a.y=g*c+i*d+e;return a};
Wa.prototype.transformRect=Wa.prototype.HE=function(a){u&&w.i(a,G,Wa,"transformRect:rect");var b=a.x,c=a.y,d=b+a.width,e=c+a.height,g=this.m11,i=this.m12,j=this.m21,k=this.m22,l=this.dx,m=this.dy,p=b*g+c*j+l,r=b*i+c*k+m,s=d*g+c*j+l,c=d*i+c*k+m,v=b*g+e*j+l,b=b*i+e*k+m,g=d*g+e*j+l,d=d*i+e*k+m,e=p,i=r,p=Math.min(p,s),e=Math.max(e,s),i=Math.min(i,c),r=Math.max(r,c),p=Math.min(p,v),e=Math.max(e,v),i=Math.min(i,b),r=Math.max(r,b),p=Math.min(p,g),e=Math.max(e,g),i=Math.min(i,d),r=Math.max(r,d);a.x=p;a.y=
i;a.width=e-p;a.height=r-i};function kb(a,b){return new F(b.x*a.m11+b.y*a.m21+a.dx,b.x*a.m12+b.y*a.m22+a.dy)}Wa.prototype.isIdentity=Wa.prototype.as=function(){return 1===this.m11&&0===this.m12&&0===this.m21&&1===this.m22&&0===this.dx&&0===this.dy};function H(a,b,c,d){a===f?this.offsetY=this.offsetX=this.y=this.x=0:(b===f&&(b=0),c===f&&(c=0),d===f&&(d=0),this.x=a,this.y=b,this.offsetX=c,this.offsetY=d)}w.P("Spot",H);w.Jd(H,{x:h,y:h,offsetX:h,offsetY:h});
H.prototype.Xa=function(a){u&&w.i(a,H,H,"assign:s");this.x=a.x;this.y=a.y;this.offsetX=a.offsetX;this.offsetY=a.offsetY};H.prototype.setTo=H.prototype.zo=function(a,b,c,d){u&&(lb(a,"setTo:x"),lb(b,"setTo:y"),nb(c,"setTo:offx"),nb(d,"setTo:offy"));w.H(this);this.x=a;this.y=b;this.offsetX=c;this.offsetY=d;return this};H.prototype.set=H.prototype.set=function(a){u&&w.i(a,H,H,"set:s");w.H(this);this.x=a.x;this.y=a.y;this.offsetX=a.offsetX;this.offsetY=a.offsetY;return this};
H.prototype.copy=H.prototype.copy=function(){var a=new H;a.x=this.x;a.y=this.y;a.offsetX=this.offsetX;a.offsetY=this.offsetY;return a};H.prototype.Za=function(){this.$a=h;Object.freeze(this);return this};H.prototype.O=function(){return Object.isFrozen(this)?this:this.copy().freeze()};H.prototype.freeze=function(){this.$a=h;return this};H.prototype.Ia=function(){Object.isFrozen(this)&&w.m("cannot thaw constant: "+this);this.$a=q;return this};function ob(a,b){a.x=NaN;a.y=NaN;a.offsetX=b;return a}
function lb(a,b){(isNaN(a)||1<a||0>a)&&w.ra(a,"0 <= "+b+" <= 1",H,b)}function nb(a,b){(isNaN(a)||Infinity===a||-Infinity===a)&&w.ra(a,"real number, not NaN or Infinity",H,b)}var pb;
H.parse=pb=function(a){if("string"===typeof a){a=a.trim();if("None"===a)return w.NONE;if("TopLeft"===a)return w.yw;if("Top"===a||"TopCenter"===a||"MiddleTop"===a)return w.Ho;if("TopRight"===a)return w.Aw;if("Left"===a||"LeftCenter"===a||"MiddleLeft"===a)return w.Fo;if("Center"===a)return w.ow;if("Right"===a||"RightCenter"===a||"MiddleRight"===a)return w.Go;if("BottomLeft"===a)return w.jw;if("Bottom"===a||"BottomCenter"===a||"MiddleBottom"===a)return w.Eo;if("BottomRight"===a)return w.lw;if("TopSide"===
a)return w.Cw;if("LeftSide"===a)return w.rw;if("RightSide"===a)return w.ww;if("BottomSide"===a)return w.nw;if("TopBottomSides"===a)return w.xw;if("LeftRightSides"===a)return w.qw;if("TopLeftSides"===a)return w.zw;if("TopRightSides"===a)return w.Bw;if("BottomLeftSides"===a)return w.kw;if("BottomRightSides"===a)return w.mw;if("NotTopSide"===a)return w.vw;if("NotLeftSide"===a)return w.tw;if("NotRightSide"===a)return w.uw;if("NotBottomSide"===a)return w.sw;if("AllSides"===a)return w.iw;if("Default"===
a)return w.pw;for(var a=a.split(" "),b=0,c=0;""===a[b];)b++;var d=a[b++];d&&(c=parseFloat(d));for(var e=0;""===a[b];)b++;(d=a[b++])&&(e=parseFloat(d));for(var g=0;""===a[b];)b++;(d=a[b++])&&(g=parseFloat(d));for(var i=0;""===a[b];)b++;(d=a[b++])&&(i=parseFloat(d));return new H(c,e,g,i)}return new H};H.stringify=function(a){return a instanceof H?rb(a)?a.x.toString()+" "+a.y.toString()+" "+a.offsetX.toString()+" "+a.offsetY.toString():a.toString():a.toString()};
H.prototype.toString=function(){return rb(this)?0===this.offsetX&&0===this.offsetY?"Spot("+this.x+","+this.y+")":"Spot("+this.x+","+this.y+","+this.offsetX+","+this.offsetY+")":this.I(w.NONE)?"None":this.I(w.yw)?"TopLeft":this.I(w.Ho)?"Top":this.I(w.Aw)?"TopRight":this.I(w.Fo)?"Left":this.I(w.ow)?"Center":this.I(w.Go)?"Right":this.I(w.jw)?"BottomLeft":this.I(w.Eo)?"Bottom":this.I(w.lw)?"BottomRight":this.I(w.Cw)?"TopSide":this.I(w.rw)?"LeftSide":this.I(w.ww)?"RightSide":this.I(w.nw)?"BottomSide":
this.I(w.xw)?"TopBottomSides":this.I(w.qw)?"LeftRightSides":this.I(w.zw)?"TopLeftSides":this.I(w.Bw)?"TopRightSides":this.I(w.kw)?"BottomLeftSides":this.I(w.mw)?"BottomRightSides":this.I(w.vw)?"NotTopSide":this.I(w.tw)?"NotLeftSide":this.I(w.uw)?"NotRightSide":this.I(w.sw)?"NotBottomSide":this.I(w.iw)?"AllSides":this.I(w.pw)?"Default":"None"};
H.prototype.equals=H.prototype.I=function(a){return!(a instanceof H)?q:(this.x===a.x||isNaN(this.x)&&isNaN(a.x))&&(this.y===a.y||isNaN(this.y)&&isNaN(a.y))&&this.offsetX===a.offsetX&&this.offsetY===a.offsetY};H.prototype.opposite=H.prototype.xL=function(){return new H(0.5-(this.x-0.5),0.5-(this.y-0.5),-this.offsetX,-this.offsetY)};H.prototype.includesSide=H.prototype.OK=function(a){if(!sb(this)||!sb(a))return q;a=a.offsetY;return(this.offsetY&a)===a};
function rb(a){return!isNaN(a.x)&&!isNaN(a.y)}function yb(a){return isNaN(a.x)||isNaN(a.y)}function sb(a){return yb(a)&&1===a.offsetX&&0!==a.offsetY}function Cb(a){return isNaN(a.x)&&isNaN(a.y)&&-1===a.offsetX&&0===a.offsetY}w.kd=1;w.Oc=2;w.Xc=4;w.Wc=8;w.NONE=ob(new H(0,0,0,0),0).Za();w.pw=ob(new H(0,0,-1,0),-1).Za();w.yw=(new H(0,0,0,0)).Za();w.Ho=(new H(0.5,0,0,0)).Za();w.Aw=(new H(1,0,0,0)).Za();w.Fo=(new H(0,0.5,0,0)).Za();w.ow=(new H(0.5,0.5,0,0)).Za();w.Go=(new H(1,0.5,0,0)).Za();
w.jw=(new H(0,1,0,0)).Za();w.Eo=(new H(0.5,1,0,0)).Za();w.lw=(new H(1,1,0,0)).Za();w.Cw=ob(new H(0,0,1,w.kd),1).Za();w.rw=ob(new H(0,0,1,w.Oc),1).Za();w.ww=ob(new H(0,0,1,w.Xc),1).Za();w.nw=ob(new H(0,0,1,w.Wc),1).Za();w.xw=ob(new H(0,0,1,w.kd|w.Wc),1).Za();w.qw=ob(new H(0,0,1,w.Oc|w.Xc),1).Za();w.zw=ob(new H(0,0,1,w.kd|w.Oc),1).Za();w.Bw=ob(new H(0,0,1,w.kd|w.Xc),1).Za();w.kw=ob(new H(0,0,1,w.Wc|w.Oc),1).Za();w.mw=ob(new H(0,0,1,w.Wc|w.Xc),1).Za();w.vw=ob(new H(0,0,1,w.Oc|w.Xc|w.Wc),1).Za();
w.tw=ob(new H(0,0,1,w.kd|w.Xc|w.Wc),1).Za();w.uw=ob(new H(0,0,1,w.kd|w.Oc|w.Wc),1).Za();w.sw=ob(new H(0,0,1,w.kd|w.Oc|w.Xc),1).Za();w.iw=ob(new H(0,0,1,w.kd|w.Oc|w.Xc|w.Wc),1).Za();var Eb;H.None=Eb=w.NONE;var Ib;H.Default=Ib=w.pw;var Jb;H.TopLeft=Jb=w.yw;var Kb;H.TopCenter=Kb=w.Ho;var Lb;H.TopRight=Lb=w.Aw;H.LeftCenter=w.Fo;var Mb;H.Center=Mb=w.ow;H.RightCenter=w.Go;var Pb;H.BottomLeft=Pb=w.jw;var Qb;H.BottomCenter=Qb=w.Eo;var Rb;H.BottomRight=Rb=w.lw;var Sb;H.MiddleTop=Sb=w.Ho;var Tb;
H.MiddleLeft=Tb=w.Fo;var Ub;H.MiddleRight=Ub=w.Go;var Yb;H.MiddleBottom=Yb=w.Eo;H.Top=w.Ho;var Zb;H.Left=Zb=w.Fo;var $b;H.Right=$b=w.Go;H.Bottom=w.Eo;var ac;H.TopSide=ac=w.Cw;var dc;H.LeftSide=dc=w.rw;var ec;H.RightSide=ec=w.ww;var fc;H.BottomSide=fc=w.nw;H.TopBottomSides=w.xw;H.LeftRightSides=w.qw;H.TopLeftSides=w.zw;H.TopRightSides=w.Bw;H.BottomLeftSides=w.kw;H.BottomRightSides=w.mw;H.NotTopSide=w.vw;H.NotLeftSide=w.tw;H.NotRightSide=w.uw;H.NotBottomSide=w.sw;var gc;H.AllSides=gc=w.iw;
var hc=4*((Math.sqrt(2)-1)/3),ic=(new F(0,0)).Za(),jc=(new cb(Infinity,Infinity)).Za(),kc=(new F(-Infinity,-Infinity)).Za(),oc=(new F(Infinity,Infinity)).Za(),pc=(new cb(0,0)).Za(),qc=(new F(NaN,NaN)).Za(),rc=n;function sc(a){if(0>=a)return 0;var b=rc;if(b===n){for(var b=[],c=0;2E3>=c;c++)b[c]=Math.sqrt(c);rc=b}return 1>a?(c=1/a,2E3>=c?1/b[c|0]:Math.sqrt(a)):2E3>=a?b[a|0]:Math.sqrt(a)}function Ta(a,b){var c=a-b;return 0.5>c&&-0.5<c}function Sa(a,b){var c=a-b;return 5E-8>c&&-5E-8<c}
function uc(a,b,c,d,e,g,i){0>=e&&(e=1E-6);var j,k,l,m;a<c?(k=a,j=c):(k=c,j=a);b<d?(m=b,l=d):(m=d,l=b);if(a===c)return m<=i&&i<=l&&a-e<=g&&g<=a+e;if(b===d)return k<=g&&g<=j&&b-e<=i&&i<=b+e;j+=e;k-=e;if(k<=g&&g<=j&&(l+=e,m-=e,m<=i&&i<=l))if(j-k>l-m)if(a-c>e||c-a>e){if(g=(d-b)/(c-a)*(g-a)+b,g-e<=i&&i<=g+e)return h}else return h;else if(b-d>e||d-b>e){if(i=(c-a)/(d-b)*(i-b)+a,i-e<=g&&g<=i+e)return h}else return h;return q}
function vc(a,b,c,d,e,g,i,j,k,l,m,p){if(!uc(a,b,i,j,p,c,d)||!uc(a,b,i,j,p,e,g)){var r=(a+c)/2,s=(b+d)/2,v=(c+e)/2,y=(d+g)/2,e=(e+i)/2,g=(g+j)/2,d=(r+v)/2,c=(s+y)/2,v=(v+e)/2,y=(y+g)/2,C=(d+v)/2,E=(c+y)/2;return vc(a,b,r,s,d,c,C,E,k,l,m,p)||vc(C,E,v,y,e,g,i,j,k,l,m,p)}return uc(a,b,i,j,p,l,m)}
function wc(a,b,c,d,e,g,i,j,k,l){if(!uc(a,b,i,j,k,c,d)||!uc(a,b,i,j,k,e,g)){var m=(a+c)/2,p=(b+d)/2,r=(c+e)/2,s=(d+g)/2,e=(e+i)/2,g=(g+j)/2,d=(m+r)/2,c=(p+s)/2,r=(r+e)/2,s=(s+g)/2,v=(d+r)/2,y=(c+s)/2;wc(a,b,m,p,d,c,v,y,k,l);wc(v,y,r,s,e,g,i,j,k,l)}else l.Wb(a,b,0,0),l.Wb(i,j,0,0)}
function zc(a,b,c,d,e,g,i,j,k,l){if(!uc(a,b,i,j,k,c,d)||!uc(a,b,i,j,k,e,g)){var m=(a+c)/2,p=(b+d)/2,r=(c+e)/2,s=(d+g)/2,e=(e+i)/2,g=(g+j)/2,d=(m+r)/2,c=(p+s)/2,r=(r+e)/2,s=(s+g)/2,v=(d+r)/2,y=(c+s)/2;zc(a,b,m,p,d,c,v,y,k,l);zc(v,y,r,s,e,g,i,j,k,l)}else 0===l.length&&l.push([a,b]),l.push([i,j])}function Ac(a,b,c,d,e,g,i,j,k,l){if(uc(a,b,e,g,l,c,d))return uc(a,b,e,g,l,j,k);var m=(a+c)/2,p=(b+d)/2,c=(c+e)/2,d=(d+g)/2,r=(m+c)/2,s=(p+d)/2;return Ac(a,b,m,p,r,s,i,j,k,l)||Ac(r,s,c,d,e,g,i,j,k,l)}
function Bc(a,b,c,d,e,g,i,j){if(uc(a,b,e,g,i,c,d))j.Wb(a,b,0,0),j.Wb(e,g,0,0);else{var k=(a+c)/2,l=(b+d)/2,c=(c+e)/2,d=(d+g)/2,m=(k+c)/2,p=(l+d)/2;Bc(a,b,k,l,m,p,i,j);Bc(m,p,c,d,e,g,i,j)}}function Cc(a,b,c,d,e,g,i,j){if(uc(a,b,e,g,i,c,d))0===j.length&&j.push([a,b]),j.push([e,g]);else{var k=(a+c)/2,l=(b+d)/2,c=(c+e)/2,d=(d+g)/2,m=(k+c)/2,p=(l+d)/2;Cc(a,b,k,l,m,p,i,j);Cc(m,p,c,d,e,g,i,j)}}
function Gc(a,b,c,d,e,g,i,j,k,l,m,p,r,s){0>=r&&(r=1E-6);if(!uc(a,b,i,j,r,c,d)||!uc(a,b,i,j,r,e,g)){var v=(a+c)/2,y=(b+d)/2,c=(c+e)/2,d=(d+g)/2,e=(e+i)/2,g=(g+j)/2,C=(v+c)/2,E=(y+d)/2,c=(c+e)/2,d=(d+g)/2,I=(C+c)/2,D=(E+d)/2,M=(m-k)*(m-k)+(p-l)*(p-l),N=q;Gc(a,b,v,y,C,E,I,D,k,l,m,p,r,s)&&(a=(s.x-k)*(s.x-k)+(s.y-l)*(s.y-l),a<M&&(M=a,N=h));b=s.x;v=s.y;Gc(I,D,c,d,e,g,i,j,k,l,m,p,r,s)&&(a=(s.x-k)*(s.x-k)+(s.y-l)*(s.y-l),a<M?N=h:(s.x=b,s.y=v));return N}v=(a-i)*(l-p)-(b-j)*(k-m);if(!v)return q;r=((a*j-b*i)*
(k-m)-(a-i)*(k*p-l*m))/v;v=((a*j-b*i)*(l-p)-(b-j)*(k*p-l*m))/v;if((k>m?k-m:m-k)<(l>p?l-p:p-l)){if(b<j?(k=b,i=j):(k=j,i=b),v<k||v>i)return q}else if(a<i?k=a:(k=i,i=a),r<k||r>i)return q;s.x=r;s.y=v;return h}
function Hc(a,b,c,d,e,g,i,j,k,l,m,p,r){var s=0;0>=r&&(r=1E-6);if(!uc(a,b,i,j,r,c,d)||!uc(a,b,i,j,r,e,g))var v=(a+c)/2,y=(b+d)/2,C=(c+e)/2,E=(d+g)/2,e=(e+i)/2,g=(g+j)/2,d=(v+C)/2,c=(y+E)/2,C=(C+e)/2,E=(E+g)/2,I=(d+C)/2,D=(c+E)/2,s=s+Hc(a,b,v,y,d,c,I,D,k,l,m,p,r),s=s+Hc(I,D,C,E,e,g,i,j,k,l,m,p,r);else{r=(a-i)*(l-p)-(b-j)*(k-m);if(!r)return s;v=((a*j-b*i)*(k-m)-(a-i)*(k*p-l*m))/r;y=((a*j-b*i)*(l-p)-(b-j)*(k*p-l*m))/r;if(v>=m)return s;if((k>m?k-m:m-k)<(l>p?l-p:p-l)){if(b<j?(k=b,a=j):(k=j,a=b),y<k||y>
a)return s}else if(a<i?(k=a,a=i):k=i,v<k||v>a)return s;0<r?s++:0>r&&s--}return s}function Ic(a,b,c,d,e,g,i){if(Sa(a,c)){var j;b<d?(j=b,c=d):(j=d,c=b);d=g;if(d<j)return i.x=a,i.y=j,q;if(d>c)return i.x=a,i.y=c,q;i.x=a;i.y=d;return h}if(Sa(b,d)){a<c?j=a:(j=c,c=a);d=e;if(d<j)return i.x=j,i.y=b,q;if(d>c)return i.x=c,i.y=b,q;i.x=d;i.y=b;return h}j=((a-e)*(a-c)+(b-g)*(b-d))/((c-a)*(c-a)+(d-b)*(d-b));if(-5E-6>j)return i.x=a,i.y=b,q;if(1.000005<j)return i.x=c,i.y=d,q;i.x=a+j*(c-a);i.y=b+j*(d-b);return h}
function Jc(a,b,c,d,e,g,i,j,k){if(Ta(a,c)&&Ta(b,d))return k.x=a,k.y=b,q;if(Sa(e,i)){if(Sa(a,c))return Ic(a,b,c,d,e,g,k),q;g=(d-b)/(c-a)*(e-a)+b;return Ic(a,b,c,d,e,g,k)}j=(j-g)/(i-e);if(Sa(a,c)){g=j*(a-e)+g;b<d?(i=b,c=d):(i=d,c=b);if(g<i)return k.x=a,k.y=i,q;if(g>c)return k.x=a,k.y=c,q;k.x=a;k.y=g;return h}i=(d-b)/(c-a);if(Sa(j,i))return Ic(a,b,c,d,e,g,k),q;e=(i*a-j*e+g-b)/(i-j);if(Sa(i,0)){a<c?i=a:(i=c,c=a);if(e<i)return k.x=i,k.y=b,q;if(e>c)return k.x=c,k.y=b,q;k.x=e;k.y=b;return h}g=i*(e-a)+b;
return Ic(a,b,c,d,e,g,k)}
function Kc(a,b,c,d,e,g,i,j,k){function l(c,d){var e=(c-a)*(c-a)+(d-b)*(d-b);e<m&&(m=e,k.x=c,k.y=d)}var m=Infinity;l(k.x,k.y);var p,r,s,v;e<i?(p=e,r=i):(p=i,r=e);g<j?(s=e,v=i):(s=i,v=e);p=(r-p)/2+0;s=(v-s)/2+0;e=(e+i)/2;g=(g+j)/2;0===p||0===s||(0.5>(c>a?c-a:a-c)?(p=1-(c-e)*(c-e)/(p*p),0>p||(p=Math.sqrt(p),d=-s*p+g,l(c,s*p+g),l(c,d))):(c=(d-b)/(c-a),d=1/(p*p)+c*c/(s*s),j=2*c*(b-c*a)/(s*s)-2*c*g/(s*s)-2*e/(p*p),s=j*j-4*d*(2*c*a*g/(s*s)-2*b*g/(s*s)+g*g/(s*s)+e*e/(p*p)-1+(b-c*a)*(b-c*a)/(s*s)),0>s||(p=
Math.sqrt(s),s=(-j+p)/(2*d),l(s,c*s-c*a+b),s=(-j-p)/(2*d),l(s,c*s-c*a+b))))}function Pc(a,b,c,d,e,g,i,j,k){var l=1E21,m=a,p=b;if(Jc(a,b,a,d,e,g,i,j,k)){var r=(k.x-e)*(k.x-e)+(k.y-g)*(k.y-g);r<l&&(l=r,m=k.x,p=k.y)}Jc(c,b,c,d,e,g,i,j,k)&&(r=(k.x-e)*(k.x-e)+(k.y-g)*(k.y-g),r<l&&(l=r,m=k.x,p=k.y));Jc(a,b,c,b,e,g,i,j,k)&&(r=(k.x-e)*(k.x-e)+(k.y-g)*(k.y-g),r<l&&(l=r,m=k.x,p=k.y));Jc(a,d,c,d,e,g,i,j,k)&&(r=(k.x-e)*(k.x-e)+(k.y-g)*(k.y-g),r<l&&(l=r,m=k.x,p=k.y));k.x=m;k.y=p;return 1E21>l}
function Qc(a,b,c){var d=b.x,e=b.y,g=c.x,i=c.y,j=a.left,k=a.right,l=a.top,m=a.bottom;return d===g?(e<i?(a=e,g=i):(a=i,g=e),j<=d&&d<=k&&a<=m&&g>=l):e===i?(d<g?a=d:(a=g,g=d),l<=e&&e<=m&&a<=k&&g>=j):a.ua(b)||a.ua(c)||Rc(j,l,k,l,d,e,g,i)||Rc(k,l,k,m,d,e,g,i)||Rc(k,m,j,m,d,e,g,i)||Rc(j,m,j,l,d,e,g,i)?h:q}function Rc(a,b,c,d,e,g,i,j){return 0>=Sc(a,b,c,d,e,g)*Sc(a,b,c,d,i,j)&&0>=Sc(e,g,i,j,a,b)*Sc(e,g,i,j,c,d)}
function Sc(a,b,c,d,e,g){c-=a;d-=b;a=e-a;b=g-b;g=a*d-b*c;0===g&&(g=a*c+b*d,0<g&&(g=(a-c)*c+(b-d)*d,0>g&&(g=0)));return 0>g?-1:0<g?1:0}function $c(a){0>a&&(a+=360);360<=a&&(a-=360);return a}
function ad(a,b,c,d,e,g){var i=Math.PI;g||(d*=i/180,e*=i/180);for(var g=d<e?1:-1,j=[],k=i/2,l=d,d=Math.min(2*i+1E-5,Math.abs(e-d));1E-5<d;){var e=l+g*Math.min(d,k),m=(e-l)/2,p=c*Math.cos(m),r=c*Math.sin(m),s=0.5522847498*Math.tan(m),i=p+s*r,p=-r+s*p,r=-p,s=m+l,m=Math.cos(s),s=Math.sin(s);j.push({x1:a+c*Math.cos(l),y1:b+c*Math.sin(l),x2:a+i*m-p*s,y2:b+i*s+p*m,Cf:a+i*m-r*s,Df:b+i*s+r*m,Uc:a+c*Math.cos(e),Vc:b+c*Math.sin(e)});d-=Math.abs(e-l);l=e}return j}
function bd(a,b,c,d,e,g){var c=Math.floor((a-c)/e)*e+c,d=Math.floor((b-d)/g)*g+d,i=c;c+e-a<e/2&&(i=c+e);a=d;d+g-b<g/2&&(a=d+g);return new F(i,a)}function cd(a,b){var c=Math.max(a,b),d=Math.min(a,b),e=1,g=1;do e=c%d,c=g=d,d=e;while(0<e);return g}
function dd(a){w.ic(this);a===f?a=ed:u&&w.jb(a,dd,dd,"constructor:type");this.S=a;this.Hc=this.Ac=this.Nb=this.Bb=0;this.hk=new z(fd);this.ot=this.hk.Ib;this.at=(new G).freeze();this.Na=h;this.jF=new F;this.ki=Jb;this.li=Rb;this.zt=this.At=NaN;this.Pd=pc;this.$b=gd}w.P("Geometry",dd);
dd.prototype.copy=dd.prototype.copy=function(){var a=new dd;a.S=this.S;a.Bb=this.Bb;a.Nb=this.Nb;a.Ac=this.Ac;a.Hc=this.Hc;for(var b=this.hk,c=b.length,d=a.hk,e=0;e<c;e++){var g=b.n[e].copy();d.add(g)}a.ot=this.ot;a.at.Xa(this.at);a.Na=this.Na;a.ki=this.ki.O();a.li=this.li.O();a.At=this.At;a.zt=this.zt;a.Pd=this.Pd.O();a.$b=this.$b;return a};var hd;dd.Line=hd=w.s(dd,"Line",0);var od;dd.Rectangle=od=w.s(dd,"Rectangle",1);var pd;dd.Ellipse=pd=w.s(dd,"Ellipse",2);var ed;dd.Path=ed=w.s(dd,"Path",3);
dd.prototype.Za=function(){this.freeze();Object.freeze(this);return this};dd.prototype.freeze=function(){this.$a=h;var a=this.sb;a.freeze();for(var b=a.length,c=0;c<b;c++)a.n[c].freeze();return this};dd.prototype.Ia=function(){Object.isFrozen(this)&&w.m("cannot thaw constant: "+this);this.$a=q;var a=this.sb;a.Ia();for(var b=a.length,c=0;c<b;c++)a.n[c].Ia();return this};
dd.prototype.equalsApprox=dd.prototype.Aj=function(a){if(!(a instanceof dd))return q;if(this.type!==a.type)return this.type===hd&&a.type===ed?qd(this,a):a.type===hd&&this.type===ed?qd(a,this):q;if(this.type===ed){var b=this.sb,a=a.sb,c=b.length;if(c!==a.length)return q;for(var d=0;d<c;d++)if(!b.n[d].Aj(a.n[d]))return q;return h}return Ta(this.la,a.la)&&Ta(this.ma,a.ma)&&Ta(this.C,a.C)&&Ta(this.D,a.D)};
function qd(a,b){if(a.type!==hd||b.type!==ed)return q;if(1===b.sb.count){var c=b.sb.oa(0);if(1===c.za.count&&(Ta(a.la,c.la)&&Ta(a.ma,c.ma))&&(c=c.za.oa(0),c.type===rd&&Ta(a.C,c.C)&&Ta(a.D,c.D)))return h}return q}var sd;dd.stringify=sd=function(a){return a.toString()};
dd.prototype.toString=function(a){switch(this.type){case hd:return a===f?"M"+this.la.toString()+" "+this.ma.toString()+"L"+this.C.toString()+" "+this.D.toString():"M"+this.la.toFixed(a)+" "+this.ma.toFixed(a)+"L"+this.C.toFixed(a)+" "+this.D.toFixed(a);case od:var b=new G(this.la,this.ma,0,0);b.Wb(this.C,this.D,0,0);return a===f?"M"+b.x.toString()+" "+b.y.toString()+"H"+b.right.toString()+"V"+b.bottom.toString()+"H"+b.left.toString()+"z":"M"+b.x.toFixed(a)+" "+b.y.toFixed(a)+"H"+b.right.toFixed(a)+
"V"+b.bottom.toFixed(a)+"H"+b.left.toFixed(a)+"z";case pd:b=new G(this.la,this.ma,0,0);b.Wb(this.C,this.D,0,0);if(a===f){var c=b.left.toString()+" "+(b.y+b.height/2).toString(),d=b.right.toString()+" "+(b.y+b.height/2).toString();return"M"+c+"A"+(b.width/2).toString()+" "+(b.height/2).toString()+" 0 0 1 "+d+"A"+(b.width/2).toString()+" "+(b.height/2).toString()+" 0 0 1 "+c}c=b.left.toFixed(a)+" "+(b.y+b.height/2).toFixed(a);d=b.right.toFixed(a)+" "+(b.y+b.height/2).toFixed(a);return"M"+c+"A"+(b.width/
2).toFixed(a)+" "+(b.height/2).toFixed(a)+" 0 0 1 "+d+"A"+(b.width/2).toFixed(a)+" "+(b.height/2).toFixed(a)+" 0 0 1 "+c;case ed:for(var b="",c=this.sb,d=c.length,e=0;e<d;e++){var g=c.n[e];0<e&&(b+=" x ");g.Yn&&(b+="F ");b+=g.toString(a)}return b;default:return this.type.toString()}};var ud;
dd.fillPath=ud=function(a){"string"!==typeof a&&w.hc(a,"string",dd,"fillPath:str");for(var a=a.split(/[Xx]/),b=a.length,c="",d=0;d<b;d++)var e=a[d],c=e.match(/[Ff]/)!==n?0===d?c+e:c+("X"+(" "===e[0]?"":" ")+e):c+((0===d?"":"X ")+"F"+(" "===e[0]?"":" ")+e);return c};var zd;
dd.parse=zd=function(a,b){function c(){return l>=y-1?h:k[l+1].match(/[A-Za-z]/)!==n}function d(){l++;return k[l]}function e(){var a=new F(parseFloat(d()),parseFloat(d()));m===m.toLowerCase()&&(a.x=v.x+a.x,a.y=v.y+a.y);return a}function g(){return v=e()}function i(){return s=e()}function j(){return"c"!==p.toLowerCase()&&"s"!==p.toLowerCase()?v:new F(2*v.x-s.x,2*v.y-s.y)}b===f&&(b=q);"string"!==typeof a&&w.hc(a,"string",dd,"parse:str");for(var a=a.replace(/,/gm," "),a=a.replace(/([UuBbMmZzLlHhVvCcSsQqTtAaFf])([UuBbMmZzLlHhVvCcSsQqTtAaFf])/gm,
"$1 $2"),a=a.replace(/([UuBbMmZzLlHhVvCcSsQqTtAaFf])([UuBbMmZzLlHhVvCcSsQqTtAaFf])/gm,"$1 $2"),a=a.replace(/([UuBbMmZzLlHhVvCcSsQqTtAaFf])([^\s])/gm,"$1 $2"),a=a.replace(/([^\s])([UuBbMmZzLlHhVvCcSsQqTtAaFf])/gm,"$1 $2"),a=a.replace(/([0-9])([+\-])/gm,"$1 $2"),a=a.replace(/(\.[0-9]*)(\.)/gm,"$1 $2"),a=a.replace(/([Aa](\s+[0-9]+){3})\s+([01])\s*([01])/gm,"$1 $3 $4 "),a=a.replace(/[\s\r\t\n]+/gm," "),a=a.replace(/^\s+|\s+$/g,""),k=a.split(" "),l=-1,m="",p="",r=new F(0,0),s=new F(0,0),v=new F(0,0),y=
k.length,C=new J,E,I=q,D=q,M=h;!(l>=y-1);)if(p=m,m=d(),""!==m)switch(m.toUpperCase()){case "X":M=h;D=I=q;break;case "M":E=g();C.Lb===n||M===h?(K(C,E.x,E.y,I,q,!D),M=q):C.moveTo(E.x,E.y);for(r=v;!c();)E=g(),C.lineTo(E.x,E.y);break;case "L":for(;!c();)E=g(),C.lineTo(E.x,E.y);break;case "H":for(;!c();)v=E=new F((m===m.toLowerCase()?v.x:0)+parseFloat(d()),v.y),C.lineTo(v.x,v.y);break;case "V":for(;!c();)v=E=new F(v.x,(m===m.toLowerCase()?v.y:0)+parseFloat(d())),C.lineTo(v.x,v.y);break;case "C":for(;!c();){var N=
e(),Z=i();E=g();L(C,N.x,N.y,Z.x,Z.y,E.x,E.y)}break;case "S":for(;!c();)N=j(),Z=i(),E=g(),L(C,N.x,N.y,Z.x,Z.y,E.x,E.y);break;case "Q":for(;!c();)Z=i(),E=g(),Ad(C,Z.x,Z.y,E.x,E.y);break;case "T":for(;!c();)s=Z=j(),E=g(),Ad(C,Z.x,Z.y,E.x,E.y);break;case "B":for(;!c();)E=[parseFloat(d()),parseFloat(d()),parseFloat(d()),parseFloat(d()),parseFloat(d())],c()||(E.push(parseFloat(d())),c()||E.push(parseFloat(d()))),m===m.toLowerCase()&&(E[2]+=v.x,E[3]+=v.y),C.arcTo(E[0],E[1],E[2],E[3],E[4],E[5],E[6]);break;
case "A":for(;!c();){var Z=parseFloat(d()),wa=parseFloat(d()),ka=parseFloat(d()),ua=!!parseFloat(d()),Da=!!parseFloat(d());E=g();var N=C,Ha=E.x;E=E.y;N.q===n&&w.m("StreamGeometryContext has been closed");N.Lb===n&&w.m("Need to call beginFigure first");E=new Bd(Cd,Ha,E,Z,wa,ka,ua,Da);N.Lb.za.add(E)}break;case "Z":Dd(C);v=r;break;case "F":E=n;for(N=1;k[l+N];)if(k[l+N].match(/[Uu]/)!==n)N++;else if(k[l+N].match(/[A-Za-z]/)===n)N++;else{E=k[l+N];break}E.match(/[Mm]/)?I=h:(E=C,E.q===n&&w.m("StreamGeometryContext has been closed"),
E.Lb===n&&w.m("Need to call beginFigure first"),0<E.Lb.za.length&&(E.Lb.Yn=h));break;case "U":E=n;for(N=1;k[l+N];)if(k[l+N].match(/[Ff]/)!==n)N++;else if(k[l+N].match(/[A-Za-z]/)===n)N++;else{E=k[l+N];break}E.match(/[Mm]/)?D=h:Ed(C)}r=C.q;if(b)for(C=r.sb.l;C.next();)C.value.Yn=h;return r};dd.prototype.jz=function(){if(this.Na)return h;var a=this.sb;if(this.ot!==a.Ib)return h;for(var b=a.length,c=0;c<b;c++)if(a.n[c].jz())return h;return q};
dd.prototype.aA=function(){this.Na=q;var a=this.sb;this.ot=a.Ib;for(var b=a.length,c=0;c<b;c++)a.n[c].aA()};dd.prototype.ne=function(){var a=this.at;a.Ia();a.reset();a.PH(this.Pd);Fd(this,a,q);a.Wb(0,0,0,0);a.freeze()};dd.prototype.computeBoundsWithoutOrigin=dd.prototype.aG=function(){var a=new G;Fd(this,a,h);return a};
function Fd(a,b,c){switch(a.type){case hd:case od:case pd:c?b.V(a.Bb,a.Nb,0,0):b.Wb(a.Bb,a.Nb,0,0);b.Wb(a.Ac,a.Hc,0,0);break;case ed:for(var a=a.sb,d=a.length,e=0;e<d;e++){var g=a.n[e];c&&0===e?b.V(g.la,g.ma,0,0):b.Wb(g.la,g.ma,0,0);for(var i=g.za,j=i.length,k=g.la,l=g.ma,m=0;m<j;m++){var p=i.n[m];switch(p.type){case rd:case Gd:k=p.C;l=p.D;b.Wb(k,l,0,0);break;case Hd:wc(k,l,p.Ub,p.zc,p.gg,p.hg,p.C,p.D,0.5,b);k=p.C;l=p.D;break;case Jd:Bc(k,l,p.Ub,p.zc,p.C,p.D,0.5,b);k=p.C;l=p.D;break;case Kd:case Cd:for(var p=
p.type===Kd?Ld(p,g):Rd(p,g,k,l),r=p.length,s=n,v=0;v<r;v++)s=p[v],wc(s.x1,s.y1,s.x2,s.y2,s.Cf,s.Df,s.Uc,s.Vc,0.5,b);s!==n&&(k=s.Uc,l=s.Vc);break;default:w.m("Unknown Segment type: "+p.type)}}}break;default:w.m("Unknown Geometry type: "+a.type)}}dd.prototype.normalize=dd.prototype.normalize=function(){w.H(this);var a=this.aG();this.offset(-a.x,-a.y);return new F(-a.x,-a.y)};
dd.prototype.offset=dd.prototype.offset=function(a,b){w.H(this);u&&(w.o(a,dd,"offset"),w.o(b,dd,"offset"));var c=new Wa;c.translate(a,b);this.transform(c.m11,c.m12,c.m21,c.m22,c.dx,c.dy)};dd.prototype.scale=dd.prototype.scale=function(a,b){w.H(this);u&&(w.o(a,dd,"scale:x"),w.o(b,dd,"scale:y"),0>=a&&w.ra(a,"scale must be greater than zero",dd,"scale:x"),0>=b&&w.ra(b,"scale must be greater than zero",dd,"scale:y"));var c=new Wa;c.scale(a,b);this.transform(c.m11,c.m12,c.m21,c.m22,c.dx,c.dy)};
dd.prototype.rotate=dd.prototype.rotate=function(a,b,c){w.H(this);b===f&&(b=0);c===f&&(c=0);u&&(w.o(a,dd,"rotate:angle"),w.o(b,dd,"rotate:x"),w.o(c,dd,"rotate:y"));var d=new Wa;d.rotate(a,b,c);this.transform(d.m11,d.m12,d.m21,d.m22,d.dx,d.dy)};
dd.prototype.transform=dd.prototype.transform=function(a,b,c,d,e,g){var i,j;switch(this.type){case hd:case od:case pd:i=this.Bb;j=this.Nb;this.Bb=i*a+j*c+e;this.Nb=i*b+j*d+g;i=this.Ac;j=this.Hc;this.Ac=i*a+j*c+e;this.Hc=i*b+j*d+g;break;case ed:for(var k=this.sb,l=k.length,m=0;m<l;m++){var p=k.n[m];i=p.la;j=p.ma;p.la=i*a+j*c+e;p.ma=i*b+j*d+g;for(var p=p.za,r=p.length,s=0;s<r;s++){var v=p.n[s];switch(v.type){case rd:case Gd:i=v.C;j=v.D;v.C=i*a+j*c+e;v.D=i*b+j*d+g;break;case Hd:i=v.ff;j=v.gf;v.ff=i*
a+j*c+e;v.gf=i*b+j*d+g;i=v.hi;j=v.ii;v.hi=i*a+j*c+e;v.ii=i*b+j*d+g;i=v.C;j=v.D;v.C=i*a+j*c+e;v.D=i*b+j*d+g;break;case Jd:i=v.ff;j=v.gf;v.ff=i*a+j*c+e;v.gf=i*b+j*d+g;i=v.C;j=v.D;v.C=i*a+j*c+e;v.D=i*b+j*d+g;break;case Kd:i=v.pa;j=v.ta;v.pa=i*a+j*c+e;v.ta=i*b+j*d+g;v.radiusX*=Math.sqrt(a*a+c*c);v.radiusY!==f&&(v.radiusY*=Math.sqrt(b*b+d*d));break;case Cd:i=v.C;j=v.D;v.C=i*a+j*c+e;v.D=i*b+j*d+g;v.radiusX*=Math.sqrt(a*a+c*c);v.radiusY*=Math.sqrt(b*b+d*d);break;default:w.m("Unknown Segment type: "+v.type)}}}}this.Na=
h};dd.prototype.mr=function(a,b){var c=this.Bb,d=this.Nb,e=this.Ac,g=this.Hc,i=Math.min(c,e),j=Math.min(d,g),c=Math.abs(e-c),d=Math.abs(g-d),g=this.jF;g.x=i;g.y=j;b.Ta(g);e=new fd(g.x,g.y);g.x=i+c;g.y=j;b.Ta(g);e.za.add(new Bd(rd,g.x,g.y));g.x=i+c;g.y=j+d;b.Ta(g);e.za.add(new Bd(rd,g.x,g.y));g.x=i;g.y=j+d;b.Ta(g);e.za.add((new Bd(rd,g.x,g.y)).close());a.type=ed;a.sb.add(e);return a};
dd.prototype.ua=function(a,b,c,d){for(var e=a.x,g=a.y,i=this.Eb.x-20,a=a.y,j=0,k,l,m,p,r,s,v,y=this.sb.n,C=y.length,E=0;E<C;E++){var I=y[E];if(I.Yn){if(c&&I.ua(e,g,b))return h;var D=I.za;k=I.la;l=I.ma;for(var M=k,N=l,Z=0;Z<=D.length;Z++){Z!==D.length?(m=D.n[Z],p=m.type,s=m.C,v=m.D):(p=rd,s=M,v=N);switch(p){case Gd:r=Ud(e,g,i,a,k,l,M,N);if(r===h)return h;j+=r;M=s;N=v;break;case rd:r=Ud(e,g,i,a,k,l,s,v);if(r===h)return h;j+=r;break;case Hd:r=Hc(k,l,m.Ub,m.zc,m.gg,m.hg,s,v,i,a,e,g,0.5);j+=r;break;case Jd:r=
Hc(k,l,(k+2*m.Ub)/3,(l+2*m.zc)/3,(m.Ub+2*s)/3,(m.Ub+2*s)/3,s,v,i,a,e,g,0.5);j+=r;break;case Kd:case Cd:p=m.type===Kd?Ld(m,I):Rd(m,I,k,l);for(var wa=p.length,ka=n,ua=0;ua<wa;ua++){ka=p[ua];if(0===ua){r=Ud(e,g,i,a,k,l,ka.x1,ka.y1);if(r===h)return h;j+=r}r=Hc(ka.x1,ka.y1,ka.x2,ka.y2,ka.Cf,ka.Df,ka.Uc,ka.Vc,i,a,e,g,0.5);j+=r}ka!==n&&(s=ka.Uc,v=ka.Vc);break;default:w.m("Unknown Segment type: "+m.type)}k=s;l=v}if(0!==j)return h;j=0}else if(I.ua(e,g,d?b:b+2))return h}return 0!==j};
function Ud(a,b,c,d,e,g,i,j){if(uc(e,g,i,j,0.05,a,b))return h;var k=(a-c)*(g-j);if(0===k)return 0;var l=((a*d-b*c)*(e-i)-(a-c)*(e*j-g*i))/k,b=(a*d-b*c)*(g-j)/k;if(l>=a)return 0;if((e>i?e-i:i-e)<(g>j?g-j:j-g)){if(g<j?(a=g,e=j):(a=j,e=g),b<a||b>e)return 0}else if(e<i?(a=e,e=i):a=i,l<a||l>e)return 0;return 0<k?1:-1}function Vd(a,b,c,d){for(var e=a.sb.length,g=0;g<e;g++)if(a.sb.n[g].ua(b,c,d))return h;return q}w.g(dd,"type",dd.prototype.type);
w.defineProperty(dd,{type:"type"},t("S"),function(a){this.S!==a&&(u&&w.jb(a,dd,dd,"type"),w.H(this,a),this.S=a,this.Na=h)});w.g(dd,"startX",dd.prototype.la);w.defineProperty(dd,{la:"startX"},t("Bb"),function(a){this.Bb!==a&&(u&&w.o(a,dd,"startX"),w.H(this,a),this.Bb=a,this.Na=h)});w.g(dd,"startY",dd.prototype.ma);w.defineProperty(dd,{ma:"startY"},t("Nb"),function(a){this.Nb!==a&&(u&&w.o(a,dd,"startY"),w.H(this,a),this.Nb=a,this.Na=h)});w.g(dd,"endX",dd.prototype.C);
w.defineProperty(dd,{C:"endX"},t("Ac"),function(a){this.Ac!==a&&(u&&w.o(a,dd,"endX"),w.H(this,a),this.Ac=a,this.Na=h)});w.g(dd,"endY",dd.prototype.D);w.defineProperty(dd,{D:"endY"},t("Hc"),function(a){this.Hc!==a&&(u&&w.o(a,dd,"endY"),w.H(this,a),this.Hc=a,this.Na=h)});w.g(dd,"figures",dd.prototype.sb);w.defineProperty(dd,{sb:"figures"},t("hk"),function(a){this.hk!==a&&(u&&w.i(a,z,dd,"figures"),w.H(this,a),this.hk=a,this.Na=h)});
w.defineProperty(dd,{v:"spot1"},t("ki"),function(a){u&&w.i(a,H,dd,"spot1");w.H(this,a);this.ki=a.O()});w.defineProperty(dd,{w:"spot2"},t("li"),function(a){u&&w.i(a,H,dd,"spot2");w.H(this,a);this.li=a.O()});w.u(dd,{Eb:"bounds"},function(){this.jz()&&(this.aA(),this.ne());return this.at});w.g(dd,"minSize",dd.prototype.ue);
w.defineProperty(dd,{ue:"minSize"},t("Pd"),function(a){this.Pd.I(a)||(u&&w.i(a,cb,dd,"minSize"),a=a.O(),isNaN(a.width)&&(a.width=0),isNaN(a.height)&&(a.height=0),a.freeze(),this.Pd=a)});function fd(a,b,c){w.ic(this);c===f&&(c=h);this.pl=c;this.Hf=h;a!==f?(u&&w.o(a,fd,"sx"),this.Bb=a):this.Bb=0;b!==f?(u&&w.o(b,fd,"sy"),this.Nb=b):this.Nb=0;this.Rq=new z(Bd);this.uu=this.Rq.Ib;this.Na=h}w.P("PathFigure",fd);
fd.prototype.copy=fd.prototype.copy=function(){var a=new fd;a.pl=this.pl;a.Hf=this.Hf;a.Bb=this.Bb;a.Nb=this.Nb;for(var b=this.Rq,c=b.length,d=a.Rq,e=0;e<c;e++){var g=b.n[e].copy();d.add(g)}a.uu=this.uu;a.Na=this.Na;return a};fd.prototype.equalsApprox=fd.prototype.Aj=function(a){if(!(a instanceof fd)||!Ta(this.la,a.la)||!Ta(this.ma,a.ma))return q;var b=this.za,a=a.za,c=b.length;if(c!==a.length)return q;for(var d=0;d<c;d++)if(!b.n[d].Aj(a.n[d]))return q;return h};da=fd.prototype;
da.toString=function(a){for(var b=a===f?"M"+this.la.toString()+" "+this.ma.toString():"M"+this.la.toFixed(a)+" "+this.ma.toFixed(a),c=this.za,d=c.length,e=0;e<d;e++)b+=" "+c.n[e].toString(a);return b};da.freeze=function(){this.$a=h;var a=this.za;a.freeze();for(var b=a.length,c=0;c<b;c++)a.n[c].freeze();return this};da.Ia=function(){this.$a=q;var a=this.za;a.Ia();for(var b=a.length,c=0;c<b;c++)a.n[c].Ia();return this};
da.jz=function(){if(this.Na)return h;var a=this.za;if(this.uu!==a.Ib)return h;for(var b=a.length,c=0;c<b;c++)if(a.n[c].Na)return h;return q};da.aA=function(){this.Na=q;var a=this.za;this.uu=a.Ib;for(var b=a.length,c=0;c<b;c++){var d=a.n[c];d.Na=q;d.Li&&(d.Li=n)}};w.g(fd,"isFilled",fd.prototype.Yn);w.defineProperty(fd,{Yn:"isFilled"},t("pl"),function(a){u&&w.k(a,"boolean",fd,"isFilled");w.H(this,a);this.pl=a});w.g(fd,"isShadowed",fd.prototype.$n);
w.defineProperty(fd,{$n:"isShadowed"},t("Hf"),function(a){u&&w.k(a,"boolean",fd,"isShadowed");w.H(this,a);this.Hf=a});w.g(fd,"startX",fd.prototype.la);w.defineProperty(fd,{la:"startX"},t("Bb"),function(a){u&&w.o(a,fd,"startX");w.H(this,a);this.Bb=a;this.Na=h});w.g(fd,"startY",fd.prototype.ma);w.defineProperty(fd,{ma:"startY"},t("Nb"),function(a){u&&w.o(a,fd,"startY");w.H(this,a);this.Nb=a;this.Na=h});w.g(fd,"segments",fd.prototype.za);
w.defineProperty(fd,{za:"segments"},t("Rq"),function(a){u&&w.i(a,z,fd,"segments");w.H(this,a);this.Rq=a;this.Na=h});
fd.prototype.ua=function(a,b,c){for(var d=this.la,e=this.ma,g=d,i=e,j=this.za.n,k=j.length,l=0;l<k;l++){var m=j[l];switch(m.type){case Gd:g=m.C;i=m.D;d=m.C;e=m.D;break;case rd:if(uc(d,e,m.C,m.D,c,a,b))return h;d=m.C;e=m.D;break;case Hd:if(vc(d,e,m.Ub,m.zc,m.gg,m.hg,m.C,m.D,0.5,a,b,c))return h;d=m.C;e=m.D;break;case Jd:if(Ac(d,e,m.Ub,m.zc,m.C,m.D,0.5,a,b,c))return h;d=m.C;e=m.D;break;case Kd:case Cd:for(var p=m.type===Kd?Ld(m,this):Rd(m,this,d,e),r=p.length,s=n,v=0;v<r;v++)if(s=p[v],0===v&&uc(d,e,
s.x1,s.y1,c,a,b)||vc(s.x1,s.y1,s.x2,s.y2,s.Cf,s.Df,s.Uc,s.Vc,0.5,a,b,c))return h;s!==n&&(d=s.Uc,e=s.Vc);break;default:w.m("Unknown Segment type: "+m.type)}if(m.Uh&&(d!==g||e!==i)&&uc(d,e,g,i,c,a,b))return h}return q};
function Bd(a,b,c,d,e,g,i,j){w.ic(this);a===f?a=rd:u&&w.jb(a,Bd,Bd,"constructor:type");this.S=a;a===Kd?(b!==f?(u&&w.o(b,Bd,"ex"),this.Rd=b):this.Rd=0,c!==f?(u&&w.o(c,Bd,"ey"),this.Sd=c):this.Sd=0,d!==f&&(u&&w.o(d,Bd,"x1"),this.um=d),e!==f&&(u&&w.o(e,Bd,"y1"),this.vm=e),g!==f&&(u&&w.o(g,Bd,"x2"),this.ij=Math.max(g||0,0)),i!==f&&"number"===typeof i?(u&&w.o(i,Bd,"y2"),this.jj=Math.max(i||0,0)):this.jj=this.ij):a===Cd?(b!==f&&u&&w.o(b,Bd,"ex"),c!==f&&u&&w.o(c,Bd,"ey"),d!==f&&u&&w.o(d,Bd,"x1"),e!==f&&
u&&w.o(e,Bd,"y1"),this.Lf=b||0,this.Mf=c||0,this.ij=Math.max(d||0,0),this.jj=Math.max(e||0,0),this.Rd=i?1:0,this.Sd=j?1:0,a=(g||0)%360,0>a&&(a+=360),this.tn=a):(b!==f?(u&&w.o(b,Bd,"ex"),this.Lf=b):this.Lf=0,c!==f?(u&&w.o(c,Bd,"ey"),this.Mf=c):this.Mf=0,d!==f&&(u&&w.o(d,Bd,"x1"),this.ff=d),e!==f&&(u&&w.o(e,Bd,"y1"),this.gf=e),g!==f&&(u&&w.o(g,Bd,"x2"),this.hi=g),i!==f&&"number"===typeof i&&(u&&w.o(i,Bd,"y2"),this.ii=i));this.Na=h;this.Uh=q}w.P("PathSegment",Bd);
Bd.prototype.copy=Bd.prototype.copy=function(){var a=new Bd;a.S=this.S;this.S===Kd?(a.Rd=this.Rd,a.Sd=this.Sd,a.um=this.um,a.vm=this.vm,a.ij=this.ij,a.jj=this.jj):this.S===Cd?(a.Rd=this.Rd,a.Sd=this.Sd,a.Lf=this.Lf,a.Mf=this.Mf,a.ij=this.ij,a.jj=this.jj,a.tn=this.tn):(a.Lf=this.Lf,a.Mf=this.Mf,a.ff=this.ff,a.gf=this.gf,a.hi=this.hi,a.ii=this.ii);a.Na=this.Na;a.Uh=this.Uh;return a};
Bd.prototype.equalsApprox=Bd.prototype.Aj=function(a){if(!(a instanceof Bd)||this.type!==a.type||this.yv!==a.yv)return q;switch(this.type){case Gd:case rd:return Ta(this.C,a.C)&&Ta(this.D,a.D);case Hd:return Ta(this.C,a.C)&&Ta(this.D,a.D)&&Ta(this.Ub,a.Ub)&&Ta(this.zc,a.zc)&&Ta(this.gg,a.gg)&&Ta(this.hg,a.hg);case Jd:return Ta(this.C,a.C)&&Ta(this.D,a.D)&&Ta(this.Ub,a.Ub)&&Ta(this.zc,a.zc);case Kd:return Ta(this.jg,a.jg)&&Ta(this.Gh,a.Gh)&&Ta(this.pa,a.pa)&&Ta(this.ta,a.ta)&&Ta(this.radiusX,a.radiusX)&&
Ta(this.radiusY,a.radiusY);case Cd:return this.xv===a.xv&&this.Av===a.Av&&Ta(this.hw,a.hw)&&Ta(this.C,a.C)&&Ta(this.D,a.D)&&Ta(this.radiusX,a.radiusX)&&Ta(this.radiusY,a.radiusY);default:return q}};
Bd.prototype.toString=function(a){switch(this.type){case Gd:a=a===f?"M"+this.C.toString()+" "+this.D.toString():"M"+this.C.toFixed(a)+" "+this.D.toFixed(a);break;case rd:a=a===f?"L"+this.C.toString()+" "+this.D.toString():"L"+this.C.toFixed(a)+" "+this.D.toFixed(a);break;case Hd:a=a===f?"C"+this.Ub.toString()+" "+this.zc.toString()+" "+this.gg.toString()+" "+this.hg.toString()+" "+this.C.toString()+" "+this.D.toString():"C"+this.Ub.toFixed(a)+" "+this.zc.toFixed(a)+" "+this.gg.toFixed(a)+" "+this.hg.toFixed(a)+
" "+this.C.toFixed(a)+" "+this.D.toFixed(a);break;case Jd:a=a===f?"Q"+this.Ub.toString()+" "+this.zc.toString()+" "+this.C.toString()+" "+this.D.toString():"Q"+this.Ub.toFixed(a)+" "+this.zc.toFixed(a)+" "+this.C.toFixed(a)+" "+this.D.toFixed(a);break;case Kd:a=a===f?"B"+this.jg.toString()+" "+this.Gh.toString()+" "+this.pa.toString()+" "+this.ta.toString()+" "+this.radiusX:"B"+this.jg.toFixed(a)+" "+this.Gh.toFixed(a)+" "+this.pa.toFixed(a)+" "+this.ta.toFixed(a)+" "+this.radiusX;break;case Cd:a=
a===f?"A"+this.radiusX.toString()+" "+this.radiusY.toString()+" "+this.hw.toString()+" "+(this.Av?1:0)+" "+(this.xv?1:0)+" "+this.C.toString()+" "+this.D.toString():"A"+this.radiusX.toFixed(a)+" "+this.radiusY.toFixed(a)+" "+this.hw.toFixed(a)+" "+(this.Av?1:0)+" "+(this.xv?1:0)+" "+this.C.toFixed(a)+" "+this.D.toFixed(a);break;default:a=this.type.toString()}return a+(this.Uh?"z":"")};var Gd;Bd.Move=Gd=w.s(Bd,"Move",0);var rd;Bd.Line=rd=w.s(Bd,"Line",1);var Hd;Bd.Bezier=Hd=w.s(Bd,"Bezier",2);var Jd;
Bd.QuadraticBezier=Jd=w.s(Bd,"QuadraticBezier",3);var Kd;Bd.Arc=Kd=w.s(Bd,"Arc",4);var Cd;Bd.SvgArc=Cd=w.s(Bd,"SvgArc",4);Bd.prototype.freeze=function(){this.$a=h;return this};Bd.prototype.Ia=function(){this.$a=q;return this};Bd.prototype.close=Bd.prototype.close=function(){this.Uh=h;return this};
function Ld(a,b){if(a.Li&&b.Na===q)return a.Li;var c=a.radiusX,d=a.radiusY;d===f&&(d=c);var e=ad(a.um,a.vm,c<d?c:d,a.jg,a.jg+a.Gh);if(c!==d){var g=new Wa;c<d?g.scale(1,d/c):g.scale(c/d,1);for(var c=e.length,d=new F,i=0,j=0,k=0;k<c;k++){var l=e[k];0===k&&(i=l.x1,j=l.y1);l.x1-=i;l.y1-=j;l.x2-=i;l.y2-=j;l.Cf-=i;l.Df-=j;l.Uc-=i;l.Vc-=j}for(k=0;k<c;k++)l=e[k],d.x=l.x1,d.y=l.y1,g.Ta(d),l.x1=d.x+i,l.y1=d.y+j,d.x=l.x2,d.y=l.y2,g.Ta(d),l.x2=d.x+i,l.y2=d.y+j,d.x=l.Cf,d.y=l.Df,g.Ta(d),l.Cf=d.x+i,l.Df=d.y+j,
d.x=l.Uc,d.y=l.Vc,g.Ta(d),l.Uc=d.x+i,l.Vc=d.y+j}a.Li=e;return a.Li}
function Rd(a,b,c,d){function e(a,b){return(a[0]*b[1]<a[1]*b[0]?-1:1)*Math.acos(g(a,b))}function g(a,b){return(a[0]*b[0]+a[1]*b[1])/(Math.sqrt(Math.pow(a[0],2)+Math.pow(a[1],2))*Math.sqrt(Math.pow(b[0],2)+Math.pow(b[1],2)))}if(a.Li&&b.Na===q)return a.Li;var b=a.ij,i=a.jj,j=a.tn*(Math.PI/180),k=a.jg,l=a.Sd,m=a.Lf,p=a.Mf,r=new F(Math.cos(j)*(c-m)/2+Math.sin(j)*(d-p)/2,-Math.sin(j)*(c-m)/2+Math.cos(j)*(d-p)/2),s=Math.pow(r.x,2)/Math.pow(b,2)+Math.pow(r.y,2)/Math.pow(i,2);1<s&&(b*=Math.sqrt(s),i*=Math.sqrt(s));
k=(k==l?-1:1)*Math.sqrt((Math.pow(b,2)*Math.pow(i,2)-Math.pow(b,2)*Math.pow(r.y,2)-Math.pow(i,2)*Math.pow(r.x,2))/(Math.pow(b,2)*Math.pow(r.y,2)+Math.pow(i,2)*Math.pow(r.x,2)));isNaN(k)&&(k=0);k=new F(k*b*r.y/i,k*-i*r.x/b);c=new F((c+m)/2+Math.cos(j)*k.x-Math.sin(j)*k.y,(d+p)/2+Math.sin(j)*k.x+Math.cos(j)*k.y);d=e([1,0],[(r.x-k.x)/b,(r.y-k.y)/i]);j=[(r.x-k.x)/b,(r.y-k.y)/i];m=[(-r.x-k.x)/b,(-r.y-k.y)/i];r=e(j,m);-1>=g(j,m)&&(r=Math.PI);1<=g(j,m)&&(r=0);0==l&&0<r&&(r-=2*Math.PI);1==l&&0>r&&(r+=2*Math.PI);
l=b>i?1:b/i;j=b>i?i/b:1;b=ad(0,0,b>i?b:i,d,d+r,h);i=new Wa;i.translate(c.x,c.y);i.rotate(a.tn,0,0);i.scale(l,j);l=b.length;r=new F;for(c=0;c<l;c++)d=b[c],r.x=d.x1,r.y=d.y1,i.Ta(r),d.x1=r.x,d.y1=r.y,r.x=d.x2,r.y=d.y2,i.Ta(r),d.x2=r.x,d.y2=r.y,r.x=d.Cf,r.y=d.Df,i.Ta(r),d.Cf=r.x,d.Df=r.y,r.x=d.Uc,r.y=d.Vc,i.Ta(r),d.Uc=r.x,d.Vc=r.y;a.Li=b;return a.Li}w.g(Bd,"isClosed",Bd.prototype.yv);w.defineProperty(Bd,{yv:"isClosed"},t("Uh"),function(a){this.Uh!==a&&(this.Uh=a,this.Na=h)});w.g(Bd,"type",Bd.prototype.type);
w.defineProperty(Bd,{type:"type"},t("S"),function(a){u&&w.jb(a,Bd,Bd,"type");w.H(this,a);this.S=a;this.Na=h});w.g(Bd,"endX",Bd.prototype.C);w.defineProperty(Bd,{C:"endX"},t("Lf"),function(a){u&&w.o(a,Bd,"endX");w.H(this,a);this.Lf=a;this.Na=h});w.g(Bd,"endY",Bd.prototype.D);w.defineProperty(Bd,{D:"endY"},t("Mf"),function(a){u&&w.o(a,Bd,"endY");w.H(this,a);this.Mf=a;this.Na=h});w.defineProperty(Bd,{Ub:"point1X"},t("ff"),function(a){u&&w.o(a,Bd,"point1X");w.H(this,a);this.ff=a;this.Na=h});
w.defineProperty(Bd,{zc:"point1Y"},t("gf"),function(a){u&&w.o(a,Bd,"point1Y");w.H(this,a);this.gf=a;this.Na=h});w.defineProperty(Bd,{gg:"point2X"},t("hi"),function(a){u&&w.o(a,Bd,"point2X");w.H(this,a);this.hi=a;this.Na=h});w.defineProperty(Bd,{hg:"point2Y"},t("ii"),function(a){u&&w.o(a,Bd,"point2Y");w.H(this,a);this.ii=a;this.Na=h});w.defineProperty(Bd,{pa:"centerX"},t("um"),function(a){u&&w.o(a,Bd,"centerX");w.H(this,a);this.um=a;this.Na=h});
w.defineProperty(Bd,{ta:"centerY"},t("vm"),function(a){u&&w.o(a,Bd,"centerY");w.H(this,a);this.vm=a;this.Na=h});w.defineProperty(Bd,{radiusX:"radiusX"},t("ij"),function(a){u&&w.o(a,Bd,"radiusX");0>a&&w.ra(a,">= zero",Bd,"radiusX");w.H(this,a);this.ij=a;this.Na=h});w.defineProperty(Bd,{radiusY:"radiusY"},t("jj"),function(a){u&&w.o(a,Bd,"radiusY");0>a&&w.ra(a,">= zero",Bd,"radiusY");w.H(this,a);this.jj=a;this.Na=h});
w.defineProperty(Bd,{jg:"startAngle"},t("Rd"),function(a){this.Rd!==a&&(w.H(this,a),u&&w.o(a,Bd,"startAngle"),a%=360,0>a&&(a+=360),this.Rd=a,this.Na=h)});w.defineProperty(Bd,{Gh:"sweepAngle"},t("Sd"),function(a){u&&w.o(a,Bd,"sweepAngle");w.H(this,a);360<a&&(a=360);-360>a&&(a=-360);this.Sd=a;this.Na=h});w.defineProperty(Bd,{xv:"isClockwiseArc"},function(){return!!this.Sd},function(a){w.H(this,a);this.Sd=a?1:0;this.Na=h});
w.defineProperty(Bd,{Av:"isLargeArc"},function(){return!!this.Rd},function(a){w.H(this,a);this.Rd=a?1:0;this.Na=h});w.defineProperty(Bd,{hw:"xAxisRotation"},t("tn"),function(a){u&&w.o(a,Bd,"xAxisRotation");a%=360;0>a&&(a+=360);w.H(this,a);this.tn=a;this.Na=h});function Wd(){this.aa=n;this.qy=(new F(0,0)).freeze();this.Ww=(new F(0,0)).freeze();this.Vs=this.Xt=0;this.Gt="";this.Lu=this.lt=q;this.it=this.Ys=0;this.Ni=this.rt=q;this.Ui=n;this.Ju=0;this.Pf=this.Gu=n}w.P("InputEvent",Wd);
Wd.prototype.copy=Wd.prototype.copy=function(){var a=new Wd;a.aa=this.aa;a.qy=this.jd.copy().freeze();a.Ww=this.M.copy().freeze();a.Xt=this.Xt;a.Vs=this.Vs;a.Gt=this.Gt;a.lt=this.lt;a.Lu=this.Lu;a.Ys=this.Ys;a.it=this.it;a.rt=this.rt;a.Ni=this.Ni;a.Ui=this.Ui;a.Ju=this.Ju;a.Gu=this.Gu;a.Pf=this.Pf;return a};
Wd.prototype.toString=function(){var a="^";this.Bh&&(a+="M:"+this.Bh);this.button&&(a+="B:"+this.button);this.key&&(a+="K:"+this.key);this.Td&&(a+="C:"+this.Td);this.xj&&(a+="D:"+this.xj);this.Xd&&(a+="h");this.bubbles&&(a+="b");this.M!==n&&(a+="@"+this.M.toString());return a};w.g(Wd,"diagram",Wd.prototype.h);w.defineProperty(Wd,{h:"diagram"},t("aa"),ba("aa"));w.g(Wd,"viewPoint",Wd.prototype.jd);w.defineProperty(Wd,{jd:"viewPoint"},t("qy"),function(a){w.i(a,F,Wd,"viewPoint");this.qy.Xa(a)});
w.g(Wd,"documentPoint",Wd.prototype.M);w.defineProperty(Wd,{M:"documentPoint"},t("Ww"),function(a){w.i(a,F,Wd,"documentPoint");this.Ww.Xa(a)});w.g(Wd,"modifiers",Wd.prototype.Bh);w.defineProperty(Wd,{Bh:"modifiers"},t("Xt"),ba("Xt"));w.g(Wd,"button",Wd.prototype.button);w.defineProperty(Wd,{button:"button"},t("Vs"),ba("Vs"));w.g(Wd,"key",Wd.prototype.key);w.defineProperty(Wd,{key:"key"},t("Gt"),ba("Gt"));w.g(Wd,"down",Wd.prototype.zj);w.defineProperty(Wd,{zj:"down"},t("lt"),ba("lt"));
w.g(Wd,"up",Wd.prototype.Ii);w.defineProperty(Wd,{Ii:"up"},t("Lu"),ba("Lu"));w.g(Wd,"clickCount",Wd.prototype.Td);w.defineProperty(Wd,{Td:"clickCount"},t("Ys"),ba("Ys"));w.g(Wd,"delta",Wd.prototype.xj);w.defineProperty(Wd,{xj:"delta"},t("it"),ba("it"));w.g(Wd,"handled",Wd.prototype.Xd);w.defineProperty(Wd,{Xd:"handled"},t("rt"),ba("rt"));w.g(Wd,"bubbles",Wd.prototype.bubbles);w.defineProperty(Wd,{bubbles:"bubbles"},t("Ni"),ba("Ni"));w.g(Wd,"event",Wd.prototype.event);
w.defineProperty(Wd,{event:"event"},t("Ui"),ba("Ui"));w.g(Wd,"timestamp",Wd.prototype.timestamp);w.defineProperty(Wd,{timestamp:"timestamp"},t("Ju"),ba("Ju"));w.g(Wd,"targetDiagram",Wd.prototype.kg);w.defineProperty(Wd,{kg:"targetDiagram"},t("Gu"),ba("Gu"));w.g(Wd,"targetObject",Wd.prototype.zd);w.defineProperty(Wd,{zd:"targetObject"},t("Pf"),ba("Pf"));w.u(Wd,{Kk:"control"},function(){return 0!==(this.Bh&1)});w.u(Wd,{shift:"shift"},function(){return 0!==(this.Bh&4)});
w.u(Wd,{alt:"alt"},function(){return 0!==(this.Bh&2)});w.u(Wd,{tL:"meta"},function(){return 0!==(this.Bh&8)});w.u(Wd,{left:"left"},function(){return 0===this.button});w.u(Wd,{uL:"middle"},function(){return 1===this.button});w.u(Wd,{right:"right"},function(){return 2===this.button});function Yd(){this.aa=n;this.Ab="";this.lu=this.Bu=n;this.Ws=q}w.P("DiagramEvent",Yd);Yd.prototype.copy=Yd.prototype.copy=function(){var a=new Yd;a.aa=this.aa;a.Ab=this.Ab;a.Bu=this.Bu;a.lu=this.lu;a.Ws=this.Ws;return a};
Yd.prototype.toString=function(){var a="*"+this.name;this.cancel&&(a+="x");this.$v!==n&&(a+=":"+this.$v.toString());this.Mv!==n&&(a+="("+this.Mv.toString()+")");return a};w.g(Yd,"diagram",Yd.prototype.h);w.defineProperty(Yd,{h:"diagram"},t("aa"),ba("aa"));w.g(Yd,"name",Yd.prototype.name);w.defineProperty(Yd,{name:"name"},t("Ab"),ba("Ab"));w.g(Yd,"subject",Yd.prototype.$v);w.defineProperty(Yd,{$v:"subject"},t("Bu"),ba("Bu"));w.g(Yd,"parameter",Yd.prototype.Mv);
w.defineProperty(Yd,{Mv:"parameter"},t("lu"),ba("lu"));w.g(Yd,"cancel",Yd.prototype.cancel);w.defineProperty(Yd,{cancel:"cancel"},t("Ws"),ba("Ws"));function fe(){this.clear()}w.P("ChangedEvent",fe);var ge;fe.Transaction=ge=w.s(fe,"Transaction",-1);var he;fe.Property=he=w.s(fe,"Property",0);var ie;fe.Insert=ie=w.s(fe,"Insert",1);var je;fe.Remove=je=w.s(fe,"Remove",2);
fe.prototype.clear=fe.prototype.clear=function(){this.Xs=he;this.pu=this.Wt="";this.$t=this.au=this.hu=this.iu=this.gu=this.aa=this.Ed=n};
fe.prototype.copy=fe.prototype.copy=function(){var a=new fe;a.Ed=this.Ed;a.aa=this.aa;a.Xs=this.Xs;a.Wt=this.Wt;a.pu=this.pu;a.gu=this.gu;var b=this.iu;a.iu=w.mb(b)&&"function"===typeof b.O?b.O():b;b=this.hu;a.hu=w.mb(b)&&"function"===typeof b.O?b.O():b;b=this.au;a.au=w.mb(b)&&"function"===typeof b.O?b.O():b;b=this.$t;a.$t=w.mb(b)&&"function"===typeof b.O?b.O():b;return a};
fe.prototype.toString=function(){var a="",a=this.fd===ge?a+"* ":this.fd===he?a+(this.ba!==n?"!m":"!d"):a+((this.ba!==n?"!m":"!d")+this.fd);this.propertyName&&"string"===typeof this.propertyName&&(a+=" "+this.propertyName);this.Pe&&this.Pe!==this.propertyName&&(a+=" "+this.Pe);a+=": ";this.fd===ge?this.oldValue!==n&&(a+=" "+this.oldValue):(this.object!==n&&(a+=ke(this.object)),this.oldValue!==n&&(a+="  old: "+ke(this.oldValue)),this.Af!==n&&(a+=" "+this.Af),this.newValue!==n&&(a+="  new: "+ke(this.newValue)),
this.zf!==n&&(a+=" "+this.zf));return a};fe.prototype.getValue=fe.prototype.qa=function(a){return a?this.oldValue:this.newValue};fe.prototype.getParam=fe.prototype.EK=function(a){return a?this.Af:this.zf};fe.prototype.canUndo=fe.prototype.Ik=function(){return this.ba!==n||this.h!==n?h:q};fe.prototype.undo=fe.prototype.bl=function(){this.Ik()&&(this.ba!==n?this.ba.Dr(this,h):this.h!==n&&this.h.Dr(this,h))};fe.prototype.canRedo=fe.prototype.Gk=function(){return this.ba!==n||this.h!==n?h:q};
fe.prototype.redo=fe.prototype.uo=function(){this.Gk()&&(this.ba!==n?this.ba.Dr(this,q):this.h!==n&&this.h.Dr(this,q))};w.g(fe,"model",fe.prototype.ba);w.defineProperty(fe,{ba:"model"},t("Ed"),ba("Ed"));w.g(fe,"diagram",fe.prototype.h);w.defineProperty(fe,{h:"diagram"},t("aa"),ba("aa"));w.g(fe,"change",fe.prototype.fd);w.defineProperty(fe,{fd:"change"},t("Xs"),function(a){u&&w.jb(a,fe,fe,"change");this.Xs=a});w.g(fe,"modelChange",fe.prototype.Pe);
w.defineProperty(fe,{Pe:"modelChange"},t("Wt"),function(a){u&&w.k(a,"string",fe,"modelChange");this.Wt=a});w.g(fe,"propertyName",fe.prototype.propertyName);w.defineProperty(fe,{propertyName:"propertyName"},t("pu"),function(a){u&&"string"!==typeof a&&w.i(a,Function,fe,"propertyName");this.pu=a});w.g(fe,"object",fe.prototype.object);w.defineProperty(fe,{object:"object"},t("gu"),ba("gu"));w.g(fe,"oldValue",fe.prototype.oldValue);w.defineProperty(fe,{oldValue:"oldValue"},t("iu"),ba("iu"));
w.g(fe,"oldParam",fe.prototype.Af);w.defineProperty(fe,{Af:"oldParam"},t("hu"),ba("hu"));w.g(fe,"newValue",fe.prototype.newValue);w.defineProperty(fe,{newValue:"newValue"},t("au"),ba("au"));w.g(fe,"newParam",fe.prototype.zf);w.defineProperty(fe,{zf:"newParam"},t("$t"),ba("$t"));
function B(a){w.ic(this);this.Qw=this.Ab="";this.qk=q;this.df=[];this.jc=new la(n,Object);this.Al="key";this.dt=this.Mt=n;this.rq="category";this.tg=new la(n,ma);this.$i=n;this.ol=this.ji=q;this.my=n;this.sa=new le;a!==f&&(this.bg=a)}w.P("Model",B);B.prototype.clear=B.prototype.clear=function(){this.df=[];this.jc.clear();this.tg.clear();this.sa.clear()};
B.prototype.writeJsonProtected=B.prototype.fw=function(){var a="";""!==this.name&&(a+=',\n  "name": '+this.quote(this.name));""!==this.Pl&&(a+=',\n  "dataFormat": '+this.quote(this.Pl));this.cb&&(a+=',\n  "isReadOnly": '+this.cb);"key"!==this.Vk&&"string"===typeof this.Vk&&(a+=',\n  "nodeKeyProperty": '+this.quote(this.Vk));"category"!==this.Uk&&"string"===typeof this.Uk&&(a+=',\n  "nodeCategoryProperty": '+this.quote(this.Uk));return a};
B.prototype.dA=function(){return',\n  "nodeDataArray": '+ne(this,this.bg,h)};B.prototype.readJsonProtected=B.prototype.Ov=function(a){a.name&&(this.name=a.name);a.dataFormat&&(this.Pl=a.dataFormat);a.isReadOnly&&(this.cb=a.isReadOnly);a.nodeKeyProperty&&(this.Vk=a.nodeKeyProperty);a.nodeCategoryProperty&&(this.Uk=a.nodeCategoryProperty)};B.prototype.Fz=function(a){a.nodeDataArray&&(a=a.nodeDataArray,ye(this,a),this.bg=a)};
B.prototype.toString=function(a){a===f&&(a=0);if(1<a)return this.Wz();var b=(""!==this.name?this.name:"")+" Model";if(0<a){var b=b+"\n node data:",a=this.bg,c=w.Rb(a),d;for(d=0;d<c;d++)var e=w.Db(a,d),b=b+(" "+this.lb(e)+":"+ke(e))}return b};B.prototype.toJson=B.prototype.Wz=function(a){a===f&&(a=this.constructor===B?"go.Model":this.constructor===O?"go.GraphLinksModel":this.constructor===ze?"go.TreeModel":w.Ok(this));return'{ "class": '+this.quote(a)+this.writeJsonProtected()+this.dA()+"}"};
B.fromJson=function(a,b){b===f&&(b=n);b&&w.i(b,B,B,"fromJson:model");var c=n;if("string"===typeof a)if(window&&window.JSON&&window.JSON.parse)try{c=window.JSON.parse(a)}catch(d){u&&w.trace("JSON.parse error: "+d.toString())}else w.trace("WARNING: no JSON.parse available");else"object"==typeof a?c=a:w.m("Unable to construct a Model from: "+a);if(b===n){var e;e=n;var g=c["class"];if("string"===typeof g)try{var i=n;0===g.indexOf("go.")?(g=g.substr(3),i=ea[g]):(i=ea[g])||(i=window[g]);"function"===typeof i&&
(e=new i)}catch(j){}e===n||e instanceof B?b=e:w.m("Unable to construct a Model of declared class: "+c["class"])}b===n&&(b=new O);b.readJsonProtected(c);b.Fz(c);return b};
function ye(a,b){if(w.isArray(b))for(var c=w.Rb(b),d=0;d<c;d++){var e=w.Db(b,d);w.mb(e)&&w.ZB(b,d,ye(a,e))}else if(w.mb(b)){for(d in b)if(e=b[d],w.mb(e)&&(e=ye(a,e),b[d]=e,"points"===d&&Array.isArray(e))){for(var g=h,i=0;i<e.length;i++)if("number"!==typeof e[i]){g=q;break}if(g){g=new z(F);for(i=0;i<e.length/2;i++){var j=new F(e[2*i],e[2*i+1]);g.add(j)}g.freeze();b[d]=g}}if("object"!==typeof b)c=b;else{d=b;e=b["class"];if("NaN"===e)d=NaN;else if("go.Point"===e)d=new F(Ae(b.x),Ae(b.y));else if("go.Size"===
e)d=new cb(Ae(b.width),Ae(b.height));else if("go.Rect"===e)d=new G(Ae(b.x),Ae(b.y),Ae(b.width),Ae(b.height));else if("go.Margin"===e)d=new gb(Ae(b.top),Ae(b.right),Ae(b.bottom),Ae(b.left));else if("go.Spot"===e)d="string"===typeof b["enum"]?pb(b["enum"]):new H(Ae(b.x),Ae(b.y),Ae(b.offsetX),Ae(b.offsetY));else if("go.Brush"===e){if(d=new Be,d.type=w.Ul(Be,b.type),b.start instanceof H&&(d.start=b.start),b.end instanceof H&&(d.end=b.end),"number"===typeof b.startRadius&&(d.Co=Ae(b.startRadius)),"number"===
typeof b.endRadius&&(d.Qn=Ae(b.endRadius)),e=b.colorStops)for(c in e)d.addColorStop(parseFloat(c),e[c])}else"go.Geometry"===e&&(d="string"===typeof b.path?zd(b.path):new dd,d.type=w.Ul(dd,b.type),"number"===typeof b.startX&&(d.la=Ae(b.startX)),"number"===typeof b.startY&&(d.ma=Ae(b.startY)),"number"===typeof b.endX&&(d.C=Ae(b.endX)),"number"===typeof b.endY&&(d.D=Ae(b.endY)),b.spot1 instanceof H&&(d.v=b.spot1),b.spot2 instanceof H&&(d.w=b.spot2));c=d}return c}return b}
B.prototype.quote=function(a){for(var b="",c=a.length,d=0;d<c;d++)var e=a[d],b='"'===e||"\\"===e?b+("\\"+e):"\b"===e?b+"\\b":"\f"===e?b+"\\f":"\n"===e?b+"\\n":"\r"===e?b+"\\r":"\t"===e?b+"\\t":b+e;return'"'+b+'"'};
B.prototype.writeJsonValue=B.prototype.gw=function(a){var b;if(a===f)b="undefined";else if(a===n)b="null";else if(a===h)b="true";else if(a===q)b="false";else if("string"===typeof a)b=this.quote(a);else if("number"===typeof a)b=Infinity===a?"9e9999":-Infinity===a?"-9e9999":isNaN(a)?'{"class":"NaN"}':a.toString();else if(w.isArray(a))b=ne(this,a);else if(w.mb(a)){var c=a;if(c instanceof F)a={"class":"go.Point",x:Ce(c.x),y:Ce(c.y)};else if(c instanceof cb)a={"class":"go.Size",width:Ce(c.width),height:Ce(c.height)};
else if(c instanceof G)a={"class":"go.Rect",x:Ce(c.x),y:Ce(c.y),width:Ce(c.width),height:Ce(c.height)};else if(c instanceof gb)a={"class":"go.Margin",top:Ce(c.top),right:Ce(c.right),bottom:Ce(c.bottom),left:Ce(c.left)};else if(c instanceof H)a=rb(c)?{"class":"go.Spot",x:Ce(c.x),y:Ce(c.y),offsetX:Ce(c.offsetX),offsetY:Ce(c.offsetY)}:{"class":"go.Spot","enum":c.toString()};else if(c instanceof Be){a={"class":"go.Brush",type:c.type.name};if(c.type===De)a.color=c.color;else if(c.type===Ee||c.type===Fe)a.start=
c.start,a.end=c.end,c.type===Fe&&(0!==c.Co&&(a.startRadius=Ce(c.Co)),isNaN(c.Qn)||(a.endRadius=Ce(c.Qn)));if(c.Kn!==n){for(var d={},c=c.Kn.l;c.next();)d[c.key.toString()]=c.value;a.colorStops=d}}else c instanceof dd&&(a={"class":"go.Geometry",type:c.type.name},0!==c.la&&(a.startX=Ce(c.la)),0!==c.ma&&(a.startY=Ce(c.ma)),0!==c.C&&(a.endX=Ce(c.C)),0!==c.D&&(a.endY=Ce(c.D)),c.v.I(Jb)||(a.spot1=c.v),c.w.I(Rb)||(a.spot2=c.w),c.type===ed&&(a.path=sd(c)));var d="{",e=h;for(b in a)if(c=w.Va(a,b),!(c===f||
"__gohashid"===b||"_"===b[0]||"function"===typeof c))if(e?e=q:d+=", ",d+='"'+b+'":',"points"===b&&c instanceof z&&c.S===F){for(var g="[",c=c.l;c.next();){var i=c.value;1<g.length&&(g+=",");g+=this.gw(i.x);g+=",";g+=this.gw(i.y)}g+="]";d+=g}else d+=this.gw(c);b=d+"}"}else b="function"===typeof a?"null":a.toString();return b};function ne(a,b,c){var d=w.Rb(b),e="[ ";c&&1<d&&(e+="\n");for(var g=0;g<d;g++){var i=w.Db(b,g);i!==f&&(0<g&&(e+=",",c&&(e+="\n")),e+=a.gw(i))}c&&1<d&&(e+="\n");return e+" ]"}
function Ce(a){return isNaN(a)?"NaN":Infinity===a?"9e9999":-Infinity===a?"-9e9999":a}function Ae(a){return"number"===typeof a?a:"NaN"===a?NaN:"9e9999"===a?Infinity:"-9e9999"===a?-Infinity:parseFloat(a)}w.g(B,"name",B.prototype.name);w.defineProperty(B,{name:"name"},t("Ab"),function(a){var b=this.Ab;b!==a&&(w.k(a,"string",B,"name"),this.Ab=a,this.j("name",b,a))});w.g(B,"dataFormat",B.prototype.Pl);
w.defineProperty(B,{Pl:"dataFormat"},t("Qw"),function(a){var b=this.Qw;b!==a&&(w.k(a,"string",B,"dataFormat"),this.Qw=a,this.j("dataFormat",b,a))});w.g(B,"isReadOnly",B.prototype.cb);w.defineProperty(B,{cb:"isReadOnly"},t("qk"),function(a){var b=this.qk;b!==a&&(w.k(a,"boolean",B,"isReadOnly"),this.qk=a,this.j("isReadOnly",b,a))});B.prototype.addChangedListener=B.prototype.xy=function(a){w.k(a,"function",B,"addChangedListener:listener");this.$i===n&&(this.$i=new z("function"));this.$i.add(a)};
B.prototype.removeChangedListener=B.prototype.Hz=function(a){w.k(a,"function",B,"removeChangedListener:listener");this.$i!==n&&(this.$i.remove(a),0===this.$i.count&&(this.$i=n))};B.prototype.Vu=function(a){this.ub||this.sa.XC(a);if(this.$i!==n)for(var b=this.$i.l;b.next();){var c=b.value;c(a)}};B.prototype.raiseChangedEvent=B.prototype.Nc=function(a,b,c,d,e,g,i){Ge(this,"",a,b,c,d,e,g,i)};B.prototype.raiseChanged=B.prototype.j=function(a,b,c,d,e){Ge(this,"",he,a,this,b,c,d,e)};
B.prototype.raiseDataChanged=B.prototype.Ez=function(a,b,c,d,e,g){Ge(this,"",he,b,a,c,d,e,g)};function Ge(a,b,c,d,e,g,i,j,k){j===f&&(j=n);k===f&&(k=n);var l=new fe;l.ba=a;l.fd=c;l.Pe=b;l.propertyName=d;l.object=e;l.oldValue=g;l.Af=j;l.newValue=i;l.zf=k;a.Vu(l)}w.g(B,"undoManager",B.prototype.sa);w.defineProperty(B,{sa:"undoManager"},t("my"),function(a){var b=this.my;b!==a&&(w.i(a,le,B,"undoManager"),b!==n&&b.EH(this),this.my=a,a!==n&&a.xF(this))});w.g(B,"skipsUndoManager",B.prototype.ub);
w.defineProperty(B,{ub:"skipsUndoManager"},t("ji"),function(a){w.k(a,"boolean",B,"skipsUndoManager");this.ji=a});B.prototype.Dr=function(a,b){if(a!==n&&a.ba===this){var c=this.ol;try{this.ol=h,this.Fy(a,b)}finally{this.ol=c}}};
B.prototype.Fy=function(a,b){if(a.fd===he){var c=a.object,d=a.propertyName,e=a.qa(b);w.Ka(c,d,e)}else a.fd===ie?"nodeDataArray"===a.Pe?(c=a.newValue,w.mb(c)&&(d=this.lb(c),d!==f&&(b?(w.ri(this.df,a.zf),this.jc.remove(d)):(w.qi(this.df,a.zf,c),this.jc.add(d,c))))):""===a.Pe?(c=a.object,!w.isArray(c)&&a.propertyName&&(c=w.Va(a.object,a.propertyName)),w.isArray(c)&&(d=a.newValue,e=a.zf,b?w.ri(c,e):w.qi(c,e,d))):w.m("unknown ChangedEvent.Insert object: "+a.toString()):a.fd===je?"nodeDataArray"===a.Pe?
(c=a.oldValue,w.mb(c)&&(d=this.lb(c),d!==f&&(b?(w.qi(this.df,a.Af,c),this.jc.add(d,c)):(w.ri(this.df,a.Af),this.jc.remove(d))))):""===a.Pe?(c=a.object,!w.isArray(c)&&a.propertyName&&(c=w.Va(a.object,a.propertyName)),w.isArray(c)&&(d=a.oldValue,e=a.Af,b?w.qi(c,e,d):w.ri(c,e))):w.m("unknown ChangedEvent.Remove object: "+a.toString()):a.fd!==ge&&w.m("unknown ChangedEvent: "+a.toString())};B.prototype.startTransaction=B.prototype.gc=function(a){return this.sa.gc(a)};
B.prototype.commitTransaction=B.prototype.me=function(a){return this.sa.me(a)};B.prototype.rollbackTransaction=B.prototype.ss=function(){return this.sa.ss()};B.prototype.updateTargetBindings=B.prototype.vb=function(a,b){b===f&&(b="");Ge(this,"SourceChanged",ge,b,a,n,n)};w.g(B,"nodeKeyProperty",B.prototype.Vk);
w.defineProperty(B,{Vk:"nodeKeyProperty"},t("Al"),function(a){var b=this.Al;b!==a&&(He(a,B,"nodeKeyProperty"),0<this.jc.count&&w.m("Cannot set Model.nodeKeyProperty when there is existing node data"),this.Al=a,this.j("nodeKeyProperty",b,a))});function He(a,b,c){"string"!==typeof a&&"function"!==typeof a&&w.hc(a,"string or function",b,c)}
B.prototype.getKeyForNodeData=B.prototype.lb=function(a){if(a!==n){var b=this.Al;if(""!==b&&(b=w.Va(a,b),b!==f)){if(Ie(b))return b;u&&w.trace("Key value for node data "+a+" is not a number or a string: "+b)}}};
B.prototype.setKeyForNodeData=B.prototype.Qz=function(a,b){b===n&&(b=f);b!==f&&!Ie(b)&&w.hc(b,"number or string",B,"setKeyForNodeData:key");if(a!==n){var c=this.Al;if(""!==c)if(this.oe(a)){var d=w.Va(a,c);d!==b&&this.He(b)===n&&(w.Ka(a,c,b),this.jc.remove(d),this.jc.add(b,a),Ge(this,"nodeKey",he,c,a,d,b),"string"===typeof c&&this.vb(a,c),this.rs(d,b))}else w.Ka(a,c,b)}};w.g(B,"makeUniqueKeyFunction",B.prototype.cH);
w.defineProperty(B,{cH:"makeUniqueKeyFunction"},t("Mt"),function(a){var b=this.Mt;b!==a&&(a!==n&&w.k(a,"function",B,"makeUniqueKeyFunction"),this.Mt=a,this.j("makeUniqueKeyFunction",b,a))});function Ie(a){return"number"===typeof a||"string"===typeof a}B.prototype.containsNodeData=B.prototype.oe=function(a){a=this.lb(a);return a===f?q:this.jc.contains(a)};B.prototype.findNodeDataForKey=B.prototype.He=function(a){a===n&&w.m("Model.findNodeDataForKey:key must not be null");return a===f||!Ie(a)?n:this.jc.qa(a)};
w.g(B,"nodeDataArray",B.prototype.bg);
w.defineProperty(B,{bg:"nodeDataArray"},t("df"),function(a){var b=this.df;if(b!==a){w.Er(a,B,"nodeDataArray");this.jc.clear();this.$z();for(var c=w.Rb(a),d=0;d<c;d++){var e=w.Db(a,d);if(!w.mb(e)){w.m("Model.nodeDataArray must only contain Objects, not: "+e);return}w.Xr(e)}this.df=a;for(var g=new z(Object),d=0;d<c;d++){var e=w.Db(a,d),i=this.lb(e);i===f?g.add(e):this.jc.qa(i)!==n?g.add(e):this.jc.add(i,e)}for(d=g.l;d.next();)e=d.value,this.vD(e),g=this.lb(e),this.jc.add(g,e);Ge(this,"nodeDataArray",
he,"nodeDataArray",this,b,a);for(d=0;d<c;d++)e=w.Db(a,d),this.xo(e),this.wo(e);this.tg.clear();Array.isArray(a)||(this.cb=h)}});
B.prototype.makeNodeDataKeyUnique=B.prototype.vD=function(a){if(a!==n){var b=this.Al;if(""!==b){var c=this.lb(a);if(c===f||this.jc.contains(c)){var d=this.Mt;if(d!==n&&(c=d(this,a),c!==f&&c!==n&&!this.jc.contains(c))){w.Ka(a,b,c);return}if("string"===typeof c){for(d=2;this.jc.contains(c+d);)d++;w.Ka(a,b,c+d)}else if(c===f||"number"===typeof c){for(d=-this.jc.count-1;this.jc.contains(d);)d--;w.Ka(a,b,d)}else w.m("Model.getKeyForNodeData returned something other than a string or a number: "+c)}}}};
B.prototype.addNodeData=B.prototype.xr=function(a){if(a!==n){w.Xr(a);var b=this.lb(a);b!==f&&this.jc.qa(b)===a||(this.vD(a),b=this.lb(a),this.jc.add(b,a),b=w.Rb(this.df),w.qi(this.df,b,a),Ge(this,"nodeDataArray",ie,"nodeDataArray",this,n,a,n,b),this.xo(a),this.wo(a))}};B.prototype.removeNodeData=B.prototype.WD=function(a){if(a!==n){var b=this.lb(a);b!==f&&this.jc.contains(b)&&(this.jc.remove(b),b=w.By(this.df,a),0>b||(w.ri(this.df,b),Ge(this,"nodeDataArray",je,"nodeDataArray",this,a,n,b,n),this.Hs(a)))}};
da=B.prototype;da.rs=function(a,b){var c=Je(this,a);c instanceof ma&&this.tg.add(b,c)};da.$z=aa();da.xo=aa();da.wo=aa();da.Hs=aa();function Ke(a,b,c){if(b!==f){var d=a.tg.qa(b);d===n&&(d=new ma,a.tg.add(b,d));d.add(c)}}function $e(a,b,c){if(b!==f){var d=a.tg.qa(b);d instanceof ma&&(c===f||c===n?a.tg.remove(b):(d.remove(c),0===d.count&&a.tg.remove(b)))}}
B.prototype.dumpDelayedReferences=B.prototype.cK=function(){w.trace("DelayedReferences ("+this.tg.count+")");for(var a=this.tg.l;a.next();){for(var b="",c=a.value.l;c.next();)b+=ke(c.value)+", ";w.trace("  "+a.key+": "+b)}};function Je(a,b){if(b===f)return n;var c=a.tg.qa(b);return c instanceof ma?c:n}w.g(B,"copyNodeDataFunction",B.prototype.eG);
w.defineProperty(B,{eG:"copyNodeDataFunction"},t("dt"),function(a){var b=this.dt;b!==a&&(a!==n&&w.k(a,"function",B,"copyNodeDataFunction"),this.dt=a,this.j("copyNodeDataFunction",b,a))});B.prototype.copyNodeData=B.prototype.uj=function(a){if(a===n)return n;var b=n,b=this.dt;if(b!==n)b=b(a,this);else{var b=new a.constructor,c;for(c in a)w.Ka(b,c,w.Va(a,c))}b&&w.ic(b);return b};
B.prototype.setDataProperty=B.prototype.oE=function(a,b,c){u&&(w.k(a,"object",B,"setDataProperty:data"),w.k(b,"string",B,"setDataProperty:propname"),""===b&&w.m("Model.setDataProperty: property name must not be an empty string when setting "+a+" to "+c));if(this.oe(a))if(b===this.Vk)this.Qz(a,c);else if(b===this.Uk){this.Uv(a,c);return}var d=w.Va(a,b);d!==c&&(w.Ka(a,b,c),this.Ez(a,b,d,c))};B.prototype.addArrayItem=B.prototype.sI=function(a,b){this.KG(a,-1,b)};
B.prototype.insertArrayItem=B.prototype.KG=function(a,b,c){u&&(w.Er(a,B,"insertArrayItem:arr"),w.o(b,B,"insertArrayItem:idx"));a===this.df&&w.m("Model.insertArrayItem or Model.addArrayItem should not be called on the Model.nodeDataArray");0>b&&(b=w.Rb(a));w.qi(a,b,c);Ge(this,"",ie,"",a,n,c,n,b)};
B.prototype.removeArrayItem=B.prototype.KL=function(a,b){b===f&&(b=-1);u&&(w.Er(a,B,"removeArrayItem:arr"),w.o(b,B,"removeArrayItem:idx"));a===this.df&&w.m("Model.removeArrayItem should not be called on the Model.nodeDataArray");-1===b&&(b=w.Rb(a)-1);var c=w.Db(a,b);w.ri(a,b);Ge(this,"",je,"",a,c,n,b,n)};w.g(B,"nodeCategoryProperty",B.prototype.Uk);
w.defineProperty(B,{Uk:"nodeCategoryProperty"},t("rq"),function(a){var b=this.rq;b!==a&&(He(a,B,"nodeCategoryProperty"),this.rq=a,this.j("nodeCategoryProperty",b,a))});B.prototype.getCategoryForNodeData=B.prototype.PC=function(a){if(a===n)return"";var b=this.rq;if(""===b)return"";b=w.Va(a,b);if(b===f)return"";if("string"===typeof b)return b;u&&w.trace("getCategoryForNodeData found a non-string category for "+a+": "+b);return""};
B.prototype.setCategoryForNodeData=B.prototype.Uv=function(a,b){w.k(b,"string",B,"setCategoryForNodeData:cat");if(a!==n){var c=this.rq;if(""!==c)if(this.oe(a)){var d=w.Va(a,c);d===f&&(d="");d!==b&&(w.Ka(a,c,b),Ge(this,"nodeCategory",he,c,a,d,b))}else w.Ka(a,c,b)}};
function O(a,b){B.call(this);this.sk=[];this.Vm=new ma(Object);this.Zj=this.ct=n;this.Xi="from";this.Zi="to";this.aq=this.$p="";this.Xp="category";this.fh=this.cu="";this.bu="isGroup";this.fj="group";a!==f&&(this.bg=a);b!==f&&(this.Mg=b)}w.P("GraphLinksModel",O);w.Da(O,B);O.prototype.clear=O.prototype.clear=function(){B.prototype.clear.call(this);this.sk=[];this.Vm.clear()};
O.prototype.toString=function(a){a===f&&(a=0);if(2<=a)return this.Wz();var b=(""!==this.name?this.name:"")+" GraphLinksModel";if(0<a){var b=b+"\n node data:",a=this.bg,c=w.Rb(a),d;for(d=0;d<c;d++)var e=w.Db(a,d),b=b+(" "+this.lb(e)+":"+ke(e));b+="\n link data:";a=this.Mg;c=w.Rb(a);for(d=0;d<c;d++)e=w.Db(a,d),b+=" "+this.Yl(e)+"--\>"+this.Zl(e)}return b};
O.prototype.writeJsonProtected=O.prototype.fw=function(){var a=B.prototype.fw.call(this),b="";"category"!==this.co&&"string"===typeof this.co&&(b+=',\n  "linkCategoryProperty": '+this.quote(this.co));"from"!==this.eo&&"string"===typeof this.eo&&(b+=',\n "linkFromKeyProperty": '+this.quote(this.eo));"to"!==this.jo&&"string"===typeof this.jo&&(b+=',\n  "linkToKeyProperty": '+this.quote(this.jo));""!==this.fo&&"string"===typeof this.fo&&(b+=',\n  "linkFromPortIdProperty": '+this.quote(this.fo));""!==
this.ko&&"string"===typeof this.ko&&(b+=',\n  "linkToPortIdProperty": '+this.quote(this.ko));""!==this.so&&"string"===typeof this.so&&(b+=',\n "nodeIsLinkLabelProperty": '+this.quote(this.so));""!==this.ho&&"string"===typeof this.ho&&(b+=',\n  "linkLabelKeysProperty": '+this.quote(this.ho));"isGroup"!==this.ro&&"string"===typeof this.ro&&(b+=',\n "nodeIsGroupProperty": '+this.quote(this.ro));"group"!==this.qo&&"string"===typeof this.qo&&(b+=',\n  "nodeGroupKeyProperty": '+this.quote(this.qo));return a+
b};O.prototype.dA=function(){var a=B.prototype.dA.call(this),b=',\n  "linkDataArray": '+ne(this,this.Mg,h);return a+b};
O.prototype.readJsonProtected=O.prototype.Ov=function(a){B.prototype.Ov.call(this,a);a.linkFromKeyProperty&&(this.eo=a.linkFromKeyProperty);a.linkToKeyProperty&&(this.jo=a.linkToKeyProperty);a.linkFromPortIdProperty&&(this.fo=a.linkFromPortIdProperty);a.linkToPortIdProperty&&(this.ko=a.linkToPortIdProperty);a.linkCategoryProperty&&(this.co=a.linkCategoryProperty);a.nodeIsLinkLabelProperty&&(this.so=a.nodeIsLinkLabelProperty);a.linkLabelKeysProperty&&(this.ho=a.linkLabelKeysProperty);a.nodeIsGroupProperty&&
(this.ro=a.nodeIsGroupProperty);a.nodeGroupKeyProperty&&(this.qo=a.nodeGroupKeyProperty)};O.prototype.Fz=function(a){B.prototype.Fz.call(this,a);a.linkDataArray&&(a=a.linkDataArray,ye(this,a),this.Mg=a)};
O.prototype.Fy=function(a,b){if(a.fd===ie){var c=n;"linkDataArray"===a.Pe?c=this.Mg:"linkLabelKeys"===a.Pe&&(c=this.Pk(a.object));if(w.isArray(c)){b?w.ri(c,a.zf):w.qi(c,a.zf,a.newValue);return}}else if(a.fd===je&&(c=n,"linkDataArray"===a.Pe?c=this.Mg:"linkLabelKeys"===a.Pe&&(c=this.Pk(a.object)),w.isArray(c))){b?w.qi(c,a.Af,a.oldValue):w.ri(c,a.Af);return}B.prototype.Fy.call(this,a,b)};w.g(O,"archetypeNodeData",O.prototype.Br);
w.defineProperty(O,{Br:"archetypeNodeData"},t("Zj"),function(a){var b=this.Zj;b!==a&&(a!==n&&w.i(a,Object,O,"archetypeNodeData"),this.Zj=a,this.j("archetypeNodeData",b,a))});O.prototype.cm=function(a){if(a!==f){var b=this.Zj;if(b!==n){var c=this.He(a);c===n&&(c=this.uj(b),w.Ka(c,this.Al,a),this.xr(c))}return a}};w.g(O,"linkFromKeyProperty",O.prototype.eo);
w.defineProperty(O,{eo:"linkFromKeyProperty"},t("Xi"),function(a){var b=this.Xi;b!==a&&(He(a,O,"linkFromKeyProperty"),this.Xi=a,this.j("linkFromKeyProperty",b,a))});O.prototype.getFromKeyForLinkData=O.prototype.Yl=function(a){if(a!==n){var b=this.Xi;if(""!==b&&(b=w.Va(a,b),b!==f)){if(Ie(b))return b;u&&w.trace("FromKey value for link data "+a+" is not a number or a string: "+b)}}};
O.prototype.setFromKeyForLinkData=O.prototype.Wv=function(a,b){b===n&&(b=f);b!==f&&!Ie(b)&&w.hc(b,"number or string",O,"setFromKeyForLinkData:key");if(a!==n){var c=this.Xi;if(""!==c)if(b=this.cm(b),this.ti(a)){var d=w.Va(a,c);d!==b&&($e(this,d,a),w.Ka(a,c,b),this.He(b)===n&&Ke(this,b,a),Ge(this,"linkFromKey",he,c,a,d,b),"string"===typeof c&&this.vb(a,c))}else w.Ka(a,c,b)}};w.g(O,"linkToKeyProperty",O.prototype.jo);
w.defineProperty(O,{jo:"linkToKeyProperty"},t("Zi"),function(a){var b=this.Zi;b!==a&&(He(a,O,"linkToKeyProperty"),this.Zi=a,this.j("linkToKeyProperty",b,a))});O.prototype.getToKeyForLinkData=O.prototype.Zl=function(a){if(a!==n){var b=this.Zi;if(""!==b&&(b=w.Va(a,b),b!==f)){if(Ie(b))return b;u&&w.trace("ToKey value for link data "+a+" is not a number or a string: "+b)}}};
O.prototype.setToKeyForLinkData=O.prototype.Xv=function(a,b){b===n&&(b=f);b!==f&&!Ie(b)&&w.hc(b,"number or string",O,"setToKeyForLinkData:key");if(a!==n){var c=this.Zi;if(""!==c)if(b=this.cm(b),this.ti(a)){var d=w.Va(a,c);d!==b&&($e(this,d,a),w.Ka(a,c,b),this.He(b)===n&&Ke(this,b,a),Ge(this,"linkToKey",he,c,a,d,b),"string"===typeof c&&this.vb(a,c))}else w.Ka(a,c,b)}};w.g(O,"linkFromPortIdProperty",O.prototype.fo);
w.defineProperty(O,{fo:"linkFromPortIdProperty"},t("$p"),function(a){var b=this.$p;b!==a&&(He(a,O,"linkFromPortIdProperty"),this.$p=a,this.j("linkFromPortIdProperty",b,a))});O.prototype.getFromPortIdForLinkData=O.prototype.yG=function(a){if(a===n)return"";var b=this.$p;if(""===b)return"";a=w.Va(a,b);return a===f?"":a};
O.prototype.setFromPortIdForLinkData=O.prototype.xs=function(a,b){w.k(b,"string",O,"setFromPortIdForLinkData:portname");if(a!==n){var c=this.$p;if(""!==c)if(this.ti(a)){var d=w.Va(a,c);d===f&&(d="");d!==b&&(w.Ka(a,c,b),Ge(this,"linkFromPortId",he,c,a,d,b),"string"===typeof c&&this.vb(a,c))}else w.Ka(a,c,b)}};w.g(O,"linkToPortIdProperty",O.prototype.ko);
w.defineProperty(O,{ko:"linkToPortIdProperty"},t("aq"),function(a){var b=this.aq;b!==a&&(He(a,O,"linkToPortIdProperty"),this.aq=a,this.j("linkToPortIdProperty",b,a))});O.prototype.getToPortIdForLinkData=O.prototype.BG=function(a){if(a===n)return"";var b=this.aq;if(""===b)return"";a=w.Va(a,b);return a===f?"":a};
O.prototype.setToPortIdForLinkData=O.prototype.ys=function(a,b){w.k(b,"string",O,"setToPortIdForLinkData:portname");if(a!==n){var c=this.aq;if(""!==c)if(this.ti(a)){var d=w.Va(a,c);d===f&&(d="");d!==b&&(w.Ka(a,c,b),Ge(this,"linkToPortId",he,c,a,d,b),"string"===typeof c&&this.vb(a,c))}else w.Ka(a,c,b)}};w.g(O,"nodeIsLinkLabelProperty",O.prototype.so);
w.defineProperty(O,{so:"nodeIsLinkLabelProperty"},t("cu"),function(a){var b=this.cu;b!==a&&(He(a,O,"nodeIsLinkLabelProperty"),this.cu=a,this.j("nodeIsLinkLabelProperty",b,a))});O.prototype.isLinkLabelForNodeData=O.prototype.lz=function(a){if(a===n)return q;var b=this.cu;return""===b?q:w.Va(a,b)?h:q};w.g(O,"linkLabelKeysProperty",O.prototype.ho);
w.defineProperty(O,{ho:"linkLabelKeysProperty"},t("fh"),function(a){var b=this.fh;b!==a&&(He(a,O,"linkLabelKeysProperty"),this.fh=a,this.j("linkLabelKeysProperty",b,a))});O.prototype.getLabelKeysForLinkData=O.prototype.Pk=function(a){if(a===n)return[];var b=this.fh;if(""===b)return[];a=w.Va(a,b);return a===f?[]:a};
O.prototype.setLabelKeysForLinkData=O.prototype.pE=function(a,b){w.Er(b,O,"setLabelKeysForLinkData:arr");if(a!==n){var c=this.fh;if(""!==c)if(this.ti(a)){var d=w.Va(a,c);d===f&&(d=[]);if(d!==b){for(var e=w.Rb(d),g=0;g<e;g++){var i=w.Db(d,g);$e(this,i,a)}w.Ka(a,c,b);e=w.Rb(b);for(g=0;g<e;g++)i=w.Db(b,g),this.He(i)===n&&Ke(this,i,a);Ge(this,"linkLabelKeys",he,c,a,d,b);"string"===typeof c&&this.vb(a,c)}}else w.Ka(a,c,b)}};
O.prototype.addLabelKeyForLinkData=O.prototype.RB=function(a,b){if(!(b===n||b===f))if(Ie(b)||w.hc(b,"number or string",O,"addLabelKeyForLinkData:key"),a!==n){var c=this.fh;if(""!==c){var d=w.Va(a,c);d===f?this.pE(a,[b]):w.isArray(d)?0<=w.By(d,b)||(w.qi(d,Infinity,b),this.ti(a)&&(this.He(b)===n&&Ke(this,b,a),Ge(this,"linkLabelKeys",ie,c,a,n,b))):w.m(c+" property is not an Array; cannot addLabelKeyForLinkData: "+a)}}};
O.prototype.removeLabelKeyForLinkData=O.prototype.CH=function(a,b){if(!(b===n||b===f))if(Ie(b)||w.hc(b,"number or string",O,"removeLabelKeyForLinkData:key"),a!==n){var c=this.fh;if(""!==c){var d=w.Va(a,c);if(w.isArray(d)){var e=w.By(d,b);0>e||(w.ri(d,e),this.ti(a)&&($e(this,b,a),Ge(this,"linkLabelKeys",je,c,a,b,n)))}else d!==f&&w.m(c+" property is not an Array; cannot removeLabelKeyforLinkData: "+a)}}};w.g(O,"linkDataArray",O.prototype.Mg);
w.defineProperty(O,{Mg:"linkDataArray"},t("sk"),function(a){var b=this.sk;if(b!==a){w.Er(a,O,"linkDataArray");for(var c=w.Rb(a),d=0;d<c;d++){var e=w.Db(a,d);if(!w.mb(e)){w.m("GraphLinksModel.linkDataArray must only contain Objects, not: "+e);return}w.Xr(e)}this.sk=a;for(var g=new ma(Object),d=0;d<c;d++)e=w.Db(a,d),g.add(e);this.Vm=g;Ge(this,"linkDataArray",he,"linkDataArray",this,b,a);for(d=0;d<c;d++)e=w.Db(a,d),af(this,e)}});
O.prototype.containsLinkData=O.prototype.ti=function(a){return a===n?q:this.Vm.contains(a)};O.prototype.addLinkData=O.prototype.SB=function(a){if(a!==n){if(w.ec(a)===f)w.ic(a);else if(this.ti(a))return;this.Vm.add(a);var b=w.Rb(this.sk);w.qi(this.sk,b,a);Ge(this,"linkDataArray",ie,"linkDataArray",this,n,a,n,b);af(this,a)}};
O.prototype.removeLinkData=O.prototype.DH=function(a){if(a!==n){this.Vm.remove(a);var b=this.sk.indexOf(a);if(!(0>b)){w.ri(this.sk,b);Ge(this,"linkDataArray",je,"linkDataArray",this,a,n,b,n);b=this.Yl(a);$e(this,b,a);b=this.Zl(a);$e(this,b,a);for(var c=this.Pk(a),d=w.Rb(c),e=0;e<d;e++)b=w.Db(c,e),$e(this,b,a)}}};function af(a,b){var c=a.Yl(b),c=a.cm(c);a.He(c)===n&&Ke(a,c,b);c=a.Zl(b);c=a.cm(c);a.He(c)===n&&Ke(a,c,b);for(var d=a.Pk(b),e=w.Rb(d),g=0;g<e;g++)c=w.Db(d,g),a.He(c)===n&&Ke(a,c,b)}
w.g(O,"copyLinkDataFunction",O.prototype.dG);w.defineProperty(O,{dG:"copyLinkDataFunction"},t("ct"),function(a){var b=this.ct;b!==a&&(a!==n&&w.k(a,"function",O,"copyLinkDataFunction"),this.ct=a,this.j("copyLinkDataFunction",b,a))});
O.prototype.copyLinkData=O.prototype.nC=function(a){if(a===n)return n;var b=n,b=this.ct;if(b!==n)b=b(a,this);else{var b=new a.constructor,c;for(c in a)w.Ka(b,c,w.Va(a,c))}b&&(w.ic(b),""!==this.Xi&&w.Ka(b,this.Xi,f),""!==this.Zi&&w.Ka(b,this.Zi,f),""!==this.fh&&w.Ka(b,this.fh,[]));return b};w.g(O,"nodeIsGroupProperty",O.prototype.ro);w.defineProperty(O,{ro:"nodeIsGroupProperty"},t("bu"),function(a){var b=this.bu;b!==a&&(He(a,O,"nodeIsGroupProperty"),this.bu=a,this.j("nodeIsGroupProperty",b,a))});
O.prototype.isGroupForNodeData=O.prototype.iz=function(a){if(a===n)return q;var b=this.bu;return""===b?q:w.Va(a,b)?h:q};w.g(O,"nodeGroupKeyProperty",O.prototype.qo);w.defineProperty(O,{qo:"nodeGroupKeyProperty"},t("fj"),function(a){var b=this.fj;b!==a&&(He(a,O,"nodeGroupKeyProperty"),this.fj=a,this.j("nodeGroupKeyProperty",b,a))});
O.prototype.getGroupKeyForNodeData=O.prototype.Vn=function(a){if(a!==n){var b=this.fj;if(""!==b&&(b=w.Va(a,b),b!==f)){if(Ie(b))return b;u&&w.trace("GroupKey value for node data "+a+" is not a number or a string: "+b)}}};
O.prototype.setGroupKeyForNodeData=O.prototype.Pz=function(a,b){b===n&&(b=f);b!==f&&!Ie(b)&&w.hc(b,"number or string",O,"setGroupKeyForNodeData:key");if(a!==n){var c=this.fj;if(""!==c)if(this.oe(a)){var d=w.Va(a,c);d!==b&&($e(this,d,a),w.Ka(a,c,b),this.He(b)===n&&Ke(this,b,a),Ge(this,"nodeGroupKey",he,c,a,d,b),"string"===typeof c&&this.vb(a,c))}else w.Ka(a,c,b)}};O.prototype.copyNodeData=O.prototype.uj=function(a){if(a===n)return n;a=B.prototype.uj.call(this,a);""!==this.fj&&w.Ka(a,this.fj,f);return a};
O.prototype.setDataProperty=O.prototype.oE=function(a,b,c){u&&(w.k(a,"object",O,"setDataProperty:data"),w.k(b,"string",O,"setDataProperty:propname"),""===b&&w.m("GraphLinksModel.setDataProperty: property name must not be an empty string when setting "+a+" to "+c));if(this.oe(a))if(b===this.Vk)this.Qz(a,c);else{if(b===this.Uk){this.Uv(a,c);return}if(b===this.qo){this.Pz(a,c);return}b===this.ro?w.m("GraphLinksModel.setDataProperty: property name must not be the nodeIsGroupProperty: "+b):b===this.so&&
w.m("GraphLinksModel.setDataProperty: property name must not be the nodeIsLinkLabelProperty: "+b)}else if(this.ti(a)){if(b===this.eo){this.Wv(a,c);return}if(b===this.jo){this.Xv(a,c);return}if(b===this.fo){this.xs(a,c);return}if(b===this.ko){this.ys(a,c);return}if(b===this.co){this.nE(a,c);return}if(b===this.ho){this.pE(a,c);return}}var d=w.Va(a,b);d!==c&&(w.Ka(a,b,c),this.Ez(a,b,d,c))};da=O.prototype;
da.rs=function(a,b){B.prototype.rs.call(this,a,b);for(var c=this.jc.l;c.next();)this.Jz(c.value,a,b);for(c=this.Vm.l;c.next();){var d=c.value,e=a,g=b;if(this.Yl(d)===e){var i=this.Xi;w.Ka(d,i,g);Ge(this,"linkFromKey",he,i,d,e,g);"string"===typeof i&&this.vb(d,i)}this.Zl(d)===e&&(i=this.Zi,w.Ka(d,i,g),Ge(this,"linkToKey",he,i,d,e,g),"string"===typeof i&&this.vb(d,i));for(var j=this.Pk(d),k=w.Rb(j),i=this.fh,l=0;l<k;l++)w.Db(j,l)===e&&(w.ZB(j,l,g),Ge(this,"linkLabelKeys",ie,i,d,e,g))}};
da.Jz=function(a,b,c){if(this.Vn(a)===b){var d=this.fj;w.Ka(a,d,c);Ge(this,"nodeGroupKey",he,d,a,b,c);"string"===typeof d&&this.vb(a,d)}};da.$z=function(){B.prototype.$z.call(this);for(var a=this.Mg,b=w.Rb(a),c=0;c<b;c++)af(this,w.Db(a,c))};
da.xo=function(a){B.prototype.xo.call(this,a);var a=this.lb(a),b=Je(this,a);if(b!==n){for(var c=new z(Object),b=b.l;b.next();){var d=b.value;if(this.oe(d)){if(this.Vn(d)===a){var e=this.fj;Ge(this,"nodeGroupKey",he,e,d,a,a);"string"===typeof e&&this.vb(d,e);c.add(d)}}else{this.Yl(d)===a&&(e=this.Xi,Ge(this,"linkFromKey",he,e,d,a,a),"string"===typeof e&&this.vb(d,e),c.add(d));this.Zl(d)===a&&(e=this.Zi,Ge(this,"linkToKey",he,e,d,a,a),"string"===typeof e&&this.vb(d,e),c.add(d));for(var g=this.Pk(d),
i=w.Rb(g),e=this.fh,j=0;j<i;j++)w.Db(g,j)===a&&(Ge(this,"linkLabelKeys",ie,e,d,a,a),c.add(d))}}for(c=c.l;c.next();)$e(this,a,c.value)}};da.wo=function(a){B.prototype.wo.call(this,a);var b=this.Vn(a);this.He(b)===n&&Ke(this,b,a)};da.Hs=function(a){B.prototype.Hs.call(this,a);var b=this.Vn(a);$e(this,b,a)};w.g(O,"linkCategoryProperty",O.prototype.co);
w.defineProperty(O,{co:"linkCategoryProperty"},t("Xp"),function(a){var b=this.Xp;b!==a&&(He(a,O,"linkCategoryProperty"),this.Xp=a,this.j("linkCategoryProperty",b,a))});O.prototype.getCategoryForLinkData=O.prototype.OC=function(a){if(a===n)return"";var b=this.Xp;if(""===b)return"";b=w.Va(a,b);if(b===f)return"";if("string"===typeof b)return b;u&&w.trace("getCategoryForLinkData found a non-string category for "+a+": "+b);return b};
O.prototype.setCategoryForLinkData=O.prototype.nE=function(a,b){w.k(b,"string",O,"setCategoryForLinkData:cat");if(a!==n){var c=this.Xp;if(""===c)return"";if(this.ti(a)){var d=w.Va(a,c);d===f&&(d="");d!==b&&(w.Ka(a,c,b),Ge(this,"linkCategory",he,c,a,d,b),"string"===typeof c&&this.vb(a,c))}else w.Ka(a,c,b)}};function ze(a){B.call(this);this.gj="parent";this.vq="parentLinkCategory";a!==f&&(this.bg=a)}w.P("TreeModel",ze);w.Da(ze,B);
ze.prototype.toString=function(a){a===f&&(a=0);if(2<=a)return this.Wz();var b=(""!==this.name?this.name:"")+" TreeModel";if(0<a){var b=b+"\n node data:",a=this.bg,c=w.Rb(a),d;for(d=0;d<c;d++)var e=w.Db(a,d),b=b+(" "+this.lb(e)+":"+ke(e))}return b};ze.prototype.writeJsonProtected=ze.prototype.fw=function(){var a=B.prototype.fw.call(this),b="";"parent"!==this.to&&"string"===typeof this.to&&(b+=',\n  "nodeParentKeyProperty": '+this.quote(this.to));return a+b};
ze.prototype.readJsonProtected=ze.prototype.Ov=function(a){B.prototype.Ov.call(this,a);a.nodeParentKeyProperty&&(this.to=a.nodeParentKeyProperty)};ze.prototype.cm=function(a){return a};w.g(ze,"nodeParentKeyProperty",ze.prototype.to);w.defineProperty(ze,{to:"nodeParentKeyProperty"},t("gj"),function(a){var b=this.gj;b!==a&&(He(a,ze,"nodeParentKeyProperty"),this.gj=a,this.j("nodeParentKeyProperty",b,a))});
ze.prototype.getParentKeyForNodeData=ze.prototype.Wn=function(a){if(a!==n){var b=this.gj;if(""!==b&&(b=w.Va(a,b),b!==f)){if(Ie(b))return b;u&&w.trace("ParentKey value for node data "+a+" is not a number or a string: "+b)}}};
ze.prototype.setParentKeyForNodeData=ze.prototype.Bf=function(a,b){b===n&&(b=f);b!==f&&!Ie(b)&&w.hc(b,"number or string",ze,"setParentKeyForNodeData:key");if(a!==n){var c=this.gj;if(""!==c)if(b=this.cm(b),this.oe(a)){var d=w.Va(a,c);d!==b&&($e(this,d,a),w.Ka(a,c,b),this.He(b)===n&&Ke(this,b,a),Ge(this,"nodeParentKey",he,c,a,d,b),"string"===typeof c&&this.vb(a,c))}else w.Ka(a,c,b)}};w.g(ze,"parentLinkCategoryProperty",ze.prototype.uH);
w.defineProperty(ze,{uH:"parentLinkCategoryProperty"},t("vq"),function(a){var b=this.vq;b!==a&&(He(a,ze,"parentLinkCategoryProperty"),this.vq=a,this.j("parentLinkCategoryProperty",b,a))});ze.prototype.getParentLinkCategoryForNodeData=ze.prototype.AG=function(a){if(a===n)return"";var b=this.vq;if(""===b)return"";b=w.Va(a,b);if(b===f)return"";if("string"===typeof b)return b;u&&w.trace("getParentLinkCategoryForNodeData found a non-string category for "+a+": "+b);return b};
ze.prototype.setParentLinkCategoryForNodeData=ze.prototype.OH=function(a,b){w.k(b,"string",ze,"setParentLinkCategoryForNodeData:cat");if(a!==n){var c=this.vq;if(""===c)return"";if(this.oe(a)){var d=w.Va(a,c);d===f&&(d="");d!==b&&(w.Ka(a,c,b),Ge(this,"parentLinkCategory",he,c,a,d,b),"string"===typeof c&&this.vb(a,c))}else w.Ka(a,c,b)}};ze.prototype.copyNodeData=ze.prototype.uj=function(a){if(a===n)return n;a=B.prototype.uj.call(this,a);""!==this.gj&&w.Ka(a,this.gj,f);return a};
ze.prototype.setDataProperty=ze.prototype.oE=function(a,b,c){u&&(w.k(a,"object",B,"setDataProperty:data"),w.k(b,"string",B,"setDataProperty:propname"),""===b&&w.m("Model.setDataProperty: property name must not be an empty string when setting "+a+" to "+c));if(this.oe(a))if(b===this.Vk)this.Qz(a,c);else{if(b===this.Uk){this.Uv(a,c);return}if(b===this.to){this.Bf(a,c);return}}var d=w.Va(a,b);d!==c&&(w.Ka(a,b,c),this.Ez(a,b,d,c))};da=ze.prototype;
da.rs=function(a,b){B.prototype.rs.call(this,a,b);for(var c=this.jc.l;c.next();)this.Jz(c.value,a,b)};da.Jz=function(a,b,c){if(this.Wn(a)===b){var d=this.gj;w.Ka(a,d,c);Ge(this,"nodeParentKey",he,d,a,b,c);"string"===typeof d&&this.vb(a,d)}};
da.xo=function(a){B.prototype.xo.call(this,a);var a=this.lb(a),b=Je(this,a);if(b!==n){for(var c=new z(Object),b=b.l;b.next();){var d=b.value;if(this.oe(d)&&this.Wn(d)===a){var e=this.gj;Ge(this,"nodeParentKey",he,e,d,a,a);"string"===typeof e&&this.vb(d,e);c.add(d)}}for(c=c.l;c.next();)$e(this,a,c.value)}};da.wo=function(a){B.prototype.wo.call(this,a);var b=this.Wn(a),b=this.cm(b);this.He(b)===n&&Ke(this,b,a)};da.Hs=function(a){B.prototype.Hs.call(this,a);var b=this.Wn(a);$e(this,b,a)};
function bf(a,b,c){w.ic(this);a===f?a="":w.k(a,"string",bf,"constructor:targetprop");b===f?b=a:w.k(b,"string",bf,"constructor:sourceprop");c===f?c=n:c!==n&&w.k(c,"function",bf,"constructor:conv");this.BB="";this.Pf=n;this.Hu=a;this.Fu=this.ay=0;this.tB=n;this.zu=b;this.Nw=c;this.zx=cf;this.Jw=n}w.P("Binding",bf);var cf;bf.OneWay=cf=w.s(bf,"OneWay",1);var df;bf.TwoWay=df=w.s(bf,"TwoWay",2);
bf.parseEnum=function(a,b){w.k(a,"function",bf,"parseEnum:ctor");w.jb(b,a,bf,"parseEnum:defval");return function(c){return w.Ul(a,c)||b}};var ke;bf.toString=ke=function(a){var b=a;w.mb(a)&&(a.text?b=a.text:a.Text?b=a.Text:a.name?b=a.name:a.Name?b=a.Name:a.key!==f?b=a.key:a.Key!==f?b=a.Key:a.id!==f?b=a.id:a.Id!==f?b=a.Id:a.ID!==f&&(b=a.ID));return b===f?"undefined":b===n?"null":b.toString()};bf.prototype.toString=function(){return"Binding("+this.jm+" "+this.Uz+":"+this.Sz+")"};
bf.prototype.freeze=function(){this.$a=h;return this};bf.prototype.Ia=function(){this.$a=q;return this};w.g(bf,"targetId",bf.prototype.jm);w.defineProperty(bf,{jm:n},t("BB"),function(a){w.H(this);w.k(a,"string",bf,"targetId");this.BB=a});w.g(bf,"targetProperty",bf.prototype.Uz);w.defineProperty(bf,{Uz:"targetProperty"},t("Hu"),function(a){w.H(this);w.k(a,"string",bf,"targetProperty");this.Hu=a});w.g(bf,"sourceName",bf.prototype.Bo);
w.defineProperty(bf,{Bo:"sourceName"},t("tB"),function(a){w.H(this);w.k(a,"string",bf,"sourceName");this.tB=a});w.g(bf,"sourceProperty",bf.prototype.Sz);w.defineProperty(bf,{Sz:"sourceProperty"},t("zu"),function(a){w.H(this);w.k(a,"string",bf,"sourceProperty");this.zu=a});w.g(bf,"converter",bf.prototype.kC);w.defineProperty(bf,{kC:"converter"},t("Nw"),function(a){w.H(this);a!==n&&w.k(a,"function",bf,"converter");this.Nw=a});w.g(bf,"backConverter",bf.prototype.cC);
w.defineProperty(bf,{cC:"backConverter"},t("Jw"),function(a){w.H(this);a!==n&&w.k(a,"function",bf,"backConverter");this.Jw=a});w.g(bf,"mode",bf.prototype.mode);w.defineProperty(bf,{mode:"mode"},t("zx"),function(a){w.H(this);w.jb(a,bf,bf,"mode");this.zx=a});bf.prototype.makeTwoWay=bf.prototype.lL=function(a){a===f&&(a=n);this.mode=df;this.cC=a;return this};bf.prototype.ofObject=bf.prototype.Cz=function(a){a===f&&(a="");u&&w.k(a,"string",bf,"ofObject:srcname");this.Bo=a;return this};
bf.prototype.updateTarget=bf.prototype.ME=function(a,b,c){var d=this.zu;if(!(c&&d!==c)){var c=this.Hu,e=this.Nw;if(!(e===n&&""===c)){u&&("string"===typeof c&&"function"!==typeof a.setAttribute&&!w.fz(a,c))&&w.trace("Binding error: undefined target property: "+c+" on "+a.toString());var g=b;""!==d&&(g=w.Va(b,d));if(g!==f)if(e===n)""!==c&&w.Ka(a,c,g);else try{if(""!==c){var i=e(g,a);w.Ka(a,c,i)}else e(g,a)}catch(j){u&&w.trace("Binding error: "+j.toString())}}}};
bf.prototype.updateSource=bf.prototype.LE=function(a,b,c){if(this.zx===df){var d=this.Hu;if(!(c&&d!==c)){var c=this.zu,e=this.Jw;if(!(e===n&&""===c)){var g=a;""!==d&&(g=w.Va(a,d));if(g!==f)if(e===n)w.Ka(b,c,g);else try{if(""!==c){var i=e(g,b);w.Ka(b,c,i)}else e(g,b)}catch(j){u&&w.trace("Binding error: "+j.toString())}}}}};function ef(){this.WE=(new z(fe)).freeze();this.Ab="";this.TA=q}w.P("Transaction",ef);
ef.prototype.toString=function(a){var b="Transaction: "+this.name+" "+this.uh.count.toString()+(this.Xn?"":", incomplete");if(a!==f&&0<a)for(var c=this.uh.count,d=0;d<c;d++){var e=this.uh.oa(d);e!==n&&(b+="\n  "+e.toString(a-1))}return b};ef.prototype.clear=ef.prototype.clear=function(){var a=this.uh;a.Ia();for(var b=a.count-1;0<=b;b--){var c=a.oa(b);c!==n&&c.clear()}a.clear();a.freeze()};ef.prototype.canUndo=ef.prototype.Ik=t("Xn");
ef.prototype.undo=ef.prototype.bl=function(){if(this.Ik())for(var a=this.uh.count-1;0<=a;a--){var b=this.uh.oa(a);b!==n&&b.bl()}};ef.prototype.canRedo=ef.prototype.Gk=t("Xn");ef.prototype.redo=ef.prototype.uo=function(){if(this.Gk())for(var a=this.uh.count,b=0;b<a;b++){var c=this.uh.oa(b);c!==n&&c.uo()}};w.u(ef,{uh:"changes"},t("WE"));w.g(ef,"name",ef.prototype.name);w.defineProperty(ef,{name:"name"},t("Ab"),ba("Ab"));w.g(ef,"isComplete",ef.prototype.Xn);
w.defineProperty(ef,{Xn:"isComplete"},t("TA"),ba("TA"));function le(){this.Ax=new ma(B);this.Vh=q;this.ZE=(new z(ef)).freeze();this.lk=-1;this.$A=999;this.Wh=q;this.ht=n;this.Bk=0;this.Kw=q;u&&(this.Kw=h);this.Bg=(new z("string")).freeze();this.Zm=new z("number");this.bx=h}w.P("UndoManager",le);
le.prototype.toString=function(a){for(var b="UndoManager "+this.Cj+"<"+this.history.count+"<="+this.tz,b=b+"[",c=this.GD.count,d=0;d<c;d++)0<d&&(b+=" "),b+=this.GD.oa(d);b+="]";if(a!==f&&0<a){c=this.history.count;for(d=0;d<c;d++)b+="\n "+this.history.oa(d).toString(a-1)}return b};
le.prototype.clear=le.prototype.clear=function(){var a=this.history;a.Ia();for(var b=a.count-1;0<=b;b--){var c=a.oa(b);c!==n&&c.clear()}a.clear();this.lk=-1;a.freeze();this.Wh=q;this.ht=n;this.Bk=0;this.Bg.Ia();this.Bg.clear();this.Bg.freeze();this.Zm.clear()};le.prototype.addModel=le.prototype.xF=function(a){this.Ax.add(a)};le.prototype.removeModel=le.prototype.EH=function(a){this.Ax.remove(a)};
le.prototype.startTransaction=le.prototype.gc=function(a){a===n&&(a="");if(this.tb)return q;this.bx===h&&(this.bx=q,this.Bk++,this.Qd("StartingFirstTransaction",a,this.Ol),0<this.Bk&&this.Bk--);this.isEnabled&&(this.Bg.Ia(),this.Bg.add(a),this.Bg.freeze(),this.Ol===n?this.Zm.add(0):this.Zm.add(this.Ol.uh.count));this.Bk++;var b=1===this.al;b&&this.Qd("StartedTransaction",a);return b};le.prototype.commitTransaction=le.prototype.me=function(a){return ff(this,h,a)};
le.prototype.rollbackTransaction=le.prototype.ss=function(){return ff(this,q,"")};
function ff(a,b,c){if(a.tb)return q;a.Gy&&1>a.al&&w.trace("Ending transaction without having started a transaction: "+c);var d=1===a.al;d&&(b&&a.isEnabled)&&a.Qd("CommittingTransaction",c,a.Ol);var e=0;if(0<a.al&&(a.Bk--,a.isEnabled)){var g=a.Bg.count;0<g&&(""===c&&(c=a.Bg.oa(0)),a.Bg.Ia(),a.Bg.Se(g-1),a.Bg.freeze());g=a.Zm.count;0<g&&(e=a.Zm.oa(g-1),a.Zm.Se(g-1))}g=a.Ol;if(d){if(b){if(a.isEnabled&&g!==n){b=g;b.Xn=h;b.name=c;d=a.history;d.Ia();for(e=d.count-1;e>a.Cj;e--)g=d.oa(e),g!==n&&g.clear(),
d.Se(e);e=a.tz;0===e&&(e=1);0<e&&d.count>=e&&(g=d.oa(0),g!==n&&g.clear(),d.Se(0),a.lk--);d.add(b);a.lk++;d.freeze();g=b}a.Qd("CommittedTransaction",c,g)}else{a.Wh=h;try{a.isEnabled&&g!==n&&(g.Xn=h,g.bl())}finally{a.Qd("RolledBackTransaction",c,g),a.Wh=q}g!==n&&g.clear()}a.ht=n;return h}if(a.isEnabled&&!b&&g!==n){a=e;c=g.uh;for(b=c.count-1;b>=a;b--)d=c.oa(b),d!==n&&d.bl(),c.Ia(),c.Se(b);c.freeze()}return q}
le.prototype.canUndo=le.prototype.Ik=function(){if(!this.isEnabled||0<this.al||this.tb)return q;var a=this.GE;return a!==n&&a.Ik()?h:q};le.prototype.undo=le.prototype.bl=function(){if(this.Ik()){var a=this.GE;try{this.Qd("StartingUndo","Undo",a),this.Wh=h,this.lk--,a.bl()}catch(b){w.trace("undo error: "+b.toString())}finally{this.Wh=q,this.Qd("FinishedUndo","Undo",a)}}};
le.prototype.canRedo=le.prototype.Gk=function(){if(!this.isEnabled||0<this.al||this.tb)return q;var a=this.FE;return a!==n&&a.Gk()?h:q};le.prototype.redo=le.prototype.uo=function(){if(this.Gk()){var a=this.FE;try{this.Qd("StartingRedo","Redo",a),this.Wh=h,this.lk++,a.uo()}catch(b){w.trace("redo error: "+b.toString())}finally{this.Wh=q,this.Qd("FinishedRedo","Redo",a)}}};
le.prototype.Qd=function(a,b,c){c===f&&(c=n);var d=new fe;d.fd=ge;d.propertyName=a;d.object=c;d.oldValue=b;for(a=this.gH;a.next();)b=a.value,d.ba=b,b.Vu(d)};le.prototype.handleChanged=le.prototype.XC=function(a){if(this.isEnabled&&!this.tb&&!this.skipsEvent(a)){var b=this.Ol;b===n&&(this.ht=b=new ef);var c=a.copy(),b=b.uh;b.Ia();b.add(c);b.freeze();this.Gy&&(0>=this.al&&!this.bx)&&(a=a.h,a!==n&&a.wg===q||w.trace("Change not within a transaction: "+c.toString()))}};
le.prototype.skipsEvent=le.prototype.YL=function(a){if(a===n||0>a.fd.value)return h;a=a.object;if(a instanceof P){if(a=a.Ja,a!==n&&a.yc)return h}else if(a instanceof gf&&a.yc)return h;return q};w.u(le,{gH:"models"},function(){return this.Ax.l});w.g(le,"isEnabled",le.prototype.isEnabled);w.defineProperty(le,{isEnabled:"isEnabled"},t("Vh"),ba("Vh"));w.u(le,{GE:"transactionToUndo"},function(){return 0<=this.Cj&&this.Cj<=this.history.count-1?this.history.oa(this.Cj):n});
w.u(le,{FE:"transactionToRedo"},function(){return this.Cj<this.history.count-1?this.history.oa(this.Cj+1):n});w.u(le,{tb:"isUndoingRedoing"},t("Wh"));w.u(le,{history:"history"},t("ZE"));w.g(le,"maxHistoryLength",le.prototype.tz);w.defineProperty(le,{tz:"maxHistoryLength"},t("$A"),ba("$A"));w.u(le,{Cj:"historyIndex"},t("lk"));w.u(le,{Ol:"currentTransaction"},t("ht"));w.u(le,{al:"transactionLevel"},t("Bk"));w.u(le,{NG:"isInTransaction"},function(){return 0<this.Bk});
w.defineProperty(le,{Gy:"checksTransactionLevel"},t("Kw"),ba("Kw"));w.u(le,{GD:"nestedTransactionNames"},t("Bg"));function qa(){this.aa=n;this.DA=this.vA=q;this.uk=this.nA=n;this.LB=1.05;this.vx=NaN;this.XA=n;this.MB=NaN;this.rF=n}w.P("CommandHandler",qa);var hf=n,jf="";qa.prototype.toString=ca("CommandHandler");w.u(qa,{h:"diagram"},t("aa"));qa.prototype.ae=function(a){u&&a!==n&&w.i(a,A,qa,"setDiagram");this.aa=a};
qa.prototype.doKeyDown=qa.prototype.Ty=function(){var a=this.h;if(a!==n){var b=a.N,c=b.Kk,d=b.shift,e=b.alt,g=b.key;c&&("C"===g||"Insert"===g)?this.canCopySelection()&&this.copySelection():c&&"X"===g||d&&"Del"===g?this.canCutSelection()&&this.cutSelection():"Del"===g?this.canDeleteSelection()&&this.deleteSelection():c&&"V"===g||d&&"Insert"===g?this.canPasteSelection()&&this.pasteSelection():c&&"Y"===g||e&&d&&"Backspace"===g?this.canRedo()&&this.redo():c&&"Z"===g||e&&"Backspace"===g?this.canUndo()&&
this.undo():c&&"A"===g?this.canSelectAll()&&this.selectAll():"Esc"===g?this.canStopCommand()&&this.stopCommand():"Up"===g?a.sf&&(c?a.scroll("pixel","up"):a.scroll("line","up")):"Down"===g?a.sf&&(c?a.scroll("pixel","down"):a.scroll("line","down")):"Left"===g?a.rf&&(c?a.scroll("pixel","left"):a.scroll("line","left")):"Right"===g?a.rf&&(c?a.scroll("pixel","right"):a.scroll("line","right")):"PageUp"===g?d&&a.rf?a.scroll("page","left"):a.sf&&a.scroll("page","up"):"PageDown"===g?d&&a.rf?a.scroll("page",
"right"):a.sf&&a.scroll("page","down"):"Home"===g?(b=a.vc,c&&a.sf?a.position=new F(a.position.x,b.y):!c&&a.rf&&(a.position=new F(b.x,a.position.y))):"End"===g?(b=a.vc,d=a.Ua,c&&a.sf?a.position=new F(d.x,b.bottom-d.height):!c&&a.rf&&(a.position=new F(b.right-d.width,d.y))):"Subtract"===g?this.canDecreaseZoom()&&this.decreaseZoom():"Add"===g?this.canIncreaseZoom()&&this.increaseZoom():c&&"0"===g?this.canResetZoom()&&this.resetZoom():d&&"Z"===g?this.canZoomToFit()&&this.zoomToFit():c&&!d&&"G"===g?this.canGroupSelection()&&
this.groupSelection():c&&d&&"G"===g?this.canUngroupSelection()&&this.ungroupSelection():b.event&&113===b.event.which?this.canEditTextBlock()&&this.editTextBlock():b.bubbles=h}};qa.prototype.doKeyUp=qa.prototype.Uy=function(){var a=this.h;a!==n&&(a.N.bubbles=h)};qa.prototype.stopCommand=qa.prototype.eM=function(){var a=this.h;if(a!==n){var b=a.Ha;b instanceof kf&&a.je&&a.Iy();b!==n&&b.doCancel()}};qa.prototype.canStopCommand=qa.prototype.bJ=ca(h);
qa.prototype.selectAll=qa.prototype.SL=function(){var a=this.h;if(a!==n)try{a.uc="wait";a.ya("ChangingSelection");for(var b=a.Xk;b.next();)b.value.Qa=h;for(b=a.Wk;b.next();)b.value.Qa=h;for(b=a.links;b.next();)b.value.Qa=h}finally{a.ya("ChangedSelection"),a.uc=""}};qa.prototype.canSelectAll=qa.prototype.aJ=function(){var a=this.h;return a!==n&&a.je};
qa.prototype.deleteSelection=qa.prototype.GJ=function(){var a=this.h;if(a!==n&&!a.ya("SelectionDeleting",a.selection))try{a.uc="wait";a.gc("Delete");a.ya("ChangingSelection");for(var b=new ma(R),c=a.selection.l;c.next();)lf(b,c.value,h,this.CC,function(a){return a.canDelete()});a.Iz(b,h);a.ya("SelectionDeleted",b)}finally{a.ya("ChangedSelection"),a.me("Delete"),a.uc=""}};
qa.prototype.canDeleteSelection=qa.prototype.JI=function(){var a=this.h;return a===n||(a.cb||a.se)||!a.Dk||0===a.selection.count?q:h};
function lf(a,b,c,d,e){if(!a.contains(b)&&(e===f&&(e=n),(e===n||e(b))&&!(b instanceof mf)))if(a.add(b),b instanceof T){if(c&&b instanceof vf)for(var g=b.Fc;g.next();){var i=g.value;lf(a,i,c,d,e)}for(i=b.te;i.next();)if(g=i.value,!a.contains(g)){var j=g.ia,k=g.na;j!==n&&a.contains(j)&&k!==n&&a.contains(k)?lf(a,g,c,d,e):(j===n||k===n)&&lf(a,g,c,d,e)}if(d){i=h;g=b.h;g!==n&&(i=g.hd);for(b=i?b.HC():b.GC();b.next();)i=b.value,lf(a,i,c,d,e)}}else if(b instanceof U)for(i=b.Ej;i.next();)lf(a,i.value,c,d,e)}
qa.prototype.copyParts=qa.prototype.Ln=function(a,b,c){for(var d=new la(R,R),a=a.l;a.next();){var e=a.value;wf(this,e,b,d,c)}if(b!==n){for(var c=b.ba,a=new ma(U),g=new la(U,U),i=d.l;i.next();)if(e=i.value,e instanceof U)(e.ia===n||e.na===n)&&a.add(e);else if(c instanceof ze&&e instanceof T&&e.data!==n){var j=e,e=i.key,k=e.JC();k!==n&&((k=d.qa(k))?(c.Bf(j.data,c.lb(k.data)),j=b.xf(j.data),e=e.rv(),e!==n&&j!==n&&g.add(e,j)):c.Bf(j.data,f))}0<a.count&&b.Iz(a,q);if(0<g.count)for(b=g.l;b.next();)d.add(b.key,
b.value)}for(b=d.l;b.next();)b.value.vb();return d};
function wf(a,b,c,d,e){if(b===n||e&&!b.canCopy())return n;if(d.contains(b))return a=d.qa(b),a instanceof R?a:n;var g=n,i=b.data;if(i!==n&&c!==n){var j=c.ba;b instanceof U?j instanceof O&&(i=j.nC(i),w.mb(i)&&(j.SB(i),g=c.xf(i))):(i=j.uj(i),w.mb(i)&&(j.xr(i),g=c.Bj(i)))}else xf(b),g=b.copy(),c!==n&&g instanceof R&&c.add(g);if(!(g instanceof R))return n;g.Qa=q;d.add(b,g);if(b instanceof T){for(j=b.te;j.next();){i=j.value;if(i.ia===b){var k=d.qa(i);k!==n&&(k.ia=g)}i.na===b&&(k=d.qa(i),k!==n&&(k.na=g))}if(b instanceof
vf&&g instanceof vf)for(b=b.Fc;b.next();)j=wf(a,b.value,c,d,e),!(j instanceof U)&&j!==n&&(j.bb=g)}else if(b instanceof U){j=b.ia;j!==n&&(j=d.qa(j),j!==n&&(g.ia=j));j=b.na;j!==n&&(j=d.qa(j),j!==n&&(g.na=j));for(b=b.Ej;b.next();)j=wf(a,b.value,c,d,e),j!==n&&(j.xd=g)}return g}qa.prototype.copySelection=qa.prototype.wJ=function(){var a=this.h;if(a!==n){for(var b=new ma(R),a=a.selection.l;a.next();)lf(b,a.value,h,this.mC,function(a){return a.canCopy()});this.copyToClipboard(b)}};
qa.prototype.canCopySelection=qa.prototype.FI=function(){var a=this.h;return a===n||(!a.pj||!a.Su)||0===a.selection.count?q:h};qa.prototype.cutSelection=qa.prototype.AJ=function(){this.copySelection();this.deleteSelection()};qa.prototype.canCutSelection=qa.prototype.GI=function(){var a=this.h;return a===n||(a.cb||a.se)||(!a.pj||!a.Dk||!a.Su)||0===a.selection.count?q:h};
qa.prototype.copyToClipboard=qa.prototype.xJ=function(a){var b=this.h;if(b!==n){var c=n;a===n?(hf=n,jf=""):(a=b.Ln(a,n,h),c=new z(R),c.Tf(a),hf=c,jf=b.ba.Pl);b.ya("ClipboardChanged",c)}};qa.prototype.pasteFromClipboard=qa.prototype.BL=function(){var a=hf;if(a===n)return w.Ef;var b=this.h;if(b===n||jf!==b.ba.Pl)return w.Ef;b=b.Ln(a,b,q);a=new ma(R);for(b=b.l;b.next();){var c=b.value;c.location.T()||(c.location=b.key.location.copy());c.position.T()||(c.position=b.key.position.copy());a.add(c)}return a};
qa.prototype.pasteSelection=qa.prototype.CL=function(a){var b=this.h;if(b!==n)try{b.uc="wait";b.gc("Paste");b.ya("ChangingSelection");var c=this.pasteFromClipboard();0<c.count&&yf(b);for(var d=c.l;d.next();)d.value.Qa=h;b.ya("ChangedSelection");if(a instanceof F){var e=b.computePartsBounds(b.selection);if(e){var g=b.Qb.qe,i=g.computeEffectiveCollection(b.selection);g.moveParts(i,new F(a.x-e.pa,a.y-e.ta),q)}}b.ya("ClipboardPasted",c)}finally{b.me("Paste"),b.uc=""}};
qa.prototype.canPasteSelection=qa.prototype.TI=function(){var a=this.h;return a===n||(a.cb||a.se)||(!a.Bn||!a.Su)||hf===n||jf!==a.ba.Pl?q:h};qa.prototype.undo=qa.prototype.bl=function(){var a=this.h;a!==n&&a.sa.bl()};qa.prototype.canUndo=qa.prototype.Ik=function(){var a=this.h;return a===n||a.cb||a.se?q:a.zy&&a.sa.Ik()};qa.prototype.redo=qa.prototype.uo=function(){var a=this.h;a!==n&&a.sa.uo()};qa.prototype.canRedo=qa.prototype.Gk=function(){var a=this.h;return a===n||a.cb||a.se?q:a.zy&&a.sa.Gk()};
qa.prototype.decreaseZoom=qa.prototype.BJ=function(a){a===f&&(a=1/this.Js);var b=this.h;b!==n&&(a*=b.scale,a<b.Fj||a>b.Ah||(b.scale=a,b.yb()))};qa.prototype.canDecreaseZoom=qa.prototype.HI=function(a){a===f&&(a=1/this.Js);var b=this.h;if(b===n)return q;a*=b.scale;return a<b.Fj||a>b.Ah?q:b.Hn};qa.prototype.increaseZoom=qa.prototype.PK=function(a){a===f&&(a=this.Js);var b=this.h;b!==n&&(a*=b.scale,a<b.Fj||a>b.Ah||(b.scale=a,b.yb()))};
qa.prototype.canIncreaseZoom=qa.prototype.RI=function(a){a===f&&(a=this.Js);var b=this.h;if(b===n)return q;a*=b.scale;return a<b.Fj||a>b.Ah?q:b.Hn};qa.prototype.resetZoom=qa.prototype.NL=function(a){a===f&&(a=1);var b=this.h;if(b!==n&&!(a<b.Fj||a>b.Ah))b.scale=a,b.yb()};qa.prototype.canResetZoom=qa.prototype.XI=function(a){a===f&&(a=1);var b=this.h;return b===n||a<b.Fj||a>b.Ah?q:b.Hn};
qa.prototype.zoomToFit=qa.prototype.QE=function(){var a=this.h;if(a!==n){var b=a.scale,c=a.position;b===this.MB&&!isNaN(this.vx)?(a.scale=this.vx,a.position=this.XA,a.yb()):(this.vx=b,this.XA=c.copy(),a.QE(),a.Ng(),this.MB=a.scale,this.rF=a.position.copy())}};qa.prototype.canZoomToFit=qa.prototype.eJ=function(){var a=this.h;return a===n?q:a.Hn};
qa.prototype.collapseTree=qa.prototype.Zu=function(a){a===f&&(a=n);var b=this.h;if(b===n)return q;b.gc("Collapse Tree");var c=new z(T);if(a instanceof T&&a.Ne)a.Zu(),c.add(a);else for(a=b.selection.l;a.next();){var d=a.value;d instanceof T&&d.Ne&&(d.Zu(),c.add(d))}b.ya("TreeCollapsed",c);b.me("Collapse Tree")};
qa.prototype.canCollapseTree=qa.prototype.DI=function(a){a===f&&(a=n);var b=this.h;if(b===n||b.cb)return q;if(a instanceof T){if(!a.Ne)return q;if(0<a.qv().count)return h}else for(a=b.selection.l;a.next();)if(b=a.value,b instanceof T&&b.Ne&&0<b.qv().count)return h;return q};
qa.prototype.expandTree=qa.prototype.mv=function(a){a===f&&(a=n);var b=this.h;if(b===n)return q;b.gc("Expand Tree");var c=new z(T);if(a instanceof T&&!a.Ne)a.mv(),c.add(a);else for(a=b.selection.l;a.next();){var d=a.value;d instanceof T&&!d.Ne&&(d.mv(),c.add(d))}b.ya("TreeExpanded",c);b.me("Expand Tree")};
qa.prototype.canExpandTree=qa.prototype.NI=function(a){a===f&&(a=n);var b=this.h;if(b===n||b.cb)return q;if(a instanceof T){if(a.Ne)return q;if(0<a.qv().count)return h}else for(a=b.selection.l;a.next();)if(b=a.value,b instanceof T&&!b.Ne&&0<b.qv().count)return h;return q};
qa.prototype.groupSelection=qa.prototype.IK=function(){var a=this.h;if(a!==n){var b=a.ba;if(b!==n&&b instanceof O){var c=this.Ay;if(c!==n)try{a.uc="wait";a.gc("Group");a.ya("ChangingSelection");for(var d=new z(R),e=a.selection.l;e.next();){var g=e.value;g.Yd()&&g.canGroup()&&d.add(g)}for(var i=new z(R),j=d.l;j.next();){for(var k=j.value,g=q,e=d.l;e.next();)if(k.bs(e.value)){g=h;break}g||i.add(k)}if(0<i.count){e=i.l;e.next();var l=e.value.bb;if(l!==n)for(;l!==n;){e=i.l;e.next();for(d=q;e.next();)if(k=
e.value,!k.bs(l)){d=h;break}if(d)l=l.bb;else break}var m=n;if(c instanceof vf)xf(c),m=c.copy(),m instanceof vf&&a.add(m);else if(b.iz(c)){var p=b.uj(c);w.mb(p)&&(b.xr(p),m=a.Mr(p))}if(m instanceof vf){l!==n&&this.isValidMember(l,m)&&(m.bb=l);for(e=i.l;e.next();)k=e.value,this.isValidMember(m,k)&&(k.bb=m);a.select(m)}}a.ya("ChangedSelection");a.ya("SelectionGrouped",m)}finally{a.me("Group"),a.uc=""}}}};
qa.prototype.canGroupSelection=qa.prototype.QI=function(){var a=this.h;if(a===n||a.cb||a.se||!a.Bn||!a.An)return q;var b=a.ba;if(b===n||!(b instanceof O)||this.Ay===n)return q;for(a=a.selection.l;a.next();)if(b=a.value,b.Yd()&&b.canGroup())return h;return q};qa.prototype.findUnnestedNodes=qa.prototype.vK=function(a){for(var b=[],a=a.l;a.next();){var c=a.value;c instanceof U||b.push(c)}for(var a=new ma(R),c=b.length,d=0;d<c;d++){for(var e=b[d],g=h,i=0;i<c;i++)if(e.bs(b[i])){g=q;break}g&&a.add(e)}return a};
qa.prototype.isValidMember=qa.prototype.RG=function(a,b){if(b===n||a===b||b instanceof U)return q;if(a!==n){if(a===b||a.bs(b))return q;var c=a.gs;if(c!==n&&!c(a,b)||a.data===n&&b.data!==n||a.data!==n&&b.data===n)return q}c=this.gs;return c!==n?c(a,b):h};
qa.prototype.ungroupSelection=qa.prototype.jM=function(a){a===f&&(a=n);var b=this.h;if(b!==n){var c=b.ba;if(c!==n&&c instanceof O)try{b.uc="wait";b.gc("Ungroup");b.ya("ChangingSelection");var d=new z(vf);if(a instanceof vf)d.add(a);else for(var e=b.selection.l;e.next();){var g=e.value;g instanceof vf&&g.canUngroup()&&d.add(g)}if(0<d.count){b.Iy();for(e=d.l;e.next();){var i=e.value,j=i.data,k=i.bb,l=k!==n&&k.data!==n?c.lb(k.data):f,m=new z(R);m.Tf(i.Fc);for(var p=m.l;p.next();){var r=p.value;if(!(r instanceof
U)){var s=r.data;s!==n?c.Pz(s,l):r.bb=k;r.Qa=h}}j!==n?c.WD(j):b.remove(i)}}b.ya("ChangedSelection");b.ya("SelectionUngrouped",d)}finally{b.me("Ungroup"),b.uc=""}}};qa.prototype.canUngroupSelection=qa.prototype.dJ=function(a){a===f&&(a=n);var b=this.h;if(b===n||b.cb||b.se||!b.Dk||!b.Gn)return q;var c=b.ba;if(c===n||!(c instanceof O))return q;if(a instanceof vf){if(a.canUngroup())return h}else for(a=b.selection.l;a.next();)if(b=a.value,b instanceof vf&&b.canUngroup())return h;return q};
qa.prototype.addTopLevelParts=qa.prototype.wI=function(a,b){for(var c=h,d=this.findUnnestedNodes(a).l;d.next();){var e=d.value;e.bb!==n&&(!b||this.isValidMember(n,e)?e.bb=n:c=q)}return c};qa.prototype.collapseSubGraph=qa.prototype.Yu=function(a){a===f&&(a=n);var b=this.h;if(b===n)return q;b.gc("Collapse SubGraph");var c=new z(vf);if(a instanceof vf&&a.Me)a.Yu(),c.add(a);else for(a=b.selection.l;a.next();){var d=a.value;d instanceof vf&&d.Me&&(d.Yu(),c.add(d))}b.ya("SubGraphCollapsed",c);b.me("Collapse SubGraph")};
qa.prototype.canCollapseSubGraph=qa.prototype.CI=function(a){a===f&&(a=n);var b=this.h;if(b===n||b.cb)return q;if(a instanceof vf)return!a.Me?q:h;for(a=b.selection.l;a.next();)if(b=a.value,b instanceof vf&&b.Me)return h;return q};
qa.prototype.expandSubGraph=qa.prototype.lv=function(a){a===f&&(a=n);var b=this.h;if(b===n)return q;b.gc("Expand SubGraph");var c=new z(vf);if(a instanceof vf&&!a.Me)a.lv(),c.add(a);else for(a=b.selection.l;a.next();){var d=a.value;d instanceof vf&&!d.Me&&(d.lv(),c.add(d))}b.ya("SubGraphExpanded",c);b.me("Expand SubGraph")};
qa.prototype.canExpandSubGraph=qa.prototype.MI=function(a){a===f&&(a=n);var b=this.h;if(b===n||b.cb)return q;if(a instanceof vf)return a.Me?q:h;for(a=b.selection.l;a.next();)if(b=a.value,b instanceof vf&&!b.Me)return h;return q};
qa.prototype.editTextBlock=qa.prototype.dK=function(a){a===f&&(a=n);var b=this.h;if(b!==n&&b.Qb!==n){var c=b.Qb.aw;if(c!==n){if(a===n){for(var a=b.selection.l,d=n;a.next();){var e=a.value;if(e.canEdit()){d=e;break}}if(d===n)return;a=d;d=function(a){return a instanceof na&&a.jv};a=d(a)?a:zf(a,d)}a!==n&&a instanceof na&&(c.mg=a,b.Ha=c)}}};
qa.prototype.canEditTextBlock=qa.prototype.LI=function(a){a===f&&(a=n);var b=this.h;if(b===n||(b.cb||b.se)||!b.Fn||b.Qb===n||b.Qb.aw===n)return q;if(a instanceof na){if(a=a.ca,a!==n&&a.canEdit())return h}else for(b=b.selection.l;b.next();)if(a=b.value,a.canEdit()){var c=function(a){return a instanceof na&&a.jv},a=c(a)?a:zf(a,c);if(a!==n)return h}return q};w.g(qa,"copiesTree",qa.prototype.mC);w.defineProperty(qa,{mC:"copiesTree"},t("vA"),ba("vA"));w.g(qa,"deletesTree",qa.prototype.CC);
w.defineProperty(qa,{CC:"deletesTree"},t("DA"),ba("DA"));w.g(qa,"archetypeGroupData",qa.prototype.Ay);w.defineProperty(qa,{Ay:"archetypeGroupData"},t("nA"),function(a){a!==n&&w.i(a,Object,qa,"archetypeGroupData");var b=this.h;b!==n&&(b=b.ba,b instanceof O&&!(a instanceof vf)&&!b.iz(a)&&w.m("CommandHandler.archetypeGroupData must be either a Group or a data object for which GraphLinksModel.isGroupForNodeData is true: "+a));this.nA=a});w.g(qa,"memberValidation",qa.prototype.gs);
w.defineProperty(qa,{gs:"memberValidation"},t("uk"),function(a){a!==n&&w.k(a,"function",qa,"memberValidation");this.uk=a});w.g(qa,"zoomFactor",qa.prototype.Js);w.defineProperty(qa,{Js:"zoomFactor"},t("LB"),function(a){w.k(a,"number",qa,"zoomFactor");1<a||w.m("zoomFactor must be larger than 1.0, not: "+a);this.LB=a});function Af(){w.ic(this);this.aa=n;this.Ab="";this.Vh=h;this.RA=q;this.JB=n;this.Ou=-1}w.P("Tool",Af);Af.prototype.ae=function(a){u&&a!==n&&w.i(a,A,Af,"setDiagram");this.aa=a};
Af.prototype.toString=function(){return""!==this.name?this.name+" Tool":w.Ok(Object.getPrototypeOf(this))};Af.prototype.updateAdornments=Af.prototype.Ji=aa();Af.prototype.canStart=Af.prototype.tf=t("isEnabled");Af.prototype.doStart=Af.prototype.Vy=aa();Af.prototype.doActivate=Af.prototype.yh=function(){this.W=h};Af.prototype.doDeactivate=Af.prototype.wi=function(){this.W=q};Af.prototype.doStop=Af.prototype.Mk=aa();Af.prototype.doCancel=Af.prototype.yj=function(){this.stopTool()};
Af.prototype.stopTool=Af.prototype.fM=function(){var a=this.h;a!==n&&a.Ha===this&&(a.Ha=n,a.uc="")};Af.prototype.doMouseDown=Af.prototype.Ir=function(){!this.W&&this.canStart()&&this.doActivate()};Af.prototype.doMouseMove=Af.prototype.Jg=aa();Af.prototype.doMouseUp=Af.prototype.pe=function(){this.stopTool()};Af.prototype.doMouseWheel=Af.prototype.mG=aa();Af.prototype.doKeyDown=Af.prototype.Ty=function(){var a=this.h;a!==n&&"Esc"===a.N.key&&this.doCancel()};Af.prototype.doKeyUp=Af.prototype.Uy=aa();
Af.prototype.startTransaction=Af.prototype.gc=function(a){this.We=n;var b=this.h;return b===n?q:b.gc(a)};Af.prototype.stopTransaction=Af.prototype.Jj=function(){var a=this.h;return a===n?q:this.We===n?a.ss():a.me(this.We)};
Af.prototype.standardMouseSelect=Af.prototype.TH=function(){var a=this.h;if(a!==n&&a.je){var b=a.N,c=a.Nr(b.M,q);if(c!==n)if(b.Kk){a.ya("ChangingSelection");for(b=c;b!==n&&!b.Hk();)b=b.bb;b.Qa=!b.Qa;a.ya("ChangedSelection")}else if(b.shift){if(!c.Qa){a.ya("ChangingSelection");for(b=c;b!==n&&!b.Hk();)b=b.bb;b.Qa=h;a.ya("ChangedSelection")}}else{if(!c.Qa){for(b=c;b!==n&&!b.Hk();)b=b.bb;a.select(b)}}else b.left&&(!b.Kk&&!b.shift)&&a.Iy()}};
Af.prototype.standardMouseClick=Af.prototype.aM=function(a,b){a===f&&(a=n);b===f&&(b=function(a){return!a.Ja.yc});var c=this.h;if(c!==n){var d=c.N,e=c.wd(d.M,a,b);d.zd=e;Bf(e,d,c)}};
function Bf(a,b,c){var d=0;b.left?d=1===b.Td?1:2===b.Td?2:1:b.right&&1===b.Td&&(d=3);var e="";if(a!==n){switch(d){case 1:e="ObjectSingleClicked";break;case 2:e="ObjectDoubleClicked";break;case 3:e="ObjectContextClicked"}0!==d&&c.ya(e,a)}else{switch(d){case 1:e="BackgroundSingleClicked";break;case 2:e="BackgroundDoubleClicked";break;case 3:e="BackgroundContextClicked"}0!==d&&c.ya(e)}if(a!==n)for(;a!==n;){e=n;switch(d){case 1:e=a.click;break;case 2:e=a.Sl?a.Sl:a.click;break;case 3:e=a.Fr}if(e!==n&&
(e(b,a),b.Xd))break;a=a.fa}else{e=n;switch(d){case 1:e=c.click;break;case 2:e=c.Sl?c.Sl:c.click;break;case 3:e=c.Fr}e!==n&&e(b)}}
Af.prototype.standardMouseOver=Af.prototype.bM=function(){var a=this.h;if(a!==n){var b=a.N,c=a.wd(b.M,n,n);b.zd=c;var d=a.ub;a.ub=h;var e=q;if(c!==a.xm){var g=a.xm;a.Ox=g;a.xm=c;for(this.doCurrentObjectChanged(g,c);g!==n;){var i=g.xz;if(i!==n){if(c===g)break;if(c!==n&&c.Di(g))break;i(b,g,c);e=h;if(b.Xd)break}g=g.fa}for(g=a.Ox;c!==n;){i=c.wz;if(i!==n){if(g===c)break;if(g!==n&&g.Di(c))break;i(b,c,g);e=h;if(b.Xd)break}c=c.fa}c=a.xm}if(c!==n){g=c;for(i="";g!==n;){i=g.cursor;if(""!==i)break;g=g.fa}a.uc=
i;for(g=c;g!==n;){i=g.ks;if(i!==n&&(i(b,g),e=h,b.Xd))break;g=g.fa}}else a.uc="",i=a.ks,i!==n&&(i(b),e=h);e&&a.Ng();a.ub=d}};Af.prototype.doCurrentObjectChanged=Af.prototype.lG=aa();
Af.prototype.standardMouseWheel=Af.prototype.cM=function(){var a=this.h;if(a!==n){var b=a.N,c=b.xj;if(0!==c){var d=a.Qb.dm;if(a.Hn&&(d===Cf&&!b.shift||d===Df&&b.Kk)){d=a.cl;a.cl=b.jd;var e=a.Uf;e!==n?0<c?e.increaseZoom():e.decreaseZoom():a.scale=0<c?1.05*a.scale:a.scale/1.05;a.cl=d;b.bubbles=q}else if(d===Cf&&b.shift||d===Df&&!b.Kk)d=a.position.copy(),!b.shift&&a.sf?0<c?a.scroll("line","up",3):a.scroll("line","down",3):b.shift&&a.rf&&(0<c?a.scroll("line","left",3):a.scroll("line","right",3)),a.position.I(d)||
(b.bubbles=q)}}};Af.prototype.standardWaitAfter=Af.prototype.dM=function(a){w.k(a,"number",Af,"standardWaitAfter:delay");this.cancelWaitAfter();var b=this;this.Ou=window.setTimeout(function(){b.doWaitAfter()},a)};Af.prototype.cancelWaitAfter=Af.prototype.fJ=function(){-1!==this.Ou&&window.clearTimeout(this.Ou);this.Ou=-1};Af.prototype.doWaitAfter=Af.prototype.nG=aa();
Af.prototype.findToolHandleAt=Af.prototype.rK=function(a,b){var c=this.h;if(c===n)return n;c=c.wd(a,n,function(a){a=a.ca;return a===n?q:a.Bc!==n});if(c===n)return n;var d=c.ca;return d===n||d.ud!==b?n:c};Af.prototype.isBeyondDragSize=Af.prototype.XK=function(a,b){var c=this.h;if(c===n)return q;a===f&&(a=c.wc.jd);b===f&&(b=c.N.jd);c=2;w.Zx&&(c+=4);return Math.abs(b.x-a.x)>c||Math.abs(b.y-a.y)>c};w.u(Af,{h:"diagram"},t("aa"));w.g(Af,"name",Af.prototype.name);
w.defineProperty(Af,{name:"name"},t("Ab"),ba("Ab"));w.g(Af,"isEnabled",Af.prototype.isEnabled);w.defineProperty(Af,{isEnabled:"isEnabled"},t("Vh"),ba("Vh"));w.g(Af,"isActive",Af.prototype.W);w.defineProperty(Af,{W:"isActive"},t("RA"),ba("RA"));w.g(Af,"transactionResult",Af.prototype.We);w.defineProperty(Af,{We:"transactionResult"},t("JB"),ba("JB"));
function Ef(){Af.call(this);this.name="Dragging";this.uA=h;this.ql=this.KA=q;this.px=h;this.hx=(new cb(NaN,NaN)).freeze();this.ix=Jb;this.jx=(new F(NaN,NaN)).freeze();this.HA=q;this.IA=this.tA=this.JA=this.xA=n;this.kp=this.GA=q;this.kn=new F(NaN,NaN);this.mi=new F;this.Cu=q;this.yu=h;this.Bm=100;this.ll=this.ou=n}w.P("DraggingTool",Ef);w.Da(Ef,Af);w.g(Ef,"copiesEffectiveCollection",Ef.prototype.lC);w.defineProperty(Ef,{lC:"copiesEffectiveCollection"},t("uA"),ba("uA"));w.g(Ef,"dragsTree",Ef.prototype.EC);
w.defineProperty(Ef,{EC:"dragsTree"},t("KA"),ba("KA"));w.g(Ef,"isGridSnapEnabled",Ef.prototype.Zn);w.defineProperty(Ef,{Zn:"isGridSnapEnabled"},t("ql"),function(a){this.ql!==a&&(w.k(a,"boolean",Ef,"isGridSnapEnabled"),this.ql=a)});w.g(Ef,"isGridSnapRealtime",Ef.prototype.jD);w.defineProperty(Ef,{jD:"isGridSnapRealtime"},t("px"),function(a){this.px!==a&&(w.k(a,"boolean",Ef,"isGridSnapRealtime"),this.px=a)});w.g(Ef,"gridSnapCellSize",Ef.prototype.dz);
w.defineProperty(Ef,{dz:"gridSnapCellSize"},t("hx"),function(a){this.hx.I(a)||(w.i(a,cb,Ef,"gridSnapCellSize"),this.hx=a=a.O())});w.g(Ef,"gridSnapCellSpot",Ef.prototype.TC);w.defineProperty(Ef,{TC:"gridSnapCellSpot"},t("ix"),function(a){this.ix.I(a)||(w.i(a,H,Ef,"gridSnapCellSpot"),this.ix=a=a.O())});w.g(Ef,"gridSnapOrigin",Ef.prototype.UC);w.defineProperty(Ef,{UC:"gridSnapOrigin"},t("jx"),function(a){this.jx.I(a)||(w.i(a,F,Ef,"gridSnapOrigin"),this.jx=a=a.O())});w.g(Ef,"draggableLinks",Ef.prototype.Tl);
w.defineProperty(Ef,{Tl:"draggableLinks"},t("HA"),ba("HA"));w.g(Ef,"currentPart",Ef.prototype.Nn);w.defineProperty(Ef,{Nn:"currentPart"},t("xA"),ba("xA"));w.g(Ef,"copiedParts",Ef.prototype.Lc);w.defineProperty(Ef,{Lc:"copiedParts"},t("tA"),ba("tA"));w.g(Ef,"draggedParts",Ef.prototype.dc);w.defineProperty(Ef,{dc:"draggedParts"},t("JA"),ba("JA"));w.g(Ef,"draggedLink",Ef.prototype.cc);w.defineProperty(Ef,{cc:"draggedLink"},t("IA"),ba("IA"));w.g(Ef,"dragOutStarted",Ef.prototype.Xy);
w.defineProperty(Ef,{Xy:"dragOutStarted"},t("GA"),ba("GA"));w.g(Ef,"delay",Ef.prototype.hv);w.defineProperty(Ef,{hv:"delay"},t("Bm"),ba("Bm"));Ef.prototype.canStart=Ef.prototype.tf=function(){if(!this.isEnabled)return q;var a=this.h;if(a===n||!a.Ek&&!a.pj&&!a.Tu||!a.je)return q;var b=a.N;return!b.left||a.Ha!==this&&(!this.isBeyondDragSize()||window.TouchEvent&&(b.Ui!==n&&b.Ui instanceof window.TouchEvent)&&b.timestamp-a.wc.timestamp<this.Bm)?q:this.findDraggablePart()!==n};
Ef.prototype.findDraggablePart=Ef.prototype.jK=function(){var a=this.h;if(a===n)return n;a=a.Nr(a.wc.M,q);if(a===n)return n;for(;a!==n&&!a.Hk();)a=a.bb;return a!==n&&(a.canMove()||a.canCopy())?a:n};Ef.prototype.standardMouseSelect=Ef.prototype.TH=function(){var a=this.h;if(a!==n&&a.je){var b=a.Nr(a.wc.M,q);if(b!==n){for(;b!==n&&!b.Hk();)b=b.bb;this.Nn=b;this.Nn.Qa||(a.ya("ChangingSelection"),b=a.N,!b.Kk&&!b.shift&&yf(a),this.Nn.Qa=h,a.ya("ChangedSelection"))}}};
Ef.prototype.doActivate=Ef.prototype.yh=function(){var a=this.h;if(a!==n){this.standardMouseSelect();var b=this.Nn;b===n||!b.canMove()&&!b.canCopy()||(this.W=h,this.kn.set(a.position),Ff(this,a.selection),this.ll=this.ou=n,this.dc=this.computeEffectiveCollection(a.selection),Gf(this,this.dc),this.gc("Drag"),this.mi.set(a.wc.M),a.Tu?(this.Xy=h,this.kp=q,Hf=this,this.h.Ec=h):a.Ec=h)}};
function Ff(a,b){if(a.Tl){var c=a.h;c!==n&&c.qj&&(1===b.count?(c=b.l,c.next(),a.cc=c.value,a.cc!==n&&(a.cc.canRelinkFrom()&&a.cc.canRelinkTo())&&a.cc.vh()):a.cc=n)}}
Ef.prototype.computeEffectiveCollection=Ef.prototype.kJ=function(a){var b=this.h!==n&&this.h.Ha===this,c=new la(R,Object);if(a===n)return c;for(var d=a.l;d.next();){var e=d.value;If(this,c,e,b)}if(this.cc!==n&&this.Tl)return c;for(d=a.l;d.next();)e=d.value,e instanceof U&&(a=e,b=a.ia,b!==n&&!c.contains(b)?c.remove(a):(b=a.na,b!==n&&!c.contains(b)&&c.remove(a)));return c};function Jf(a){return a===f?{point:new F}:{point:a}}
function If(a,b,c,d){if(!b.contains(c)&&(!d||c.canMove()||c.canCopy()))if(c instanceof T){b.add(c,Jf(c.location));if(c instanceof vf)for(var e=c.Fc;e.next();){var g=e.value;If(a,b,g,d)}for(g=c.te;g.next();)if(e=g.value,!b.contains(e)){var i=e.ia,j=e.na;i!==n&&(b.contains(i)&&j!==n&&b.contains(j))&&If(a,b,e,d)}if(a.EC){g=h;e=c.h;e!==n&&(g=e.hd);for(c=g?c.HC():c.GC();c.next();)g=c.value,If(a,b,g,d)}}else if(c instanceof U){e=c;b.add(e,Jf());for(g=e.Ej;g.next();)If(a,b,g.value,d)}else c instanceof mf||
b.add(c,Jf(c.location))}Ef.prototype.doDeactivate=Ef.prototype.wi=function(){this.W=q;var a=this.h;a!==n&&Kf(a);Lf(this);Mf(this,this.dc);this.dc=n;this.kp=this.Xy=q;if(0<Nf.count){for(var b=Nf.length,c=0;c<b;c++){var d=Nf.n[c];d.cc!==n&&(d.cc=n);Of(d);Lf(d);d.h!==n&&Kf(d.h)}Nf.clear()}this.cc!==n&&(this.cc=n);this.kn.zo(NaN,NaN);Hf=Pf=n;Of(this);a.Ec=q;this.Jj()};
function Lf(a){var b=a.h;if(b!==n){var c=b.ub;b.ub=h;for(var d=b.N,e=a.ll;e!==n;){var g=e.vz;if(g!==n&&(g(d,e,n),d.Xd))break;e=e.fa}b.ub=c}a.ou=n;a.ll=n}Ef.prototype.doCancel=Ef.prototype.yj=function(){Of(this);Qf(this);var a=this.h;a!==n&&this.kn.T()&&(a.position=this.kn);this.stopTool()};function Gf(a,b){if(b!==n){a.Cu=h;for(var c=b.l;c.next();){var d=c.key;d instanceof U&&(d.on=h)}}}
function Mf(a,b){if(b!==n&&a.Cu){for(var c=b.l;c.next();){var d=c.key;d instanceof U&&(d.on=q,d.Ch===Rf?d.Sb():d.R())}a.Cu=q}}Ef.prototype.doKeyDown=Ef.prototype.Ty=function(){var a=this.h;a!==n&&(a=a.N,a!==n&&this.W&&("Esc"===a.key?this.doCancel():this.doMouseMove()))};Ef.prototype.doKeyUp=Ef.prototype.Uy=function(){var a=this.h;a!==n&&(a.N!==n&&this.W)&&this.doMouseMove()};
function bg(a){for(var b=Infinity,c=Infinity,d=-Infinity,e=-Infinity,a=a.l;a.next();){var g=a.value;if(g.Yd()){var i=g.location,g=i.x,i=i.y;!isNaN(g)&&!isNaN(i)&&(g<b&&(b=g),i<c&&(c=i),g>d&&(d=g),i>e&&(e=i))}}return Infinity===b?new G(0,0,0,0):new G(b,c,d-b,e-c)}
function cg(a,b){if(a.Lc===n){var c=a.h;if(!(c===n||c.cb||c.se)&&a.dc!==n){c.ub=!b;c.zr=!b;Qf(a);a.mi.set(c.wc.M);for(var c=a.lC?c.Ln(a.dc.Kj(),c,h):c.Ln(c.selection,c,h),d=c.l;d.next();)d.value.location=d.key.location.copy();d=bg(c);new F(d.x+d.width/2,d.y+d.height/2);for(var d=new la(R,Object),e=a.dc.l;e.next();){var g=e.key;g.Yd()&&g.canCopy()&&(g=c.qa(g),g!==n&&(g.xi(),d.add(g,Jf(g.location))))}for(c=c.l;c.next();)e=c.value,e instanceof U&&e.canCopy()&&d.add(e,Jf());a.Lc=d;Ff(a,d.Kj());a.cc!==
n&&(c=a.cc,d=c.Sh(),c.Tk(a.mi.x-(d.x+d.width/2),a.mi.y-(d.y+d.height/2)))}}}function Of(a){var b=a.h;b!==n&&(a.Lc!==n&&(b.Iz(a.Lc.Kj(),q),a.Lc=n),b.ub=q,b.zr=q,a.mi.set(b.wc.M))}function dg(a,b){var c=a.h;if(c!==n){var d=a.mi;a.moveParts(b,c.N.M.copy().Bs(d),h)}}
Ef.prototype.moveParts=Ef.prototype.hH=function(a,b,c){if(!(a===n||0===a.count)){var d=b.copy();isNaN(d.x)&&(d.x=0);isNaN(d.y)&&(d.y=0);var e=this.Cu;e||Gf(this,a);for(var g=new z,i=new z(Ma),j=a.l;j.next();){var k=j.key;if(k.Yd()){var l=eg(this,k,a);if(l!==n)g.add({Qg:k,info:j.value,CG:l});else if(!c||k.canMove()){var l=j.value.point,m=this.computeMove(k,l.copy().add(d),a);k.location=m;j.value.fF=m.copy().Bs(l)}}else j.key instanceof U&&i.add(j.Cd)}for(c=g.l;c.next();)g=c.value,l=g.info.point,m=
l.copy().add(g.CG.fF),g.Qg.location=m;for(i=i.l;i.next();)if(j=i.value,l=j.key,l instanceof U)if(l.on)if(c=l.ia,g=l.na,this.cc!==n&&this.Tl)j=j.value.point,a.add(l,Jf(d)),m=b.x-j.x,c=b.y-j.y,l.Tk(m,c);else{m=new F(0,0);if(c!==n){m.set(c.location);var p=a.qa(c);p!==n&&m.Bs(p.point)}k=new F(0,0);g!==n&&(k.set(g.location),p=a.qa(g),p!==n&&k.Bs(p.point));c!==n&&g!==n?m.yi(k)?(j=j.value.point,c=m.copy(),c.Bs(j),a.add(l,Jf(m)),l.Tk(c.x,c.y)):(l.on=q,l.Sb()):(j=j.value.point,a.add(l,Jf(c!==n?m:g!==n?k:b)),
m=d.x-j.x,c=d.y-j.y,l.Tk(m,c))}else if(l.ia===n||l.na===n)j=j.value.point,a.add(l,Jf(b)),m=d.x-j.x,c=d.y-j.y,l.Tk(m,c);e||Mf(this,a)}};function eg(a,b,c){b=b.bb;if(b!==n){a=eg(a,b,c);if(a!==n)return a;a=c.qa(b);if(a!==n)return a}return n}
function Qf(a){if(a.dc!==n){var b=a.h,c=q;b!==n&&(c=b.ub,b.ub=h);for(var d=a.dc.l;d.next();){var e=d.key;e.Yd()&&(e.location=d.value.point)}for(d=a.dc.l;d.next();)if(e=d.key,e instanceof U&&e.on){var g=d.value.point;a.dc.add(e,Jf());e.Tk(-g.x,-g.y)}b!==n&&(b.ub=c,b.Bi())}}
Ef.prototype.computeMove=Ef.prototype.nJ=function(a,b,c){if(a===n)return b;c===f&&(c=n);var d=b,d=b;if(this.Zn&&(this.jD||c===n||this.h.N.Ii))if(d=b.copy(),a!==n&&(c=this.h,c!==n)){var e=c.vv,g=this.dz,c=g.width,g=g.height,i=this.UC,j=i.x,i=i.y,k=this.TC;if(e!==n){var l=e.Vr;isNaN(c)&&(c=l.width);isNaN(g)&&(g=l.height);e=e.cz;isNaN(j)&&(j=e.x);isNaN(i)&&(i=e.y)}e=(new F).hm(0,0,c,g,k);d=bd(d.x,d.y,j+e.x,i+e.y,c,g)}d=a.Wy!==n?a.Wy(a,b,d):d;c=a.CD;b=c.x;isNaN(b)&&(b=a.location.x);c=c.y;isNaN(c)&&(c=
a.location.y);j=a.wD;g=j.x;isNaN(g)&&(g=a.location.x);j=j.y;isNaN(j)&&(j=a.location.y);return new F(Math.max(b,Math.min(d.x,g)),Math.max(c,Math.min(d.y,j)))};function fg(a,b){if(b===n)return h;var c=b.ca;return c===n||c.Qa||c instanceof mf||c.Ja.yc||a.dc&&a.dc.contains(c)||a.Lc&&a.Lc.contains(c)?h:q}
function gg(a,b,c,d){var e=a.h;if(e!==n){if(a.Tl&&a.cc!==n){var g=a.h.ba;g instanceof O&&(a.cc.ia!==n&&g.xs(a.cc.data,""),a.cc.na!==n&&g.ys(a.cc.data,""))}g=q;a.yu===q&&(g=e.ub,e.ub=h);var i=q,j=hg(e,b,n,function(b){return!fg(a,b)}),k=e.N;k.zd=j;var l=e.ub;e.ub=h;if(j!==a.ll){var m=a.ll;a.ou=m;for(a.ll=j;m!==n;){var p=m.vz;if(p!==n){if(j===m)break;if(j!==n&&j.Di(m))break;p(k,m,j);i=h;if(k.Xd)break}m=m.fa}for(m=a.ou;j!==n;){p=j.DD;if(p!==n){if(m===j)break;if(m!==n&&m.Di(j))break;p(k,j,m);i=h;if(k.Xd)break}j=
j.fa}j=a.ll}j===n&&(p=e.ED,p!==n&&(p(k),i=h));a.doDragOver(b,j);e.ub=l;i&&e.Ng();a.yu===q&&(e.ub=g);if((e.rf||e.sf)&&(c||d))e.Iw=e.Gs(b),ig(e,e.Iw).yi(e.position)?Kf(e):jg(e)}}Ef.prototype.doDragOver=Ef.prototype.JJ=aa();
function kg(a,b){var c=a.h;if(c!==n&&c.ba!==n){Lf(a);var d=hg(c,b,n,function(b){return!fg(a,b)}),e=c.N;e.zd=d;if(d!==n)for(var g=d;g!==n;){var i=g.hs;if(i!==n&&(i(e,g),e.Xd))break;g=g.fa}else i=c.hs,i!==n&&i(e);a.doDropOnto(b,d);for(d=c.selection.l;d.next();)e=d.value,e instanceof T&&lg(c,e.va)}}Ef.prototype.doDropOnto=Ef.prototype.KJ=aa();
Ef.prototype.doMouseMove=Ef.prototype.Jg=function(){if(this.W){var a=this.h;if(a!==n&&this.Nn!==n&&this.dc!==n){var b=q,c=q;this.mayCopy()?(b=h,cg(this,q),dg(this,this.Lc)):this.mayMove()?(c=h,Of(this),dg(this,this.dc)):Of(this);gg(this,a.N.M,c,b);a.yb()}}};
Ef.prototype.doMouseUp=Ef.prototype.pe=function(){if(this.W){this.kp=h;var a=this.h;if(a!==n){var b=q,c=this.mayCopy();c&&this.Lc!==n?(Qf(this),Of(this),cg(this,h),dg(this,this.Lc),this.Lc!==n&&a.Nz(this.Lc.Kj())):(b=h,Of(this),this.mayMove()&&(dg(this,this.dc),this.yu=q,gg(this,a.N.M,h,q),this.yu=h));kg(this,a.N.M);if(this.W){this.Lc=n;if(b&&this.dc!==n)for(b=this.dc.l;b.next();){var d=b.key;d instanceof T&&(d=d.bb,d!==n&&d.placeholder!==n&&!this.dc.contains(d)&&d.Oy&&d.R())}a.Bi();Mf(this,this.dc);
this.We=c?"Copy":"Move";a.ya(c?"SelectionCopied":"SelectionMoved",a.selection)}this.stopTool()}}};Ef.prototype.mayCopy=Ef.prototype.qL=function(){var a=this.h;if(a===n||(a.cb||a.se||!a.Bn||!a.pj)||!a.N.Kk)return q;for(a=a.selection.l;a.next();){var b=a.value;if(b.Yd()&&b.canCopy())return h}return this.cc!==n&&this.Tl&&this.cc.canCopy()?h:q};
Ef.prototype.mayMove=Ef.prototype.sL=function(){var a=this.h;if(a===n||a.cb||!a.Ek)return q;for(a=a.selection.l;a.next();){var b=a.value;if(b.Yd()&&b.canMove())return h}return this.cc!==n&&this.Tl&&this.cc.canMove()?h:q};var Nf=new z(Ef),Hf=n,Pf=n;Ef.prototype.mayCopyExternal=Ef.prototype.rL=function(){var a=this.h;return a===n||(!a.VB||a.cb||a.se||!a.Bn)||a.ba===n?q:h};Ef.prototype.doSimulatedDragEnter=Ef.prototype.MJ=function(){this.mayCopyExternal()&&(Nf.contains(this)||Nf.add(this))};
Ef.prototype.doSimulatedDragLeave=Ef.prototype.NJ=function(){Of(this);var a=this.h;a!==n&&(a.Ha!==this&&this.kn.T())&&(a.position=this.kn)};Ef.prototype.doSimulatedDragOver=Ef.prototype.OJ=function(){if(this.mayCopyExternal()){var a=this.h;if(a!==n){var b=Hf;b!==n&&b.dc!==n&&(mg(this,b.dc.Kj(),q),dg(this,this.Lc),a.Nz(this.Lc.Kj()),gg(this,a.N.M,q,h),a.yb())}}};
Ef.prototype.doSimulatedDrop=Ef.prototype.PJ=function(){var a=Hf;if(a!==n&&(a.kp=h,Of(this),this.mayCopyExternal())){var b=this.h;b!==n&&(this.gc("Drop"),mg(this,a.dc.Kj(),h),dg(this,this.Lc),this.Lc!==n&&b.Nz(this.Lc.Kj()),this.We="ExternalCopy",kg(this,b.N.M),this.Lc=n,b.ya("ExternalObjectsDropped",b.selection),this.Jj(),b.Bi())}};
function mg(a,b,c){if(a.Lc===n){var d=a.h;if(!(d===n||d.cb||d.se)&&d.ba!==n){d.ub=!c;d.zr=!c;a.mi.set(d.N.M);for(var d=d.Ln(b,d,h),c=bg(b),e=new F(c.x+c.width/2,c.y+c.height/2),g=a.mi,c=new la(R,Object),b=b.l;b.next();){var i=b.value;if(i.Yd()&&i.canCopy()){var j=i.location,i=d.qa(i);i.location=new F(g.x-(e.x-j.x),g.y-(e.y-j.y));i.xi();c.add(i,Jf(i.location))}}for(d=d.l;d.next();)e=d.value,e instanceof U&&e.canCopy()&&c.add(e,Jf());a.Lc=c;Ff(a,c.Kj());a.cc!==n&&(c=a.cc,d=c.Sh(),c.Tk(a.mi.x-(d.x+d.width/
2),a.mi.y-(d.y+d.height/2)))}}}
function rg(){Af.call(this);this.Mx=100;this.py=q;var a=new U;a.ws="PATH";var b=new V;b.Fi=h;b.name="PATH";b.stroke="blue";a.add(b);b=new V;b.mm="Standard";b.fill="blue";a.add(b);a.Ld="Tool";this.iy=a;a=new T;b=new V;b.Re="";b.gb="Rectangle";b.fill=n;b.stroke="magenta";b.eb=2;b.wa=new cb(1,1);a.add(b);a.Gj=q;a.Ld="Tool";this.gy=a;this.hy=b;a=new T;b=new V;b.Re="";b.gb="Rectangle";b.fill=n;b.stroke="magenta";b.eb=2;b.wa=new cb(1,1);a.add(b);a.Gj=q;a.Ld="Tool";this.jy=a;this.ky=b;this.Lx=this.Kx=this.Fx=
this.Ex=this.Gx=n;this.Fp=h;this.lF=new la(P,"boolean");this.pB=this.ZA=this.by=n}w.P("LinkingBaseTool",rg);w.Da(rg,Af);rg.prototype.doStop=rg.prototype.Mk=function(){this.fg=this.eg=this.dg=this.cg=this.Pb=n;this.cw.clear();this.Te=n};w.g(rg,"portGravity",rg.prototype.OD);w.defineProperty(rg,{OD:"portGravity"},t("Mx"),function(a){this.Mx!==a&&(u&&w.k(a,"number",rg,"portGravity"),this.Mx=a)});w.g(rg,"validUnconnectedLinks",rg.prototype.Do);
w.defineProperty(rg,{Do:"validUnconnectedLinks"},t("py"),function(a){this.py!==a&&(u&&w.k(a,"boolean",rg,"validUnconnectedLinks"),this.py=a)});w.g(rg,"temporaryLink",rg.prototype.lg);w.defineProperty(rg,{lg:"temporaryLink"},t("iy"),function(a){this.iy!==a&&(u&&w.i(a,U,rg,"temporaryLink"),this.iy=a)});w.g(rg,"temporaryFromNode",rg.prototype.Ue);w.defineProperty(rg,{Ue:"temporaryFromNode"},t("gy"),function(a){this.gy!==a&&(u&&w.i(a,T,rg,"temporaryFromNode"),this.gy=a)});w.g(rg,"temporaryFromPort",rg.prototype.km);
w.defineProperty(rg,{km:"temporaryFromPort"},t("hy"),function(a){this.hy!==a&&(u&&w.i(a,P,rg,"temporaryFromPort"),this.hy=a)});w.g(rg,"temporaryToNode",rg.prototype.Ve);w.defineProperty(rg,{Ve:"temporaryToNode"},t("jy"),function(a){this.jy!==a&&(u&&w.i(a,T,rg,"temporaryToNode"),this.jy=a)});w.g(rg,"temporaryToPort",rg.prototype.lm);w.defineProperty(rg,{lm:"temporaryToPort"},t("ky"),function(a){this.ky!==a&&(u&&w.i(a,P,rg,"temporaryToPort"),this.ky=a)});w.g(rg,"originalLink",rg.prototype.Pb);
w.defineProperty(rg,{Pb:"originalLink"},t("Gx"),function(a){this.Gx!==a&&(u&&a!==n&&w.i(a,U,rg,"originalLink"),this.Gx=a)});w.g(rg,"originalFromNode",rg.prototype.cg);w.defineProperty(rg,{cg:"originalFromNode"},t("Ex"),function(a){this.Ex!==a&&(u&&a!==n&&w.i(a,T,rg,"originalFromNode"),this.Ex=a)});w.g(rg,"originalFromPort",rg.prototype.dg);w.defineProperty(rg,{dg:"originalFromPort"},t("Fx"),function(a){this.Fx!==a&&(u&&a!==n&&w.i(a,P,rg,"originalFromPort"),this.Fx=a)});w.g(rg,"originalToNode",rg.prototype.eg);
w.defineProperty(rg,{eg:"originalToNode"},t("Kx"),function(a){this.Kx!==a&&(u&&a!==n&&w.i(a,T,rg,"originalToNode"),this.Kx=a)});w.g(rg,"originalToPort",rg.prototype.fg);w.defineProperty(rg,{fg:"originalToPort"},t("Lx"),function(a){this.Lx!==a&&(u&&a!==n&&w.i(a,P,rg,"originalToPort"),this.Lx=a)});w.defineProperty(rg,{re:"isForwards"},t("Fp"),ba("Fp"));w.u(rg,{cw:"validPortsCache"},t("lF"));w.g(rg,"targetPort",rg.prototype.Te);
w.defineProperty(rg,{Te:"targetPort"},t("by"),function(a){this.by!==a&&(u&&a!==n&&w.i(a,P,rg,"targetPort"),this.by=a)});rg.prototype.copyPortProperties=rg.prototype.vJ=function(a,b,c,d,e){a===n||(b===n||c===n||d===n)||(d.wa=b.va.size,e?(d.ob=b.ob,d.$k=b.$k):(d.kb=b.kb,d.Nk=b.Nk),c.Yf=Mb,c.location=b.Ob(Mb),d.angle=b.Un(),this.qs!==n&&this.qs(a,b,c,d,e))};
rg.prototype.setNoTargetPortProperties=rg.prototype.UL=function(a,b,c){b!==n&&(b.wa=new cb(1,1),b.kb=Eb,b.ob=Eb);a!==n&&(a.location=this.h.N.M);this.qs!==n&&this.qs(n,n,a,b,c)};rg.prototype.doMouseDown=rg.prototype.Ir=function(){this.W&&this.doMouseMove()};
rg.prototype.doMouseMove=rg.prototype.Jg=function(){if(this.W){var a=this.h;if(a!==n){this.Te=this.findTargetPort(this.re);if(this.Te!==n){var b=this.Te.ca;if(b instanceof T){this.re?this.copyPortProperties(b,this.Te,this.Ve,this.lm,h):this.copyPortProperties(b,this.Te,this.Ue,this.km,q);a.yb();return}}this.re?this.setNoTargetPortProperties(this.Ve,this.lm,h):this.setNoTargetPortProperties(this.Ue,this.km,q);a.yb()}}};
rg.prototype.findValidLinkablePort=rg.prototype.wK=function(a,b){if(a===n)return n;var c=a.ca;if(!(c instanceof T))return n;for(;a!==n;){var d=b?a.Xz:a.$y;if(d===h&&(a.Re!==n||a instanceof T)&&(b?this.isValidTo(c,a):this.isValidFrom(c,a)))return a;if(d===q)break;a=a.fa}return n};
rg.prototype.findTargetPort=rg.prototype.nK=function(a){for(var b=this.h,c=b.N.M,d=this.OD,e=this,g=b.Tn(c,d,function(b){return e.findValidLinkablePort(b,a)},n),b=d*d,d=n,g=g.l;g.next();){var i=g.value,j=i.ca;if(j instanceof T){var k=i.Ob(Mb),l=c.x-k.x,k=c.y-k.y,l=l*l+k*k;l<b&&(k=this.cw.qa(i),k!==n?k&&(d=i,b=l):a&&this.isValidLink(this.cg,this.dg,j,i)||!a&&this.isValidLink(j,i,this.eg,this.fg)?(this.cw.add(i,h),d=i,b=l):this.cw.add(i,q))}}return d!==n&&(c=d.ca,c instanceof T&&(c.Ja===n||c.Ja.Jl))?
d:n};rg.prototype.isValidFrom=rg.prototype.dL=function(a,b){if(a===n||b===n)return this.Do;if(this.h.Ha===this&&(a.Ja!==n&&!a.Ja.Jl||b.$y!==h))return q;var c=b.MC;if(Infinity>c){if(this.Pb!==n&&a===this.cg&&b===this.dg)return h;var d=b.Re;d===n&&(d="");if(a.Lr(d).count>=c)return q}return h};
rg.prototype.isValidTo=rg.prototype.gL=function(a,b){if(a===n||b===n)return this.Do;if(this.h.Ha===this&&(a.Ja!==n&&!a.Ja.Jl||b.Xz!==h))return q;var c=b.BE;if(Infinity>c){if(this.Pb!==n&&a===this.eg&&b===this.fg)return h;var d=b.Re;d===n&&(d="");if(a.yf(d).count>=c)return q}return h};rg.prototype.isInSameNode=rg.prototype.ZK=function(a,b){if(a===n||b===n)return q;if(a===b)return h;var c=a.ca,d=b.ca;return c!==n&&c===d};
rg.prototype.isLinked=rg.prototype.bL=function(a,b){if(a===n||b===n)return q;var c=a.ca;if(!(c instanceof T))return q;var d=a.Re;d===n&&(d="");var e=b.ca;if(!(e instanceof T))return q;var g=b.Re;g===n&&(g="");for(e=e.yf(g);e.next();)if(g=e.value,g.ia===c&&g.zi===d)return h;return q};
rg.prototype.isValidLink=rg.prototype.eL=function(a,b,c,d){return!this.isValidFrom(a,b)||!this.isValidTo(c,d)||b!==n&&d!==n&&((!b.LC||!d.AE)&&this.isInSameNode(b,d)||(!b.KC||!d.zE)&&this.isLinked(b,d))||this.Pb!==n&&(a!==n&&sg(this,a,this.Pb)||c!==n&&sg(this,c,this.Pb))||a!==n&&c!==n&&(a.data===n&&c.data!==n||a.data!==n&&c.data===n)||!tg(this,a,c,this.Pb)?q:this.qz!==n?this.qz(a,b,c,d,this.Pb):h};
function sg(a,b,c){if(b===n)return q;var d=b.xd;if(d===n)return q;if(d===c)return h;var e=new ma(T);e.add(b);return ug(a,d,c,e)}function ug(a,b,c,d){if(b===c)return h;var e=b.ia;if(e!==n&&e.Ei&&(d.add(e),ug(a,e.xd,c,d)))return h;b=b.na;return b!==n&&b.Ei&&(d.add(b),ug(a,b.xd,c,d))?h:q}
function tg(a,b,c,d){if(b===n||c===n)return q;var e=a.h.NE;if(e!==vg){if(e===wg){for(e=c.te;e.next();){var g=e.value;if(g!==d&&g.na===c)return q}return!xg(a,b,c,d)}if(e===yg){for(e=b.te;e.next();)if(g=e.value,g!==d&&g.ia===b)return q;return!xg(a,b,c,d)}if(e===zg)return b===c?a=h:(e=new ma(T),e.add(c),a=Ag(a,e,b,c,d)),!a;if(e===Bg)return!xg(a,b,c,d);if(e===Cg)return b===c?a=h:(e=new ma(T),e.add(c),a=Dg(a,e,b,c,d)),!a}return h}
function xg(a,b,c,d){if(b===c)return h;if(b===n||c===n)return q;for(var e=b.te;e.next();){var g=e.value;if(g!==d&&g.na===b&&(g=g.ia,g!==b&&xg(a,g,c,d)))return h}return q}function Ag(a,b,c,d,e){if(c===d)return h;if(c===n||d===n||b.contains(c))return q;b.add(c);for(var g=c.te;g.next();){var i=g.value;if(i!==e&&i.na===c&&(i=i.ia,i!==c&&Ag(a,b,i,d,e)))return h}return q}
function Dg(a,b,c,d,e){if(c===d)return h;if(c===n||d===n||b.contains(c))return q;b.add(c);for(var g=c.te;g.next();){var i=g.value;if(i!==e){var j=i.ia,i=i.na,j=j===c?i:j;if(j!==c&&Dg(a,b,j,d,e))return h}}return q}w.g(rg,"linkValidation",rg.prototype.qz);w.defineProperty(rg,{qz:"linkValidation"},t("ZA"),function(a){a!==n&&w.k(a,"function",rg,"linkValidation");this.ZA=a});w.g(rg,"portTargeted",rg.prototype.qs);
w.defineProperty(rg,{qs:"portTargeted"},t("pB"),function(a){a!==n&&w.k(a,"function",rg,"portTargeted");this.pB=a});function ra(){rg.call(this);this.name="Linking";this.Hw={};this.Gw=n;this.da=Eg;this.Xx=this.Wx=n}w.P("LinkingTool",ra);w.Da(ra,rg);var Eg;ra.Either=Eg=w.s(ra,"Either",0);var Fg;ra.ForwardsOnly=Fg=w.s(ra,"ForwardsOnly",0);var Gg;ra.BackwardsOnly=Gg=w.s(ra,"BackwardsOnly",0);w.g(ra,"archetypeLinkData",ra.prototype.XB);
w.defineProperty(ra,{XB:"archetypeLinkData"},t("Hw"),function(a){this.Hw!==a&&(a!==n&&w.i(a,Object,ra,"archetypeLinkData"),this.Hw=a)});w.g(ra,"archetypeLabelNodeData",ra.prototype.WB);
w.defineProperty(ra,{WB:"archetypeLabelNodeData"},t("Gw"),function(a){if(this.Gw!==a){a!==n&&w.i(a,Object,ra,"archetypeLabelNodeData");var b=this.h;b!==n&&(b=b.ba,b instanceof O&&!(a instanceof T)&&!b.lz(a)&&w.m("CommandHandler.archetypeLabelNodeData must be either a Node or a data object for which GraphLinksModel.isLinkLabelForNodeData is true: "+a));this.Gw=a}});w.g(ra,"direction",ra.prototype.direction);
w.defineProperty(ra,{direction:"direction"},t("da"),function(a){this.da!==a&&(u&&w.jb(a,ra,ra,"direction"),this.da=a)});w.g(ra,"startObject",ra.prototype.Tz);w.defineProperty(ra,{Tz:"startObject"},t("Wx"),function(a){this.Wx!==a&&(u&&a!==n&&w.i(a,P,ra,"startObject"),this.Wx=a)});w.u(ra,{Zv:n},t("Xx"));
ra.prototype.canStart=ra.prototype.tf=function(){if(!this.isEnabled)return q;var a=this.h;if(a===n||(a.cb||a.se)||!a.Jl)return q;var b=a.ba;return b===n||!(b instanceof O)&&!(b instanceof ze)||!a.N.left||a.Ha!==this&&!this.isBeyondDragSize()?q:this.findLinkablePort()!==n};
ra.prototype.findLinkablePort=ra.prototype.kK=function(){var a=this.h;if(a===n)return n;var b=this.Tz;b===n&&(b=a.wd(a.wc.M,n,n));if(b===n||!(b.ca instanceof T))return n;var c=this.direction;if(c===Eg||c===Fg)if(a=this.findValidLinkablePort(b,q),a!==n)return this.Fp=h,a;if(c===Eg||c===Gg)if(a=this.findValidLinkablePort(b,h),a!==n)return this.Fp=q,a;return n};
ra.prototype.doActivate=ra.prototype.yh=function(){var a=this.h;if(a!==n&&(this.Zv===n&&(this.Xx=this.findLinkablePort()),this.Zv!==n)){this.gc(this.name);a.Ec=h;a.uc="hand";if(this.re){this.dg=this.Zv;var b=this.dg.ca;b instanceof T&&(this.cg=b);this.copyPortProperties(this.cg,this.dg,this.Ue,this.km,q)}else this.fg=this.Zv,b=this.fg.ca,b instanceof T&&(this.eg=b),this.copyPortProperties(this.eg,this.fg,this.Ve,this.lm,h);a.add(this.Ue);a.add(this.Ve);this.lg!==n&&(this.Ue!==n&&(this.lg.ia=this.Ue),
this.Ve!==n&&(this.lg.na=this.Ve),this.lg.Sb(),a.add(this.lg));this.W=h}};ra.prototype.doDeactivate=ra.prototype.wi=function(){this.W=q;var a=this.h;a!==n&&(a.remove(this.lg),a.remove(this.Ue),a.remove(this.Ve),a.Ec=q,a.uc="",this.Jj())};ra.prototype.doStop=ra.prototype.Mk=function(){rg.prototype.Mk.call(this);this.Tz=this.Xx=n};
ra.prototype.doMouseUp=ra.prototype.pe=function(){if(this.W){var a=this.h;if(a===n)return;var b=this.We=n,c=n,d=n,e=n,g=this.Te=this.findTargetPort(this.re),i=n;g!==n?(i=g.ca,i instanceof T&&(this.re?(this.cg!==n&&(b=this.cg,c=this.dg),d=i,e=g):(b=i,c=g,this.eg!==n&&(d=this.eg,e=this.fg)))):this.re?this.cg!==n&&this.Do&&(b=this.cg,c=this.dg):this.eg!==n&&this.Do&&(d=this.eg,e=this.fg);if(b!==n||d!==n)b=this.insertLink(b,c,d,e),b!==n?(g===n&&(this.re?b.gG=a.N.M:b.fG=a.N.M),a.je&&a.select(b),this.We=
this.name,a.ya("LinkDrawn",b)):a.ba.tg.clear()}this.stopTool()};
ra.prototype.insertLink=ra.prototype.TK=function(a,b,c,d){var e=this.h;if(e===n)return n;var g=e.ba;if(g===n)return n;if(g instanceof ze){if(b=a,d=c,e.hd||(b=c,d=a),b!==n&&d!==n)return g.Bf(d.data,g.lb(b.data)),d.rv()}else if(g instanceof O){b===n&&(b=a);b=b.Re;b===n&&(b="");d===n&&(d=c);var i=d.Re;i===n&&(i="");d=this.XB;if(d instanceof U){if(xf(d),g=d.copy(),g instanceof U)return g.ia=a,g.zi=b,g.na=c,g.Lj=i,e.add(g),g}else if(d!==n&&(d=g.nC(d),w.mb(d)))return g.Wv(d,g.lb(a.data)),g.xs(d,b),g.Xv(d,
g.lb(c.data)),g.ys(d,i),g.SB(d),a=this.WB,a!==n&&g.lz(a)&&(a=g.uj(a),w.mb(a)&&(g.xr(a),a=g.lb(a),a!==f&&g.RB(d,a))),g=e.xf(d)}return n};function Lg(){rg.call(this);this.name="Relinking";var a=new V;a.gb="Diamond";a.wa=new cb(8,8);a.fill="cyan";a.cursor="pointer";a.Dh=0;this.OA=a;a=new V;a.gb="Diamond";a.wa=new cb(8,8);a.fill="cyan";a.cursor="pointer";a.Dh=-1;this.FB=a;this.rc=n;this.mB=new G}w.P("RelinkingTool",Lg);w.Da(Lg,rg);
Lg.prototype.updateAdornments=Lg.prototype.Ji=function(a){if(a instanceof U){var b=n,c="RelinkFrom";if(a.Qa){var d=a.Tv;a.va.T()&&(d!==n&&a.nb()&&a.canRelinkFrom()&&d.Sk()&&d.va.T())&&(b=a.Rn(c),b===n&&(b=this.makeAdornment(d,q),b.ud=c),b!==n&&b.R());a.vn(c,b)}else a.gm(c);b=n;c="RelinkTo";a.Qa?(d=a.Tv,a.va.T()&&(d!==n&&a.nb()&&a.canRelinkTo()&&d.Sk()&&d.va.T())&&(b=a.Rn(c),b===n&&(b=this.makeAdornment(d,h),b.ud=c),b!==n&&b.R()),a.vn(c,b)):a.gm(c)}};
Lg.prototype.makeAdornment=Lg.prototype.sz=function(a,b){var c=new mf;c.type=Rg;var d=b?this.bI:this.xG;d!==n&&c.add(d.copy());c.Bc=a;return c};w.defineProperty(Lg,{xG:"fromHandleArchetype"},t("OA"),function(a){a&&w.i(a,P,Lg,"fromHandleArchetype");this.OA=a});w.defineProperty(Lg,{bI:"toHandleArchetype"},t("FB"),function(a){a&&w.i(a,P,Lg,"toHandleArchetype");this.FB=a});w.u(Lg,{handle:"handle"},t("rc"));
Lg.prototype.canStart=Lg.prototype.tf=function(){if(!this.isEnabled)return q;var a=this.h;if(a===n||(a.cb||a.se)||!a.qj)return q;var b=a.ba;if(b===n||!(b instanceof O)&&!(b instanceof ze)||!a.N.left)return q;b=this.findToolHandleAt(a.wc.M,"RelinkFrom");b===n&&(b=this.findToolHandleAt(a.wc.M,"RelinkTo"));return b!==n};
Lg.prototype.doActivate=Lg.prototype.yh=function(){var a=this.h;if(a!==n){if(this.Pb===n){var b=this.findToolHandleAt(a.wc.M,"RelinkFrom");b===n&&(b=this.findToolHandleAt(a.wc.M,"RelinkTo"));if(b===n)return;var c=b.ca;if(!(c instanceof mf)||!(c.zn instanceof U))return;this.rc=b;this.Fp=c===n||"RelinkTo"===c.ud;this.Pb=c.zn}this.gc(this.name);a.Ec=h;a.uc="hand";this.dg=this.Pb.gd;this.cg=this.Pb.ia;this.fg=this.Pb.ce;this.eg=this.Pb.na;this.mB=this.Pb.va;this.Pb!==n&&0<this.Pb.ka&&(this.Pb.ia===n&&
(this.km!==n&&(this.km.wa=new cb(0,0)),this.Ue!==n&&(this.Ue.location=this.Pb.p(0))),this.Pb.na===n&&(this.lm!==n&&(this.lm.wa=new cb(0,0)),this.Ve!==n&&(this.Ve.location=this.Pb.p(this.Pb.ka-1))));this.copyPortProperties(this.cg,this.dg,this.Ue,this.km,q);this.copyPortProperties(this.eg,this.fg,this.Ve,this.lm,h);a.add(this.Ue);a.add(this.Ve);this.lg!==n&&(this.Ue!==n&&(this.lg.ia=this.Ue),this.Ve!==n&&(this.lg.na=this.Ve),this.lg.Sb(),a.add(this.lg));this.W=h}};
Lg.prototype.doDeactivate=Lg.prototype.wi=function(){this.W=q;var a=this.h;a!==n&&(a.remove(this.lg),a.remove(this.Ue),a.remove(this.Ve),a.Ec=q,a.uc="",this.Jj())};Lg.prototype.doStop=Lg.prototype.Mk=function(){rg.prototype.Mk.call(this);this.rc=n};
Lg.prototype.doMouseUp=Lg.prototype.pe=function(){if(this.W){var a=this.h;if(a===n)return;this.We=n;var b=this.cg,c=this.dg,d=this.eg,e=this.fg,g=this.Pb;this.Te=this.findTargetPort(this.re);if(this.Te!==n){var i=this.Te.ca;i instanceof T&&(this.re?(d=i,e=this.Te):(b=i,c=this.Te))}else this.Do?this.re?e=d=n:c=b=n:g=n;g!==n&&(this.reconnectLink(g,this.re?d:b,this.re?e:c,this.re),this.Te===n&&(this.re?g.gG=a.N.M:g.fG=a.N.M,g.Sb()),a.je&&(g.Qa=h),this.We=this.name,a.ya("LinkRelinked",g,this.re?this.fg:
this.dg));Sg(this.Pb,this.mB)}this.stopTool()};
Lg.prototype.reconnectLink=Lg.prototype.GL=function(a,b,c,d){var e=this.h;if(e===n)return q;var g=b!==n?b.data:n,g=g!==n?e.ba.lb(g):f,i=c.Re!==n?c.Re:"",j=a.data;if(j!==n&&g!==f)if(c=e.ba,c instanceof ze)e=e.hd,i=a.ia,g=a.na,e||(i=a.na,g=a.ia),a=i,i=g,d&&e||!d&&!e?(i=b,c.Bf(g.data,f),c.Bf(i.data,c.lb(a.data))):c.Bf(g.data,c.lb(b.data));else if(c instanceof O)d?(c.Xv(j,g),c.ys(j,i)):(c.Wv(j,g),c.xs(j,i));else return q;else d?(this.Pb.na=b,this.Pb.Lj=i):(this.Pb.ia=b,this.Pb.zi=i);return h};
function Tg(){Af.call(this);this.name="LinkReshaping";var a=new V;a.gb="Rectangle";a.wa=new cb(6,6);a.fill="cyan";this.kk=a;this.Ew=this.rc=n;this.nB=new F;this.Ix=n}w.P("LinkReshapingTool",Tg);w.Da(Tg,Af);var Ug;Tg.None=Ug=w.s(Tg,"None",0);var Vg;Tg.Horizontal=Vg=w.s(Tg,"Horizontal",1);var Wg;Tg.Vertical=Wg=w.s(Tg,"Vertical",2);var Xg;Tg.All=Xg=w.s(Tg,"All",3);
Tg.prototype.updateAdornments=Tg.prototype.Ji=function(a){if(a instanceof U){var b=n;if(a.Qa){var c=a.path;a.va.T()&&(c!==n&&a.nb()&&a.canReshape()&&c.Sk()&&c.va.T())&&(b=a.Rn(this.name),b===n&&(b=this.makeAdornment(c),b.ud=this.name),b!==n&&(b.location=a.position,b.R()));a.vn(this.name,b)}else a.gm(this.name)}};
Tg.prototype.makeAdornment=Tg.prototype.sz=function(a){var b=new mf;b.type=Rg;var c=a.ca,d=c.ka,e=Yg(c);if(c.points!==n&&2<d){for(var d=c.sv,g=c.nz,i=d+1;i<=g-1;i++){var j=this.makeHandle(a,i);if(j!==n){j.Dh=i;if(i!==d)if(i===d+1&&e){var k=c.p(d),l=c.p(d+1);Ta(k.x,l.x)&&Ta(k.y,l.y)&&(l=c.p(d-1));Ta(k.x,l.x)?(j.vo=Wg,j.cursor="n-resize"):Ta(k.y,l.y)&&(j.vo=Vg,j.cursor="w-resize")}else i===g-1&&e?(k=c.p(g-1),l=c.p(g),Ta(k.x,l.x)&&Ta(k.y,l.y)&&(k=c.p(g+1)),Ta(k.x,l.x)?(j.vo=Wg,j.cursor="n-resize"):Ta(k.y,
l.y)&&(j.vo=Vg,j.cursor="w-resize")):i!==g&&(j.vo=Xg,j.cursor="move");b.add(j)}}b.Bc=a}return b};Tg.prototype.makeHandle=Tg.prototype.$G=function(){var a=this.Wr;return a===n?n:a.copy()};w.defineProperty(Tg,{Wr:"handleArchetype"},t("kk"),function(a){a&&w.i(a,P,Tg,"handleArchetype");this.kk=a});w.u(Tg,{handle:"handle"},t("rc"));w.u(Tg,{yn:"adornedLink"},t("Ew"));
Tg.prototype.canStart=Tg.prototype.tf=function(){if(!this.isEnabled)return q;var a=this.h;return a===n||a.cb||!a.Cn?q:this.findToolHandleAt(a.wc.M,this.name)!==n};Tg.prototype.doActivate=Tg.prototype.yh=function(){var a=this.h;if(a!==n&&(this.rc=this.findToolHandleAt(a.wc.M,this.name),this.rc!==n)){var b=this.rc.ca.zn;b instanceof U&&(this.Ew=b,a.Ec=h,this.nB=b.p(this.rc.Dh),this.Ix=b.points.copy(),this.gc(this.name),this.W=h)}};
Tg.prototype.doDeactivate=Tg.prototype.wi=function(){this.Jj();this.Ew=this.rc=n;var a=this.h;a!==n&&(a.Ec=q);this.W=q};Tg.prototype.doCancel=Tg.prototype.yj=function(){var a=this.yn;a!==n&&(a.points=this.Ix);this.stopTool()};Tg.prototype.doMouseMove=Tg.prototype.Jg=function(){var a=this.h;this.W&&a!==n&&(a=this.computeReshape(a.N.M),this.reshape(a))};
Tg.prototype.doMouseUp=Tg.prototype.pe=function(){var a=this.h;if(this.W&&a!==n){var b=this.computeReshape(a.N.M);this.reshape(b);b=this.yn;b!==n&&(b.points=this.yn.points);a.Bi();this.We=this.name;a.ya("LinkReshaped",this.yn)}this.stopTool()};
Tg.prototype.reshape=Tg.prototype.OL=function(a){var b=this.yn;b.Zk();var c=this.handle.Dh,d=this.handle.vo;if(Yg(b))if(c===b.sv+1)c=b.sv+1,d==Wg?(b.J(c,new F(b.p(c-1).x,a.y)),b.J(c+1,new F(b.p(c+2).x,a.y))):d==Vg&&(b.J(c,new F(a.x,b.p(c-1).y)),b.J(c+1,new F(a.x,b.p(c+2).y)));else if(c===b.nz-1)c=b.nz-1,d===Wg?(b.J(c-1,new F(b.p(c-2).x,a.y)),b.J(c,new F(b.p(c+1).x,a.y))):d===Vg&&(b.J(c-1,new F(a.x,b.p(c-2).y)),b.J(c,new F(a.x,b.p(c+1).y)));else{var d=c,e=b.p(d),g=b.p(d-1),i=b.p(d+1);Ta(g.x,e.x)&&
Ta(e.y,i.y)?(Ta(g.x,b.p(d-2).x)&&!Ta(g.y,b.p(d-2).y)?(e=b.points,e.xc(d,new F(a.x,g.y)),b.points=e,c++,d++):b.J(d-1,new F(a.x,g.y)),Ta(i.y,b.p(d+2).y)&&!Ta(i.x,b.p(d+2).x)?(e=b.points,e.xc(d+1,new F(i.x,a.y)),b.points=e):b.J(d+1,new F(i.x,a.y))):Ta(g.y,e.y)&&Ta(e.x,i.x)?(Ta(g.y,b.p(d-2).y)&&!Ta(g.x,b.p(d-2).x)?(e=b.points,e.xc(d,new F(g.x,a.y)),b.points=e,c++,d++):b.J(d-1,new F(g.x,a.y)),Ta(i.x,b.p(d+2).x)&&!Ta(i.y,b.p(d+2).y)?(e=b.points,e.xc(d+1,new F(a.x,i.y)),b.points=e):b.J(d+1,new F(a.x,i.y))):
Ta(g.x,e.x)&&Ta(e.x,i.x)?(Ta(g.x,b.p(d-2).x)&&!Ta(g.y,b.p(d-2).y)?(e=b.points,e.xc(d,new F(a.x,g.y)),b.points=e,c++,d++):b.J(d-1,new F(a.x,g.y)),Ta(i.x,b.p(d+2).x)&&!Ta(i.y,b.p(d+2).y)?(e=b.points,e.xc(d+1,new F(a.x,i.y)),b.points=e):b.J(d+1,new F(a.x,i.y))):Ta(g.y,e.y)&&Ta(e.y,i.y)&&(Ta(g.y,b.p(d-2).y)&&!Ta(g.x,b.p(d-2).x)?(e=b.points,e.xc(d,new F(g.x,a.y)),b.points=e,c++,d++):b.J(d-1,new F(g.x,a.y)),Ta(i.y,b.p(d+2).y)&&!Ta(i.x,b.p(d+2).x)?(e=b.points,e.xc(d+1,new F(i.x,a.y)),b.points=e):b.J(d+1,
new F(i.x,a.y)));b.J(c,a.copy())}else b.J(c,a.copy());b.si()};Tg.prototype.computeReshape=Tg.prototype.qJ=function(a){var b=this.yn,c=this.handle.Dh;switch(this.handle.vo){case Xg:return a;case Wg:return b=b.p(c),new F(b.x,a.y);case Vg:return b=b.p(c),new F(a.x,b.y);default:case Ug:return b.p(c)}};w.g(Tg,"originalPoint",Tg.prototype.qH);w.u(Tg,{qH:"originalPoint"},t("nB"));w.g(Tg,"originalPoints",Tg.prototype.rH);w.u(Tg,{rH:"originalPoints"},t("Ix"));
function Zg(){Af.call(this);this.name="Resizing";this.Pd=(new cb(1,1)).freeze();this.cj=(new cb(9999,9999)).freeze();this.Pi=(new cb(NaN,NaN)).freeze();this.ql=q;this.La=n;var a=new V;a.oj=Mb;a.gb="Rectangle";a.wa=new cb(6,6);a.fill="cyan";a.stroke="black";a.eb=1;a.cursor="pointer";this.kk=a;this.rc=n;this.$m=0;this.bF=new G;this.ju=new cb;this.Hx=new F;this.ax=new cb(0,0);this.$w=new cb(Infinity,Infinity);this.Zw=new cb(1,1)}w.P("ResizingTool",Zg);w.Da(Zg,Af);
Zg.prototype.updateAdornments=Zg.prototype.Ji=function(a){if(!(a===n||a instanceof U)){var b=n;if(a.Qa){var c=a.GH;if(a.va.T()&&(c!==n&&a.nb()&&a.canResize()&&c.Sk()&&c.va.T())&&(b=a.Rn(this.name),b===n&&(b=this.makeAdornment(c),b.ud=this.name),b!==n)){var d=c.Un();b.angle=d;b.location=c.Ob(Jb);var e=b.placeholder;if(e!==n){var g=c.Xl(),c=c.Sa;e.wa=new cb(c.width*g,c.height*g)}$g(this,b,d)}a.vn(this.name,b)}else a.gm(this.name)}};
Zg.prototype.makeAdornment=Zg.prototype.sz=function(a){var b=n,b=a.ca.$D;if(b===n){b=new mf;b.type=ah;var c=new bh;c.Fi=h;b.add(c);b.add(this.makeHandle(a,Jb));b.add(this.makeHandle(a,Lb));b.add(this.makeHandle(a,Rb));b.add(this.makeHandle(a,Pb));b.add(this.makeHandle(a,Sb));b.add(this.makeHandle(a,Ub));b.add(this.makeHandle(a,Yb));b.add(this.makeHandle(a,Tb))}else if(xf(b),b=b.copy(),!(b instanceof mf))return n;b.Bc=a;return b};
Zg.prototype.makeHandle=Zg.prototype.$G=function(a,b){var c=this.Wr;if(c===n)return n;c=c.copy();c.Cb=b;return c};
function $g(a,b,c){if(b!==n)if(!Cb(b.Cb)&&""!==b.cursor)a:{a=b.Cb;yb(a)&&(a=Mb);if(0>=a.x)c=0>=a.y?c+225:1<=a.y?c+135:c+180;else if(1<=a.x)0>=a.y?c+=315:1<=a.y&&(c+=45);else if(0>=a.y)c+=270;else if(1<=a.y)c+=90;else break a;0>c?c+=360:360<=c&&(c-=360);b.cursor=22.5>c?"e-resize":67.5>c?"se-resize":112.5>c?"s-resize":157.5>c?"sw-resize":202.5>c?"w-resize":247.5>c?"nw-resize":292.5>c?"n-resize":337.5>c?"ne-resize":"e-resize"}else if(b instanceof x)for(b=b.elements;b.next();)$g(a,b.value,c)}
w.defineProperty(Zg,{Wr:"handleArchetype"},t("kk"),function(a){a&&w.i(a,P,Zg,"handleArchetype");this.kk=a});w.u(Zg,{handle:"handle"},t("rc"));w.u(Zg,{Bc:"adornedObject"},t("La"));Zg.prototype.canStart=Zg.prototype.tf=function(){if(!this.isEnabled)return q;var a=this.h;return a===n||a.cb||!a.Dn||!a.N.left?q:this.findToolHandleAt(a.wc.M,this.name)!==n?h:q};
Zg.prototype.doActivate=Zg.prototype.yh=function(){var a=this.h;a!==n&&(this.rc=this.findToolHandleAt(a.wc.M,this.name),this.rc!==n&&(this.La=this.rc.ca.Bc,this.$m=this.La.angle,this.bF.set(this.La.Sa),this.Hx.set(this.La.ca.location),this.ju.set(this.La.wa),this.Zw=this.computeCellSize(),this.ax=this.computeMinSize(),this.$w=this.computeMaxSize(),a.Ec=h,this.gc(this.name),this.W=h))};
Zg.prototype.doDeactivate=Zg.prototype.wi=function(){var a=this.h;a!==n&&(this.Jj(),this.La=this.rc=n,this.W=a.Ec=q)};Zg.prototype.doCancel=Zg.prototype.yj=function(){this.La.wa=this.ju;this.La.ca.location=this.Hx;this.stopTool()};Zg.prototype.doMouseMove=Zg.prototype.Jg=function(){var a=this.h;if(this.W&&a!==n){var b=this.ax,c=this.$w,d=this.Zw,e=this.La.QC(a.N.M),g=this.La.uv;g===ch&&(g=this.La.Ga.$b);b=this.computeResize(e,this.rc.Cb,b,c,d,!(g===dh||g===eh||a.N.shift));this.resize(b);fh(a)}};
Zg.prototype.doMouseUp=Zg.prototype.pe=function(){var a=this.h;if(this.W&&a!==n){var b=this.ax,c=this.$w,d=this.Zw,e=this.La.QC(a.N.M),g=this.La.uv;g===ch&&(g=this.La.Ga.$b);b=this.computeResize(e,this.rc.Cb,b,c,d,!(g===dh||g===eh||a.N.shift));this.resize(b);a.Bi();this.We=this.name;a.ya("PartResized",this.La,this.ju)}this.stopTool()};
Zg.prototype.resize=Zg.prototype.PL=function(a){var b=this.h;if(b!==n){var c=this.La.ca,d=c.position.copy(),e=this.La.Sa.copy(),g=this.La.Un();360<=g?g-=360:0>g&&(g+=360);var i=Math.PI*g/180,j=Math.cos(i),i=Math.sin(i),k=a.width-e.width,e=a.height-e.height,l=90<g&&270>g?1:0;d.x+=(a.x+k*l)*j-(a.y+e*(0<g&&180>g?1:0))*i;d.y+=(a.x+k*(180<g&&360>g?1:0))*i+(a.y+e*l)*j;this.La.wa=a.size;c.xi();c.position=d;b.yb()}};
Zg.prototype.computeResize=Zg.prototype.rJ=function(a,b,c,d,e,g){yb(b)&&(b=Mb);var i=this.La.Sa,j=i.x,k=i.y,l=i.x+i.width,m=i.y+i.height,p=1;if(!g){var p=i.width,r=i.height;0>=p&&(p=1);0>=r&&(r=1);p=r/p}a=bd(a.x,a.y,j,k,e.width,e.height);e=i.copy();0>=b.x?0>=b.y?(e.x=Math.max(a.x,l-d.width),e.x=Math.min(e.x,l-c.width),e.width=Math.max(l-e.x,c.width),e.y=Math.max(a.y,m-d.height),e.y=Math.min(e.y,m-c.height),e.height=Math.max(m-e.y,c.height),g||(a=e.height/e.width,p<a?(e.height=p*e.width,e.y=m-e.height):
(e.width=e.height/p,e.x=l-e.width))):1<=b.y?(e.x=Math.max(a.x,l-d.width),e.x=Math.min(e.x,l-c.width),e.width=Math.max(l-e.x,c.width),e.height=Math.max(Math.min(a.y-k,d.height),c.height),g||(a=e.height/e.width,p<a?e.height=p*e.width:(e.width=e.height/p,e.x=l-e.width))):(e.x=Math.max(a.x,l-d.width),e.x=Math.min(e.x,l-c.width),e.width=l-e.x,g||(e.height=p*e.width,e.y=k+0.5*(m-k-e.height))):1<=b.x?0>=b.y?(e.width=Math.max(Math.min(a.x-j,d.width),c.width),e.y=Math.max(a.y,m-d.height),e.y=Math.min(e.y,
m-c.height),e.height=Math.max(m-e.y,c.height),g||(a=e.height/e.width,p<a?(e.height=p*e.width,e.y=m-e.height):e.width=e.height/p)):1<=b.y?(e.width=Math.max(Math.min(a.x-j,d.width),c.width),e.height=Math.max(Math.min(a.y-k,d.height),c.height),g||(a=e.height/e.width,p<a?e.height=p*e.width:e.width=e.height/p)):(e.width=Math.max(Math.min(a.x-j,d.width),c.width),g||(e.height=p*e.width,e.y=k+0.5*(m-k-e.height))):0>=b.y?(e.y=Math.max(a.y,m-d.height),e.y=Math.min(e.y,m-c.height),e.height=m-e.y,g||(e.width=
e.height/p,e.x=j+0.5*(l-j-e.width))):1<=b.y&&(e.height=Math.max(Math.min(a.y-k,d.height),c.height),g||(e.width=e.height/p,e.x=j+0.5*(l-j-e.width)));return e};Zg.prototype.computeMinSize=Zg.prototype.mJ=function(){var a=this.La.ue.copy(),b=this.ue;!isNaN(b.width)&&b.width>a.width&&(a.width=b.width);!isNaN(b.height)&&b.height>a.height&&(a.height=b.height);return a};
Zg.prototype.computeMaxSize=Zg.prototype.lJ=function(){var a=this.La.Zd.copy(),b=this.Zd;!isNaN(b.width)&&b.width<a.width&&(a.width=b.width);!isNaN(b.height)&&b.height<a.height&&(a.height=b.height);return a};
Zg.prototype.computeCellSize=Zg.prototype.iJ=function(){var a=new cb(NaN,NaN),b=this.La.ca;if(b){var c=b.aE;!isNaN(c.width)&&0<c.width&&(a.width=c.width);!isNaN(c.height)&&0<c.height&&(a.height=c.height)}c=this.Jk;isNaN(a.width)&&(!isNaN(c.width)&&0<c.width)&&(a.width=c.width);isNaN(a.height)&&(!isNaN(c.height)&&0<c.height)&&(a.height=c.height);b=this.h;if((isNaN(a.width)||isNaN(a.height))&&b)c=b.Qb.qe,c!==n&&c.Zn&&(c=c.dz,isNaN(a.width)&&(!isNaN(c.width)&&0<c.width)&&(a.width=c.width),isNaN(a.height)&&
(!isNaN(c.height)&&0<c.height)&&(a.height=c.height)),b=b.vv,b!==n&&(b.visible&&this.Zn)&&(c=b.Vr,isNaN(a.width)&&(!isNaN(c.width)&&0<c.width)&&(a.width=c.width),isNaN(a.height)&&(!isNaN(c.height)&&0<c.height)&&(a.height=c.height));if(isNaN(a.width)||0===a.width||Infinity===a.width)a.width=1;if(isNaN(a.height)||0===a.height||Infinity===a.height)a.height=1;return a};w.g(Zg,"minSize",Zg.prototype.ue);
w.defineProperty(Zg,{ue:"minSize"},t("Pd"),function(a){this.Pd.I(a)||(u&&w.i(a,cb,Zg,"minSize"),isNaN(a.width)&&(a.width=0),isNaN(a.height)&&(a.height=0),this.Pd.Xa(a))});w.g(Zg,"maxSize",Zg.prototype.Zd);w.defineProperty(Zg,{Zd:"maxSize"},t("cj"),function(a){this.cj.I(a)||(u&&w.i(a,cb,Zg,"maxSize"),isNaN(a.width)&&(a.width=Infinity),isNaN(a.height)&&(a.height=Infinity),this.cj.Xa(a))});w.g(Zg,"cellSize",Zg.prototype.Jk);
w.defineProperty(Zg,{Jk:"cellSize"},t("Pi"),function(a){this.Pi.I(a)||(u&&w.i(a,cb,Zg,"cellSize"),this.Pi.Xa(a))});w.g(Zg,"isGridSnapEnabled",Zg.prototype.Zn);w.defineProperty(Zg,{Zn:"isGridSnapEnabled"},t("ql"),function(a){this.ql!==a&&(w.k(a,"boolean",Zg,"isGridSnapEnabled"),this.ql=a)});w.g(Zg,"originalDesiredSize",Zg.prototype.oH);w.u(Zg,{oH:"originalDesiredSize"},t("ju"));w.g(Zg,"originalLocation",Zg.prototype.pH);w.u(Zg,{pH:"originalLocation"},t("Hx"));
function gh(){Af.call(this);this.name="Rotating";this.Vx=45;this.Ux=2;this.La=n;var a=new V;a.gb="Ellipse";a.wa=new cb(6,6);a.fill="yellow";a.stroke="black";a.eb=1;a.cursor="pointer";this.kk=a;this.rc=n;this.$m=0;this.qB=new F}w.P("RotatingTool",gh);w.Da(gh,Af);
gh.prototype.updateAdornments=gh.prototype.Ji=function(a){if(!(a===n||a instanceof U)){var b=n;if(a.Qa){var c=a.KH;if(a.va.T()&&(c!==n&&a.nb()&&a.canRotate()&&c.Sk()&&c.va.T())&&(b=a.Rn(this.name),b===n&&(b=this.makeAdornment(c),b.ud=this.name),b!==n)){b.angle=c.Un();var d=n,e=n;c===a||c===a.Xb?(d=a.Xb,e=a.Yf):(d=c,e=Mb);for(var g=d.Sa,e=new F(g.width*e.x+e.offsetX,g.height*e.y+e.offsetY);d!==n&&d!==c;)d.transform.Ta(e),d=d.fa;d=e.y;e=Math.max(e.x-c.Sa.width,0);b.Yf=Mb;b.location=c.Ob(new H(1,0,50+
e,d))}a.vn(this.name,b)}else a.gm(this.name)}};gh.prototype.makeAdornment=gh.prototype.sz=function(a){var b=n,b=a.ca.eE;if(b===n){b=new mf;b.type=hh;var c=this.Wr;c!==n&&b.add(c.copy())}else if(xf(b),b=b.copy(),!(b instanceof mf))return n;b.Bc=a;return b};w.defineProperty(gh,{Wr:"handleArchetype"},t("kk"),function(a){a&&w.i(a,P,gh,"handleArchetype");this.kk=a});w.u(gh,{handle:"handle"},t("rc"));w.u(gh,{Bc:"adornedObject"},t("La"));
gh.prototype.canStart=gh.prototype.tf=function(){if(!this.isEnabled)return q;var a=this.h;return a===n||a.cb||!a.En||!a.N.left?q:this.findToolHandleAt(a.wc.M,this.name)!==n?h:q};gh.prototype.doActivate=gh.prototype.yh=function(){var a=this.h;if(a!==n&&(this.rc=this.findToolHandleAt(a.wc.M,this.name),this.rc!==n)){this.La=this.rc.ca.Bc;var b=this.La.ca,c=b.Xb;this.qB=this.La===b||this.La===c?c.Ob(b.Yf):this.La.Ob(Mb);this.$m=this.La.angle;a.Ec=h;this.gc(this.name);this.W=h}};
gh.prototype.doDeactivate=gh.prototype.wi=function(){var a=this.h;a!==n&&(this.Jj(),this.La=this.rc=n,this.W=a.Ec=q)};gh.prototype.doCancel=gh.prototype.yj=function(){this.rotate(this.$m);this.stopTool()};gh.prototype.doMouseMove=gh.prototype.Jg=function(){var a=this.h;this.W&&a!==n&&(a=this.computeRotate(a.N.M),this.rotate(a))};
gh.prototype.doMouseUp=gh.prototype.pe=function(){var a=this.h;if(this.W&&a!==n){var b=this.computeRotate(a.N.M);this.rotate(b);a.Bi();this.We=this.name;a.ya("PartRotated",this.La,this.$m)}this.stopTool()};gh.prototype.rotate=gh.prototype.rotate=function(a){this.La!==n&&(this.La.angle=a,this.h.yb())};
gh.prototype.computeRotate=gh.prototype.sJ=function(a){var a=this.qB.ui(a),b=this.La.fa;b&&(a-=b.Un(),360<=a?a-=360:0>a&&(a+=360));var b=Math.min(Math.abs(this.sE),180),c=Math.min(Math.abs(this.rE),b/2);!this.h.N.shift&&(0<b&&0<c)&&(a%b<c?a=Math.floor(a/b)*b:a%b>b-c&&(a=(Math.floor(a/b)+1)*b));360<=a?a-=360:0>a&&(a+=360);return a};w.g(gh,"snapAngleMultiple",gh.prototype.sE);
w.defineProperty(gh,{sE:"snapAngleMultiple"},t("Vx"),function(a){this.Vx!==a&&(u&&w.k(a,"number",gh,"snapAngleMultiple"),this.Vx=a)});w.g(gh,"snapAngleEpsilon",gh.prototype.rE);w.defineProperty(gh,{rE:"snapAngleEpsilon"},t("Ux"),function(a){this.Ux!==a&&(u&&w.k(a,"number",gh,"snapAngleEpsilon"),this.Ux=a)});w.g(gh,"originalAngle",gh.prototype.nH);w.u(gh,{nH:"originalAngle"},t("$m"));function ih(){Af.call(this);this.name="ClickSelecting"}w.P("ClickSelectingTool",ih);w.Da(ih,Af);
ih.prototype.canStart=ih.prototype.tf=function(){return!this.isEnabled||this.h===n||this.isBeyondDragSize()?q:h};ih.prototype.doMouseUp=ih.prototype.pe=function(){this.W&&(this.standardMouseSelect(),this.standardMouseClick());this.stopTool()};function jh(){Af.call(this);this.name="Action";this.pm=n}w.P("ActionTool",jh);w.Da(jh,Af);
jh.prototype.canStart=jh.prototype.tf=function(){if(!this.isEnabled)return q;var a=this.h;if(a===n)return q;var b=a.N,c=a.wd(b.M,function(a){for(;a.fa!==n;){if(a.wv)return a;a=a.fa}return n},function(a){return a.wv});return c!==n?(this.pm=c,a.xm=a.wd(b.M,n,n),h):q};jh.prototype.doMouseDown=jh.prototype.Ir=function(){if(this.W){var a=this.h.N,b=this.pm;b!==n&&(a.zd=b,b.uy!==n&&b.uy(a,b))}else this.canStart()&&this.doActivate()};
jh.prototype.doMouseMove=jh.prototype.Jg=function(){if(this.W){var a=this.h.N,b=this.pm;b!==n&&(a.zd=b,b.vy!==n&&b.vy(a,b))}};jh.prototype.doMouseUp=jh.prototype.pe=function(){if(this.W){var a=this.h,b=a.N,c=this.pm;if(c===n)return;b.zd=c;c.wy!==n&&c.wy(b,c);this.isBeyondDragSize()||Bf(c,b,a)}this.stopTool()};jh.prototype.doCancel=jh.prototype.yj=function(){var a=this.h;if(a!==n){var a=a.N,b=this.pm;if(b===n)return;a.zd=b;b.ty!==n&&b.ty(a,b)}this.stopTool()};
jh.prototype.doStop=jh.prototype.Mk=function(){this.pm=n};function sa(){Af.call(this);this.name="ClickCreating";this.Zj=n;this.nx=h;this.MA=new F(0,0)}w.P("ClickCreatingTool",sa);w.Da(sa,Af);
sa.prototype.canStart=sa.prototype.tf=function(){if(!this.isEnabled||this.Br===n)return q;var a=this.h;if(a===n||(a.cb||a.se)||!a.Bn||!a.N.left||this.isBeyondDragSize())return q;if(this.hD){if(1===a.N.Td&&(this.MA=a.N.jd.copy()),2!==a.N.Td||this.isBeyondDragSize(this.MA))return q}else if(1!==a.N.Td)return q;return a.Ha!==this&&a.Nr(a.N.M,h)!==n?q:h};sa.prototype.doMouseUp=sa.prototype.pe=function(){var a=this.h;this.W&&a!==n&&this.insertPart(a.N.M);this.stopTool()};
sa.prototype.insertPart=sa.prototype.UK=function(a){var b=this.h;if(b===n)return n;var c=this.Br;if(c===n)return n;this.gc(this.name);var d=n;c instanceof R?c.Yd()&&(xf(c),d=c.copy(),d instanceof R&&b.add(d)):c!==n&&(c=b.ba.uj(c),w.mb(c)&&(b.ba.xr(c),d=b.Bj(c)));d instanceof R&&(d.location=a,b.je&&b.select(d));b.Bi();this.We=this.name;b.ya("PartCreated",d);this.Jj();return d instanceof R?d:n};w.g(sa,"archetypeNodeData",sa.prototype.Br);
w.defineProperty(sa,{Br:"archetypeNodeData"},t("Zj"),function(a){this.Zj!==a&&(a!==n&&w.i(a,Object,sa,"archetypeNodeData"),this.Zj=a)});w.g(sa,"isDoubleClick",sa.prototype.hD);w.defineProperty(sa,{hD:"isDoubleClick"},t("nx"),function(a){this.nx!==a&&(w.k(a,"boolean",sa,"isDoubleClick"),this.nx=a)});
function kh(){Af.call(this);this.name="ContextMenu";this.wA=n;this.cB=new F;this.Am=n;if(w.Zx===h){this.Am=new mf;this.Rw=n;var a=this;this.GB=function(){a.stopTool()};if(w.zA===q){var b=document.createElement("div"),c=document.createElement("div");b.style.cssText="top: 0px;z-index:300;position: fixed;display: none;text-align: center;left: 25%;width: 50%;background-color: #F5F5F5;padding: 16px;border: 16px solid #444;border-radius: 10px;margin-top: 10px";c.style.cssText="z-index:299;position: fixed;display: none;top: 0;left: 0;width: 100%;height: 100%;background-color: black;-moz-opacity: 0.8;opacity:.80;filter: alpha(opacity=80);";
var d=document.createElement("style");document.getElementsByTagName("head")[0].appendChild(d);d.sheet.insertRule(".defaultCXul { list-style: none; }",0);d.sheet.insertRule(".defaultCXli {font:700 1.5em Helvetica, Arial, sans-serif;position: relative;min-width: 60px; }",0);d.sheet.insertRule(".defaultCXa {color: #444;display: inline-block;padding: 4px;text-decoration: none;margin: 2px;border: 1px solid gray;border-radius: 10px; }",0);b.addEventListener("contextmenu",function(a){a.preventDefault();
return q},q);b.addEventListener("selectstart",function(a){a.preventDefault();return q},q);c.addEventListener("contextmenu",function(a){a.preventDefault();return q},q);document.body&&(document.body.appendChild(b),document.body.appendChild(c));w.$s=b;w.Zs=c;w.zA=h}}}w.P("ContextMenuTool",kh);w.Da(kh,Af);kh.prototype.canStart=kh.prototype.tf=function(){if(!this.isEnabled)return q;var a=this.h;return a===n||this.isBeyondDragSize()||!a.N.right?q:this.Am!==n||this.findObjectWithContextMenu()!==n?h:q};
kh.prototype.doStart=kh.prototype.Vy=function(){var a=this.h;a!==n&&this.cB.set(a.wc.M)};kh.prototype.doStop=kh.prototype.Mk=function(){this.hideDefaultContextMenu();this.hideContextMenu()};kh.prototype.findObjectWithContextMenu=kh.prototype.lK=function(){var a=this.h;if(a===n)return n;var b=a.wd(a.N.M,n,function(a){return!a.Ja.yc});if(b!==n){for(a=b;a!==n;){var c=a.contextMenu;if(c!==n)return a;a=a.fa}if(this.Am!==n)return b.ca}else if(c=a.contextMenu,c!==n)return a;return n};
kh.prototype.doActivate=kh.prototype.yh=aa();kh.prototype.doMouseDown=kh.prototype.Ir=function(){if(this.W){var a=this.h;if(a!==n&&this.Fe!==n){var b=a.wd(a.N.M,n,n);b!==n&&b.Di(this.Fe)?(this.standardMouseClick(n,n),this.stopTool()):(this.stopTool(),a.Ha.doMouseDown())}}};
kh.prototype.doMouseUp=kh.prototype.pe=function(){!this.W&&this.canStart()&&(this.W=h);this.standardMouseSelect();this.standardMouseClick();var a=this.findObjectWithContextMenu();if(a!==n){var b=a.contextMenu;b!==n?this.showContextMenu(b,a instanceof P?a:n):this.showDefaultContextMenu()}else this.showDefaultContextMenu()};kh.prototype.doMouseMove=kh.prototype.Jg=function(){this.W&&this.standardMouseOver()};
kh.prototype.showContextMenu=kh.prototype.VL=function(a,b){w.i(a,mf,kh,"showContextMenu:contextmenu");b!==n&&w.i(b,P,kh,"showContextMenu:obj");var c=this.h;if(c!==n){a!==this.Fe&&this.hideContextMenu();a.Ld="Tool";a.Gj=q;a.scale=1/c.scale;c.add(a);if(b!==n){var d=n,e=b.Qr();e!==n&&(d=e.data);a.Bc=b;a.data=d}else a.data=c.ba;a.xi();this.positionContextMenu(a,b);this.Fe=a;c.yb()}};
kh.prototype.positionContextMenu=kh.prototype.EL=function(a){var b=this.h;if(b!==n){var c=b.N.M.copy(),d=a.xa,b=b.Ua;c.x+d.width>b.right&&(c.x-=d.width+5);c.y+d.height>b.bottom&&(c.y-=d.height+5);a.position=c}};kh.prototype.hideContextMenu=kh.prototype.LK=function(){var a=this.h;a!==n&&this.Fe!==n&&(this.Fe.data=n,this.Fe.Bc=n,a.remove(this.Fe),this.Fe=n,this.standardMouseOver(),a.yb())};
kh.prototype.initializeDefaultButtons=kh.prototype.QK=function(){if(this.h===n)return n;var a=new z,b=this.h.Uf;a.add({text:"Copy",uf:function(){b.copySelection()},visible:function(){return b.canCopySelection()}});a.add({text:"Cut",uf:function(){b.cutSelection()},visible:function(){return b.canCutSelection()}});a.add({text:"Delete",uf:function(){b.deleteSelection()},visible:function(){return b.canDeleteSelection()}});a.add({text:"Paste",uf:function(a){b.pasteSelection(a.N.M)},visible:function(){return b.canPasteSelection()}});
a.add({text:"Select All",uf:function(){b.selectAll()},visible:function(){return b.canSelectAll()}});a.add({text:"Undo",uf:function(){b.undo()},visible:function(){return b.canUndo()}});a.add({text:"Redo",uf:function(){b.redo()},visible:function(){return b.canRedo()}});a.add({text:"Zoom Out",uf:function(){b.decreaseZoom()},visible:function(){return b.canDecreaseZoom()}});a.add({text:"Zoom In",uf:function(){b.increaseZoom()},visible:function(){return b.canIncreaseZoom()}});a.add({text:"Zoom To Fit",
uf:function(){b.zoomToFit()},visible:function(){return b.canZoomToFit()}});a.add({text:"Reset Zoom",uf:function(){b.resetZoom()},visible:function(){return b.canResetZoom()}});a.add({text:"Group Selection",uf:function(){b.groupSelection()},visible:function(){return b.canGroupSelection()}});a.add({text:"Ungroup Selection",uf:function(){b.ungroupSelection()},visible:function(){return b.canUngroupSelection()}});a.add({text:"Edit Text",uf:function(){b.editTextBlock()},visible:function(){return b.canEditTextBlock()}});
return a};
kh.prototype.showDefaultContextMenu=kh.prototype.WL=function(){var a=this.h;if(a!==n){this.Rw===n&&(this.Rw=this.initializeDefaultButtons());this.Am!==this.Fe&&this.hideContextMenu();w.$s.innerHTML="";w.Zs.addEventListener("click",this.GB,q);var b=this,c=document.createElement("ul");c.className="defaultCXul";w.$s.appendChild(c);c.innerHTML="";for(var d=this.Rw.l;d.next();){var e=d.value,g=e.text,i=e.visible;if("function"!==typeof i||i()){i=document.createElement("li");i.className="defaultCXli";var j=
document.createElement("a");j.className="defaultCXa";j.href="#";j.XE=e.uf;j.addEventListener("click",function(c){this.XE(a);b.stopTool();c.preventDefault();return q},q);j.textContent=g;i.appendChild(j);c.appendChild(i)}}w.$s.style.display="block";w.Zs.style.display="block";this.Fe=this.Am}};kh.prototype.hideDefaultContextMenu=kh.prototype.MK=function(){this.Fe!==n&&this.Fe===this.Am&&(w.$s.style.display="none",w.Zs.style.display="none",w.Zs.removeEventListener("click",this.GB,q),this.Fe=n)};
w.g(kh,"currentContextMenu",kh.prototype.Fe);w.defineProperty(kh,{Fe:"currentContextMenu"},t("wA"),ba("wA"));w.u(kh,{wL:"mouseDownPoint"},t("cB"));function lh(){Af.call(this);this.name="DragSelecting";this.Bm=175;this.WA=q;var a=new R;a.Ld="Tool";a.Gj=q;var b=new V;b.name="SHAPE";b.gb="Rectangle";b.fill=n;b.stroke="magenta";b.position=new F(0,0);a.add(b);this.Mi=a}w.P("DragSelectingTool",lh);w.Da(lh,Af);
lh.prototype.canStart=lh.prototype.tf=function(){if(!this.isEnabled)return q;var a=this.h;if(a===n||!a.je)return q;var b=a.N;return!b.left||a.Ha!==this&&(!this.isBeyondDragSize()||b.timestamp-a.wc.timestamp<this.hv||a.Nr(b.M,h)!==n)?q:h};lh.prototype.doActivate=lh.prototype.yh=function(){var a=this.h;a!==n&&(this.W=h,a.Ec=h,a.ub=h,a.add(this.ed),this.doMouseMove())};lh.prototype.doDeactivate=lh.prototype.wi=function(){var a=this.h;a!==n&&(a.remove(this.ed),a.ub=q,this.W=a.Ec=q,a.yb())};
lh.prototype.doMouseMove=lh.prototype.Jg=function(){var a=this.h;if(a!==n&&this.W&&this.ed!==n){var b=this.computeBoxBounds();this.ed.Ie("SHAPE").wa=b.size;this.ed.position=b.position;a.yb()}};lh.prototype.doMouseUp=lh.prototype.pe=function(){if(this.W){var a=this.h;a.remove(this.ed);try{a.uc="wait",this.selectInRect(this.computeBoxBounds())}finally{a.uc=""}}this.stopTool()};lh.prototype.computeBoxBounds=lh.prototype.bG=function(){var a=this.h;return a===n?new G(0,0,0,0):new G(a.wc.M,a.N.M)};
lh.prototype.selectInRect=lh.prototype.TL=function(a){var b=this.h;if(b!==n){var c=b.N;b.ya("ChangingSelection");a=b.Wl(a,n,function(a){return a instanceof R&&a.Hk()},this.mD);if(c.Kk)if(c.shift)for(a=a.l;a.next();)c=a.value,c.Qa&&(c.Qa=q);else for(a=a.l;a.next();)c=a.value,c.Qa=!c.Qa;else{if(!c.shift){for(var d=new z(R),e=b.selection.l;e.next();)c=e.value,a.contains(c)||d.add(c);for(d=d.l;d.next();)c=d.value,c.Qa=q}for(a=a.l;a.next();)c=a.value,c.Qa||(c.Qa=h)}b.ya("ChangedSelection")}};
w.g(lh,"delay",lh.prototype.hv);w.defineProperty(lh,{hv:"delay"},t("Bm"),ba("Bm"));w.g(lh,"isPartialInclusion",lh.prototype.mD);w.defineProperty(lh,{mD:"isPartialInclusion"},t("WA"),ba("WA"));w.g(lh,"box",lh.prototype.ed);w.defineProperty(lh,{ed:"box"},t("Mi"),ba("Mi"));function mh(){Af.call(this);this.name="DragZooming";var a=new R;a.Ld="Tool";a.Gj=q;var b=new V;b.name="SHAPE";b.gb="Rectangle";b.fill=n;b.stroke="magenta";b.position=new F(0,0);a.add(b);this.Mi=a;this.NB=n}w.P("DragZoomingTool",mh);
w.Da(mh,Af);mh.prototype.canStart=mh.prototype.tf=function(){if(!this.isEnabled)return q;var a=this.h;return a===n||!a.N.left||a.Ha!==this&&!this.isBeyondDragSize()?q:h};mh.prototype.doActivate=mh.prototype.yh=function(){var a=this.h;a!==n&&(this.W=h,a.Ec=h,a.ub=h,a.add(this.ed),this.doMouseMove())};mh.prototype.doDeactivate=mh.prototype.wi=function(){var a=this.h;a!==n&&(a.remove(this.ed),a.ub=q,this.W=a.Ec=q,a.yb())};
mh.prototype.doMouseMove=mh.prototype.Jg=function(){var a=this.h;if(a!==n&&this.W&&this.ed!==n){var b=this.computeBoxBounds();this.ed.Ie("SHAPE").wa=b.size;this.ed.position=b.position;a.yb()}};mh.prototype.doMouseUp=mh.prototype.pe=function(){if(this.W){var a=this.h;a.remove(this.ed);try{a.uc="wait",this.zoomToRect(this.computeBoxBounds())}finally{a.uc=""}}this.stopTool()};
mh.prototype.computeBoxBounds=mh.prototype.bG=function(){var a=this.h;if(a===n)return new G(0,0,0,0);var b=a.wc.M,c=a.N.M,a=c.x-b.x,d=c.y-b.y,e=this.Ks;e===n&&(e=this.h);if(e===n)return new G(b,c);e=e.Ua;if(0===e.height||0===d)return new G(b,c);e=e.width/e.height;Math.abs(a/d)<e?(c=b.x+a,a=b.y+Math.ceil(Math.abs(a)/e)*(0>d?-1:1)):(c=b.x+Math.ceil(Math.abs(d)*e)*(0>a?-1:1),a=b.y+d);return new G(b,new F(c,a))};
mh.prototype.zoomToRect=mh.prototype.iI=function(a){if(!(0.1>a.width)){var b=this.Ks;b===n&&(b=this.h);b!==n&&(b.scale=Math.min(b.Ua.width*b.scale/a.width,b.Ah),b.position=new F(a.x,a.y))}};w.g(mh,"box",mh.prototype.ed);w.defineProperty(mh,{ed:"box"},t("Mi"),ba("Mi"));w.g(mh,"zoomedDiagram",mh.prototype.Ks);w.defineProperty(mh,{Ks:"zoomedDiagram"},t("NB"),ba("NB"));
function nh(){Af.call(this);this.name="Panning";this.Jx=new F;this.Ni=q;var a=this;this.uB=function(){document.removeEventListener("scroll",a.uB,q);a.stopTool()}}w.P("PanningTool",nh);w.Da(nh,Af);nh.prototype.canStart=nh.prototype.tf=function(){if(!this.isEnabled)return q;var a=this.h;return a===n||!a.rf&&!a.sf||!a.N.left||a.Ha!==this&&!this.isBeyondDragSize()?q:h};
nh.prototype.doActivate=nh.prototype.yh=function(){var a=this.h;a!==n&&(this.Ni?(a.N.bubbles=h,document.addEventListener("scroll",this.uB,q)):(a.uc="move",a.Ec=h,this.Jx=a.position.copy()),this.W=h)};nh.prototype.doDeactivate=nh.prototype.wi=function(){var a=this.h;a!==n&&(a.uc="",this.W=a.Ec=q)};nh.prototype.doCancel=nh.prototype.yj=function(){var a=this.h;a!==n&&(a.position=this.Jx,a.Ec=q);this.stopTool()};nh.prototype.doMouseMove=nh.prototype.Jg=function(){this.move()};
nh.prototype.doMouseUp=nh.prototype.pe=function(){this.move();this.stopTool()};nh.prototype.move=function(){var a=this.h;if(this.W&&a)if(this.Ni)a.N.bubbles=h;else{var b=a.position,c=a.wc.M,d=a.N.M,e=b.x+c.x-d.x,c=b.y+c.y-d.y;a.rf||(e=b.x);a.sf||(c=b.y);a.position=new F(e,c);a.Ng()}};w.g(nh,"bubbles",nh.prototype.bubbles);w.defineProperty(nh,{bubbles:"bubbles"},t("Ni"),ba("Ni"));w.g(nh,"originalPosition",nh.prototype.sH);w.u(nh,{sH:"originalPosition"},t("Jx"));
function oh(){Af.call(this);this.name="TextEditing";this.Sw=this.yA=this.ly=n;this.Yx=ph;this.nj=n;this.Ya=qh;this.vk=n}w.P("TextEditingTool",oh);w.Da(oh,Af);var rh;oh.LostFocus=rh=w.s(oh,"LostFocus",0);var sh;oh.MouseDown=sh=w.s(oh,"MouseDown",1);var th;oh.Tab=th=w.s(oh,"Tab",2);var uh;oh.Enter=uh=w.s(oh,"Enter",3);oh.SingleClick=w.s(oh,"SingleClick",0);var ph;oh.SingleClickSelected=ph=w.s(oh,"SingleClickSelected",1);
var qh=w.s(oh,"StateNone",0),vh=w.s(oh,"StateActive",1),Dh=w.s(oh,"StateEditing",2),Eh=w.s(oh,"StateEditing2",3),Fh=w.s(oh,"StateValidating",4),Gh=w.s(oh,"StateValidated",5);w.g(oh,"textBlock",oh.prototype.mg);w.defineProperty(oh,{mg:"textBlock"},t("ly"),ba("ly"));w.g(oh,"currentTextEditor",oh.prototype.Ig);w.defineProperty(oh,{Ig:"currentTextEditor"},t("yA"),ba("yA"));w.g(oh,"defaultTextEditor",oh.prototype.xC);w.defineProperty(oh,{xC:"defaultTextEditor"},t("Sw"),ba("Sw"));w.g(oh,"starting",oh.prototype.uE);
w.defineProperty(oh,{uE:"starting"},t("Yx"),function(a){this.Yx!==a&&(u&&w.jb(a,oh,oh,"starting"),this.Yx=a)});oh.prototype.canStart=oh.prototype.tf=function(){if(!this.isEnabled)return q;var a=this.h;if(a===n||a.cb||!a.N.left||this.isBeyondDragSize())return q;a=a.wd(a.N.M,n,function(a){return a instanceof na});if(!(a instanceof na)||!a.jv)return q;a=a.ca;return a===n||this.uE===ph&&!a.Qa?q:h};oh.prototype.doStart=oh.prototype.Vy=function(){!this.W&&this.mg!==n&&this.doActivate()};
oh.prototype.doActivate=oh.prototype.yh=function(){if(!this.W){var a=this.h;if(a!==n){var b=this.mg;b===n&&(b=a.wd(a.N.M,function(a){return a instanceof na?a:n}),b=b instanceof na?b:n);if(b!==n&&(this.mg=b,b.ca!==n)){this.W=h;this.Ya=vh;this.gc(this.name);var c=this.xC,d=q;b.Vz!==n&&(c=b.Vz);c!==n&&!c.jA&&(d=h);if(c===n){c=document.createElement("textarea");c.jA=h;this.Sw=c;var e=this.mg.copy();c.addEventListener("input",function(){e.text=this.value;Hh(e,Infinity,Infinity);this.style.width=20+e.xa.width*
this.aI+"px";this.rows=e.vl},q);c.addEventListener("keydown",function(a){var b=a.which,c=this.textEditingTool;if(c!==n)if(13==b)c.sy(uh);else{if(9==b)return c.sy(th),a.preventDefault(),q;27==b&&(c.doCancel(),c.h&&c.h.focus())}},q);c.addEventListener("focus",function(){var a=this.textEditingTool;a.Ya===vh?a.Ya=Dh:a.Ya===Gh?a.Ya=Eh:a.Ya===Eh&&(a.Ya=Dh)},q)}if(c.jA){var g=b.Ob(Mb),i=a.position,j=a.scale,k=b.Xl()*j,l=b.Sa.width*k;Ih(b,b.font);g=new F((g.x-i.x)*j,(g.y-i.y)*j);c.value=b.text;a.vi.style.font=
b.font;c.style.font="inherit";c.style.fontSize=100*k+"%";c.style.lineHeight="normal";l=20+l;c.style.width=l+"px";c.style.height="";c.rows=b.vl;a.vi.appendChild(c);c.style.left=(g.x-l/2|0)+"px";c.style.top=(g.y-c.clientHeight/2|0)+"px";c.style.textAlign=b.textAlign}else a.vi.appendChild(c);c.style.position="absolute";c.style.zIndex=100;c.className="start";c.textEditingTool=this;c.aI=k;if(d&&c.onActivate!==f)c.onActivate();this.Ig=c;c.focus()}}}};
oh.prototype.doCancel=oh.prototype.yj=function(){this.vk!==n&&(this.Ig.style.border=this.vk,this.vk=n);this.stopTool()};oh.prototype.doMouseUp=oh.prototype.pe=function(){!this.W&&this.canStart()&&this.doActivate()};oh.prototype.doMouseDown=oh.prototype.Ir=function(){this.W&&this.sy(sh)};
oh.prototype.acceptText=oh.prototype.sy=function(a){switch(a){case sh:if(this.Ya===Gh||this.Ya===Eh)this.Ig.focus();else if(this.Ya===vh||this.Ya===Dh)this.Ya=Fh,Jh(this);break;case rh:case uh:case th:if(uh===a&&this.ly.Bv===h)break;if(this.Ya===vh||this.Ya===Dh)this.Ya=Fh,Jh(this)}};
function Jh(a){if(a.mg!==n&&a.Ig!==n){var b=a.mg,c=a.mg.text,d=a.Ig.value,e="",e="function"===typeof d?d():d;if(!a.isValidText(a.mg,c,e)){a.Ya=Dh;b.Kr!==n&&b.Kr(a,c,e);a.vk===n&&(a.vk=a.Ig.style.border,a.Ig.style.border="3px solid red");a.Ig.focus();return}a.Ya=Gh;c!==e&&(a.mg.text=e);a.We=a.name;b=a.h;b!==n&&b.ya("TextEdited",a.mg,c);a.stopTool();b!==n&&b.focus()}a.vk!==n&&(a.Ig.style.border=a.vk,a.vk=n)}
oh.prototype.doDeactivate=oh.prototype.wi=function(){var a=this.h;if(a!==n){this.W&&this.Jj();this.Ya=qh;this.mg=n;if(this.Ig!==n){var b=this.Ig;if(b.onDeactivate!==f)b.onDeactivate();b!==n&&a.vi.removeChild(b)}this.W=q}};oh.prototype.isValidText=oh.prototype.fL=function(a,b,c){w.i(a,na,oh,"isValidText:textblock");var d=this.Cs;if(d!==n&&!d(a,b,c))return q;d=a.Cs;return d!==n&&!d(a,b,c)?q:h};w.g(oh,"textValidation",oh.prototype.Cs);
w.defineProperty(oh,{Cs:"textValidation"},t("nj"),function(a){this.nj!==a&&(this.nj=a)});function kf(){Af.call(this);this.name="ToolManager";this.dB=new z(Af);this.eB=new z(Af);this.fB=new z(Af);this.PA=this.QA=1E3;this.gt=this.Pw=n;this.gB=Df}w.P("ToolManager",kf);w.Da(kf,Af);var Df;kf.WheelScroll=Df=w.s(kf,"WheelScroll",0);var Cf;kf.WheelZoom=Cf=w.s(kf,"WheelZoom",1);w.g(kf,"mouseWheelBehavior",kf.prototype.dm);w.defineProperty(kf,{dm:"mouseWheelBehavior"},t("gB"),ba("gB"));
kf.prototype.initializeStandardTools=kf.prototype.SK=function(){this.OB=new jh;this.TD=new Lg;this.tD=new Tg;this.cE=new Zg;this.gE=new gh;this.rz=new ra;this.qe=new Ef;this.DC=new lh;this.Jr=new mh;this.Jr.isEnabled=q;this.MD=new nh;this.jC=new kh;this.aw=new oh;this.fC=new sa;this.gC=new ih};
kf.prototype.doMouseDown=kf.prototype.Ir=function(){var a=this.h;if(a!==n){var b=a.sa;b.Gy&&0!==b.al&&w.trace("WARNING: In ToolManager.doMouseDown: UndoManager.transactionLevel is not zero");for(var b=this.Qe.length,c=0;c<b;c++){var d=this.Qe.oa(c);d.h===n&&d.ae(this.h);if(d.canStart()){a.Ha=d;a.Ha===d&&(d.W||d.doActivate(),d.doMouseDown());return}}1===a.N.button&&(this.dm===Df?this.dm=Cf:this.dm===Cf&&(this.dm=Df));this.doActivate();this.standardWaitAfter(this.gz)}};
kf.prototype.doMouseMove=kf.prototype.Jg=function(){var a=this.h;if(a!==n){if(this.W)for(var b=this.$f.length,c=0;c<b;c++){var d=this.$f.oa(c);d.h===n&&d.ae(this.h);if(d.canStart()){a.Ha=d;a.Ha===d&&(d.W||d.doActivate(),d.doMouseMove());return}}this.standardMouseOver();this.isBeyondDragSize()&&this.standardWaitAfter(this.W?this.gz:this.aD)}};kf.prototype.doCurrentObjectChanged=kf.prototype.lG=function(a,b){var c=this.Lk;c!==n&&!(b!==n&&(b===c||b.Di(c)))&&this.hideToolTip()};
kf.prototype.doWaitAfter=kf.prototype.nG=function(){this.h&&this.h.Ea&&(this.doMouseHover(),this.W||this.doToolTip())};kf.prototype.doMouseHover=kf.prototype.LJ=function(){var a=this.h;if(a!==n){var b=a.N;b.zd===n&&(b.zd=a.wd(b.M,n,n));var c=b.zd;if(c!==n)for(;c!==n;){a=this.W?c.is:c.js;if(a!==n&&(a(b,c),b.Xd))break;c=c.fa}else a=this.W?a.is:a.js,a!==n&&a(b)}};
kf.prototype.doToolTip=kf.prototype.QJ=function(){var a=this.h;if(a!==n){var b=a.N;b.zd===n&&(b.zd=a.wd(b.M,n,n));b=b.zd;if(b!==n){if(!(b===this.Lk||b.Di(this.Lk))){for(;b!==n;){a=b.Fs;if(a!==n){this.showToolTip(a,b);return}b=b.fa}this.hideToolTip()}}else a=a.Fs,a!==n?this.showToolTip(a,n):this.hideToolTip()}};
kf.prototype.showToolTip=kf.prototype.XL=function(a,b){w.i(a,mf,kf,"showToolTip:tooltip");b!==n&&w.i(b,P,kf,"showToolTip:obj");var c=this.h;if(c!==n){a!==this.Lk&&this.hideToolTip();a.Ld="Tool";a.Gj=q;a.scale=1/c.scale;c.add(a);if(b!==n&&b!==this.gt){var d=n,e=b.ca;e!==n&&(d=e.data);a.Bc=b;a.data=d}else b===n&&(a.data=c.ba);if(b===n||b!==this.gt)a.xi(),this.positionToolTip(a,b);this.Pw=a;this.gt=b;c.yb()}};
kf.prototype.positionToolTip=kf.prototype.FL=function(a){var b=this.h;if(b!==n){var c=b.N.M.copy(),d=a.xa,b=b.Ua;c.x+d.width>b.right&&(c.x-=d.width+5);c.y=c.y+20+d.height>b.bottom?c.y-(d.height+5):c.y+20;a.position=c}};kf.prototype.hideToolTip=kf.prototype.NK=function(){if(this.Lk!==n){var a=this.h;a!==n&&(this.Lk.data=n,this.Lk.Bc=n,a.remove(this.Lk),this.gt=this.Pw=n,a.yb())}};w.u(kf,{Lk:"currentToolTip"},t("Pw"));
kf.prototype.doMouseUp=kf.prototype.pe=function(){this.cancelWaitAfter();if(this.W){var a=this.h;if(a===n)return;for(var b=this.Og.length,c=0;c<b;c++){var d=this.Og.oa(c);d.h===n&&d.ae(this.h);if(d.canStart()){a.Ha=d;a.Ha===d&&(d.W||d.doActivate(),d.doMouseUp());return}}}this.doDeactivate()};kf.prototype.doMouseWheel=kf.prototype.mG=function(){this.standardMouseWheel()};kf.prototype.doKeyDown=kf.prototype.Ty=function(){var a=this.h;a!==n&&a.Uf.doKeyDown()};
kf.prototype.doKeyUp=kf.prototype.Uy=function(){var a=this.h;a!==n&&a.Uf.doKeyUp()};kf.prototype.doCancel=kf.prototype.yj=function(){Hf!==n&&Hf.doCancel();Af.prototype.yj.call(this)};kf.prototype.findTool=kf.prototype.Je=function(a){w.k(a,"string",kf,"findTool:name");for(var b=this.Qe.length,c=0;c<b;c++){var d=this.Qe.oa(c);if(d.name===a)return d}b=this.$f.length;for(c=0;c<b;c++)if(d=this.$f.oa(c),d.name===a)return d;b=this.Og.length;for(c=0;c<b;c++)if(d=this.Og.oa(c),d.name===a)return d;return n};
kf.prototype.replaceTool=kf.prototype.FH=function(a,b){w.k(a,"string",kf,"replaceTool:name");b!==n&&(w.i(b,Af,kf,"replaceTool:newtool"),b.h&&b.h!==this.h&&w.m("Cannot share tools between Diagrams: "+b.toString()),b.ae(this.h));for(var c=this.Qe.length,d=0;d<c;d++){var e=this.Qe.oa(d);if(e.name===a)return b!==n?this.Qe.Vv(d,b):this.Qe.Se(d),e}c=this.$f.length;for(d=0;d<c;d++)if(e=this.$f.oa(d),e.name===a)return b!==n?this.$f.Vv(d,b):this.$f.Se(d),e;c=this.Og.length;for(d=0;d<c;d++)if(e=this.Og.oa(d),
e.name===a)return b!==n?this.Og.Vv(d,b):this.Og.Se(d),e;return n};function Kh(a,b,c,d){w.k(b,"string",kf,"replaceStandardTool:name");w.i(d,z,kf,"replaceStandardTool:list");c!==n&&(w.i(c,Af,kf,"replaceStandardTool:newtool"),c.h&&c.h!==a.h&&w.m("Cannot share tools between Diagrams: "+c.toString()),c.name=b,c.ae(a.h));a.Je(b)?a.FH(b,c):c!==n&&d.add(c)}w.u(kf,{Qe:"mouseDownTools"},t("dB"));w.u(kf,{$f:"mouseMoveTools"},t("eB"));w.u(kf,{Og:"mouseUpTools"},t("fB"));w.g(kf,"hoverDelay",kf.prototype.aD);
w.defineProperty(kf,{aD:"hoverDelay"},t("QA"),ba("QA"));w.g(kf,"holdDelay",kf.prototype.gz);w.defineProperty(kf,{gz:"holdDelay"},t("PA"),ba("PA"));w.g(kf,"actionTool",kf.prototype.OB);w.defineProperty(kf,{OB:"actionTool"},function(){return this.Je("Action")},function(a){Kh(this,"Action",a,this.Qe)});w.g(kf,"relinkingTool",kf.prototype.TD);w.defineProperty(kf,{TD:"relinkingTool"},function(){return this.Je("Relinking")},function(a){Kh(this,"Relinking",a,this.Qe)});w.g(kf,"linkReshapingTool",kf.prototype.tD);
w.defineProperty(kf,{tD:"linkReshapingTool"},function(){return this.Je("LinkReshaping")},function(a){Kh(this,"LinkReshaping",a,this.Qe)});w.g(kf,"resizingTool",kf.prototype.cE);w.defineProperty(kf,{cE:"resizingTool"},function(){return this.Je("Resizing")},function(a){Kh(this,"Resizing",a,this.Qe)});w.g(kf,"rotatingTool",kf.prototype.gE);w.defineProperty(kf,{gE:"rotatingTool"},function(){return this.Je("Rotating")},function(a){Kh(this,"Rotating",a,this.Qe)});w.g(kf,"linkingTool",kf.prototype.rz);
w.defineProperty(kf,{rz:"linkingTool"},function(){return this.Je("Linking")},function(a){Kh(this,"Linking",a,this.$f)});w.g(kf,"draggingTool",kf.prototype.qe);w.defineProperty(kf,{qe:"draggingTool"},function(){return this.Je("Dragging")},function(a){Kh(this,"Dragging",a,this.$f)});w.g(kf,"dragSelectingTool",kf.prototype.DC);w.defineProperty(kf,{DC:"dragSelectingTool"},function(){return this.Je("DragSelecting")},function(a){Kh(this,"DragSelecting",a,this.$f)});w.g(kf,"panningTool",kf.prototype.MD);
w.defineProperty(kf,{MD:"panningTool"},function(){return this.Je("Panning")},function(a){Kh(this,"Panning",a,this.$f)});w.g(kf,"dragZoomingTool",kf.prototype.Jr);w.defineProperty(kf,{Jr:"dragZoomingTool"},function(){return this.Je("DragZooming")},function(a){Kh(this,"DragZooming",a,this.$f)});w.g(kf,"contextMenuTool",kf.prototype.jC);w.defineProperty(kf,{jC:"contextMenuTool"},function(){return this.Je("ContextMenu")},function(a){Kh(this,"ContextMenu",a,this.Og)});w.g(kf,"textEditingTool",kf.prototype.aw);
w.defineProperty(kf,{aw:"textEditingTool"},function(){return this.Je("TextEditing")},function(a){Kh(this,"TextEditing",a,this.Og)});w.g(kf,"clickCreatingTool",kf.prototype.fC);w.defineProperty(kf,{fC:"clickCreatingTool"},function(){return this.Je("ClickCreating")},function(a){Kh(this,"ClickCreating",a,this.Og)});w.g(kf,"clickSelectingTool",kf.prototype.gC);w.defineProperty(kf,{gC:"clickSelectingTool"},function(){return this.Je("ClickSelecting")},function(a){Kh(this,"ClickSelecting",a,this.Og)});
function gf(){w.ic(this);this.aa=n;this.Mb=new z(R);this.Ab="";this.fi=1;this.sx=q;this.Hg=this.Wj=this.Vj=this.Uj=this.Tj=this.Rj=this.Qj=this.Sj=this.Pj=this.Yj=this.Oj=this.Xj=this.Nj=this.Mj=h;this.oB=[]}w.P("Layer",gf);gf.prototype.ae=ba("aa");
gf.prototype.toString=function(a){a===f&&(a=0);var b='Layer "'+this.name+'"';if(0>=a)return b;for(var c=0,d=0,e=0,g=0,i=0,j=this.Mb.l;j.next();){var k=j.value;k instanceof vf?e++:k instanceof T?d++:k instanceof U?g++:k instanceof mf?i++:c++}j="";0<c&&(j+=c+" Parts ");0<d&&(j+=d+" Nodes ");0<e&&(j+=e+" Groups ");0<g&&(j+=g+" Links ");0<i&&(j+=i+" Adornments ");if(1<a)for(c=this.Mb.l;c.next();)d=c.value,j+="\n    "+d.toString(a-1),(e=d.data)&&w.ec(e)&&(j+=" #"+w.ec(e)),d instanceof T?j+=" "+ke(e):d instanceof
U&&(j+=" "+ke(d.ia)+" "+ke(d.na));return b+" "+this.Mb.count+": "+j};gf.prototype.findObjectAt=gf.prototype.wd=function(a,b,c){b===f&&(b=n);c===f&&(c=n);var d=this.Mb,e=q;this.h.Ua.ua(a)&&(e=h);for(var g=new F,i=d.length;i--;){var j=d.oa(i);if(!(e===h&&j.ge===q)&&j.nb()&&(Za(g.set(a),j.ie),j=j.wd(g,b,c),j!==n&&(b!==n&&(j=b(j)),j&&(c===n||c(j)))))return j}return n};
gf.prototype.findObjectsAt=gf.prototype.Sn=function(a,b,c,d){b===f&&(b=n);c===f&&(c=n);!(d instanceof z)&&!(d instanceof ma)&&(d=new ma(P));var e=this.Mb,g=q;this.h.Ua.ua(a)&&(g=h);for(var i=new F,j=e.length;j--;){var k=e.oa(j);!(g===h&&k.ge===q)&&k.nb()&&(Za(i.set(a),k.ie),k.Sn(i,b,c,d)&&(b!==n&&(k=b(k)),k&&(c===n||c(k))&&d.add(k)))}return d};
gf.prototype.findObjectsIn=gf.prototype.Wl=function(a,b,c,d,e){b===f&&(b=n);c===f&&(c=n);d===f&&(d=q);!(e instanceof z)&&!(e instanceof ma)&&(e=new ma(P));var g=this.Mb,i=q;this.h.Ua.Nl(a)&&(i=h);for(var j=g.length;j--;){var k=g.oa(j);!(i===h&&k.ge===q)&&(k.nb()&&k.Wl(a,b,c,d,e))&&(b!==n&&(k=b(k)),k&&(c===n||c(k))&&e.add(k))}return e};
gf.prototype.findObjectsNear=gf.prototype.Tn=function(a,b,c,d,e){c===f&&(c=n);d===f&&(d=n);!(e instanceof z)&&!(e instanceof ma)&&(e=new ma(P));var g=this.Mb,i=q;this.h.Ua.ua(a)&&(i=h);for(var j=new F,k=g.length;k--;){var l=g.n[k];if(!(i===h&&l.ge===q)&&l.nb()){Za(j.set(a),l.ie);var m=new F(a.x+b,a.y);Za(m,l.ie);l.Tn(j,m,c,d,e)&&(c!==n&&(l=c(l)),l&&(d===n||d(l))&&e.add(l))}}return e};da=gf.prototype;
da.Ge=function(a,b,c){if(this.visible){a.globalAlpha=this.fi;var d=this.Mb,c=c?c:b.Ua,e=[],g=b.scale;if(b.pk)for(var i=d.length,j=0;j<i;j++){var k=d.n[j];k.YA=j;if(k instanceof U&&(Yg(k)&&e.push(k),k.oi===q))continue;var l=k.va;l.Le(c)?(1<l.width*g||1<l.height*g?k.Ge(a,b):Lh(k,a),k.ge=h):k.ge=q}else{i=d.length;for(j=0;j<i;j++)if(k=d.n[j],k.ge){if(k instanceof U&&(Yg(k)&&e.push(k),k.oi===q))continue;l=k.va;1<l.width*g||1<l.height*g?k.Ge(a,b):Lh(k,a)}}this.oB=e;a.globalAlpha=1}};
da.j=function(a,b,c,d,e){var g=this.h;g!==n&&g.Nc(he,a,this,b,c,d,e)};da.Qk=function(a,b,c){var d=this.Mb;b.G=this;if(a>=d.count)a=d.count;else if(d.oa(a)===b)return-1;d.xc(a,b);b.Yr();d=this.h;d!==n&&(c?Mh(d):d.Qk(b));b instanceof vf&&this.Yv(b);return a};da.Kd=function(a,b,c){var d=this.Mb;if(0>a||a>=d.length){if(a=d.indexOf(b),0>a)return-1}else if(d.oa(a)!==b&&(a=d.indexOf(b),0>a))return-1;b.Zr();d.Se(a);d=this.h;d!==n&&(c?Mh(d):d.Kd(b));b.G=n;return a};
da.Yv=function(a){for(;a!==n;){if(a.Ja===this){var b=a;if(b.Fc.next()){for(var c=-1,d=-1,e=this.Mb.n,g=e.length,i=0;i<g;i++){var j=e[i];if(j===b&&(c=i,0<=d))break;if(0>d&&j.bb===b&&(d=i,0<=c))break}!(0>d)&&d<c&&(e=this.Mb,e.Se(c),e.xc(d,b))}}a=a.bb}};da.clear=function(){for(var a=this.Mb.ng(),b=a.length,c=0;c<b;c++)a[c].ge=q,this.Kd(-1,a[c])};w.u(gf,{Xk:"parts"},function(){return this.Mb.l});w.u(gf,{AL:"partsBackwards"},function(){return this.Mb.ao});w.u(gf,{h:"diagram"},t("aa"));w.g(gf,"name",gf.prototype.name);
w.defineProperty(gf,{name:"name"},t("Ab"),function(a){w.k(a,"string",gf,"name");var b=this.Ab;if(b!==a){var c=this.h;if(c!==n){""===b&&w.m("Cannot rename default Layer to: "+a);for(c=c.Ev;c.next();)c.value.name===a&&w.m("Layer.name is already present in this diagram: "+a)}this.Ab=a;this.j("name",b,a);for(a=this.Mb.l;a.next();)a.value.Ld=this.Ab}});w.g(gf,"opacity",gf.prototype.opacity);
w.defineProperty(gf,{opacity:"opacity"},t("fi"),function(a){var b=this.fi;b!==a&&(w.k(a,"number",gf,"opacity"),(0>a||1<a)&&w.ra(a,"0 <= val <= 1",gf,"opacity"),this.fi=a,this.j("opacity",b,a),a=this.h,a!==n&&Mh(a))});w.g(gf,"isTemporary",gf.prototype.yc);w.defineProperty(gf,{yc:"isTemporary"},t("sx"),function(a){var b=this.sx;b!==a&&(w.k(a,"boolean",gf,"isTemporary"),this.sx=a,this.j("isTemporary",b,a))});w.g(gf,"visible",gf.prototype.visible);
w.defineProperty(gf,{visible:"visible"},t("Hg"),function(a){var b=this.Hg;if(b!==a){w.k(a,"boolean",gf,"visible");this.Hg=a;this.j("visible",b,a);for(a=this.Mb.l;a.next();)a.value.updateAdornments();a=this.h;a!==n&&Mh(a)}});w.g(gf,"allowCopy",gf.prototype.pj);w.defineProperty(gf,{pj:"allowCopy"},t("Mj"),function(a){var b=this.Mj;b!==a&&(w.k(a,"boolean",gf,"allowCopy"),this.Mj=a,this.j("allowCopy",b,a))});w.g(gf,"allowDelete",gf.prototype.Dk);
w.defineProperty(gf,{Dk:"allowDelete"},t("Nj"),function(a){var b=this.Nj;b!==a&&(w.k(a,"boolean",gf,"allowDelete"),this.Nj=a,this.j("allowDelete",b,a))});w.g(gf,"allowTextEdit",gf.prototype.Fn);w.defineProperty(gf,{Fn:"allowTextEdit"},t("Xj"),function(a){var b=this.Xj;b!==a&&(w.k(a,"boolean",gf,"allowTextEdit"),this.Xj=a,this.j("allowTextEdit",b,a))});w.g(gf,"allowGroup",gf.prototype.An);
w.defineProperty(gf,{An:"allowGroup"},t("Oj"),function(a){var b=this.Oj;b!==a&&(w.k(a,"boolean",gf,"allowGroup"),this.Oj=a,this.j("allowGroup",b,a))});w.g(gf,"allowUngroup",gf.prototype.Gn);w.defineProperty(gf,{Gn:"allowUngroup"},t("Yj"),function(a){var b=this.Yj;b!==a&&(w.k(a,"boolean",gf,"allowUngroup"),this.Yj=a,this.j("allowUngroup",b,a))});w.g(gf,"allowLink",gf.prototype.Jl);
w.defineProperty(gf,{Jl:"allowLink"},t("Pj"),function(a){var b=this.Pj;b!==a&&(w.k(a,"boolean",gf,"allowLink"),this.Pj=a,this.j("allowLink",b,a))});w.g(gf,"allowRelink",gf.prototype.qj);w.defineProperty(gf,{qj:"allowRelink"},t("Sj"),function(a){var b=this.Sj;b!==a&&(w.k(a,"boolean",gf,"allowRelink"),this.Sj=a,this.j("allowRelink",b,a))});w.g(gf,"allowMove",gf.prototype.Ek);
w.defineProperty(gf,{Ek:"allowMove"},t("Qj"),function(a){var b=this.Qj;b!==a&&(w.k(a,"boolean",gf,"allowMove"),this.Qj=a,this.j("allowMove",b,a))});w.g(gf,"allowPrint",gf.prototype.Ar);w.defineProperty(gf,{Ar:"allowPrint"},t("Rj"),function(a){var b=this.Rj;b!==a&&(w.k(a,"boolean",gf,"allowPrint"),this.Rj=a,this.j("allowPrint",b,a))});w.g(gf,"allowReshape",gf.prototype.Cn);
w.defineProperty(gf,{Cn:"allowReshape"},t("Tj"),function(a){var b=this.Tj;b!==a&&(w.k(a,"boolean",gf,"allowReshape"),this.Tj=a,this.j("allowReshape",b,a))});w.g(gf,"allowResize",gf.prototype.Dn);w.defineProperty(gf,{Dn:"allowResize"},t("Uj"),function(a){var b=this.Uj;b!==a&&(w.k(a,"boolean",gf,"allowResize"),this.Uj=a,this.j("allowResize",b,a))});w.g(gf,"allowRotate",gf.prototype.En);
w.defineProperty(gf,{En:"allowRotate"},t("Vj"),function(a){var b=this.Vj;b!==a&&(w.k(a,"boolean",gf,"allowRotate"),this.Vj=a,this.j("allowRotate",b,a))});w.g(gf,"allowSelect",gf.prototype.je);w.defineProperty(gf,{je:"allowSelect"},t("Wj"),function(a){var b=this.Wj;b!==a&&(w.k(a,"boolean",gf,"allowSelect"),this.Wj=a,this.j("allowSelect",b,a))});
function A(a){function b(a){var b=a.toLowerCase(),c=new z("function");e.add(a,c);e.add(b,c);g.add(a,a);g.add(b,a)}function c(){document.removeEventListener("DOMContentLoaded",c,q);Nh(d)}w.ic(this);w.EA=[];this.sc=h;this.Nf=17;var d=this;document.body!==n?Nh(this):document.addEventListener("DOMContentLoaded",c,q);this.hb=new z(gf);this.wB=this.vB=this.yB=this.xB=this.Kb=this.dk=this.Ea=n;this.rb=(new F(NaN,NaN)).freeze();this.Vb=1;this.lx=(new F(NaN,NaN)).freeze();this.mx=NaN;this.Vt=1E-4;this.Qt=
100;this.Hd=new Wa;this.Pu=(new F(NaN,NaN)).freeze();this.pt=(new G(NaN,NaN,NaN,NaN)).freeze();this.el=Oh;this.jl=Ib;this.mk=Oh;this.Mm=Ib;this.yt=this.xt=Jb;this.$g=new ma(P);this.Zg=h;this.Si=new la(U,G);this.mt=h;this.VE=250;this.UE=1E3;this.Rg=n;this.Us=(new gb(16,16,16,16)).freeze();this.FA=h;this.rn=this.qf=q;this.qp=h;this.oy=q;this.vg=new Wd;this.Kc=new Wd;this.bc=new Wd;this.Qi=n;this.Eu=-1;this.$x=q;this.Vw=new la("string",z);this.Uw=new la("string","string");var e=new la("string",z),g=
new la("string","string");b("BackgroundSingleClicked");b("BackgroundDoubleClicked");b("BackgroundContextClicked");b("ClipboardChanged");b("ClipboardPasted");b("DocumentBoundsChanged");b("ExternalObjectsDropped");b("InitialLayoutCompleted");b("LayoutCompleted");b("LinkDrawn");b("LinkRelinked");b("LinkReshaped");b("ObjectSingleClicked");b("ObjectDoubleClicked");b("ObjectContextClicked");b("PartCreated");b("PartResized");b("PartRotated");b("SelectionMoved");b("SelectionCopied");b("SelectionDeleting");
b("SelectionDeleted");b("SelectionGrouped");b("SelectionUngrouped");b("ChangingSelection");b("ChangedSelection");b("SubGraphCollapsed");b("SubGraphExpanded");b("TextEdited");b("TreeCollapsed");b("TreeExpanded");b("ViewportBoundsChanged");this.Vw=e;this.Uw=g;this.eu=new ma(T);this.Gl=new ma(vf);this.Kt=new ma(U);this.Mb=new ma(R);this.Et=h;this.SA=q;this.Mu=vg;this.Ow=this.Tw=this.Ku=n;this.ft="";this.dp="auto";this.Nh=this.ni=this.$h=this.Yt=this.ai=this.bi=this.ci=this.Mh=this.Ph=this.Lh=n;this.ml=
h;this.Fw=q;this.Lw=n;this.ol=this.ji=this.mA=q;this.Ma=h;this.Ed=n;var i=this;this.aB=function(a){if(a.ba===i.ba&&i.Ma){i.Ma=q;try{var b=a.fd;""===a.Pe&&b===he&&Ph(i,a.object,a.propertyName)}finally{i.Ma=h}}};this.bB=function(a){if(a.ba===i.ba&&i.Ma){i.Ma=q;try{var b=a.fd,c=a.Pe;if(""!==c)if(b===he)if("linkFromKey"===c){var d=a.object,e=i.xf(d);if(e!==n){var g=a.newValue,s=i.Vf(g);e.ia=s}}else if("linkToKey"===c)d=a.object,e=i.xf(d),e!==n&&(g=a.newValue,s=i.Vf(g),e.na=s);else if("linkFromPortId"===
c){if(d=a.object,e=i.xf(d),e!==n){var v=a.newValue;"string"===typeof v&&(e.zi=v)}}else if("linkToPortId"===c)d=a.object,e=i.xf(d),e!==n&&(v=a.newValue,"string"===typeof v&&(e.Lj=v));else if("nodeGroupKey"===c){var d=a.object,y=i.Bj(d);if(y!==n){var C=a.newValue;if(C!==f){var E=i.Vf(C);y.bb=E instanceof vf?E:n}else y.bb=n}}else if("linkLabelKeys"===c){if(d=a.object,e=i.xf(d),e!==n){var I=a.oldValue,D=a.newValue;if(w.isArray(I))for(var M=w.Rb(I),N=0;N<M;N++){var Z=w.Db(I,N),s=i.Vf(Z);s!==n&&(s.xd=n)}if(w.isArray(D)){M=
w.Rb(D);for(N=0;N<M;N++)Z=w.Db(D,N),s=i.Vf(Z),s!==n&&(s.xd=e)}}}else if("nodeParentKey"===c){var wa=a.object,ka=i.Vf(a.newValue),ua=i.Mr(wa);if(ua!==n){var Da=ua.rv();Da!==n?ka===n?i.remove(Da):i.hd?Da.ia=ka:Da.na=ka:Qh(i,ka,ua)}}else if("parentLinkCategory"===c){var wa=a.object,ua=i.Mr(wa),Ha=a.newValue;ua!==n&&"string"===typeof Ha&&(Da=ua.rv(),Da!==n&&(Da.ud=Ha))}else if("nodeCategory"===c){var d=a.object,bb=i.Bj(d),Ha=a.newValue;bb!==n&&"string"===typeof Ha&&(bb.ud=Ha)}else if("linkCategory"===
c){var d=a.object,qb=i.xf(d),Ha=a.newValue;qb!==n&&"string"===typeof Ha&&(qb.ud=Ha)}else if("nodeDataArray"===c){var Xa=a.oldValue;Rh(i,Xa);var Na=a.newValue;Sh(i,Na)}else"linkDataArray"===c&&(Xa=a.oldValue,Rh(i,Xa),Na=a.newValue,Th(i,Na));else if(b===ie)Na=a.newValue,"nodeDataArray"===c&&w.mb(Na)?Uh(i,Na):"linkDataArray"===c&&w.mb(Na)?Vh(i,Na):"linkLabelKeys"===c&&Ie(Na)&&(e=i.xf(a.object),s=i.Vf(Na),e!==n&&s!==n&&(s.xd=e));else if(b===je)Xa=a.oldValue,"nodeDataArray"===c&&w.mb(Xa)?Wh(i,Xa):"linkDataArray"===
c&&w.mb(Xa)?Wh(i,Xa):"linkLabelKeys"===c&&Ie(Xa)&&(s=i.Vf(Xa),s!==n&&(s.xd=n));else{if(b===ge&&"SourceChanged"===c){var y=i.Bj(a.object),fb=a.propertyName;y!==n&&"string"===typeof fb&&(y.vb(fb),i.ba instanceof ze&&(e=i.xf(a.object),e!==n&&e.vb(fb)))}}else if(b===he){var Ya=a.propertyName,d=a.object;if(d===i.ba){if("nodeKeyProperty"===Ya||"nodeCategoryProperty"===Ya||"linkFromKeyProperty"===Ya||"linkToKeyProperty"===Ya||"linkFromPortIdProperty"===Ya||"linkToPortIdProperty"===Ya||"nodeIsLinkLabelProperty"===
Ya||"linkLabelKeysProperty"===Ya||"nodeIsGroupProperty"===Ya||"nodeGroupKeyProperty"===Ya||"nodeParentKeyProperty"===Ya||"linkCategoryProperty"===Ya)i.sa.tb||i.fm()}else Ph(i,d,Ya)}else if(b===ie||b===je){var mb=a.fd===ie,td=mb?a.zf:a.Af,me=mb?a.newValue:a.oldValue,Id=i.sl.qa(a.object);if(Array.isArray(Id))for(a=0;a<Id.length;a++){var Vb=Id[a];"number"===typeof td&&((Vb.type===ah||Vb.type===Xh)&&td++,mb?w.mb(me)&&(Yh(Vb,me,td),Zh(Vb,Vb)):(Vb.Kd(td),Zh(Vb,Vb)))}}else if(b===ge){var Dc=a.propertyName;
if("S"!==Dc[0]){if("CommittingTransaction"!==Dc){if("FinishedUndo"===Dc||"FinishedRedo"===Dc)i.sa.Wh=h,$h(i),i.sa.Wh=q;i.wg&&i.Ha.standardMouseOver();for(var Xd=i.selection.l;Xd.next();)Xd.value.updateAdornments()}i.rn=h;i.Ng();fh(i)}else"StartingFirstTransaction"===Dc&&(!i.Od&&!i.wg)&&(i.rn=h,i.qp&&(i.qf=h),i.Ng())}}finally{i.Ma=h}}};this.Oh=new la(Object,R);this.ek=new la(Object,U);this.sl=new la(Object,Array);this.qk=q;this.Nj=this.Mj=this.Ls=this.Vh=h;this.Ns=this.Ms=q;this.Ss=this.Qs=this.Wj=
this.Vj=this.Uj=this.Tj=this.Rj=this.Qj=this.Sj=this.Pj=this.Ps=this.Yj=this.Oj=this.Xj=h;this.VA=q;this.Rs=this.Os=this.tt=this.st=h;this.su=this.ru=16;this.Rx=this.qu=q;this.Tx=this.Sx=this.lj=this.kj=n;this.he=(new gb(5)).freeze();this.vu=(new ma(R)).freeze();this.Rt=999999999;this.pk=this.ok=this.Th=h;this.Km=this.Jm=q;this.wt=this.vt=0;this.pd=n;this.Ts=h;this.wg=q;this.sd=n;this.lB=1;this.KB=(new G(NaN,NaN,NaN,NaN)).freeze();this.kt=(new G(NaN,NaN,NaN,NaN)).freeze();this.Od=q;this.ku=new ma;
ai(this);this.Jt=this.qt=this.du=this.BA=this.AA=this.CA=this.Yi=this.jk=this.di=n;bi(this);this.xm=this.Ox=this.md=n;this.Qb=new kf;this.Qb.initializeStandardTools();this.Ha=this.gv=this.Qb;this.Uf=new qa;this.ba=new O;this.ji=h;this.Tb=new ci;this.ji=q;a===f&&(a=document.createElement("div"));this.ut=new di;ei(this,a);this.Wq=n;this.Rm=1;this.Ht=0;this.It=new F;this.IB=500;this.hB=q;window.navigator&&0<window.navigator.userAgent.indexOf("534.30")&&(this.hB=h);this.sc=q}w.P("Diagram",A);
function bi(a){a.di=new la("string",R);var b=new T,c=new na;c.bind(new bf("text","",ke));b.add(c);a.CA=b;a.di.add("",b);b=new T;c=new na;c.stroke="brown";c.bind(new bf("text","",ke));b.add(c);a.di.add("Comment",b);b=new T;b.Gj=q;b.Dy=q;c=new V;c.gb="Ellipse";c.fill="black";c.stroke=n;c.wa=new cb(3,3);b.add(c);a.di.add("LinkLabel",b);a.jk=new la("string",vf);b=new vf;b.ws="GROUPPANEL";b.type=fi;c=new na;c.font="bold 12pt sans-serif";c.bind(new bf("text","",ke));b.add(c);c=new x(Xh);c.name="GROUPPANEL";
var d=new V;d.gb="Rectangle";d.fill="rgba(128,128,128,0.2)";d.stroke="black";c.add(d);d=new bh;d.padding=new gb(5,5,5,5);c.add(d);b.add(c);a.AA=b;a.jk.add("",b);a.Yi=new la("string",U);b=new U;c=new V;c.Fi=h;b.add(c);c=new V;c.mm="Standard";c.fill="black";c.stroke=n;c.eb=0;b.add(c);a.BA=b;a.Yi.add("",b);b=new U;c=new V;c.Fi=h;c.stroke="brown";b.add(c);a.Yi.add("Comment",b);b=new mf;b.type=Xh;c=new V;c.fill=n;c.stroke="magenta";c.eb=2;b.add(c);c=new bh;c.margin=new gb(1,1,1,1);b.add(c);a.du=b;a.qt=
b;b=new mf;b.type=Rg;c=new V;c.Fi=h;c.fill=n;c.stroke="magenta";c.eb=0;b.add(c);a.Jt=b}
function Nh(a){var b=document.createElement("p");b.style.width="100%";b.style.height="200px";var c=document.createElement("div");c.style.position="absolute";c.style.visibility="hidden";c.style.width="200px";c.style.height="150px";c.style.overflow="hidden";c.appendChild(b);document.body.appendChild(c);var d=b.offsetWidth;c.style.overflow="scroll";b=b.offsetWidth;d===b&&(b=c.clientWidth);document.body.removeChild(c);a.Nf=d-b}
A.prototype.toString=function(a){a===f&&(a=0);var b="";this.id&&(b=this.id);this.vi&&this.vi.id&&(b=this.vi.id);b='Diagram "'+b+'"';if(0>=a)return b;for(var c=this.hb.l;c.next();)b+="\n  "+c.value.toString(a-1);return b};A.prototype.checkProperties=A.prototype.hJ=function(){return w.WF(this)};A.fromDiv=function(a){var b=a;"string"===typeof a&&(b=document.getElementById(a));return b instanceof HTMLDivElement&&b.aa instanceof A?b.aa:n};w.g(A,"div",A.prototype.vi);
w.defineProperty(A,{vi:"div"},t("Kb"),function(a){a!==n&&w.i(a,HTMLDivElement,A,"div");if(this.Kb!==a){var b=this.Kb;if(b!==n){delete b.aa;b.innerHTML="";this.Ea!==n&&(this.Ea.aa=n,this.Ea.removeEventListener("touchstart",this.EE,q),this.Ea.removeEventListener("touchmove",this.DE,q),this.Ea.removeEventListener("touchend",this.CE,q));b=this.Ku;if(b!==n){for(var c=b.dB,d=c.length,e=0;e<d;e++)c.n[e].cancelWaitAfter();c=b.eB;d=c.length;for(e=0;e<d;e++)c.n[e].cancelWaitAfter();c=b.fB;d=c.length;for(e=
0;e<d;e++)c.n[e].cancelWaitAfter()}b.cancelWaitAfter();this.dk=this.Ea=n;window.removeEventListener("resize",this.uz,q);window.removeEventListener("mousemove",this.mo,h);window.removeEventListener("mousedown",this.lo,h);window.removeEventListener("mouseup",this.oo,h);window.removeEventListener("mousewheel",this.Pg,h);window.removeEventListener("DOMMouseScroll",this.Pg,h);window.removeEventListener("mouseout",this.no,h)}this.Kb=n;if(a!==n){if(b=a.aa)b.vi=n;ei(this,a)}}});
function di(){this.AB=h;this.kI=q;this.mI=212;this.kF="63ad05bbe23a1786468a4c741b6d2e";if(this.kF===this._tk)this.Ti=h;else{var a="p",b=window[w.Oa("76a715b2f73f148a")][w.Oa("72ba13b5")];if(w.Oa("77bb5bb2f32603de")===window[w.Oa("76a715b2f73f148a")][w.Oa("6aba19a7ec351488")])try{this.Ti=!window[w.Oa("4da118b7ec2108")][w.Oa("5bb806bfea351a904a84515e1b6d38b6")][w.Oa("49bc19a1e6")][w.Oa("59bd04a1e6380fa5539b")][w.Oa("7bb8069ae7")]===w.Oa(w.yy);if(this.Ti===q)return;this.Ti=!window[w.Oa("4da118b7ec2108")][w.Oa("5bb806bfea351a904a84515e1b6d38b6")][w.Oa("49bc19a1e6")][w.Oa("59bd04a1e6380fa5539b6c7a197c31bb4cfd3e")][w.Oa("7bb8069ae7")]===
w.Oa(w.yy);if(this.Ti===q)return}catch(c){}for(var d=b[w.Oa("76ad18b4f73e")],e=b[w.Oa("73a612b6fb191d")](w.Oa("35e7"))+2;e<d;e++)a+=b[e];d=a[w.Oa("73a612b6fb191d")](w.Oa(w.yy));if(this.Ti=!(0<d&&d<a[w.Oa("73a612b6fb191d")](w.Oa("35")))){a=document[w.Oa("69bc0fbfe6051381469f4c")];d=a.length;for(e=0;e<d;e++)if(b=a[e][w.Oa("79bb0581f63a1e97")],b!==n){for(var g=b.length,i=0;i<g;i++)if(b[i][w.Oa("69ad1ab6e0221496778e4767")]==w.Oa("02cncncn")){var j=b[i][w.Oa("69bc0fbfe6")][w.Oa("78a704b7e6242f8b53a8507f1b7b")];
if(!j)return;if(-1!==j.indexOf(w.Oa(w.XF))&&-1!==j.indexOf(w.Oa(w.YF))){this.Ti=q;break}}if(this.Ti===q)break}}this.nI=new F(NaN,NaN)}}di.prototype.Is=function(a){a.TE();return 0<this.Ti&&this!==this.AB?h:q};di.prototype.t=di.prototype.hM=function(){this.AB=n};
function ei(a,b){(b===f||b===n)&&w.m("Diagram setup requires an argument DIV.");a.Kb!==n&&w.m("Diagram has already completed setup.");"string"===typeof b?a.Kb=document.getElementById(b):b instanceof HTMLDivElement?a.Kb=b:w.m("No DIV or DIV id supplied: "+b);a.Kb===n&&w.m("Invalid DIV id; could not get element with id: "+b);a.Kb.aa!==f&&w.m("Invalid div id; div already has a Diagram associated with it.");"static"===window.getComputedStyle(a.Kb,n).position&&(a.Kb.style.position="relative");a.Kb.style["-webkit-tap-highlight-color"]=
"rgba(255, 255, 255, 0)";a.Kb.innerHTML="";a.Kb.aa=a;var c=document.createElement("canvas");if(!c.getContext||!c.getContext("2d"))a.Kb.innerHTML="This text is displayed if your browser does not support the Canvas HTML element.";else{c.innerHTML="This text is displayed if your browser does not support the Canvas HTML element.";c.style!==f&&(c.style.position="absolute",c.style.top="0px",c.style.left="0px",c.style.zIndex="2",c.style.nM="none",c.style.webkitUserSelect="none",c.style.MozUserSelect="none");
c.width=a.Kb.clientWidth||1;c.height=a.Kb.clientHeight||1;c.style!==f&&(document.defaultView&&document.defaultView.getComputedStyle)&&(a.xB=parseInt(document.defaultView.getComputedStyle(c,n).paddingLeft,10)||0,a.yB=parseInt(document.defaultView.getComputedStyle(c,n).paddingTop,10)||0,a.vB=parseInt(document.defaultView.getComputedStyle(c,n).borderLeftWidth,10)||0,a.wB=parseInt(document.defaultView.getComputedStyle(c,n).borderTopWidth,10)||0);a.wt=0;a.vt=0;if(document.body){var d=document.body.parentNode;
a.wt=d.offsetTop||0;a.vt=d.offsetLeft||0}else document.addEventListener("load",function(){if(document.body){var b=document.body.parentNode;a.wt=b.offsetTop||0;a.vt=b.offsetLeft||0}},q);c.aa=a;a.Ea=c;a.dk=c.getContext("2d");d=a.dk;a.TE=d[w.Oa("69ad0287f137159745844d7e")][w.Oa("78a118b7")](d,1,0,0,1,0,0);a.kA=d[w.Oa("7eba17a4ca3b1a8346")][w.Oa("78a118b7")](d,w.Is,4,4);a.Kb.insertBefore(c,a.Kb.firstChild);if(a.FA!==n){var d=document.createElement("div"),e=document.createElement("div"),g=document.createElement("div"),
i=document.createElement("div");d.style.position="absolute";d.style.overflow="auto";d.style.width=a.Ea.width+"px";d.style.height=a.Ea.height+"px";d.style.zIndex="1";e.style.position="absolute";e.style.overflow="auto";e.style.width=a.Ea.width+"px";e.style.height=a.Ea.height+"px";e.style.zIndex="1";g.style.position="absolute";g.style.width="1px";g.style.height="1px";i.style.position="absolute";i.style.width="1px";i.style.height="1px";a.Kb.appendChild(d);a.Kb.appendChild(e);d.appendChild(g);e.appendChild(i);
d.onscroll=a.jB;d.onmousedown=a.kB;d.aa=a;d.rB=h;e.onscroll=a.jB;e.onmousedown=a.kB;e.aa=a;e.sB=h;a.kj=d;a.lj=e;a.Sx=g;a.Tx=i}a.preventDefault=function(a){a.preventDefault();return q};a.mo=function(b){if(a.isEnabled){var c=a.Kc;window.TouchEvent&&c.Ui!==n&&c.Ui instanceof window.TouchEvent?(b.preventDefault(),b.simulated=h,a.Wq=b):(a.Kc=a.bc,a.bc=c,gi(a,b,c,h),hi(b,new F,b.target.aa)||(a.Ha.doMouseMove(),a.Ha.isBeyondDragSize()&&ii(a)))}};a.lo=function(b){if(a.isEnabled){var c=a.Kc;if(a.Wq!==n)a.Wq=
b,b.preventDefault();else if(a.Kc=a.bc,a.bc=c,gi(a,b,c,h),c.zj=h,c.Td=b.detail,a.vg=c.copy(),c.Ui.simulated===h)b.preventDefault(),b.simulated=h;else if(u&&u.HD&&(window.HD=a.Sn(c.M)),Hf=n,a.Ha.doMouseDown(),1===b.button)return b.preventDefault(),q}};a.oo=function(b){if(a.isEnabled){var c=a.Kc;a.Wq!==n?(a.Wq=n,b.preventDefault()):(a.Kc=a.bc,a.bc=c,gi(a,b,c,h),c.Ii=h,c.Td=b.detail,c.bubbles=b.bubbles,b.target.aa&&(c.kg=b.target.aa),ji(a,b,new F,c.kg)||(a.Ha.doMouseUp(),Kf(a),ki(a,c,b)))}};a.Pg=function(b){if(a.isEnabled){var c=
a.Kc;a.Kc=a.bc;a.bc=c;gi(a,b,c,h);c.bubbles=h;c.xj=b.wheelDelta!==f?b.wheelDelta:-40*b.detail;a.Ha.doMouseWheel();ki(a,c,b)}};a.no=function(){if(a.isEnabled){var b=a.Ha;b.cancelWaitAfter();b instanceof kf&&b.hideToolTip()}};a.uz=function(){var b=a.Ea,c=a.Kb,d=0;a.Km&&(d=a.Nf);var e=0;a.Jm&&(e=a.Nf);(0===c.clientWidth||0===c.clientHeight)&&w.trace("Diagram div has a width or height of zero");if(c.clientWidth!==b.width+d||c.clientHeight!==b.height+e)a.ok=h,a.Zg=h;a.yb()};a.EE=function(b){if(a.isEnabled){a.$x=
q;if(1<b.touches.length){a.Ha.doCancel();if(a.ml&&w.zB)return b.preventDefault(),b.cancelBubble=h,q;ii(a);b.cancelBubble=q;return h}var c=a.Kc;a.Kc=a.bc;a.bc=c;c.h=a;var d=a.Yg(b.targetTouches[0]);c.jd=a.Gs(d);c.M=d;c.Bh=0;c.button=0;c.zj=h;c.Ii=q;c.Td=1;c.xj=0;c.Xd=q;c.bubbles=q;c.event=b;c.timestamp=Date.now();c.kg=b.target.aa?b.target.aa:n;c.zd=n;a.vg=c.copy();Hf=n;a.Ha.doMouseDown();var e=c.copy();a.Eu=setTimeout(function(){e.button=2;a.N=e;a.$x=h;a.Ha.doMouseUp()},850);ki(a,c,b)}};a.DE=function(b){if(a.isEnabled){if(1<
b.touches.length){a.Ha.doCancel();ii(a);if(a.ml&&w.zB)return b.preventDefault(),b.cancelBubble=h,q;b.cancelBubble=q;return h}var c=a.Kc;a.Kc=a.bc;a.bc=c;var d=n,e,g=n;0<b.changedTouches.length?g=b.changedTouches[0]:0<b.targetTouches.length&&(g=b.targetTouches[0]);c.h=a;c.Td=1;if(g){var d=document.elementFromPoint(g.clientX,g.clientY),i;d&&d.aa?(e=d.aa.Yg(g),i=d.aa):(e=a.Yg(b.changedTouches[0]),i=a);c.M=e;c.jd=i.Gs(e);e=new F(g.screenX,g.screenY);i=a.It;b.timeStamp-a.Ht<a.IB&&!(25<Math.abs(i.x-e.x)||
25<Math.abs(i.y-e.y))?a.Rm++:a.Rm=1;c.Td=a.Rm;a.Ht=b.timeStamp;a.It=e}else a.Kc!==n?(c.M=a.Kc.M,c.jd=a.Kc.jd,d=a.Kc.kg):a.vg!==n&&(c.M=a.vg.M,c.jd=a.vg.jd,d=a.vg.kg);c.Bh=0;c.button=0;c.zj=q;c.Ii=q;c.xj=0;c.Xd=q;c.bubbles=q;c.event=b;c.timestamp=Date.now();c.kg=d===n?b.target.aa:d.aa?d.aa:n;c.zd=n;a.Ha.isBeyondDragSize()&&ii(a);if(!hi(g?g:b,new F,c.kg))a.Ha.doMouseMove(),ki(a,c,b)}};a.CE=function(b){if(a.isEnabled){ii(a);if(a.$x)return b.preventDefault(),q;var c=a.Kc;a.Kc=a.bc;a.bc=c;if(!(1<b.touches.length)){var d=
n,e,g=n;0<b.changedTouches.length?g=b.changedTouches[0]:0<b.targetTouches.length&&(g=b.targetTouches[0]);c.h=a;c.Td=1;if(g){var d=document.elementFromPoint(g.clientX,g.clientY),i;d&&d.aa?(e=d.aa.Yg(g),i=d.aa):(e=a.Yg(b.changedTouches[0]),i=a);c.M=e;c.jd=i.Gs(e);e=new F(g.screenX,g.screenY);i=a.It;b.timeStamp-a.Ht<a.IB&&!(25<Math.abs(i.x-e.x)||25<Math.abs(i.y-e.y))?a.Rm++:a.Rm=1;c.Td=a.Rm;a.Ht=b.timeStamp;a.It=e}else a.Kc!==n?(c.M=a.Kc.M,c.jd=a.Kc.jd,d=a.Kc.kg):a.vg!==n&&(c.M=a.vg.M,c.jd=a.vg.jd,d=
a.vg.kg);c.Bh=0;c.button=0;c.zj=q;c.Ii=h;c.xj=0;c.Xd=q;c.bubbles=q;c.event=b;c.timestamp=Date.now();c.kg=d===n?b.target.aa:d.aa?d.aa:n;c.zd=n;if(!ji(a,g?g:b,new F,c.kg))a.Ha.doMouseUp(),ki(a,c,b)}}};c.addEventListener("touchstart",a.EE,q);c.addEventListener("touchmove",a.DE,q);c.addEventListener("touchend",a.CE,q);c.addEventListener("gesturestart",function(){a.ml!==q&&(a.lB=a.scale,a.Ha.doCancel())},q);c.addEventListener("gesturechange",function(b){if(a.ml!==q){var c=a.Yg(b),d=a.cl;a.cl=c;a.scale=
a.lB*b.scale;a.cl=d}},q);c.addEventListener("mousemove",a.mo,q);c.addEventListener("mousedown",a.lo,q);c.addEventListener("mouseup",a.oo,q);c.addEventListener("mousewheel",a.Pg,q);c.addEventListener("DOMMouseScroll",a.Pg,q);c.addEventListener("mouseout",a.no,q);c.addEventListener("keydown",a.VG,q);c.addEventListener("keyup",a.WG,q);c.addEventListener("selectstart",function(a){a.preventDefault();return q},q);c.addEventListener("contextmenu",function(a){a.preventDefault();return q},q);window.addEventListener("resize",
a.uz,q);c.tabIndex=0;li(a)}}A.prototype.focus=A.prototype.focus=function(){this.Ea.focus()};function li(a,b){b===f&&(b=a.dk);b.Dw="";b.om="";b.nm=""}function ai(a){var b=new gf;b.name="Background";a.vr(b);b=new gf;b.name="";a.vr(b);b=new gf;b.name="Foreground";a.vr(b);b=new gf;b.name="Adornment";b.yc=h;a.vr(b);b=new gf;b.name="Tool";b.yc=h;a.vr(b);b=new gf;b.name="Grid";b.je=q;b.yc=h;a.wF(b,a.Vl("Background"))}
function ti(a){a.md=new x(ui);a.md.name="GRID";var b=new V;b.gb="LineH";b.stroke="lightgray";b.eb=0.5;b.Ai=1;a.md.add(b);b=new V;b.gb="LineH";b.stroke="gray";b.eb=0.5;b.Ai=5;a.md.add(b);b=new V;b.gb="LineH";b.stroke="gray";b.eb=1;b.Ai=10;a.md.add(b);b=new V;b.gb="LineV";b.stroke="lightgray";b.eb=0.5;b.Ai=1;a.md.add(b);b=new V;b.gb="LineV";b.stroke="gray";b.eb=0.5;b.Ai=5;a.md.add(b);b=new V;b.gb="LineV";b.stroke="gray";b.eb=1;b.Ai=10;a.md.add(b);b=new R;b.add(a.md);b.Ld="Grid";b.zv=q;b.ND=q;b.Fv="GRID";
a.add(b);a.Mb.remove(b);a.md.visible=q}
A.prototype.jB=function(){var a=this.aa;if(a.Rx){a.qu=h;var b=a.vc,c=a.Ua,d=b.width,e=c.width,g=b.height,i=c.height,j=b.right,k=c.right,l=b.bottom,m=c.bottom,p=b.x,r=c.x,b=b.y,c=c.y,s=a.scale;e<d||i<g?(this.rB&&a.rf?a.position=new F(this.scrollLeft/s+p,a.position.y):this.sB&&a.sf&&(a.position=new F(a.position.x,this.scrollTop/s+b)),vi(a),Mh(a),a.qu=q,a.ok=q):(this.rB&&a.rf&&(p<r&&(a.position=new F(this.scrollLeft+p,a.position.y)),j>k&&(a.position=new F(-(a.kj.scrollWidth-a.Ea.width)+this.scrollLeft-
a.Ea.width/s+a.vc.right,a.position.y))),this.sB&&a.sf&&(b<c&&(a.position=new F(a.position.x,this.scrollTop+b)),l>m&&(a.position=new F(a.position.x,-(a.lj.scrollHeight-a.Ea.height)+this.scrollTop-a.Ea.height/s+a.vc.bottom))),vi(a),a.qu=q,a.ok=q,Mh(a),b=a.vc,c=a.Ua,j=b.right,k=c.right,l=b.bottom,m=c.bottom,p=b.x,r=c.x,b=b.y,c=c.y,e>=d&&(p>=r&&j<=k)&&(a.Sx.style.width="1px"),i>=g&&(b>=c&&l<=m)&&(a.Tx.style.height="1px"))}};A.prototype.kB=function(){this.aa.Rx=h};
A.prototype.computeBounds=A.prototype.ne=function(){0<this.$g.count&&$h(this);if(this.Rr.T()){var a=this.Rr.copy();a.wr(this.padding);return a}for(var b=h,c=this.hb,d=c.length,e=0;e<d;e++){var g=c.n[e];if(g.visible&&!g.yc)for(var g=g.Mb,i=g.length,j=0;j<i;j++){var k=g.n[j];k.zv&&k.nb()&&(k=k.va,k.T()&&(b?(b=q,a=k.copy()):a.Hi(k)))}}b&&(a=new G(0,0,0,0));a.wr(this.padding);return a};
A.prototype.computePartsBounds=A.prototype.oJ=function(a){for(var b=n,a=a.l;a.next();){var c=a.value;c instanceof U||(c.xi(),b===n?b=c.va.copy():b.Hi(c.va))}return b===n?new G(NaN,NaN,0,0):b};function wi(a,b){if((b||a.wg)&&!a.sc&&a.vc.T()){a.sc=h;var c=a.el;b&&a.mk!==Oh&&(c=a.mk);var d=c!==Oh?xi(a,c):a.scale,c=a.Ua.copy(),e=a.Ea.width/d,g=a.Ea.height/d;a.position.Ia();var i=a.jl;b&&rb(a.Mm)&&(i=a.Mm);yi(a,a.rb,a.vc,e,g,i);a.position.freeze();a.scale=d;a.sc=q;d=a.Ua;d.yi(c)||a.os(c,d)}}
function xi(a,b){a.Th&&zi(a,a.ne());var c=a.vc;if(!c.T())return 1;var d=c.width,c=c.height,e=a.Ea.width,g=a.Ea.height,i=e/d,j=g/c,k=1;return b===Ai?(k=Math.min(j,i),1<k&&(k=1),k):b===Bi?(k=j>i?(g-a.Nf)/c:(e-a.Nf)/d,1<k&&(k=1),k):a.scale}A.prototype.zoomToFit=A.prototype.QE=function(){this.scale=xi(this,Ai);this.yb()};
A.prototype.zoomToRect=A.prototype.iI=function(a){var b=a.width,c=a.height;if(!(0===b||0===c||isNaN(b)&&isNaN(c))){var d=1,d=isNaN(b)?this.Ua.height*this.scale/c:isNaN(c)?this.Ua.width*this.scale/b:Math.max(this.Ua.height*this.scale/c,this.Ua.width*this.scale/b);this.scale=Math.min(d,this.Ah);this.position=new F(a.x,a.y)}};
A.prototype.alignDocument=A.prototype.xI=function(a,b){this.Th&&zi(this,this.ne());var c=this.vc,d=this.Ua,e=this.sc;this.sc=h;this.position=new F(c.x+(a.x*c.width+a.offsetX)-(b.x*d.width-b.offsetX),c.y+(a.y*c.height+a.offsetY)-(b.y*d.height-b.offsetY));this.sc=e;Mh(this);this.Od||this.yb()};
function yi(a,b,c,d,e,g){rb(g)&&(d>c.width&&(b.x=c.x+(g.x*c.width+g.offsetX)-(g.x*d-g.offsetX)),e>c.height&&(b.y=c.y+(g.y*c.height+g.offsetY)-(g.y*e-g.offsetY)));d<c.width?(g=b.x+d/2,g=Math.min(g,c.right-d/2),g=Math.max(g,c.left+d/2),b.x=g-d/2):b.x>c.left?b.x=c.left:b.x<c.right-d&&(b.x=c.right-d);e<c.height?(d=b.y+e/2,d=Math.min(d,c.bottom-e/2),d=Math.max(d,c.top+e/2),b.y=d-e/2):b.y>c.top?b.y=c.top:b.y<c.bottom-e&&(b.y=c.bottom-e);isFinite(b.x)||(b.x=-a.padding.left);isFinite(b.y)||(b.y=-a.padding.top)}
A.prototype.findPartAt=A.prototype.Nr=function(a,b){var c=b?hg(this,a,function(a){return a.ca},function(a){return a.Hk()}):this.wd(a,function(a){return a.ca});return c instanceof R?c:n};A.prototype.findObjectAt=A.prototype.wd=function(a,b,c){b===f&&(b=n);c===f&&(c=n);var d=this.hb.ao;for($h(this);d.next();){var e=d.value;if(e.visible&&(e=e.wd(a,b,c),e!==n))return e}return n};
function hg(a,b,c,d){c===f&&(c=n);d===f&&(d=n);var e=a.hb.ao;for($h(a);e.next();)if(a=e.value,a.visible&&!a.yc&&(a=a.wd(b,c,d),a!==n))return a;return n}A.prototype.findObjectsAt=A.prototype.Sn=function(a,b,c,d){b===f&&(b=n);c===f&&(c=n);if(!(d instanceof z)||!(d instanceof ma))d=new ma(P);$h(this);for(var e=this.hb.ao;e.next();){var g=e.value;g.visible&&g.Sn(a,b,c,d)}return d};
A.prototype.findObjectsIn=A.prototype.Wl=function(a,b,c,d,e){b===f&&(b=n);c===f&&(c=n);d===f&&(d=q);if(!(e instanceof z)||!(e instanceof ma))e=new ma(P);$h(this);for(var g=this.hb.ao;g.next();){var i=g.value;i.visible&&i.Wl(a,b,c,d,e)}return e};A.prototype.findObjectsNear=A.prototype.Tn=function(a,b,c,d,e){c===f&&(c=n);d===f&&(d=n);!(e instanceof z)&&!(e instanceof ma)&&(e=new ma(P));$h(this);for(var g=this.hb.ao;g.next();){var i=g.value;i.visible&&i.Tn(a,b,c,d,e)}return e};
function ii(a){-1!==a.Eu&&(clearTimeout(a.Eu),a.Eu=-1)}function gi(a,b,c,d){c.h=a;d?(d=a.Yg(b),c.jd=a.Gs(d),c.M=d):(c.jd=a.bc.jd,c.M=a.bc.M);a=0;b.ctrlKey&&(a+=1);b.altKey&&(a+=2);b.shiftKey&&(a+=4);c.Bh=a;c.button=b.button;c.zj=q;c.Ii=q;c.Td=1;c.xj=0;c.Xd=q;c.bubbles=q;c.event=b;c.timestamp=Date.now();c.kg=b.target.aa?b.target.aa:n;c.zd=n}
function ki(a,b,c){if(b.bubbles)return u&&(u.trace&&u.YC)&&u.trace("NOT handled "+c.type+" "+b.toString()),h;u&&(u.trace&&u.YC)&&u.trace("handled "+c.type+" "+a.Ha.name+" "+b.toString());c.stopPropagation!==f&&c.stopPropagation();c.preventDefault!==f&&c.preventDefault();c.cancelBubble=h;return q}
A.prototype.VG=function(a){if(this.aa.isEnabled){var b=this.aa.bc;gi(this.aa,a,b,q);b.key=String.fromCharCode(a.which);b.zj=h;switch(a.which){case 33:b.key="PageUp";break;case 34:b.key="PageDown";break;case 35:b.key="End";break;case 36:b.key="Home";break;case 37:b.key="Left";break;case 38:b.key="Up";break;case 39:b.key="Right";break;case 40:b.key="Down";break;case 45:b.key="Insert";break;case 46:b.key="Del";break;case 48:b.key="0";break;case 187:b.key="Add";break;case 189:b.key="Subtract";break;case 107:b.key=
"Add";break;case 109:b.key="Subtract";break;case 27:b.key="Esc"}this.aa.Ha.doKeyDown();return(187===a.which||189===a.which||48===a.which||107===a.which||109===a.which)&&a.ctrlKey===h?(a.cancelBubble=h,a.preventDefault!==f?a.preventDefault():a.returnValue=q,Event.stop&&(w.m("Event.stop can fire for this browser"),Event.stop(a)),a.stopPropagation!==f&&a.stopPropagation(),q):ki(this.aa,b,a)}};
A.prototype.WG=function(a){if(this.aa.isEnabled){var b=this.aa.bc;gi(this.aa,a,b,q);b.key=String.fromCharCode(a.which);b.Ii=h;switch(a.which){case 33:b.key="PageUp";break;case 34:b.key="PageDown";break;case 35:b.key="End";break;case 36:b.key="Home";break;case 37:b.key="Left";break;case 38:b.key="Up";break;case 39:b.key="Right";break;case 40:b.key="Down";break;case 45:b.key="Insert";break;case 46:b.key="Del"}this.aa.Ha.doKeyUp();return ki(this.aa,b,a)}};
A.prototype.Yg=function(a){if(this.Fw){var b=this.Ea,c=0,d=0;if(b.offsetParent!==f){do c+=b.offsetLeft+b.clientLeft,d+=b.offsetTop+b.clientTop;while(b=b.offsetParent)}c+=this.xB+this.vB+this.vt;d+=this.yB+this.wB+this.wt;b=a.pageX-c;a=a.pageY-d;this.Hd!==n&&(a=new F(b,a),Za(a,this.Hd),b=a.x,a=a.y);return new F(b,a)}b=this.Ea;c=b.getBoundingClientRect();d=a.clientX-c.left*(b.width/c.width);a=a.clientY-c.top*(b.height/c.height);this.Hd!==n&&(a=new F(d,a),Za(a,this.Hd),d=a.x,a=a.y);return new F(d,a)};
w.g(A,"alternateCoordinates",A.prototype.HF);w.defineProperty(A,{HF:n},t("Fw"),function(a){w.k(a,"boolean",A,"alternateCoordinates");this.Fw=a});A.prototype.invalidateDocumentBounds=A.prototype.Bi=function(){if(!this.Od&&(Ci(this),this.oy===q)){this.oy=h;var a=this;requestAnimationFrame(function(){a.Ea===n||a.qf===h||(fh(a),a.oy=q)})}};function fh(a){a.Od||$h(a);a.Th&&zi(a,a.ne());wi(a);!a.sc&&a.ok&&Di(a);for(a=a.ku.l;a.next();)fh(a.value)}
A.prototype.redraw=A.prototype.HL=function(){!this.sc&&!this.Od&&(Mh(this),Ei(this),vi(this),Ci(this),this.Ng())};A.prototype.isUpdateRequested=A.prototype.cL=t("qf");A.prototype.delayInitialization=A.prototype.DJ=function(a){this.update();this.wg=q;a&&setTimeout(a,1)};A.prototype.requestUpdate=A.prototype.yb=function(a){a===f&&(a=q);if(!(this.sc||a===q&&this.Od)&&this.qf===q){this.qf=h;var b=this;requestAnimationFrame(function(){b.qf&&b.Ng()})}};
A.prototype.maybeUpdate=A.prototype.Ng=function(){if(!this.qp||this.qf)this.qp&&(this.qp=q),this.update()};
A.prototype.update=A.prototype.update=function(){if(!(this.Kb===n||this.Od)){this.Od=h;this.uz();this.qf=q;$h(this);var a=q;if(!this.wg||this.rn&&this.Ts)Fi(this),this.rn=q,a=h;$h(this);this.vc.T()||zi(this,this.ne());if(a){if(!this.wg){if(this.mk!==Oh)this.scale=xi(this,this.mk);else if(this.el!==Oh)this.scale=xi(this,this.el);else{var b=this.dD;isFinite(b)&&0<b&&(this.scale=b)}this.Th&&zi(this,this.ne());b=this.cD;if(b.T())this.position=b;else{b=new F;b.yo(this.vc,this.bD);var c=this.Ua,c=new G(0,
0,c.width,c.height),d=new F;d.yo(c,this.eD);this.position=new F(b.x-d.x,b.y-d.y);wi(this,h)}this.ya("InitialLayoutCompleted");b=this.sa;b!==n&&b.clear();Gi(this)}this.ya("LayoutCompleted")}$h(this);!this.sc&&this.ok&&!Di(this)&&(Di(this),$h(this));a&&!this.wg&&(this.wg=h);this.Ge();this.Od=q}};
function $h(a){for(var b=0;23>b;b++){var c=a.$g.l;if(c===n||0===a.$g.count)break;a.$g=new ma(P);var d=a,e=a.$g;for(c.reset();c.next();){var g=c.value;g.Yd()&&!(g instanceof vf)&&(g.Rk()?(Hh(g,Infinity,Infinity),g.Cc()):e.add(g))}for(c.reset();c.next();)g=c.value,g instanceof vf&&Hi(d,g);for(c.reset();c.next();)d=c.value,d instanceof U&&(d.Rk()?(Hh(d,Infinity,Infinity),d.Cc(),d.Gv()):e.add(d));for(c.reset();c.next();)d=c.value,d instanceof mf&&(d.Rk()?(Hh(d,Infinity,Infinity),d.Cc()):e.add(d))}}
function Hi(a,b){for(var c=b.Fc,d=[];c.next();){var e=c.value;e instanceof vf?(e.ac||e.Ic||e.Wi)&&Hi(a,e):e instanceof U?d.push(e):(Hh(e,Infinity,Infinity),e.Cc())}c=d.length;for(e=0;e<c;e++){var g=d[e];Hh(g,Infinity,Infinity);g.Cc()}Hh(b,Infinity,Infinity);b.Cc()}
A.prototype.Ge=function(a){this.Kb===n&&w.m("No div specified");var b=this.Ea;b===n&&w.m("No canvas specified");a||(a=this.dk);var c=a!==this.dk;if(c)li(this),vi(this);else if(!this.Zg)return;if(0<this.Si.count){for(var d=this.Si.l;d.next();)Sg(d.key,d.value);this.Si.clear()}this.hB?(b.width=b.width,li(this)):(a.setTransform(1,0,0,1,0,0),a.clearRect(0,0,b.width,b.height));b=this.Hd;b.reset();1!==this.Vb&&b.scale(this.Vb);d=this.rb;(0!==d.x||0!==d.y)&&b.translate(-d.x,-d.y);a.setTransform(b.m11,b.m12,
b.m21,b.m22,b.dx,b.dy);u&&u.dC&&(a.fillStyle="red",a.fillRect(0,0,8,8),a.lineWidth=8,a.strokeStyle="rgba(255,255,0,.6)",b=this.Ua,a.strokeRect(b.x,b.y,b.width,b.height),a.fillStyle="rgba(0,255,0,.2)",a.fillRect(this.vc.x,this.vc.y,this.vc.width,this.vc.height));b=this.hb.length;for(d=0;d<b;d++)this.hb.n[d].Ge(a,this);this.ut?this.ut.Is(this)&&this.kA():this.Yg=aa();c?(li(this),vi(this)):this.Zg=this.pk=q};
function Ii(a,b,c,d,e,g,i,j,k){a.Kb===n&&w.m("No div specified");a.Ea===n&&w.m("No canvas specified");li(a);vi(a);if(0<a.Si.count){for(var l=a.Si.l;l.next();)Sg(l.key,l.value);a.Si.clear()}b.setTransform(1,0,0,1,0,0);b.clearRect(0,0,d.width,d.height);j&&(b.fillStyle=j,b.fillRect(0,0,d.width,d.height));j=new Wa;j.translate(c.left,c.top);j.scale(e);(0!==g.x||0!==g.y)&&j.translate(-g.x,-g.y);b.setTransform(j.m11,j.m12,j.m21,j.m22,j.dx,j.dy);c=f;g&&(d&&e)&&(c=new G(g.x,g.y,d.width/e,d.height/e));if(i){k=
i.l;for(k.reset();k.next();)c=k.value,c instanceof R&&c.Ge(b,a)}else{d=a.hb.length;for(e=0;e<d;e++)if(k){if(g=a.hb.n[e],i=b,j=a,g.visible&&!g.yc){var l=g.Mb,m=f,m=c?c:j.Ua,p=[];if(j.pk)for(var r=l.length,s=0;s<r;s++){var v=l.n[s];v.YA=s;if(v instanceof U&&(Yg(v)&&p.push(v),v.oi===q))continue;v.va.Le(m)?(v.yc||v.Ge(i,j),v.ge=h):v.ge=q}else{r=l.length;for(s=0;s<r;s++)if(v=l.n[s],v.ge){if(v instanceof U&&(Yg(v)&&p.push(v),v.oi===q))continue;v.yc||v.Ge(i,j)}}g.oB=p}}else a.hb.n[e].Ge(b,a,c)}a.ut?a.ut.Is(a)&&
a.kA():a.Yg=aa();li(a);vi(a)}function Ci(a){if(a.Th===q||a.qf===q)a.Th=h,a.yb()}
function Mh(a,b,c){if(a.Zg===q&&(b===f||a.Ua.Le(b)))a.Zg=h,c&&a instanceof Ji?!a.sc&&!a.Od&&a.qf===q&&(a.qf=h,requestAnimationFrame(function(){if(a.qf&&!(a.Kb===n||a.Od)){a.Od=h;a.qf=q;$h(a);a.vc.T()||zi(a,a.ne());a.Kb===n&&w.m("No div specified");a.Ea===n&&w.m("No canvas specified");if(a.Zg&&a.ei!==n){var b=a.dk,c=a.ey;b.setTransform(1,0,0,1,0,0);b.clearRect(0,0,a.Ea.width,a.Ea.height);b.drawImage(c,0,0);c=a.Hd;c.reset();1!==a.Vb&&c.scale(a.scale);(0!==a.position.x||0!==a.position.y)&&c.translate(-a.rb.x,
-a.rb.y);b.setTransform(c.m11,c.m12,c.m21,c.m22,c.dx,c.dy);for(var c=a.hb.length,d=0;d<c;d++)a.hb.n[d].Ge(b,a);a.pk=q;a.Zg=q}a.Od=q}})):a.yb();for(var d=a.ku.l;d.next();)Mh(d.value,b,c)}function Ei(a){a.ok===q&&(a.ok=h)}function vi(a){a.pk===q&&(a.pk=h)}
function Di(a){var b=a.Ea;if(b!==n){var c=a.Kb,d=b.width,e=b.height,g=a.KB.copy(),i=q,j=0,k=0;a.Km&&(j=a.Nf);a.Jm&&(k=a.Nf);var l=c.clientWidth,c=c.clientHeight;if(l!==b.width+j||c!==b.height+k)a.Km=q,a.Jm=q,b.width=l,b.height=c,i=h;a.ok=q;if(!a.FA||a.qu)(d!==b.width||e!==b.height)&&a.Ng();else{var m=a.Ua,p=a.vc,j=p.width,k=p.height,r=m.width,s=m.height,v=p.x,y=m.x,C=p.right,E=m.right,I=p.y,D=m.y,M=p.bottom,N=m.bottom,p=m="1px",Z=a.scale;l/Z>j&&c/Z>k||(a.ZC&&a.rf&&(r+1<j?(m=(j-r)*Z+b.width+"px",a.kj.scrollLeft=
(a.position.x-v)*Z):v+1<y?(m=(y-v)*Z+b.width+"px",a.kj.scrollLeft=a.kj.scrollWidth-a.kj.clientWidth):C>E+1&&(m=(C-E)*Z+b.width+"px",a.kj.scrollLeft=a.position.x*Z)),a.$C&&a.sf&&(s+1<k?(p=(k-s)*Z+b.height+"px",a.lj.scrollTop=(a.position.y-I)*Z):I+1<D?(p=(D-I)*Z+b.height+"px",a.lj.scrollTop=a.lj.scrollHeight-a.lj.clientHeight):M>N+1&&(p=(M-N)*Z+b.height+"px",a.lj.scrollTop=a.position.y*Z)));l="1px"!==m;c="1px"!==p;l!==a.Jm&&(b.height="1px"===m?b.height+a.Nf:b.height-a.Nf,i=h);a.Jm=l;a.Sx.style.width=
m;c!==a.Km&&(b.width="1px"===p?b.width+a.Nf:b.width-a.Nf,i=h);a.Km=c;a.Tx.style.height=p;i&&li(a);l=b.width;c=b.height;a.lj.style.height=c+"px";a.lj.style.width=a.Km?l+a.Nf+"px":l+"px";a.kj.style.width=l+"px";a.kj.style.height=a.Jm?c+a.Nf+"px":c+"px";a.Rx=q;return d!==b.width||e!==b.height?(m=a.Ua,a.os(g,m,i?h:f),a.Ng(),q):h}}}
function Ki(a,b){for(var c=a.hb,d=c.count,e=0;e<d;e++)c.oa(e).name===b&&w.m("Cannot add layer with the name '"+b+"', a layer of the same name is already present in this diagram.")}w.g(A,"addsToTemporaryLayer",A.prototype.zr);w.defineProperty(A,{zr:n},t("mA"),function(a){w.k(a,"boolean",A,"addsToTemporaryLayer");this.mA=a});
A.prototype.add=A.prototype.add=function(a){w.i(a,R,A,"add:part");var b=a.h;if(b!==this){b!==n&&w.m("Cannot add part "+a.toString()+" to "+this.toString()+". It is already a part of "+b.toString());var c=this.zr?"Tool":a.Ld,b=this.Vl(c);b===n&&(b=this.Vl(""));b===n&&w.m('Cannot add a Part when unable find a Layer named "'+c+'" and there is no default Layer');a.Ja!==b&&(c=a.h===this?b.Qk(99999999,a,h):b.Qk(99999999,a),0<=c&&this.Nc(ie,"parts",b,n,a,n,c),this.Bi(),a.F(Li),c=a.bo,c!==n&&c(a,n,b))}};
A.prototype.Qk=function(a){if(a instanceof T){if(this.eu.add(a),a instanceof vf){var b=a.bb;b===n?this.Gl.add(a):b.Ym.add(a);b=a.Tb;b!==n&&(b.h=this)}}else a instanceof U?this.Kt.add(a):a instanceof mf||this.Mb.add(a);if(b=a.data){a instanceof mf||(a instanceof U?this.ek.add(b,a):this.Oh.add(b,a));var c=this;Mi(a,a,function(a){Ni(c,a)})}(a.Ic===h||a.Wi===h)&&this.$g.add(a);Oi(a,h);a.nb()&&(Mh(this),Ci(this))};
A.prototype.Kd=function(a){if(a instanceof T){if(this.eu.remove(a),a instanceof vf){var b=a.bb;b===n?this.Gl.remove(a):b.Ym.remove(a);b=a.Tb;b!==n&&(b.h=n)}}else a instanceof U?this.Kt.remove(a):a instanceof mf||this.Mb.remove(a);if(b=a.data){a instanceof mf||(a instanceof U?this.ek.remove(b):this.Oh.remove(b));var c=this;Mi(a,a,function(a){Pi(c,a)})}this.$g.remove(a);a.nb()&&(Mh(this),Ci(this))};
A.prototype.remove=A.prototype.remove=function(a){w.i(a,R,A,"remove:part");a.Qa=q;var b=a.Ja;if(b!==n&&b.h===this){a.F(Qi);a.Ql();var c=b.Kd(-1,a);0<=c&&this.Nc(je,"parts",b,a,n,c,n);c=a.bo;c!==n&&c(a,b,n);this.Bi();this.Ha.standardMouseOver()}};A.prototype.removeParts=A.prototype.Iz=function(a,b){for(var c=a.l;c.next();){var d=c.value;d.h===this&&(!b||d.canDelete())&&this.remove(d)}};A.prototype.copyParts=A.prototype.Ln=function(a,b,c){return this.Uf.copyParts(a,b,c)};
A.prototype.moveParts=A.prototype.hH=function(a,b,c){var d=this.Qb;if(d!==n&&(d=d.qe,d!==n)){for(var e=new la(R,Object),a=a.l;a.next();){var g=a.value;g instanceof U?e.add(g,Jf()):e.add(g,Jf(g.location))}d.moveParts(e,b,c)}};A.prototype.addLayer=A.prototype.vr=function(a){w.i(a,gf,A,"addLayer:layer");Ki(this,a.name);a.ae(this);var b=this.hb,c=b.count-1;if(!a.yc)for(;0<=c&&b.oa(c).yc;)c--;b.xc(c+1,a);this.Ed!==n&&this.Nc(ie,"layers",this,n,a,n,c+1);Ci(this)};
A.prototype.addLayerBefore=A.prototype.wF=function(a,b){w.i(a,gf,A,"addLayer:layer");w.i(b,gf,A,"addLayerBefore:existingLayer");Ki(this,a.name);a.ae(this);for(var c=q,d=this.hb.count,e=0;e<d;e++)if(this.hb.oa(e)===b){this.hb.xc(e,a);c=h;break}c||w.m("addLayerBefore: Existing layer "+b.toString()+" not found.");this.Ed!==n&&this.Nc(ie,"layers",this,n,a,n,e);Ci(this)};
A.prototype.addLayerAfter=A.prototype.tI=function(a,b){w.i(a,gf,A,"addLayer:layer");w.i(b,gf,A,"addLayerAfter:existingLayer");Ki(this,a.name);a.ae(this);for(var c=q,d=this.hb.count,e=0;e<d;e++)if(this.hb.oa(e)===b){this.hb.xc(e+1,a);c=h;break}c||w.m("addLayerAfter: Existing layer "+b.toString()+" not found.");this.Ed!==n&&this.Nc(ie,"layers",this,n,a,n,e+1);Ci(this)};function Ri(a,b,c){w.i(b,gf,A,"addLayer:layer");Ki(a,b.name);b.ae(a);a.hb.xc(c,b);a.Ed!==n&&a.Nc(ie,"layers",a,n,b,n,c);Ci(a)}
A.prototype.removeLayer=A.prototype.VD=function(a){if(""!==a.name){var b=this.hb.indexOf(a);if(this.hb.remove(a)){for(var c=a.Mb.copy().l;c.next();){var d=c.value,e=d.Ld;d.Ld="";e!==a.name&&(d.Ld=e)}this.Ed!==n&&this.Nc(je,"layers",this,a,n,b,n);Ci(this)}}};A.prototype.findLayer=A.prototype.Vl=function(a){for(var b=this.Ev;b.next();){var c=b.value;if(c.name===a)return c}return n};
A.prototype.addChangedListener=A.prototype.xy=function(a){w.k(a,"function",A,"addChangedListener:listener");this.Qi===n&&(this.Qi=new z("function"));this.Qi.add(a)};A.prototype.removeChangedListener=A.prototype.Hz=function(a){w.k(a,"function",A,"removeChangedListener:listener");this.Qi!==n&&(this.Qi.remove(a),0===this.Qi.count&&(this.Qi=n))};A.prototype.Vu=function(a){this.ub||this.sa.XC(a);if(this.Qi!==n)for(var b=this.Qi.l;b.next();){var c=b.value;c(a)}};
A.prototype.raiseChangedEvent=A.prototype.Nc=function(a,b,c,d,e,g,i){g===f&&(g=n);i===f&&(i=n);var j=new fe;j.h=this;j.fd=a;j.propertyName=b;j.object=c;j.oldValue=d;j.Af=g;j.newValue=e;j.zf=i;this.Vu(j)};A.prototype.raiseChanged=A.prototype.j=function(a,b,c,d,e){this.Nc(he,a,this,b,c,d,e)};w.u(A,{sa:"undoManager"},function(){return this.Ed.sa});w.g(A,"skipsUndoManager",A.prototype.ub);
w.defineProperty(A,{ub:"skipsUndoManager"},t("ji"),function(a){w.k(a,"boolean",A,"skipsUndoManager");this.ji=a;this.Ed.ji=a});
A.prototype.changeState=A.prototype.Dr=function(a,b){if(a!==n&&a.h===this){var c=this.ol;try{this.ol=h;var d=a.fd;if(d===he){var e=a.object,g=a.propertyName,i=a.qa(b);w.Ka(e,g,i);if(e instanceof P){var j=e.ca;j!==n&&j.vh()}}else if(d===ie){var k=a.object,l=a.zf,e=a.newValue;if(k instanceof x){if("number"===typeof l&&e instanceof P){var m=k;b?m.Kd(l):m.xc(l,e);j=k.ca;j!==n&&j.vh()}}else if(k instanceof gf){var p=a.Af===h;if("number"===typeof l&&e instanceof R){var r=k;b?(e.vh(),p?r.Kd(l,e,p):this.remove(e)):
r.Qk(l,e,p)}}else k instanceof A?"number"===typeof l&&e instanceof gf&&(b?this.VD(e):Ri(this,e,l)):w.m("unknown ChangedEvent.Insert object: "+a.toString())}else d===je?(k=a.object,l=a.Af,e=a.oldValue,k instanceof x?"number"===typeof l&&e instanceof P&&(m=k,b?m.xc(l,e):m.Kd(l)):k instanceof gf?(p=a.zf===h,"number"===typeof l&&e instanceof R&&(r=k,b?r.Qk(l,e,p):(e.vh(),p?r.Kd(l,e,p):this.remove(e)))):k instanceof A?"number"===typeof l&&e instanceof gf&&(b?Ri(this,e,l):this.VD(e)):w.m("unknown ChangedEvent.Remove object: "+
a.toString())):d!==ge&&w.m("unknown ChangedEvent: "+a.toString())}finally{this.ol=c}}};A.prototype.startTransaction=A.prototype.gc=function(a){return this.sa.gc(a)};A.prototype.commitTransaction=A.prototype.me=function(a){return this.sa.me(a)};A.prototype.rollbackTransaction=A.prototype.ss=function(){return this.sa.ss()};A.prototype.updateAllTargetBindings=A.prototype.lM=function(){for(var a=this.Xk;a.next();)a.value.vb();for(a=this.Wk;a.next();)a.value.vb();for(a=this.links;a.next();)a.value.vb()};
A.prototype.os=function(a,b,c){if(!this.sc){vi(this);Mh(this,f,h);Ei(this);Ci(this);var d=this.Tb;d!==n&&(d.Dv&&!c)&&(a.width!==b.width||a.height!==b.height||isNaN(a.x&&!isNaN(b.x))||isNaN(a.y&&!isNaN(b.y)))&&d.F();wi(this);this.ya("ViewportBoundsChanged",c?{}:n,a);Gi(this)}};
function Gi(a){var b=a.md;if(b!==n&&b.visible){for(var c,d=c=1,e=b.Fa.length,g=0;g<e;g++){var i=b.Fa.n[g],j=i.Ai;2>j||("LineV"===i.gb?d=d*j/cd(d,j):c=c*j/cd(c,j))}e=b.Vr;c=new cb(d*e.width,c*e.height);a=a.Ua;a.T()&&(b.width=a.width+2*c.width,b.height=a.height+2*c.height,a=bd(a.x,a.y,0,0,c.width,c.height),b.ca.location=new F(a.x-c.width,a.y-c.height))}}A.prototype.clearSelection=A.prototype.Iy=function(){var a=0<this.selection.count;a&&this.ya("ChangingSelection");yf(this);a&&this.ya("ChangedSelection")};
function yf(a){a=a.selection;if(0<a.count){for(var b=a.ng(),c=b.length,d=0;d<c;d++)b[d].Qa=q;a.Ia();a.clear();a.freeze()}}A.prototype.select=A.prototype.select=function(a){if(a!==n&&a.Ja.h===this&&(!a.Qa||1<this.selection.count))this.ya("ChangingSelection"),yf(this),a.Qa=h,this.ya("ChangedSelection")};A.prototype.selectCollection=A.prototype.Nz=function(a){this.ya("ChangingSelection");yf(this);for(a=a.l;a.next();)a.value.Qa=h;this.ya("ChangedSelection")};
A.prototype.scroll=function(a,b,c){c===f&&(c=1);var d="up"===b||"down"===b,e;"pixel"===a?e=c:"line"===a?e=c*(d?this.us:this.ts):"page"===a?(a=d?this.Ua.height:this.Ua.width,a*=this.scale,0!==a&&(e=Math.max(a-(d?this.us:this.ts),0),e*=c)):w.m("scrolling unit must be 'pixel', 'line', or 'page', not: "+a);e/=this.scale;c=this.position.copy();"up"===b?c.y=this.position.y-e:"down"===b?c.y=this.position.y+e:"left"===b?c.x=this.position.x-e:"right"===b?c.x=this.position.x+e:w.m("scrolling direction must be 'up', 'down', 'left', or 'right', not: "+
b);this.position=c};A.prototype.scrollToRect=A.prototype.RL=function(a){var b=this.Ua;b.Nl(a)||(a=a.Wu,a.x-=b.width/2,a.y-=b.height/2,this.position=a)};A.prototype.centerRect=A.prototype.gJ=function(a){var b=this.Ua,a=a.Wu;a.x-=b.width/2;a.y-=b.height/2;this.position=a};A.prototype.transformDocToView=A.prototype.Gs=function(a){var b=this.Hd;b.reset();1!==this.Vb&&b.scale(this.Vb);var c=this.rb;(0!==c.x||0!==c.y)&&(isFinite(c.x)&&isFinite(c.y))&&b.translate(-c.x,-c.y);return a.copy().transform(this.Hd)};
A.prototype.transformViewToDoc=A.prototype.gI=function(a){var b=this.Hd;b.reset();1!==this.Vb&&b.scale(this.Vb);var c=this.rb;(0!==c.x||0!==c.y)&&(isFinite(c.x)&&isFinite(c.y))&&b.translate(-c.x,-c.y);return Za(a.copy(),this.Hd)};var Oh;A.None=Oh=w.s(A,"None",0);var Ai;A.Uniform=Ai=w.s(A,"Uniform",1);var Bi;A.UniformToFill=Bi=w.s(A,"UniformToFill",2);var vg;A.CycleAll=vg=w.s(A,"CycleAll",10);var zg;A.CycleNotDirected=zg=w.s(A,"CycleNotDirected",11);var Bg;
A.CycleNotDirectedFast=Bg=w.s(A,"CycleNotDirectedFast",12);var Cg;A.CycleNotUndirected=Cg=w.s(A,"CycleNotUndirected",13);var wg;A.CycleDestinationTree=wg=w.s(A,"CycleDestinationTree",14);var yg;A.CycleSourceTree=yg=w.s(A,"CycleSourceTree",15);w.g(A,"validCycle",A.prototype.NE);w.defineProperty(A,{NE:"validCycle"},t("Mu"),function(a){var b=this.Mu;b!==a&&(w.jb(a,A,A,"validCycle"),this.Mu=a,this.j("validCycle",b,a))});w.u(A,{Ev:"layers"},function(){return this.hb.l});w.g(A,"isModelReadOnly",A.prototype.se);
w.defineProperty(A,{se:"isModelReadOnly"},function(){var a=this.Ed;return a===n?q:a.cb},function(a){var b=this.Ed;b!==n&&(b.cb=a)});w.g(A,"isReadOnly",A.prototype.cb);w.defineProperty(A,{cb:"isReadOnly"},t("qk"),function(a){var b=this.qk;b!==a&&(w.k(a,"boolean",A,"isReadOnly"),this.qk=a,this.j("isReadOnly",b,a))});w.g(A,"isEnabled",A.prototype.isEnabled);
w.defineProperty(A,{isEnabled:"isEnabled"},t("Vh"),function(a){var b=this.Vh;b!==a&&(w.k(a,"boolean",A,"isEnabled"),this.Vh=a,this.j("isEnabled",b,a))});w.g(A,"allowClipboard",A.prototype.Su);w.defineProperty(A,{Su:"allowClipboard"},t("Ls"),function(a){var b=this.Ls;b!==a&&(w.k(a,"boolean",A,"allowClipboard"),this.Ls=a,this.j("allowClipboard",b,a))});w.g(A,"allowCopy",A.prototype.pj);
w.defineProperty(A,{pj:"allowCopy"},t("Mj"),function(a){var b=this.Mj;b!==a&&(w.k(a,"boolean",A,"allowCopy"),this.Mj=a,this.j("allowCopy",b,a))});w.g(A,"allowDelete",A.prototype.Dk);w.defineProperty(A,{Dk:"allowDelete"},t("Nj"),function(a){var b=this.Nj;b!==a&&(w.k(a,"boolean",A,"allowDelete"),this.Nj=a,this.j("allowDelete",b,a))});w.g(A,"allowDragOut",A.prototype.Tu);
w.defineProperty(A,{Tu:"allowDragOut"},t("Ms"),function(a){var b=this.Ms;b!==a&&(w.k(a,"boolean",A,"allowDragOut"),this.Ms=a,this.j("allowDragOut",b,a))});w.g(A,"allowDrop",A.prototype.VB);w.defineProperty(A,{VB:"allowDrop"},t("Ns"),function(a){var b=this.Ns;b!==a&&(w.k(a,"boolean",A,"allowDrop"),this.Ns=a,this.j("allowDrop",b,a))});w.g(A,"allowTextEdit",A.prototype.Fn);
w.defineProperty(A,{Fn:"allowTextEdit"},t("Xj"),function(a){var b=this.Xj;b!==a&&(w.k(a,"boolean",A,"allowTextEdit"),this.Xj=a,this.j("allowTextEdit",b,a))});w.g(A,"allowGroup",A.prototype.An);w.defineProperty(A,{An:"allowGroup"},t("Oj"),function(a){var b=this.Oj;b!==a&&(w.k(a,"boolean",A,"allowGroup"),this.Oj=a,this.j("allowGroup",b,a))});w.g(A,"allowUngroup",A.prototype.Gn);
w.defineProperty(A,{Gn:"allowUngroup"},t("Yj"),function(a){var b=this.Yj;b!==a&&(w.k(a,"boolean",A,"allowUngroup"),this.Yj=a,this.j("allowUngroup",b,a))});w.g(A,"allowInsert",A.prototype.Bn);w.defineProperty(A,{Bn:"allowInsert"},t("Ps"),function(a){var b=this.Ps;b!==a&&(w.k(a,"boolean",A,"allowInsert"),this.Ps=a,this.j("allowInsert",b,a))});w.g(A,"allowLink",A.prototype.Jl);
w.defineProperty(A,{Jl:"allowLink"},t("Pj"),function(a){var b=this.Pj;b!==a&&(w.k(a,"boolean",A,"allowLink"),this.Pj=a,this.j("allowLink",b,a))});w.g(A,"allowRelink",A.prototype.qj);w.defineProperty(A,{qj:"allowRelink"},t("Sj"),function(a){var b=this.Sj;b!==a&&(w.k(a,"boolean",A,"allowRelink"),this.Sj=a,this.j("allowRelink",b,a))});w.g(A,"allowMove",A.prototype.Ek);
w.defineProperty(A,{Ek:"allowMove"},t("Qj"),function(a){var b=this.Qj;b!==a&&(w.k(a,"boolean",A,"allowMove"),this.Qj=a,this.j("allowMove",b,a))});w.g(A,"allowPrint",A.prototype.Ar);w.defineProperty(A,{Ar:"allowPrint"},t("Rj"),function(a){var b=this.Rj;b!==a&&(w.k(a,"boolean",A,"allowPrint"),this.Rj=a,this.j("allowPrint",b,a))});w.g(A,"allowReshape",A.prototype.Cn);
w.defineProperty(A,{Cn:"allowReshape"},t("Tj"),function(a){var b=this.Tj;b!==a&&(w.k(a,"boolean",A,"allowReshape"),this.Tj=a,this.j("allowReshape",b,a))});w.g(A,"allowResize",A.prototype.Dn);w.defineProperty(A,{Dn:"allowResize"},t("Uj"),function(a){var b=this.Uj;b!==a&&(w.k(a,"boolean",A,"allowResize"),this.Uj=a,this.j("allowResize",b,a))});w.g(A,"allowRotate",A.prototype.En);
w.defineProperty(A,{En:"allowRotate"},t("Vj"),function(a){var b=this.Vj;b!==a&&(w.k(a,"boolean",A,"allowRotate"),this.Vj=a,this.j("allowRotate",b,a))});w.g(A,"allowSelect",A.prototype.je);w.defineProperty(A,{je:"allowSelect"},t("Wj"),function(a){var b=this.Wj;b!==a&&(w.k(a,"boolean",A,"allowSelect"),this.Wj=a,this.j("allowSelect",b,a))});w.g(A,"allowUndo",A.prototype.zy);
w.defineProperty(A,{zy:"allowUndo"},t("Qs"),function(a){var b=this.Qs;b!==a&&(w.k(a,"boolean",A,"allowUndo"),this.Qs=a,this.j("allowUndo",b,a))});w.g(A,"allowZoom",A.prototype.Hn);w.defineProperty(A,{Hn:"allowZoom"},t("Ss"),function(a){var b=this.Ss;b!==a&&(w.k(a,"boolean",A,"allowZoom"),this.Ss=a,this.j("allowZoom",b,a))});w.g(A,"hasVerticalScrollbar",A.prototype.$C);
w.defineProperty(A,{$C:"hasVerticalScrollbar"},t("tt"),function(a){var b=this.tt;b!==a&&(w.k(a,"boolean",A,"hasVerticalScrollbar"),this.tt=a,this.j("hasVerticalScrollbar",b,a),wi(this))});w.g(A,"hasHorizontalScrollbar",A.prototype.ZC);w.defineProperty(A,{ZC:"hasHorizontalScrollbar"},t("st"),function(a){var b=this.st;b!==a&&(w.k(a,"boolean",A,"hasHorizontalScrollbar"),this.st=a,this.j("hasHorizontalScrollbar",b,a),wi(this))});w.g(A,"allowHorizontalScroll",A.prototype.rf);
w.defineProperty(A,{rf:"allowHorizontalScroll"},t("Os"),function(a){var b=this.Os;b!==a&&(w.k(a,"boolean",A,"allowHorizontalScroll"),this.Os=a,this.j("allowHorizontalScroll",b,a),wi(this))});w.g(A,"allowVerticalScroll",A.prototype.sf);w.defineProperty(A,{sf:"allowVerticalScroll"},t("Rs"),function(a){var b=this.Rs;b!==a&&(w.k(a,"boolean",A,"allowVerticalScroll"),this.Rs=a,this.j("allowVerticalScroll",b,a),wi(this))});w.g(A,"scrollHorizontalLineChange",A.prototype.ts);
w.defineProperty(A,{ts:"scrollHorizontalLineChange"},t("ru"),function(a){var b=this.ru;b!==a&&(w.k(a,"number",A,"scrollHorizontalLineChange"),0>a&&w.ra(a,">= 0",A,"scrollHorizontalLineChange"),this.ru=a,this.j("scrollHorizontalLineChange",b,a))});w.g(A,"scrollVerticalLineChange",A.prototype.us);
w.defineProperty(A,{us:"scrollVerticalLineChange"},t("su"),function(a){var b=this.su;b!==a&&(w.k(a,"number",A,"scrollVerticalLineChange"),0>a&&w.ra(a,">= 0",A,"scrollVerticalLineChange"),this.su=a,this.j("scrollVerticalLineChange",b,a))});w.g(A,"lastInput",A.prototype.N);w.defineProperty(A,{N:"lastInput"},t("bc"),function(a){u&&w.i(a,Wd,A,"lastInput");this.bc=a});w.g(A,"firstInput",A.prototype.wc);w.defineProperty(A,{wc:"firstInput"},t("vg"),function(a){u&&w.i(a,Wd,A,"firstInput");this.vg=a});
w.g(A,"currentCursor",A.prototype.uc);w.defineProperty(A,{uc:"currentCursor"},t("ft"),function(a){w.k(a,"string",A,"currentCursor");this.ft===a||""===a&&this.ft===this.dp||(this.ft=a,""!==a?(this.Ea.style.cursor=a,document.body.style.cursor=a):(this.Ea.style.cursor=this.Ry,document.body.style.cursor=this.Ry))});w.g(A,"defaultCursor",A.prototype.Ry);
w.defineProperty(A,{Ry:"defaultCursor"},t("dp"),function(a){w.k(a,"string",A,"defaultCursor");var b=this.dp;b!==a&&(this.dp=a,this.j("defaultCursor",b,a))});w.g(A,"hasGestureZoom",A.prototype.EG);w.defineProperty(A,{EG:"hasGestureZoom"},t("ml"),function(a){var b=this.ml;b!==a&&(w.k(a,"boolean",A,"hasGestureZoom"),this.ml=a,this.j("hasGestureZoom",b,a))});w.g(A,"click",A.prototype.click);
w.defineProperty(A,{click:"click"},t("Lh"),function(a){var b=this.Lh;b!==a&&(a!==n&&w.k(a,"function",A,"click"),this.Lh=a,this.j("click",b,a))});w.g(A,"doubleClick",A.prototype.Sl);w.defineProperty(A,{Sl:"doubleClick"},t("Ph"),function(a){var b=this.Ph;b!==a&&(a!==n&&w.k(a,"function",A,"doubleClick"),this.Ph=a,this.j("doubleClick",b,a))});w.g(A,"contextClick",A.prototype.Fr);
w.defineProperty(A,{Fr:"contextClick"},t("Mh"),function(a){var b=this.Mh;b!==a&&(a!==n&&w.k(a,"function",A,"contextClick"),this.Mh=a,this.j("contextClick",b,a))});w.g(A,"mouseOver",A.prototype.ks);w.defineProperty(A,{ks:"mouseOver"},t("ci"),function(a){var b=this.ci;b!==a&&(a!==n&&w.k(a,"function",A,"mouseOver"),this.ci=a,this.j("mouseOver",b,a))});w.g(A,"mouseHover",A.prototype.js);
w.defineProperty(A,{js:"mouseHover"},t("bi"),function(a){var b=this.bi;b!==a&&(a!==n&&w.k(a,"function",A,"mouseHover"),this.bi=a,this.j("mouseHover",b,a))});w.g(A,"mouseHold",A.prototype.is);w.defineProperty(A,{is:"mouseHold"},t("ai"),function(a){var b=this.ai;b!==a&&(a!==n&&w.k(a,"function",A,"mouseHold"),this.ai=a,this.j("mouseHold",b,a))});w.g(A,"mouseDragOver",A.prototype.ED);
w.defineProperty(A,{ED:"mouseDragOver"},t("Yt"),function(a){var b=this.Yt;b!==a&&(a!==n&&w.k(a,"function",A,"mouseDragOver"),this.Yt=a,this.j("mouseDragOver",b,a))});w.g(A,"mouseDrop",A.prototype.hs);w.defineProperty(A,{hs:"mouseDrop"},t("$h"),function(a){var b=this.$h;b!==a&&(a!==n&&w.k(a,"function",A,"mouseDrop"),this.$h=a,this.j("mouseDrop",b,a))});w.g(A,"toolTip",A.prototype.Fs);
w.defineProperty(A,{Fs:"toolTip"},t("ni"),function(a){var b=this.ni;b!==a&&(a!==n&&w.i(a,mf,A,"toolTip"),this.ni=a,this.j("toolTip",b,a))});w.g(A,"contextMenu",A.prototype.contextMenu);w.defineProperty(A,{contextMenu:"contextMenu"},t("Nh"),function(a){var b=this.Nh;b!==a&&(a!==n&&w.i(a,mf,A,"contextMenu"),this.Nh=a,this.j("contextMenu",b,a))});w.g(A,"commandHandler",A.prototype.Uf);
w.defineProperty(A,{Uf:"commandHandler"},t("Lw"),function(a){var b=this.Lw;b!==a&&(w.i(a,qa,A,"commandHandler"),a.h!==n&&w.m("Cannot share CommandHandlers between Diagrams: "+a.toString()),b!==n&&b.ae(n),this.Lw=a,a.ae(this))});w.g(A,"toolManager",A.prototype.Qb);w.defineProperty(A,{Qb:"toolManager"},t("Ku"),function(a){var b=this.Ku;b!==a&&(w.i(a,kf,A,"toolManager"),a.h!==n&&w.m("Cannot share ToolManagers between Diagrams: "+a.toString()),b!==n&&b.ae(n),this.Ku=a,a.ae(this))});
w.g(A,"defaultTool",A.prototype.gv);w.defineProperty(A,{gv:"defaultTool"},t("Tw"),function(a){var b=this.Tw;b!==a&&(w.i(a,Af,A,"defaultTool"),this.Tw=a,this.Ha===b&&(this.Ha=a))});w.g(A,"currentTool",A.prototype.Ha);w.defineProperty(A,{Ha:"currentTool"},t("Ow"),function(a){var b=this.Ow;b!==n&&(b.W&&b.doDeactivate(),b.cancelWaitAfter(),b.doStop());a===n&&(a=this.gv);a!==n&&(w.i(a,Af,A,"currentTool"),this.Ow=a,a.ae(this),a.doStart())});w.u(A,{selection:"selection"},t("vu"));
w.g(A,"maxSelectionCount",A.prototype.xD);w.defineProperty(A,{xD:"maxSelectionCount"},t("Rt"),function(a){var b=this.Rt;if(b!==a)if(w.k(a,"number",A,"maxSelectionCount"),0<=a&&!isNaN(a)){if(this.Rt=a,this.j("maxSelectionCount",b,a),!this.sa.tb&&(a=this.selection.count-a,0<a)){this.ya("ChangingSelection");for(var b=this.selection.ng(),c=0;c<a;c++)b[c].Qa=q;this.ya("ChangedSelection")}}else w.ra(a,">= 0",A,"maxSelectionCount")});w.g(A,"nodeSelectionAdornmentTemplate",A.prototype.JD);
w.defineProperty(A,{JD:"nodeSelectionAdornmentTemplate"},t("du"),function(a){var b=this.du;b!==a&&(w.i(a,mf,A,"nodeSelectionAdornmentTemplate"),this.du=a,this.j("nodeSelectionAdornmentTemplate",b,a))});w.g(A,"groupSelectionAdornmentTemplate",A.prototype.VC);w.defineProperty(A,{VC:"groupSelectionAdornmentTemplate"},t("qt"),function(a){var b=this.qt;b!==a&&(w.i(a,mf,A,"groupSelectionAdornmentTemplate"),this.qt=a,this.j("groupSelectionAdornmentTemplate",b,a))});
w.g(A,"linkSelectionAdornmentTemplate",A.prototype.uD);w.defineProperty(A,{uD:"linkSelectionAdornmentTemplate"},t("Jt"),function(a){var b=this.Jt;b!==a&&(w.i(a,mf,A,"linkSelectionAdornmentTemplate"),this.Jt=a,this.j("linkSelectionAdornmentTemplate",b,a))});w.g(A,"isModified",A.prototype.PG);w.defineProperty(A,{PG:"isModified"},function(){var a=this.sa;return a===n?this.UA:a.Ol!==n?h:this.UA&&this.lk!==a.Cj},function(a){w.k(a,"boolean",A,"isModified");this.UA=a;var b=this.sa;!a&&b&&(this.lk=b.Cj)});
w.g(A,"model",A.prototype.ba);w.defineProperty(A,{ba:"model"},t("Ed"),function(a){var b=this.Ed;if(b!==a){w.i(a,B,A,"model");b!==n&&(b.sa!==a.sa&&b.sa.NG)&&w.m("Do not replace a Diagram.model while a transaction is in progress.");this.wg=q;this.qp=h;this.qf=q;var c=this.Od;this.Od=h;b!==n&&(b.Hz(this.bB),b instanceof O&&Rh(this,b.Mg),Rh(this,b.bg));this.Ed=a;a.xy(this.aB);Sh(this,a.bg);a instanceof O&&Th(this,a.Mg);a.Hz(this.aB);a.xy(this.bB);this.Od=c;this.yb();b!==n&&(a.sa.isEnabled=b.sa.isEnabled)}});
function Ph(a,b,c){var d=a.Bj(b);if(d!==n&&"string"===typeof c)d.vb(c),a.ba instanceof ze&&(b=a.xf(b),b!==n&&b.vb(c));else if("string"===typeof c){d=n;for(a=a.sl.l;a.next();){for(var e=a.value,g=0;g<e.length;g++){var i=e[g];i.If!==n&&(i=i.If.qa(b),i!==n&&(d===n&&(d=[]),d.push(i)))}if(d!==n)break}b=d;if(b!==n)for(d=0;d<b.length;d++)b[d].vb(c)}}function Ni(a,b){var c=b.rk;if(w.isArray(c)){var d=a.sl.qa(c);if(d===n)a.sl.add(c,[b]);else{for(c=0;c<d.length;c++)if(d[c]===b)return;d.push(b)}}}
function Pi(a,b){var c=b.rk;if(w.isArray(c)){var d=a.sl.qa(c);if(d!==n)for(var e=0;e<d.length;e++)if(d[e]===b){d.splice(e,1);0===d.length&&a.sl.remove(c);break}}}
A.prototype.clear=A.prototype.clear=function(){var a=n;this.md!==n&&(a=this.md.ca);this.ba.clear();for(var b=this.hb.length,c=0;c<b;c++)this.hb.n[c].clear();this.$g.clear();this.Si.clear();this.eu.clear();this.Gl.clear();this.Kt.clear();this.Mb.clear();this.Oh.clear();this.ek.clear();this.sl.clear();this.vu.Ia();this.vu.clear();this.vu.freeze();this.xm=this.Ox=n;this.kt=(new G(NaN,NaN,NaN,NaN)).freeze();a!==n&&(this.add(a),this.Mb.remove(a))};
A.prototype.reset=A.prototype.reset=function(){this.sc=h;this.clear();this.hb=new z(gf);this.rb=(new F(NaN,NaN)).freeze();this.Vb=1;this.Vt=1E-4;this.Qt=100;this.Pu=(new F(NaN,NaN)).freeze();this.pt=(new G(NaN,NaN,NaN,NaN)).freeze();this.el=Oh;this.jl=Ib;this.mk=Oh;this.Mm=Ib;this.yt=this.xt=Jb;this.Us=(new gb(16,16,16,16)).freeze();this.Et=h;this.Mu=vg;this.dp="auto";this.Ed=this.Nh=this.ni=this.$h=this.Yt=this.ai=this.bi=this.ci=this.Mh=this.Ph=this.Lh=n;this.qk=q;this.Nj=this.Mj=this.Ls=this.Vh=
h;this.Ns=this.Ms=q;this.Rs=this.Os=this.tt=this.st=this.Ss=this.Qs=this.Wj=this.Vj=this.Uj=this.Tj=this.Rj=this.Qj=this.Sj=this.Pj=this.Ps=this.Yj=this.Oj=this.Xj=h;this.su=this.ru=16;this.he=(new gb(5)).freeze();this.Rt=999999999;this.pd=n;ai(this);bi(this);this.md=n;this.ba=new O;this.ji=h;this.Tb=new ci;this.sc=this.ji=q};
A.prototype.rebuildParts=A.prototype.fm=function(){for(var a=[],b=this.selection.l;b.next();){var c=b.value.data;c&&a.push(c)}b=this.ba;b instanceof O&&Rh(this,b.Mg);Rh(this,b.bg);Sh(this,b.bg);b instanceof O&&Th(this,b.Mg);for(b=0;b<a.length;b++)if(c=this.Bj(a[b]))c.Qa=h};
function Sh(a,b){if(b!==n){for(var c=a.ba,d=w.Rb(b),e=0;e<d;e++){var g=w.Db(b,e);c.oe(g)?Uh(a,g,q):c instanceof O&&Vh(a,g)}if(c instanceof O||c instanceof ze){for(e=0;e<d;e++)g=w.Db(b,e),c.oe(g)&&Si(a,g);if(c instanceof O)for(c=a.links;c.next();)Ti(c.value)}Ui(a,q)}}
function Uh(a,b,c){if(!(b===f||b===n)&&!a.sa.tb&&!a.Oh.contains(b)){c===f&&(c=h);var d=a.getCategoryForNodeData(b),e=a.findTemplateForNodeData(b,d);e instanceof R&&(xf(e),e=e.copy(),e instanceof R&&(e.Oi=d,a.add(e),e.data=b,c&&Si(a,b)))}}A.prototype.getCategoryForNodeData=A.prototype.PC=function(a){var b=this.ba,c=b.PC(a),d=q;b instanceof O&&(d=b.lz(a));d&&""===c&&(c="LinkLabel");return c};
A.prototype.findTemplateForNodeData=A.prototype.qK=function(a,b){var c=q,d=this.ba;d instanceof O&&(c=d.iz(a));c?(c=this.ez.qa(b),c===n&&(c=this.ez.qa(""),c===n&&(w.nF===f&&(w.nF=h,w.trace('No Group template found for category "'+b+'"'),w.trace("  Using default group template")),c=this.AA))):(c=this.Bz.qa(b),c===n&&(c=this.Bz.qa(""),c===n&&(w.qF===f&&(w.qF=h,w.trace('No Node template found for category "'+b+'"'),w.trace("  Using default node template")),c=this.CA)));return c instanceof R?c:n};
function Si(a,b){var c=a.ba;if(c instanceof O||c instanceof ze){var d=c.lb(b);if(d!==f){var e=Je(c,d),g=a.Mr(b);if(e!==n&&g!==n){for(e=e.l;e.next();){var i=e.value;if(c instanceof O)if(c.oe(i)){if(g instanceof vf&&c.Vn(i)===d){var j=a.Bj(i);j!==n&&(j.bb=g)}}else{if(j=a.xf(i),j!==n){c.Yl(i)===d&&(j.ia=g);c.Zl(i)===d&&(j.na=g);for(var i=c.Pk(i),k=0;k<i.length;k++)if(i[k]===d){g.xd=j;break}}}else c instanceof ze&&(c.oe(i)&&c.Wn(i)===d)&&(j=a.Mr(i),Qh(a,g,j))}$e(c,d)}c instanceof O?(c=c.Vn(b),c!==f&&
(c=a.Vf(c),c instanceof vf&&(g.bb=c))):c instanceof ze&&(c=c.Wn(b),c!==f&&(c=a.Vf(c),Qh(a,c,g)))}}}function Qh(a,b,c){if(!(b===n||c===n)){var d=a.Qb.rz,e=b,g=c;if(a.hd)for(b=g.te;b.next();){var i=b.value;if(i.na===g)return}else{e=c;g=b;for(b=e.te;b.next();)if(i=b.value,i.ia===e)return}d!==n&&xg(d,e,g,n)||(d=a.getCategoryForLinkData(c.data),b=a.findTemplateForLinkData(c.data,d),b instanceof U&&(xf(b),b=b.copy(),b instanceof U&&(b.Oi=d,b.ia=e,b.na=g,a.add(b),b.data=c.data)))}}
function Th(a,b){if(b!==n){for(var c=w.Rb(b),d=0;d<c;d++)Vh(a,w.Db(b,d));Ui(a,q)}}
function Vh(a,b){if(!(b===f||b===n)&&!a.sa.tb&&!a.ek.contains(b)){var c=a.getCategoryForLinkData(b),d=a.findTemplateForLinkData(b,c);if(d instanceof U&&(xf(d),d=d.copy(),d instanceof U)){d.Oi=c;var c=a.ba,e=c.yG(b);""!==e&&(d.zi=e);e=c.Yl(b);e!==f&&(e=a.Vf(e),e instanceof T&&(d.ia=e));e=c.BG(b);""!==e&&(d.Lj=e);e=c.Zl(b);e!==f&&(e=a.Vf(e),e instanceof T&&(d.na=e));c=c.Pk(b);if(w.isArray(c))for(var e=w.Rb(c),g=0;g<e;g++){var i=a.Vf(w.Db(c,g));i!==n&&(i.xd=d)}a.add(d);d.data=b}}}
A.prototype.getCategoryForLinkData=A.prototype.OC=function(a){var b=this.ba,c="";b instanceof O?c=b.OC(a):b instanceof ze&&(c=b.AG(a));return c};A.prototype.findTemplateForLinkData=A.prototype.pK=function(a,b){var c=this.pz.qa(b);c===n&&(c=this.pz.qa(""),c===n&&(w.pF===f&&(w.pF=h,w.trace('No Link template found for category "'+b+'"'),w.trace("  Using default link template")),c=this.BA));return c instanceof U?c:n};function Rh(a,b){for(var c=w.Rb(b),d=0;d<c;d++)Wh(a,w.Db(b,d))}
function Wh(a,b){if(!(b===f||b===n)){var c=a.Bj(b);if(c instanceof R){c.Qa=q;var d=c.Ja;if(!(d===n||d.h!==a)){var e=a.ba;if(e instanceof O&&c instanceof T){var g=e.lb(c.data);if(g!==f){for(var i=c.te;i.next();){var j=i.value.data;Ke(e,g,j)}c.Ei&&(i=c.xd,i!==n&&(j=i.data,Ke(e,g,j)));if(c instanceof vf)for(i=c.Fc;i.next();)j=i.value.data,e.oe(j)&&Ke(e,g,j)}}else if(e instanceof ze&&c instanceof T){i=a.xf(c.data);if(i!==n&&(i.Qa=q,j=i.Ja,j!==n)){var k=j.Kd(-1,i);0<=k&&a.Nc(je,"parts",j,i,n,k,n);k=i.bo;
k!==n&&k(i,j,n)}i=a.hd;for(j=c.te;j.next();)k=j.value,k=(i?k.na:k.ia).data,e.oe(k)&&Ke(e,g,k)}e=d.Kd(-1,c);0<=e&&a.Nc(je,"parts",d,c,n,e,n);e=c.bo;e!==n&&e(c,d,n)}}}}A.prototype.findPartForKey=A.prototype.mK=function(a){if(a===n||a===f)return n;a=this.ba.He(a);if(a===n)return n;a=this.Oh.qa(a);return a instanceof R?a:n};A.prototype.findNodeForKey=A.prototype.Vf=function(a){if(a===n||a===f)return n;a=this.ba.He(a);if(a===n)return n;a=this.Oh.qa(a);return a instanceof T?a:n};
A.prototype.findPartForData=A.prototype.Bj=function(a){if(a===n)return n;var b=this.Oh.qa(a);if(b instanceof R)return b;b=this.ek.qa(a);return b instanceof R?b:n};A.prototype.findNodeForData=A.prototype.Mr=function(a){if(a===n)return n;a=this.Oh.qa(a);return a instanceof T?a:n};A.prototype.findLinkForData=A.prototype.xf=function(a){if(a===n)return n;a=this.ek.qa(a);return a instanceof U?a:n};w.g(A,"nodeTemplate",A.prototype.lH);
w.defineProperty(A,{lH:"nodeTemplate"},function(){return this.di.qa("")},function(a){var b=this.di.qa("");b!==a&&(w.i(a,R,A,"nodeTemplate"),this.di.add("",a),this.j("nodeTemplate",b,a),this.sa.tb||this.fm())});w.g(A,"nodeTemplateMap",A.prototype.Bz);w.defineProperty(A,{Bz:"nodeTemplateMap"},t("di"),function(a){var b=this.di;b!==a&&(w.i(a,la,A,"nodeTemplateMap"),this.di=a,this.j("nodeTemplateMap",b,a),this.sa.tb||this.fm())});w.g(A,"groupTemplate",A.prototype.DG);
w.defineProperty(A,{DG:"groupTemplate"},function(){return this.jk.qa("")},function(a){var b=this.jk.qa("");b!==a&&(w.i(a,vf,A,"groupTemplate"),this.jk.add("",a),this.j("groupTemplate",b,a),this.sa.tb||this.fm())});w.g(A,"groupTemplateMap",A.prototype.ez);w.defineProperty(A,{ez:"groupTemplateMap"},t("jk"),function(a){var b=this.jk;b!==a&&(w.i(a,la,A,"groupTemplateMap"),this.jk=a,this.j("groupTemplateMap",b,a),this.sa.tb||this.fm())});w.g(A,"linkTemplate",A.prototype.ZG);
w.defineProperty(A,{ZG:"linkTemplate"},function(){return this.Yi.qa("")},function(a){var b=this.Yi.qa("");b!==a&&(w.i(a,U,A,"linkTemplate"),this.Yi.add("",a),this.j("linkTemplate",b,a),this.sa.tb||this.fm())});w.g(A,"linkTemplateMap",A.prototype.pz);w.defineProperty(A,{pz:"linkTemplateMap"},t("Yi"),function(a){var b=this.Yi;b!==a&&(w.i(a,la,A,"linkTemplateMap"),this.Yi=a,this.j("linkTemplateMap",b,a),this.sa.tb||this.fm())});w.g(A,"isMouseCaptured",A.prototype.Ec);
w.defineProperty(A,{Ec:"isMouseCaptured"},t("VA"),function(a){var b=this.Ea;a?(this.N.bubbles=q,b.removeEventListener("mousemove",this.mo,q),b.removeEventListener("mousedown",this.lo,q),b.removeEventListener("mouseup",this.oo,q),b.removeEventListener("mousewheel",this.Pg,q),b.removeEventListener("DOMMouseScroll",this.Pg,q),b.removeEventListener("mouseout",this.no,q),window.addEventListener("mousemove",this.mo,h),window.addEventListener("mousedown",this.lo,h),window.addEventListener("mouseup",this.oo,
h),window.addEventListener("mousewheel",this.Pg,h),window.addEventListener("DOMMouseScroll",this.Pg,h),window.addEventListener("mouseout",this.no,h),window.addEventListener("selectstart",this.preventDefault,q)):(window.removeEventListener("mousemove",this.mo,h),window.removeEventListener("mousedown",this.lo,h),window.removeEventListener("mouseup",this.oo,h),window.removeEventListener("mousewheel",this.Pg,h),window.removeEventListener("DOMMouseScroll",this.Pg,h),window.removeEventListener("mouseout",
this.no,h),window.removeEventListener("selectstart",this.preventDefault,q),b.addEventListener("mousemove",this.mo,q),b.addEventListener("mousedown",this.lo,q),b.addEventListener("mouseup",this.oo,q),b.addEventListener("mousewheel",this.Pg,q),b.addEventListener("DOMMouseScroll",this.Pg,q),b.addEventListener("mouseout",this.no,q));this.VA=a});w.g(A,"position",A.prototype.position);
w.defineProperty(A,{position:"position"},t("rb"),function(a){var b=this.rb;if(!b.I(a)){w.i(a,F,A,"position");var c=this.Ua.copy();c.x=b.x;c.y=b.y;b.Aj(a)?a=b:this.sc||(this.sc=h,b=this.scale,yi(this,a,this.vc,this.Ea.width/b,this.Ea.height/b,this.jl),this.sc=q);this.rb=a.O();this.os(c,this.Ua);this.yb()}});w.g(A,"initialPosition",A.prototype.cD);w.defineProperty(A,{cD:"initialPosition"},t("lx"),function(a){this.lx.I(a)||(w.i(a,F,A,"initialPosition"),this.lx=a)});w.g(A,"initialScale",A.prototype.dD);
w.defineProperty(A,{dD:"initialScale"},t("mx"),function(a){this.mx!==a&&(w.k(a,"number",A,"initialScale"),this.mx=a)});w.g(A,"grid",A.prototype.vv);w.defineProperty(A,{vv:"grid"},function(){this.md===n&&ti(this);return this.md},function(a){var b=this.md;if(b!==a){b===n&&(ti(this),b=this.md);w.i(a,x,A,"grid");a.type!==ui&&w.m("Diagram.grid must be a Panel of type Panel.Grid");var c=b.fa;c!==n&&c.remove(b);this.md=a;a.name="GRID";c!==n&&c.add(a);Mh(this);this.j("grid",b,a)}});
w.u(A,{Ua:"viewportBounds"},function(){var a=this.rb,b=this.Vb,c=this.Ea,d=this.KB;d.V(a.x,a.y,Math.max(c.width,0)/b,Math.max(c.height,0)/b);return d});w.g(A,"fixedBounds",A.prototype.Rr);w.defineProperty(A,{Rr:"fixedBounds"},t("pt"),function(a){var b=this.pt;b.I(a)||(w.i(a,G,A,"fixedBounds"),this.pt=a=a.O(),Ci(this),this.j("fixedBounds",b,a))});w.u(A,{vc:"documentBounds"},t("kt"));function zi(a,b){var c=a.kt;c.I(b)||(b=b.O(),a.kt=b,a.Th=q,wi(a),a.ya("DocumentBoundsChanged",n,c.copy()),Ei(a))}
w.g(A,"scale",A.prototype.scale);
w.defineProperty(A,{scale:"scale"},t("Vb"),function(a){var b=this.Vb;if(b!==a){w.o(a,A,"scale");this.Vb=a;var c=a;a<this.Fj&&(c=this.Fj);a>this.Ah&&(c=this.Ah);if(!isNaN(a)&&!this.sc&&!this.Od){this.sc=h;var d=this.Ua.copy(),e=this.Ea.width/c,g=this.Ea.height/c;d.width=this.Ea.width/b;d.height=this.Ea.height/b;var i=this.cl.copy();if(isNaN(i.x))switch(this.ev){case dc:i.x=0;break;case ec:i.x=e-1;break;case Mb:i.x=e/2;break;case Ib:case gc:i.x=e/2}if(isNaN(i.y))switch(this.ev){case ac:i.y=0;break;
case fc:i.y=g-1;break;case Mb:i.y=g/2;break;case Ib:case gc:i.y=g/2}var j=this.position,a=new F(j.x+i.x/b-i.x/a,j.y+i.y/b-i.y/a);yi(this,a,this.vc,e,g,this.jl);this.position=a;this.sc=q;e=this.Ua;this.Vb=c;this.os(d,e)}Mh(this);Ei(this)}});w.g(A,"autoScale",A.prototype.Cy);w.defineProperty(A,{Cy:"autoScale"},t("el"),function(a){var b=this.el;b!==a&&(w.jb(a,A,A,"autoScale"),this.el=a,this.j("autoScale",b,a),a!==Oh&&wi(this))});w.g(A,"initialAutoScale",A.prototype.HG);
w.defineProperty(A,{HG:"initialAutoScale"},t("mk"),function(a){var b=this.mk;b!==a&&(w.jb(a,A,A,"initialAutoScale"),this.mk=a,this.j("initialAutoScale",b,a))});w.g(A,"initialViewportSpot",A.prototype.eD);w.defineProperty(A,{eD:"initialViewportSpot"},t("yt"),function(a){var b=this.yt;b!==a&&(w.i(a,H,A,"initialViewportSpot"),rb(a)||w.m("initialViewportSpot must be a real Spot: "+a),this.yt=a,this.j("initialViewportSpot",b,a))});w.g(A,"initialDocumentSpot",A.prototype.bD);
w.defineProperty(A,{bD:"initialDocumentSpot"},t("xt"),function(a){var b=this.xt;b!==a&&(w.i(a,H,A,"initialDocumentSpot"),rb(a)||w.m("initialViewportSpot must be a real Spot: "+a),this.xt=a,this.j("initialDocumentSpot",b,a))});w.g(A,"minScale",A.prototype.Fj);w.defineProperty(A,{Fj:"minScale"},t("Vt"),function(a){w.o(a,A,"minScale");var b=this.Vt;b!==a&&0<a?(this.Vt=a,this.j("minScale",b,a),a>this.scale&&(this.scale=a)):w.ra(a,"> 0",A,"minScale")});w.g(A,"maxScale",A.prototype.Ah);
w.defineProperty(A,{Ah:"maxScale"},t("Qt"),function(a){w.o(a,A,"maxScale");var b=this.Qt;b!==a&&0<a?(this.Qt=a,this.j("maxScale",b,a),a<this.scale&&(this.scale=a)):w.ra(a,"> 0",A,"maxScale")});w.g(A,"zoomPoint",A.prototype.cl);w.defineProperty(A,{cl:"zoomPoint"},t("Pu"),function(a){this.Pu.I(a)||(w.i(a,F,A,"zoomPoint"),this.Pu=a=a.O(),Ci(this))});w.g(A,"contentAlignment",A.prototype.ev);
w.defineProperty(A,{ev:"contentAlignment"},t("jl"),function(a){var b=this.jl;b.I(a)||(w.i(a,H,A,"contentAlignment"),this.jl=a=a.O(),this.j("contentAlignment",b,a),wi(this))});w.g(A,"initialContentAlignment",A.prototype.IG);w.defineProperty(A,{IG:"initialContentAlignment"},t("Mm"),function(a){var b=this.Mm;b.I(a)||(w.i(a,H,A,"initialContentAlignment"),this.Mm=a=a.O(),this.j("initialContentAlignment",b,a))});w.g(A,"padding",A.prototype.padding);
w.defineProperty(A,{padding:"padding"},t("he"),function(a){"number"===typeof a?a=new gb(a):w.i(a,gb,A,"padding");var b=this.he;b.I(a)||(this.he=a=a.O(),Ci(this),this.j("padding",b,a))});w.u(A,{Wk:"nodes"},function(){return this.eu.l});w.u(A,{links:"links"},function(){return this.Kt.l});w.u(A,{Xk:"parts"},function(){return this.Mb.l});w.g(A,"layout",A.prototype.Tb);
w.defineProperty(A,{Tb:"layout"},t("pd"),function(a){var b=this.pd;b!==a&&(w.i(a,ci,A,"layout"),b!==n&&(b.h=n,b.group=n),this.pd=a,a.h=this,a.group=n,this.rn=this.Ts=h,this.j("layout",b,a),this.yb())});A.prototype.layoutDiagram=A.prototype.iL=function(a){$h(this);a&&Ui(this,h);Fi(this)};function Ui(a,b){for(var c=a.Gl.l;c.next();)Vi(a,c.value,b);a.Tb!==n&&(b?a.Tb.Oe=q:a.Tb.F())}function Vi(a,b,c){if(b!==n){for(var d=b.Ym.l;d.next();)Vi(a,d.value,c);b.Tb!==n&&(c?b.Tb.Oe=q:b.Tb.F())}}
function Fi(a){for(var b=a.Gl.l;b.next();)Wi(a,b.value);b=a.Tb;b!==n&&!b.Oe&&(b.doLayout(a),b.Oe=h);a.Ts=q}function Wi(a,b){if(b!==n){for(var c=b.Ym.l;c.next();)Wi(a,c.value);c=b.Tb;c!==n&&!c.Oe&&(b.iB=!b.location.T(),c.doLayout(b),b.F(Xi),c.Oe=h,Hi(a,b))}}w.g(A,"isTreePathToChildren",A.prototype.hd);w.defineProperty(A,{hd:"isTreePathToChildren"},t("Et"),function(a){var b=this.Et;if(b!==a&&(w.k(a,"boolean",A,"isTreePathToChildren"),this.Et=a,this.j("isTreePathToChildren",b,a),!this.sa.tb))for(a=this.Wk;a.next();)Yi(a.value)});
w.g(A,"isCollapsingExpanding",A.prototype.Xf);w.defineProperty(A,{Xf:n},t("SA"),ba("SA"));function Zi(a,b){var c=a.Vw.qa(b);if(c!==n)return c;c=a.Vw.qa(b.toLowerCase());if(c!==n)return c;w.m("Unknown DiagramEvent name: "+b);return n}A.prototype.addDiagramListener=A.prototype.QB=function(a,b){w.k(a,"string",A,"addDiagramListener:name");w.k(b,"function",A,"addDiagramListener:listener");var c=Zi(this,a);c!==n&&c.add(b)};
A.prototype.removeDiagramListener=A.prototype.UD=function(a,b){w.k(a,"string",A,"removeDiagramListener:name");w.k(b,"function",A,"addDiagramListener:listener");var c=Zi(this,a);c!==n&&c.remove(b)};A.prototype.raiseDiagramEvent=A.prototype.ya=function(a,b,c){u&&w.k(a,"string",A,"raiseDiagramEvent:name");var d=Zi(this,a),e=new Yd;e.h=this;var g=this.Uw.qa(a),a=g!==n?g:this.Uw.qa(a.toLowerCase());e.name=a;b!==f&&(e.$v=b);c!==f&&(e.Mv=c);for(b=d.l;b.next();)c=b.value,c(e);return e.cancel};
function lg(a,b){for(var c=a.Wl(b,function(a){return a.ca},function(a){return a instanceof U},h).l;c.next();){var d=c.value;d.Ch===Rf&&d.Sb()}}function $i(a,b,c){if(b!==c)if(b.canAvoid()){for(var c=b.getAvoidableRectangle(),b=a.sd.Ll,d=a.sd.Kl,e=c.x+c.width,g=c.y+c.height,i=c.x;i<e;i+=b){for(var j=c.y;j<g;j+=d)aj(a.sd,i,j);aj(a.sd,i,g)}for(j=c.y;j<g;j+=d)aj(a.sd,e,j);aj(a.sd,e,g)}else if(b instanceof vf)for(b=b.Fc;b.next();)d=b.value,d instanceof T&&$i(a,d,c)}
function bj(a,b){if(a.sd!==n&&!a.sd.$r&&(b===n||b.canAvoid()))a.sd.$r=h}function hi(a,b,c){if(Hf!==n){c instanceof A||(c=n);var d=Pf;c!==d&&(d!==n&&d.Qb.qe!==n&&d.Qb.qe.doSimulatedDragLeave(),c!==n&&c.Qb.qe!==n&&c.Qb.qe.doSimulatedDragEnter());Pf=c;if(c===n)return h;d=c.Qb.qe;d!==n&&(a!==n&&(b=c.Yg(a)),c.bc.M=b,c.bc.zj=q,c.bc.Ii=q,d.doSimulatedDragOver());return h}return q}
function ji(a,b,c,d){if(Hf!==n){d===n&&(d=n);var e=Pf;d!==e&&(e!==n&&e.Qb.qe!==n&&e.Qb.qe.doSimulatedDragLeave(),d!==n&&d.Qb.qe!==n&&d.Qb.qe.doSimulatedDragEnter());Pf=d;if(d===n)return Hf.doCancel(),h;if(d!==a)return a=c,b!==n&&(a=d.Yg(b)),d.bc.M=a,d.bc.zj=q,d.bc.Ii=h,b=d.Qb.qe,b!==n&&b.doSimulatedDrop(),Hf!==n&&Hf.doCancel(),h}return q}w.g(A,"autoScrollRegion",A.prototype.aC);
w.defineProperty(A,{aC:"autoScrollRegion"},t("Us"),function(a){"number"===typeof a?a=new gb(a):w.i(a,gb,A,"autoScrollRegion");var b=this.Us;b.I(a)||(this.Us=a=a.O(),Ci(this),this.j("autoScrollRegion",b,a))});
function jg(a){if(a.Rg===n){a.Rg={};var b;b=a.Ha!==a.Qb.qe?a.UE:a.VE;a.Rg.isEnabled=h;var c=setInterval(function(){var b=c;a.Rg!==n&&a.Rg.isEnabled&&(a.Rg=n,clearInterval(b),b=ig(a,a.Iw),b.yi(a.position)||(a.position=b,a.N.M=a.gI(a.Iw),a.Ha.doMouseMove(),a.Th=h,zi(a,a.ne()),a.Zg=h,a.Ng(),jg(a)))},b);a.Rg.id=c}}function Kf(a){a.Rg!==n&&(a.Rg.isEnabled&&clearInterval(a.Rg.id),a.Rg=n)}
function ig(a,b){var c=a.position,d=a.aC;if(0>=d.top&&0>=d.left&&0>=d.right&&0>=d.bottom)return c;var e=a.Ua,g=new G(0,0,e.width,e.height),e=new F(0,0);if(b.x>=g.x&&b.x<g.x+d.left){var i=Math.max(a.ts,1),i=i|0;e.x-=i;b.x<g.x+d.left/2&&(e.x-=i);b.x<g.x+d.left/4&&(e.x-=4*i)}else b.x<=g.x+g.width&&b.x>g.x+g.width-d.right&&(i=Math.max(a.ts,1),i|=0,e.x+=i,b.x>g.x+g.width-d.right/2&&(e.x+=i),b.x>g.x+g.width-d.right/4&&(e.x+=4*i));b.y>=g.y&&b.y<g.y+d.top?(i=Math.max(a.us,1),i|=0,e.y-=i,b.y<g.y+d.top/2&&
(e.y-=i),b.y<g.y+d.top/4&&(e.y-=4*i)):b.y<=g.y+g.height&&b.y>g.y+g.height-d.bottom&&(i=Math.max(a.us,1),i|=0,e.y+=i,b.y>g.y+g.height-d.bottom/2&&(e.y+=i),b.y>g.y+g.height-d.bottom/4&&(e.y+=4*i));e.yi(new F(0,0))||(d=a.scale,c=new F(c.x+e.x/d,c.y+e.y/d));return c}A.prototype.makeImage=A.prototype.kL=function(a){var b=document.createElement("img");b.src=this.aH(a);return b instanceof HTMLImageElement?b:n};
A.prototype.makeImageData=A.prototype.aH=function(a){this.Ng();if(this.Ea===n)return"";a===f&&(a={});"object"!==typeof a&&w.m("properties argument must be an Object.");var b=a.size||n,c=a.scale||n,d=a.maxSize||new cb(2E3,2E3),e=a.position||n,g=a.parts||n,i=a.padding||1,j=a.background||n,k=a.omitTemporary;k===f&&(k=h);b!==n&&(isNaN(b.width)&&isNaN(b.height))&&(b=n);i&&"number"===typeof i&&(i=new gb(i));i||(i=new gb(0));this.mt=q;li(this);var l=document.createElement("canvas"),m=l.getContext("2d");
if(!b&&!c&&!g&&!e)return l.width=this.Ea.width+Math.ceil(i.left+i.right),l.height=this.Ea.height+Math.ceil(i.top+i.bottom),Ii(this,m,i,new cb(l.width,l.height),this.Vb,this.rb,g,j,k),this.mt=h,l.toDataURL(a.type,a.details);var p,r=new F(0,0);p=this.vc.copy();p.YH(this.padding);p.width-=r.x;p.height-=r.y;if(g){var s,v=h,g=g.l;for(g.reset();g.next();){var y=g.value;if(y instanceof R){var C=y.Ja;if(!C||C.visible)if((!C||!C.yc)&&y.nb())y=y.va,y.T()&&(v?(v=q,s=y.copy()):s.Hi(y))}}v&&(s=new G(0,0,0,0));
p.width=s.width;p.height=s.height;r.x=s.x;r.y=s.y}r.x+=p.x;r.y+=p.y;e!==n&&e.T()&&(r=e,c||(c=1));s=e=0;i&&(e=i.left+i.right,s=i.top+i.bottom);v=y=0;b&&(y=b.width,v=b.height,isFinite(y)&&(y=Math.max(0,y-e)),isFinite(v)&&(v=Math.max(0,v-s)));b&&c?b.T()?(b=y,p=v):isNaN(v)?(b=y,p=p.height*c):(b=p.width*c,p=v):b?b.T()?(c=Math.min(y/p.width,v/p.height),b=y,p=v):isNaN(v)?(c=y/p.width,b=y,p=p.height*c):(c=v/p.height,b=p.width*c,p=v):c?(b=p.width*c,p=p.height*c):(c=1,b=p.width,p=p.height);i?(b+=e,p+=s):i=
new gb(0);d&&(e=d.width,isNaN(e)&&(e=2E3),d=d.height,isNaN(d)&&(d=2E3),isFinite(e)&&(b=Math.min(b,e)),isFinite(d)&&(p=Math.min(p,d)));l.width=b;l.height=p;Ii(this,m,i,new cb(Math.ceil(b),Math.ceil(p)),c,r,g,j,k);this.mt=h;return l.toDataURL(a.type,a.details)};A.inherit=function(a,b){w.k(a,"function",A,"inherit");w.k(b,"function",A,"inherit");w.Da(a,b)};function cj(a){A.call(this,a);this.Tu=h;this.Ek=q;this.cb=h;this.ev=Kb;this.Tb=new dj}w.P("Palette",cj);w.Da(cj,A);
function Ji(a){A.call(this,a);this.sc=h;this.ei=n;var a=new R,b=new V;b.stroke="magenta";b.eb=2;b.fill=n;b.name="BOXSHAPE";a.ws="BOXSHAPE";a.Fv="BOXSHAPE";a.add(b);this.Mi=a;this.ey=document.createElement("canvas");this.iF=this.ey.getContext("2d");a=new ej;a.ae(this);this.Qb.Qe.xc(0,a);var c=this;this.LD=function(){fj(c)};this.KD=function(){c.ei!==n&&(Ci(c),Mh(c))};this.cb=h;this.je=q;this.Cy=Ai;this.Qb.dm=Cf;this.sc=q}w.P("Overview",Ji);w.Da(Ji,A);
Ji.prototype.Ge=function(){this.Kb===n&&w.m("No div specified");this.Ea===n&&w.m("No canvas specified");if(this.Zg){var a=this.ei;if(a!==n){var b=this.Ea,c=this.dk,d=this.ey,e=this.iF;d.width=b.width;d.height=b.height;c.Dw="";c.setTransform(1,0,0,1,0,0);c.clearRect(0,0,this.Ea.width,this.Ea.height);var g=this.Hd;g.reset();1!==this.Vb&&g.scale(this.scale);(0!==this.position.x||0!==this.position.y)&&g.translate(-this.rb.x,-this.rb.y);c.setTransform(g.m11,g.m12,g.m21,g.m22,g.dx,g.dy);for(var i=this.Ua,
j=a.hb.length,g=0;g<j;g++)for(var k=c,l=i,m=a.hb.n[g].Mb,p=this.scale,r=m.length,s=0;s<r;s++){var v=m.n[s],y=v.va;y.Le(l)&&(1<y.width*p||1<y.height*p?v.Ge(k,this):Lh(v,k))}e.drawImage(b,0,0);u&&u.dC&&(e.fillStyle="red",e.fillRect(0,d.height/2,d.width,4));a=this.hb.length;for(g=0;g<a;g++)this.hb.n[g].Ge(c,this);this.Zg=this.pk=q}}};w.g(Ji,"observed",Ji.prototype.mH);
w.defineProperty(Ji,{mH:"observed"},t("ei"),function(a){var b=this.ei;a!==n&&w.i(a,A,Ji,"observed");b!==a&&!(a instanceof Ji)&&(b!==n&&(this.remove(this.ed),b.UD("ViewportBoundsChanged",this.LD),b.UD("DocumentBoundsChanged",this.KD),b.ku.remove(this),this.Qb.Jr.Ks=n),this.ei=a,a!==n&&(a.QB("ViewportBoundsChanged",this.LD),a.QB("DocumentBoundsChanged",this.KD),a.ku.add(this),this.add(this.ed),fj(this),this.Qb.Jr.Ks=a),Ci(this),this.j("observed",b,a))});w.g(Ji,"box",Ji.prototype.ed);
w.defineProperty(Ji,{ed:"box"},t("Mi"),function(a){var b=this.Mi;b!==a&&(this.Mi=a,this.j("box",b,a))});function fj(a){var b=a.ed;if(b!==n){var c=a.ei;if(c!==n){a.Zg=h;var c=c.Ua,d=b.Tv;d.wa=new cb(c.width,c.height);a=2/a.scale;d instanceof V&&(d.eb=a);b.location=new F(c.x-a/2,c.y-a/2)}}}Ji.prototype.ne=function(){var a=this.ei;return a===n?new G(0,0,0,0):a.vc};Ji.prototype.os=function(a){this.sc||(vi(this),Mh(this),Ei(this),Ci(this),fj(this),this.ya("ViewportBoundsChanged",a))};
function ej(){Af.call(this);this.name="MoveBox"}w.Da(ej,Af);ej.prototype.doStart=ej.prototype.Vy=function(){this.W=this.h.Ec=h};ej.prototype.doMouseMove=ej.prototype.Jg=function(){if(this.W){var a=this.h;if(!(a===n||a.ei===n)){var b=a.ei,c=b.Ua,d=a.N.M;b.position=new F(d.x-c.width/2,d.y-c.height/2);a.yb()}}};ej.prototype.doMouseUp=ej.prototype.pe=function(){this.W&&this.doMouseMove();this.stopTool()};ej.prototype.doStop=ej.prototype.Mk=function(){this.W=q;var a=this.h;a.Ec=q;fj(a)};
function Be(a){w.ic(this);this.$a=q;a===f?(this.S=De,this.wm="black"):"string"===typeof a?(this.S=De,this.wm=a):(u&&w.jb(a,Be,Be,"constructor:type"),this.S=a,this.wm="black");a=this.S;a===Ee?(this.jn=Kb,this.Em=Qb):this.Em=a===Fe?this.jn=Mb:this.jn=Eb;this.Au=0;this.nt=NaN;this.rA=this.sA=this.sg=this.mu=this.qg=n}w.P("Brush",Be);var De;Be.Solid=De=w.s(Be,"Solid",0);var Ee;Be.Linear=Ee=w.s(Be,"Linear",1);var Fe;Be.Radial=Fe=w.s(Be,"Radial",2);var gj;Be.Pattern=gj=w.s(Be,"Pattern",2);
Be.prototype.copy=Be.prototype.copy=function(){var a=new Be;a.S=this.S;a.wm=this.wm;a.jn=this.jn;a.Em=this.Em;a.Au=this.Au;a.nt=this.nt;this.qg!==n&&(a.qg=this.qg.copy());a.mu=this.mu;return a};Be.prototype.Za=function(){this.freeze();Object.freeze(this);return this};Be.prototype.freeze=function(){this.$a=h;this.qg!==n&&this.qg.freeze();return this};Be.prototype.Ia=function(){Object.isFrozen(this)&&w.m("cannot thaw constant: "+this);this.$a=q;this.qg!==n&&this.qg.Ia();return this};
Be.prototype.toString=function(){var a="Brush(";if(this.type===De)a+=this.color;else if(a=this.type===Ee?a+"Linear ":this.type===Fe?a+"Radial ":this.type===gj?a+"Pattern ":a+"(unknown) ",a+=this.start+" "+this.end,this.Kn!==n)for(var b=this.Kn.l;b.next();)a+=" "+b.key+":"+b.value;return a+")"};
Be.prototype.addColorStop=Be.prototype.addColorStop=function(a,b){w.H(this);(a===n||1<a||0>a)&&w.ra(a,"0 <= loc <= 1",Be,"addColorStop:loc");w.k(b,"string",Be,"addColorStop:color");this.qg===n&&(this.qg=new la("number","string"));this.qg.add(a,b);this.S===De&&(this.type=Ee);this.sg=n};w.g(Be,"type",Be.prototype.type);
w.defineProperty(Be,{type:"type"},t("S"),function(a){w.H(this,a);w.jb(a,Be,Be,"type");this.S=a;yb(this.start)&&(a===Ee?this.start=Kb:a===Fe&&(this.start=Mb));yb(this.end)&&(a===Ee?this.end=Qb:a===Fe&&(this.end=Mb));this.sg=n});w.g(Be,"color",Be.prototype.color);w.defineProperty(Be,{color:"color"},t("wm"),function(a){w.H(this,a);w.k(a,"string",Be,"color");this.wm=a;this.sg=n});w.g(Be,"start",Be.prototype.start);
w.defineProperty(Be,{start:"start"},t("jn"),function(a){w.H(this,a);a instanceof H||w.hc(a,"Spot",Be,"start");this.jn=a.O();this.sg=n});w.g(Be,"end",Be.prototype.end);w.defineProperty(Be,{end:"end"},t("Em"),function(a){w.H(this,a);a instanceof H||w.hc(a,"Spot",Be,"end");this.Em=a.O();this.sg=n});w.g(Be,"startRadius",Be.prototype.Co);w.defineProperty(Be,{Co:"startRadius"},t("Au"),function(a){w.H(this,a);w.o(a,Be,"startRadius");0>a&&w.ra(a,">= zero",Be,"startRadius");this.Au=a;this.sg=n});
w.g(Be,"endRadius",Be.prototype.Qn);w.defineProperty(Be,{Qn:"endRadius"},t("nt"),function(a){w.H(this,a);w.o(a,Be,"endRadius");0>a&&w.ra(a,">= zero",Be,"endRadius");this.nt=a;this.sg=n});w.g(Be,"colorStops",Be.prototype.Kn);w.defineProperty(Be,{Kn:"colorStops"},t("qg"),function(a){w.H(this,a);u&&w.i(a,la,Be,"colorStops");this.qg=a;this.sg=n});w.g(Be,"pattern",Be.prototype.pattern);w.defineProperty(Be,{pattern:"pattern"},t("mu"),function(a){w.H(this,a);this.mu=a;this.sg=n});
Be.randomColor=function(a,b){a===f&&(a=128);u&&(w.o(a,Be,"randomColor:min"),(0>a||255<a)&&w.ra(a,"0 <= min <= 255",Be,"randomColor:min"));b===f&&(b=Math.max(a,255));u&&(w.o(b,Be,"randomColor:max"),(b<a||255<b)&&w.ra(b,"min <= max <= 255",Be,"randomColor:max"));var c=Math.abs(b-a),d=Math.floor(a+Math.random()*c).toString(16),e=Math.floor(a+Math.random()*c).toString(16),c=Math.floor(a+Math.random()*c).toString(16);2>d.length&&(d="0"+d);2>e.length&&(e="0"+e);2>c.length&&(c="0"+c);return"#"+d+e+c};
function P(){w.ic(this);this.wk=n;this.Ab="";this.Kf=this.Hg=h;this.ve=this.we=n;this.rb=(new F(NaN,NaN)).freeze();this.ze=(new cb(NaN,NaN)).freeze();this.Pd=pc;this.cj=jc;this.Hd=new Wa;this.rm=new Wa;this.tk=new Wa;this.Vb=1;this.nc=0;this.nh=ch;this.dq=(new gb(0)).freeze();this.Rc=(new G(NaN,NaN,NaN,NaN)).freeze();this.Hb=(new G(NaN,NaN,NaN,NaN)).freeze();this.Jc=(new G(0,0,NaN,NaN)).freeze();this.Ic=this.ac=this.nl=this.Om=h;this.wq=n;this.Xg=Eb;this.Ug=10;this.Tg=hj;this.Wg=0;this.sp=n;this.up=
this.tp=q;this.vp=Infinity;this.th=Eb;this.qh=10;this.ph=hj;this.sh=0;this.gr=n;this.ir=this.hr=q;this.jr=Infinity;this.Fd=n;this.Aa=Ib;this.Lp=q;this.No=Ib;this.Lq=0;this.zk=1;this.Y=0;this.ak=1;this.Oq=-Infinity;this.Nq=0;this.Pq=ic;this.Qq=ij;this.Yo="";this.Nh=this.ni=this.$h=this.lq=this.kq=this.ai=this.bi=this.ci=this.nq=this.mq=this.Mh=this.Ph=this.Lh=n;this.Ep=q;this.oc=this.Io=this.Lo=this.Ko=this.Jo=n;this.tm=q;this.kl=n;this.DB=new G(NaN,NaN,NaN,NaN);this.hl=q;this.$j=n;this.sm=q;this.Cl=
n}w.P("GraphObject",P);
P.prototype.xb=function(a){a.Ab=this.Ab;a.Hg=this.Hg;a.Kf=this.Kf;a.we=this.we;a.ve=this.ve;a.rb.Xa(this.rb);a.ze.Xa(this.ze);a.Pd=this.Pd.O();a.cj=this.cj.O();a.Vb=this.Vb;a.nc=this.nc;a.nh=this.nh;a.dq.Xa(this.dq);a.Rc.Xa(this.Rc);a.Hb.Xa(this.Hb);a.Jc.Xa(this.Jc);a.wq=this.wq;a.Xg=this.Xg.O();a.Ug=this.Ug;a.Tg=this.Tg;a.Wg=this.Wg;a.sp=this.sp;a.tp=this.tp;a.up=this.up;a.vp=this.vp;a.th=this.th.O();a.qh=this.qh;a.ph=this.ph;a.sh=this.sh;a.gr=this.gr;a.hr=this.hr;a.ir=this.ir;a.jr=this.jr;a.Aa=
this.Aa.O();a.Lp=this.Lp;a.No=this.No.O();a.Lq=this.Lq;a.zk=this.zk;a.Y=this.Y;a.ak=this.ak;a.Oq=this.Oq;a.Nq=this.Nq;a.Pq=this.Pq.O();a.Qq=this.Qq;a.Yo=this.Yo;a.Lh=this.Lh;a.Ph=this.Ph;a.Mh=this.Mh;a.mq=this.mq;a.nq=this.nq;a.ci=this.ci;a.bi=this.bi;a.ai=this.ai;a.kq=this.kq;a.lq=this.lq;a.$h=this.$h;a.ni=this.ni;a.Nh=this.Nh;a.Ep=this.Ep;a.Jo=this.Jo;a.Ko=this.Ko;a.Lo=this.Lo;a.Io=this.Io;a.oc=this.oc;a.tm=this.tm;if(Array.isArray(this.kl)){a.kl=this.kl.slice(0);for(var b=0;b<this.kl.length;b++){var c=
this.kl[b];a[c]=this[c]}}a.sm=this.sm;a.ac=this.ac;a.Ic=this.Ic;a.tk=this.tk.copy();a.hl=this.hl;this.$j!==n&&(a.$j=this.$j.copy())};P.prototype.xh=function(a){a.Fd=n;a.Cl=n;a.R()};P.prototype.copy=P.prototype.copy=function(){var a=new this.constructor;this.xb(a);return a};P.prototype.toString=function(){return w.Ok(Object.getPrototypeOf(this))+"#"+w.ec(this)};var jj;P.None=jj=w.s(P,"None",0);var ch;P.Default=ch=w.s(P,"Default",0);var gd;P.Fill=gd=w.s(P,"Fill",3);var dh;
P.Uniform=dh=w.s(P,"Uniform",1);var eh;P.UniformToFill=eh=w.s(P,"UniformToFill",2);var kj;P.Vertical=kj=w.s(P,"Vertical",4);var lj;P.Horizontal=lj=w.s(P,"Horizontal",5);P.prototype.Nc=function(a,b,c,d,e,g,i){var j=this.ca;if(j!==n&&(j.em(a,b,c,d,e,g,i),this.tm&&(c===this&&a===he)&&(a=this.Qr(),a!==n)))for(c=this.oc.l;c.next();)d=c.value,e=a.data,g=d.Bo,g!==n&&(e=a.Ie(g)),e!==n&&(d.LE(this,e,b),g=d.Bo,g!==n&&(e=a,""!==g&&(e=a.Ie(g)),e!==n&&(g=d.jm,i=a,""!==g&&(i=a.Ie(g)),i!==n&&d.ME(i,e,b))))};
P.prototype.j=function(a,b,c){this.Nc(he,a,this,b,c)};function mj(a,b,c,d,e){var g=a.Rc,i=a.tk;i.reset();nj(a,i,b,c,d,e);a.tk=i;g.x=b;g.y=c;g.width=d;g.height=e;i.as()||i.HE(g)}P.prototype.IC=function(a,b){if(this.Kf===q)return q;var c=this.Sa,d=a.Rl(b);return $a(a.x,a.y,0,0,0,c.height)<d||$a(a.x,a.y,0,c.height,c.width,c.height)<d||$a(a.x,a.y,c.width,c.height,c.width,0)<d||$a(a.x,a.y,c.width,0,0,0)<d?h:q};
function oj(a,b,c,d){if(a instanceof x)for(var e=a.Fa.length;e--;){var g=a.Fa.n[e];if(g.visible){var i=g.va,j=a.va;i.x>j.width||(i.y>j.height||0>i.x+i.width||0>i.y+i.height)||(oj(g,b,c,d),b!==n&&(g=b(g)),g&&(c===n||c(g))&&d.add(g))}}}P.prototype.Hh=ca(h);
P.prototype.containsPoint=P.prototype.ua=function(a){u&&w.i(a,F,P,"containsPoint:p");var b=kb(this.transform,a),c=this.va;if(!c.T())return q;if(w.Zx){var d=this.Sa,e=this.Xl()*(this.h!==n?this.h.scale:1),g=1/e;if(10>d.width*e&&10>d.height*e)return jb(c.x-5*g,c.y-5*g,c.width+10*g,c.height+10*g,b.x,b.y)}return(this.Bc!==f||this instanceof V?jb(c.x-5,c.y-5,c.width+10,c.height+10,b.x,b.y):c.ua(b))?this.$j&&!this.$j.ua(b)?q:this.ve!==n&&c.ua(b)||this.we!==n&&this.Jc.ua(a)?h:this.tj(a):q};
P.prototype.tj=function(a){var b=this.Sa;return jb(0,0,b.width,b.height,a.x,a.y)};P.prototype.containsRect=P.prototype.Nl=function(a){u&&w.i(a,G,P,"containsRect:r");if(0===this.angle)return this.va.Nl(a);var b=this.Sa,b=new G(0,0,b.width,b.height),c=this.transform;return b.ua(c.Ci(new F(a.x,a.y)))&&b.ua(c.Ci(new F(a.x,a.bottom)))&&b.ua(c.Ci(new F(a.right,a.bottom)))&&b.ua(c.Ci(new F(a.right,a.y)))};
P.prototype.containedInRect=P.prototype.dv=function(a,b){u&&w.i(a,G,P,"containedInRect:r");if(b===f)return a.Nl(this.va);var c=this.Sa;return!a.ua(b.Ta(new F(0,0)))||!a.ua(b.Ta(new F(0,c.height)))||!a.ua(b.Ta(new F(c.width,c.height)))||!a.ua(b.Ta(new F(c.width,0)))?q:h};
P.prototype.intersectsRect=P.prototype.Le=function(a,b){u&&w.i(a,G,P,"intersectsRect:r");if(b===f&&(b=this.transform,0===this.angle))return a.Le(this.va);var c=this.Sa,d=b,e=new F(0,0),g=new F(0,c.height),i=new F(c.width,c.height),j=new F(c.width,0);if(a.ua(d.Ta(e))||a.ua(d.Ta(g))||a.ua(d.Ta(i))||a.ua(d.Ta(j)))return h;c=new G(0,0,c.width,c.height);return c.ua(d.Ci(new F(a.x,a.y)))||c.ua(d.Ci(new F(a.x,a.bottom)))||c.ua(d.Ci(new F(a.right,a.bottom)))||c.ua(d.Ci(new F(a.right,a.y)))||Qc(a,e,g)||Qc(a,
g,i)||Qc(a,i,j)||Qc(a,j,e)?h:q};P.prototype.getDocumentPoint=P.prototype.Ob=function(a){yb(a)&&w.m("Spot must be real");var b=this.Sa,a=new F(a.x*b.width+a.offsetX,a.y*b.height+a.offsetY);this.ie.Ta(a);return a};P.prototype.getDocumentAngle=P.prototype.Un=function(){var a=this.ie;return Math.atan2(a.m12,a.m11)*(180/Math.PI)};P.prototype.getDocumentScale=P.prototype.Xl=function(){var a=this.Vb;return this.fa!==n?a*this.fa.Xl():a};P.prototype.getLocalPoint=P.prototype.QC=function(a){return this.ie.Ci(a.copy())};
P.prototype.getNearestIntersectionPoint=P.prototype.RC=function(a,b,c){return this.Ur(a.x,a.y,b.x,b.y,c)};da=P.prototype;
da.Ur=function(a,b,c,d,e){var g=this.transform,i=1/(g.m11*g.m22-g.m12*g.m21),j=g.m22*i,k=-g.m12*i,l=-g.m21*i,m=g.m11*i,p=i*(g.m21*g.dy-g.m22*g.dx),r=i*(g.m12*g.dx-g.m11*g.dy);if(this.Fk!==n)return g=this.va,Pc(g.left,g.top,g.right,g.bottom,a,b,c,d,e);if(!(this instanceof x)||this instanceof x&&this.background!==n)return i=a*j+b*l+p,a=a*k+b*m+r,j=c*j+d*l+p,c=c*k+d*m+r,e.V(0,0),d=this.Sa,c=Pc(0,0,d.width,d.height,i,a,j,c,e),e.transform(g),c;if(this instanceof x&&(this.Fk===n||this.Fk===f)){i=a*j+b*
l+p;a=a*k+b*m+r;j=c*j+d*l+p;d=c*k+d*m+r;e.V(j,d);k=(j-i)*(j-i)+(d-a)*(d-a);c=q;m=this.Fa.n;r=m.length;l=new F;for(p=0;p<r;p++)b=m[p],b.visible&&b.Ur(i,a,j,d,l)&&(c=h,b=(i-l.x)*(i-l.x)+(a-l.y)*(a-l.y),b<k&&(k=b,e.set(l)));e.transform(g);return c}w.m("Unknown GraphObject case");return q};
function Hh(a,b,c,d,e){if(a.ac!==q){var g=a.margin,i=g.top+g.bottom,b=Math.max(b-(g.right+g.left),0),c=Math.max(c-i,0),g=a.wa,i=0;a.eb&&(i=a.eb);var b=isFinite(g.width)?g.width+i:b,c=isFinite(g.height)?g.height+i:c,g=d,i=e,j=a instanceof x;switch(pj(a)){case jj:i=g=0;j&&(c=b=Infinity);break;case gd:isFinite(b)&&b>d&&(g=b);isFinite(c)&&c>e&&(i=c);break;case lj:isFinite(b)&&b>d&&(g=b);i=0;j&&(c=Infinity);break;case kj:isFinite(c)&&c>e&&(i=c),g=0,j&&(b=Infinity)}var j=a.Zd,k=a.ue;g>j.width&&k.width<
j.width&&(g=j.width);i>j.height&&k.height<j.height&&(i=j.height);d=Math.max(g/a.scale,k.width);e=Math.max(i/a.scale,k.height);j.width<d&&(d=Math.min(k.width,d));j.height<e&&(e=Math.min(k.height,e));b=Math.min(j.width,b);c=Math.min(j.height,c);b=Math.max(d,b);c=Math.max(e,c);g=a.angle;if(90===g||270===g)g=b,b=c,c=g,g=d,d=e,e=g;a.Rc.Ia();a.fs(b,c,d,e);a.Rc.freeze();a.Rc.T()||w.m("Non-real measuredBounds has been set");a.ac=q}}
da.Cc=function(a,b,c,d,e){qj(this);var g=this.DB;g.set(this.Hb);this.Hb.Ia();if(this.Ic===q){var i=this.Hb;i.x=a;i.y=b;i.width=c;i.height=d}else this.sj(a,b,c,d);this.Hb.freeze();this.$j=e===f?n:e;e!==f?this.hl=h:this.fa&&(c=this.fa.Jc,d=this.xa,this.Fk!==n&&(d=this.Hb),e=b+d.height,i=a+d.width,this.hl=!(0<=a&&i<=c.width&&0<=b&&e<=c.height),this instanceof na&&(this.Pt>d.height&&(this.hl=h),this.Wp.Gi>d.width&&(this.hl=h)));this.Hb.T()||w.m("Non-real actualBounds has been set");rj(this,g,this.Hb)};
da.sj=aa();function sj(a,b,c,d,e){var g=a.va;g.x=b;g.y=c;g.width=d;g.height=e;if(!a.wa.T()){var g=a.Rc,c=a.margin,b=c.right+c.left,i=c.top+c.bottom,c=g.width+b,g=g.height+i,d=d+b,e=e+i,b=pj(a);c===d&&g===e&&(b=jj);switch(b){case jj:if(c>d||g>e)a.ac=h,Hh(a,c>d?d:c,g>e?e:g);break;case gd:a.ac=h;Hh(a,d,e,0,0);break;case lj:a.ac=h;Hh(a,d,g,0,0);break;case kj:a.ac=h,Hh(a,c,e,0,0)}}}
function rj(a,b,c){a.Ic=q;var d=a.ca;if(d!==n){var e=d.h;if(e!==n)if(tj(d),a instanceof R){d=q;if(e.Th===q){var g=e.vc,i=e.padding,e=g.x+i.left,j=g.y+i.top,k=g.width-2*i.right,g=g.height-2*i.bottom;b.T()&&(b.x>e&&b.y>j&&b.right<k&&b.bottom<g&&c.x>e&&c.y>j&&c.right<k&&c.bottom<g)&&(d=h)}(a.fu===h||!b.I(c))&&Oi(a,d)}else if(uj(a,d),vj(a),b=a.ca,b!==n&&(b.Ak===a||b.Dl===a||b.El===a))b.fu=h}}function uj(a,b){a.Re!==n&&(b.fu=h);if(a instanceof x)for(var c=a.Fa,d=c.length,e=0;e<d;e++)uj(c.n[e],b)}
da.Ge=function(a,b){if(this.Hg)if(this instanceof x&&(this.type===wj||this.type===xj)){var c=this.Hb;0===c.width||(0===c.height||isNaN(c.x)||isNaN(c.y))||(this.ve!==n&&(yj(this,a,this.ve,h,h),a.fillRect(c.x,c.y,c.width,c.height)),this.we!==n&&(yj(this,a,this.we,h),a.fillRect(c.x,c.y,c.width,c.height)),this.Pn(a,b))}else{var d=q;if(this instanceof R){d=h;if(!this.nb())return;if(this.Hf){var e=this.hn;a.shadowOffsetX=e.x*b.scale;a.shadowOffsetY=e.y*b.scale;a.shadowColor=this.gn;a.shadowBlur=this.fn}}var g=
q;this.ca&&(g=this.ca.$n);c=this.Hb;if(!(0===c.width||0===c.height||isNaN(c.x)||isNaN(c.y))){var e=this.transform,i=this.fa,j=this.rm;j.reset();i!==n&&(i.Hh()?j.multiply(i.ie):i.fa!==n&&j.multiply(i.fa.ie));j.multiply(this.Hd);if(j=this.hl){u&&u.oG&&u.trace("clip"+this.toString());var k=i.Hh()?i.Sa:i.va;if(this.$j)var l=this.$j,m=Math.max(l.x,Math.max(c.x,k.x)),p=Math.max(l.y,Math.max(c.y,k.y)),r=Math.abs(m-Math.min(l.right,Math.min(c.right,k.right))),l=Math.abs(p-Math.min(l.bottom,Math.min(c.bottom,
k.bottom)));else m=Math.max(c.x,k.x),p=Math.max(c.y,k.y),r=Math.min(c.right,k.right)-m,l=Math.min(c.bottom,k.bottom)-p;if(m>c.width+c.x||c.x>k.width+k.x||p>c.height+c.y||c.y>k.height+k.y)return;a.save();a.beginPath();a.rect(m,p,r,l);a.clip()}this.ve!==n&&(yj(this,a,this.ve,h,h),a.fillRect(c.x,c.y,c.width,c.height));e.as()||a.transform(e.m11,e.m12,e.m21,e.m22,e.dx,e.dy);this.we!==n&&(p=this.Sa,k=c=0,m=p.width,p=p.height,r=0,this instanceof V&&(p=this.Ga.Eb,c=p.x,k=p.y,m=p.width,p=p.height,r=this.oh),
yj(this,a,this.we,h),a.fillRect(c-r/2,k-r/2,m+r,p+r));if(g&&(this.we!==n||this.ve!==n||i!==n&&i.sm||i!==n&&i.type===Xh&&i.Fl!==this)){this.sm=h;var s=[a.shadowOffsetX,a.shadowOffsetY,a.shadowBlur];a.shadowOffsetX=0;a.shadowOffsetY=0;a.shadowBlur=0}else this.sm=q;this.Pn(a,b);g&&this.sm===h&&(a.shadowOffsetX=s[0],a.shadowOffsetY=s[1],a.shadowBlur=s[2]);d&&g&&(a.shadowOffsetX=0,a.shadowOffsetY=0,a.shadowBlur=0);j?(a.restore(),li(b,a)):e.as()||(d=1/(e.m11*e.m22-e.m12*e.m21),a.transform(e.m22*d,-e.m12*
d,-e.m21*d,e.m11*d,d*(e.m21*e.dy-e.m22*e.dx),d*(e.m12*e.dx-e.m11*e.dy)))}}};da.Pn=aa();
function yj(a,b,c,d,e){if(c!==n)if("string"===typeof c)d?b.nm!==c&&(b.fillStyle=c,b.nm=c):b.om!==c&&(b.strokeStyle=c,b.om=c);else if(c.type===De)c=c.color,d?b.nm!==c&&(b.fillStyle=c,b.nm=c):b.om!==c&&(b.strokeStyle=c,b.om=c);else{var g,i=a.Sa,j=i.width,i=i.height;if(c.sg&&c.type===gj||c.sA==j&&c.rA==i)g=c.sg;else{var k,l,m,p=m=0;e&&(a=a.va,j=a.width,i=a.height,m=a.x,p=a.y);c.start instanceof F?(a=c.start.x,e=c.start.y):c.start instanceof H?(a=c.start.x*j,e=c.start.y*i):(a=Mb.x*j,e=Mb.y*i);c.end instanceof
F?(k=c.end.x,l=c.end.y):c.end instanceof H?(k=c.end.x*j,l=c.end.y*i):c.type===Ee?(k=Qb.x*j,l=Qb.y*i):(k=Mb.x*j,l=Mb.y*i);a+=m;k+=m;e+=p;l+=p;c.type===Ee?g=b.createLinearGradient(a,e,k,l):c.type===Fe?(m=isNaN(c.Qn)?Math.max(j,i)/2:c.Qn,isNaN(c.Co)?(g=0,m=Math.max(j,i)/2):g=c.Co,g=b.createRadialGradient(a,e,g,k,l,m)):c.type===gj?g=b.createPattern(c.pattern,"repeat"):w.hc(c.type,"Brush type");if(c.type!==gj&&(m=c.Kn))for(m=m.l;m.next();)g.addColorStop(m.key,m.value);c.sg=g;c.sA=j;c.rA=i}d?b.nm!==g&&
(b.fillStyle=g,b.nm=g):b.om!==g&&(b.strokeStyle=g,b.om=g)}}P.prototype.isContainedBy=P.prototype.Di=function(a){if(a instanceof x)a:{if(!(this===a||a===n))for(var b=this.fa;b!==n;){if(b===a){a=h;break a}b=b.fa}a=q}else a=q;return a};P.prototype.isVisibleObject=P.prototype.Sk=function(){if(!this.visible)return q;var a=this.fa;return a!==n?a.Sk():h};
function zj(a){if(a.Om===h){var b=a.Hd;b.reset();if(!a.Hb.T()||!a.Rc.T()){a.Om=q;return}b.translate(a.Hb.x,a.Hb.y);b.translate(-a.xa.x,-a.xa.y);var c=a.Sa;nj(a,b,c.x,c.y,c.width,c.height);a.Om=q;a.nl=h}a.nl===h&&(a.fa===n?(a.rm.set(a.Hd),a.nl=q):a.fa.ie!==n&&(b=a.rm,b.reset(),b.multiply(a.fa.rm),b.multiply(a.Hd),a.nl=q))}
function nj(a,b,c,d,e,g){1!==a.scale&&b.scale(a.scale);if(0!==a.angle){var i=Mb;a.Yf&&rb(a.Yf)&&(i=a.Yf);var j=new F;if(a instanceof R&&a.Xb!==a){c=a.Xb;d=c.Sa;j.hm(d.x,d.y,d.width,d.height,i);c.tk.Ta(j);j.offset(-c.xa.x,-c.xa.y);for(i=c.fa;i!==n&&i!==a;)i.tk.Ta(j),j.offset(-i.xa.x,-i.xa.y),i=i.fa}else j.hm(c,d,e,g,i);b.rotate(a.angle,j.x,j.y)}}
P.prototype.R=function(a){if(this.ac!==h){this.Ic=this.ac=h;this.fa!==n?a||(this.fa.ac=q,this.fa.R()):(a=this.h,a!==n&&(a.$g.add(this),this instanceof T&&(a.sa.tb||this.Lg(),this.xd!==n&&Aj(this.xd)),a.yb()));if(this instanceof x){var a=this.S===Xh,b=n,c=this.Fa,d=c.length;a&&(b=Dj(this,c,d));for(var e=0;e<d;e++){var g=c.n[e];a&&g===b?g.R(h):g.wa.T()||(g instanceof bh||g instanceof x||pj(g)!==jj)&&g.R(h)}}vj(this)}};
function Lj(a){if(a.ac===q&&(a.ac=h,a.Ic=h,a instanceof x))for(var a=a.Fa.n,b=a.length,c=0;c<b;c++)Lj(a[c])}function Aj(a){if(a.Ic===q){if(a.fa!==n)Aj(a.fa);else{var b=a.h;b!==n&&(b.$g.add(a),a instanceof T&&a.Lg(),b.yb())}a.Ic=h}}function qj(a){if(a.Om===q&&(a.Om=h,a.nl=h,a instanceof x))for(a=a.elements;a.next();)Oj(a.value)}function Oj(a){a.nl=h;if(a instanceof x)for(a=a.elements;a.next();)Oj(a.value)}function vj(a){if(a.fa!==n)vj(a.fa);else{var b=a.h;b!==n&&a.Hb.T()&&Mh(b,a.Hb)}}
function pj(a){var b=a.Fh,c=a.fa;if(c&&c.S===Pj)return Qj(a,c.Wd(a.mc),c.Vd(a.Dc));if(c&&c.S===Xh){if(c.Fl===n){var d=c.Fa,e=d.length;Dj(c,d,e)}if(c.Fl===a)return gd}if(b===ch){if(c){c.S===ah&&c.Fl===n&&(d=c.Fa,e=d.length,Dj(c,d,e));if(c.Fl===a)return gd;a=c.Sy;return a===ch?jj:a}return jj}return b}
function Qj(a,b,c){var d=a.Fh;if(d!==ch)return d;var e=d=f;switch(b.Fh){case kj:e=h;break;case gd:e=h}switch(c.Fh){case lj:d=h;break;case gd:d=h}a=a.fa.Sy;d=d===f&&(a===lj||a===gd)?h:q;e=e===f&&(a===kj||a===gd)?h:q;return d===h&&e===h?gd:d===h?lj:e===h?kj:jj}w.g(P,"segmentOrientation",P.prototype.vs);w.defineProperty(P,{vs:"segmentOrientation"},t("Qq"),function(a){var b=this.Qq;b!==a&&(u&&w.jb(a,U,P,"segmentOrientation"),this.Qq=a,this.R(),this.j("segmentOrientation",b,a))});
w.g(P,"segmentIndex",P.prototype.Dh);w.defineProperty(P,{Dh:"segmentIndex"},t("Oq"),function(a){u&&w.k(a,"number",P,"segmentIndex");var a=Math.round(a),b=this.Oq;b!==a&&(this.Oq=a,this.R(),this.j("segmentIndex",b,a))});w.g(P,"segmentFraction",P.prototype.Lz);w.defineProperty(P,{Lz:"segmentFraction"},t("Nq"),function(a){u&&w.k(a,"number",P,"segmentFraction");isNaN(a)?a=0:0>a?a=0:1<a&&(a=1);var b=this.Nq;b!==a&&(this.Nq=a,this.R(),this.j("segmentFraction",b,a))});w.g(P,"segmentOffset",P.prototype.Mz);
w.defineProperty(P,{Mz:"segmentOffset"},t("Pq"),function(a){var b=this.Pq;b.I(a)||(u&&w.i(a,F,P,"segmentOffset"),this.Pq=a=a.O(),this.R(),this.j("segmentOffset",b,a))});w.g(P,"stretch",P.prototype.Fh);w.defineProperty(P,{Fh:"stretch"},t("nh"),function(a){var b=this.nh;b!==a&&(u&&w.jb(a,P,P,"stretch"),this.nh=a,this.R(),this.j("stretch",b,a))});w.g(P,"name",P.prototype.name);
w.defineProperty(P,{name:"name"},t("Ab"),function(a){var b=this.Ab;b!==a&&(u&&w.k(a,"string",P,"name"),this.Ab=a,this.j("name",b,a))});w.g(P,"visible",P.prototype.visible);w.defineProperty(P,{visible:"visible"},t("Hg"),function(a){var b=this.Hg;b!==a&&(u&&w.k(a,"boolean",P,"visible"),this.Hg=a,this.j("visible",b,a),b=this.fa,b!==n?b.R():this instanceof R&&(this.R(),tj(this),a?(this.F(Rj),this.Ji()):(this.F(Sj),this.vh())),vj(this),Tj(this))});w.g(P,"areaBackground",P.prototype.Fk);
w.defineProperty(P,{Fk:"areaBackground"},t("ve"),function(a){var b=this.ve;if(b!==a&&(a===n||"string"===typeof a||a instanceof Be))a instanceof Be&&a.freeze(),this.ve=a,vj(this),this.j("areaBackground",b,a)});w.g(P,"background",P.prototype.background);w.defineProperty(P,{background:"background"},t("we"),function(a){var b=this.we;if(b!==a&&(a===n||"string"===typeof a||a instanceof Be))a instanceof Be&&a.freeze(),this.we=a,vj(this),this.j("background",b,a)});
w.u(P,{ca:"part"},function(){if(this instanceof R)return this;if(this.Cl)return this.Cl;var a;for(a=this.fa;a;){if(a instanceof R)return this.Cl=a;a=a.fa}return n});P.prototype.Yk=ba("wk");w.u(P,{fa:"panel"},t("wk"));w.u(P,{Ja:"layer"},function(){var a=this.ca;return a!==n?a.Ja:n});w.u(P,{h:"diagram"},function(){var a=this.ca;return a!==n?a.h:n},{configurable:h});w.g(P,"position",P.prototype.position);
w.defineProperty(P,{position:"position"},t("rb"),function(a){var b=this.rb;if(!b.I(a)){u&&w.i(a,F,P,"position");if(this instanceof R){if(!a.T())return;var c=this.aj,d=this.Lt,e=c.copy();c.V(a.x+d.x,a.y+d.y);c.I(e)||this.j("location",e,c);if(this.Ic===q){this.rb=a=a.O();Uj(this);qj(this);this.j("position",b,a);return}}this.rb=a=a.O();Aj(this);qj(this);this.j("position",b,a)}});w.u(P,{va:"actualBounds"},t("Hb"));w.g(P,"scale",P.prototype.scale);
w.defineProperty(P,{scale:"scale"},t("Vb"),function(a){var b=this.Vb;b!==a&&(u&&w.o(a,P,"scale"),0>=a&&w.m("GraphObject.scale must be greater than zero"),this.Vb=a,qj(this),this.R(),this.j("scale",b,a))});w.g(P,"angle",P.prototype.angle);w.defineProperty(P,{angle:"angle"},t("nc"),function(a){var b=this.nc;b!==a&&(u&&w.o(a,P,"angle"),a%=360,0>a&&(a+=360),this.nc=a,this.R(),qj(this),this.j("angle",b,a))});w.g(P,"desiredSize",P.prototype.wa);
w.defineProperty(P,{wa:"desiredSize"},t("ze"),function(a){var b=this.ze;b.I(a)||(u&&w.i(a,cb,P,"desiredSize"),this.ze=a=a.O(),this.R(),this instanceof V&&this.Wf(),this.j("desiredSize",b,a))});w.g(P,"width",P.prototype.width);w.defineProperty(P,{width:"width"},function(){return this.ze.width},function(a){if(this.ze.width!==a){u&&w.k(a,"number",P,"width");var b=this.ze;this.ze=a=(new cb(a,this.ze.height)).freeze();this.R();this instanceof V&&this.Wf();this.j("desiredSize",b,a)}});w.g(P,"height",P.prototype.height);
w.defineProperty(P,{height:"height"},function(){return this.ze.height},function(a){if(this.ze.height!==a){u&&w.k(a,"number",P,"height");var b=this.ze;this.ze=a=(new cb(this.ze.width,a)).freeze();this.R();this instanceof V&&this.Wf();this.j("desiredSize",b,a)}});w.g(P,"minSize",P.prototype.ue);
w.defineProperty(P,{ue:"minSize"},t("Pd"),function(a){var b=this.Pd;b.I(a)||(u&&w.i(a,cb,P,"minSize"),a=a.copy(),isNaN(a.width)&&(a.width=0),isNaN(a.height)&&(a.height=0),a.freeze(),this.Pd=a,this.R(),this.j("minSize",b,a))});w.g(P,"maxSize",P.prototype.Zd);w.defineProperty(P,{Zd:"maxSize"},t("cj"),function(a){var b=this.cj;b.I(a)||(u&&w.i(a,cb,P,"maxSize"),a=a.copy(),isNaN(a.width)&&(a.width=Infinity),isNaN(a.height)&&(a.height=Infinity),a.freeze(),this.cj=a,this.R(),this.j("maxSize",b,a))});
w.u(P,{xa:"measuredBounds"},t("Rc"));w.u(P,{Sa:"naturalBounds"},t("Jc"),{configurable:h});w.g(P,"margin",P.prototype.margin);w.defineProperty(P,{margin:"margin"},t("dq"),function(a){"number"===typeof a?a=new gb(a):u&&w.i(a,gb,P,"margin");var b=this.dq;b.I(a)||(this.dq=a=a.O(),this.R(),this.j("margin",b,a))});w.u(P,{transform:n},function(){this.Om===h&&zj(this);return this.Hd});w.u(P,{ie:n},function(){this.nl===h&&zj(this);return this.rm});w.g(P,"alignment",P.prototype.Cb);
w.defineProperty(P,{Cb:"alignment"},t("Aa"),function(a){var b=this.Aa;b.I(a)||(u?w.i(a,H,P,"alignment"):yb(a)&&!Cb(a)&&w.m("alignment must be a real Spot or Spot.Default"),this.Aa=a=a.O(),Aj(this),this.j("alignment",b,a))});w.g(P,"column",P.prototype.Dc);w.defineProperty(P,{Dc:"column"},t("Y"),function(a){u&&w.o(a,P,"column");var a=Math.round(a),b=this.Y;b!==a&&(0>a&&w.ra(a,">= 0",P,"column"),this.Y=a,this.R(),this.j("column",b,a))});w.g(P,"columnSpan",P.prototype.iC);
w.defineProperty(P,{iC:"columnSpan"},t("ak"),function(a){u&&w.o(a,P,"columnSpan");var a=Math.round(a),b=this.ak;b!==a&&(1>a&&w.ra(a,">= 1",P,"columnSpan"),this.ak=a,this.R(),this.j("columnSpan",b,a))});w.g(P,"row",P.prototype.mc);w.defineProperty(P,{mc:"row"},t("Lq"),function(a){u&&w.o(a,P,"row");var a=Math.round(a),b=this.Lq;b!==a&&(0>a&&w.ra(a,">= 0",P,"row"),this.Lq=a,this.R(),this.j("row",b,a))});w.g(P,"rowSpan",P.prototype.rowSpan);
w.defineProperty(P,{rowSpan:"rowSpan"},t("zk"),function(a){u&&w.o(a,P,"rowSpan");var a=Math.round(a),b=this.zk;b!==a&&(1>a&&w.ra(a,">= 1",P,"rowSpan"),this.zk=a,this.R(),this.j("rowSpan",b,a))});w.g(P,"isPanelMain",P.prototype.Fi);w.defineProperty(P,{Fi:"isPanelMain"},t("Lp"),function(a){var b=this.Lp;b!==a&&(u&&w.k(a,"boolean",P,"isPanelMain"),this.Lp=a,this.R(),this.j("isPanelMain",b,a))});w.g(P,"alignmentFocus",P.prototype.oj);
w.defineProperty(P,{oj:"alignmentFocus"},t("No"),function(a){var b=this.No;b.I(a)||(u?w.i(a,H,P,"alignmentFocus"):yb(a)&&!Cb(a)&&w.m("alignmentFocus must be a real Spot or Spot.Default"),this.No=a=a.O(),this.R(),this.j("alignmentFocus",b,a))});w.g(P,"portId",P.prototype.Re);
w.defineProperty(P,{Re:"portId"},t("wq"),function(a){var b=this.wq;if(b!==a){u&&a!==n&&w.k(a,"string",P,"portId");var c=this.ca;c!==n&&!(c instanceof T)&&(w.m("portID being set on a Link: "+a),c=n);b!==n&&c&&Vj(c,this);this.wq=a;a!==n&&c&&(c.$c===n&&Wj(c),Xj(c,this));this.j("portId",b,a)}});function Yj(a){var b={value:n};Zj(a,b);return b.value}function Zj(a,b){var c=a.fa;return c===n||!Zj(c,b)&&a.visible?(b.value=a,q):h}function Tj(a){var b=a.ca;b instanceof T&&(a=a.h)&&!a.sa.tb&&b.Lg()}
w.g(P,"toSpot",P.prototype.ob);w.defineProperty(P,{ob:"toSpot"},t("th"),function(a){var b=this.th;b.I(a)||(u&&w.i(a,H,P,"toSpot"),this.th=a=a.O(),this.j("toSpot",b,a),Tj(this))});w.g(P,"toEndSegmentLength",P.prototype.$k);w.defineProperty(P,{$k:"toEndSegmentLength"},t("qh"),function(a){var b=this.qh;b!==a&&(u&&w.k(a,"number",P,"toEndSegmentLength"),0>a&&w.ra(a,">= 0",P,"toEndSegmentLength"),this.qh=a,this.j("toEndSegmentLength",b,a),Tj(this))});w.g(P,"toEndSegmentDirection",P.prototype.Ds);
w.defineProperty(P,{Ds:"toEndSegmentDirection"},t("ph"),function(a){var b=this.ph;b!==a&&(u&&w.jb(a,T,P,"toEndSegmentDirection"),this.ph=a,this.j("toEndSegmentDirection",b,a),Tj(this))});w.g(P,"toShortLength",P.prototype.Es);w.defineProperty(P,{Es:"toShortLength"},t("sh"),function(a){var b=this.sh;b!==a&&(u&&w.k(a,"number",P,"toShortLength"),this.sh=a,this.j("toShortLength",b,a),Tj(this))});w.g(P,"toLinkable",P.prototype.Xz);
w.defineProperty(P,{Xz:"toLinkable"},t("gr"),function(a){var b=this.gr;b!==a&&(u&&a!==n&&w.k(a,"boolean",P,"toLinkable"),this.gr=a,this.j("toLinkable",b,a))});w.g(P,"toLinkableDuplicates",P.prototype.zE);w.defineProperty(P,{zE:"toLinkableDuplicates"},t("hr"),function(a){var b=this.hr;b!==a&&(u&&w.k(a,"boolean",P,"toLinkableDuplicates"),this.hr=a,this.j("toLinkableDuplicates",b,a))});w.g(P,"toLinkableSelfNode",P.prototype.AE);
w.defineProperty(P,{AE:"toLinkableSelfNode"},t("ir"),function(a){var b=this.ir;b!==a&&(u&&w.k(a,"boolean",P,"toLinkableSelfNode"),this.ir=a,this.j("toLinkableSelfNode",b,a))});w.g(P,"toMaxLinks",P.prototype.BE);w.defineProperty(P,{BE:"toMaxLinks"},t("jr"),function(a){var b=this.jr;b!==a&&(u&&w.o(a,P,"toMaxLinks"),0>a&&w.ra(a,">= 0",P,"toMaxLinks"),this.jr=a,this.j("toMaxLinks",b,a))});w.g(P,"fromSpot",P.prototype.kb);
w.defineProperty(P,{kb:"fromSpot"},t("Xg"),function(a){var b=this.Xg;b.I(a)||(u&&w.i(a,H,P,"fromSpot"),this.Xg=a=a.O(),this.j("fromSpot",b,a),Tj(this))});w.g(P,"fromEndSegmentLength",P.prototype.Nk);w.defineProperty(P,{Nk:"fromEndSegmentLength"},t("Ug"),function(a){var b=this.Ug;b!==a&&(u&&w.k(a,"number",P,"fromEndSegmentLength"),0>a&&w.ra(a,">= 0",P,"fromEndSegmentLength"),this.Ug=a,this.j("fromEndSegmentLength",b,a),Tj(this))});w.g(P,"fromEndSegmentDirection",P.prototype.Sr);
w.defineProperty(P,{Sr:"fromEndSegmentDirection"},t("Tg"),function(a){var b=this.Tg;b!==a&&(u&&w.jb(a,T,P,"fromEndSegmentDirection"),this.Tg=a,this.j("fromEndSegmentDirection",b,a),Tj(this))});w.g(P,"fromShortLength",P.prototype.Tr);w.defineProperty(P,{Tr:"fromShortLength"},t("Wg"),function(a){var b=this.Wg;b!==a&&(u&&w.k(a,"number",P,"fromShortLength"),this.Wg=a,this.j("fromShortLength",b,a),Tj(this))});w.g(P,"fromLinkable",P.prototype.$y);
w.defineProperty(P,{$y:"fromLinkable"},t("sp"),function(a){var b=this.sp;b!==a&&(u&&a!==n&&w.k(a,"boolean",P,"fromLinkable"),this.sp=a,this.j("fromLinkable",b,a))});w.g(P,"fromLinkableDuplicates",P.prototype.KC);w.defineProperty(P,{KC:"fromLinkableDuplicates"},t("tp"),function(a){var b=this.tp;b!==a&&(u&&w.k(a,"boolean",P,"fromLinkableDuplicates"),this.tp=a,this.j("fromLinkableDuplicates",b,a))});w.g(P,"fromLinkableSelfNode",P.prototype.LC);
w.defineProperty(P,{LC:"fromLinkableSelfNode"},t("up"),function(a){var b=this.up;b!==a&&(u&&w.k(a,"boolean",P,"fromLinkableSelfNode"),this.up=a,this.j("fromLinkableSelfNode",b,a))});w.g(P,"fromMaxLinks",P.prototype.MC);w.defineProperty(P,{MC:"fromMaxLinks"},t("vp"),function(a){var b=this.vp;b!==a&&(u&&w.o(a,P,"fromMaxLinks"),0>a&&w.ra(a,">= 0",P,"fromMaxLinks"),this.vp=a,this.j("fromMaxLinks",b,a))});w.g(P,"cursor",P.prototype.cursor);
w.defineProperty(P,{cursor:"cursor"},t("Yo"),function(a){var b=this.Yo;b!==a&&(w.k(a,"string",P,"cursor"),this.Yo=a,this.j("cursor",b,a))});w.g(P,"click",P.prototype.click);w.defineProperty(P,{click:"click"},t("Lh"),function(a){var b=this.Lh;b!==a&&(a!==n&&w.k(a,"function",P,"click"),this.Lh=a,this.j("click",b,a))});w.g(P,"doubleClick",P.prototype.Sl);
w.defineProperty(P,{Sl:"doubleClick"},t("Ph"),function(a){var b=this.Ph;b!==a&&(a!==n&&w.k(a,"function",P,"doubleClick"),this.Ph=a,this.j("doubleClick",b,a))});w.g(P,"contextClick",P.prototype.Fr);w.defineProperty(P,{Fr:"contextClick"},t("Mh"),function(a){var b=this.Mh;b!==a&&(a!==n&&w.k(a,"function",P,"contextClick"),this.Mh=a,this.j("contextClick",b,a))});w.g(P,"mouseEnter",P.prototype.wz);
w.defineProperty(P,{wz:"mouseEnter"},t("mq"),function(a){var b=this.mq;b!==a&&(a!==n&&w.k(a,"function",P,"mouseEnter"),this.mq=a,this.j("mouseEnter",b,a))});w.g(P,"mouseLeave",P.prototype.xz);w.defineProperty(P,{xz:"mouseLeave"},t("nq"),function(a){var b=this.nq;b!==a&&(a!==n&&w.k(a,"function",P,"mouseLeave"),this.nq=a,this.j("mouseLeave",b,a))});w.g(P,"mouseOver",P.prototype.ks);
w.defineProperty(P,{ks:"mouseOver"},t("ci"),function(a){var b=this.ci;b!==a&&(a!==n&&w.k(a,"function",P,"mouseOver"),this.ci=a,this.j("mouseOver",b,a))});w.g(P,"mouseHover",P.prototype.js);w.defineProperty(P,{js:"mouseHover"},t("bi"),function(a){var b=this.bi;b!==a&&(a!==n&&w.k(a,"function",P,"mouseHover"),this.bi=a,this.j("mouseHover",b,a))});w.g(P,"mouseHold",P.prototype.is);
w.defineProperty(P,{is:"mouseHold"},t("ai"),function(a){var b=this.ai;b!==a&&(a!==n&&w.k(a,"function",P,"mouseHold"),this.ai=a,this.j("mouseHold",b,a))});w.g(P,"mouseDragEnter",P.prototype.DD);w.defineProperty(P,{DD:"mouseDragEnter"},t("kq"),function(a){var b=this.kq;b!==a&&(a!==n&&w.k(a,"function",P,"mouseDragEnter"),this.kq=a,this.j("mouseDragEnter",b,a))});w.g(P,"mouseDragLeave",P.prototype.vz);
w.defineProperty(P,{vz:"mouseDragLeave"},t("lq"),function(a){var b=this.lq;b!==a&&(a!==n&&w.k(a,"function",P,"mouseDragLeave"),this.lq=a,this.j("mouseDragLeave",b,a))});w.g(P,"mouseDrop",P.prototype.hs);w.defineProperty(P,{hs:"mouseDrop"},t("$h"),function(a){var b=this.$h;b!==a&&(a!==n&&w.k(a,"function",P,"mouseDrop"),this.$h=a,this.j("mouseDrop",b,a))});w.g(P,"actionDown",P.prototype.uy);
w.defineProperty(P,{uy:"actionDown"},t("Jo"),function(a){var b=this.Jo;b!==a&&(a!==n&&w.k(a,"function",P,"actionDown"),this.Jo=a,this.j("actionDown",b,a))});w.g(P,"actionUp",P.prototype.wy);w.defineProperty(P,{wy:"actionUp"},t("Lo"),function(a){var b=this.Lo;b!==a&&(a!==n&&w.k(a,"function",P,"actionUp"),this.Lo=a,this.j("actionUp",b,a))});w.g(P,"actionMove",P.prototype.vy);
w.defineProperty(P,{vy:"actionMove"},t("Ko"),function(a){var b=this.Ko;b!==a&&(a!==n&&w.k(a,"function",P,"actionMove"),this.Ko=a,this.j("actionMove",b,a))});w.g(P,"actionCancel",P.prototype.ty);w.defineProperty(P,{ty:"actionCancel"},t("Io"),function(a){var b=this.Io;b!==a&&(a!==n&&w.k(a,"function",P,"actionCancel"),this.Io=a,this.j("actionCancel",b,a))});w.g(P,"toolTip",P.prototype.Fs);
w.defineProperty(P,{Fs:"toolTip"},t("ni"),function(a){var b=this.ni;b!==a&&(a!==n&&w.i(a,mf,P,"toolTip"),this.ni=a,this.j("toolTip",b,a))});w.g(P,"contextMenu",P.prototype.contextMenu);w.defineProperty(P,{contextMenu:"contextMenu"},t("Nh"),function(a){var b=this.Nh;b!==a&&(a!==n&&w.i(a,mf,P,"contextMenu"),this.Nh=a,this.j("contextMenu",b,a))});w.g(P,"isActionable",P.prototype.wv);
w.defineProperty(P,{wv:"isActionable"},t("Ep"),function(a){var b=this.Ep;b!==a&&(w.k(a,"boolean",P,"isActionable"),this.Ep=a,this.j("isActionable",b,a))});w.g(P,"pickable",P.prototype.ND);w.defineProperty(P,{ND:"pickable"},t("Kf"),function(a){var b=this.Kf;b!==a&&(w.k(a,"boolean",P,"pickable"),this.Kf=a,this.j("pickable",b,a))});
P.prototype.bind=P.prototype.bind=function(a){a.Pf=this;var b=this.Qr();b!==n&&$j(b)&&w.m("Cannot add a Binding to a template that has already been copied: "+a);this.oc===n&&(this.oc=new z(bf));this.oc.add(a)};P.prototype.findTemplateBinder=P.prototype.Qr=function(){for(var a=this instanceof x?this:this.fa;a!==n;){if(a.fl!==n&&a instanceof x)return a;a=a.fa}return n};P.fromSvg=function(a){return ak(a)};var bk;
P.make=bk=function(a,b){var c=n,d=n;if("function"===typeof a)d=a;else if("string"===typeof a){var e=ck.qa(a);"function"===typeof e?c=e():d=ea[a]}c===n&&(d===f&&(c=window.$,c!==f&&c.noop!==f&&w.m("GraphObject.make failed to complete. Is it conflicting with another $ var? (such as jQuery)"),w.m("GraphObject.make failed to complete, it may be conflicting with another var.")),(d===n||!d.constructor)&&w.m("GraphObject.make requires a class function or class name, not: "+a),c=new d);e=1;c instanceof A&&
1<arguments.length&&(d=arguments[1],"string"===typeof d||d instanceof HTMLDivElement?(c.vi=n,ei(c,d),e++):w.m("Unknown argument to Diagram constructor: "+d));for(;e<arguments.length;e++)if(d=arguments[e],d===f)w.m("Undefined value at argument "+e+" for object being constructed by GraphObject.make: "+c);else if("string"===typeof d)if(c instanceof na)c.text=d;else if(c instanceof V)c.gb=d;else if(c instanceof dk)c.source=d;else if(c instanceof x){var g=w.Ul(x,d);g!==n?c.type=g:w.m("Unknown Panel type as an argument to GraphObject.make: "+
d)}else c instanceof Be?(g=w.Ul(Be,d),g!==n?c.type=g:w.m("Unknown Brush type as an argument to GraphObject.make: "+d)):c instanceof dd?(g=w.Ul(dd,d),g!==n?c.type=g:w.m("Unknown Geometry type as an argument to GraphObject.make: "+d)):c instanceof Bd?(g=w.Ul(Bd,d),g!==n?c.type=g:w.m("Unknown PathSegment type as an argument to GraphObject.make: "+d)):w.m("Unable to use a string as an argument to GraphObject.make: "+d);else if(d instanceof P)c instanceof x||w.m("A GraphObject can only be added to a Panel, not to: "+
c),c.add(d);else if(d instanceof ek)c instanceof x||w.m("A RowColumnDefinition can only be added to a Panel, not to: "+c),g=d.Cv?c.Wd(d.index):c.Vd(d.index),w.i(d,ek,ek,"copyFrom:pd"),d.Cv?g.height=d.height:g.width=d.width,g.Zf=d.Zf,g.$d=d.$d,g.Cb=d.Cb,g.zs=d.zs,g.oc=d.oc;else if(d instanceof ja)c instanceof U&&d.le===U?d===fk||d===Rf?c.Ch=d:d===gk||d===hk||d===ik?c.vf=d:d===jk||d===kk||d===lk?c.Ru=d:d===mk||d===ij||w.m("Unknown Link enum value for a Link property: "+d):c instanceof x&&d.le===x?c.type=
d:c instanceof na&&d.le===na?c.bA=d:c instanceof P&&d.le===U?0===d.name.indexOf("Orient")?c.vs=d:w.m("Unknown Link enum value for GraphObject.segmentOrientation property: "+d):c instanceof P&&d.le===P?c.Fh=d:c instanceof A&&d.le===A?c.Cy=d:c instanceof Be&&d.le===Be?c.type=d:c instanceof dd&&d.le===dd?c.type=d:c instanceof Bd&&d.le===Bd?c.type=d:c instanceof bf&&d.le===bf?c.mode=d:c instanceof fe&&d.le===fe?c.fd=d:c instanceof W&&d.le===W?0===d.name.indexOf("Alignment")?c.Cb=d:0===d.name.indexOf("Arrangement")?
c.ke=d:0===d.name.indexOf("Compaction")?c.cv=d:0===d.name.indexOf("Path")?c.path=d:0===d.name.indexOf("Sorting")?c.ig=d:0===d.name.indexOf("Style")?c.JE=d:w.m("Unknown enum value: "+d):c instanceof X&&d.le===X?0===d.name.indexOf("Aggressive")?c.UB=d:0===d.name.indexOf("Cycle")?c.qC=d:0===d.name.indexOf("Init")?c.fD=d:0===d.name.indexOf("Layer")?c.pD=d:w.m("Unknown enum value: "+d):c instanceof dj&&d.le===dj?d===nk||d===ok||d===pk||d===qk?c.ig=d:d===rk||d===sk?c.ke=d:d===tk||d===uk?c.Cb=d:w.m("Unknown enum value: "+
d):c instanceof vk&&d.le===vk?d===wk||d===xk||d===yk||d===zk||d===Ak?c.ig=d:d===Bk||d===Ck||d===Dk||d===Ek?c.direction=d:d===Fk||d===Gk||d===Hk||d===Ik?c.ke=d:d===Jk||d===Kk?c.ns=d:w.m("Unknown enum value: "+d):w.m("No property to set for this enum value: "+d);else if(d instanceof bf)c instanceof P||c instanceof ek?c.bind(d):w.m("A Binding can only be applied to a GraphObject or RowColumnDefinition, not to: "+c);else if(d instanceof fd)c instanceof dd?c.sb.add(d):w.m("A PathFigure can only be added to a Geometry, not to: "+
c);else if(d instanceof Bd)c instanceof fd?c.za.add(d):w.m("A PathSegment can only be added to a PathFigure, not to: "+c);else if(w.mb(d))if(c instanceof Be){var g={},i;for(i in d){var j=parseFloat(i);isNaN(j)?g[i]=d[i]:c.addColorStop(j,d[i])}w.Oz(c,g)}else c instanceof ek?(d.row!==f?(g=d.row,(g===f||g===n||Infinity===g||isNaN(g)||0>g)&&w.m("Must specify non-negative integer row for RowColumnDefinition "+d),c.rl=h,c.ea=g):d.column!==f?(g=d.column,(g===f||g===n||Infinity===g||isNaN(g)||0>g)&&w.m("Must specify non-negative integer column for RowColumnDefinition "+
d),c.rl=q,c.ea=g):w.m("Must specify row or column value in a RowColumnDefinition "+d),g=w.cG(d,"row","column"),w.Oz(c,g)):w.Oz(c,d);else w.m('Unknown initializer "'+d+'" for object being constructed by GraphObject.make: '+c);return c};var ck;P.Builders=ck=new la("string","function");
ck.add("Button",function(){var a=new Be(Ee);a.addColorStop(0,"white");a.addColorStop(1,"lightgray");var b=new Be(Ee);b.addColorStop(0,"white");b.addColorStop(1,"dodgerblue");var c=bk(x,Xh,{wv:h},bk(V,{name:"ButtonBorder",gb:"RoundedRectangle",fill:a,stroke:"gray"}));c.wz=function(a,c){var g=c.oa(0),i=c._buttonFillOver;i===f&&(i=b);c._buttonFillNormal=g.fill;g.fill=i;i=c._buttonStrokeOver;i===f&&(i="blue");c._buttonStrokeNormal=g.stroke;g.stroke=i};c.xz=function(b,c){var g=c.oa(0),i=c._buttonFillNormal;
i===f&&(i=a);g.fill=i;i=c._buttonStrokeNormal;i===f&&(i="gray");g.stroke=i};return c});
ck.add("TreeExpanderButton",function(){var a=bk("Button",bk(V,{name:"ButtonIcon",gb:"MinusLine",wa:new cb(6,6)},(new bf("figure","isTreeExpanded",function(a,c){var d=n,e=c.fa;e&&(d=a?e._treeExpandedFigure:e._treeCollapsedFigure);d||(d=a?"MinusLine":"PlusLine");return d})).Cz("")),{visible:q},(new bf("visible","isTreeLeaf",function(a){return!a})).Cz(""));a.click=function(a,c){var d=c.ca;if(d instanceof T){var e=d.h;e===n||e.cb||(a.Xd=h,d.Ne?e.Uf.collapseTree(d):e.Uf.expandTree(d))}};return a});
ck.add("SubGraphExpanderButton",function(){var a=bk("Button",bk(V,{name:"ButtonIcon",gb:"MinusLine",wa:new cb(6,6)},(new bf("figure","isSubGraphExpanded",function(a,c){var d=n,e=c.fa;e&&(d=a?e._subGraphExpandedFigure:e._subGraphCollapsedFigure);d||(d=a?"MinusLine":"PlusLine");return d})).Cz("")));a.click=function(a,c){var d=c.ca;if(d instanceof vf){var e=d.h;e===n||e.cb||(a.Xd=h,d.Me?e.Uf.collapseSubGraph(d):e.Uf.expandSubGraph(d))}};return a});
ck.add("ContextMenuButton",function(){var a=bk("Button");a.Fh=lj;var b=a.Ie("ButtonBorder");b instanceof V&&(b.gb="Rectangle",b.v=new H(0,0,2,2),b.w=new H(1,1,-2,-2));return a});
function x(a){P.call(this);a===f?0===arguments.length?this.S=hh:w.m("invalid argument to Panel constructor: undefined"):(w.jb(a,x,x,"type"),this.S=a);this.Fa=new z(P);this.he=(new gb).freeze();this.ap=Ib;this.$b=ch;this.ah=q;this.S===ui&&(this.ah=h);this.fi=1;this.mf=[];this.Ye=[];this.To=this.Mq=Lk;this.Um=this.qn=0;this.sn=dh;this.zp=(new cb(10,10)).freeze();this.Ap=(new F(0,0)).freeze();this.fl=this.zm=n;this.tx="";this.xg=this.rk=n;this.Pm="category";this.If=n;this.Wb=new G(NaN,NaN,NaN,NaN);this.gF=
new G(0,0,0,0);this.qI=new cb(0,0);this.Fl=n}w.P("Panel",x);w.Da(x,P);
x.prototype.xb=function(a){P.prototype.xb.call(this,a);a.S=this.S;a.he.Xa(this.he);a.ap=this.ap.O();a.$b=this.$b;if(0<this.mf.length){for(var b=[],c=this.mf,d=c.length,e=0;e<d;e++)if(c[e]!==f){var g=c[e].copy();g.Yk(a);b[e]=g}a.mf=b}if(0<this.Ye.length){b=[];c=this.Ye;d=c.length;for(e=0;e<d;e++)c[e]!==f&&(g=c[e].copy(),g.Yk(a),b[e]=g);a.Ye=b}a.Mq=this.Mq;a.To=this.To;a.qn=this.qn;a.Um=this.Um;a.sn=this.sn;a.zp.Xa(this.zp);a.Ap.Xa(this.Ap);a.ah=this.ah;a.fi=this.fi;a.zm=this.zm;a.fl=this.fl;a.tx=this.tx;
a.rk=this.rk;a.xg=this.xg;a.Pm=this.Pm;this._buttonFillNormal&&(a._buttonFillNormal=this._buttonFillNormal);this._buttonFillOver&&(a._buttonFillOver=this._buttonFillOver);this._buttonStrokeNormal&&(a._buttonStrokeNormal=this._buttonStrokeNormal);this._buttonStrokeOver&&(a._buttonStrokeOver=this._buttonStrokeOver);this._treeExpandedFigure&&(a._treeExpandedFigure=this._treeExpandedFigure);this._treeCollapsedFigure&&(a._treeCollapsedFigure=this._treeCollapsedFigure);this._subGraphExpandedFigure&&(a._subGraphExpandedFigure=
this._subGraphExpandedFigure);this._subGraphCollapsedFigure&&(a._subGraphCollapsedFigure=this._subGraphCollapsedFigure);a.Wb=this.Wb.copy()};x.prototype.xh=function(a){P.prototype.xh.call(this,a);a.Fa=this.Fa;for(var b=a.Fa.l;b.next();)b.value.wk=a};
x.prototype.copy=x.prototype.copy=function(){var a=P.prototype.copy.call(this);if(a instanceof x){var b=this.Fa;if(0<b.length)for(var c=b.length,d=0;d<c;d++){var e=b.n[d].copy(),g=a;e.Yk(g);e.Cl=n;var i=g.Fa,j=i.count;i.xc(j,e);i=g.ca;if(i!==n){var k=g.h;k!==n&&k.sa.tb||i.Nc(ie,"elements",g,n,e,n,j)}}return a}return n};x.prototype.toString=function(){return"Panel("+this.type+")#"+w.ec(this)};var hh;x.Position=hh=w.s(x,"Position",0);x.Horizontal=w.s(x,"Horizontal",1);var fi;
x.Vertical=fi=w.s(x,"Vertical",2);var ah;x.Spot=ah=w.s(x,"Spot",3);var Xh;x.Auto=Xh=w.s(x,"Auto",4);var Pj;x.Table=Pj=w.s(x,"Table",5);x.Viewbox=w.s(x,"Viewbox",6);var wj;x.TableRow=wj=w.s(x,"TableRow",7);var xj;x.TableColumn=xj=w.s(x,"TableColumn",8);var Rg;x.Link=Rg=w.s(x,"Link",9);var ui;x.Grid=ui=w.s(x,"Grid",10);w.u(x,{elements:"elements"},function(){return this.Fa.l});w.u(x,{Sa:"naturalBounds"},t("Jc"));w.g(x,"padding",x.prototype.padding);
w.defineProperty(x,{padding:"padding"},t("he"),function(a){"number"===typeof a?a=new gb(a):w.i(a,gb,x,"padding");var b=this.he;b.I(a)||(this.he=a=a.O(),this.R(),this.j("padding",b,a))});w.g(x,"type",x.prototype.type);w.defineProperty(x,{type:"type"},t("S"),function(a){var b=this.S;b!==a&&(u&&w.jb(a,x,x,"type"),(b===wj||b===xj)&&w.m("Cannot change Panel.type when it is already a TableRow or a TableColumn: "+a),this.S=a,this.S===ui&&(this.ah=h),this.R(),this.j("type",b,a))});
w.g(x,"defaultAlignment",x.prototype.wj);w.defineProperty(x,{wj:"defaultAlignment"},t("ap"),function(a){var b=this.ap;b.I(a)||(u&&w.i(a,H,x,"defaultAlignment"),this.ap=a=a.O(),this.R(),this.j("defaultAlignment",b,a))});w.g(x,"defaultStretch",x.prototype.Sy);w.defineProperty(x,{Sy:"defaultStretch"},t("$b"),function(a){var b=this.$b;b!==a&&(w.jb(a,P,x,"defaultStretch"),this.$b=a,this.R(),this.j("defaultStretch",b,a))});w.g(x,"viewboxStretch",x.prototype.hI);
w.defineProperty(x,{hI:"viewboxStretch"},t("sn"),function(a){var b=this.sn;b!==a&&(w.jb(a,P,x,"viewboxStretch"),this.sn=a,this.j("viewboxStretch",b,a))});w.g(x,"gridCellSize",x.prototype.Vr);w.defineProperty(x,{Vr:"gridCellSize"},t("zp"),function(a){var b=this.zp;b.I(a)||(w.i(a,cb,x,"gridCellSize"),(!a.T()||0===a.width||0===a.height)&&w.m("Invalid Panel.gridCellSize: "+a),this.zp=a.O(),this.h!==n&&this===this.h.vv&&Gi(this.h),vj(this),this.j("gridCellSize",b,a))});w.g(x,"gridOrigin",x.prototype.cz);
w.defineProperty(x,{cz:"gridOrigin"},t("Ap"),function(a){var b=this.Ap;b.I(a)||(w.i(a,F,x,"gridOrigin"),a.T()||w.m("Invalid Panel.gridOrigin: "+a),this.Ap=a.O(),vj(this),this.j("gridOrigin",b,a))});
x.prototype.Pn=function(a,b){var c=this.opacity,d=1;1!==c&&(d=a.globalAlpha,a.globalAlpha=d*c);if(this.S===ui){c=this.Xl()*b.scale;0>=c&&(c=1);var e=this.Vr,d=e.width,e=e.height,g=this.Sa,i=g.width,g=g.height,j=Math.ceil(i/d),k=Math.ceil(g/e),l=this.cz;a.save();a.beginPath();a.rect(0,0,i,g);a.clip();for(var m=[],p=this.Fa.n,r=this.Fa.length,s=0;s<r;s++){var v=[];m.push(v);var y=p[s];if(y.visible)for(var y="LineV"===y.gb,C=s+1;C<r;C++){var E=p[C];E.visible&&"LineV"===E.gb===y&&(E=E.Ai,2<=E&&v.push(E))}}p=
this.Fa.length;for(r=0;r<p;r++)if(y=this.Fa.n[r],y.visible){s=m[r];v=y.Ai;if("LineV"===y.gb){a.lineWidth=y.eb;yj(this,a,y.stroke,q);a.beginPath();for(C=y=Math.floor(-l.x/d);C<=y+j&&!(E=C*d+l.x,0<=E&&(E<i&&Mk(C,v,s))&&(a.moveTo(E,0),a.lineTo(E,g),2>d*v*c));C++);}else{a.lineWidth=y.eb;yj(this,a,y.stroke,q);a.beginPath();for(C=y=Math.floor(-l.y/e);C<=y+k&&!(E=C*e+l.y,0<=E&&(E<=g&&Mk(C,v,s))&&(a.moveTo(0,E),a.lineTo(i,E),2>e*v*c));C++);}a.stroke()}a.restore();li(b,a)}else{e=this.Fa.length;for(i=0;i<e;i++)this.Fa.n[i].Ge(a,
b);u&&u.aK&&this instanceof U&&u.$J(a,b,this);1!==c&&(a.globalAlpha=d)}};function Mk(a,b,c){if(0!==a%b)return q;for(var b=c.length,d=0;d<b;d++)if(0===a%c[d])return q;return h}
x.prototype.fs=function(a,b,c,d){var e=this.Wb;e.width=0;e.height=0;var g=this.wa,i=this.ue;c===f&&(c=i.width,d=i.height);var c=Math.max(c/this.scale,i.width),d=Math.max(d/this.scale,i.height),j=this.Zd;isNaN(g.width)||(a=Math.min(g.width,j.width));isNaN(g.height)||(b=Math.min(g.height,j.height));var a=Math.max(c,a),b=Math.max(d,b),k=this.padding,a=Math.max(a-k.left-k.right,0),b=Math.max(b-k.top-k.bottom,0),l=this.Fa,m=l.length;if(0===m){var p=this.Jc;db(p,!isNaN(g.width)?a:0,!isNaN(g.height)?b:0);
mj(this,0,0,p.width,p.height)}else{var r=this.S.Ab;switch(r){case "Position":var s=a,v=b,y=c,C=d;e.x=0;e.y=0;e.width=0;for(var E=e.height=0;E<m;E++){var I=l.n[E];if(I.visible||I===this.Xb){var D=I.margin,M=D.right+D.left,N=D.top+D.bottom;Hh(I,s,v,y,C);var Z=I.xa,wa=Math.max(Z.width+M,0),ka=Math.max(Z.height+N,0),ua=I.position.x,Da=I.position.y;isFinite(ua)||(ua=0);isFinite(Da)||(Da=0);if(I instanceof V&&I.hz)var Ha=I.eb/2,ua=ua-Ha,Da=Da-Ha;e.Wb(ua,Da,wa,ka)}}break;case "Vertical":for(var bb=a,qb=
c,Xa=[],Na=0;Na<m;Na++){var fb=l.n[Na];if(fb.visible||fb===this.Xb){var Ya=pj(fb);if(Ya!==jj&&Ya!==kj)Xa.push(fb);else{var mb=fb.margin,td=mb.right+mb.left,me=mb.top+mb.bottom;Hh(fb,bb,Infinity,qb,0);var Id=fb.xa,Vb=Math.max(Id.width+td,0),Dc=Math.max(Id.height+me,0);e.width=Math.max(e.width,Vb);e.height+=Dc}}}var Xd=Xa.length;if(0!==Xd){this.wa.width?bb=Math.min(this.wa.width,this.Zd.width):0!==e.width&&(bb=Math.min(e.width,this.Zd.width));for(Na=0;Na<Xd;Na++)if(fb=Xa[Na],fb.visible||fb===this.Xb)mb=
fb.margin,td=mb.right+mb.left,me=mb.top+mb.bottom,Hh(fb,bb,Infinity,qb,0),Id=fb.xa,Vb=Math.max(Id.width+td,0),Dc=Math.max(Id.height+me,0),e.width=Math.max(e.width,Vb),e.height+=Dc}break;case "Horizontal":for(var oe=b,Sf=d,Tc=[],vd=0;vd<m;vd++){var bc=l.n[vd];if(bc.visible||bc===this.Xb){var Tf=pj(bc);if(Tf!==jj&&Tf!==lj)Tc.push(bc);else{var Lc=bc.margin,Le=Lc.right+Lc.left,nf=Lc.top+Lc.bottom;Hh(bc,Infinity,oe,0,Sf);var of=bc.xa,Uc=Math.max(of.width+Le,0),Mc=Math.max(of.height+nf,0);e.width+=Uc;e.height=
Math.max(e.height,Mc)}}}var Me=Tc.length;if(0!==Me){this.wa.height?oe=Math.min(this.wa.height,this.Zd.height):0!==e.height&&(oe=Math.min(e.height,this.Zd.height));for(vd=0;vd<Me;vd++)if(bc=Tc[vd],bc.visible||bc===this.Xb)Lc=bc.margin,Le=Lc.right+Lc.left,nf=Lc.top+Lc.bottom,Hh(bc,Infinity,oe,0,Sf),of=bc.xa,Uc=Math.max(of.width+Le,0),Mc=Math.max(of.height+nf,0),e.width+=Uc,e.height=Math.max(e.height,Mc)}break;case "Spot":a:{var Zd=a,Nb=b,$d=c,pe=d,lc=Dj(this,l,m),xb=lc.margin,Vc,Ob,Md=xb.right+xb.left,
qe=xb.top+xb.bottom;Hh(lc,Zd,Nb,$d,pe);var Ab=lc.xa,S=Ab.width,tb=Ab.height,Q=Math.max(S+Md,0),ga=Math.max(tb+qe,0);e.x=-xb.left;e.y=-xb.top;e.width=Q;e.height=ga;for(var zb=0;zb<m;zb++){var Db=l.n[zb];if(Db!==lc&&(Db.visible||Db===this.Xb)){xb=Db.margin;Vc=xb.right+xb.left;Ob=xb.top+xb.bottom;Hh(Db,Zd,Nb,0,0);var Ab=Db.xa,Q=Math.max(Ab.width+Vc,0),ga=Math.max(Ab.height+Ob,0),Fa=Db.Cb;Cb(Fa)&&(Fa=this.wj);rb(Fa)||(Fa=Mb);var pa=Db.oj;Cb(pa)&&(pa=Mb);e.Wb(Fa.x*S+Fa.offsetX-(pa.x*Ab.width-pa.offsetX)-
xb.left,Fa.y*tb+Fa.offsetY-(pa.y*Ab.height-pa.offsetY)-xb.top,Q,ga)}}var Fb=lc.Fh;Fb===ch&&(Fb=pj(lc));switch(Fb){case jj:break a;case gd:if(!isFinite(Zd)&&!isFinite(Nb))break a;break;case lj:if(!isFinite(Zd))break a;break;case kj:if(!isFinite(Nb))break a}Ab=lc.xa;S=Ab.width;tb=Ab.height;Q=Math.max(S+Md,0);ga=Math.max(tb+qe,0);xb=lc.margin;e.x=-xb.left;e.y=-xb.top;e.width=Q;e.height=ga;for(zb=0;zb<m;zb++)if(Db=l.n[zb],Db!==lc&&(Db.visible||Db===this.Xb))xb=Db.margin,Vc=xb.right+xb.left,Ob=xb.top+
xb.bottom,Ab=Db.xa,Q=Math.max(Ab.width+Vc,0),ga=Math.max(Ab.height+Ob,0),Fa=Db.Cb,Cb(Fa)&&(Fa=this.wj),rb(Fa)||(Fa=Mb),pa=Db.oj,Cb(pa)&&(pa=Mb),e.Wb(Fa.x*S+Fa.offsetX-(pa.x*Ab.width-pa.offsetX)-xb.left,Fa.y*tb+Fa.offsetY-(pa.y*Ab.height-pa.offsetY)-xb.top,Q,ga)}break;case "Auto":var ib=a,id=b,Ne=c,re=d,Gb=Dj(this,l,m),Wc=Gb.margin,pf=Wc.right+Wc.left,ae=Wc.top+Wc.bottom;Hh(Gb,ib,id,Ne,re);var jd=Gb.xa,Oe=Math.max(jd.width+pf,0),Pe=Math.max(jd.height+ae,0),wd=(new F).hm(0,0,Oe,Pe,Nk(Gb)),wh=(new F).hm(0,
0,Oe,Pe,Ok(Gb)),Uf=new G(wd,wh),Vf=ib,Nd=id;isFinite(ib)&&(Vf=Uf.width);isFinite(id)&&(Nd=Uf.height);for(var be=new cb(0,0),Qe=0;Qe<m;Qe++){var kd=l.n[Qe];if(kd!==Gb&&(kd.visible||kd===this.Xb)){var Wc=kd.margin,se=Wc.right+Wc.left,cc=Wc.top+Wc.bottom;Hh(kd,Vf,Nd,Ne,re);jd=kd.xa;Oe=Math.max(jd.width+se,0);Pe=Math.max(jd.height+cc,0);be=new cb(Math.max(Oe,be.width),Math.max(Pe,be.height))}}if(1===m)e.width=Oe,e.height=Pe;else{var Xc=Nk(Gb),xd=Ok(Gb),mc,Od;xd.x!==Xc.x&&xd.y!==Xc.y&&(mc=be.width/Math.abs(xd.x-
Xc.x),Od=be.height/Math.abs(xd.y-Xc.y));var Bb=0;Gb instanceof V&&(Bb=Gb.eb*Gb.scale);mc+=Math.abs(Xc.offsetX)+Math.abs(xd.offsetX)+Bb;Od+=Math.abs(Xc.offsetY)+Math.abs(xd.offsetY)+Bb;var xc=Gb.Fh;xc===ch&&(xc=pj(Gb));switch(xc){case jj:re=Ne=0;break;case gd:isFinite(ib)&&(mc=ib);isFinite(id)&&(Od=id);break;case lj:isFinite(ib)&&(mc=ib);re=0;break;case kj:Ne=0,isFinite(id)&&(Od=id)}Gb instanceof V&&(Gb.kh?Gb.bk=n:Gb.Ga=n);Lj(Gb);Hh(Gb,mc,Od,Ne,re);e.width=Gb.xa.width+pf;e.height=Gb.xa.height+ae}break;
case "Table":for(var Pd=a,te=b,oa=m,Ua=c,ub=d,Wf=[],Re=[],Ca=0;Ca<oa;Ca++){var Aa=l.n[Ca];if(Aa instanceof x&&(Aa.type===wj||Aa.type===xj)){Re.push(Aa);for(var Bj=Aa.Fa,zl=Bj.length,Nc=0;Nc<zl;Nc++){var Hg=Bj.n[Nc];Aa.type===wj?Hg.mc=Aa.mc:Aa.type===xj&&(Hg.Dc=Aa.Dc);Wf.push(Hg)}}else Wf.push(Aa)}for(var oa=Wf.length,Ec=[],Ca=0;Ca<oa;Ca++)Aa=Wf[Ca],Aa.ac=h,Aa.Ic=h,Ec[Aa.mc]||(Ec[Aa.mc]=[]),Ec[Aa.mc][Aa.Dc]||(Ec[Aa.mc][Aa.Dc]=[]),Ec[Aa.mc][Aa.Dc].push(Aa);for(var mi=[],xh=[],Ig=[],Wb={count:0},Se=
{count:0},Qd=Pd,yc=te,za,Yc,Cj=Ec.length,Ca=0;Ca<Cj;Ca++)if(Ec[Ca]){var ng=Ec[Ca].length,vb=this.Wd(Ca);Pk(vb,0);for(Nc=0;Nc<ng;Nc++)if(Ec[Ca][Nc]){var wb=this.Vd(Nc);mi[Nc]===f&&(Pk(wb,0),mi[Nc]=h);for(var Jg=Ec[Ca][Nc],Al=Jg.length,og=0;og<Al;og++)if(Aa=Jg[og],Aa.visible||Aa===this.Xb)if(1<Aa.zk||1<Aa.ak)xh.push(Aa);else{var ce=Qj(Aa,vb,wb);if(ce!==jj&&!Aa.wa.T())Wb[Nc]===f&&(Wb[Nc]=-1,Wb.count++),Se[Ca]===f&&(Se[Ca]=-1,Se.count++),Ig.push(Aa),Hh(Aa,Infinity,Infinity,Ua,ub);else{var Te=isFinite(wb.width)?
wb.width:Pd,pg=isFinite(vb.height)?vb.height:te,Xb=new cb(Math.max(wb.Zf,Math.min(Te,wb.$d)),Math.max(vb.Zf,Math.min(pg,vb.$d))),tc=Aa.margin,Oc=tc.right+tc.left,Ue=tc.top+tc.bottom;Hh(Aa,Infinity,Infinity,Ua,ub);var yd=Aa.xa,ld=Math.max(yd.width+Oc,0),qf=Math.max(yd.height+Ue,0);za=this.Wd(Ca);Yc=Math.max(qf-za.Wa,0);Yc>yc&&(Yc=yc);Pk(za,za.Wa+Yc);yc=Math.max(yc-Yc,0);za=this.Vd(Nc);Yc=Math.max(ld-za.Wa,0);Yc>Qd&&(Yc=Qd);Pk(za,za.Wa+Yc);Qd=Math.max(Qd-Yc,0)}}}}for(var Ve=0,We=0,oa=this.$u,Ca=0;Ca<
oa;Ca++)this.Ye[Ca]!==f&&(Ve+=this.Vd(Ca).Wa);oa=this.Qv;for(Ca=0;Ca<oa;Ca++)this.mf[Ca]!==f&&(We+=this.Wd(Ca).Wa);Qd=Math.max(Pd-Ve,0);yc=Math.max(te-We,0);oa=Ig.length;for(Ca=0;Ca<oa;Ca++){var Aa=Ig[Ca],vb=this.Wd(Aa.mc),wb=this.Vd(Aa.Dc),ni=Aa.xa,tc=Aa.margin,Oc=tc.right+tc.left,Ue=tc.top+tc.bottom;Wb[Aa.Dc]=Math.max(ni.width+Oc-wb.cd,0);Se[Aa.mc]=Math.max(ni.height+Ue-vb.cd,0)}var yh=0,md=0;for(Ca in Se)"count"!==Ca&&(yh+=Se[Ca]);for(Ca in Wb)"count"!==Ca&&(md+=Wb[Ca]);for(Ca=0;Ca<oa;Ca++)if(Aa=
Ig[Ca],Aa.visible||Aa===this.Xb){vb=this.Wd(Aa.mc);wb=this.Vd(Aa.Dc);Te=isFinite(wb.width)?wb.width:isFinite(Qd)?wb.cd+Wb[Aa.Dc]/md*Qd:wb.cd||Qd;pg=isFinite(vb.height)?vb.height:isFinite(yc)?vb.cd+Se[Aa.mc]/yh*yc:vb.cd||yc;Xb=new cb(Math.max(wb.Zf,Math.min(Te,wb.$d)),Math.max(vb.Zf,Math.min(pg,vb.$d)));ce=Qj(Aa,vb,wb);switch(ce){case lj:Xb.height=Infinity;break;case kj:Xb.width=Infinity}tc=Aa.margin;Oc=tc.right+tc.left;Ue=tc.top+tc.bottom;Lj(Aa);Hh(Aa,Xb.width,Xb.height,wb.Zf,vb.Zf);var yd=Aa.xa,
ld=Math.max(yd.width+Oc,0),qf=Math.max(yd.height+Ue,0),Xf;Xf=vb.cd;Pk(vb,Math.max(vb.Wa,qf));Yc=vb.cd-Xf;yc=Math.max(yc-Yc,0);Xf=wb.cd;Pk(wb,Math.max(wb.Wa,ld));Yc=wb.cd-Xf;Qd=Math.max(Qd-Yc,0)}oa=xh.length;for(Ca=0;Ca<oa;Ca++)if(Aa=xh[Ca],Aa.visible||Aa===this.Xb){vb=this.Wd(Aa.mc);wb=this.Vd(Aa.Dc);Xb=new cb(Math.max(wb.Zf,Math.min(Pd,wb.$d)),Math.max(vb.Zf,Math.min(te,vb.$d)));ce=Qj(Aa,vb,wb);switch(ce){case gd:0!==wb.cd&&(Xb.width=Math.min(Xb.width,wb.cd));0!==vb.cd&&(Xb.height=Math.min(Xb.height,
vb.cd));break;case lj:0!==wb.cd&&(Xb.width=Math.min(Xb.width,wb.cd));break;case kj:0!==vb.cd&&(Xb.height=Math.min(Xb.height,vb.cd))}isFinite(wb.width)&&(Xb.width=wb.width);isFinite(vb.height)&&(Xb.height=vb.height);for(var Xe=new cb(0,0),Hb=1;Hb<Aa.zk&&!(Aa.mc+Hb>=this.Qv);Hb++)za=this.Wd(Aa.mc+Hb),Xe.height+=Math.max(za.Zf,isNaN(za.nf)?za.$d:Math.min(za.nf,za.$d));for(Hb=1;Hb<Aa.ak&&!(Aa.Dc+Hb>=this.$u);Hb++)za=this.Vd(Aa.Dc+Hb),Xe.width+=Math.max(za.Zf,isNaN(za.nf)?za.$d:Math.min(za.nf,za.$d));
Xb.width+=Xe.width;Xb.height+=Xe.height;tc=Aa.margin;Oc=tc.right+tc.left;Ue=tc.top+tc.bottom;Hh(Aa,Xb.width,Xb.height,Ua,ub);for(var yd=Aa.xa,ld=Math.max(yd.width+Oc,0),qf=Math.max(yd.height+Ue,0),Kg=0,Hb=0;Hb<Aa.zk;Hb++)za=this.Wd(Aa.mc+Hb),Kg+=za.Wa||0;if(Kg<qf)for(var de=qf-Kg;0<de;){var Sd=za.Wa||0;isNaN(za.height)&&za.$d>Sd&&(Pk(za,Math.min(za.$d,Sd+de)),za.Wa!==Sd&&(de-=za.Wa-Sd));if(-1===za.index-1)break;za=this.Wd(za.index-1)}for(var zh=0,Hb=0;Hb<Aa.ak;Hb++)za=this.Vd(Aa.Dc+Hb),zh+=za.Wa||
0;if(zh<ld)for(de=ld-zh;0<de;){Sd=za.Wa||0;isNaN(za.width)&&za.$d>Sd&&(Pk(za,Math.min(za.$d,Sd+de)),za.Wa!==Sd&&(de-=za.Wa-Sd));if(-1===za.index-1)break;za=this.Vd(za.index-1)}}for(var ue=0,ve=0,ce=pj(this),Yf=this.wa,oi=this.Zd,rf=We=Ve=0,nd=0,oa=this.$u,Ca=0;Ca<oa;Ca++)this.Ye[Ca]!==f&&(za=this.Vd(Ca),isFinite(za.width)?rf+=za.width:Qk(za)===Rk?rf+=za.Wa:Ve+=za.Wa);var ue=isFinite(Yf.width)?Math.min(Yf.width,oi.width):ce!==jj&&isFinite(Pd)?Pd:Ve,ue=Math.max(ue,this.ue.width),ue=Math.max(ue-rf,0),
sf=Math.max(ue/Ve,1);isFinite(sf)||(sf=1);for(Ca=0;Ca<oa;Ca++)this.Ye[Ca]!==f&&(za=this.Vd(Ca),!isFinite(za.width)&&Qk(za)!==Rk&&Pk(za,za.Wa*sf),za.rb=e.width,e.width+=za.Wa);oa=this.Qv;for(Ca=0;Ca<oa;Ca++)this.mf[Ca]!==f&&(za=this.Wd(Ca),isFinite(za.height)?nd+=za.height:Qk(za)===Rk?nd+=za.Wa:We+=za.Wa);var ve=isFinite(Yf.height)?Math.min(Yf.height,oi.height):ce!==jj&&isFinite(te)?te:We,ve=Math.max(ve,this.ue.height),ve=Math.max(ve-nd,0),Mg=Math.max(ve/We,1);isFinite(Mg)||(Mg=1);for(Ca=0;Ca<oa;Ca++)this.mf[Ca]!==
f&&(za=this.Wd(Ca),!isFinite(za.height)&&Qk(za)!==Rk&&Pk(za,za.Wa*Mg),za.rb=e.height,e.height+=za.Wa);oa=Re.length;for(Ca=0;Ca<oa;Ca++){var Fc=Re[Ca];Fc.type===wj?(Te=e.width,za=this.Wd(Fc.mc),pg=za.cd):(za=this.Vd(Fc.Dc),Te=za.cd,pg=e.height);Fc.Rc.V(0,0,Te,pg);Fc.ac=q;Ec[Fc.mc]||(Ec[Fc.mc]=[]);Ec[Fc.mc][Fc.Dc]||(Ec[Fc.mc][Fc.Dc]=[]);Ec[Fc.mc][Fc.Dc].push(Fc)}this.eF=Ec;break;case "Viewbox":var Ng=a,Zf=b,tf=c,Ah=d;1<m&&w.m("Viewbox Panel cannot contain more than one GraphObject.");var Zc=l.n[0];
Zc.Vb=1;Lj(Zc);Hh(Zc,Infinity,Infinity,tf,Ah);var ee=Zc.xa,Ej=Zc.margin,ko=Ej.right+Ej.left,lo=Ej.top+Ej.bottom;if(isFinite(Ng)||isFinite(Zf)){var eq=Zc.scale,mo=ee.width,no=ee.height,oo=Math.max(Ng-ko,0),po=Math.max(Zf-lo,0);Zc.Vb=this.sn===dh?Zc.Vb*Math.min(oo/mo,po/no):Zc.Vb*Math.max(oo/mo,po/no);eq!==Zc.scale&&(Zc.ac=h,Hh(Zc,Infinity,Infinity,tf,Ah))}ee=Zc.xa;e.width=isFinite(Ng)?Ng:Math.max(ee.width+ko,0);e.height=isFinite(Zf)?Zf:Math.max(ee.height+lo,0);break;case "Link":var qo=this instanceof
mf?this.zn:this;if(0===m){var Fj=this.Jc;db(Fj,0,0);var Td=this.xa;Td.V(0,0,0,0)}else{var Gj=this.yp(),Ye=this.Sh(),Ze=Ye.copy();Ze.x=0;Ze.y=0;var Og,Bh=this.gx();Og=this.ka!==f?this.ka:Bh.count;for(var Hj=new F(Infinity,Infinity),Pg=0;Pg<Og;Pg++){var ro=Bh.n[Pg];Hj.x=Math.min(ro.x,Hj.x);Hj.y=Math.min(ro.y,Hj.y)}this.aj=new F(Ye.x,Ye.y);this.Kh.clear();Gj!==n&&(Sk(Gj,Ye.width,Ye.height),Td=Gj.xa,Ze.Hi(Td),this.Kh.add(Td));for(var Qg=n,qg=n,$f=n,Pg=0;Pg<m;Pg++){var nc=l.n[Pg];if(nc!==Gj)if(nc.Fi&&
nc instanceof V)Sk(nc,Ye.width,Ye.height),Td=nc.xa,Ze.Hi(Td),this.Kh.add(Td);else if(2>Og)Hh(nc,Infinity,Infinity),Td=nc.xa,Ze.Hi(Td),this.Kh.add(Td);else{Qg===n&&(Qg=new Wa,qg=new F,$f=new F);var ag=nc.Dh,to=nc.Lz,Bl=nc.oj;yb(Bl)&&(Bl=Mb);var Ij=nc.vs,fq=nc.Mz,pi,qi,Jj=0;if(ag<-Og||ag>=Og){var uo=qo.BD,Kj=qo.AD;Ij!==ij&&(Jj=Tk(Ij,Kj),nc.angle=Jj);pi=uo.x-Ye.x;qi=uo.y-Ye.y}else{var uf,Ch;if(0<=ag)uf=Bh.n[ag],Ch=ag<Og-1?Bh.n[ag+1]:uf;else{var Cl=Og+ag;uf=Bh.n[Cl];Ch=0<Cl?Bh.n[Cl-1]:uf}Kj=0<=ag?uf.ui(Ch):
Ch.ui(uf);Ij!==ij&&(Jj=Tk(Ij,Kj),nc.nc=Jj);pi=uf.x+(Ch.x-uf.x)*to-Ye.x;qi=uf.y+(Ch.y-uf.y)*to-Ye.y}Hh(nc,Infinity,Infinity);var Td=nc.xa,Fj=nc.Sa,ri=0;nc instanceof V&&(ri=nc.eb);var vo=Fj.width+ri,wo=Fj.height+ri;Qg.reset();Qg.translate(-Td.x,-Td.y);Qg.scale(nc.scale,nc.scale);Qg.rotate(nc.angle,vo/2,wo/2);var xo=new G(0,0,vo,wo);qg.yo(xo,Bl);Qg.Ta(qg);var gq=-qg.x+ri/2,hq=-qg.y+ri/2;$f.set(fq);isNaN($f.x)&&($f.x=0<=ag?qg.x+3:-(qg.x+3));isNaN($f.y)&&($f.y=-(qg.y+3));$f.rotate(Kj);pi+=$f.x;qi+=$f.y;
var si=xo;si.set(Td);si.x=pi+gq;si.y=qi+hq;this.Kh.add(si);Ze.Hi(si)}}if(this.Ce)for(var yo=this.Ej;yo.next();)Hh(yo.value,Infinity,Infinity);this.Wb=Ze;var Mj=this.aj;Mj&&Mj.V(Mj.x+Ze.x,Mj.y+Ze.y);db(e,Ze.width||0,Ze.height||0)}break;case "Grid":break;case "TableRow":case "TableColumn":w.m(this.toString()+" is not an element of a Table Panel. TableRow and TableColumn Panels can only be elements of a Table Panel.");break;default:w.m("Unknown panel type: "+r)}var we=e.width,xe=e.height,Nj=this.padding,
iq=Nj.top+Nj.bottom,we=we+(Nj.left+Nj.right),xe=xe+iq;isFinite(g.width)&&(we=g.width);isFinite(g.height)&&(xe=g.height);we=Math.min(j.width,we);xe=Math.min(j.height,xe);we=Math.max(i.width,we);xe=Math.max(i.height,xe);we=Math.max(c,we);xe=Math.max(d,xe);e.width=we;e.height=xe;p=this.Jc;db(p,we,xe);mj(this,0,0,we,xe)}};function Dj(a,b,c){for(var d=0;d<c;d++){var e=b.n[d];if(e.Fi===h)return a.Fl=e}b=b.n[0];return a.Fl=b}
x.prototype.sj=function(a,b,c,d){var e=this.Wb,g=this.Fa,i=g.length,j=this.gF;j.reset();if(0===i){var k=this.va;k.x=a;k.y=b;k.width=c;k.height=d}else{if(!this.wa.T()){var l=pj(this),m=this.Rc,p=m.width,r=m.height,s=this.margin,v=s.left+s.right,y=s.top+s.bottom;p===c&&r===d&&(l=jj);switch(l){case jj:if(p>c||r>d)this.R(),Hh(this,p>c?c:p,r>d?d:r);break;case gd:this.ac=h;Hh(this,c+v,d+y,0,0);break;case lj:this.ac=h;Hh(this,c+v,r+y,0,0);break;case kj:this.ac=h,Hh(this,p+v,d+y,0,0)}}k=this.va;k.x=a;k.y=
b;k.width=c;k.height=d;var C=this.S.Ab;switch(C){case "Position":for(var E=e.x-this.padding.left,I=e.y-this.padding.top,D=0;D<i;D++){var M=g.n[D],N=M.xa,Z=M.margin,wa=M.position.x,ka=M.position.y;j.x=isNaN(wa)?-E:wa-E;j.y=isNaN(ka)?-I:ka-I;if(M instanceof V&&M.hz){var ua=M.eb/2;j.x-=ua;j.y-=ua}j.x+=Z.left;j.y+=Z.top;j.width=N.width;j.height=N.height;M.visible&&M.Cc(j.x,j.y,j.width,j.height)}break;case "Vertical":for(var Da=this.padding.left,Ha=this.padding.top,bb=0;bb<i;bb++){var qb=Da,Xa=g.n[bb],
Na=Xa.xa,fb=Xa.margin,Ya=fb.left+fb.right,mb=Da+this.padding.right,td=Na.width,me=pj(Xa);if(isNaN(Xa.wa.width)&&me===gd||me===lj)td=Math.max(e.width-Ya-mb,0);var Id=td+Ya+mb,Vb=Xa.Cb;Cb(Vb)&&(Vb=this.wj);rb(Vb)||(Vb=Mb);j.x=qb+Vb.offsetX+fb.left+(e.width*Vb.x-Id*Vb.x);j.y=Ha+Vb.offsetY+fb.top;j.width=td;j.height=Na.height;Xa.visible&&(Xa.Cc(j.x,j.y,j.width,j.height),Ha+=Na.height+fb.bottom+fb.top)}break;case "Horizontal":for(var Dc=this.padding.top,Xd=this.padding.left,oe=0;oe<i;oe++){var Sf=Dc,Tc=
g.n[oe],vd=Tc.xa,bc=Tc.margin,Tf=bc.top+bc.bottom,Lc=Dc+this.padding.bottom,Le=vd.height,nf=pj(Tc);if(isNaN(Tc.wa.height)&&nf===gd||nf===kj)Le=Math.max(e.height-Tf-Lc,0);var of=Le+Tf+Lc,Uc=Tc.Cb;Cb(Uc)&&(Uc=this.wj);rb(Uc)||(Uc=Mb);j.x=Xd+Uc.offsetX+bc.left;j.y=Sf+Uc.offsetY+bc.top+(e.height*Uc.y-of*Uc.y);j.width=vd.width;j.height=Le;Tc.visible&&(Tc.Cc(j.x,j.y,j.width,j.height),Xd+=vd.width+bc.left+bc.right)}break;case "Spot":var Mc=Dj(this,g,i),Me=Mc.xa,Zd=Me.width,Nb=Me.height,$d=this.padding,pe=
$d.left,lc=$d.top;j.x=pe-e.x;j.y=lc-e.y;Mc.Cc(j.x,j.y,Zd,Nb);for(var xb=0;xb<i;xb++){var Vc=g.n[xb];if(Vc!==Mc){var Ob=Vc.xa,Md=Ob.width,qe=Ob.height,Ab=Vc.Cb;Cb(Ab)&&(Ab=this.wj);rb(Ab)||(Ab=Mb);var S=Vc.oj;Cb(S)&&(S=Mb);j.x=Ab.x*Zd+Ab.offsetX-(S.x*Md-S.offsetX);j.y=Ab.y*Nb+Ab.offsetY-(S.y*qe-S.offsetY);j.x-=e.x;j.y-=e.y;Vc.visible&&Vc.Cc(pe+j.x,lc+j.y,Md,qe)}}break;case "Auto":var tb=Dj(this,g,i),Q=tb.xa,ga=new G(0,0,Q.width,Q.height),zb=new G(0,0,1,1),Db=tb.margin,Fa=Db.left,pa=Db.top,Fb=this.padding,
ib=Fb.left,id=Fb.top;j.x=Fa;j.y=pa;j.width=Q.width;j.height=Q.height;tb.Cc(ib+j.x,id+j.y,j.width,j.height);var Ne=Nk(tb),re=Ok(tb),Gb=(new F).yo(ga,Ne),Wc=(new F).yo(ga,re);zb.x=Gb.x;zb.y=Gb.y;zb.bw(Wc);zb.x+=Fa+ib;zb.y+=pa+id;for(var pf=0;pf<i;pf++){var ae=g.n[pf];if(ae!==tb){var jd=ae.xa,Db=ae.margin,Oe=Math.max(jd.width+Db.right+Db.left,0),Pe=Math.max(jd.height+Db.top+Db.bottom,0),wd=ae.Cb;Cb(wd)&&(wd=this.wj);rb(wd)||(wd=Mb);j.x=zb.width*wd.x+wd.offsetX-Oe*wd.x+Db.left+zb.x;j.y=zb.height*wd.y+
wd.offsetY-Pe*wd.y+Db.top+zb.y;j.width=zb.width;j.height=zb.height;ae.visible&&(jb(zb.x,zb.y,zb.width,zb.height,j.x,j.y,jd.width,jd.height)?ae.Cc(j.x,j.y,jd.width,jd.height):ae.Cc(j.x,j.y,jd.width,jd.height,new G(zb.x,zb.y,zb.width,zb.height)))}}break;case "Table":for(var wh=this.padding,Uf=wh.left,Vf=wh.top,Nd=this.eF,be,Qe,kd=Nd.length,se=0,cc=0;cc<kd;cc++)Nd[cc]&&(se=Math.max(se,Nd[cc].length));for(var Xc=Math.min(this.qn,kd-1);Xc!==kd&&(this.mf[Xc]===f||0===this.mf[Xc].Wa);)Xc++;for(var Xc=Math.min(Xc,
kd-1),xd=-this.mf[Xc].rb,mc=Math.min(this.Um,se-1);mc!==se&&(this.Ye[mc]===f||0===this.Ye[mc].Wa);)mc++;for(var mc=Math.min(mc,se-1),Od=-this.Ye[mc].rb,cc=0;cc<kd;cc++)if(Nd[cc]){var se=Nd[cc].length,Bb=this.Wd(cc);Qe=Bb.rb+xd+Vf;for(var xc=0;xc<se;xc++)if(Nd[cc][xc]){var Pd=this.Vd(xc);be=Pd.rb+Od+Uf;for(var te=Nd[cc][xc],oa=te.length,Ua=0;Ua<oa;Ua++){var ub=te[Ua],Wf=ub.xa;if(ub instanceof x&&(ub.type===wj||ub.type===xj)){ub.Hb.Ia();var Re=ub.Hb;Re.x=ub.type===wj?Uf:be;Re.y=ub.type===xj?Vf:Qe;Re.width=
Wf.width;Re.height=Wf.height;ub.Hb.freeze();ub.Ic=q}else{for(var Ca=new cb(0,0),Aa=1;Aa<ub.rowSpan&&!(cc+Aa>=this.Qv);Aa++){var Bj=this.Wd(cc+Aa);Ca.height+=Bj.Wa}for(Aa=1;Aa<ub.iC&&!(xc+Aa>=this.$u);Aa++){var zl=this.Vd(xc+Aa);Ca.width+=zl.Wa}var Nc=Pd.Wa+Ca.width,Hg=Bb.Wa+Ca.height;j.x=be;j.y=Qe;j.width=Nc;j.height=Hg;var Ec=be,mi=Qe,xh=Nc,Ig=Hg,Wb=ub.Cb.copy();if(Cb(Wb)){Wb.Xa(this.wj);rb(Wb)||Wb.Xa(Mb);var Se=Pd.Cb;rb(Se)&&(Wb.x=Se.x,Wb.offsetX=Se.offsetX);var Qd=Bb.Cb;rb(Qd)&&(Wb.y=Qd.y,Wb.offsetY=
Qd.offsetY)}rb(Wb)||(Wb=Mb);var yc=Wf.width,za=Wf.height,Yc=ub.Zd,Cj=ub.ue,yc=Math.min(Yc.width,yc),za=Math.min(Yc.height,za),yc=Math.max(Cj.width,yc),za=Math.max(Cj.height,za),ng=ub.margin,vb=ng.left+ng.right,wb=ng.top+ng.bottom,Jg=Qj(ub,Bb,Pd);if(isNaN(ub.wa.width)&&Jg===gd||Jg===lj)yc=Math.max(Nc-vb,0);if(isNaN(ub.wa.height)&&Jg===gd||Jg===kj)za=Math.max(Hg-wb,0);var Al=za+wb;j.x+=j.width*Wb.x-(yc+vb)*Wb.x+Wb.offsetX+ng.left;j.y+=j.height*Wb.y-Al*Wb.y+Wb.offsetY+ng.top;ub.visible&&(jb(Ec,mi,xh,
Ig,j.x,j.y,yc,za)?ub.Cc(j.x,j.y,yc,za):ub.Cc(j.x,j.y,yc,za,new G(Ec,mi,xh,Ig)))}}}}for(cc=0;cc<i;cc++)if(ub=g.n[cc],ub instanceof x&&(ub.type===wj||ub.type===xj))Re=ub.Hb,ub.Jc.Ia(),ub.Jc.zo(0,0,Re.width,Re.height),ub.Jc.freeze();break;case "Viewbox":var og=g.n[0],ce=og.xa,Te=og.margin,pg=Te.top+Te.bottom,Xb=Math.max(ce.width+(Te.right+Te.left),0),tc=Math.max(ce.height+pg,0),Oc=og.Cb;Cb(Oc)&&(Oc=this.wj);rb(Oc)||(Oc=Mb);j.x=e.width*Oc.x-Xb*Oc.x+Oc.offsetX;j.y=e.height*Oc.y-tc*Oc.y+Oc.offsetY;j.width=
ce.width;j.height=ce.height;og.Cc(j.x,j.y,j.width,j.height);break;case "Link":var Ue=this.yp(),yd=0;if(Ue!==n&&yd<this.Kh.count){var ld=this.Kh.n[yd];yd++;Ue.Cc(ld.x-this.Wb.x,ld.y-this.Wb.y,ld.width,ld.height)}for(var qf=0;qf<i;qf++){var Ve=g.n[qf];Ve!==Ue&&yd<this.Kh.count&&(ld=this.Kh.n[yd],yd++,Ve.Cc(ld.x-this.Wb.x,ld.y-this.Wb.y,ld.width,ld.height))}var We=this.gx(),ni=We.count;if(2<=ni&&this.Ce)for(var yh=this.Ej;yh.next();){var md=yh.value,Xf=ni,Xe=We,Hb=md.Dh,Kg=md.Lz,de=md.oj;yb(de)&&(de=
Mb);var Sd=md.vs,zh=md.Mz,ue=f,ve=f,Yf=0;if(Hb<-Xf||Hb>=Xf){var oi=this.BD,rf=this.AD;Sd!==ij&&(Yf=Tk(Sd,rf),md.angle=Yf);ue=oi.x;ve=oi.y}else{var nd=f,sf=f;if(0<=Hb)nd=Xe.n[Hb],sf=Hb<Xf-1?Xe.n[Hb+1]:nd;else var Mg=Xf+Hb,nd=Xe.n[Mg],sf=0<Mg?Xe.n[Mg-1]:nd;rf=0<=Hb?nd.ui(sf):sf.ui(nd);Sd!==ij&&(Yf=Tk(Sd,rf),md.angle=Yf);ue=nd.x+(sf.x-nd.x)*Kg;ve=nd.y+(sf.y-nd.y)*Kg}var Fc=new Wa;Fc.scale(md.scale,md.scale);Fc.rotate(md.angle,0,0);var Ng=md.Sa,Zf=new G(0,0,Ng.width,Ng.height),tf=new F;tf.yo(Zf,de);Fc.Ta(tf);
var Ah=-tf.x,Zc=-tf.y,ee=zh.copy();isNaN(ee.x)&&(ee.x=0<=Hb?tf.x+3:-(tf.x+3));isNaN(ee.y)&&(ee.y=-(tf.y+3));ee.rotate(rf);ue+=ee.x;ve+=ee.y;Fc.HE(Zf);Ah+=Zf.x;Zc+=Zf.y;md.position=new F(ue+Ah,ve+Zc)}this.Gv();break;case "Grid":break;case "TableRow":case "TableColumn":w.m(this.toString()+" is not an element of a Table Panel.TableRow and TableColumn panels can only be elements of a Table Panel.");break;default:w.m("Unknown panel type: "+C)}}};
x.prototype.tj=function(a){var b=this.Sa;if(jb(0,0,b.width,b.height,a.x,a.y)){for(var c=this.Fa.length,b=new F;c--;){var d=this.Fa.n[0];if(d.visible||d===this.Xb)if(Za(b.set(a),d.transform),d.ua(b))return h}return this.we===n&&this.ve===n?q:h}return q};function Uk(a,b,c){c(a,b);if(b instanceof x)for(b=b.elements;b.next();)Uk(a,b.value,c)}function Mi(a,b,c){c(b);for(b=b.elements;b.next();){var d=b.value;d instanceof x&&Mi(a,d,c)}}
function Vk(a,b,c){if(c(b))return b;if(b instanceof x)for(b=b.elements;b.next();){var d=Vk(a,b.value,c);if(d!==n)return b.ug(),d}return n}x.prototype.findObject=x.prototype.Ie=function(a){if(this.name===a)return this;for(var b=this.elements;b.next();){var c=b.value;if(c.name===a)return c;if(c instanceof x&&!c.OG()&&(c=c.Ie(a),c!==n))return c}return n};function zf(a,b){for(var c=a.elements;c.next();){var d=c.value;if(b(d))return d;if(d instanceof x&&(d=zf(d,b),d!==n))return d}return n}da=x.prototype;
da.Hh=function(){return!(this.type===wj||this.type===xj)};
da.wd=function(a,b,c){if(this.Kf===q)return n;b===f&&(b=n);c===f&&(c=n);if(this.Ic)return n;var d=this.Sa,e=1/this.Xl(),g=this.Hh()?a:Za((new F).set(a),this.transform);if(jb(-(5*e),-(5*e),d.width+10*e,d.height+10*e,g.x,g.y)){if(!this.ah)for(var i=this.Fa.length,e=new F;i--;){var j=this.Fa.n[i];if(j.visible||j===this.Xb){j.Hh()?Za(e.set(a),j.transform):e.set(a);var k=n;j instanceof x?k=j.wd(e,b,c):j.Kf===h&&j.ua(e)&&(k=j);if(k!==n&&(b!==n&&(k=b(k)),k&&(c===n||c(k))))return k}}return this.background===
n&&this.Fk===n?n:jb(0,0,d.width,d.height,g.x,g.y)?this:n}return n};
da.Sn=function(a,b,c,d){if(this.Kf===q)return q;b===f&&(b=n);c===f&&(c=n);!(d instanceof z)&&!(d instanceof ma)&&(d=new z(P));var e=this.Sa,g=this.Hh()?a:Za((new F).set(a),this.transform);if(jb(0,0,e.width,e.height,g.x,g.y)){if(!this.ah){g=this.Fa.length;for(e=new F;g--;){var i=this.Fa.n[g];if(i.visible||i===this.Xb)if(i.Hh()?Za(e.set(a),i.transform):e.set(a),(i instanceof x?i.Sn(e,b,c,d):i.ua(e))&&i.Kf!==q)b!==n&&(i=b(i)),i&&(c===n||c(i))&&d.add(i)}}return this.background!==n||this.Fk!==n}return q};
da.Wl=function(a,b,c,d,e,g){if(this.Kf===q)return q;g===f&&(g=new Wa);b===f&&(b=n);c===f&&(c=n);g.multiply(this.transform);if(this.dv(a,g))return oj(this,b,c,e),h;if(this.Le(a,g)){if(!this.ah)for(var i=this.Fa.length;i--;){var j=this.Fa.n[i];if(j.visible||j===this.Xb){var k=j.va,l=this.va;if(!(k.x>l.width||k.y>l.height||0>k.x+k.width||0>k.y+k.height)){if(j instanceof x)k=j.Wl(a,b,c,d,e,g.copy());else{var k=j,l=a,m=d,p=g.copy();k.Kf===q?k=q:(p===f&&(p=new Wa),p.multiply(k.transform),k=m?k.Le(l,p):
k.dv(l,p))}k&&(b!==n&&(j=b(j)),j&&(c===n||c(j))&&e.add(j))}}}return d}return q};
da.Tn=function(a,b,c,d,e){if(this.Kf===q)return q;c===f&&(c=n);d===f&&(d=n);var g=this.Sa,i=this.Hh()?a:Za((new F).set(a),this.transform),j=this.Hh()?b:Za((new F).set(b),this.transform),j=i.Rl(j);if(0<i.x&&i.x<g.width&&0<i.y&&i.y<g.height||$a(i.x,i.y,0,0,0,g.height)<j||$a(i.x,i.y,0,g.height,g.width,g.height)<j||$a(i.x,i.y,g.width,g.height,g.width,0)<j||$a(i.x,i.y,g.width,0,0,0)<j){if(!this.ah){g=new F;i=new F;for(j=this.Fa.length;j--;){var k=this.Fa.n[j];if(k.visible||k===this.Xb){var l=k.va,m=this.va;
if(!(l.x>m.width||l.y>m.height||0>l.x+l.width||0>l.y+l.height))if(l=k.transform,k.Hh()?(Za(g.set(a),l),Za(i.set(b),l)):(g.set(a),i.set(b)),k instanceof x?k.Tn(g,i,c,d,e):k.IC(g,i))c!==n&&(k=c(k)),k&&(d===n||d(k))&&e.add(k)}}}return h}return q};function Nk(a){var b=a.v;if(b===f||b===Ib)b=n;b===n&&a instanceof V&&(a=a.Ga,a!==n&&(b=a.v));b===n&&(b=Jb);return b}function Ok(a){var b=a.w;if(b===f||b===Ib)b=n;b===n&&a instanceof V&&(a=a.Ga,a!==n&&(b=a.w));b===n&&(b=Rb);return b}
x.prototype.add=x.prototype.add=function(a){w.i(a,P,x,"add:element");this.xc(this.Fa.count,a)};x.prototype.elt=x.prototype.oa=function(a){return this.Fa.oa(a)};
x.prototype.insertAt=x.prototype.xc=function(a,b){b instanceof R&&w.m("Cannot add a Part to a Panel: "+b);if(this===b||this.Di(b))this===b&&w.m("Cannot make a Panel contain itself: "+this.toString()),w.m("Cannot make a Panel indirectly contain itself: "+this.toString()+" already contains "+b.toString());var c=b.fa;c!==n&&c!==this&&w.m("Cannot add a GraphObject that already belongs to another Panel to this Panel: "+b.toString()+", already contained by "+c.toString()+", cannot be shared by this Panel: "+
this.toString());this.S===ui&&!(b instanceof V)&&w.m("Can only add Shapes to a Grid Panel, not: "+b);b.Yk(this);b.Cl=n;if(this.mz!==n){var d=b.data;d!==n&&"object"===typeof d&&(this.If===n&&(this.If=new la(Object,x)),this.If.add(d,b))}var e=this.Fa,d=-1;if(c===this){for(var g=-1,i=e.count,j=0;j<i;j++)if(e.n[j]===b){g=j;break}if(-1!==g){if(g===a||g+1>=e.count&&a>=e.count)return;e.Se(g);d=g}else w.m("element "+b.toString()+" has panel "+c.toString()+" but is not contained by it.")}if(0>a||a>e.count)a=
e.count;e.xc(a,b);this.R();b.R();c=this.ca;c!==n&&(e=this.h,e!==n&&e.sa.tb||(-1!==d&&c.Nc(je,"elements",this,b,n,d,n),c.Nc(ie,"elements",this,n,b,n,a)))};x.prototype.remove=x.prototype.remove=function(a){w.i(a,P,x,"remove:element");for(var b=this.Fa,c=b.count,d=-1,e=0;e<c;e++)if(b.n[e]===a){d=e;break}-1!==d&&this.Kd(d)};x.prototype.removeAt=x.prototype.Se=function(a){u&&w.o(a,x,"removeAt:idx");0<=a&&this.Kd(a)};
x.prototype.Kd=function(a){var b=this.Fa,c=b.oa(a);c.Cl=n;c.Yk(n);if(this.If!==n){var d=c.data;"object"===typeof d&&this.If.remove(d)}b.Se(a);this.ac=q;this.R();b=this.ca;b!==n&&(d=this.h,d!==n&&d.sa.tb||b.Nc(je,"elements",this,c,n,a,n))};w.u(x,{Qv:"rowCount"},function(){return this.mf.length});
x.prototype.getRowDefinition=x.prototype.Wd=function(a){u&&w.o(a,x,"getRowDefinition:idx");0>a&&w.ra(a,">= 0",x,"getRowDefinition:idx");var a=Math.round(a),b=this.mf;if(b[a]===f){var c=new ek;c.Yk(this);c.rl=h;c.ea=a;b[a]=c}return b[a]};x.prototype.removeRowDefinition=x.prototype.ML=function(a){u&&w.o(a,x,"removeRowDefinition:idx");0>a&&w.ra(a,">= 0",x,"removeRowDefinition:idx");var a=Math.round(a),b=this.mf;b[a]&&(b[a]=f)};w.u(x,{$u:"columnCount"},function(){return this.Ye.length});
x.prototype.getColumnDefinition=x.prototype.Vd=function(a){u&&w.o(a,x,"getColumnDefinition:idx");0>a&&w.ra(a,">= 0",x,"getColumnDefinition:idx");var a=Math.round(a),b=this.Ye;if(b[a]===f){var c=new ek;c.Yk(this);c.rl=h;c.ea=a;b[a]=c}return b[a]};x.prototype.removeColumnDefinition=x.prototype.LL=function(a){u&&w.o(a,x,"removeColumnDefinition:idx");0>a&&w.ra(a,">= 0",x,"removeColumnDefinition:idx");var a=Math.round(a),b=this.Ye;b[a]&&(b[a]=f)};w.g(x,"rowSizing",x.prototype.hE);
w.defineProperty(x,{hE:"rowSizing"},t("Mq"),function(a){var b=this.Mq;b!==a&&(a!==Lk&&a!==Rk&&w.m("rowSizing must be RowColumnDefinition.ProportionalExtra or RowColumnDefinition.None"),this.Mq=a,this.R(),this.j("rowSizing",b,a))});w.g(x,"columnSizing",x.prototype.hC);
w.defineProperty(x,{hC:"columnSizing"},t("To"),function(a){var b=this.To;b!==a&&(a!==Lk&&a!==Rk&&w.m("columnSizing must be RowColumnDefinition.ProportionalExtra or RowColumnDefinition.None"),this.To=a,this.R(),this.j("columnSizing",b,a))});w.g(x,"topIndex",x.prototype.eI);w.defineProperty(x,{eI:"topIndex"},t("qn"),function(a){var b=this.qn;b!==a&&((!isFinite(a)||0>a)&&w.m("topIndex must be greater than zero and a real number. Was "+a),this.qn=a,Aj(this),this.j("topIndex",b,a))});
w.g(x,"leftIndex",x.prototype.XG);w.defineProperty(x,{XG:"leftIndex"},t("Um"),function(a){var b=this.Um;b!==a&&((!isFinite(a)||0>a)&&w.m("leftIndex must be greater than zero and a real number. Was "+a),this.Um=a,Aj(this),this.j("leftIndex",b,a))});w.g(x,"data",x.prototype.data);
w.defineProperty(x,{data:"data"},t("zm"),function(a){var b=this.zm;if(b!==a){var c=this instanceof R&&!(this instanceof mf);c&&w.k(a,"object",x,"data");xf(this);this.zm=a;var d=this.h;d!==n&&(c?this instanceof U?(b!==n&&d.ek.remove(b),a!==n&&d.ek.add(a,this)):(b!==n&&d.Oh.remove(b),a!==n&&d.Oh.add(a,this)):(c=this.fa,c!==n&&c.If!==n&&(b!==n&&c.If.remove(b),a!==n&&c.If.add(a,this))));this.j("data",b,a);d!==n&&d.sa.tb||a!==n&&this.vb()}});function $j(a){a=a.fl;return a!==n&&a.$a}
function xf(a){var b=a.fl;if(b===n)a.data!==n&&w.m("Template cannot have .data be non-null: "+a),a.fl=b=new z(bf);else if(b.$a)return;var c=new z(P);Uk(a,a,function(a,d){var e=d.oc;if(e!==n){d.tm=q;for(var g=e.l;g.next();){e=g.value;e.mode===df&&(d.tm=h);var i=e.Bo;if(i!==n){var r=a;""!==i&&(r=a.Ie(i));r!==n&&(c.add(r),r.$q===f&&(r.$q=new z(bf)),r.$q.add(e))}b.add(e)}}if(d instanceof x){if(0<d.mf.length){g=d.mf;i=g.length;for(r=0;r<i;r++){var s=g[r];if(s!==f&&s.oc!==n)for(var v=s.oc.l;v.next();)e=
v.value,e.Pf=s,e.ay=2,e.Fu=s.index,b.add(e)}}if(0<d.Ye.length){g=d.Ye;i=g.length;for(r=0;r<i;r++)if(s=g[r],s!==f&&s.oc!==n)for(v=s.oc.l;v.next();)e=v.value,e.Pf=s,e.ay=1,e.Fu=s.index,b.add(e)}}});for(var d=c.l;d.next();){var e=d.value;if(e.$q!==f){e.tm=h;for(var g=e.$q.l;g.next();){var i=g.value;e.oc===n&&(e.oc=new z(bf));e.oc.add(i)}}delete e.$q}for(d=b.l;d.next();)e=d.value,g=e.Pf,g!==n&&(e.Pf=n,g===a?e.jm="":(g instanceof ek&&(g=g.fa),e.jm=""!==g.name?g.name:g.name="_"+w.ec(g)));b.freeze();a instanceof
R&&a.Yd()&&(Hh(a,Infinity,Infinity),a.Cc())}
x.prototype.updateTargetBindings=x.prototype.vb=function(a){var b=this.fl;if(b!==n){a===f&&(a="");for(b=b.l;b.next();){var c=b.value,d=c.Sz;if(!(""!==a&&d!==a)&&(d=c.Uz,!(c.kC===n&&""===d))){var d=this.data,e=c.Bo;e!==n&&(d=this.Ie(e));if(d===n)u&&w.trace("Binding error: missing GraphObject named "+e+" in "+this.toString());else{var e=this,g=c.jm;if(""!==g){if(e=this.Ie(g),e===n)continue}else c.Pf!==n&&(e=c.Pf);g=c.ay;if(0!==g){if(!(e instanceof x))continue;1===g?e=e.Vd(c.Fu):2===g&&(e=e.Wd(c.Fu))}e!==
f&&c.ME(e,d)}}}}};w.g(x,"itemArray",x.prototype.mz);w.defineProperty(x,{mz:"itemArray"},t("rk"),function(a){var b=this.rk;if(b!==a){u&&(a!==n&&!w.isArray(a))&&w.m("Panel.itemArray must be an Array-like object or null, not: "+a);var c=this.h;c!==n&&b!==n&&Pi(c,this);this.rk=a;c!==n&&a!==n&&Ni(c,this);this.j("itemArray",b,a);c!==n&&c.sa.tb||this.Gz()}});
x.prototype.rebuildItemElements=x.prototype.Gz=function(){var a=0;if(this.type===ah||this.type===Xh||this.type===Rg)a=1;for(;this.Fa.length>a;)this.Kd(a);a=this.mz;if(a!==n)for(var b=w.Rb(a),c=0;c<b;c++)Yh(this,w.Db(a,c))};
function Yh(a,b,c){if(!(b===f||b===n)){var d=a.getCategoryForItemData(b),e=a.findTemplateForItemData(b,d);e instanceof x&&(xf(e),e=e.copy(),"object"===typeof b&&(a.If===n&&(a.If=new la(Object,x)),a.If.add(b,e)),"number"===typeof c?((a.type===ah||a.type===Xh)&&c++,a.xc(c,e),Wk(e,c),Zh(a,c)):(a.add(e),Wk(e,a.Fa.count-1)),e.tx=d,e.data=b)}}function Zh(a,b){for(var c=a.Fa,d=b+1;d<c.length;){var e=c.oa(d);e instanceof x&&Wk(e,d);d++}}function Wk(a,b){a.type===wj?a.mc=b:a.type===xj&&(a.Dc=b)}
x.prototype.isItemPanel=x.prototype.OG=function(){return this.rk!==n||this.xg!==n};w.g(x,"itemTemplate",x.prototype.TG);w.defineProperty(x,{TG:"itemTemplate"},function(){return this.xg===n?n:this.xg.qa("")},function(a){this.xg===n&&(this.xg=new la("string",x));var b=this.xg.qa("");b!==a&&(w.i(a,x,x,"itemTemplate"),a instanceof R&&w.m("itemTemplate must not be a Part: "+a),this.xg.add("",a),this.j("itemTemplate",b,a),a=this.h,a!==n&&a.sa.tb||this.Gz())});w.g(x,"itemTemplateMap",x.prototype.nD);
w.defineProperty(x,{nD:"itemTemplateMap"},t("xg"),function(a){var b=this.xg;if(b!==a){w.i(a,la,x,"itemTemplateMap");for(var c=a.l;c.next();){var d=c.value;d instanceof R&&w.m("Template in itemTemplateMap must not be a Part: "+d)}this.xg=a;this.j("itemTemplateMap",b,a);a=this.h;a!==n&&a.sa.tb||this.Gz()}});w.g(x,"itemCategoryProperty",x.prototype.SG);
w.defineProperty(x,{SG:"itemCategoryProperty"},t("Pm"),function(a){var b=this.Pm;b!==a&&("string"!==typeof a&&"function"!==typeof a&&w.hc(a,"string or function",x,"itemCategoryProperty"),this.Pm=a,this.j("itemCategoryProperty",b,a))});
x.prototype.getCategoryForItemData=x.prototype.yK=function(a){if(a===n)return"";var b=this.Pm;if("function"===typeof b)b=b(a);else if("string"===typeof b&&"object"===typeof a){if(""===b)return"";b=w.Va(a,b)}else return"";if(b===f)return"";if("string"===typeof b)return b;u&&w.trace("Panel.getCategoryForItemData found a non-string category for "+a+": "+b);return""};
x.prototype.findTemplateForItemData=x.prototype.oK=function(a,b){var c=this.nD,d=n;c!==n&&(d=c.qa(b));d===n&&(w.oF||(w.oF=h,w.trace('No item template Panel found for category "'+b+'" on '+this),w.trace("  Using default item template."),c=new x,d=new na,d.bind(new bf("text","",ke)),c.add(d),w.YE=c),d=w.YE);return d instanceof x?d:n};w.g(x,"isAtomic",x.prototype.MG);
w.defineProperty(x,{MG:"isAtomic"},t("ah"),function(a){var b=this.ah;b!==a&&(w.k(a,"boolean",x,"isAtomic"),this.ah=a,this.j("isAtomic",b,a))});w.g(x,"opacity",x.prototype.opacity);w.defineProperty(x,{opacity:"opacity"},t("fi"),function(a){var b=this.fi;b!==a&&(w.k(a,"number",x,"opacity"),(0>a||1<a)&&w.ra(a,"0 <= val <= 1",x,"opacity"),this.fi=a,this.j("opacity",b,a),a=this.h,a!==n&&Mh(a))});
function ek(){w.ic(this);this.wk=n;this.rl=h;this.ea=0;this.nf=NaN;this.yl=0;this.xl=Infinity;this.Aa=Ib;this.rb=this.Wa=0;this.oc=n;this.Xq=Xk;this.nh=ch}w.P("RowColumnDefinition",ek);ek.prototype.copy=function(){var a=new ek;a.rl=this.rl;a.ea=this.ea;a.nf=this.nf;a.yl=this.yl;a.xl=this.xl;a.Aa=this.Aa;a.Wa=this.Wa;a.rb=this.rb;a.nh=this.nh;a.Xq=this.Xq;a.oc=this.oc;return a};var Xk;ek.Default=Xk=w.s(ek,"Default",0);var Rk;ek.None=Rk=w.s(ek,"None",1);var Lk;
ek.ProportionalExtra=Lk=w.s(ek,"ProportionalExtra",2);ek.prototype.Yk=ba("wk");function Pk(a,b){a.Wa=isNaN(a.nf)?Math.max(Math.min(a.xl,b),a.yl):Math.max(Math.min(a.xl,a.nf),a.yl)}ek.prototype.Qd=function(a,b,c,d,e){var g=this.wk;if(g!==n){g.R();for(var i=this.Cv,j=g.Fa,k=j.length,l=0;l<k;l++){var m=j.n[l];(i?m.mc:m.Dc)===this.index&&m.R()}g.Nc(he,a,this,b,c,d,e);if(this.oc!==n&&(b=g.Qr(),b!==n&&(b=b.data,b!==n)))for(c=this.oc.l;c.next();)c.value.LE(this,b,a)}};w.u(ek,{fa:"panel"},t("wk"));
w.u(ek,{Cv:"isRow"},t("rl"));w.u(ek,{index:"index"},t("ea"));w.g(ek,"height",ek.prototype.height);w.defineProperty(ek,{height:"height"},t("nf"),function(a){var b=this.nf;b!==a&&(u&&w.k(a,"number",ek,"height"),0>a&&w.ra(a,">= 0",ek,"height"),this.nf=a,Pk(this,this.Wa),this.Qd("size",b,a))});w.g(ek,"width",ek.prototype.width);
w.defineProperty(ek,{width:"width"},t("nf"),function(a){var b=this.nf;b!==a&&(u&&w.k(a,"number",ek,"width"),0>a&&w.ra(a,">= 0",ek,"width"),this.nf=a,Pk(this,this.Wa),this.Qd("size",b,a))});w.g(ek,"minimum",ek.prototype.Zf);w.defineProperty(ek,{Zf:"minimum"},t("yl"),function(a){var b=this.yl;b!==a&&(u&&w.k(a,"number",ek,"minimum"),(0>a||!isFinite(a))&&w.ra(a,">= 0",ek,"minimum"),this.yl=a,Pk(this,this.Wa),this.Qd("minimum",b,a))});w.g(ek,"maximum",ek.prototype.$d);
w.defineProperty(ek,{$d:"maximum"},t("xl"),function(a){var b=this.xl;b!==a&&(u&&w.k(a,"number",ek,"maximum"),0>a&&w.ra(a,">= 0",ek,"maximum"),this.xl=a,Pk(this,this.Wa),this.Qd("maximum",b,a))});w.g(ek,"alignment",ek.prototype.Cb);w.defineProperty(ek,{Cb:"alignment"},t("Aa"),function(a){var b=this.Aa;b.I(a)||(u&&w.i(a,H,ek,"alignment"),this.Aa=a.O(),this.Qd("alignment",b,a))});w.g(ek,"stretch",ek.prototype.Fh);
w.defineProperty(ek,{Fh:"stretch"},t("nh"),function(a){var b=this.nh;b!==a&&(u&&w.jb(a,P,ek,"stretch"),this.nh=a,this.Qd("stretch",b,a))});w.g(ek,"sizing",ek.prototype.zs);w.defineProperty(ek,{zs:"sizing"},t("Xq"),function(a){var b=this.Xq;b!==a&&(u&&w.jb(a,ek,ek,"sizing"),this.Xq=a,this.Qd("sizing",b,a))});function Qk(a){if(a.zs===Xk){var b=a.wk;return a.Cv?b.hE:b.hC}return a.zs}w.u(ek,{cd:"actual"},t("Wa"));w.u(ek,{position:"position"},t("rb"));
ek.prototype.bind=ek.prototype.bind=function(a){a.Pf=this;var b=this.fa;b!==n&&(b=b.Qr(),b!==n&&$j(b)&&w.m("Cannot add a Binding to a RowColumnDefinition that is already frozen: "+a));this.oc===n&&(this.oc=new z(bf));this.oc.add(a)};
function V(){P.call(this);this.Ga=n;this.pp="None";this.kh=q;this.xp=ch;this.bk=n;this.kc=this.Be="black";this.oh=1;this.ln="butt";this.mn="miter";this.nn=10;this.br=n;this.of=0;this.li=this.ki=Ib;this.uq=this.tq=0;this.Gp=q;this.Mp=h;this.hF=new G;this.Gm=this.pn="None";this.Dp=1}w.P("Shape",V);w.Da(V,P);
V.prototype.xb=function(a){P.prototype.xb.call(this,a);a.Ga=this.Ga;a.pp=this.pp;a.kh=this.kh;a.xp=this.xp;a.bk=this.bk;a.Be=this.Be;a.kc=this.kc;a.oh=this.oh;a.ln=this.ln;a.mn=this.mn;a.nn=this.nn;a.br=this.br;a.of=this.of;a.ki=this.ki.O();a.li=this.li.O();a.tq=this.tq;a.uq=this.uq;a.Gp=this.Gp;a.Mp=this.Mp;a.pn=this.pn;a.Gm=this.Gm;a.Dp=this.Dp};V.prototype.toString=function(){return"Shape("+("None"!==this.gb?this.gb:"None"!==this.mm?this.mm:this.tv)+")#"+w.ec(this)};
V.prototype.Pn=function(a){if(!(this.kc===n&&this.Be===n)){this.Be!==n&&yj(this,a,this.Be,h);this.kc!==n&&yj(this,a,this.kc,q);var b=this.oh;if(0===b){var c=this.ca;c instanceof mf&&(c.type===Rg&&c.Bc instanceof V)&&(b=c.Bc.eb)}a.lineWidth=b;a.lineJoin=this.mn;a.lineCap=this.ln;a.miterLimit=this.nn;var d=q;this.ca&&(d=this.ca.$n);var e=h;this.kc!==n&&this.Be===n&&(e=q);b=q;c=this.wE;if(c!==n){var g=b=h;a.setLineDash!==f?(a.setLineDash(c),a.lineDashOffset=this.of):a.webkitLineDash!==f?(a.webkitLineDash=
c,a.webkitLineDashOffset=this.of):a.mozDash!==f?(a.mozDash=c,a.mozDashOffset=this.of):g=q}var i=this.Ga;if(i!==n){if(i.S===hd)a.beginPath(),b&&!g?Yk(a,i.Bb,i.Nb,i.Ac,i.Hc,c,this.of):(a.moveTo(i.Bb,i.Nb),a.lineTo(i.Ac,i.Hc)),this.Be!==n&&a.fill(),this.kc!==n&&a.stroke();else if(i.S===od){var j=i.Bb,k=i.Nb,l=i.Ac,i=i.Hc,m=Math.min(j,l),p=Math.min(k,i),j=Math.abs(l-j),k=Math.abs(i-k);this.Be!==n&&a.fillRect(m,p,j,k);if(this.kc!==n){if(e&&d){var r=[a.shadowOffsetX,a.shadowOffsetY,a.shadowBlur];a.shadowOffsetX=
0;a.shadowOffsetY=0;a.shadowBlur=0}b&&!g?(g=[[m,p],[m+j,p],[m+j,p+k],[m,p+k],[m,p]],a.beginPath(),Zk(a,g,c,this.of),a.stroke()):a.strokeRect(m,p,j,k);e&&d&&(a.shadowOffsetX=r[0],a.shadowOffsetY=r[1],a.shadowBlur=r[2])}}else if(i.S===pd)j=i.Bb,k=i.Nb,l=i.Ac,i=i.Hc,m=Math.abs(l-j)/2,p=Math.abs(i-k)/2,j=Math.min(j,l)+m,k=Math.min(k,i)+p,a.beginPath(),a.moveTo(j,k-p),a.bezierCurveTo(j+hc*m,k-p,j+m,k-hc*p,j+m,k),a.bezierCurveTo(j+m,k+hc*p,j+hc*m,k+p,j,k+p),a.bezierCurveTo(j-hc*m,k+p,j-m,k+hc*p,j-m,k),
a.bezierCurveTo(j-m,k-hc*p,j-hc*m,k-p,j,k-p),a.closePath(),this.Be!==n&&a.fill(),b&&!g&&(g=[],zc(j,k-p,j+hc*m,k-p,j+m,k-hc*p,j+m,k,0.5,g),zc(j+m,k,j+m,k+hc*p,j+hc*m,k+p,j,k+p,0.5,g),zc(j,k+p,j-hc*m,k+p,j-m,k+hc*p,j-m,k,0.5,g),zc(j-m,k,j-m,k-hc*p,j-hc*m,k-p,j,k-p,0.5,g),a.beginPath(),Zk(a,g,c,this.of)),this.kc!==n&&(e&&d&&(r=[a.shadowOffsetX,a.shadowOffsetY,a.shadowBlur],a.shadowOffsetX=0,a.shadowOffsetY=0,a.shadowBlur=0),a.stroke(),e&&d&&(a.shadowOffsetX=r[0],a.shadowOffsetY=r[1],a.shadowBlur=r[2]));
else if(i.S===ed){for(var m=i.hk,p=m.length,s=0;s<p;s++){var v=m.n[s];a.beginPath();a.moveTo(v.la,v.ma);for(var y=v.za.n,C=y.length,E=n,I=0;I<C;I++){var D=y[I];switch(D.S){case Gd:a.moveTo(D.C,D.D);break;case rd:a.lineTo(D.C,D.D);break;case Hd:a.bezierCurveTo(D.ff,D.gf,D.hi,D.ii,D.Lf,D.Mf);break;case Jd:a.quadraticCurveTo(D.ff,D.gf,D.Lf,D.Mf);break;case Kd:if(D.radiusX===D.radiusY)E=Math.PI/180,a.arc(D.um,D.vm,D.radiusX,D.jg*E,(D.jg+D.Gh)*E,0>D.Gh?h:q);else for(var E=Ld(D,v),M=E.length,N=0;N<M;N++){var Z=
E[N];0===N&&a.lineTo(Z.x1,Z.y1);a.bezierCurveTo(Z.x2,Z.y2,Z.Cf,Z.Df,Z.Uc,Z.Vc)}break;case Cd:E&&E.type===Kd?(E=Ld(E,v),E=E[E.length-1]||n,E!==n&&(j=E.Uc,l=E.Vc)):(j=E?E.C:v.la,l=E?E.D:v.ma);E=Rd(D,v,j,l);M=E.length;for(N=0;N<M;N++)Z=E[N],a.bezierCurveTo(Z.x2,Z.y2,Z.Cf,Z.Df,Z.Uc,Z.Vc);break;default:w.m("Segment not of valid type")}D.Uh&&a.closePath();E=D}d?v.Hf?(v.pl===h&&this.Be!==n?(a.fill(),e=h):e=q,this.kc!==n&&(e&&(r=[a.shadowOffsetX,a.shadowOffsetY,a.shadowBlur],a.shadowOffsetX=0,a.shadowOffsetY=
0,a.shadowBlur=0),(!b||g)&&a.stroke(),e&&(a.shadowOffsetX=r[0],a.shadowOffsetY=r[1],a.shadowBlur=r[2]))):(e&&(r=[a.shadowOffsetX,a.shadowOffsetY,a.shadowBlur],a.shadowOffsetX=0,a.shadowOffsetY=0,a.shadowBlur=0),v.pl===h&&this.Be!==n&&a.fill(),this.kc!==n&&(!b||g)&&a.stroke(),e&&(a.shadowOffsetX=r[0],a.shadowOffsetY=r[1],a.shadowBlur=r[2])):(v.pl===h&&this.Be!==n&&a.fill(),this.kc!==n&&(!b||g)&&a.stroke())}if(b&&!g){r=e;g=i.hk;e=g.length;for(i=0;i<e;i++){j=g.n[i];a.beginPath();l=[];l.push([j.la,j.ma]);
m=j.la;p=j.ma;s=m;v=p;y=j.za.n;C=y.length;for(I=0;I<C;I++){D=y[I];switch(D.S){case Gd:Zk(a,l,c,this.of);l=[];l.push([D.C,D.D]);m=D.C;p=D.D;s=m;v=p;break;case rd:l.push([D.C,D.D]);m=D.C;p=D.D;break;case Hd:E=[];zc(m,p,D.ff,D.gf,D.hi,D.ii,D.Lf,D.Mf,0.5,E);l=l.concat(E);m=D.C;p=D.D;break;case Jd:E=[];Cc(m,p,D.ff,D.gf,D.Lf,D.Mf,0.5,E);l=l.concat(E);m=D.C;p=D.D;break;case Kd:M=Ld(D,j);N=M.length;for(Z=0;Z<N;Z++){var wa=M[Z],E=[];zc(m,p,wa.x2,wa.y2,wa.Cf,wa.Df,wa.Uc,wa.Vc,0.5,E);l=l.concat(E);m=wa.Uc;p=
wa.Vc}break;case Cd:M=Rd(D,j,m,p);N=M.length;for(Z=0;Z<N;Z++)wa=M[Z],E=[],zc(m,p,wa.x2,wa.y2,wa.Cf,wa.Df,wa.Uc,wa.Vc,0.5,E),l=l.concat(E),m=wa.Uc,p=wa.Vc;break;default:w.m("Segment not of valid type")}D.Uh&&(l.push([s,v]),Zk(a,l,c,this.of))}Zk(a,l,c,this.of);this.kc!==n&&(r&&d&&(k=[a.shadowOffsetX,a.shadowOffsetY,a.shadowBlur],a.shadowOffsetX=0,a.shadowOffsetY=0,a.shadowBlur=0),a.stroke(),r&&d&&(a.shadowOffsetX=k[0],a.shadowOffsetY=k[1],a.shadowBlur=k[2]))}}}b&&(a.setLineDash!==f?(a.setLineDash(n),
a.lineDashOffset=0):a.webkitLineDash!==f?(a.webkitLineDash=[],a.webkitLineDashOffset=0):a.mozDash!==f&&(a.mozDash=n,a.mozDashOffset=0))}}};function Yk(a,b,c,d,e,g,i){var j=0.0010,k=g.length;a.moveTo(b,c);d-=b;j=e-c;0===d&&(d=0.0010);for(var e=j/d,l=Math.sqrt(d*d+j*j),m=0,p=h,r=0===i?q:h;0.1<=l;){r?(j=g[m++%k],i%=j,j-=i,r=q):j=g[m++%k];j>l&&(j=l);var s=Math.sqrt(j*j/(1+e*e));0>d&&(s=-s);b+=s;c+=e*s;p?a.lineTo(b,c):a.moveTo(b,c);l-=j;p=!p}}
function Zk(a,b,c,d){var e=0.0010,g=c.length,i,j,k,l=b.length;if(!(2>l))if(i=b[0][0],j=b[0][1],2===l)Yk(a,i,j,b[1][0],b[1][1],c,d);else{a.moveTo(i,j);for(var m,p,r,s=0,v=[],y=1;y<l;y++)m=b[y],e=m[0],k=m[1],m=e-i,i=k-j,0===m&&(m=0.0010),p=i/m,i=Math.sqrt(m*m+i*i),v.push([m,p,i]),s+=i,i=e,j=k;i=b[0][0];j=b[0][1];b=0;l=h;e=c[b%g];y=0===d?q:h;k=0;r=v[k];m=r[0];p=r[1];r=r[2];for(var C=0;0.1<=s;){0===C&&(y?(e=c[b%g],b++,d%=e,e-=d,y=q):(e=c[b%g],b++));e>s&&(e=s);e>r?(C=e-r,e=r):C=0;var E=Math.sqrt(e*e/(1+
p*p));0>m&&(E=-E);i+=E;j+=p*E;l?a.lineTo(i,j):a.moveTo(i,j);s-=e;r-=e;if(0!==C){k++;if(k===v.length)break;r=v[k];m=r[0];p=r[1];r=r[2];e=C}else l=!l}}}V.prototype.getDocumentPoint=V.prototype.Ob=function(a){yb(a)&&w.m("Spot must be real");var b=this.Sa,c=this.eb,a=new F(a.x*(b.width+c)-c/2+b.x+a.offsetX,a.y*(b.height+c)-c/2+b.y+a.offsetY);this.ie.Ta(a);return a};
V.prototype.tj=function(a,b){var c=this.Ga;if(c===n||this.fill===n&&this.stroke===n)return q;var d=c.Eb,e=this.eb/2;c.type===hd&&!b&&(e+=2);var g=this.hF;g.set(d);g.Kg(e+2,e+2);if(!g.ua(a))return q;d=e+1E-4;if(c.type===hd){if(this.stroke===n)return q;d=(c.C-c.la)*(a.x-c.la)+(c.D-c.ma)*(a.y-c.ma);return 0>(c.la-c.C)*(a.x-c.C)+(c.ma-c.D)*(a.y-c.D)||0>d?q:uc(c.la,c.ma,c.C,c.D,e,a.x,a.y)}if(c.type===od){var i=c.la,j=c.ma,k=c.C,l=c.D,c=Math.min(i,k),m=Math.min(j,l),i=Math.abs(k-i),j=Math.abs(l-j);g.x=
c;g.y=m;g.width=i;g.height=j;if(this.fill===n){g.Kg(-d,-d);if(g.ua(a))return q;g.Kg(d,d)}this.stroke!==n&&g.Kg(e,e);return g.ua(a)}if(c.type===pd){i=c.la;j=c.ma;k=c.C;l=c.D;c=Math.min(i,k);m=Math.min(j,l);i=Math.abs(k-i);j=Math.abs(l-j);g=i/2;j/=2;c=a.x-(c+g);m=a.y-(m+j);if(this.fill===n){g-=d;j-=d;if(0>=g||0>=j||1>=c*c/(g*g)+m*m/(j*j))return q;g+=d;j+=d}this.stroke!==n&&(g+=e,j+=e);return 0>=g||0>=j?q:1>=c*c/(g*g)+m*m/(j*j)}if(c.type===ed)return this.fill===n?Vd(c,a.x,a.y,e):c.ua(a,e,1<this.eb,b);
w.m("Unknown Geometry type");return q};
V.prototype.fs=function(a,b,c,d){var e=this.wa,g=this.oh,a=Math.max(a,0),b=Math.max(b,0),i;this.kh?i=this.Ga.Eb:($k[this.gb]===f&&w.m("Unsupported Figure:"+this.gb),i=$k[this.gb].Eb);var j=i.width,k=i.height,l=i.width,m=i.height;switch(pj(this)){case jj:d=c=0;break;case gd:l=Math.max(a-g,0);m=Math.max(b-g,0);break;case lj:l=Math.max(a-g,0);d=0;break;case kj:c=0,m=Math.max(b-g,0)}isFinite(e.width)&&(l=e.width);isFinite(e.height)&&(m=e.height);e=this.Zd;i=this.ue;c=Math.max(c/this.scale,i.width)-g;
d=Math.max(d/this.scale,i.height)-g;l=Math.min(e.width,l);m=Math.min(e.height,m);l=isFinite(l)?Math.max(c,l):Math.max(j,c);m=isFinite(m)?Math.max(d,m):Math.max(k,d);c=this.uv;c=this.kh?c===ch?gd:c:c===ch?$k[this.gb].$b:c;switch(c){case jj:break;case gd:j=l;k=m;break;case dh:c=Math.min(l/j,m/k);isFinite(c)||(c=1);j*=c;k*=c;break;default:w.m(c+" is not a valid geometryStretch.")}if(this.kh){i=this.Tc;d=j;e=k;c=i.copy();i=i.Eb;d/=i.width;e/=i.height;isFinite(d)||(d=1);isFinite(e)||(e=1);if(!(1===d&&
1===e)){switch(c.type){case hd:case od:case pd:c.Bb*=d;c.Nb*=e;c.Ac*=d;c.Hc*=e;break;case ed:i=c.sb;for(var p=i.length,r=0;r<p;r++){var s=i.n[r];s.la*=d;s.ma*=e;for(var s=s.za,v=s.length,y=0;y<v;y++){var C=s.n[y];switch(C.type){case rd:case Gd:C.C*=d;C.D*=e;break;case Hd:C.ff*=d;C.gf*=e;C.hi*=d;C.ii*=e;C.C*=d;C.D*=e;break;case Jd:C.Ub*=d;C.zc*=e;C.C*=d;C.D*=e;break;case Kd:C.pa*=d;C.ta*=e;C.radiusX*=d;C.radiusY!==f&&(C.radiusY*=e);break;case Cd:C.C*=d;C.D*=e;C.radiusX*=d;C.radiusY*=e;break;default:w.m("Unknown Segment type: "+
C.type)}}}}c.Na=h}this.Ga=c}else if(this.Ga===n||this.Ga.At!==a||this.Ga.zt!==b)c=j,d=k,i=this.wa,e=i.width,i=i.height,c!==f&&(!isNaN(c)&&isFinite(c))&&(e=c),d!==f&&(!isNaN(d)&&isFinite(d))&&(i=d),isFinite(e)||(e=100),isFinite(i)||(i=100),p=f,"None"!==this.mm?p=al(this.mm):"None"!==this.tv?p=al(this.tv):(r=bl[this.gb],"string"===typeof r&&(r=bl[r]),r===f&&w.m("Unknown Shape.figure: "+this.gb),p=r(this,e,i),p.Pd=new cb(e,i)),p===f&&(r=bl.Rectangle)&&(p=r(this,e,i)),p.At=c,p.zt=d,this.Ga=p;i=this.Ga.Eb;
Infinity===a||Infinity===b?mj(this,i.x-g/2,i.y-g/2,0===a&&0===j?0:i.width+g,0===b&&0===k?0:i.height+g):mj(this,-(g/2),-(g/2),l+g,m+g)};
function Sk(a,b,c){if(a.ac!==q){a.Rc.Ia();var d=a.oh;if(0===d){var e=a.ca;e instanceof mf&&(e.type===Rg&&e.Bc instanceof V)&&(d=e.Bc.eb)}d*=a.Vb;mj(a,-(d/2),-(d/2),b+d,c+d);b=a.Rc;c=a.Zd;d=a.ue;b.width=Math.min(c.width,b.width);b.height=Math.min(c.height,b.height);b.width=Math.max(d.width,b.width);b.height=Math.max(d.height,b.height);a.Rc.freeze();a.Rc.T()||w.m("Non-real measuredBounds has been set");a.ac=q}}V.prototype.sj=function(a,b,c,d){sj(this,a,b,c,d)};
V.prototype.getNearestIntersectionPoint=V.prototype.RC=function(a,b,c){return this.Ur(a.x,a.y,b.x,b.y,c)};
V.prototype.Ur=function(a,b,c,d,e){var g=this.transform,i=1/(g.m11*g.m22-g.m12*g.m21),j=g.m22*i,k=-g.m12*i,l=-g.m21*i,m=g.m11*i,p=i*(g.m21*g.dy-g.m22*g.dx),r=i*(g.m12*g.dx-g.m11*g.dy),g=a*j+b*l+p,i=a*k+b*m+r,j=c*j+d*l+p,k=c*k+d*m+r,l=this.eb/2,p=this.Ga;p===n&&(Hh(this,Infinity,Infinity),p=this.Ga);r=p.Eb;m=q;if(p.type===hd)if(1.5>=this.eb)m=Jc(p.Bb,p.Nb,p.Ac,p.Hc,g,i,j,k,e);else{var s;p.Bb===p.Ac?(s=l,r=0):(b=(p.Hc-p.Nb)/(p.Ac-p.Bb),r=l/Math.sqrt(1+b*b),s=r*b);b=[];d=new F;Jc(p.Bb+s,p.Nb+r,p.Ac+
s,p.Hc+r,g,i,j,k,d)&&b.push(d);d=new F;Jc(p.Bb-s,p.Nb-r,p.Ac-s,p.Hc-r,g,i,j,k,d)&&b.push(d);d=new F;Jc(p.Bb+s,p.Nb+r,p.Bb-s,p.Nb-r,g,i,j,k,d)&&b.push(d);d=new F;Jc(p.Ac+s,p.Hc+r,p.Ac-s,p.Hc-r,g,i,j,k,d)&&b.push(d);d=b.length;if(0===d)return q;m=h;r=Infinity;for(s=0;s<d;s++){var j=b[s],v=(j.x-g)*(j.x-g)+(j.y-i)*(j.y-i);v<r&&(r=v,e.x=j.x,e.y=j.y)}}else if(p.type===od)d=r.x-l,m=Pc(d,r.y-l,r.x+r.width+l,r.y+r.height+l,g,i,j,k,e);else if(p.type===pd)a:if(b=r.copy().Kg(l,l),0===b.width)m=Jc(b.x,b.y,b.x,
b.y+b.height,g,i,j,k,e);else if(0===b.height)m=Jc(b.x,b.y,b.x+b.width,b.y,g,i,j,k,e);else{var a=b.width/2,y=b.height/2,d=b.x+a,b=b.y+y,c=9999;g!==j&&(c=(i-k)/(g-j));if(9999>Math.abs(c)){m=i-b-c*(g-d);if(0>a*a*c*c+y*y-m*m){e.x=NaN;e.y=NaN;m=q;break a}l=Math.sqrt(a*a*c*c+y*y-m*m);j=(-(a*a*c*m)+a*y*l)/(y*y+a*a*c*c)+d;a=(-(a*a*c*m)-a*y*l)/(y*y+a*a*c*c)+d;k=c*(j-d)+m+b;b=c*(a-d)+m+b;d=Math.abs((g-j)*(g-j))+Math.abs((i-k)*(i-k));i=Math.abs((g-a)*(g-a))+Math.abs((i-b)*(i-b));d<i?(e.x=j,e.y=k):(e.x=a,e.y=
b)}else{j=y*y;k=g-d;j-=j/(a*a)*k*k;if(0>j){e.x=NaN;e.y=NaN;m=q;break a}l=Math.sqrt(j);k=b+l;b-=l;d=Math.abs(k-i);i=Math.abs(b-i);d<i?(e.x=g,e.y=k):(e.x=g,e.y=b)}m=h}else if(p.type===ed){var C,E,I,D=new F;s=j-g;r=k-i;r=s*s+r*r;e.x=j;e.y=k;for(s=0;s<p.sb.count;s++){var M=p.sb.n[s],N=M.za;C=M.la;E=M.ma;for(var Z=C,wa=E,ka,ua,Da=0;Da<N.count;Da++){ka=N.n[Da];ua=ka.type;v=ka.C;I=ka.D;var Ha=q;switch(ua){case Gd:Z=v;wa=I;break;case rd:Ha=cl(C,E,v,I,g,i,j,k,D);break;case Hd:Ha=ka.Ub;ua=ka.zc;var bb=ka.gg,
qb=ka.hg,Ha=Gc(C,E,Ha,ua,bb,qb,v,I,g,i,j,k,0.5,D);break;case Jd:Ha=(C+2*ka.Ub)/3;ua=(E+2*ka.zc)/3;bb=(2*ka.Ub+v)/3;qb=(2*ka.Ub+v)/3;Ha=Gc(C,E,Ha,ua,bb,qb,v,I,g,i,j,k,0.5,D);break;case Kd:case Cd:I=ka.type===Kd?Ld(ka,M):Rd(ka,M,C,E);ua=I.length;for(s=0;s<ua;s++)y=I[s],0===s&&cl(C,E,y.x1,y.y1,g,i,j,k,D)&&(v=dl(g,i,D,r,e),v<r&&(r=v,m=h)),Gc(y.x1,y.y1,y.x2,y.y2,y.Cf,y.Df,y.Uc,y.Vc,g,i,j,k,0.5,D)&&(v=dl(g,i,D,r,e),v<r&&(r=v,m=h));v=y.Uc;I=y.Vc;break;default:w.m("Unknown Segment type: "+ka.type)}C=v;E=
I;Ha&&(v=dl(g,i,D,r,e),v<r&&(r=v,m=h));ka.yv&&(v=Z,I=wa,cl(C,E,v,I,g,i,j,k,D)&&(v=dl(g,i,D,r,e),v<r&&(r=v,m=h)))}}g=c-a;i=d-b;d=Math.sqrt(g*g+i*i);e.x-=g/d*l;e.y-=i/d*l}else w.m("Invalid Geometry type");if(!m)return q;d=kb(this.transform,e);e.x=d.x;e.y=d.y;return h};function dl(a,b,c,d,e){a=c.x-a;b=c.y-b;b=a*a+b*b;return b<d?(e.x=c.x,e.y=c.y,b):d}
function cl(a,b,c,d,e,g,i,j,k){var l=q,m=(e-i)*(b-d)-(g-j)*(a-c);if(0===m)return q;k.x=((e*j-g*i)*(a-c)-(e-i)*(a*d-b*c))/m;k.y=((e*j-g*i)*(b-d)-(g-j)*(a*d-b*c))/m;if((a>c?a-c:c-a)<(b>d?b-d:d-b)){if(e=b<d?b:d,a=b<d?d:b,(k.y>e||Sa(k.y,e))&&(k.y<a||Sa(k.y,a)))l=h}else if(e=a<c?a:c,a=a<c?c:a,(k.x>e||Sa(k.x,e))&&(k.x<a||Sa(k.x,a)))l=h;return l}
V.prototype.containedInRect=V.prototype.dv=function(a,b){if(b===f)return a.Nl(this.va);var c=this.Ga;c===n&&(Hh(this,Infinity,Infinity),c=this.Ga);var c=c.Eb,d=this.eb/2;return!a.ua(b.Ta(new F(c.x-d,c.y-d)))||!a.ua(b.Ta(new F(c.x-d,c.bottom+d)))||!a.ua(b.Ta(new F(c.right+d,c.bottom+d)))||!a.ua(b.Ta(new F(c.right+d,c.y-d)))?q:h};
V.prototype.intersectsRect=V.prototype.Le=function(a,b){function c(a,b){k.x=a*d.m11+b*d.m21+d.dx;k.y=a*d.m12+b*d.m22+d.dy}if(this.dv(a,b)||b===f&&(b=this.transform,a.Nl(this.va)))return h;var d=b.copy();d.gD();var e=a.left,g=a.right,i=a.top,j=a.bottom,k=new F;c(e,i);if(this.tj(k,h))return h;c(g,i);if(this.tj(k,h))return h;c(e,j);if(this.tj(k,h))return h;c(g,j);if(this.tj(k,h))return h;var l=new F,m=new F;d.set(b);d.iH(this.transform);d.gD();l.x=g;l.y=i;l.transform(d);k.x=e;k.y=i;k.transform(d);if(el(this,
k,l,m))return h;k.x=g;k.y=j;k.transform(d);if(el(this,k,l,m))return h;l.x=e;l.y=j;l.transform(d);if(el(this,k,l,m))return h;k.x=e;k.y=i;k.transform(d);return el(this,k,l,m)?h:q};function el(a,b,c,d){if(!a.RC(b,c,d))return q;var a=b.x,b=b.y,e=c.x,g=c.y,c=d.x,d=d.y;if(a===e){var i;b<g?(i=b,a=g):(i=g,a=b);return d>=i&&d<=a}a<e?(i=a,a=e):i=e;return c>=i&&c<=a}
V.prototype.IC=function(a,b){if(this.fill!==n&&this.tj(a,h))return h;var c=a.Rl(b),d=c;1.5<this.eb&&(c=this.eb/2+Math.sqrt(c),c*=c);var e=this.Ga;e===n&&(Hh(this,Infinity,Infinity),e=this.Ga);var g=e.Bb,i=e.Nb,j=e.Ac,k=e.Hc;if(e.type===hd){var e=$a(a.x,a.y,g,i,j,k),l=(g-j)*(a.x-j)+(i-k)*(a.y-k);if(e<=(0<=(j-g)*(a.x-g)+(k-i)*(a.y-i)&&0<=l?c:d))return h}else if(e.type===od){if($a(a.x,a.y,g,i,g,k)<=c||$a(a.x,a.y,g,i,j,i)<=c||$a(a.x,a.y,j,i,j,k)<=c||$a(a.x,a.y,g,k,j,k)<=c)return h}else if(e.type===pd){var e=
a.x-(g+j)/2,d=a.y-(i+k)/2,l=Math.abs(j-g)/2,m=Math.abs(k-i)/2;if(0===l||0===m)return e=$a(a.x,a.y,g,i,j,k),e<=c?h:q;g=new F(Infinity,Infinity);Kc(e,d,0,0,-l,-m,l,m,g);Kc(e,d,0,m,-l,-m,l,m,g);Kc(e,d,0,-m,-l,-m,l,m,g);Kc(e,d,0,l,-l,-m,l,m,g);Kc(e,d,0,-l,-l,-m,l,m,g);Kc(e,d,l/2,m/2,-l,-m,l,m,g);Kc(e,d,-l/2,m/2,-l,-m,l,m,g);Kc(e,d,l/2,-m/2,-l,-m,l,m,g);Kc(e,d,-l/2,-m/2,-l,-m,l,m,g);if((g.x-e)*(g.x-e)+(g.y-d)*(g.y-d)<c)return h}else if(e.type===ed){k=e.Eb;g=k.x;i=k.y;j=k.x+k.width;k=k.y+k.height;if(a.x>
j&&a.x<g&&a.y>k&&a.y<i&&$a(a.x,a.y,g,i,g,k)>c&&$a(a.x,a.y,g,i,j,i)>c&&$a(a.x,a.y,j,k,g,k)>c&&$a(a.x,a.y,j,k,j,i)>c)return q;c=Math.sqrt(c);if(this.fill===n?Vd(e,a.x,a.y,c):e.ua(a,c,h))return h}return q};w.g(V,"geometry",V.prototype.Tc);w.defineProperty(V,{Tc:"geometry"},function(){return this.bk?this.bk:this.Ga},function(a){var b=this.Ga;b!==a&&(a!==n?(u&&w.i(a,dd,V,"geometry"),this.bk=this.Ga=a.freeze()):this.bk=this.Ga=n,this.kh=h,this.R(),this.j("geometry",b,a))});w.g(V,"geometryString",V.prototype.NC);
w.defineProperty(V,{NC:"geometryString"},function(){return this.Tc.toString()},function(a){var b=zd(a),a=b.normalize();this.Tc=b;b=this.position;this.position=b.T()?new F(b.x-a.x,b.y-a.y):new F(-a.x,-a.y)});w.defineProperty(V,{hz:"isGeometryPositioned"},t("Gp"),function(a){u&&w.k(a,"boolean",V,"isGeometryPositioned");var b=this.Gp;b!==a&&(this.Gp=a,this.R(),this.j("isGeometryPositioned",b,a))});V.prototype.Wf=function(){this.kh?this.bk=n:this.Ga=n;this.R()};w.g(V,"fill",V.prototype.fill);
w.defineProperty(V,{fill:"fill"},t("Be"),function(a){var b=this.Be;if(b!==a&&(a===n||"string"===typeof a||a instanceof Be))a instanceof Be&&a.freeze(),this.Be=a,vj(this),this.j("fill",b,a)});w.g(V,"stroke",V.prototype.stroke);w.defineProperty(V,{stroke:"stroke"},t("kc"),function(a){var b=this.kc;if(b!==a&&(a===n||"string"===typeof a||a instanceof Be))a instanceof Be&&a.freeze(),this.kc=a,vj(this),this.j("stroke",b,a)});w.g(V,"strokeWidth",V.prototype.eb);
w.defineProperty(V,{eb:"strokeWidth"},t("oh"),function(a){var b=this.oh;b!==a&&(u&&w.o(a,V,"strokeWidth"),0<=a&&(this.oh=a,this.R(),this.j("strokeWidth",b,a)))});w.g(V,"strokeCap",V.prototype.vE);w.defineProperty(V,{vE:"strokeCap"},t("ln"),function(a){var b=this.ln;b!==a&&("string"===typeof a&&("butt"===a||"round"===a||"square"===a)?(this.ln=a,vj(this),this.j("strokeCap",b,a)):w.ra(a,'"butt", "round", or "square"',V,"strokeCap"))});w.g(V,"strokeJoin",V.prototype.WH);
w.defineProperty(V,{WH:"strokeJoin"},t("mn"),function(a){var b=this.mn;b!==a&&("string"===typeof a&&("miter"===a||"bevel"===a||"round"===a)?(this.mn=a,vj(this),this.j("strokeJoin",b,a)):w.ra(a,'"miter", "bevel", or "round"',V,"strokeJoin"))});w.g(V,"strokeMiterLimit",V.prototype.XH);w.defineProperty(V,{XH:"strokeMiterLimit"},t("nn"),function(a){var b=this.nn;b!==a&&(u&&w.o(a,V,"strokeMiterLimit"),0<a&&(this.nn=a,vj(this),this.j("strokeMiterLimit",b,a)))});w.g(V,"strokeDashArray",V.prototype.wE);
w.defineProperty(V,{wE:"strokeDashArray"},t("br"),function(a){var b=this.br;b!==a&&(this.br=a,vj(this),this.j("strokeDashArray",b,a))});w.g(V,"strokeDashOffset",V.prototype.VH);w.defineProperty(V,{VH:"strokeDashOffset"},t("of"),function(a){var b=this.of;b!==a&&(u&&w.o(a,V,"strokeDashOffset"),0<a&&(this.of=a,vj(this),this.j("strokeDashOffset",b,a)))});w.g(V,"figure",V.prototype.gb);
w.defineProperty(V,{gb:"figure"},t("pp"),function(a){var b=this.pp;if(b!==a){u&&w.k(a,"string",V,"figure");var c=bl[a];"function"===typeof c?c=a:(c=bl[a.toLowerCase()])||w.m("Unknown Shape.figure: "+a);b!==c&&(this.pp=c,this.kh=q,this.Wf(),this.j("figure",b,c))}});w.g(V,"toArrow",V.prototype.mm);
w.defineProperty(V,{mm:"toArrow"},t("pn"),function(a){var b=this.pn;a===h?a="Standard":a===q&&(a="None");if(b!==a){u&&w.k(a,"string",V,"toArrow");var c=al(a);c instanceof dd?c=a:(c=al(a.toLowerCase()))||w.m("Unknown Shape.toArrow: "+a);b!==c&&(this.pn=c,this.kh=q,this.Wf(),fl(this,c),this.j("toArrow",b,c))}});w.g(V,"fromArrow",V.prototype.tv);
w.defineProperty(V,{tv:"fromArrow"},t("Gm"),function(a){var b=this.Gm;a===h?a="Standard":a===q&&(a="None");if(b!==a){u&&w.k(a,"string",V,"fromArrow");var c=al(a);c instanceof dd?c=a:(c=al(a.toLowerCase()))||w.m("Unknown Shape.fromArrow: "+a);b!==c&&(this.Gm=c,this.kh=q,this.Wf(),fl(this,c),this.j("fromArrow",b,c))}});
function fl(a,b){var c=a.h;if(!(c!==n&&c.sa.tb)){a.vs=gl;c=Ub;switch(b){case "halfarrowtop":c=Rb;break;case "halftriangletop":c=Rb;break;case "openrighttriangletop":c=Rb;break;case "opentriangletop":c=Rb}"None"!==a.pn?(a.Dh=-1,a.oj=c):"None"!==a.Gm&&(a.Dh=0,a.oj=new H(1-c.x,c.y))}}w.defineProperty(V,{v:"spot1"},t("ki"),function(a){w.i(a,H,V,"spot1");var b=this.ki;b.I(a)||(this.ki=a=a.O(),this.R(),this.j("spot1",b,a))});
w.defineProperty(V,{w:"spot2"},t("li"),function(a){w.i(a,H,V,"spot2");var b=this.li;b.I(a)||(this.li=a=a.O(),this.R(),this.j("spot2",b,a))});w.defineProperty(V,{fc:"parameter1"},t("tq"),function(a){var b=this.tq;b!==a&&(this.tq=a,this.R(),this.j("parameter1",b,a))});w.defineProperty(V,{ps:"parameter2"},t("uq"),function(a){var b=this.uq;b!==a&&(this.uq=a,this.R(),this.j("parameter2",b,a))});
w.u(V,{Sa:"naturalBounds"},function(){if(this.Ga!==n)return this.Jc.Xa(this.Ga.Eb),this.Jc;var a=this.wa;return new G(0,0,a.width,a.height)});w.g(V,"isRectangular",V.prototype.QG);w.defineProperty(V,{QG:"isRectangular"},t("Mp"),function(a){var b=this.Mp;b!==a&&(u&&w.k(a,"boolean",V,"isRectangular"),this.Mp=a,this.R(),this.j("isRectangular",b,a))});w.g(V,"geometryStretch",V.prototype.uv);
w.defineProperty(V,{uv:"geometryStretch"},t("xp"),function(a){var b=this.xp;b!==a&&(w.jb(a,P,V,"geometryStretch"),this.xp=a,this.j("geometryStretch",b,a))});w.g(V,"interval",V.prototype.Ai);w.defineProperty(V,{Ai:"interval"},t("Dp"),function(a){var b=this.Dp;u&&w.o(a,V,"interval");a=Math.floor(a);b!==a&&0<=a&&(this.Dp=a,this.R(),this.j("interval",b,a))});
function na(){P.call(this);this.Gd="";this.kc="black";this.Vi="13px sans-serif";this.pf="start";this.Jp=h;this.Ft=q;this.Hl=hl;this.Pt=this.vl=0;this.ik=this.xx=this.yx=n;this.Wp={};this.np=q;this.Ae=this.nj=this.fr=n}w.P("TextBlock",na);w.Da(na,P);
na.prototype.xb=function(a){P.prototype.xb.call(this,a);a.Gd=this.Gd;a.kc=this.kc;a.Vi=this.Vi;a.pf=this.pf;a.Jp=this.Jp;a.Ft=this.Ft;a.Hl=this.Hl;a.vl=this.vl;a.Pt=this.Pt;a.yx=this.yx;a.xx=this.xx;a.ik=this.ik;a.Wp=this.Wp;a.np=this.np;a.fr=this.fr;a.nj=this.nj;a.Ae=this.Ae};na.prototype.toString=function(){return 22<this.Gd.length?'TextBlock("'+this.Gd.substring(0,20)+'"...)':'TextBlock("'+this.Gd+'")'};var il;na.None=il=w.s(na,"None",0);var jl;na.WrapFit=jl=w.s(na,"WrapFit",1);var hl;
na.WrapDesiredSize=hl=w.s(na,"WrapDesiredSize",2);na.prototype.R=function(){P.prototype.R.call(this);this.ik=this.xx=this.yx=n};w.g(na,"font",na.prototype.font);w.defineProperty(na,{font:"font"},t("Vi"),function(a){var b=this.Vi;b!==a&&(u&&w.k(a,"string",na,"font"),this.Vi=a,this.R(),this.j("font",b,a))});w.g(na,"text",na.prototype.text);w.defineProperty(na,{text:"text"},t("Gd"),function(a){var b=this.Gd,a=a!==n&&a!==f?a.toString():"";b!==a&&(this.Gd=a,this.R(),this.j("text",b,a))});
w.g(na,"textAlign",na.prototype.textAlign);w.defineProperty(na,{textAlign:"textAlign"},t("pf"),function(a){var b=this.pf;b!==a&&(u&&w.k(a,"string",na,"textAlign"),"start"===a||"end"===a||"left"===a||"right"===a||"center"===a?(this.pf=a,vj(this),this.j("textAlign",b,a)):w.ra(a,'"start", "end", "left", "right", or "center"',na,"textAlign"))});
w.u(na,{Sa:"naturalBounds"},function(){if(!this.Jc.T()){var a=kl(this,this.Gd,this.font,{},999999).width,b=ll(this,a,{}),c=this.wa;isNaN(c.width)||(a=c.width);isNaN(c.height)||(b=c.height);db(this.Jc,a,b)}return this.Jc});w.g(na,"isMultiline",na.prototype.Bv);w.defineProperty(na,{Bv:"isMultiline"},t("Jp"),function(a){var b=this.Jp;b!==a&&(u&&w.k(a,"boolean",na,"isMultiline"),this.Jp=a,this.R(),this.j("isMultiline",b,a))});w.g(na,"wrap",na.prototype.bA);
w.defineProperty(na,{bA:"wrap"},t("Hl"),function(a){var b=this.Hl;b!==a&&(u&&w.jb(a,na,na,"wrap"),this.Hl=a,this.R(),this.j("wrap",b,a))});w.g(na,"stroke",na.prototype.stroke);w.defineProperty(na,{stroke:"stroke"},t("kc"),function(a){var b=this.kc;if(b!==a&&(a===n||"string"===typeof a||a instanceof Be))a instanceof Be&&a.freeze(),this.kc=a,vj(this),this.j("stroke",b,a)});w.u(na,{jL:"lineCount"},t("vl"));w.g(na,"editable",na.prototype.jv);
w.defineProperty(na,{jv:"editable"},t("np"),function(a){var b=this.np;b!==a&&(u&&w.k(a,"boolean",na,"editable"),this.np=a,this.j("editable",b,a))});w.g(na,"textEditor",na.prototype.Vz);w.defineProperty(na,{Vz:"textEditor"},t("fr"),function(a){var b=this.fr;b!==a&&(a instanceof HTMLElement||w.m("textEditor must be an HTMLElement"),this.fr=a,this.j("textEditor",b,a))});w.g(na,"errorFunction",na.prototype.Kr);
w.defineProperty(na,{Kr:"errorFunction"},t("Ae"),function(a){var b=this.Ae;b!==a&&(a!==n&&w.k(a,"function",na,"errorFunction"),this.Ae=a,this.j("errorFunction",b,a))});
na.prototype.Pn=function(a,b){if(this.kc!==n&&0!==this.Gd.length){var c=this.Vi;if(c!==n){var d=this.Sa.width,e=Ih(this,c);a.Dw!==c&&(a.font=c,a.Dw=c);a.textAlign=this.pf;yj(this,a,this.kc,h);this.Ft&&(yj(this,a,this.kc,q),a.lineWidth=0.05*e);var c=this.Wp,g=0,i=q,j=this.ie.Ta(new F(0,0)),k=this.ie.Ta(new F(0,e)),j=j.Rl(k),k=b.scale;8>j*k*k&&(i=h);j=c.rj.length;for(k=0;k<j;k++){var l=c.rj[k],m=c.In[k];l>d&&(l=d);var p=a,r=g,s=e,v=i,y=0;"start"===this.pf||"left"===this.pf?y=0:"end"===this.pf||"right"===
this.pf?y=d:"center"===this.pf?y=d/2:w.m("textAlign must be start, end, left, right, or center");v?p.fillRect(0+y,r+0.25*s,l,1):(p.fillText(m,0+y,r+s-0.25*s),this.Ft&&("end"===this.pf||"right"===this.pf?y-=l:"center"===this.pf&&(y-=l/2),p.moveTo(0+y,r+s-0.2*s),p.lineTo(0+y+l,r+s-0.2*s),p.stroke()));g+=e}}}};
na.prototype.fs=function(a,b,c,d){var e={},g=0,i=0;if(isNaN(this.wa.width)){g=this.Gd;if(0===g.length)g=0;else if(this.Bv){for(var j=i=0,k=q,l={Jh:0};!k;){var m=ml(g,j,l);-1===m&&(m=g.length,k=h);j=nl(g.substr(j,m-j).replace(/^\s+|\s+$/g,""),this.Vi);j>i&&(i=j);j=l.Jh}g=i}else i=ml(g,0,{}),0<=i&&(g=g.substr(0,i)),g=j=nl(g,this.Vi);g=Math.min(g,a/this.scale);g=Math.max(8,g)}else g=this.wa.width;this.fa&&(g=Math.min(g,this.fa.Zd.width),g=Math.max(g,this.fa.ue.width));i=ll(this,g,e);i=isNaN(this.wa.height)?
Math.min(i,b/this.scale):this.wa.height;if(this.bA===jl||isNaN(this.wa.width))g=e.Gi,isNaN(this.wa.width)&&(g=Math.max(8,g));g=Math.max(c,g);i=Math.max(d,i);db(this.Jc,g,i);mj(this,0,0,g,i);this.Wp=e};na.prototype.sj=function(a,b,c,d){sj(this,a,b,c,d)};
function kl(a,b,c,d,e){b=b.replace(/^\s+|\s+$/g,"");d.Gi===f&&(d.Gi=0);d.rj===f&&(d.rj=[]);d.In===f&&(d.In=[]);var g=0,i;if(a.Hl===il)return d.Jh=1,d.Gi=nl(b,c),d.rj.push(d.Gi),d.In.push(b),new cb(d.Gi,Ih(a,c));a.ik===n&&(a.ik=Ih(a,c));var a=a.ik,j=b,k=0;0===j.length&&(k=1,d.rj.push(0),d.In.push(j));for(;0<j.length;){for(var l=ol(j),j=j.substr(l.length);nl(l,c)>e;){var m=1,b=nl(l.substr(0,m),c);for(i=0;b<=e;)m++,i=b,b=nl(l.substr(0,m),c);1===m?(d.rj[k]=b,g=Math.max(g,b)):(d.rj[k]=i,g=Math.max(g,i));
m--;1>m&&(m=1);d.In[k]=l.substr(0,m);k++;l=l.substr(m)}i=ol(j);for(b=nl(l+i,c);0<i.length&&b<=e;)l+=i,j=j.substr(i.length),i=ol(j),b=nl((l+i).replace(/^\s+|\s+$/g,""),c);l=l.replace(/^\s+|\s+$/g,"");""!==l&&(0===i.length?(d.rj.push(b),g=Math.max(g,b)):(i=nl(l,c),d.rj.push(i),g=Math.max(g,i)),d.In.push(l),k++)}d.Jh=k;d.Gi=Math.max(d.Gi,g);return new cb(d.Gi,a*d.Jh)}function ol(a){for(var b=a.length,c=0;c<b&&" "!==a.charAt(c);)c++;for(;c<b&&" "===a.charAt(c);)c++;return c>=b?a:a.substr(0,c)}
function nl(a,b){w.xu!==b&&(w.wu.font=b,w.xu=b);return w.wu.measureText(a).width}function Ih(a,b){if(a.ik!==n)return a.ik;w.xu!==b&&(w.wu.font=b,w.xu=b);var c=0;w.ex[b]!==f&&5E3>w.NA?c=w.ex[b]:(c=1.3*w.wu.measureText("M").width,w.ex[b]=c,w.NA++);return c}function ml(a,b,c){c.Jh===f&&(c.Jh=0);var d=a.indexOf("\r",b);-1===d&&(d=a.indexOf("\n",b));0<=d&&(c.Jh="\r"===a[d]&&d+1<a.length&&"\n"===a[d+1]?d+2:d+1);return d}
function ll(a,b,c){var d=a.Gd,e=a.Vi,g=Ih(a,e);if(0===d.length)return c.Gi=0,a.vl=1,g;if(!a.Bv){var i=ml(d,0,{});0<=i&&(d=d.substr(0,i))}for(var j=i=0,k=0,l=-1,m={Jh:0},p=q;!p;)l=ml(d,k,m),-1===l&&(l=d.length,p=h),k<=l&&(k=d.substr(k,l-k),a.Hl!==il?(c.Jh=0,k=kl(a,k,e,c,b),i+=k.height,j+=c.Jh):(kl(a,k,e,c,Infinity),i+=g,j++)),k=m.Jh;a.vl=j;return a.Pt=i}w.g(na,"textValidation",na.prototype.Cs);
w.defineProperty(na,{Cs:"textValidation"},t("nj"),function(a){var b=this.nj;b!==a&&(a!==n&&w.k(a,"function",na,"textValidation"),this.nj=a,this.j("textValidation",b,a))});function dk(){P.call(this);this.Rh=n;this.Zq="";this.mj=(new G(NaN,NaN,NaN,NaN)).freeze();this.Lm=gd;this.Du=this.Ae=n;this.Bt=this.wl=q}w.P("Picture",dk);w.Da(dk,P);dk.prototype.xb=function(a){P.prototype.xb.call(this,a);a.element=this.Rh;a.Zq=this.Zq;a.mj.Xa(this.mj);a.Lm=this.Lm;a.Ae=this.Ae};
dk.prototype.toString=function(){return"Picture("+this.source+")#"+w.ec(this)};w.g(dk,"element",dk.prototype.element);
w.defineProperty(dk,{element:"element"},t("Rh"),function(a){var b=this.Rh;if(b!==a){a instanceof HTMLImageElement||(a instanceof HTMLVideoElement||a instanceof HTMLCanvasElement)||w.m("Picture.element must be an instance of Image, Canvas, or Video.");var c=this;a instanceof HTMLCanvasElement?this.Bt=h:(this.Bt=q,a.onerror=function(a){c.Ae!==n&&c.Ae(c,a)});this.Rh=a;this.j("element",b,a);a.complete===h||a.complete===f?(this.wl=h,this.wa.T()||(this.ac=q,this.R())):(w.ny.push(this),w.nu===n&&(w.nu=setInterval(function(){for(var a=
[],b=w.ny,c=b.length,i=0;i<c;i++){var j=b[i];pl(j)||a.push(j)}0===a.length&&(clearInterval(w.nu),w.nu=n);w.ny=a},600)))}});function pl(a){var b=a.Rh;if(!b)return h;if(!b.complete)return q;if(a.wl===h)return h;a.wl=h;if(a.h)a.wa.T()||(a.ac=q,a.R(),a.h.Bi()),Mh(a.h);else{var a=w.EA,c=a.length;if(0===c)for(var c=document.getElementsByTagName("canvas"),d=c.length,b=0;b<d;b++){var e=c[b];e.parentElement&&e.parentElement.aa&&a.push(e.parentElement.aa)}c=a.length;for(b=0;b<c;b++)Mh(a[b])}return h}
w.g(dk,"source",dk.prototype.source);w.defineProperty(dk,{source:"source"},t("Zq"),function(a){var b=this.Zq;if(b!==a)if(w.k(a,"string",dk,"source"),this.Zq=a,this.j("source",b,a),b=w.$E,b[a]!==f)this.element=b[a];else{var c=document.createElement("img");c.src=a;b[a]=c;c instanceof HTMLImageElement&&(this.element=c)}});w.g(dk,"sourceRect",dk.prototype.Eh);
w.defineProperty(dk,{Eh:"sourceRect"},t("mj"),function(a){var b=this.mj;b.I(a)||(w.i(a,G,dk,"sourceRect"),this.mj=a=a.O(),this.j("sourceRect",b,a))});w.g(dk,"imageStretch",dk.prototype.GG);w.defineProperty(dk,{GG:"imageStretch"},t("Lm"),function(a){var b=this.Lm;b!==a&&(w.jb(a,P,dk,"imageStretch"),this.Lm=a,this.j("imageStretch",b,a))});w.g(dk,"errorFunction",dk.prototype.Kr);
w.defineProperty(dk,{Kr:"errorFunction"},t("Ae"),function(a){var b=this.Ae;if(b!==a){a!==n&&w.k(a,"function",dk,"errorFunction");this.Ae=a;if(this.Rh){var c=this;this.Rh.onerror=function(a){c.Ae!==n&&c.Ae(c,a)}}this.j("errorFunction",b,a)}});
dk.prototype.Pn=function(a,b){if(!b.mt){if(this.Du===n){var c=document.createElement("canvas").getContext("2d");c.drawImage(this.Rh,0,0);try{c.getImageData(0,0,1,1),this.Du=q}catch(d){this.Du=h}}if(this.Du)return}c=this.Rh;if(c!==n){var e=c.src;(e===n||""===e)&&w.m("Element has no source attribute: "+c);var e=this.Sa,g=0,i=0,j=this.Bt,k=j?+c.width:c.naturalWidth,j=j?+c.height:c.naturalHeight;if(!(0===k||0===j)){k===f&&c.videoWidth&&(k=c.videoWidth||e.width);j===f&&c.videoHeight&&(j=c.videoHeight||
e.height);this.Eh.T()&&(g=this.mj.x,i=this.mj.y,k=this.mj.width,j=this.mj.height);var l=k,m=j,p=this.Lm;switch(p){case jj:if(this.Eh.T())break;g+=Math.max((l-e.width)/2,0);i+=Math.max((m-e.height)/2,0);k=Math.min(e.width,l);j=Math.min(e.height,m);break;case gd:l=e.width;m=e.height;break;case dh:case eh:p===dh?(p=Math.min(e.height/m,e.width/l),l*=p,m*=p):p===eh&&(p=Math.max(e.height/m,e.width/l),l*=p,m*=p,g+=(l-e.width)/2,i+=(m-e.height)/2,k*=1/(l/e.width),j*=1/(m/e.height),l=e.width,m=e.height)}a.drawImage(c,
g,i,k,j,Math.max((e.width-l)/2,0),Math.max((e.height-m)/2,0),Math.min(e.width,l),Math.min(e.height,m))}}};w.u(dk,{Sa:"naturalBounds"},t("Jc"));
dk.prototype.fs=function(a,b,c,d){var e=this.wa,g=pj(this),i=this.Rh,j=this.Bt;if(j||!this.wl&&i&&i.complete)this.wl=h;i===n&&(b=a=0);g!==gd&&g!==lj?isFinite(e.width)?a=e.width:i!==n&&this.wl!==q&&(a=this.Eh.T()?this.Eh.width:j?+i.width:i.naturalWidth):(isFinite(a)||(a=this.Eh.T()?this.Eh.width:j?+i.width:i.naturalWidth),c=0);g!==gd&&g!==kj?isFinite(e.height)?b=e.height:i!==n&&this.wl!==q&&(b=this.Eh.T()?this.Eh.height:j?+i.height:i.naturalHeight):(isFinite(b)||(b=this.Eh.T()?this.Eh.height:j?+i.height:
i.naturalHeight),d=0);e=this.Zd;g=this.ue;c=Math.max(c/this.scale,g.width);d=Math.max(d/this.scale,g.height);a=Math.min(e.width,a);b=Math.min(e.height,b);a=Math.max(c,a);b=Math.max(d,b);i!==n&&!i.complete&&(isFinite(a)||(a=0),isFinite(b)||(b=0));db(this.Jc,a,b);mj(this,0,0,a,b)};dk.prototype.sj=function(a,b,c,d){sj(this,a,b,c,d)};function J(){this.q=new dd;this.Lb=n}
function K(a,b,c,d,e,g){a.q===n&&w.m("StreamGeometryContext has been closed");e!==f&&e===h?(a.Lb===n&&w.m("Need to call beginFigure first"),d=new Bd(Gd),d.C=b,d.D=c,a.Lb.za.add(d)):(a.Lb=new fd,a.Lb.la=b,a.Lb.ma=c,a.Lb.Yn=d,a.q.sb.add(a.Lb));g!==f&&(a.Lb.Hf=g)}function Dd(a){a.q===n&&w.m("StreamGeometryContext has been closed");a.Lb===n&&w.m("Need to call beginFigure first");var b=a.Lb.za.length;0<b&&a.Lb.za.n[b-1].close()}
function Ed(a){a.q===n&&w.m("StreamGeometryContext has been closed");a.Lb===n&&w.m("Need to call beginFigure first");a.Lb.$n=q}J.prototype.moveTo=function(a,b,c){this.q===n&&w.m("StreamGeometryContext has been closed");this.Lb===n&&w.m("Need to call beginFigure first");var d=new Bd(Gd);d.C=a;d.D=b;c&&d.close();this.Lb.za.add(d)};
J.prototype.lineTo=function(a,b,c){this.q===n&&w.m("StreamGeometryContext has been closed");this.Lb===n&&w.m("Need to call beginFigure first");var d=new Bd(rd);d.C=a;d.D=b;c&&d.close();this.Lb.za.add(d)};function L(a,b,c,d,e,g,i,j){a.q===n&&w.m("StreamGeometryContext has been closed");a.Lb===n&&w.m("Need to call beginFigure first");var k=new Bd(Hd);k.Ub=b;k.zc=c;k.gg=d;k.hg=e;k.C=g;k.D=i;j&&k.close();a.Lb.za.add(k)}
function Ad(a,b,c,d,e){a.q===n&&w.m("StreamGeometryContext has been closed");a.Lb===n&&w.m("Need to call beginFigure first");var g=new Bd(Jd);g.Ub=b;g.zc=c;g.C=d;g.D=e;a.Lb.za.add(g)}J.prototype.arcTo=function(a,b,c,d,e,g,i){this.q===n&&w.m("StreamGeometryContext has been closed");this.Lb===n&&w.m("Need to call beginFigure first");var j=new Bd(Kd);j.jg=a;j.Gh=b;j.pa=c;j.ta=d;j.radiusX=e;j.radiusY=g?g:e;i&&j.close();this.Lb.za.add(j)};
function ql(a,b,c,d,e,g,i,j,k,l,m,p,r,s){var v=1-k,a=a*v+c*k,b=b*v+d*k,c=c*v+e*k,d=d*v+g*k,e=e*v+i*k,g=g*v+j*k,j=a*v+c*k,i=b*v+d*k,c=c*v+e*k,d=d*v+g*k;l.x=a;l.y=b;m.x=j;m.y=i;p.x=j*v+c*k;p.y=i*v+d*k;r.x=c;r.y=d;s.x=e;s.y=g}function rl(a){var a=sl(a),b=[];b[0]=a[0];for(var c=1,d=1;c<a.length;c+=2,d+=3)b[d]=a[c],b[d+1]=a[c],b[d+2]=a[c+1];return b}
function sl(a){for(var b=tl(a),c=[],d=Math.floor(b.length/2),e=b.length-1,a=0===a%2?2:1,g=0;g<e;g++){var i=b[g],j=b[g+1],k=b[(d+g-1)%e],l=b[(d+g+a)%e];c[2*g]=i;c[2*g+1]=ul(i.x,i.y,k.x,k.y,j.x,j.y,l.x,l.y)}c[c.length]=c[0];return c}function ul(a,b,c,d,e,g,i,j){c=a-c;i=e-i;0===c||0===i?0===c?(i=(g-j)/i,j=a,e=i*j+(g-i*e)):(d=(b-d)/c,j=e,e=d*j+(b-d*a)):(d=(b-d)/c,i=(g-j)/i,a=b-d*a,j=(g-i*e-a)/(d-i),e=d*j+a);return new F(j,e)}
function tl(a){for(var b=[],c=1.5*Math.PI,d=0,e=0;e<a;e++)d=2*Math.PI/a*e+c,b[e]=new F(0.5+0.5*Math.cos(d),0.5+0.5*Math.sin(d));b.push(b[0]);return b}
var bl={None:"Rectangle",Rectangle:function(a,b,c){a=new dd;a.type=od;a.la=0;a.ma=0;a.C=b;a.D=c;return a},Square:function(a,b,c){a=new dd;a.$b=dh;a.type=od;a.la=0;a.ma=0;a.C=b;a.D=c;return a},Ellipse:function(a,b,c){a=new dd;a.type=pd;a.la=0;a.ma=0;a.C=b;a.D=c;a.v=new H(0.156,0.156);a.w=new H(0.844,0.844);return a},Circle:function(a,b,c){a=new dd;a.$b=dh;a.type=pd;a.la=0;a.ma=0;a.C=b;a.D=c;a.v=new H(0.156,0.156);a.w=new H(0.844,0.844);return a},Connector:"Ellipse",TriangleRight:function(a,b,c){var a=
new dd,d=new fd,e=new Bd;e.C=b;e.D=0.5*c;d.za.add(e);b=new Bd;b.C=0;b.D=c;d.za.add(b.close());a.sb.add(d);a.v=new H(0,0.25);a.w=new H(0.5,0.75);return a},TriangleDown:function(a,b,c){var a=new dd,d=new fd,e=new Bd;e.C=b;e.D=0;d.za.add(e);e=new Bd;e.C=0.5*b;e.D=c;d.za.add(e.close());a.sb.add(d);a.v=new H(0.25,0);a.w=new H(0.75,0.5);return a},TriangleLeft:function(a,b,c){var a=new dd,d=new fd;d.la=b;d.ma=c;var e=new Bd;e.C=0;e.D=0.5*c;d.za.add(e);c=new Bd;c.C=b;c.D=0;d.za.add(c.close());a.sb.add(d);
a.v=new H(0.5,0.25);a.w=new H(1,0.75);return a},TriangleUp:function(a,b,c){var a=new dd,d=new fd;d.la=b;d.ma=c;var e=new Bd;e.C=0;e.D=c;d.za.add(e);c=new Bd;c.C=0.5*b;c.D=0;d.za.add(c.close());a.sb.add(d);a.v=new H(0.25,0.5);a.w=new H(0.75,1);return a},Line1:function(a,b,c){a=new dd;a.type=hd;a.la=0;a.ma=0;a.C=b;a.D=c;return a},Line2:function(a,b,c){a=new dd;a.type=hd;a.la=b;a.ma=0;a.C=0;a.D=c;return a},MinusLine:"LineH",LineH:function(a,b,c){a=new dd;a.type=hd;a.la=0;a.ma=c/2;a.C=b;a.D=c/2;return a},
LineV:function(a,b,c){a=new dd;a.type=hd;a.la=b/2;a.ma=0;a.C=b/2;a.D=c;return a},Curve1:function(a,b,c){a=new J;K(a,0,0,q);L(a,hc*b,0,1*b,(1-hc)*c,b,c);return a.q},Curve2:function(a,b,c){a=new J;K(a,0,0,q);L(a,0,hc*c,(1-hc)*b,c,b,c);return a.q},Curve3:function(a,b,c){a=new J;K(a,1*b,0,q);L(a,1*b,hc*c,hc*b,1*c,0,1*c);return a.q},Curve4:function(a,b,c){a=new J;K(a,1*b,0,q);L(a,(1-hc)*b,0,0,(1-hc)*c,0,1*c);return a.q},Alternative:"Triangle",Merge:"Triangle",Triangle:function(a,b,c){a=new J;K(a,0.5*b,
0*c,h);a.lineTo(0*b,1*c);a.lineTo(1*b,1*c,h);b=a.q;b.v=new H(0.25,0.5);b.w=new H(0.75,1);return b},Decision:"Diamond",Diamond:function(a,b,c){a=new J;K(a,0.5*b,0,h);a.lineTo(0,0.5*c);a.lineTo(0.5*b,1*c);a.lineTo(1*b,0.5*c,h);b=a.q;b.v=new H(0.25,0.25);b.w=new H(0.75,0.75);return b},Pentagon:function(a,b,c){var a=tl(5),d=new J;K(d,a[0].x*b,a[0].y*c,h);for(var e=1;5>e;e++)d.lineTo(a[e].x*b,a[e].y*c);Dd(d);b=d.q;b.v=new H(0.2,0.22);b.w=new H(0.8,0.9);return b},DataTransmission:"Hexagon",Hexagon:function(a,
b,c){var a=tl(6),d=new J;K(d,a[0].x*b,a[0].y*c,h);for(var e=1;6>e;e++)d.lineTo(a[e].x*b,a[e].y*c);Dd(d);b=d.q;b.v=new H(0.07,0.25);b.w=new H(0.93,0.75);return b},Heptagon:function(a,b,c){var a=tl(7),d=new J;K(d,a[0].x*b,a[0].y*c,h);for(var e=1;7>e;e++)d.lineTo(a[e].x*b,a[e].y*c);Dd(d);b=d.q;b.v=new H(0.2,0.15);b.w=new H(0.8,0.85);return b},Octagon:function(a,b,c){var a=tl(8),d=new J;K(d,a[0].x*b,a[0].y*c,h);for(var e=1;8>e;e++)d.lineTo(a[e].x*b,a[e].y*c);Dd(d);b=d.q;b.v=new H(0.15,0.15);b.w=new H(0.85,
0.85);return b},Nonagon:function(a,b,c){var a=tl(9),d=new J;K(d,a[0].x*b,a[0].y*c,h);for(var e=1;9>e;e++)d.lineTo(a[e].x*b,a[e].y*c);Dd(d);b=d.q;b.v=new H(0.17,0.13);b.w=new H(0.82,0.82);return b},Decagon:function(a,b,c){var a=tl(10),d=new J;K(d,a[0].x*b,a[0].y*c,h);for(var e=1;10>e;e++)d.lineTo(a[e].x*b,a[e].y*c);Dd(d);b=d.q;b.v=new H(0.16,0.16);b.w=new H(0.84,0.84);return b},Dodecagon:function(a,b,c){var a=tl(12),d=new J;K(d,a[0].x*b,a[0].y*c,h);for(var e=1;12>e;e++)d.lineTo(a[e].x*b,a[e].y*c);
Dd(d);b=d.q;b.v=new H(0.16,0.16);b.w=new H(0.84,0.84);return b},FivePointedStar:function(a,b,c){var a=sl(5),d=new J;K(d,a[0].x*b,a[0].y*c,h);for(var e=1;10>e;e++)d.lineTo(a[e].x*b,a[e].y*c);Dd(d);b=d.q;b.v=new H(0.312,0.383);b.w=new H(0.693,0.765);return b},SixPointedStar:function(a,b,c){var a=sl(6),d=new J;K(d,a[0].x*b,a[0].y*c,h);for(var e=1;12>e;e++)d.lineTo(a[e].x*b,a[e].y*c);Dd(d);b=d.q;b.v=new H(0.17,0.251);b.w=new H(0.833,0.755);return b},SevenPointedStar:function(a,b,c){var a=sl(7),d=new J;
K(d,a[0].x*b,a[0].y*c,h);for(var e=1;14>e;e++)d.lineTo(a[e].x*b,a[e].y*c);Dd(d);b=d.q;b.v=new H(0.363,0.361);b.w=new H(0.641,0.709);return b},EightPointedStar:function(a,b,c){var a=sl(8),d=new J;K(d,a[0].x*b,a[0].y*c,h);for(var e=1;16>e;e++)d.lineTo(a[e].x*b,a[e].y*c);Dd(d);b=d.q;b.v=new H(0.252,0.255);b.w=new H(0.75,0.75);return b},NinePointedStar:function(a,b,c){var a=sl(9),d=new J;K(d,a[0].x*b,a[0].y*c,h);for(var e=1;18>e;e++)d.lineTo(a[e].x*b,a[e].y*c);Dd(d);b=d.q;b.v=new H(0.355,0.361);b.w=new H(0.645,
0.651);return b},TenPointedStar:function(a,b,c){var a=sl(10),d=new J;K(d,a[0].x*b,a[0].y*c,h);for(var e=1;20>e;e++)d.lineTo(a[e].x*b,a[e].y*c);Dd(d);b=d.q;b.v=new H(0.281,0.261);b.w=new H(0.723,0.748);return b},FivePointedBurst:function(a,b,c){var a=rl(5),d=new J;K(d,a[0].x*b,a[0].y*c,h);for(var e=1;e<a.length;e+=3)L(d,a[e].x*b,a[e].y*c,a[e+1].x*b,a[e+1].y*c,a[e+2].x*b,a[e+2].y*c);Dd(d);b=d.q;b.v=new H(0.312,0.383);b.w=new H(0.693,0.765);return b},SixPointedBurst:function(a,b,c){var a=rl(6),d=new J;
K(d,a[0].x*b,a[0].y*c,h);for(var e=1;e<a.length;e+=3)L(d,a[e].x*b,a[e].y*c,a[e+1].x*b,a[e+1].y*c,a[e+2].x*b,a[e+2].y*c);Dd(d);b=d.q;b.v=new H(0.17,0.251);b.w=new H(0.833,0.755);return b},SevenPointedBurst:function(a,b,c){var a=rl(7),d=new J;K(d,a[0].x*b,a[0].y*c,h);for(var e=1;e<a.length;e+=3)L(d,a[e].x*b,a[e].y*c,a[e+1].x*b,a[e+1].y*c,a[e+2].x*b,a[e+2].y*c);Dd(d);b=d.q;b.v=new H(0.363,0.361);b.w=new H(0.641,0.709);return b},EightPointedBurst:function(a,b,c){var a=rl(8),d=new J;K(d,a[0].x*b,a[0].y*
c,h);for(var e=1;e<a.length;e+=3)L(d,a[e].x*b,a[e].y*c,a[e+1].x*b,a[e+1].y*c,a[e+2].x*b,a[e+2].y*c);Dd(d);b=d.q;b.v=new H(0.252,0.255);b.w=new H(0.75,0.75);return b},NinePointedBurst:function(a,b,c){var a=rl(9),d=new J;K(d,a[0].x*b,a[0].y*c,h);for(var e=1;e<a.length;e+=3)L(d,a[e].x*b,a[e].y*c,a[e+1].x*b,a[e+1].y*c,a[e+2].x*b,a[e+2].y*c);Dd(d);b=d.q;b.v=new H(0.355,0.361);b.w=new H(0.645,0.651);return b},TenPointedBurst:function(a,b,c){var a=rl(10),d=new J;K(d,a[0].x*b,a[0].y*c,h);for(var e=1;e<a.length;e+=
3)L(d,a[e].x*b,a[e].y*c,a[e+1].x*b,a[e+1].y*c,a[e+2].x*b,a[e+2].y*c);Dd(d);b=d.q;b.v=new H(0.281,0.261);b.w=new H(0.723,0.748);return b},Cloud:function(a,b,c){a=new J;K(a,0.08034461*b,0.1944299*c,h);L(a,-0.09239631*b,0.07836421*c,0.1406031*b,-0.0542823*c,0.2008615*b,0.05349299*c);L(a,0.2450511*b,-0.00697547*c,0.3776197*b,-0.01112067*c,0.4338609*b,0.074219*c);L(a,0.4539471*b,0,0.6066018*b,-0.02526587*c,0.6558228*b,0.07004196*c);L(a,0.6914277*b,-0.01904177*c,0.8921095*b,-0.01220843*c,0.8921095*b,0.08370865*
c);L(a,1.036446*b,0.04105738*c,1.020377*b,0.3022052*c,0.9147671*b,0.3194596*c);L(a,1.04448*b,0.360238*c,0.992256*b,0.5219009*c,0.9082935*b,0.562044*c);L(a,1.032337*b,0.5771781*c,1.018411*b,0.8120651*c,0.9212406*b,0.8217117*c);L(a,1.028411*b,0.9571472*c,0.8556702*b,1.052487*c,0.7592566*b,0.9156953*c);L(a,0.7431877*b,1.009325*c,0.5624123*b,1.021761*c,0.5101666*b,0.9310455*c);L(a,0.4820677*b,1.031761*c,0.3030112*b,1.002796*c,0.2609328*b,0.9344623*c);L(a,0.2329994*b,1.01518*c,0.03213784*b,1.01518*c,0.08034461*
b,0.870098*c);L(a,-0.02812061*b,0.9032597*c,-0.01205169*b,0.6835638*c,0.06829292*b,0.6545475*c);L(a,-0.01812061*b,0.6089503*c,-0.00606892*b,0.4555777*c,0.06427569*b,0.4265613*c);L(a,-0.01606892*b,0.3892545*c,-0.01205169*b,0.1944299*c,0.08034461*b,0.1944299*c);Dd(a);b=a.q;b.v=new H(0.1,0.1);b.w=new H(0.9,0.9);return b},Gate:"Crescent",Crescent:function(a,b,c){a=new J;K(a,0,0,h);L(a,1*b,0,1*b,1*c,0,1*c);L(a,0.5*b,0.75*c,0.5*b,0.25*c,0,0);Dd(a);b=a.q;b.v=new H(0.511,0.19);b.w=new H(0.776,0.76);return b},
FramedRectangle:function(a,b,c){var d=new J,e=a?a.fc:0,a=a?a.ps:0;0===e&&(e=0.1);0===a&&(a=0.1);K(d,0,0,h);d.lineTo(1*b,0);d.lineTo(1*b,1*c);d.lineTo(0,1*c,h);K(d,e*b,a*c,q,h);d.lineTo(e*b,(1-a)*c);d.lineTo((1-e)*b,(1-a)*c);d.lineTo((1-e)*b,a*c,h);b=d.q;b.v=new H(e,a);b.w=new H(1-e,1-a);return b},Delay:"HalfEllipse",HalfEllipse:function(a,b,c){a=new J;K(a,0,0,h);L(a,hc*b,0,1*b,(0.5-hc/2)*c,1*b,0.5*c);L(a,1*b,(0.5+hc/2)*c,hc*b,1*c,0,1*c);Dd(a);b=a.q;b.v=new H(0,0.2);b.w=new H(0.75,0.8);return b},Heart:function(a,
b,c){a=new J;K(a,0.5*b,1*c,h);L(a,0.1*b,0.8*c,0,0.5*c,0*b,0.3*c);L(a,0*b,0,0.45*b,0,0.5*b,0.3*c);L(a,0.55*b,0,1*b,0,1*b,0.3*c);L(a,b,0.5*c,0.9*b,0.8*c,0.5*b,1*c);Dd(a);b=a.q;b.v=new H(0.15,0.29);b.w=new H(0.86,0.68);return b},Spade:function(a,b,c){a=new J;K(a,0.5*b,0,h);a.lineTo(0.51*b,0.01*c);L(a,0.6*b,0.2*c,b,0.25*c,b,0.5*c);L(a,b,0.8*c,0.6*b,0.8*c,0.55*b,0.7*c);L(a,0.5*b,0.75*c,0.55*b,0.95*c,0.75*b,c);a.lineTo(0.25*b,c);L(a,0.45*b,0.95*c,0.5*b,0.75*c,0.45*b,0.7*c);L(a,0.4*b,0.8*c,0,0.8*c,0,0.5*
c);L(a,0,0.25*c,0.4*b,0.2*c,0.49*b,0.01*c);Dd(a);b=a.q;b.v=new H(0.19,0.26);b.w=new H(0.8,0.68);return b},Club:function(a,b,c){a=new J;K(a,0.4*b,0.6*c,h);L(a,0.5*b,0.75*c,0.45*b,0.95*c,0.15*b,1*c);a.lineTo(0.85*b,c);L(a,0.55*b,0.95*c,0.5*b,0.75*c,0.6*b,0.6*c);var d=0.2,e=0.3,g=0,i=d*(4*(Math.SQRT2-1)/3);L(a,(0.5-d+e)*b,(0.5+i+g)*c,(0.5-i+e)*b,(0.5+d+g)*c,(0.5+e)*b,(0.5+d+g)*c);L(a,(0.5+i+e)*b,(0.5+d+g)*c,(0.5+d+e)*b,(0.5+i+g)*c,(0.5+d+e)*b,(0.5+g)*c);L(a,(0.5+d+e)*b,(0.5-i+g)*c,(0.5+i+e)*b,(0.5-d+
g)*c,(0.5+e)*b,(0.5-d+g)*c);L(a,(0.5-i+e)*b,(0.5-d+g)*c,(0.5-d+e+0.05)*b,(0.5-i+g-0.02)*c,0.65*b,0.36771243*c);d=0.2;e=0;g=-0.3;i=d*(4*(Math.SQRT2-1)/3);L(a,(0.5+i+e)*b,(0.5+d+g)*c,(0.5+d+e)*b,(0.5+i+g)*c,(0.5+d+e)*b,(0.5+g)*c);L(a,(0.5+d+e)*b,(0.5-i+g)*c,(0.5+i+e)*b,(0.5-d+g)*c,(0.5+e)*b,(0.5-d+g)*c);L(a,(0.5-i+e)*b,(0.5-d+g)*c,(0.5-d+e)*b,(0.5-i+g)*c,(0.5-d+e)*b,(0.5+g)*c);L(a,(0.5-d+e)*b,(0.5+i+g)*c,(0.5-i+e)*b,(0.5+d+g)*c,0.35*b,0.36771243*c);d=0.2;e=-0.3;g=0;i=d*(4*(Math.SQRT2-1)/3);L(a,(0.5+
d+e-0.05)*b,(0.5-i+g-0.02)*c,(0.5+i+e)*b,(0.5-d+g)*c,(0.5+e)*b,(0.5-d+g)*c);L(a,(0.5-i+e)*b,(0.5-d+g)*c,(0.5-d+e)*b,(0.5-i+g)*c,(0.5-d+e)*b,(0.5+g)*c);L(a,(0.5-d+e)*b,(0.5+i+g)*c,(0.5-i+e)*b,(0.5+d+g)*c,(0.5+e)*b,(0.5+d+g)*c);L(a,(0.5+i+e)*b,(0.5+d+g)*c,(0.5+d+e)*b,(0.5+i+g)*c,0.4*b,0.6*c);Dd(a);b=a.q;b.v=new H(0.06,0.39);b.w=new H(0.93,0.58);return b},YinYang:function(a,b,c){var a=0.5,d=new J,a=0.5;K(d,0.5*b,0,h);d.arcTo(270,180,0.5*b,0.5*b,0.5*b);L(d,1*b,a*c,0,a*c,a*b,0,h);var a=0.1,e=0.25;K(d,
(0.5+a)*b,e*c,h,h);d.arcTo(0,-360,0.5*b,c*e,a*b);Dd(d);K(d,0.5*b,0,q);d.arcTo(270,-180,0.5*b,0.5*b,0.5*b);Ed(d);e=0.75;K(d,(0.5+a)*b,e*c,h);d.arcTo(0,360,0.5*b,c*e,a*b);Dd(d);b=d.q;b.$b=dh;return b},Peace:function(a,b,c){var a=new J,d=0.5*(4*(Math.SQRT2-1)/3);K(a,b,0.5*c,h);L(a,b,(0.5-d)*c,(0.5+d)*b,0,0.5*b,0);L(a,(0.5-d)*b,0,0,(0.5-d)*c,0,0.5*c);L(a,0,(0.5+d)*c,(0.5-d)*b,c,0.5*b,c);L(a,(0.5+d)*b,c,b,(0.5+d)*c,b,0.5*c);d=0.4*(4*(Math.SQRT2-1)/3);K(a,0.5*b,0.1*c,h,h);L(a,(0.5+d)*b,0.1*c,0.9*b,(0.5-
d)*c,0.9*b,0.5*c);L(a,0.9*b,(0.5+d)*c,(0.5+d)*b,0.9*c,0.5*b,0.9*c);L(a,(0.5-d)*b,0.9*c,0.1*b,(0.5+d)*c,0.1*b,0.5*c);L(a,0.1*b,(0.5-d)*c,(0.5-d)*b,0.1*c,0.5*b,0.1*c);var d=0.07,e=0,g=-0.707*0.11,i=d*(4*(Math.SQRT2-1)/3);K(a,(0.5+d+e)*b,(0.5+g)*c,h);L(a,(0.5+d+e)*b,(0.5-i+g)*c,(0.5+i+e)*b,(0.5-d+g)*c,(0.5+e)*b,(0.5-d+g)*c);L(a,(0.5-i+e)*b,(0.5-d+g)*c,(0.5-d+e)*b,(0.5-i+g)*c,(0.5-d+e)*b,(0.5+g)*c);L(a,(0.5-d+e)*b,(0.5+i+g)*c,(0.5-i+e)*b,(0.5+d+g)*c,(0.5+e)*b,(0.5+d+g)*c);L(a,(0.5+i+e)*b,(0.5+d+g)*c,
(0.5+d+e)*b,(0.5+i+g)*c,(0.5+d+e)*b,(0.5+g)*c);d=0.07;e=-0.707*0.11;g=0.707*0.11;i=d*(4*(Math.SQRT2-1)/3);K(a,(0.5+d+e)*b,(0.5+g)*c,h);L(a,(0.5+d+e)*b,(0.5-i+g)*c,(0.5+i+e)*b,(0.5-d+g)*c,(0.5+e)*b,(0.5-d+g)*c);L(a,(0.5-i+e)*b,(0.5-d+g)*c,(0.5-d+e)*b,(0.5-i+g)*c,(0.5-d+e)*b,(0.5+g)*c);L(a,(0.5-d+e)*b,(0.5+i+g)*c,(0.5-i+e)*b,(0.5+d+g)*c,(0.5+e)*b,(0.5+d+g)*c);L(a,(0.5+i+e)*b,(0.5+d+g)*c,(0.5+d+e)*b,(0.5+i+g)*c,(0.5+d+e)*b,(0.5+g)*c);d=0.07;e=0.707*0.11;g=0.707*0.11;i=d*(4*(Math.SQRT2-1)/3);K(a,(0.5+
d+e)*b,(0.5+g)*c,h);L(a,(0.5+d+e)*b,(0.5-i+g)*c,(0.5+i+e)*b,(0.5-d+g)*c,(0.5+e)*b,(0.5-d+g)*c);L(a,(0.5-i+e)*b,(0.5-d+g)*c,(0.5-d+e)*b,(0.5-i+g)*c,(0.5-d+e)*b,(0.5+g)*c);L(a,(0.5-d+e)*b,(0.5+i+g)*c,(0.5-i+e)*b,(0.5+d+g)*c,(0.5+e)*b,(0.5+d+g)*c);L(a,(0.5+i+e)*b,(0.5+d+g)*c,(0.5+d+e)*b,(0.5+i+g)*c,(0.5+d+e)*b,(0.5+g)*c);b=a.q;b.v=new H(0.146,0.146);b.w=new H(0.853,0.853);b.$b=dh;return b},NotAllowed:function(a,b,c){var a=0.5*hc,d=0.5,e=new J;K(e,0.5*b,(0.5-d)*c,h);L(e,(0.5-a)*b,(0.5-d)*c,(0.5-d)*b,
(0.5-a)*c,(0.5-d)*b,0.5*c);L(e,(0.5-d)*b,(0.5+a)*c,(0.5-a)*b,(0.5+d)*c,0.5*b,(0.5+d)*c);L(e,(0.5+a)*b,(0.5+d)*c,(0.5+d)*b,(0.5+a)*c,(0.5+d)*b,0.5*c);L(e,(0.5+d)*b,(0.5-a)*c,(0.5+a)*b,(0.5-d)*c,0.5*b,(0.5-d)*c);var d=0.4,a=0.4*hc,g=new F(0,0),i=new F(0,0),j=new F(0,0),k=new F(0,0);ql(0.5,0.5-d,0.5+a,0.5-d,0.5+d,0.5-a,0.5+d,0.5,0.42,g,i,j,k,k);var l=new F(0,0),m=new F(0,0),p=new F(0,0);ql(0.5,0.5-d,0.5+a,0.5-d,0.5+d,0.5-a,0.5+d,0.5,0.58,k,k,p,l,m);var r=new F(0,0),s=new F(0,0),v=new F(0,0);ql(0.5,0.5+
d,0.5-a,0.5+d,0.5-d,0.5+a,0.5-d,0.5,0.42,r,s,v,k,k);var y=new F(0,0),C=new F(0,0),E=new F(0,0);ql(0.5,0.5+d,0.5-a,0.5+d,0.5-d,0.5+a,0.5-d,0.5,0.58,k,k,E,y,C);K(e,E.x*b,E.y*c,h,h);L(e,y.x*b,y.y*c,C.x*b,C.y*c,(0.5-d)*b,0.5*c);L(e,(0.5-d)*b,(0.5-a)*c,(0.5-a)*b,(0.5-d)*c,0.5*b,(0.5-d)*c);L(e,g.x*b,g.y*c,i.x*b,i.y*c,j.x*b,j.y*c);e.lineTo(E.x*b,E.y*c);Dd(e);K(e,v.x*b,v.y*c,h,h);e.lineTo(p.x*b,p.y*c);L(e,l.x*b,l.y*c,m.x*b,m.y*c,(0.5+d)*b,0.5*c);L(e,(0.5+d)*b,(0.5+a)*c,(0.5+a)*b,(0.5+d)*c,0.5*b,(0.5+d)*c);
L(e,r.x*b,r.y*c,s.x*b,s.y*c,v.x*b,v.y*c);Dd(e);e.q.$b=dh;return e.q},Fragile:function(a,b,c){a=new J;K(a,0,0,h);a.lineTo(0.25*b,0);a.lineTo(0.2*b,0.15*c);a.lineTo(0.3*b,0.25*c);a.lineTo(0.29*b,0.33*c);a.lineTo(0.35*b,0.25*c);a.lineTo(0.3*b,0.15*c);a.lineTo(0.4*b,0);a.lineTo(1*b,0);L(a,1*b,0.25*c,0.75*b,0.5*c,0.55*b,0.5*c);a.lineTo(0.55*b,0.9*c);a.lineTo(0.7*b,0.9*c);a.lineTo(0.7*b,1*c);a.lineTo(0.3*b,1*c);a.lineTo(0.3*b,0.9*c);a.lineTo(0.45*b,0.9*c);a.lineTo(0.45*b,0.5*c);L(a,0.25*b,0.5*c,0,0.25*
c,0,0);Dd(a);b=a.q;b.v=new H(0.25,0);b.w=new H(0.75,0.4);return b},HourGlass:function(a,b,c){a=new J;K(a,0.65*b,0.5*c,h);a.lineTo(1*b,1*c);a.lineTo(0,1*c);a.lineTo(0.35*b,0.5*c);a.lineTo(0,0);a.lineTo(1*b,0);Dd(a);return a.q},Lightning:function(a,b,c){a=new J;K(a,0*b,0.55*c,h);a.lineTo(0.75*b,0);a.lineTo(0.25*b,0.45*c);a.lineTo(0.9*b,0.48*c);a.lineTo(0.4*b,1*c);a.lineTo(0.65*b,0.55*c);Dd(a);return a.q},Parallelogram1:function(a,b,c){a=a?a.fc:0;0===a&&(a=0.1);var d=new J;K(d,a*b,0,h);d.lineTo(1*b,
0);d.lineTo((1-a)*b,1*c);d.lineTo(0,1*c);Dd(d);b=d.q;b.v=new H(a,0);b.w=new H(1-a,1);return b},Input:"Output",Output:function(a,b,c){a=new J;K(a,0,1*c,h);a.lineTo(0.1*b,0);a.lineTo(1*b,0);a.lineTo(0.9*b,1*c);Dd(a);b=a.q;b.v=new H(0.1,0);b.w=new H(0.9,1);return b},Parallelogram2:function(a,b,c){a=a?a.fc:0;0===a&&(a=0.25);var d=new J;K(d,a*b,0,h);d.lineTo(1*b,0);d.lineTo((1-a)*b,1*c);d.lineTo(0,1*c);Dd(d);b=d.q;b.v=new H(a,0);b.w=new H(1-a,1);return b},ThickCross:function(a,b,c){a=a?a.fc:0;0===a&&(a=
0.25);var d=new J;K(d,(0.5-a/2)*b,0,h);d.lineTo((0.5+a/2)*b,0);d.lineTo((0.5+a/2)*b,(0.5-a/2)*c);d.lineTo(1*b,(0.5-a/2)*c);d.lineTo(1*b,(0.5+a/2)*c);d.lineTo((0.5+a/2)*b,(0.5+a/2)*c);d.lineTo((0.5+a/2)*b,1*c);d.lineTo((0.5-a/2)*b,1*c);d.lineTo((0.5-a/2)*b,(0.5+a/2)*c);d.lineTo(0,(0.5+a/2)*c);d.lineTo(0,(0.5-a/2)*c);d.lineTo((0.5-a/2)*b,(0.5-a/2)*c);Dd(d);b=d.q;b.v=new H(0.5-a/2,0.5-a/2);b.w=new H(0.5+a/2,0.5+a/2);return b},ThickX:function(a,b,c){var a=0.25/Math.SQRT2,d=new J;K(d,0.3*b,0,h);d.lineTo(0.5*
b,0.2*c);d.lineTo(0.7*b,0);d.lineTo(1*b,0.3*c);d.lineTo(0.8*b,0.5*c);d.lineTo(1*b,0.7*c);d.lineTo(0.7*b,1*c);d.lineTo(0.5*b,0.8*c);d.lineTo(0.3*b,1*c);d.lineTo(0,0.7*c);d.lineTo(0.2*b,0.5*c);d.lineTo(0,0.3*c);Dd(d);b=d.q;b.v=new H(0.5-a,0.5-a);b.w=new H(0.5+a,0.5+a);return b},ThinCross:function(a,b,c){a=a?a.fc:0;0===a&&(a=0.1);var d=new J;K(d,(0.5-a/2)*b,0,h);d.lineTo((0.5+a/2)*b,0);d.lineTo((0.5+a/2)*b,(0.5-a/2)*c);d.lineTo(1*b,(0.5-a/2)*c);d.lineTo(1*b,(0.5+a/2)*c);d.lineTo((0.5+a/2)*b,(0.5+a/2)*
c);d.lineTo((0.5+a/2)*b,1*c);d.lineTo((0.5-a/2)*b,1*c);d.lineTo((0.5-a/2)*b,(0.5+a/2)*c);d.lineTo(0,(0.5+a/2)*c);d.lineTo(0,(0.5-a/2)*c);d.lineTo((0.5-a/2)*b,(0.5-a/2)*c);Dd(d);return d.q},ThinX:function(a,b,c){a=new J;K(a,0.1*b,0,h);a.lineTo(0.5*b,0.4*c);a.lineTo(0.9*b,0);a.lineTo(1*b,0.1*c);a.lineTo(0.6*b,0.5*c);a.lineTo(1*b,0.9*c);a.lineTo(0.9*b,1*c);a.lineTo(0.5*b,0.6*c);a.lineTo(0.1*b,1*c);a.lineTo(0,0.9*c);a.lineTo(0.4*b,0.5*c);a.lineTo(0,0.1*c);Dd(a);return a.q},RightTriangle:function(a,b,
c){a=new J;K(a,0,0,h);a.lineTo(1*b,1*c);a.lineTo(0,1*c);Dd(a);b=a.q;b.v=new H(0,0.5);b.w=new H(0.5,1);return b},RoundedIBeam:function(a,b,c){a=new J;K(a,0,0,h);a.lineTo(1*b,0);L(a,0.5*b,0.25*c,0.5*b,0.75*c,1*b,1*c);a.lineTo(0,1*c);L(a,0.5*b,0.75*c,0.5*b,0.25*c,0,0);Dd(a);return a.q},RoundedRectangle:function(a,b,c){var d=a?a.fc:0;0>=d&&(d=5);var d=Math.min(d,b/3),d=Math.min(d,c/3),a=d*hc,e=new J;K(e,d,0,h);e.lineTo(b-d,0);L(e,b-a,0,b,a,b,d);e.lineTo(b,c-d);L(e,b,c-a,b-a,c,b-d,c);e.lineTo(d,c);L(e,
a,c,0,c-a,0,c-d);e.lineTo(0,d);L(e,0,a,a,0,d,0);Dd(e);b=e.q;1<a?(b.v=new H(0,0,a,a),b.w=new H(1,1,-a,-a)):(b.v=Jb,b.w=Rb);return b},Border:function(a,b,c){a=a?a.fc:0;0>=a&&(a=5);var a=Math.min(a,b/3),a=Math.min(a,c/3),d=new J;K(d,a,0,h);d.lineTo(b-a,0);L(d,b-0,0,b,0,b,a);d.lineTo(b,c-a);L(d,b,c-0,b-0,c,b-a,c);d.lineTo(a,c);L(d,0,c,0,c-0,0,c-a);d.lineTo(0,a);L(d,0,0,0,0,a,0);Dd(d);b=d.q;b.v=Jb;b.w=Rb;return b},SquareIBeam:function(a,b,c){a=a?a.fc:0;0===a&&(a=0.2);var d=new J;K(d,0,0,h);d.lineTo(1*
b,0);d.lineTo(1*b,a*c);d.lineTo((0.5+a/2)*b,a*c);d.lineTo((0.5+a/2)*b,(1-a)*c);d.lineTo(1*b,(1-a)*c);d.lineTo(1*b,1*c);d.lineTo(0,1*c);d.lineTo(0,(1-a)*c);d.lineTo((0.5-a/2)*b,(1-a)*c);d.lineTo((0.5-a/2)*b,a*c);d.lineTo(0,a*c);Dd(d);return d.q},Trapezoid:function(a,b,c){a=a?a.fc:0;0===a&&(a=0.2);var d=new J;K(d,a*b,0,h);d.lineTo((1-a)*b,0);d.lineTo(1*b,1*c);d.lineTo(0,1*c);Dd(d);b=d.q;b.v=new H(a,0);b.w=new H(1-a,1);return b},ManualLoop:"ManualOperation",ManualOperation:function(a,b,c){var a=a?a.fc:
0,d=new J;K(d,a,0,h);d.lineTo(0,0);d.lineTo(1*b,0);d.lineTo(0.9*b,1*c);d.lineTo(0.1*b,1*c);Dd(d);b=d.q;b.v=new H(0.1,0);b.w=new H(0.9,1);return b},GenderMale:function(a,b,c){var a=new J,d=0.4*hc,e=0.4,g=new F(0,0),i=new F(0,0),j=new F(0,0),k=new F(0,0);K(a,(0.5-e)*b,0.5*c,h);L(a,(0.5-e)*b,(0.5-d)*c,(0.5-d)*b,(0.5-e)*c,0.5*b,(0.5-e)*c);ql(0.5,0.5-e,0.5+d,0.5-e,0.5+e,0.5-d,0.5+e,0.5,0.44,j,k,i,g,g);L(a,j.x*b,j.y*c,k.x*b,k.y*c,i.x*b,i.y*c);var l=new F(i.x,i.y);ql(0.5,0.5-e,0.5+d,0.5-e,0.5+e,0.5-d,0.5+
e,0.5,0.56,g,g,i,j,k);g=new F(i.x,i.y);a.lineTo((0.1*l.x+0.855)*b,0.1*l.y*c);a.lineTo(0.85*b,0.1*l.y*c);a.lineTo(0.85*b,0);a.lineTo(1*b,0);a.lineTo(1*b,0.15*c);a.lineTo((0.1*g.x+0.9)*b,0.15*c);a.lineTo((0.1*g.x+0.9)*b,(0.1*g.y+0.05*0.9)*c);a.lineTo(g.x*b,g.y*c);L(a,j.x*b,j.y*c,k.x*b,k.y*c,(0.5+e)*b,0.5*c);L(a,(0.5+e)*b,(0.5+d)*c,(0.5+d)*b,(0.5+e)*c,0.5*b,(0.5+e)*c);L(a,(0.5-d)*b,(0.5+e)*c,(0.5-e)*b,(0.5+d)*c,(0.5-e)*b,0.5*c);e=0.35;d=0.35*hc;K(a,0.5*b,(0.5-e)*c,h,h);L(a,(0.5-d)*b,(0.5-e)*c,(0.5-e)*
b,(0.5-d)*c,(0.5-e)*b,0.5*c);L(a,(0.5-e)*b,(0.5+d)*c,(0.5-d)*b,(0.5+e)*c,0.5*b,(0.5+e)*c);L(a,(0.5+d)*b,(0.5+e)*c,(0.5+e)*b,(0.5+d)*c,(0.5+e)*b,0.5*c);L(a,(0.5+e)*b,(0.5-d)*c,(0.5+d)*b,(0.5-e)*c,0.5*b,(0.5-e)*c);K(a,(0.5-e)*b,0.5*c,h);b=a.q;b.v=new H(0.202,0.257);b.w=new H(0.692,0.839);b.$b=dh;return b},GenderFemale:function(a,b,c){var a=new J,d=0.375,e=0,g=-0.125,i=d*(4*(Math.SQRT2-1)/3);K(a,(0.525+e)*b,(0.5+d+g)*c,h);L(a,(0.5+i+e)*b,(0.5+d+g)*c,(0.5+d+e)*b,(0.5+i+g)*c,(0.5+d+e)*b,(0.5+g)*c);L(a,
(0.5+d+e)*b,(0.5-i+g)*c,(0.5+i+e)*b,(0.5-d+g)*c,(0.5+e)*b,(0.5-d+g)*c);L(a,(0.5-i+e)*b,(0.5-d+g)*c,(0.5-d+e)*b,(0.5-i+g)*c,(0.5-d+e)*b,(0.5+g)*c);L(a,(0.5-d+e)*b,(0.5+i+g)*c,(0.5-i+e)*b,(0.5+d+g)*c,(0.475+e)*b,(0.5+d+g)*c);a.lineTo(0.475*b,0.85*c);a.lineTo(0.425*b,0.85*c);a.lineTo(0.425*b,0.9*c);a.lineTo(0.475*b,0.9*c);a.lineTo(0.475*b,1*c);a.lineTo(0.525*b,1*c);a.lineTo(0.525*b,0.9*c);a.lineTo(0.575*b,0.9*c);a.lineTo(0.575*b,0.85*c);a.lineTo(0.525*b,0.85*c);Dd(a);d=0.325;e=0;g=-0.125;i=d*(4*(Math.SQRT2-
1)/3);K(a,(0.5+d+e)*b,(0.5+g)*c,h,h);L(a,(0.5+d+e)*b,(0.5+i+g)*c,(0.5+i+e)*b,(0.5+d+g)*c,(0.5+e)*b,(0.5+d+g)*c);L(a,(0.5-i+e)*b,(0.5+d+g)*c,(0.5-d+e)*b,(0.5+i+g)*c,(0.5-d+e)*b,(0.5+g)*c);L(a,(0.5-d+e)*b,(0.5-i+g)*c,(0.5-i+e)*b,(0.5-d+g)*c,(0.5+e)*b,(0.5-d+g)*c);L(a,(0.5+i+e)*b,(0.5-d+g)*c,(0.5+d+e)*b,(0.5-i+g)*c,(0.5+d+e)*b,(0.5+g)*c);K(a,(0.525+e)*b,(0.5+d+g)*c,h);b=a.q;b.v=new H(0.232,0.136);b.w=new H(0.782,0.611);b.$b=dh;return b},PlusLine:function(a,b,c){a=new J;K(a,0,0.5*c,q);a.lineTo(1*b,0.5*
c);a.moveTo(0.5*b,0);a.lineTo(0.5*b,1*c);return a.q},XLine:function(a,b,c){a=new J;K(a,0,1*c,q);a.lineTo(1*b,0);a.moveTo(0,0);a.lineTo(1*b,1*c);return a.q},AsteriskLine:function(a,b,c){var a=new J,d=0.2/Math.SQRT2;K(a,d*b,(1-d)*c,q);a.lineTo((1-d)*b,d*c);a.moveTo(d*b,d*c);a.lineTo((1-d)*b,(1-d)*c);a.moveTo(0*b,0.5*c);a.lineTo(1*b,0.5*c);a.moveTo(0.5*b,0*c);a.lineTo(0.5*b,1*c);return a.q},CircleLine:function(a,b,c){var a=0.5*hc,d=new J;K(d,1*b,0.5*c,q);L(d,1*b,(0.5+a)*c,(0.5+a)*b,1*c,0.5*b,1*c);L(d,
(0.5-a)*b,1*c,0,(0.5+a)*c,0,0.5*c);L(d,0,(0.5-a)*c,(0.5-a)*b,0,0.5*b,0);L(d,(0.5+a)*b,0,1*b,(0.5-a)*c,1*b,0.5*c);b=d.q;b.v=new H(0.146,0.146);b.w=new H(0.853,0.853);b.$b=dh;return b},Pie:function(a,b,c){var a=new J,d=0.5*(4*(Math.SQRT2-1)/3);K(a,(0.5*Math.SQRT2/2+0.5)*b,(0.5-0.5*Math.SQRT2/2)*c,h);L(a,0.7*b,0*c,0.5*b,0*c,0.5*b,0*c);L(a,(0.5-d+0)*b,0*c,0*b,(0.5-d+0)*c,0*b,0.5*c);L(a,0*b,(0.5+d+0)*c,(0.5-d+0)*b,1*c,0.5*b,1*c);L(a,(0.5+d+0)*b,1*c,1*b,(0.5+d+0)*c,1*b,0.5*c);a.lineTo(0.5*b,0.5*c);Dd(a);
return a.q},PiePiece:function(a,b,c){var a=0.5*(hc/Math.SQRT2),d=Math.SQRT2/2,e=1-Math.SQRT2/2,g=new J;K(g,b,c,h);L(g,b,(1-a)*c,(d+a)*b,(e+a)*c,d*b,e*c);g.lineTo(0,c);Dd(g);return g.q},StopSign:function(a,b,c){var d=1/(Math.SQRT2+2),e=new J;K(e,d*b,0,h);e.lineTo((1-d)*b,0);e.lineTo(1*b,d*c);e.lineTo(1*b,(1-d)*c);e.lineTo((1-d)*b,1*c);e.lineTo(d*b,1*c);e.lineTo(0,(1-d)*c);e.lineTo(0,d*c);Dd(e);b=e.q;a&&Cb(a.v)&&(a.v=new H(d/2,d/2));a&&Cb(a.w)&&(a.w=new H(1-d/2,1-d/2));return b},LogicImplies:function(a,
b,c){a=a?a.fc:0;0===a&&(a=0.2);var d=new J;K(d,(1-a)*b,0*c,q);d.lineTo(1*b,0.5*c);d.lineTo((1-a)*b,c);d.moveTo(0,0.5*c);d.lineTo(b,0.5*c);b=d.q;b.v=new H(0,0);b.w=new H(0.8,0.5);return b},LogicIff:function(a,b,c){a=a?a.fc:0;0===a&&(a=0.2);var d=new J;K(d,(1-a)*b,0*c,q);d.lineTo(1*b,0.5*c);d.lineTo((1-a)*b,c);d.moveTo(0,0.5*c);d.lineTo(b,0.5*c);d.moveTo(a*b,0);d.lineTo(0,0.5*c);d.lineTo(a*b,c);b=d.q;b.v=new H(0.2,0);b.w=new H(0.8,0.5);return b},LogicNot:function(a,b,c){a=new J;K(a,0,0,q);a.lineTo(1*
b,0);a.lineTo(1*b,1*c);return a.q},LogicAnd:function(a,b,c){a=new J;K(a,0,1*c,q);a.lineTo(0.5*b,0);a.lineTo(1*b,1*c);b=a.q;b.v=new H(0.25,0.5);b.w=new H(0.75,1);return b},LogicOr:function(a,b,c){a=new J;K(a,0,0,q);a.lineTo(0.5*b,1*c);a.lineTo(1*b,0);b=a.q;b.v=new H(0.219,0);b.w=new H(0.78,0.409);return b},LogicXor:function(a,b,c){a=new J;K(a,0.5*b,0,q);a.lineTo(0.5*b,1*c);a.moveTo(0,0.5*c);a.lineTo(1*b,0.5*c);var d=0.5*hc;L(a,1*b,(0.5+d)*c,(0.5+d)*b,1*c,0.5*b,1*c);L(a,(0.5-d)*b,1*c,0,(0.5+d)*c,0,
0.5*c);L(a,0,(0.5-d)*c,(0.5-d)*b,0,0.5*b,0);L(a,(0.5+d)*b,0,1*b,(0.5-d)*c,1*b,0.5*c);b=a.q;b.$b=dh;return b},LogicTruth:function(a,b,c){a=new J;K(a,0,0,q);a.lineTo(1*b,0);a.moveTo(0.5*b,0);a.lineTo(0.5*b,1*c);return a.q},LogicFalsity:function(a,b,c){a=new J;K(a,0,1*c,q);a.lineTo(1*b,1*c);a.moveTo(0.5*b,1*c);a.lineTo(0.5*b,0);return a.q},LogicThereExists:function(a,b,c){a=new J;K(a,0,0,q);a.lineTo(1*b,0);a.lineTo(1*b,0.5*c);a.lineTo(0,0.5*c);a.moveTo(1*b,0.5*c);a.lineTo(1*b,1*c);a.lineTo(0,1*c);return a.q},
LogicForAll:function(a,b,c){a=new J;K(a,0,0,q);a.lineTo(0.5*b,1*c);a.lineTo(1*b,0);a.moveTo(0.25*b,0.5*c);a.lineTo(0.75*b,0.5*c);b=a.q;b.v=new H(0.25,0);b.w=new H(0.75,0.5);return b},LogicIsDefinedAs:function(a,b,c){a=new J;K(a,0,0,q);a.lineTo(b,0);a.moveTo(0,0.5*c);a.lineTo(b,0.5*c);a.moveTo(0,c);a.lineTo(b,c);b=a.q;b.v=new H(0.01,0.01);b.w=new H(0.99,0.49);return b},LogicIntersect:function(a,b,c){var a=0.5*hc,d=new J;K(d,0,1*c,q);d.lineTo(0,0.5*c);L(d,0,(0.5-a)*c,(0.5-a)*b,0,0.5*b,0);L(d,(0.5+a)*
b,0,1*b,(0.5-a)*c,1*b,0.5*c);d.lineTo(1*b,1*c);b=d.q;b.v=new H(0,0.5);b.w=new H(1,1);return b},LogicUnion:function(a,b,c){var a=0.5*hc,d=new J;K(d,1*b,0,q);d.lineTo(1*b,0.5*c);L(d,1*b,(0.5+a)*c,(0.5+a)*b,1*c,0.5*b,1*c);L(d,(0.5-a)*b,1*c,0,(0.5+a)*c,0,0.5*c);d.lineTo(0,0);b=d.q;b.v=new H(0,0);b.w=new H(1,0.5);return b},Arrow:function(a,b,c){var d=a?a.fc:0,a=a?a.ps:0;0===d&&(d=0.3);0===a&&(a=0.3);var e=new J;K(e,0,(0.5-a/2)*c,h);e.lineTo((1-d)*b,(0.5-a/2)*c);e.lineTo((1-d)*b,0);e.lineTo(1*b,0.5*c);
e.lineTo((1-d)*b,1*c);e.lineTo((1-d)*b,(0.5+a/2)*c);e.lineTo(0,(0.5+a/2)*c);Dd(e);b=e.q;b.v=new H(0,0.5-a/2);d=ul(0,0.5+a/2,1,0.5+a/2,1-d,1,1,0.5);b.w=new H(d.x,d.y);return b},ISOProcess:"Chevron",Chevron:function(a,b,c){a=new J;K(a,0,0,h);a.lineTo(0.5*b,0);a.lineTo(1*b,0.5*c);a.lineTo(0.5*b,1*c);a.lineTo(0,1*c);a.lineTo(0.5*b,0.5*c);Dd(a);return a.q},DoubleArrow:function(a,b,c){a=new J;K(a,0,0,h);a.lineTo(0.3*b,0.214*c);a.lineTo(0.3*b,0);a.lineTo(1*b,0.5*c);a.lineTo(0.3*b,1*c);a.lineTo(0.3*b,0.786*
c);a.lineTo(0,1*c);Dd(a);K(a,0.3*b,0.214*c,q);a.lineTo(0.3*b,0.786*c);Ed(a);return a.q},DoubleEndArrow:function(a,b,c){a=new J;K(a,1*b,0.5*c,h);a.lineTo(0.7*b,1*c);a.lineTo(0.7*b,0.7*c);a.lineTo(0.3*b,0.7*c);a.lineTo(0.3*b,1*c);a.lineTo(0,0.5*c);a.lineTo(0.3*b,0);a.lineTo(0.3*b,0.3*c);a.lineTo(0.7*b,0.3*c);a.lineTo(0.7*b,0);Dd(a);b=a.q;c=ul(0,0.5,0.3,0,0,0.3,0.3,0.3);b.v=new H(c.x,c.y);c=ul(0.7,1,1,0.5,0.7,0.7,1,0.7);b.w=new H(c.x,c.y);return b},IBeamArrow:function(a,b,c){a=new J;K(a,1*b,0.5*c,h);
a.lineTo(0.7*b,1*c);a.lineTo(0.7*b,0.7*c);a.lineTo(0.2*b,0.7*c);a.lineTo(0.2*b,1*c);a.lineTo(0,1*c);a.lineTo(0,0);a.lineTo(0.2*b,0);a.lineTo(0.2*b,0.3*c);a.lineTo(0.7*b,0.3*c);a.lineTo(0.7*b,0);Dd(a);b=a.q;b.v=new H(0,0.3);c=ul(0.7,1,1,0.5,0.7,0.7,1,0.7);b.w=new H(c.x,c.y);return b},Pointer:function(a,b,c){a=new J;K(a,1*b,0.5*c,h);a.lineTo(0,1*c);a.lineTo(0.2*b,0.5*c);a.lineTo(0,0);Dd(a);b=a.q;b.v=new H(0.2,0.35);c=ul(0.2,0.65,1,0.65,0,1,1,0.5);b.w=new H(c.x,c.y);return b},RoundedPointer:function(a,
b,c){a=new J;K(a,1*b,0.5*c,h);a.lineTo(0,1*c);L(a,0.5*b,0.75*c,0.5*b,0.25*c,0,0);Dd(a);b=a.q;b.v=new H(0.4,0.35);c=ul(0.2,0.65,1,0.65,0,1,1,0.5);b.w=new H(c.x,c.y);return b},SplitEndArrow:function(a,b,c){a=new J;K(a,1*b,0.5*c,h);a.lineTo(0.7*b,1*c);a.lineTo(0.7*b,0.7*c);a.lineTo(0,0.7*c);a.lineTo(0.2*b,0.5*c);a.lineTo(0,0.3*c);a.lineTo(0.7*b,0.3*c);a.lineTo(0.7*b,0);Dd(a);b=a.q;b.v=new H(0.2,0.3);c=ul(0.7,1,1,0.5,0.7,0.7,1,0.7);b.w=new H(c.x,c.y);return b},MessageToUser:"SquareArrow",SquareArrow:function(a,
b,c){a=new J;K(a,1*b,0.5*c,h);a.lineTo(0.7*b,1*c);a.lineTo(0,1*c);a.lineTo(0,0);a.lineTo(0.7*b,0);Dd(a);b=a.q;b.v=new H(0,0);b.w=new H(0.7,1);return b},Cone1:function(a,b,c){var a=0.5*hc,d=0.1*hc,e=new J;K(e,0,0.9*c,h);e.lineTo(0.5*b,0);e.lineTo(1*b,0.9*c);L(e,1*b,(0.9+d)*c,(0.5+a)*b,1*c,0.5*b,1*c);L(e,(0.5-a)*b,1*c,0,(0.9+d)*c,0,0.9*c);Dd(e);b=e.q;b.v=new H(0.25,0.5);b.w=new H(0.75,0.97);return b},Cone2:function(a,b,c){a=new J;K(a,0,0.9*c,h);L(a,(1-0.85/0.9)*b,1*c,0.85/0.9*b,1*c,1*b,0.9*c);a.lineTo(0.5*
b,0);a.lineTo(0,0.9*c);Dd(a);K(a,0,0.9*c,q);L(a,(1-0.85/0.9)*b,0.8*c,0.85/0.9*b,0.8*c,1*b,0.9*c);Ed(a);b=a.q;b.v=new H(0.25,0.5);b.w=new H(0.75,0.82);return b},Cube1:function(a,b,c){a=new J;K(a,0.5*b,1*c,h);a.lineTo(1*b,0.85*c);a.lineTo(1*b,0.15*c);a.lineTo(0.5*b,0*c);a.lineTo(0*b,0.15*c);a.lineTo(0*b,0.85*c);Dd(a);K(a,0.5*b,1*c,q);a.lineTo(0.5*b,0.3*c);a.lineTo(0,0.15*c);a.moveTo(0.5*b,0.3*c);a.lineTo(1*b,0.15*c);Ed(a);b=a.q;b.v=new H(0,0.3);b.w=new H(0.5,0.85);return b},Cube2:function(a,b,c){a=
new J;K(a,0,0.3*c,h);a.lineTo(0*b,1*c);a.lineTo(0.7*b,c);a.lineTo(1*b,0.7*c);a.lineTo(1*b,0*c);a.lineTo(0.3*b,0*c);Dd(a);K(a,0,0.3*c,q);a.lineTo(0.7*b,0.3*c);a.lineTo(1*b,0*c);a.moveTo(0.7*b,0.3*c);a.lineTo(0.7*b,1*c);Ed(a);b=a.q;b.v=new H(0,0.3);b.w=new H(0.7,1);return b},MagneticData:"Cylinder1",Cylinder1:function(a,b,c){var a=0.5*hc,d=0.1*hc,e=new J;K(e,0,0.1*c,h);L(e,0,(0.1-d)*c,(0.5-a)*b,0,0.5*b,0);L(e,(0.5+a)*b,0,1*b,(0.1-d)*c,1*b,0.1*c);e.lineTo(b,0.9*c);L(e,1*b,(0.9+d)*c,(0.5+a)*b,1*c,0.5*
b,1*c);L(e,(0.5-a)*b,1*c,0,(0.9+d)*c,0,0.9*c);e.lineTo(0,0.1*c);K(e,0,0.1*c,q);L(e,0,(0.1+d)*c,(0.5-a)*b,0.2*c,0.5*b,0.2*c);L(e,(0.5+a)*b,0.2*c,1*b,(0.1+d)*c,1*b,0.1*c);Ed(e);b=e.q;b.v=new H(0,0.2);b.w=new H(1,0.9);return b},Cylinder2:function(a,b,c){var a=0.5*hc,d=0.1*hc,e=new J;K(e,0,0.9*c,h);e.lineTo(0,0.1*c);L(e,0,(0.1-d)*c,(0.5-a)*b,0,0.5*b,0);L(e,(0.5+a)*b,0,1*b,(0.1-d)*c,1*b,0.1*c);e.lineTo(1*b,0.9*c);L(e,1*b,(0.9+d)*c,(0.5+a)*b,1*c,0.5*b,1*c);L(e,(0.5-a)*b,1*c,0,(0.9+d)*c,0,0.9*c);K(e,0,0.9*
c,q);L(e,0,(0.9-d)*c,(0.5-a)*b,0.8*c,0.5*b,0.8*c);L(e,(0.5+a)*b,0.8*c,1*b,(0.9-d)*c,1*b,0.9*c);Ed(e);b=e.q;b.v=new H(0,0.1);b.w=new H(1,0.8);return b},Cylinder3:function(a,b,c){var a=0.1*hc,d=0.5*hc,e=new J;K(e,0.1*b,0,h);e.lineTo(0.9*b,0);L(e,(0.9+a)*b,0,1*b,(0.5-d)*c,1*b,0.5*c);L(e,1*b,(0.5+d)*c,(0.9+a)*b,1*c,0.9*b,1*c);e.lineTo(0.1*b,1*c);L(e,(0.1-a)*b,1*c,0,(0.5+d)*c,0,0.5*c);L(e,0,(0.5-d)*c,(0.1-a)*b,0,0.1*b,0);K(e,0.1*b,0,q);L(e,(0.1+a)*b,0,0.2*b,(0.5-d)*c,0.2*b,0.5*c);L(e,0.2*b,(0.5+d)*c,(0.1+
a)*b,1*c,0.1*b,1*c);Ed(e);b=e.q;b.v=new H(0.2,0);b.w=new H(0.9,1);return b},DirectData:"Cylinder4",Cylinder4:function(a,b,c){var a=0.1*hc,d=0.5*hc,e=new J;K(e,0.9*b,0,h);L(e,(0.9+a)*b,0,1*b,(0.5-d)*c,1*b,0.5*c);L(e,1*b,(0.5+d)*c,(0.9+a)*b,1*c,0.9*b,1*c);e.lineTo(0.1*b,1*c);L(e,(0.1-a)*b,1*c,0,(0.5+d)*c,0,0.5*c);L(e,0,(0.5-d)*c,(0.1-a)*b,0,0.1*b,0);e.lineTo(0.9*b,0);K(e,0.9*b,0,q);L(e,(0.9-a)*b,0,0.8*b,(0.5-d)*c,0.8*b,0.5*c);L(e,0.8*b,(0.5+d)*c,(0.9-a)*b,1*c,0.9*b,1*c);Ed(e);b=e.q;b.v=new H(0.1,0);
b.w=new H(0.8,1);return b},Prism1:function(a,b,c){a=new J;K(a,0.25*b,0.25*c,h);a.lineTo(0.75*b,0);a.lineTo(b,0.5*c);a.lineTo(0.5*b,c);a.lineTo(0,c);Dd(a);K(a,0.25*b,0.25*c,q);a.lineTo(0.5*b,c);Ed(a);b=a.q;b.v=new H(0.408,0.172);b.w=new H(0.833,0.662);return b},Prism2:function(a,b,c){a=new J;K(a,0,0.25*c,h);a.lineTo(0.75*b,0);a.lineTo(1*b,0.25*c);a.lineTo(0.75*b,0.75*c);a.lineTo(0,1*c);Dd(a);K(a,0,c,q);a.lineTo(0.25*b,0.5*c);a.lineTo(b,0.25*c);a.moveTo(0,0.25*c);a.lineTo(0.25*b,0.5*c);Ed(a);b=a.q;
b.v=new H(0.25,0.5);b.w=new H(0.75,0.75);return b},Pyramid1:function(a,b,c){a=new J;K(a,0.5*b,0,h);a.lineTo(b,0.75*c);a.lineTo(0.5*b,1*c);a.lineTo(0,0.75*c);Dd(a);K(a,0.5*b,0,q);a.lineTo(0.5*b,1*c);Ed(a);b=a.q;b.v=new H(0.25,0.367);b.w=new H(0.75,0.875);return b},Pyramid2:function(a,b,c){a=new J;K(a,0.5*b,0,h);a.lineTo(b,0.85*c);a.lineTo(0.5*b,1*c);a.lineTo(0,0.85*c);Dd(a);K(a,0.5*b,0,q);a.lineTo(0.5*b,0.7*c);a.lineTo(0,0.85*c);a.moveTo(0.5*b,0.7*c);a.lineTo(1*b,0.85*c);Ed(a);b=a.q;b.v=new H(0.25,
0.367);b.w=new H(0.75,0.875);return b},Actor:function(a,b,c){var d=0.2*hc,e=0.1*hc,a=0.5,g=0.1,i=new J;K(i,a*b,(g+0.1)*c,h);L(i,(a-d)*b,(g+0.1)*c,(a-0.2)*b,(g+e)*c,(a-0.2)*b,g*c);L(i,(a-0.2)*b,(g-e)*c,(a-d)*b,(g-0.1)*c,a*b,(g-0.1)*c);L(i,(a+d)*b,(g-0.1)*c,(a+0.2)*b,(g-e)*c,(a+0.2)*b,g*c);L(i,(a+0.2)*b,(g+e)*c,(a+d)*b,(g+0.1)*c,a*b,(g+0.1)*c);d=0.05;e=hc*d;K(i,0.5*b,0.2*c,h);i.lineTo(0.95*b,0.2*c);a=0.95;g=0.25;L(i,(a+e)*b,(g-d)*c,(a+d)*b,(g-e)*c,(a+d)*b,g*c);i.lineTo(1*b,0.6*c);i.lineTo(0.85*b,0.6*
c);i.lineTo(0.85*b,0.35*c);d=0.025;e=hc*d;a=0.825;g=0.35;L(i,(a+d)*b,(g-e)*c,(a+e)*b,(g-d)*c,a*b,(g-d)*c);L(i,(a-e)*b,(g-d)*c,(a-d)*b,(g-e)*c,(a-d)*b,g*c);i.lineTo(0.8*b,1*c);i.lineTo(0.55*b,1*c);i.lineTo(0.55*b,0.7*c);d=0.05;e=hc*d;a=0.5;g=0.7;L(i,(a+d)*b,(g-e)*c,(a+e)*b,(g-d)*c,a*b,(g-d)*c);L(i,(a-e)*b,(g-d)*c,(a-d)*b,(g-e)*c,(a-d)*b,g*c);i.lineTo(0.45*b,1*c);i.lineTo(0.2*b,1*c);i.lineTo(0.2*b,0.35*c);d=0.025;e=hc*d;a=0.175;g=0.35;L(i,(a+d)*b,(g-e)*c,(a+e)*b,(g-d)*c,a*b,(g-d)*c);L(i,(a-e)*b,(g-
d)*c,(a-d)*b,(g-e)*c,(a-d)*b,g*c);i.lineTo(0.15*b,0.6*c);i.lineTo(0*b,0.6*c);i.lineTo(0*b,0.25*c);d=0.05;e=hc*d;a=0.05;g=0.25;L(i,(a-d)*b,(g-e)*c,(a-e)*b,(g-d)*c,a*b,(g-d)*c);i.lineTo(0.5*b,0.2*c);b=i.q;b.v=new H(0.2,0.2);b.w=new H(0.8,0.65);return b},Card:function(a,b,c){a=new J;K(a,1*b,0*c,h);a.lineTo(1*b,1*c);a.lineTo(0*b,1*c);a.lineTo(0*b,0.2*c);a.lineTo(0.2*b,0*c);Dd(a);b=a.q;b.v=new H(0,0.2);b.w=new H(1,1);return b},Collate:function(a,b,c){a=new J;K(a,0.5*b,0.5*c,h);a.lineTo(0,0);a.lineTo(1*
b,0);a.lineTo(0.5*b,0.5*c);K(a,0.5*b,0.5*c,h);a.lineTo(1*b,1*c);a.lineTo(0,1*c);a.lineTo(0.5*b,0.5*c);b=a.q;b.v=new H(0.25,0);b.w=new H(0.75,0.25);return b},CreateRequest:function(a,b,c){a=a?a.fc:0;0===a&&(a=0.1);var d=new J;K(d,0,0,h);d.lineTo(1*b,0);d.lineTo(1*b,1*c);d.lineTo(0,1*c);Dd(d);K(d,0,a*c,q);d.lineTo(1*b,a*c);d.moveTo(0,(1-a)*c);d.lineTo(1*b,(1-a)*c);Ed(d);b=d.q;b.v=new H(0,a);b.w=new H(1,1-a);return b},Database:function(a,b,c){var a=new J,d=0.5*hc,e=0.1*hc;K(a,1*b,0.1*c,h);a.lineTo(1*
b,0.9*c);L(a,1*b,(0.9+e)*c,(0.5+d)*b,1*c,0.5*b,1*c);L(a,(0.5-d)*b,1*c,0,(0.9+e)*c,0,0.9*c);a.lineTo(0,0.1*c);L(a,0,(0.1-e)*c,(0.5-d)*b,0,0.5*b,0);L(a,(0.5+d)*b,0,1*b,(0.1-e)*c,1*b,0.1*c);K(a,1*b,0.1*c,q);L(a,1*b,(0.1+e)*c,(0.5+d)*b,0.2*c,0.5*b,0.2*c);L(a,(0.5-d)*b,0.2*c,0,(0.1+e)*c,0,0.1*c);a.moveTo(1*b,0.2*c);L(a,1*b,(0.2+e)*c,(0.5+d)*b,0.3*c,0.5*b,0.3*c);L(a,(0.5-d)*b,0.3*c,0,(0.2+e)*c,0,0.2*c);a.moveTo(1*b,0.3*c);L(a,1*b,(0.3+e)*c,(0.5+d)*b,0.4*c,0.5*b,0.4*c);L(a,(0.5-d)*b,0.4*c,0,(0.3+e)*c,0,
0.3*c);Ed(a);b=a.q;b.v=new H(0,0.4);b.w=new H(1,0.9);return b},StoredData:"DataStorage",DataStorage:function(a,b,c){a=new J;K(a,0,0,h);a.lineTo(0.75*b,0);L(a,1*b,0,1*b,1*c,0.75*b,1*c);a.lineTo(0,1*c);L(a,0.25*b,0.9*c,0.25*b,0.1*c,0,0);Dd(a);b=a.q;b.v=new H(0.226,0);b.w=new H(0.81,1);return b},DiskStorage:function(a,b,c){var a=new J,d=0.5*hc,e=0.1*hc;K(a,1*b,0.1*c,h);a.lineTo(1*b,0.9*c);L(a,1*b,(0.9+e)*c,(0.5+d)*b,1*c,0.5*b,1*c);L(a,(0.5-d)*b,1*c,0,(0.9+e)*c,0,0.9*c);a.lineTo(0,0.1*c);L(a,0,(0.1-e)*
c,(0.5-d)*b,0,0.5*b,0);L(a,(0.5+d)*b,0,1*b,(0.1-e)*c,1*b,0.1*c);K(a,1*b,0.1*c,q);L(a,1*b,(0.1+e)*c,(0.5+d)*b,0.2*c,0.5*b,0.2*c);L(a,(0.5-d)*b,0.2*c,0,(0.1+e)*c,0,0.1*c);a.moveTo(1*b,0.2*c);L(a,1*b,(0.2+e)*c,(0.5+d)*b,0.3*c,0.5*b,0.3*c);L(a,(0.5-d)*b,0.3*c,0,(0.2+e)*c,0,0.2*c);Ed(a);b=a.q;b.v=new H(0,0.3);b.w=new H(1,0.9);return b},Display:function(a,b,c){a=new J;K(a,0.25*b,0,h);a.lineTo(0.75*b,0);L(a,1*b,0,1*b,1*c,0.75*b,1*c);a.lineTo(0.25*b,1*c);a.lineTo(0,0.5*c);Dd(a);b=a.q;b.v=new H(0.25,0);b.w=
new H(0.75,1);return b},DividedEvent:function(a,b,c){a=a?a.fc:0;0===a?a=0.2:0.15>a&&(a=0.15);var d=new J,e=0.2*hc;K(d,0,0.2*c,h);L(d,0,(0.2-e)*c,(0.2-e)*b,0,0.2*b,0);d.lineTo(0.8*b,0);L(d,(0.8+e)*b,0,1*b,(0.2-e)*c,1*b,0.2*c);d.lineTo(1*b,0.8*c);L(d,1*b,(0.8+e)*c,(0.8+e)*b,1*c,0.8*b,1*c);d.lineTo(0.2*b,1*c);L(d,(0.2-e)*b,1*c,0,(0.8+e)*c,0,0.8*c);d.lineTo(0,0.2*c);K(d,0,a*c,q);d.lineTo(1*b,a*c);Ed(d);b=d.q;b.v=new H(0,a);b.w=new H(1,1-a);return b},DividedProcess:function(a,b,c){a=a?a.fc:0;0.1>a&&(a=
0.1);var d=new J;K(d,0,0,h);d.lineTo(1*b,0);d.lineTo(1*b,1*c);d.lineTo(0,1*c);Dd(d);K(d,0,a*c,q);d.lineTo(1*b,a*c);Ed(d);b=d.q;b.v=new H(0,a);b.w=new H(1,1);return b},Document:function(a,b,c){c/=0.8;a=new J;K(a,0,0.7*c,h);a.lineTo(0,0);a.lineTo(1*b,0);a.lineTo(1*b,0.7*c);L(a,0.5*b,0.4*c,0.5*b,1*c,0,0.7*c);Dd(a);b=a.q;b.v=new H(0,0);b.w=new H(1,0.6);return b},ExternalOrganization:function(a,b,c){a=a?a.fc:0;0.2>a&&(a=0.2);var d=new J;K(d,0,0,h);d.lineTo(1*b,0);d.lineTo(1*b,1*c);d.lineTo(0,1*c);Dd(d);
K(d,a*b,0,q);d.lineTo(0,a*c);d.moveTo(1*b,a*c);d.lineTo((1-a)*b,0);d.moveTo(0,(1-a)*c);d.lineTo(a*b,1*c);d.moveTo((1-a)*b,1*c);d.lineTo(1*b,(1-a)*c);Ed(d);b=d.q;b.v=new H(a/2,a/2);b.w=new H(1-a/2,1-a/2);return b},ExternalProcess:function(a,b,c){a=new J;K(a,0.5*b,0,h);a.lineTo(1*b,0.5*c);a.lineTo(0.5*b,1*c);a.lineTo(0,0.5*c);Dd(a);K(a,0.1*b,0.4*c,q);a.lineTo(0.1*b,0.6*c);a.moveTo(0.9*b,0.6*c);a.lineTo(0.9*b,0.4*c);a.moveTo(0.6*b,0.1*c);a.lineTo(0.4*b,0.1*c);a.moveTo(0.4*b,0.9*c);a.lineTo(0.6*b,0.9*
c);Ed(a);b=a.q;b.v=new H(0.25,0.25);b.w=new H(0.75,0.75);return b},File:function(a,b,c){a=new J;K(a,0,0,h);a.lineTo(0.75*b,0);a.lineTo(1*b,0.25*c);a.lineTo(1*b,1*c);a.lineTo(0,1*c);Dd(a);K(a,0.75*b,0,q);a.lineTo(0.75*b,0.25*c);a.lineTo(1*b,0.25*c);Ed(a);b=a.q;b.v=new H(0,0.25);b.w=new H(1,1);return b},Interrupt:function(a,b,c){a=new J;K(a,1*b,0.5*c,h);a.lineTo(0,1*c);a.lineTo(0,0);a.lineTo(1*b,0.5*c);K(a,1*b,0.5*c,q);a.lineTo(1*b,1*c);K(a,1*b,0.5*c,q);a.lineTo(1*b,0);b=a.q;b.v=new H(0,0.25);b.w=new H(0.5,
0.75);return b},InternalStorage:function(a,b,c){var d=a?a.fc:0,a=a?a.ps:0;0===d&&(d=0.1);0===a&&(a=0.1);var e=new J;K(e,0,0,h);e.lineTo(1*b,0);e.lineTo(1*b,1*c);e.lineTo(0,1*c);Dd(e);K(e,d*b,0,q);e.lineTo(d*b,1*c);e.moveTo(0,a*c);e.lineTo(1*b,a*c);Ed(e);b=e.q;b.v=new H(d,a);b.w=new H(1,1);return b},Junction:function(a,b,c){var a=new J,d=1/Math.SQRT2,e=(1-1/Math.SQRT2)/2,g=0.5*hc;K(a,1*b,0.5*c,h);L(a,1*b,(0.5+g)*c,(0.5+g)*b,1*c,0.5*b,1*c);L(a,(0.5-g)*b,1*c,0,(0.5+g)*c,0,0.5*c);L(a,0,(0.5-g)*c,(0.5-
g)*b,0,0.5*b,0);L(a,(0.5+g)*b,0,1*b,(0.5-g)*c,1*b,0.5*c);K(a,(e+d)*b,(e+d)*c,q);a.lineTo(e*b,e*c);a.moveTo(e*b,(e+d)*c);a.lineTo((e+d)*b,e*c);Ed(a);b=a.q;b.$b=dh;return b},LinedDocument:function(a,b,c){c/=0.8;a=new J;K(a,0,0.7*c,h);a.lineTo(0,0);a.lineTo(1*b,0);a.lineTo(1*b,0.7*c);L(a,0.5*b,0.4*c,0.5*b,1*c,0,0.7*c);Dd(a);K(a,0.1*b,0,q);a.lineTo(0.1*b,0.75*c);Ed(a);b=a.q;b.v=new H(0.1,0);b.w=new H(1,0.6);return b},LoopLimit:function(a,b,c){a=new J;K(a,0,1*c,h);a.lineTo(0,0.25*c);a.lineTo(0.25*b,0);
a.lineTo(0.75*b,0);a.lineTo(1*b,0.25*c);a.lineTo(1*b,1*c);Dd(a);b=a.q;b.v=new H(0,0.25);b.w=new H(1,1);return b},SequentialData:"MagneticTape",MagneticTape:function(a,b,c){var a=new J,d=0.5*hc;K(a,0.5*b,1*c,h);L(a,(0.5-d)*b,1*c,0,(0.5+d)*c,0,0.5*c);L(a,0,(0.5-d)*c,(0.5-d)*b,0,0.5*b,0);L(a,(0.5+d)*b,0,1*b,(0.5-d)*c,1*b,0.5*c);L(a,1*b,(0.5+d)*c,(0.5+d)*b,0.9*c,0.6*b,0.9*c);a.lineTo(1*b,0.9*c);a.lineTo(1*b,1*c);a.lineTo(0.5*b,1*c);b=a.q;b.v=new H(0.15,0.15);b.w=new H(0.85,0.8);return b},ManualInput:function(a,
b,c){a=new J;K(a,1*b,0,h);a.lineTo(1*b,1*c);a.lineTo(0,1*c);a.lineTo(0,0.25*c);Dd(a);b=a.q;b.v=new H(0,0.25);b.w=new H(1,1);return b},MessageFromUser:function(a,b,c){a=a?a.fc:0;0===a&&(a=0.7);var d=new J;K(d,0,0,h);d.lineTo(1*b,0);d.lineTo(a*b,0.5*c);d.lineTo(1*b,1*c);d.lineTo(0,1*c);Dd(d);b=d.q;b.v=new H(0,0);b.w=new H(a,1);return b},MicroformProcessing:function(a,b,c){a=a?a.fc:0;0===a&&(a=0.25);var d=new J;K(d,0,0,h);d.lineTo(0.5*b,a*c);d.lineTo(1*b,0);d.lineTo(1*b,1*c);d.lineTo(0.5*b,(1-a)*c);
d.lineTo(0,1*c);Dd(d);b=d.q;b.v=new H(0,a);b.w=new H(1,1-a);return b},MicroformRecording:function(a,b,c){a=new J;K(a,0,0,h);a.lineTo(0.75*b,0.25*c);a.lineTo(1*b,0.15*c);a.lineTo(1*b,0.85*c);a.lineTo(0.75*b,0.75*c);a.lineTo(0,1*c);Dd(a);b=a.q;b.v=new H(0,0.25);b.w=new H(1,0.75);return b},MultiDocument:function(a,b,c){c/=0.8;a=new J;K(a,b,0,h);a.lineTo(b,0.5*c);L(a,0.96*b,0.47*c,0.93*b,0.45*c,0.9*b,0.44*c);a.lineTo(0.9*b,0.6*c);L(a,0.86*b,0.57*c,0.83*b,0.55*c,0.8*b,0.54*c);a.lineTo(0.8*b,0.7*c);L(a,
0.4*b,0.4*c,0.4*b,1*c,0,0.7*c);a.lineTo(0,0.2*c);a.lineTo(0.1*b,0.2*c);a.lineTo(0.1*b,0.1*c);a.lineTo(0.2*b,0.1*c);a.lineTo(0.2*b,0);Dd(a);K(a,0.1*b,0.2*c,q);a.lineTo(0.8*b,0.2*c);a.lineTo(0.8*b,0.54*c);a.moveTo(0.2*b,0.1*c);a.lineTo(0.9*b,0.1*c);a.lineTo(0.9*b,0.44*c);Ed(a);b=a.q;b.v=new H(0,0.25);b.w=new H(0.8,0.77);return b},MultiProcess:function(a,b,c){a=new J;K(a,0.1*b,0.1*c,h);a.lineTo(0.2*b,0.1*c);a.lineTo(0.2*b,0);a.lineTo(1*b,0);a.lineTo(1*b,0.8*c);a.lineTo(0.9*b,0.8*c);a.lineTo(0.9*b,0.9*
c);a.lineTo(0.8*b,0.9*c);a.lineTo(0.8*b,1*c);a.lineTo(0,1*c);a.lineTo(0,0.2*c);a.lineTo(0.1*b,0.2*c);Dd(a);K(a,0.2*b,0.1*c,q);a.lineTo(0.9*b,0.1*c);a.lineTo(0.9*b,0.8*c);a.moveTo(0.1*b,0.2*c);a.lineTo(0.8*b,0.2*c);a.lineTo(0.8*b,0.9*c);Ed(a);b=a.q;b.v=new H(0,0.2);b.w=new H(0.8,1);return b},OfflineStorage:function(a,b,c){a=a?a.fc:0;0===a&&(a=0.1);var d=1-a,e=new J;K(e,0,0,h);e.lineTo(1*b,0);e.lineTo(0.5*b,1*c);Dd(e);K(e,0.5*a*b,a*c,q);e.lineTo((1-0.5*a)*b,a*c);Ed(e);b=e.q;b.v=new H(d/4+0.5*a,a);b.w=
new H(3*d/4+0.5*a,a+0.5*d);return b},OffPageConnector:function(a,b,c){a=new J;K(a,0,0,h);a.lineTo(0.75*b,0);a.lineTo(1*b,0.5*c);a.lineTo(0.75*b,1*c);a.lineTo(0,1*c);Dd(a);b=a.q;b.v=new H(0,0);b.w=new H(0.75,1);return b},Or:function(a,b,c){var a=new J,d=0.5*hc;K(a,1*b,0.5*c,h);L(a,1*b,(0.5+d)*c,(0.5+d)*b,1*c,0.5*b,1*c);L(a,(0.5-d)*b,1*c,0,(0.5+d)*c,0,0.5*c);L(a,0,(0.5-d)*c,(0.5-d)*b,0,0.5*b,0);L(a,(0.5+d)*b,0,1*b,(0.5-d)*c,1*b,0.5*c);K(a,1*b,0.5*c,q);a.lineTo(0,0.5*c);a.moveTo(0.5*b,1*c);a.lineTo(0.5*
b,0);Ed(a);b=a.q;b.$b=dh;return b},PaperTape:function(a,b,c){c/=0.8;a=new J;K(a,0,0.7*c,h);a.lineTo(0,0.3*c);L(a,0.5*b,0.6*c,0.5*b,0,1*b,0.3);a.lineTo(1*b,0.7*c);L(a,0.5*b,0.4*c,0.5*b,1*c,0,0.7*c);Dd(a);b=a.q;b.v=new H(0,0.49);b.w=new H(1,0.75);return b},PrimitiveFromCall:function(a,b,c){var d=a?a.fc:0,a=a?a.ps:0;0===d&&(d=0.1);0===a&&(a=0.3);var e=new J;K(e,0,0,h);e.lineTo(1*b,0);e.lineTo((1-a)*b,0.5*c);e.lineTo(1*b,1*c);e.lineTo(0,1*c);Dd(e);b=e.q;b.v=new H(d,0);b.w=new H(1-a,1);return b},PrimitiveToCall:function(a,
b,c){var d=a?a.fc:0,a=a?a.ps:0;0===d&&(d=0.1);0===a&&(a=0.3);var e=new J;K(e,0,0,h);e.lineTo((1-a)*b,0);e.lineTo(1*b,0.5*c);e.lineTo((1-a)*b,1*c);e.lineTo(0,1*c);Dd(e);b=e.q;b.v=new H(d,0);b.w=new H(1-a,1);return b},Subroutine:"Procedure",Procedure:function(a,b,c){a=a?a.fc:0;0===a&&(a=0.1);var d=new J;K(d,0,0,h);d.lineTo(1*b,0);d.lineTo(1*b,1*c);d.lineTo(0,1*c);Dd(d);K(d,(1-a)*b,0,q);d.lineTo((1-a)*b,1*c);d.moveTo(a*b,0);d.lineTo(a*b,1*c);Ed(d);b=d.q;b.v=new H(a,0);b.w=new H(1-a,1);return b},Process:function(a,
b,c){a=a?a.fc:0;0===a&&(a=0.1);var d=new J;K(d,0,0,h);d.lineTo(1*b,0);d.lineTo(1*b,1*c);d.lineTo(0,1*c);Dd(d);K(d,a*b,0,q);d.lineTo(a*b,1*c);Ed(d);b=d.q;b.v=new H(a,0);b.w=new H(1,1);return b},Sort:function(a,b,c){a=new J;K(a,0.5*b,0,h);a.lineTo(1*b,0.5*c);a.lineTo(0.5*b,1*c);a.lineTo(0,0.5*c);Dd(a);K(a,0,0.5*c,q);a.lineTo(1*b,0.5*c);Ed(a);b=a.q;b.v=new H(0.25,0.25);b.w=new H(0.75,0.5);return b},Start:function(a,b,c){a=new J;K(a,0.25*b,0,h);a.lineTo(0.75*b,0);L(a,1*b,0,1*b,1*c,0.75*b,1*c);a.lineTo(0.25*
b,1*c);L(a,0,1*c,0,0,0.25*b,0);K(a,0.25*b,0,q);a.lineTo(0.25*b,1*c);a.moveTo(0.75*b,0);a.lineTo(0.75*b,1*c);Ed(a);b=a.q;b.v=new H(0.25,0);b.w=new H(0.75,1);return b},Terminator:function(a,b,c){a=new J;K(a,0.25*b,0,h);a.lineTo(0.75*b,0);L(a,1*b,0,1*b,1*c,0.75*b,1*c);a.lineTo(0.25*b,1*c);L(a,0,1*c,0,0,0.25*b,0);b=a.q;b.v=new H(0.23,0);b.w=new H(0.77,1);return b},TransmittalTape:function(a,b,c){a=a?a.fc:0;0===a&&(a=0.1);var d=new J;K(d,0,0,h);d.lineTo(1*b,0);d.lineTo(1*b,1*c);d.lineTo(0.75*b,(1-a)*c);
d.lineTo(0,(1-a)*c);Dd(d);b=d.q;b.v=new H(0,0);b.w=new H(1,1-a);return b},AndGate:function(a,b,c){var a=new J,d=0.5*hc;K(a,0,0,h);a.lineTo(0.5*b,0);L(a,(0.5+d)*b,0,1*b,(0.5-d)*c,1*b,0.5*c);L(a,1*b,(0.5+d)*c,(0.5+d)*b,1*c,0.5*b,1*c);a.lineTo(0,1*c);Dd(a);b=a.q;b.v=new H(0,0);b.w=new H(0.55,1);return b},Buffer:function(a,b,c){a=new J;K(a,0,0,h);a.lineTo(1*b,0.5*c);a.lineTo(0,1*c);Dd(a);b=a.q;b.v=new H(0,0.25);b.w=new H(0.5,0.75);return b},Clock:function(a,b,c){var a=new J,d=0.5*hc;K(a,1*b,0.5*c,h);
L(a,1*b,(0.5+d)*c,(0.5+d)*b,1*c,0.5*b,1*c);L(a,(0.5-d)*b,1*c,0,(0.5+d)*c,0,0.5*c);L(a,0,(0.5-d)*c,(0.5-d)*b,0,0.5*b,0);L(a,(0.5+d)*b,0,1*b,(0.5-d)*c,1*b,0.5*c);K(a,1*b,0.5*c,q);a.lineTo(1*b,0.5*c);K(a,0.8*b,0.75*c,q);a.lineTo(0.8*b,0.25*c);a.lineTo(0.6*b,0.25*c);a.lineTo(0.6*b,0.75*c);a.lineTo(0.4*b,0.75*c);a.lineTo(0.4*b,0.25*c);a.lineTo(0.2*b,0.25*c);a.lineTo(0.2*b,0.75*c);Ed(a);b=a.q;b.$b=dh;return b},Ground:function(a,b,c){a=new J;K(a,0.5*b,0,q);a.lineTo(0.5*b,0.4*c);a.moveTo(0.2*b,0.6*c);a.lineTo(0.8*
b,0.6*c);a.moveTo(0.3*b,0.8*c);a.lineTo(0.7*b,0.8*c);a.moveTo(0.4*b,1*c);a.lineTo(0.6*b,1*c);return a.q},Inverter:function(a,b,c){var a=new J,d=0.1*hc;K(a,0.8*b,0.5*c,h);a.lineTo(0,1*c);a.lineTo(0,0);a.lineTo(0.8*b,0.5*c);K(a,1*b,0.5*c,h);L(a,1*b,(0.5+d)*c,(0.9+d)*b,0.6*c,0.9*b,0.6*c);L(a,(0.9-d)*b,0.6*c,0.8*b,(0.5+d)*c,0.8*b,0.5*c);L(a,0.8*b,(0.5-d)*c,(0.9-d)*b,0.4*c,0.9*b,0.4*c);L(a,(0.9+d)*b,0.4*c,1*b,(0.5-d)*c,1*b,0.5*c);b=a.q;b.v=new H(0,0.25);b.w=new H(0.4,0.75);return b},NandGate:function(a,
b,c){var a=new J,d=0.5*hc,e=0.4*hc,g=0.1*hc;K(a,0.8*b,0.5*c,h);L(a,0.8*b,(0.5+e)*c,(0.4+d)*b,1*c,0.4*b,1*c);a.lineTo(0,1*c);a.lineTo(0,0);a.lineTo(0.4*b,0);L(a,(0.4+d)*b,0,0.8*b,(0.5-e)*c,0.8*b,0.5*c);K(a,1*b,0.5*c,h);L(a,1*b,(0.5+g)*c,(0.9+g)*b,0.6*c,0.9*b,0.6*c);L(a,(0.9-g)*b,0.6*c,0.8*b,(0.5+g)*c,0.8*b,0.5*c);L(a,0.8*b,(0.5-g)*c,(0.9-g)*b,0.4*c,0.9*b,0.4*c);L(a,(0.9+g)*b,0.4*c,1*b,(0.5-g)*c,1*b,0.5*c);b=a.q;b.v=new H(0,0.05);b.w=new H(0.55,0.95);return b},NorGate:function(a,b,c){var a=new J,d=
0.5,e=hc*d,g=0,i=0.5;K(a,0.8*b,0.5*c,h);L(a,0.7*b,(i+e)*c,(g+e)*b,(i+d)*c,0,1*c);L(a,0.25*b,0.75*c,0.25*b,0.25*c,0,0);L(a,(g+e)*b,(i-d)*c,0.7*b,(i-e)*c,0.8*b,0.5*c);d=0.1;e=0.1*hc;g=0.9;i=0.5;K(a,(g-d)*b,i*c,h);L(a,(g-d)*b,(i-e)*c,(g-e)*b,(i-d)*c,g*b,(i-d)*c);L(a,(g+e)*b,(i-d)*c,(g+d)*b,(i-e)*c,(g+d)*b,i*c);L(a,(g+d)*b,(i+e)*c,(g+e)*b,(i+d)*c,g*b,(i+d)*c);L(a,(g-e)*b,(i+d)*c,(g-d)*b,(i+e)*c,(g-d)*b,i*c);b=a.q;b.v=new H(0.2,0.25);b.w=new H(0.6,0.75);return b},OrGate:function(a,b,c){var a=new J,d=0.5*
hc;K(a,0,0,h);L(a,(0+d+d)*b,0*c,0.8*b,(0.5-d)*c,1*b,0.5*c);L(a,0.8*b,(0.5+d)*c,(0+d+d)*b,1*c,0,1*c);L(a,0.25*b,0.75*c,0.25*b,0.25*c,0,0);Dd(a);b=a.q;b.v=new H(0.2,0.25);b.w=new H(0.75,0.75);return b},XnorGate:function(a,b,c){var a=new J,d=0.5,e=hc*d,g=0.2,i=0.5;K(a,0.1*b,0,q);L(a,0.35*b,0.25*c,0.35*b,0.75*c,0.1*b,1*c);K(a,0.8*b,0.5*c,h);L(a,0.7*b,(i+e)*c,(g+e)*b,(i+d)*c,0.2*b,1*c);L(a,0.45*b,0.75*c,0.45*b,0.25*c,0.2*b,0);L(a,(g+e)*b,(i-d)*c,0.7*b,(i-e)*c,0.8*b,0.5*c);d=0.1;e=0.1*hc;g=0.9;i=0.5;K(a,
(g-d)*b,i*c,h);L(a,(g-d)*b,(i-e)*c,(g-e)*b,(i-d)*c,g*b,(i-d)*c);L(a,(g+e)*b,(i-d)*c,(g+d)*b,(i-e)*c,(g+d)*b,i*c);L(a,(g+d)*b,(i+e)*c,(g+e)*b,(i+d)*c,g*b,(i+d)*c);L(a,(g-e)*b,(i+d)*c,(g-d)*b,(i+e)*c,(g-d)*b,i*c);b=a.q;b.v=new H(0.4,0.25);b.w=new H(0.65,0.75);return b},XorGate:function(a,b,c){var a=new J,d=0.5*hc;K(a,0.1*b,0,q);L(a,0.35*b,0.25*c,0.35*b,0.75*c,0.1*b,1*c);K(a,0.2*b,0,h);L(a,(0.2+d)*b,0*c,0.9*b,(0.5-d)*c,1*b,0.5*c);L(a,0.9*b,(0.5+d)*c,(0.2+d)*b,1*c,0.2*b,1*c);L(a,0.45*b,0.75*c,0.45*b,
0.25*c,0.2*b,0);Dd(a);b=a.q;b.v=new H(0.4,0.25);b.w=new H(0.8,0.75);return b},Capacitor:function(a,b,c){a=new J;K(a,0,0,q);a.lineTo(0,1*c);a.moveTo(1*b,0);a.lineTo(1*b,1*c);return a.q},Resistor:function(a,b,c){a=new J;K(a,0,0.5*c,q);a.lineTo(0.1*b,0);a.lineTo(0.2*b,1*c);a.lineTo(0.3*b,0);a.lineTo(0.4*b,1*c);a.lineTo(0.5*b,0);a.lineTo(0.6*b,1*c);a.lineTo(0.7*b,0.5*c);return a.q},Inductor:function(a,b,c){var a=new J,d=0.1*hc,e=0.1,g=0.5;K(a,(e-0.5*d)*b,(g+0.1)*c,q);L(a,(e-d)*b,(g+0.1)*c,(e-0.1)*b,(g+
d)*c,(e+0.1)*b,(g+d)*c);e=0.3;g=0.5;L(a,(e+0.1)*b,(g+d)*c,(e+d)*b,(g+0.1)*c,e*b,(g+0.1)*c);L(a,(e-d)*b,(g+0.1)*c,(e-0.1)*b,(g+d)*c,(e+0.1)*b,(g+d)*c);g=e=0.5;L(a,(e+0.1)*b,(g+d)*c,(e+d)*b,(g+0.1)*c,e*b,(g+0.1)*c);L(a,(e-d)*b,(g+0.1)*c,(e-0.1)*b,(g+d)*c,(e+0.1)*b,(g+d)*c);e=0.7;g=0.5;L(a,(e+0.1)*b,(g+d)*c,(e+d)*b,(g+0.1)*c,e*b,(g+0.1)*c);L(a,(e-d)*b,(g+0.1)*c,(e-0.1)*b,(g+d)*c,(e+0.1)*b,(g+d)*c);e=0.9;g=0.5;L(a,(e+0.1)*b,(g+d)*c,(e+d)*b,(g+0.1)*c,(e+0.5*d)*b,(g+0.1)*c);return a.q},ACvoltageSource:function(a,
b,c){var a=new J,d=0.5*hc;K(a,0*b,0.5*c,q);L(a,0*b,(0.5-d)*c,(0.5-d)*b,0*c,0.5*b,0*c);L(a,(0.5+d)*b,0*c,1*b,(0.5-d)*c,1*b,0.5*c);L(a,1*b,(0.5+d)*c,(0.5+d)*b,1*c,0.5*b,1*c);L(a,(0.5-d)*b,1*c,0*b,(0.5+d)*c,0*b,0.5*c);a.moveTo(0.1*b,0.5*c);L(a,0.5*b,0*c,0.5*b,1*c,0.9*b,0.5*c);b=a.q;b.$b=dh;return b},DCvoltageSource:function(a,b,c){a=new J;K(a,0,0.75*c,q);a.lineTo(0,0.25*c);a.moveTo(1*b,0);a.lineTo(1*b,1*c);return a.q},Diode:function(a,b,c){a=new J;K(a,1*b,0,q);a.lineTo(1*b,0.5*c);a.lineTo(0,1*c);a.lineTo(0,
0);a.lineTo(1*b,0.5*c);a.lineTo(1*b,1*c);b=a.q;b.v=new H(0,0.25);b.w=new H(0.5,0.75);return b},Wifi:function(a,b,c){var d=b,e=c,b=0.38*b,c=0.6*c,a=new J,g=0.8*hc,i=0.8,j=0,k=0.5,d=(d-b)/2,e=(e-c)/2;K(a,j*b+d,(k+i)*c+e,h);L(a,(j-g)*b+d,(k+i)*c+e,(j-i)*b+d,(k+g)*c+e,(j-i)*b+d,k*c+e);L(a,(j-i)*b+d,(k-g)*c+e,(j-g)*b+d,(k-i)*c+e,j*b+d,(k-i)*c+e);L(a,j*b+d,(k-i)*c+e,(j-i+0.5*g)*b+d,(k-g)*c+e,(j-i+0.5*g)*b+d,k*c+e);L(a,(j-i+0.5*g)*b+d,(k+g)*c+e,j*b+d,(k+i)*c+e,j*b+d,(k+i)*c+e);Dd(a);g=0.4*hc;i=0.4;j=0.2;
k=0.5;K(a,j*b+d,(k+i)*c+e,h);L(a,(j-g)*b+d,(k+i)*c+e,(j-i)*b+d,(k+g)*c+e,(j-i)*b+d,k*c+e);L(a,(j-i)*b+d,(k-g)*c+e,(j-g)*b+d,(k-i)*c+e,j*b+d,(k-i)*c+e);L(a,j*b+d,(k-i)*c+e,(j-i+0.5*g)*b+d,(k-g)*c+e,(j-i+0.5*g)*b+d,k*c+e);L(a,(j-i+0.5*g)*b+d,(k+g)*c+e,j*b+d,(k+i)*c+e,j*b+d,(k+i)*c+e);Dd(a);g=0.2*hc;i=0.2;k=j=0.5;K(a,(j-i)*b+d,k*c+e,h);L(a,(j-i)*b+d,(k-g)*c+e,(j-g)*b+d,(k-i)*c+e,j*b+d,(k-i)*c+e);L(a,(j+g)*b+d,(k-i)*c+e,(j+i)*b+d,(k-g)*c+e,(j+i)*b+d,k*c+e);L(a,(j+i)*b+d,(k+g)*c+e,(j+g)*b+d,(k+i)*c+e,
j*b+d,(k+i)*c+e);L(a,(j-g)*b+d,(k+i)*c+e,(j-i)*b+d,(k+g)*c+e,(j-i)*b+d,k*c+e);g=0.4*hc;i=0.4;j=0.8;k=0.5;K(a,j*b+d,(k-i)*c+e,h);L(a,(j+g)*b+d,(k-i)*c+e,(j+i)*b+d,(k-g)*c+e,(j+i)*b+d,k*c+e);L(a,(j+i)*b+d,(k+g)*c+e,(j+g)*b+d,(k+i)*c+e,j*b+d,(k+i)*c+e);L(a,j*b+d,(k+i)*c+e,(j+i-0.5*g)*b+d,(k+g)*c+e,(j+i-0.5*g)*b+d,k*c+e);L(a,(j+i-0.5*g)*b+d,(k-g)*c+e,j*b+d,(k-i)*c+e,j*b+d,(k-i)*c+e);Dd(a);g=0.8*hc;i=0.8;j=1;k=0.5;K(a,j*b+d,(k-i)*c+e,h);L(a,(j+g)*b+d,(k-i)*c+e,(j+i)*b+d,(k-g)*c+e,(j+i)*b+d,k*c+e);L(a,
(j+i)*b+d,(k+g)*c+e,(j+g)*b+d,(k+i)*c+e,j*b+d,(k+i)*c+e);L(a,j*b+d,(k+i)*c+e,(j+i-0.5*g)*b+d,(k+g)*c+e,(j+i-0.5*g)*b+d,k*c+e);L(a,(j+i-0.5*g)*b+d,(k-g)*c+e,j*b+d,(k-i)*c+e,j*b+d,(k-i)*c+e);Dd(a);return a.q},Email:function(a,b,c){a=new J;K(a,0,0,h);a.lineTo(1*b,0);a.lineTo(1*b,1*c);a.lineTo(0,1*c);a.lineTo(0,0);Dd(a);K(a,0,0,q);a.lineTo(0.5*b,0.6*c);a.lineTo(1*b,0);a.moveTo(0,1*c);a.lineTo(0.45*b,0.54*c);a.moveTo(1*b,1*c);a.lineTo(0.55*b,0.54*c);Ed(a);return a.q},Ethernet:function(a,b,c){a=new J;K(a,
0.35*b,0,h);a.lineTo(0.65*b,0);a.lineTo(0.65*b,0.4*c);a.lineTo(0.35*b,0.4*c);a.lineTo(0.35*b,0);Dd(a);K(a,0.1*b,1*c,h,h);a.lineTo(0.4*b,1*c);a.lineTo(0.4*b,0.6*c);a.lineTo(0.1*b,0.6*c);a.lineTo(0.1*b,1*c);Dd(a);K(a,0.6*b,1*c,h,h);a.lineTo(0.9*b,1*c);a.lineTo(0.9*b,0.6*c);a.lineTo(0.6*b,0.6*c);a.lineTo(0.6*b,1*c);Dd(a);K(a,0,0.5*c,q);a.lineTo(1*b,0.5*c);a.moveTo(0.5*b,0.5*c);a.lineTo(0.5*b,0.4*c);a.moveTo(0.75*b,0.5*c);a.lineTo(0.75*b,0.6*c);a.moveTo(0.25*b,0.5*c);a.lineTo(0.25*b,0.6*c);Ed(a);return a.q},
Power:function(a,b,c){var a=new J,d=0.4*hc,e=0.4,g=new F(0,0),i=new F(0,0),j=new F(0,0),k=new F(0,0);new F(0,0);ql(0.5,0.5-e,0.5+d,0.5-e,0.5+e,0.5-d,0.5+e,0.5,0.5,g,g,i,j,k);new F(i.x,i.y);K(a,i.x*b,i.y*c,h);L(a,j.x*b,j.y*c,k.x*b,k.y*c,(0.5+e)*b,0.5*c);L(a,(0.5+e)*b,(0.5+d)*c,(0.5+d)*b,(0.5+e)*c,0.5*b,(0.5+e)*c);L(a,(0.5-d)*b,(0.5+e)*c,(0.5-e)*b,(0.5+d)*c,(0.5-e)*b,0.5*c);ql(0.5-e,0.5,0.5-e,0.5-d,0.5-d,0.5-e,0.5,0.5-e,0.5,j,k,i,g,g);L(a,j.x*b,j.y*c,k.x*b,k.y*c,i.x*b,i.y*c);d=0.3*hc;e=0.3;ql(0.5-e,
0.5,0.5-e,0.5-d,0.5-d,0.5-e,0.5,0.5-e,0.5,j,k,i,g,g);a.lineTo(i.x*b,i.y*c);L(a,k.x*b,k.y*c,j.x*b,j.y*c,(0.5-e)*b,0.5*c);L(a,(0.5-e)*b,(0.5+d)*c,(0.5-d)*b,(0.5+e)*c,0.5*b,(0.5+e)*c);L(a,(0.5+d)*b,(0.5+e)*c,(0.5+e)*b,(0.5+d)*c,(0.5+e)*b,0.5*c);ql(0.5,0.5-e,0.5+d,0.5-e,0.5+e,0.5-d,0.5+e,0.5,0.5,g,g,i,j,k);L(a,k.x*b,k.y*c,j.x*b,j.y*c,i.x*b,i.y*c);Dd(a);K(a,0.45*b,0,h);a.lineTo(0.45*b,0.5*c);a.lineTo(0.55*b,0.5*c);a.lineTo(0.55*b,0);Dd(a);b=a.q;b.v=new H(0.25,0.55);b.w=new H(0.75,0.8);return b},Fallout:function(a,
b,c){var a=new J,d=0.5*hc;K(a,0*b,0.5*c,h);L(a,0*b,(0.5-d)*c,(0.5-d)*b,0*c,0.5*b,0*c);L(a,(0.5+d)*b,0*c,1*b,(0.5-d)*c,1*b,0.5*c);L(a,1*b,(0.5+d)*c,(0.5+d)*b,1*c,0.5*b,1*c);L(a,(0.5-d)*b,1*c,0*b,(0.5+d)*c,0*b,0.5*c);var e=d=0;K(a,(0.3+d)*b,(0.8+e)*c,h,h);a.lineTo((0.5+d)*b,(0.5+e)*c);a.lineTo((0.1+d)*b,(0.5+e)*c);a.lineTo((0.3+d)*b,(0.8+e)*c);d=0.4;e=0;Dd(a);K(a,(0.3+d)*b,(0.8+e)*c,h,h);a.lineTo((0.5+d)*b,(0.5+e)*c);a.lineTo((0.1+d)*b,(0.5+e)*c);a.lineTo((0.3+d)*b,(0.8+e)*c);d=0.2;e=-0.3;Dd(a);K(a,
(0.3+d)*b,(0.8+e)*c,h,h);a.lineTo((0.5+d)*b,(0.5+e)*c);a.lineTo((0.1+d)*b,(0.5+e)*c);a.lineTo((0.3+d)*b,(0.8+e)*c);Dd(a);b=a.q;b.$b=dh;return b},IrritationHazard:function(a,b,c){a=new J;K(a,0.2*b,0*c,h);a.lineTo(0.5*b,0.3*c);a.lineTo(0.8*b,0*c);a.lineTo(1*b,0.2*c);a.lineTo(0.7*b,0.5*c);a.lineTo(1*b,0.8*c);a.lineTo(0.8*b,1*c);a.lineTo(0.5*b,0.7*c);a.lineTo(0.2*b,1*c);a.lineTo(0*b,0.8*c);a.lineTo(0.3*b,0.5*c);a.lineTo(0*b,0.2*c);Dd(a);b=a.q;b.v=new H(0.3,0.3);b.w=new H(0.7,0.7);return b},ElectricalHazard:function(a,
b,c){a=new J;K(a,0.37,0*c,h);a.lineTo(0.5*b,0.11*c);a.lineTo(0.77*b,0.04*c);a.lineTo(0.33*b,0.49*c);a.lineTo(1*b,0.37*c);a.lineTo(0.63*b,0.86*c);a.lineTo(0.77*b,0.91*c);a.lineTo(0.34*b,1*c);a.lineTo(0.34*b,0.78*c);a.lineTo(0.44*b,0.8*c);a.lineTo(0.65*b,0.56*c);a.lineTo(0*b,0.68*c);Dd(a);return a.q},FireHazard:function(a,b,c){a=new J;K(a,0.1*b,1*c,h);L(a,-0.25*b,0.63*c,0.45*b,0.44*c,0.29*b,0*c);L(a,0.48*b,0.17*c,0.54*b,0.35*c,0.51*b,0.42*c);L(a,0.59*b,0.29*c,0.58*b,0.28*c,0.59*b,0.18*c);L(a,0.8*b,
0.34*c,0.88*b,0.43*c,0.75*b,0.6*c);L(a,0.87*b,0.48*c,0.88*b,0.43*c,0.88*b,0.31*c);L(a,1.17*b,0.76*c,0.82*b,0.8*c,0.9*b,1*c);Dd(a);b=a.q;b.v=new H(0.05,0.645);b.w=new H(0.884,0.908);return b},BpmnActivityLoop:function(a,b,c){var a=new J,d=0.5*(4*(Math.SQRT2-1)/3);K(a,(0.5*Math.SQRT2/2+0.5)*b,(1-(0.5-0.5*Math.SQRT2/2))*c,q);L(a,1*b,0.7*c,1*b,0.5*c,1*b,0.5*c);L(a,1*b,(0.5-d+0)*c,(0.5+d+0)*b,0*c,0.5*b,0*c);L(a,(0.5-d+0)*b,0*c,0*b,(0.5-d+0)*c,0*b,0.5*c);L(a,0*b,(0.5+d+0)*c,(0.5-d+0)*b,1*c,0.35*b,0.98*
c);a.moveTo(0.35*b,0.8*c);a.lineTo(0.35*b,1*c);a.lineTo(0.15*b,1*c);return a.q},BpmnActivityParallel:function(a,b,c){a=new J;K(a,0,0,q);a.lineTo(0,1*c);a.moveTo(0.5*b,0);a.lineTo(0.5*b,1*c);a.moveTo(1*b,0);a.lineTo(1*b,1*c);return a.q},BpmnActivitySequential:function(a,b,c){a=new J;K(a,0,0,q);a.lineTo(1*b,0);a.moveTo(0,0.5*c);a.lineTo(1*b,0.5*c);a.moveTo(0,1*c);a.lineTo(1*b,1*c);return a.q},BpmnActivityAdHoc:function(a,b,c){a=new J;K(a,0,0,q);K(a,1*b,1*c,q);K(a,0,0.5*c,q);L(a,0.2*b,0.35*c,0.3*b,0.35*
c,0.5*b,0.5*c);L(a,0.7*b,0.65*c,0.8*b,0.65*c,1*b,0.5*c);return a.q},BpmnActivityCompensation:function(a,b,c){a=new J;K(a,0,0.5*c,h);a.lineTo(0.5*b,0);a.lineTo(0.5*b,0.5*c);a.lineTo(1*b,1*c);a.lineTo(1*b,0);a.lineTo(0.5*b,0.5*c);a.lineTo(0.5*b,1*c);Dd(a);return a.q},BpmnTaskMessage:function(a,b,c){a=new J;K(a,0,0.2*c,h);a.lineTo(1*b,0.2*c);a.lineTo(1*b,0.8*c);a.lineTo(0,0.8*c);a.lineTo(0,0.8*c);Dd(a);K(a,0,0.2*c,q);a.lineTo(0.5*b,0.5*c);a.lineTo(1*b,0.2*c);Ed(a);return a.q},BpmnTaskScript:function(a,
b,c){a=new J;K(a,0.7*b,1*c,h);a.lineTo(0.3*b,1*c);L(a,0.6*b,0.5*c,0,0.5*c,0.3*b,0);a.lineTo(0.7*b,0);L(a,0.4*b,0.5*c,1*b,0.5*c,0.7*b,1*c);Dd(a);K(a,0.45*b,0.73*c,q);a.lineTo(0.7*b,0.73*c);a.moveTo(0.38*b,0.5*c);a.lineTo(0.63*b,0.5*c);a.moveTo(0.31*b,0.27*c);a.lineTo(0.56*b,0.27*c);Ed(a);return a.q},BpmnTaskUser:function(a,b,c){a=new J;K(a,0,0,q);K(a,0.335*b,(1-0.555)*c,h);a.lineTo(0.335*b,0.595*c);a.lineTo(0.665*b,0.595*c);a.lineTo(0.665*b,(1-0.555)*c);L(a,0.88*b,0.46*c,0.98*b,0.54*c,1*b,0.68*c);
a.lineTo(1*b,1*c);a.lineTo(0,1*c);a.lineTo(0,0.68*c);L(a,0.02*b,0.54*c,0.12*b,0.46*c,0.335*b,(1-0.555)*c);a.lineTo(0.365*b,0.405*c);var d=0.5-0.285,e=Math.PI/4,g=4*(1-Math.cos(e))/(3*Math.sin(e)),e=g*d,g=g*d;L(a,(0.5-(e+d)/2)*b,(d+(d+g)/2)*c,(0.5-d)*b,(d+g)*c,(0.5-d)*b,d*c);L(a,(0.5-d)*b,(d-g)*c,(0.5-e)*b,(d-d)*c,0.5*b,(d-d)*c);L(a,(0.5+e)*b,(d-d)*c,(0.5+d)*b,(d-g)*c,(0.5+d)*b,d*c);L(a,(0.5+d)*b,(d+g)*c,(0.5+(e+d)/2)*b,(d+(d+g)/2)*c,0.635*b,0.405*c);a.lineTo(0.635*b,0.405*c);a.lineTo(0.665*b,(1-0.555)*
c);a.lineTo(0.665*b,0.595*c);a.lineTo(0.335*b,0.595*c);K(a,0.2*b,1*c,q);a.lineTo(0.2*b,0.8*c);K(a,0.8*b,1*c,q);a.lineTo(0.8*b,0.8*c);return a.q},BpmnEventConditional:function(a,b,c){a=new J;K(a,0.1*b,0,h);a.lineTo(0.9*b,0);a.lineTo(0.9*b,1*c);a.lineTo(0.1*b,1*c);Dd(a);K(a,0.2*b,0.2*c,q);a.lineTo(0.8*b,0.2*c);a.moveTo(0.2*b,0.4*c);a.lineTo(0.8*b,0.4*c);a.moveTo(0.2*b,0.6*c);a.lineTo(0.8*b,0.6*c);a.moveTo(0.2*b,0.8*c);a.lineTo(0.8*b,0.8*c);Ed(a);return a.q},BpmnEventError:function(a,b,c){a=new J;K(a,
0,1*c,h);a.lineTo(0.33*b,0);a.lineTo(0.66*b,0.5*c);a.lineTo(1*b,0);a.lineTo(0.66*b,1*c);a.lineTo(0.33*b,0.5*c);Dd(a);return a.q},BpmnEventEscalation:function(a,b,c){a=new J;K(a,0,0,q);K(a,1*b,1*c,q);K(a,0.1*b,1*c,h);a.lineTo(0.5*b,0);a.lineTo(0.9*b,1*c);a.lineTo(0.5*b,0.5*c);Dd(a);return a.q},BpmnEventTimer:function(a,b,c){var a=new J,d=0.5*hc;K(a,1*b,0.5*c,h);L(a,1*b,(0.5+d)*c,(0.5+d)*b,1*c,0.5*b,1*c);L(a,(0.5-d)*b,1*c,0,(0.5+d)*c,0,0.5*c);L(a,0,(0.5-d)*c,(0.5-d)*b,0,0.5*b,0);L(a,(0.5+d)*b,0,1*b,
(0.5-d)*c,1*b,0.5*c);K(a,0.5*b,0,q);a.lineTo(0.5*b,0.15*c);a.moveTo(0.5*b,1*c);a.lineTo(0.5*b,0.85*c);a.moveTo(0,0.5*c);a.lineTo(0.15*b,0.5*c);a.moveTo(1*b,0.5*c);a.lineTo(0.85*b,0.5*c);a.moveTo(0.5*b,0.5*c);a.lineTo(0.58*b,0.1*c);a.moveTo(0.5*b,0.5*c);a.lineTo(0.78*b,0.54*c);Ed(a);b=a.q;b.$b=dh;return b}},vl;for(vl in bl)bl[vl.toLowerCase()]=vl;
var wl={Standard:"F1 m 0,0 l 8,4 -8,4 2,-4 z",Backward:"F1 m 8,0 l -2,4 2,4 -8,-4 z",Triangle:"F1 m 0,0 l 8,4.62 -8,4.62 z",BackwardTriangle:"F1 m 8,4 l 0,4 -8,-4 8,-4 0,4 z",Boomerang:"F1 m 0,0 l 8,4 -8,4 4,-4 -4,-4 z",BackwardBoomerang:"F1 m 8,0 l -8,4 8,4 -4,-4 4,-4 z",SidewaysV:"m 0,0 l 8,4 -8,4 0,-1 6,-3 -6,-3 0,-1 z",BackwardV:"m 8,0 l -8,4 8,4 0,-1 -6,-3 6,-3 0,-1 z",OpenTriangle:"m 0,0 l 8,4 -8,4",BackwardOpenTriangle:"m 8,0 l -8,4 8,4",OpenTriangleLine:"m 0,0 l 8,4 -8,4 m 8.5,0 l 0,-8",BackwardOpenTriangleLine:"m 8,0 l  -8,4 8,4 m -8.5,0 l 0,-8",
OpenTriangleTop:"m 0,0 l 8,4 m 0,4",BackwardOpenTriangleTop:"m 8,0 l -8,4 m 0,4",OpenTriangleBottom:"m 0,8 l 8,-4",BackwardOpenTriangleBottom:"m 0,4 l 8,4",HalfTriangleTop:"F1 m 0,0 l 0,4 8,0 z m 0,8",BackwardHalfTriangleTop:"F1 m 8,0 l 0,4 -8,0 z m 0,8",HalfTriangleBottom:"F1 m 0,4 l 0,4 8,-4 z",BackwardHalfTriangleBottom:"F1 m 8,4 l 0,4 -8,-4 z",ForwardSemiCircle:"m 4,0 b 270 180 0 4 4",BackwardSemiCircle:"m 4,8 b 90 180 0 -4 4",Feather:"m 0,0 l 3,4 -3,4",BackwardFeather:"m 3,0 l -3,4 3,4",DoubleFeathers:"m 0,0 l 3,4 -3,4 m 3,-8 l 3,4 -3,4",
BackwardDoubleFeathers:"m 3,0 l -3,4 3,4 m 3,-8 l -3,4 3,4",TripleFeathers:"m 0,0 l 3,4 -3,4 m 3,-8 l 3,4 -3,4 m 3,-8 l 3,4 -3,4",BackwardTripleFeathers:"m 3,0 l -3,4 3,4 m 3,-8 l -3,4 3,4 m 3,-8 l -3,4 3,4",ForwardSlash:"m 0,8 l 5,-8",BackSlash:"m 0,0 l 5,8",DoubleForwardSlash:"m 0,8 l 4,-8 m -2,8 l 4,-8",DoubleBackSlash:"m 0,0 l 4,8 m -2,-8 l 4,8",TripleForwardSlash:"m 0,8 l 4,-8 m -2,8 l 4,-8 m -2,8 l 4,-8",TripleBackSlash:"m 0,0 l 4,8 m -2,-8 l 4,8 m -2,-8 l 4,8",Fork:"m 0,4 l 8,0 m -8,0 l 8,-4 m -8,4 l 8,4",
BackwardFork:"m 8,4 l -8,0 m 8,0 l -8,-4 m 8,4 l -8,4",LineFork:"m 0,0 l 0,8 m 0,-4 l 8,0 m -8,0 l 8,-4 m -8,4 l 8,4",BackwardLineFork:"m 8,4 l -8,0 m 8,0 l -8,-4 m 8,4 l -8,4 m 8,-8 l 0,8",CircleFork:"F1 m 6,4 b 0 360 -3 0 3 z m 0,0 l 6,0 m -6,0 l 6,-4 m -6,4 l 6,4",BackwardCircleFork:"F1 m 0,4 l 6,0 m -6,-4 l 6,4 m -6,4 l 6,-4 m 6,0 b 0 360 -3 0 3",CircleLineFork:"F1 m 6,4 b 0 360 -3 0 3 z m 1,-4 l 0,8 m 0,-4 l 6,0 m -6,0 l 6,-4 m -6,4 l 6,4",BackwardCircleLineFork:"F1 m 0,4 l 6,0 m -6,-4 l 6,4 m -6,4 l 6,-4 m 0,-4 l 0,8 m 7,-4 b 0 360 -3 0 3",
Circle:"F1 m 8,4 b 0 360 -4 0 4 z",Block:"F1 m 0,0 l 0,8 8,0 0,-8 z",StretchedDiamond:"F1 m 0,3 l 5,-3 5,3 -5,3 -5,-3 z",Diamond:"F1 m 0,4 l 4,-4 4,4 -4,4 -4,-4 z",Chevron:"F1 m 0,0 l 5,0 3,4 -3,4 -5,0 3,-4 -3,-4 z",StretchedChevron:"F1 m 0,0 l 8,0 3,4 -3,4 -8,0 3,-4 -3,-4 z",NormalArrow:"F1 m 0,2 l 4,0 0,-2 4,4 -4,4 0,-2 -4,0 z",X:"m 0,0 l 8,8 m 0,-8 l -8,8",TailedNormalArrow:"F1 m 0,0 l 2,0 1,2 3,0 0,-2 2,4 -2,4 0,-2 -3,0 -1,2 -2,0 1,-4 -1,-4 z",DoubleTriangle:"F1 m 0,0 l 4,4 -4,4 0,-8 z  m 4,0 l 4,4 -4,4 0,-8 z",
BigEndArrow:"F1 m 0,0 l 5,2 0,-2 3,4 -3,4 0,-2 -5,2 0,-8 z",ConcaveTailArrow:"F1 m 0,2 h 4 v -2 l 4,4 -4,4 v -2 h -4 l 2,-2 -2,-2 z",RoundedTriangle:"F1 m 0,1 a 1,1 0 0 1 1,-1 l 7,3 a 0.5,1 0 0 1 0,2 l -7,3 a 1,1 0 0 1 -1,-1 l 0,-6 z",SimpleArrow:"F1 m 1,2 l -1,-2 2,0 1,2 -1,2 -2,0 1,-2 5,0 0,-2 2,2 -2,2 0,-2 z",AccelerationArrow:"F1 m 0,0 l 0,8 0.2,0 0,-8 -0.2,0 z m 2,0 l 0,8 1,0 0,-8 -1,0 z m 3,0 l 2,0 2,4 -2,4 -2,0 0,-8 z",BoxArrow:"F1 m 0,0 l 4,0 0,2 2,0 0,-2 2,4 -2,4 0,-2 -2,0 0,2 -4,0 0,-8 z",
TriangleLine:"F1 m 8,4 l -8,-4 0,8 8,-4 z m 0.5,4 l 0,-8",CircleEndedArrow:"F1 m 10,4 l -2,-3 0,2 -2,0 0,2 2,0 0,2 2,-3 z m -4,0 b 0 360 -3 0 3 z",DynamicWidthArrow:"F1 m 0,3 l 2,0 2,-1 2,-2 2,4 -2,4 -2,-2 -2,-1 -2,0 0,-2 z",EquilibriumArrow:"m 0,3 l 8,0 -3,-3 m 3,5 l -8,0 3,3",FastForward:"F1 m 0,0 l 3.5,4 0,-4 3.5,4 0,-4 1,0 0,8 -1,0 0,-4 -3.5,4 0,-4 -3.5,4 0,-8 z",Kite:"F1 m 0,4 l 2,-4 6,4 -6,4 -2,-4 z",HalfArrowTop:"F1 m 0,0 l 4,4 4,0 -8,-4 z m 0,8",HalfArrowBottom:"F1 m 0,8 l 4,-4 4,0 -8,4 z",
OpposingDirectionDoubleArrow:"F1 m 0,4 l 2,-4 0,2 4,0 0,-2 2,4 -2,4 0,-2 -4,0 0,2 -2,-4 z",PartialDoubleTriangle:"F1 m 0,0 4,3 0,-3 4,4 -4,4 0,-3 -4,3 0,-8 z",LineCircle:"F1 m 0,0 l 0,8 m 7 -4 b 0 360 -3 0 3 z",DoubleLineCircle:"F1 m 0,0 l 0,8 m 2,-8 l 0,8 m 7 -4 b 0 360 -3 0 3 z",TripleLineCircle:"F1 m 0,0 l 0,8 m 2,-8 l 0,8 m 2,-8 l 0,8 m 7 -4 b 0 360 -3 0 3 z",CircleLine:"F1 m 6 4 b 0 360 -3 0 3 z m 1,-4 l 0,8",DiamondCircle:"F1 m 8,4 l -4,4 -4,-4 4,-4 4,4 m 8,0 b 0 360 -4 0 4 z",PlusCircle:"F1 m 8,4 b 0 360 -4 0 4 l -8 0 z m -4 -4 l 0 8",
OpenRightTriangleTop:"m 8,0 l 0,4 -8,0 m 0,4",OpenRightTriangleBottom:"m 8,8 l 0,-4 -8,0",Line:"m 0,0 l 0,8",DoubleLine:"m 0,0 l 0,8 m 2,0 l 0,-8",TripleLine:"m 0,0 l 0,8 m 2,0 l 0,-8 m 2,0 l 0,8",PentagonArrow:"F1 m 8,4 l -4,-4 -4,0 0,8 4,0 4,-4 z",None:""},$k,xl={},yl;for(yl in bl){var Dl=bl[yl];"string"===typeof Dl&&(Dl=bl[Dl]);"string"===typeof Dl&&(Dl=bl[Dl]);Dl&&(xl[yl]=Dl(n,100,100));xl[yl].ne()}$k=xl;var El={};
function al(a){if(wl){for(var b in wl){var c=zd(wl[b],q);El[b]=c;El[b.toLowerCase()]=b}wl=f}return El[a]}V.FigureGenerators=bl;V.ArrowheadGeometries=El;
function R(a){0===arguments.length?x.call(this):x.call(this,a);this.Sm=this.Oi="";this.Tp=n;this.xq=this.oq=this.Bp=this.er=this.ip=this.Wo=h;this.Iq=this.Dq=this.Cq=q;this.en=h;this.Vq="";this.Sq=h;this.Ak=this.Jq=this.Eq=this.Tq=n;this.Dt=q;this.Ki=this.Uq=n;this.Gq="";this.Dl=n;this.Fq=(new cb(NaN,NaN)).freeze();this.Kq="";this.El=n;this.Gd="";this.Hp=h;this.G=this.Vo=this.ck=n;this.aj=(new F(NaN,NaN)).freeze();this.Lt=new F(NaN,NaN);this.bq="";this.bj=n;this.cq=Jb;this.jq=kc;this.eq=oc;this.jp=
n;this.Ip=h;this.Up=Fl;this.Hf=q;this.hn=(new F(6,6)).freeze();this.gn="gray";this.fn=4;this.YA=-1;this.Wi=h;this.fu=this.ge=q}w.P("Part",R);w.Da(R,x);
R.prototype.xb=function(a){x.prototype.xb.call(this,a);a.Oi=this.Oi;a.Sm=this.Sm;a.Tp=this.Tp;a.Wo=this.Wo;a.ip=this.ip;a.er=this.er;a.Bp=this.Bp;a.oq=this.oq;a.xq=this.xq;a.Cq=this.Cq;a.Dq=this.Dq;a.Iq=this.Iq;a.en=this.en;a.Vq=this.Vq;a.Sq=this.Sq;a.Tq=this.Tq;a.Eq=this.Eq;a.Jq=this.Jq;a.Dt=q;a.Uq=this.Uq;a.Ki=n;a.Gq=this.Gq;a.Fq.Xa(this.Fq);a.Kq=this.Kq;a.Gd=this.Gd;a.Hp=this.Hp;a.Vo=this.Vo;a.aj.Xa(this.aj);a.bq=this.bq;a.cq=this.cq.O();a.jq=this.jq.O();a.eq=this.eq.O();a.jp=this.jp;a.Ip=this.Ip;
a.Up=this.Up;a.Hf=this.Hf;a.hn.Xa(this.hn);a.gn=this.gn;a.fn=this.fn};R.prototype.xh=function(a){x.prototype.xh.call(this,a);tj(a);a.Ak=n;a.Dl=n;a.El=n;a.bj=n};R.prototype.toString=function(){var a=w.Ok(Object.getPrototypeOf(this))+"#"+w.ec(this);this.data&&(a+="("+ke(this.data)+")");return a};R.LayoutNone=0;var Li;R.LayoutAdded=Li=1;var Qi;R.LayoutRemoved=Qi=2;var Rj;R.LayoutShown=Rj=4;var Sj;R.LayoutHidden=Sj=8;R.LayoutNodeSized=16;var Xi;R.LayoutGroupLayout=Xi=32;var Fl;
R.LayoutStandard=Fl=Li|Qi|Rj|Sj|16|Xi;R.prototype.em=function(a,b,c,d,e,g,i){var j=this.h;j!==n&&(a===ie&&"elements"===b?e instanceof x&&Mi(e,e,function(a){Ni(j,a)}):a===je&&"elements"===b&&e instanceof x&&Mi(e,e,function(a){Pi(j,a)}),j.Nc(a,b,c,d,e,g,i))};R.prototype.updateTargetBindings=R.prototype.vb=function(a){x.prototype.vb.call(this,a);if(this.data!==n)for(a=this.elements;a.next();){var b=a.value;b instanceof x&&Mi(b,b,function(a){a.data!==n&&a.vb()})}};
w.u(R,{yF:"adornments"},function(){return this.Ki===n?n:this.Ki.l});R.prototype.findAdornment=R.prototype.Rn=function(a){u&&w.k(a,"string",R,"findAdornment:category");var b=this.Ki;return b===n?n:b.qa(a)};
R.prototype.addAdornment=R.prototype.vn=function(a,b){if(b!==n){u&&(w.k(a,"string",R,"addAdornment:category"),w.i(b,mf,R,"addAdornment:ad"));var c=n,d=this.Ki;d!==n&&(c=d.qa(a));if(c!==b){if(c!==n){var e=c.Ja;e!==n&&e.Kd(-1,c)}d===n&&(this.Ki=d=new la("string",mf));d.add(a,b);c=this.h;c!==n&&(d=c.Vl("Adornment"),d===n&&(d=c.Vl("")),d!==n&&(d.Qk(99999999,b),b.data=this.data))}}};
R.prototype.removeAdornment=R.prototype.gm=function(a){u&&w.k(a,"string",R,"removeAdornment:category");var b=this.Ki;if(b!==n){var c=b.qa(a);if(c!==n){var d=c.Ja;d!==n&&d.Kd(-1,c)}b.remove(a);0===b.count&&(this.Ki=n)}};R.prototype.clearAdornments=R.prototype.vh=function(){var a=this.Ki;if(a!==n){for(var b=[],a=a.l;a.next();)b.push(a.key);for(var a=b.length,c=0;c<a;c++)this.gm(b[c])}};
R.prototype.updateAdornments=R.prototype.Ji=function(){a:{var a=this.h;if(a!==n){var b=n;if(this.Qa&&this.kE){var c=this.Tv;if(this.va.T()&&c!==n&&this.nb()&&c.Sk()&&c.va.T()){b=this.Rn("Selection");if(b===n){b=this.lE;b===n&&(this instanceof U?b=a.uD:this instanceof R&&(b=this instanceof vf?a.VC:a.JD));if(!(b instanceof mf))break a;xf(b);b=b.copy();if(!(b instanceof mf))break a;b.ud="Selection";b.Bc=c}if(b!==n){a=b.placeholder;if(a!==n){var d=c.Xl(),e=0;c instanceof V&&(e=c.eb);a.wa=new cb((c.Sa.width+
e)*d,(c.Sa.height+e)*d)}b.angle=c.Un();b.type!==Rg?b.location=c.Ob(Jb):b.R()}}this.vn("Selection",b)}else this.gm("Selection")}}c=this.h;if(c!==n){c=c.Qb.Qe.n;b=c.length;for(a=0;a<b;a++)d=c[a],d.isEnabled&&d.updateAdornments(this)}};w.u(R,{Ja:"layer"},t("G"));w.u(R,{h:"diagram"},function(){var a=this.G;return a!==n?a.h:n});w.g(R,"layerName",R.prototype.Ld);
w.defineProperty(R,{Ld:"layerName"},t("Sm"),function(a){var b=this.Sm;if(b!==a){w.k(a,"string",R,"layerName");var c=this.h;if(!(c!==n&&c.Vl(a)==n)&&(this.Sm=a,this.j("layerName",b,a),b=this.Ja,b!==n&&b.name!==a&&(c=b.h,c!==n&&(a=c.Vl(a),a!==n&&a!==b)))){var d=b.Kd(-1,this,h);0<=d&&c.Nc(je,"parts",b,this,n,d,h);d=a.Qk(99999999,this,h);0<=d&&c.Nc(ie,"parts",a,n,this,h,d);d=this.bo;if(d!==n){var e=c.Ma;c.Ma=h;d(this,b,a);c.Ma=e}}}});w.g(R,"layerChanged",R.prototype.bo);
w.defineProperty(R,{bo:"layerChanged"},t("Tp"),function(a){var b=this.Tp;b!==a&&(a!==n&&w.k(a,"function",R,"layerChanged"),this.Tp=a,this.j("layerChanged",b,a))});w.g(R,"location",R.prototype.location);w.defineProperty(R,{location:"location"},t("aj"),function(a){var b=this.aj;if(!b.I(a)){u&&w.i(a,F,R,"location");this.aj=a=a.O();if(this.Ic===q){var c=this.rb,d=this.Lt,e=c.copy();c.V(a.x-d.x,a.y-d.y);c.I(e)||this.j("position",e,c);Uj(this)}this.j("location",b,a)}});
function Uj(a){if(a.Wi===q){var b=a.h;b!==n&&(b.$g.add(a),a instanceof T&&!b.sa.tb&&a.Lg(),b.yb());a.Wi=h}}function Gl(a){if(a.Wi!==q){var b=a.rb,c=a.Hb,d=c.copy();c.Ia();c.x=b.x;c.y=b.y;c.freeze();rj(a,d,c);a.Wi=q}}w.u(R,{Xb:"locationObject"},function(){if(this.bj===n){var a=this.Fv;a!==f&&a!==n&&""!==a?(a=this.Ie(a),this.bj=a!==n?a:this):this.bj=this}return this.bj.visible?this.bj:this});w.g(R,"minLocation",R.prototype.CD);
w.defineProperty(R,{CD:"minLocation"},t("jq"),function(a){var b=this.jq;b.I(a)||(u&&w.i(a,F,R,"minLocation"),this.jq=a=a.O(),this.j("minLocation",b,a))});w.g(R,"maxLocation",R.prototype.wD);w.defineProperty(R,{wD:"maxLocation"},t("eq"),function(a){var b=this.eq;b.I(a)||(u&&w.i(a,F,R,"maxLocation"),this.eq=a=a.O(),this.j("maxLocation",b,a))});w.g(R,"locationObjectName",R.prototype.Fv);
w.defineProperty(R,{Fv:"locationObjectName"},t("bq"),function(a){var b=this.bq;b!==a&&(u&&w.k(a,"string",R,"locationObjectName"),this.bq=a,this.bj=n,Aj(this),this.j("locationObjectName",b,a))});w.g(R,"locationSpot",R.prototype.Yf);w.defineProperty(R,{Yf:"locationSpot"},t("cq"),function(a){var b=this.cq;b.I(a)||(u&&(w.i(a,H,R,"locationSpot"),rb(a)||w.m("Part.locationSpot must be a specific Spot value, not: "+a)),this.cq=a=a.O(),Aj(this),this.j("locationSpot",b,a))});
R.prototype.move=R.prototype.move=function(a){this.position=a;this.Ic===q&&Gl(this)};R.prototype.isVisible=R.prototype.nb=function(){if(!this.Hg)return q;var a=this.Ja;if(a!==n&&!a.visible)return q;a=this.bb;if(a!==n&&!a.Me)return q;if(this instanceof T){a=this.JC();if(a!==n&&!a.Ne)return q;a=this.xd;if(a!==n){var b={};b[w.ec(this)]=h;return Hl(a,b)}}else if(this instanceof U){a=this.ia;if(a!==n&&Il(a)===n)return q;a=this.na;if(a!==n&&Il(a)===n)return q}return h};
function Hl(a,b){var c=a.ia;if(c!==n){var d=c.xd;if(d!==n)b[w.ec(c)]||(b[w.ec(c)]=h,Hl(d,b));else if(!c.nb())return q}c=a.na;if(c!==n)if(d=c.xd,d!==n)b[w.ec(c)]||(b[w.ec(c)]=h,Hl(d,b));else if(!c.nb())return q;return h}
function Jl(a,b,c){yb(c)&&(c=Mb);var d=b.Sa;if(b===n||b===a)return new F(d.width*c.x+c.offsetX,d.height*c.y+c.offsetY);c=new F(d.width*c.x+c.offsetX,d.height*c.y+c.offsetY);b.transform.Ta(c);for(b=b.fa;b!==n&&b!==a;)b.transform.Ta(c),b=b.fa;a.tk.Ta(c);c.offset(-a.Rc.x,-a.Rc.y);return c}R.prototype.ensureBounds=R.prototype.xi=function(){Hh(this,Infinity,Infinity);this.Cc()};
R.prototype.Cc=function(){qj(this);if(this.Ic===q){var a=this.position,b=this.location;if(!b.T()||!a.T())Kl(this,a,b),qj(this);Gl(this)}else{this instanceof mf&&(this.S!==Rg&&this.qb!==n)&&(this.bj=this.qb,a=this.Bc,this.type!==Rg&&a!==n&&(this.location=a.Ob(Jb)));var c=this.DB;c.set(this.Hb);zj(this);this.Hb.Ia();var d=this.ge;this.sj(0,0,this.Rc.width,this.Rc.height);a=this.position;b=this.location;Kl(this,a,b);b=this.Hb;b.x=a.x;b.y=a.y;b.freeze();qj(this);rj(this,c,b);c.I(b)?this.ge=d:this.Yd()&&
(!Ta(c.width,b.width)||!Ta(c.height,b.height))&&this.F(16);this.Wi=q}};function Kl(a,b,c){var d=NaN,e=NaN,g=a.Yf,e=a.Xb;yb(g)&&w.m("Spot must be real: "+g.toString());var i=e.Sa,d=a.Lt;d.hm(0,0,i.width,i.height,g);if(e!==a){e.transform.Ta(d);e.eb&&(g=e.oh/2,d.offset(-g,-g));for(e=e.fa;e!==n&&e!==a;)e.transform.Ta(d),e=e.fa}a.tk.Ta(d);d.offset(-a.Rc.x,-a.Rc.y);a=a.Lt;c.T()?(d=c.x-a.x,e=c.y-a.y,b.copy(),b.V(d,e)):b.T()&&(d=b.x,e=b.y,c.copy(),c.V(d+a.x,e+a.y))}
function Oi(a,b){a.fu=q;var c=a.h;if(c!==n){a.updateAdornments();var d=a.yF;if(d!==n){qj(a);for(zj(a);d.next();)Hh(d.value,Infinity,Infinity),d.value.Cc()}a instanceof T&&bj(c,a);!a.Ja.yc&&!b&&Ci(c);var d=a.Hb,e=c.Ua;e.T()?a.ge?d.Le(e)||(a.ge=q,Mh(c)):d.Le(e)&&(a.ge=h):c.pk=h;a.Hb.T()&&Mh(c,a.Hb)}}R.prototype.Rk=ca(h);
function Lh(a,b){if(a.Hg){var c=a.Hb;if(!(0===c.width||0===c.height||isNaN(c.x)||isNaN(c.y))){var d=a.transform,e=a.fa,g=a.rm;g.reset();e!==n&&(e.Hh()?g.multiply(e.ie):e.fa!==n&&g.multiply(e.fa.ie));g.multiply(a.Hd);a.ve!==n&&(yj(a,b,a.ve,h,h),b.fillRect(c.x,c.y,c.width,c.height));a.ve===n&&a.we===n&&(b.fillStyle="rgba(0,0,0,0.4)",b.fillRect(c.x,c.y,c.width,c.height));if(a.we!==n){d.as()||b.transform(d.m11,d.m12,d.m21,d.m22,d.dx,d.dy);var i=a.Sa,e=c=0,g=i.width,i=i.height,j=0;a instanceof V&&(i=a.Ga.Eb,
c=i.x,e=i.y,g=i.width,i=i.height,j=a.oh);yj(a,b,a.we,h);b.fillRect(c-j/2,e-j/2,g+j,i+j);d.as()||(c=1/(d.m11*d.m22-d.m12*d.m21),b.transform(d.m22*c,-d.m12*c,-d.m21*c,d.m11*c,c*(d.m21*d.dy-d.m22*d.dx),c*(d.m12*d.dx-d.m11*d.dy)))}}}}R.prototype.Yd=ca(h);w.g(R,"isInDocumentBounds",R.prototype.zv);w.defineProperty(R,{zv:"isInDocumentBounds"},t("Hp"),function(a){var b=this.Hp;b!==a&&(u&&w.k(a,"boolean",R,"isInDocumentBounds"),this.Hp=a,this.j("isInDocumentBounds",b,a))});w.g(R,"category",R.prototype.ud);
w.defineProperty(R,{ud:"category"},t("Oi"),function(a){var b=this.Oi;if(b!==a){w.k(a,"string",R,"category");this.Oi=a;this.j("category",b,a);var b=this.h,c=this.data;if(b!==n&&c!==n){var d=b.ba;this instanceof U?(d instanceof O?d.nE(c,a):d instanceof ze&&d.OH(c,a),b=b.findTemplateForLinkData(c,a),b instanceof U&&(xf(b),b=b.copy(),b instanceof U&&Ll(this,b,a))):this instanceof mf||(d!==n&&d.Uv(c,a),b=b.findTemplateForNodeData(c,a),b instanceof R&&(xf(b),b=b.copy(),b instanceof R&&Ll(this,b,a)))}}});
function Ll(a,b,c){a.vh();var d=a.data,e=a.Ld,g=a.Qa;b.xh(a);b.xb(a);a.Oi=c;a.R();vj(a);b=a.h;c=h;b!==n&&(c=b.ub,b.ub=h);a.zm=d;d!==n&&a.vb();b!==n&&(b.ub=c);d=a.Ld;d!==e&&(a.Sm=e,a.Ld=d);a.Qa=g}R.prototype.canCopy=R.prototype.EI=function(){if(!this.oC)return q;var a=this.Ja;if(a===n)return h;if(!a.pj)return q;a=a.h;return a===n?h:!a.pj?q:h};R.prototype.canDelete=R.prototype.II=function(){if(!this.yC)return q;var a=this.Ja;if(a===n)return h;if(!a.Dk)return q;a=a.h;return a===n?h:!a.Dk?q:h};
R.prototype.canEdit=R.prototype.KI=function(){if(!this.yE)return q;var a=this.Ja;if(a===n)return h;if(!a.Fn)return q;a=a.h;return a===n?h:!a.Fn?q:h};R.prototype.canGroup=R.prototype.OI=function(){if(!this.WC)return q;var a=this.Ja;if(a===n)return h;if(!a.An)return q;a=a.h;return a===n?h:!a.An?q:h};R.prototype.canMove=R.prototype.SI=function(){if(!this.FD)return q;var a=this.Ja;if(a===n)return h;if(!a.Ek)return q;a=a.h;return a===n?h:!a.Ek?q:h};
R.prototype.canPrint=R.prototype.UI=function(){if(!this.PD)return q;var a=this.Ja;if(a===n)return h;if(!a.Ar)return q;a=a.h;return a===n?h:!a.Ar?q:h};R.prototype.canReshape=R.prototype.YI=function(){if(!this.YD)return q;var a=this.Ja;if(a===n)return h;if(!a.Cn)return q;a=a.h;return a===n?h:!a.Cn?q:h};R.prototype.canResize=R.prototype.ZI=function(){if(!this.ZD)return q;var a=this.Ja;if(a===n)return h;if(!a.Dn)return q;a=a.h;return a===n?h:!a.Dn?q:h};
R.prototype.canRotate=R.prototype.$I=function(){if(!this.dE)return q;var a=this.Ja;if(a===n)return h;if(!a.En)return q;a=a.h;return a===n?h:!a.En?q:h};R.prototype.canSelect=R.prototype.Hk=function(){if(!this.Gj)return q;var a=this.Ja;if(a===n)return h;if(!a.je)return q;a=a.h;return a===n?h:!a.je?q:h};w.g(R,"copyable",R.prototype.oC);w.defineProperty(R,{oC:"copyable"},t("Wo"),function(a){var b=this.Wo;b!==a&&(u&&w.k(a,"boolean",R,"copyable"),this.Wo=a,this.j("copyable",b,a))});w.g(R,"deletable",R.prototype.yC);
w.defineProperty(R,{yC:"deletable"},t("ip"),function(a){var b=this.ip;b!==a&&(u&&w.k(a,"boolean",R,"deletable"),this.ip=a,this.j("deletable",b,a))});w.g(R,"textEditable",R.prototype.yE);w.defineProperty(R,{yE:"textEditable"},t("er"),function(a){var b=this.er;b!==a&&(u&&w.k(a,"boolean",R,"textEditable"),this.er=a,this.j("textEditable",b,a),this.updateAdornments())});w.g(R,"groupable",R.prototype.WC);
w.defineProperty(R,{WC:"groupable"},t("Bp"),function(a){var b=this.Bp;b!==a&&(u&&w.k(a,"boolean",R,"groupable"),this.Bp=a,this.j("groupable",b,a))});w.g(R,"movable",R.prototype.FD);w.defineProperty(R,{FD:"movable"},t("oq"),function(a){var b=this.oq;b!==a&&(u&&w.k(a,"boolean",R,"movable"),this.oq=a,this.j("movable",b,a))});w.g(R,"printable",R.prototype.PD);
w.defineProperty(R,{PD:"printable"},t("xq"),function(a){var b=this.xq;b!==a&&(u&&w.k(a,"boolean",R,"printable"),this.xq=a,this.j("printable",b,a))});w.g(R,"reshapable",R.prototype.YD);w.defineProperty(R,{YD:"reshapable"},t("Cq"),function(a){var b=this.Cq;b!==a&&(u&&w.k(a,"boolean",R,"reshapable"),this.Cq=a,this.j("reshapable",b,a),this.updateAdornments())});w.g(R,"resizable",R.prototype.ZD);
w.defineProperty(R,{ZD:"resizable"},t("Dq"),function(a){var b=this.Dq;b!==a&&(u&&w.k(a,"boolean",R,"resizable"),this.Dq=a,this.j("resizable",b,a),this.updateAdornments())});w.g(R,"rotatable",R.prototype.dE);w.defineProperty(R,{dE:"rotatable"},t("Iq"),function(a){var b=this.Iq;b!==a&&(u&&w.k(a,"boolean",R,"rotatable"),this.Iq=a,this.j("rotatable",b,a),this.updateAdornments())});w.g(R,"selectable",R.prototype.Gj);
w.defineProperty(R,{Gj:"selectable"},t("en"),function(a){var b=this.en;b!==a&&(u&&w.k(a,"boolean",R,"selectable"),this.en=a,this.j("selectable",b,a),this.updateAdornments())});w.g(R,"selectionObjectName",R.prototype.ws);w.defineProperty(R,{ws:"selectionObjectName"},t("Vq"),function(a){var b=this.Vq;b!==a&&(u&&w.k(a,"string",R,"selectionObjectName"),this.Vq=a,this.Ak=n,this.j("selectionObjectName",b,a))});w.g(R,"selectionAdorned",R.prototype.kE);
w.defineProperty(R,{kE:"selectionAdorned"},t("Sq"),function(a){var b=this.Sq;b!==a&&(u&&w.k(a,"boolean",R,"selectionAdorned"),this.Sq=a,this.j("selectionAdorned",b,a),this.updateAdornments())});w.g(R,"selectionAdornmentTemplate",R.prototype.lE);w.defineProperty(R,{lE:"selectionAdornmentTemplate"},t("Tq"),function(a){var b=this.Tq;b!==a&&(u&&w.i(a,mf,R,"selectionAdornmentTemplate"),this instanceof U&&(a.type=Rg),this.Tq=a,this.j("selectionAdornmentTemplate",b,a))});
w.u(R,{Tv:"selectionObject"},function(){if(this.Ak===n){var a=this.ws;a!==n&&""!==a?(a=this.Ie(a),this.Ak=a!==n?a:this):this instanceof U?(a=this.path,this.Ak=a!==n?a:this):this.Ak=this}return this.Ak});w.g(R,"isSelected",R.prototype.Qa);
w.defineProperty(R,{Qa:"isSelected"},t("Dt"),function(a){var b=this.Dt;if(b!==a){u&&w.k(a,"boolean",R,"isSelected");var c=this.h;if(!a||this.Hk()&&!(c!==n&&c.selection.count>=c.xD)){this.Dt=a;var d=q;if(c!==n){d=c.ub;c.ub=h;var e=c.selection;e.Ia();a?e.add(this):e.remove(this);e.freeze()}this.j("isSelected",b,a);this.updateAdornments();a=this.mE;a!==n&&a(this);c!==n&&(c.yb(),c.ub=d)}}});w.g(R,"selectionChanged",R.prototype.mE);
w.defineProperty(R,{mE:"selectionChanged"},t("Uq"),function(a){var b=this.Uq;b!==a&&(a!==n&&w.k(a,"function",R,"selectionChanged"),this.Uq=a,this.j("selectionChanged",b,a))});w.g(R,"resizeAdornmentTemplate",R.prototype.$D);w.defineProperty(R,{$D:"resizeAdornmentTemplate"},t("Eq"),function(a){var b=this.Eq;b!==a&&(u&&w.i(a,mf,R,"resizeAdornmentTemplate"),this.Eq=a,this.j("resizeAdornmentTemplate",b,a))});w.g(R,"resizeObjectName",R.prototype.bE);
w.defineProperty(R,{bE:"resizeObjectName"},t("Gq"),function(a){var b=this.Gq;b!==a&&(u&&w.k(a,"string",R,"resizeObjectName"),this.Gq=a,this.Dl=n,this.j("resizeObjectName",b,a))});w.u(R,{GH:"resizeObject"},function(){if(this.Dl===n){var a=this.bE;a!==n&&""!==a?(a=this.Ie(a),this.Dl=a!==n?a:this):this.Dl=this}return this.Dl});w.g(R,"resizeCellSize",R.prototype.aE);
w.defineProperty(R,{aE:"resizeCellSize"},t("Fq"),function(a){var b=this.Fq;b.I(a)||(u&&w.i(a,cb,R,"resizeCellSize"),this.Fq=a=a.O(),this.j("resizeCellSize",b,a))});w.g(R,"rotateAdornmentTemplate",R.prototype.eE);w.defineProperty(R,{eE:"rotateAdornmentTemplate"},t("Jq"),function(a){var b=this.Jq;b!==a&&(u&&w.i(a,mf,R,"rotateAdornmentTemplate"),this.Jq=a,this.j("rotateAdornmentTemplate",b,a))});w.g(R,"rotateObjectName",R.prototype.fE);
w.defineProperty(R,{fE:"rotateObjectName"},t("Kq"),function(a){var b=this.Kq;b!==a&&(u&&w.k(a,"string",R,"rotateObjectName"),this.Kq=a,this.El=n,this.j("rotateObjectName",b,a))});w.u(R,{KH:"rotateObject"},function(){if(this.El===n){var a=this.fE;a!==n&&""!==a?(a=this.Ie(a),this.El=a!==n?a:this):this.El=this}return this.El});w.g(R,"text",R.prototype.text);w.defineProperty(R,{text:"text"},t("Gd"),function(a){var b=this.Gd;b!==a&&(u&&w.k(a,"string",R,"text"),this.Gd=a,this.j("text",b,a))});
w.g(R,"containingGroup",R.prototype.bb);
w.defineProperty(R,{bb:"containingGroup"},t("ck"),function(a){if(this.Yd()){var b=this.ck;if(b!==a){u&&a!==n&&w.i(a,vf,R,"containingGroup");if(a!==n&&(this===a||a.bs(this)))this===a&&w.m("Cannot make a Group a member of itself: "+this.toString()),w.m("Cannot make a Group indirectly contain itself: "+this.toString()+" already contains "+a.toString());this.F(Qi);var c=this.h;b!==n?Ml(b,this):this instanceof vf&&c!==n&&c.Gl.remove(this);this.ck=a;a!==n?Nl(a,this):this instanceof vf&&c!==n&&c.Gl.add(this);
this.F(Li);if(c!==n){var d=this.data,e=c.ba;d!==n&&e instanceof O&&e.Pz(d,e.lb(a!==n?a.data:n))}d=this.Py;d!==n&&(e=h,c!==n&&(e=c.Ma,c.Ma=h),d(this,b,a),c!==n&&(c.Ma=e));if(this instanceof vf){c=new ma(R);lf(c,this,h,q);for(c=c.l;c.next();)if(d=c.value,d instanceof T)for(d=d.te;d.next();)e=d.value,Ti(e)}if(this instanceof T)for(d=this.te;d.next();)e=d.value,Ti(e);this.j("containingGroup",b,a);a!==n&&a.Yv()}}else w.m("cannot set the Part.containingGroup of a Link or Adornment")});
function tj(a){a=a.bb;a!==n&&(a.R(),a.qb!==n&&a.qb.R(),a.Lg())}R.prototype.Yr=function(){var a=this.ck;a!==n&&Nl(a,this)};R.prototype.Zr=function(){var a=this.ck;a!==n&&Ml(a,this)};R.prototype.Ql=function(){var a=this.data;if(a!==n){var b=this.h;b!==n&&(b=b.ba,b!==n&&b.WD(a))}};w.g(R,"containingGroupChanged",R.prototype.Py);
w.defineProperty(R,{Py:"containingGroupChanged"},t("Vo"),function(a){var b=this.Vo;b!==a&&(a!==n&&w.k(a,"function",R,"containingGroupChanged"),this.Vo=a,this.j("containingGroupChanged",b,a))});w.u(R,{iM:"topLevelPart"},function(){return Ol(this,this)});R.prototype.findTopLevelPart=R.prototype.sK=function(){return Ol(this,this)};function Ol(a,b){var c=b.bb;return c!==n?Ol(a,c):b instanceof T&&(c=b.xd,c!==n)?Ol(a,c):b}
w.u(R,{ds:"isTopLevel"},function(){return this.bb!==n||this instanceof T&&this.Ei?q:h});R.prototype.isMemberOf=R.prototype.bs=function(a){return!(a instanceof vf)?q:Pl(this,this,a)};function Pl(a,b,c){if(b===c||c===n)return q;var d=b.bb;return d!==n&&(d===c||Pl(a,d,c))?h:b instanceof T&&(b=b.xd,b!==n)?Pl(a,b,c):q}R.prototype.findCommonContainingGroup=R.prototype.qG=function(a){return Ql(this,this,a)};
function Ql(a,b,c){if(b===n||c===n)return n;var d=b.bb;if(d===n)return n;if(b===c)return d;var e=c.bb;return e===n?n:d===e?e:Pl(a,c,d)?d:Pl(a,b,e)?e:Ql(a,d,e)}w.g(R,"isLayoutPositioned",R.prototype.kz);w.defineProperty(R,{kz:"isLayoutPositioned"},t("Ip"),function(a){var b=this.Ip;b!==a&&(u&&w.k(a,"boolean",R,"isLayoutPositioned"),this.Ip=a,this.j("isLayoutPositioned",b,a),this.F(a?Rj:Sj))});w.g(R,"layoutConditions",R.prototype.qD);
w.defineProperty(R,{qD:"layoutConditions"},t("Up"),function(a){var b=this.Up;b!==a&&(u&&w.k(a,"number",R,"layoutConditions"),this.Up=a,this.j("layoutConditions",b,a))});R.prototype.canLayout=R.prototype.Cr=function(){if(!this.kz||!this.nb())return q;var a=this.Ja;return a!==n&&a.yc||this instanceof T&&this.Ei?q:h};
R.prototype.invalidateLayout=R.prototype.F=function(a){a===f&&(a=16777215);var b;!this.kz||0===(a&this.qD)?b=q:(b=this.Ja,b!==n&&b.yc||this instanceof T&&this.Ei?b=q:(b=this.h,b=b!==n&&b.sa.tb?q:h));if(b)if(b=this.ck,b!==n){var c=b.Tb;c!==n?c.F():b.F(a)}else a=this.h,a!==n&&(c=a.Tb,c!==n&&c.F())};w.g(R,"dragComputation",R.prototype.Wy);
w.defineProperty(R,{Wy:"dragComputation"},t("jp"),function(a){var b=this.jp;b!==a&&(a!==n&&w.k(a,"function",R,"dragComputation"),this.jp=a,this.j("dragComputation",b,a))});w.g(R,"isShadowed",R.prototype.$n);w.defineProperty(R,{$n:"isShadowed"},t("Hf"),function(a){var b=this.Hf;b!==a&&(u&&w.k(a,"boolean",R,"isShadowed"),this.Hf=a,vj(this),this.j("isShadowed",b,a))});w.g(R,"shadowOffset",R.prototype.QH);
w.defineProperty(R,{QH:"shadowOffset"},t("hn"),function(a){var b=this.hn;b.I(a)||(u&&w.i(a,F,R,"shadowOffset"),this.hn=a=a.O(),vj(this),this.j("shadowOffset",b,a))});w.g(R,"shadowColor",R.prototype.shadowColor);w.defineProperty(R,{shadowColor:"shadowColor"},t("gn"),function(a){var b=this.gn;b!==a&&(u&&w.k(a,"string",R,"shadowColor"),this.gn=a,vj(this),this.j("shadowColor",b,a))});w.g(R,"shadowBlur",R.prototype.shadowBlur);
w.defineProperty(R,{shadowBlur:"shadowBlur"},t("fn"),function(a){var b=this.fn;b!==a&&(u&&w.k(a,"number",R,"shadowBlur"),this.fn=a,vj(this),this.j("shadowBlur",b,a))});function mf(a){0===arguments.length?R.call(this,hh):R.call(this,a);this.Ld="Adornment";this.La=n;this.en=q;this.aj=new F(NaN,NaN);this.Kh=new z(G);this.jh=n;this.Sc=(new z(F)).freeze();this.Iu=new F;this.qb=n}w.P("Adornment",mf);w.Da(mf,R);da=mf.prototype;
da.toString=function(){var a=this.zn;return"Adornment("+this.ud+")"+(a!==n?a.toString():"")};da.Sh=function(){return this.La&&this.La.ca instanceof U?this.La.ca.Sh():n};da.yp=ca(n);da.Gv=function(){var a=this.Bc.ca,b=this.Bc;if(a instanceof U&&b instanceof V){var c=a.path,b=c.Ga;a.Gv();for(var b=c.Ga,a=this.Fa,c=a.length,d=0;d<c;d++){var e=a.n[d];e.Fi&&e instanceof V&&(e.Ga=b)}}};da.gx=function(){var a=this.zn;return a instanceof U?a.Sc:n};w.u(mf,{placeholder:"placeholder"},t("qb"));
w.g(mf,"adornedObject",mf.prototype.Bc);w.defineProperty(mf,{Bc:"adornedObject"},t("La"),ba("La"));w.u(mf,{zn:"adornedPart"},function(){var a=this.La;return a!==n?a.ca:n});mf.prototype.Rk=function(){var a=this.La;if(a===n)return h;a=a.ca;return a===n||!a.Ic};mf.prototype.Yd=ca(q);w.u(mf,{bb:"containingGroup"},ca(n));
mf.prototype.em=function(a,b,c,d,e,g,i){if(a===ie&&"elements"===b)if(e instanceof bh)this.qb===n?this.qb=e:this.qb!==e&&w.m("Cannot insert a second Placeholder into the visual tree of an Adornment.");else{if(e instanceof x){var j=Vk(e,e,function(a){return a instanceof bh});j instanceof bh&&(this.qb===n?this.qb=j:this.qb!==j&&w.m("Cannot insert a second Placeholder into the visual tree of an Adornment."))}}else a===je&&"elements"===b&&(d===this.qb?this.qb=n:d instanceof x&&this.qb.Di(d)&&(this.qb=
n));R.prototype.em.call(this,a,b,c,d,e,g,i)};mf.prototype.updateAdornments=mf.prototype.Ji=aa();mf.prototype.Ql=aa();function T(a){0===arguments.length?R.call(this,hh):R.call(this,a);this.Zc=new z(U);this.Qm=this.Zp=this.Yp=n;this.Op=h;this.sr=q;this.lr=n;this.Ro=this.Pp=h;this.So=(new gb(2)).freeze();this.$c=this.Sg=n}w.P("Node",T);w.Da(T,R);T.prototype.xb=function(a){R.prototype.xb.call(this,a);a.Yp=this.Yp;a.Zp=this.Zp;a.Op=this.Op;a.sr=this.sr;a.lr=this.lr;a.Pp=this.Pp;a.Ro=this.Ro;a.So.Xa(this.So)};
T.prototype.xh=function(a){R.prototype.xh.call(this,a);a.Lg();a.Sg=this.Sg;a.$c=n};var Rl;T.DirectionDefault=Rl=w.s(T,"DirectionDefault",0);T.DirectionAbsolute=w.s(T,"DirectionAbsolute",1);var Sl;T.DirectionRotatedNode=Sl=w.s(T,"DirectionRotatedNode",2);var hj;T.DirectionRotatedNodeOrthogonal=hj=w.s(T,"DirectionRotatedNodeOrthogonal",3);function Tl(a,b){b!==n&&(a.Sg==n&&(a.Sg=new ma(Ul)),a.Sg.add(b))}
T.prototype.em=function(a,b,c,d,e,g,i){a===ie&&"elements"===b?this.$c=n:a===je&&"elements"===b&&(this.h===n?this.$c=n:d instanceof P&&Uk(this,d,function(a,b){Vj(a,b,h)}));R.prototype.em.call(this,a,b,c,d,e,g,i)};T.prototype.invalidateConnectedLinks=T.prototype.Lg=function(a){a===f&&(a=n);for(var b=this.te;b.next();){var c=b.value;if(!(a!==n&&a.contains(c))){var d=c.gd;d!==n&&(d.Fd=n);var e=c.ce;e!==n&&e!==d&&(e.Fd=n);c.Sb()}}};T.prototype.Rk=ca(h);w.g(T,"avoidable",T.prototype.Dy);
w.defineProperty(T,{Dy:"avoidable"},t("Ro"),function(a){var b=this.Ro;if(b!==a){u&&w.k(a,"boolean",T,"avoidable");this.Ro=a;var c=this.h;c!==n&&bj(c,this);this.j("avoidable",b,a)}});w.g(T,"avoidableMargin",T.prototype.bC);w.defineProperty(T,{bC:"avoidableMargin"},t("So"),function(a){"number"===typeof a?a=new gb(a):w.i(a,gb,T,"avoidableMargin");var b=this.So;if(!b.I(a)){this.So=a=a.O();var c=this.h;c!==n&&bj(c,this);this.j("avoidableMargin",b,a)}});
T.prototype.canAvoid=T.prototype.BI=function(){return this.Dy&&!this.Ei};T.prototype.getAvoidableRectangle=T.prototype.xK=function(a){a===f&&(a=new G);a.set(this.va);a.wr(this.bC);return a};function Il(a){for(;a!==n&&!a.nb();)a=a.bb;return a}w.u(T,{te:"linksConnected"},function(){return this.Zc.l});
T.prototype.findLinksConnected=T.prototype.rG=function(a){a===f&&(a=n);if(a===n)return this.Zc.l;u&&w.k(a,"string",T,"findLinksConnected:pid");var b=new Ja(this.Zc),c=this;b.Nv=function(b){return b.ia===c&&b.zi===a||b.na===c&&b.Lj===a};return b};T.prototype.findLinksOutOf=T.prototype.Lr=function(a){a===f&&(a=n);var b=new Ja(this.Zc),c=this;b.Nv=function(b){return b.ia!==c?q:a===n?h:b.zi===a};return b};
T.prototype.findLinksInto=T.prototype.yf=function(a){a===f&&(a=n);var b=new Ja(this.Zc),c=this;b.Nv=function(b){return b.na!==c?q:a===n?h:b.Lj===a};return b};
T.prototype.findNodesConnected=T.prototype.FC=function(a){a===f&&(a=n);for(var b=n,c=n,d=this.Zc.l;d.next();){var e=d.value;if(e.ia===this){if(a===n||e.zi===a)e=e.na,b!==n?b.add(e):c!==n&&c!==e?(b=new ma(T),b.add(c),b.add(e)):c=e}else if(e.na===this&&(a===n||e.Lj===a))e=e.ia,b!==n?b.add(e):c!==n&&c!==e?(b=new ma(T),b.add(c),b.add(e)):c=e}return b!==n?b.l:c!==n?new Ia(c):w.Ef};
T.prototype.findNodesOutOf=T.prototype.HC=function(a){a===f&&(a=n);for(var b=n,c=n,d=this.Zc.l;d.next();){var e=d.value;if(e.ia===this&&(a===n||e.zi===a))e=e.na,b!==n?b.add(e):c!==n&&c!==e?(b=new ma(T),b.add(c),b.add(e)):c=e}return b!==n?b.l:c!==n?new Ia(c):w.Ef};
T.prototype.findNodesInto=T.prototype.GC=function(a){a===f&&(a=n);for(var b=n,c=n,d=this.Zc.l;d.next();){var e=d.value;if(e.na===this&&(a===n||e.Lj===a))e=e.ia,b!==n?b.add(e):c!==n&&c!==e?(b=new ma(T),b.add(c),b.add(e)):c=e}return b!==n?b.l:c!==n?new Ia(c):w.Ef};w.g(T,"linkConnected",T.prototype.rD);w.defineProperty(T,{rD:"linkConnected"},t("Yp"),function(a){var b=this.Yp;b!==a&&(a!==n&&w.k(a,"function",T,"linkConnected"),this.Yp=a,this.j("linkConnected",b,a))});w.g(T,"linkDisconnected",T.prototype.sD);
w.defineProperty(T,{sD:"linkDisconnected"},t("Zp"),function(a){var b=this.Zp;b!==a&&(a!==n&&w.k(a,"function",T,"linkDisconnected"),this.Zp=a,this.j("linkDisconnected",b,a))});function Vl(a,b,c){if(!a.Zc.contains(b)){a.Zc.add(b);var d=a.rD;if(d!==n){var e=h,g=a.h;g!==n&&(e=g.Ma,g.Ma=h);d(a,b,c);g!==n&&(g.Ma=e)}a.Dj&&(c=h,g=a.h,g!==n&&(c=g.hd),c?b.ia===a&&(a.Dj=q):b.na===a&&(a.Dj=q))}}
function Wl(a,b,c){if(a.Zc.remove(b)){var d=a.sD,e=a.h;if(d!==n){var g=h;e!==n&&(g=e.Ma,e.Ma=h);d(a,b,c);e!==n&&(e.Ma=g)}!a.Dj&&!(e!==n&&e.sa.tb)&&(b=a.Zc.count,0===b?a.Dj=h:1===b&&Yi(a))}}function Yi(a){if(0!==a.Zc.count){var b=h,c=a.h;c!==n&&(b=c.hd);for(c=a.Zc.l;c.next();){var d=c.value;if(b){if(d.ia===a){a.Dj=q;return}}else if(d.na===a){a.Dj=q;return}}a.Dj=h}}T.prototype.Yr=function(){R.prototype.Yr.call(this);Yi(this);var a=this.Qm;a!==n&&Xl(a,this)};
T.prototype.Zr=function(){R.prototype.Zr.call(this);var a=this.Qm;a!==n&&a.Ce!==n&&(a.Ce.remove(this),a.R())};T.prototype.Ql=function(){if(0<this.Zc.count){var a=this.h;if(a===n)return;for(var b=this.Zc.copy().l;b.next();)a.remove(b.value)}R.prototype.Ql.call(this)};w.u(T,{Ei:"isLinkLabel"},function(){return this.Qm!==n});w.g(T,"labeledLink",T.prototype.xd);
w.defineProperty(T,{xd:"labeledLink"},t("Qm"),function(a){var b=this.Qm;if(b!==a){u&&a!==n&&w.i(a,U,T,"labeledLink");var c=this.h,d=this.data;if(b!==n&&(b.Ce!==n&&(b.Ce.remove(this),b.R()),c!==n&&d!==n)){var e=b.data,g=c.ba;if(e!==n&&g instanceof O){var i=g.lb(d);i!==f&&g.CH(e,i)}}this.Qm=a;a!==n&&(Xl(a,this),c!==n&&d!==n&&(e=a.data,g=c.ba,e!==n&&g instanceof O&&(i=g.lb(d),i!==f&&g.RB(e,i))));Aj(this);this.j("labeledLink",b,a)}});
T.prototype.findPort=T.prototype.Pr=function(a){u&&w.k(a,"string",T,"findPort:pid");this.$c===n&&Wj(this);if(this.$c!==n){var b=this.$c.qa(a);if(b!==n)return b}if(""!==a&&this.$c!==n&&(b=this.$c.qa(""),b!==n))return b;this.$c===n&&Wj(this);return this};w.u(T,{port:"port"},function(){return this.Pr("")});w.u(T,{ports:"ports"},function(){this.$c===n&&Wj(this);return this.$c!==n?this.$c.l:w.Ef});function Wj(a){a.$c!==n&&a.$c.clear();Uk(a,a,function(a,c){Xj(a,c)})}
function Xj(a,b){var c=b.Re;c!==n&&(a.$c===n&&(a.$c=new la("string",P)),a.$c.add(c,b))}function Vj(a,b,c){var d=b.Re;if(d!==n&&(a.$c!==n&&a.$c.remove(d),b=a.h,b!==n&&c)){c=n;for(a=a.rG(d);a.next();)c===n&&(c=[]),c.push(a.value);if(c!==n)for(a=0;a<c.length;a++)b.remove(c[a])}}
T.prototype.isInTreeOf=T.prototype.$K=function(a){if(a===n||a===this)return q;var b=h,c=this.h;c!==n&&(b=c.hd);if(b)a:{for(b=this;b!==a;){for(var c=n,d=b.yf();d.next()&&!(c=d.value.ia,c!==b););if(c===n){a=q;break a}b=c}a=h}else a:{for(b=this;b!==a;){c=n;for(d=b.Lr();d.next()&&!(c=d.value.na,c!==b););if(c===n){a=q;break a}b=c}a=h}return a};
T.prototype.findTreeParentLink=T.prototype.rv=function(){var a=h,b=this.h;b!==n&&(a=b.hd);b=this.Zc.l;if(a)for(;b.next();){if(a=b.value,a.ia!==this)return a}else for(;b.next();)if(a=b.value,a.na!==this)return a;return n};T.prototype.findTreeParentNode=T.prototype.JC=function(){var a=h,b=this.h;b!==n&&(a=b.hd);b=this.Zc.l;if(a)for(;b.next();){if(a=b.value,a=a.ia,a!==this)return a}else for(;b.next();)if(a=b.value,a=a.na,a!==this)return a;return n};
T.prototype.findTreeChildrenLinks=T.prototype.qv=function(){var a=h,b=this.h;b!==n&&(a=b.hd);return a?this.Lr():this.yf()};
T.prototype.findTreeChildrenNodes=T.prototype.tK=function(){var a=h,b=this.h;b!==n&&(a=b.hd);var c=b=n,d=this.Zc.l;if(a)for(;d.next();)a=d.value,a.ia===this&&(a=a.na,b!==n?b.add(a):c!==n&&c!==a?(b=new z(T),b.add(c),b.add(a)):c=a);else for(;d.next();)a=d.value,a.na===this&&(a=a.ia,b!==n?b.add(a):c!==n&&c!==a?(b=new z(T),b.add(c),b.add(a)):c=a);return b!==n?b.l:c!==n?new Ia(c):w.Ef};T.prototype.findTreeParts=T.prototype.uK=function(){var a=new ma(R);lf(a,this,q,h);return a};
T.prototype.collapseTree=T.prototype.Zu=function(){var a=this.h;if(a!==n&&!a.Xf){a.Xf=h;var b=a.hd,c=new ma(T);c.add(this);Yl(this,c,b);a.Xf=q}};function Yl(a,b,c){a.Ne=q;for(var d=c?a.Lr():a.yf();d.next();){var e=d.value,g=e.SC(a);g!==n&&(g!==a&&!b.contains(g))&&(b.add(g),vj(e),e.vh(),vj(g),g.vh(),tj(g),g.F(Sj),g.Ne&&(g.ew=g.Ne,Yl(g,b,c)))}}T.prototype.expandTree=T.prototype.mv=function(){var a=this.h;if(a!==n&&!a.Xf){a.Xf=h;var b=a.hd,c=new ma(T);c.add(this);Zl(this,c,b);a.Xf=q}};
function Zl(a,b,c){a.Ne=h;for(var d=c?a.Lr():a.yf();d.next();){var e=d.value,g=e.SC(a);g!==n&&(g!==a&&!b.contains(g))&&(b.add(g),vj(e),e.Ji(),vj(g),g.Ji(),tj(g),g.F(Rj),g.ew&&(g.ew=q,Zl(g,b,c)))}}w.g(T,"isTreeExpanded",T.prototype.Ne);
w.defineProperty(T,{Ne:"isTreeExpanded"},t("Op"),function(a){var b=this.Op;if(b!==a){u&&w.k(a,"boolean",T,"isTreeExpanded");this.Op=a;var c=this.h;c!==n&&Mh(c);this.j("isTreeExpanded",b,a);b=this.IE;if(b!==n){var d=h;c!==n&&(d=c.Ma,c.Ma=h);b(this);c!==n&&(c.Ma=d)}c!==n&&c.sa.tb||(a?this.mv():this.Zu())}});w.g(T,"wasTreeExpanded",T.prototype.ew);
w.defineProperty(T,{ew:"wasTreeExpanded"},t("sr"),function(a){var b=this.sr;b!==a&&(u&&w.k(a,"boolean",T,"wasTreeExpanded"),this.sr=a,this.j("wasTreeExpanded",b,a))});w.g(T,"treeExpandedChanged",T.prototype.IE);w.defineProperty(T,{IE:"treeExpandedChanged"},t("lr"),function(a){var b=this.lr;b!==a&&(a!==n&&w.k(a,"function",T,"treeExpandedChanged"),this.lr=a,this.j("treeExpandedChanged",b,a))});w.g(T,"isTreeLeaf",T.prototype.Dj);
w.defineProperty(T,{Dj:"isTreeLeaf"},t("Pp"),function(a){var b=this.Pp;b!==a&&(u&&w.k(a,"boolean",T,"isTreeLeaf"),this.Pp=a,this.j("isTreeLeaf",b,a))});
function U(){R.call(this,Rg);this.Gf=n;this.Vg="";this.wp=n;this.Xg=Ib;this.Ug=NaN;this.Tg=Rl;this.Wg=NaN;this.Qf=n;this.rh="";this.kr=n;this.th=Ib;this.qh=NaN;this.ph=Rl;this.sh=NaN;this.Bq=this.Aq=q;this.Mo=ij;this.Xo=0;this.Zo=ij;this.$o=NaN;this.cn=mk;this.Yq=0.5;this.jh=this.Ce=n;this.Sc=(new z(F)).freeze();this.Dg=n;this.oi=q;this.Nx=n;this.on=q;this.gl=this.Qh=this.Ga=n;this.xe=0;this.Kh=new z(G);this.Iu=new F;this.EB=this.CB=n;this.Mw=q}w.P("Link",U);w.Da(U,R);
U.prototype.xb=function(a){R.prototype.xb.call(this,a);a.Vg=this.Vg;a.wp=this.wp;a.Xg=this.Xg.O();a.Ug=this.Ug;a.Tg=this.Tg;a.Wg=this.Wg;a.rh=this.rh;a.kr=this.kr;a.th=this.th.O();a.qh=this.qh;a.ph=this.ph;a.sh=this.sh;a.Aq=this.Aq;a.Bq=this.Bq;a.Mo=this.Mo;a.Xo=this.Xo;a.Zo=this.Zo;a.$o=this.$o;a.cn=this.cn;a.Yq=this.Yq};U.prototype.xh=function(a){R.prototype.xh.call(this,a);this.Vg=a.Vg;this.rh=a.rh;a.jh=n;a.Dg=n;a.Sb();a.gl=this.gl;a.xe=this.xe};var mk;U.Normal=mk=w.s(U,"Normal",1);var fk;
U.Orthogonal=fk=w.s(U,"Orthogonal",2);var Rf;U.AvoidsNodes=Rf=w.s(U,"AvoidsNodes",3);var ij;U.None=ij=w.s(U,"None",0);var gk;U.Bezier=gk=w.s(U,"Bezier",9);var hk;U.JumpGap=hk=w.s(U,"JumpGap",10);var ik;U.JumpOver=ik=w.s(U,"JumpOver",11);var jk;U.End=jk=w.s(U,"End",17);var kk;U.Scale=kk=w.s(U,"Scale",18);var lk;U.Stretch=lk=w.s(U,"Stretch",19);var gl;U.OrientAlong=gl=w.s(U,"OrientAlong",21);var $l;U.OrientPlus90=$l=w.s(U,"OrientPlus90",22);var am;U.OrientMinus90=am=w.s(U,"OrientMinus90",23);var bm;
U.OrientOpposite=bm=w.s(U,"OrientOpposite",24);var cm;U.OrientUpright=cm=w.s(U,"OrientUpright",25);var dm;U.OrientPlus90Upright=dm=w.s(U,"OrientPlus90Upright",26);var em;U.OrientMinus90Upright=em=w.s(U,"OrientMinus90Upright",27);var fm;U.OrientUpright45=fm=w.s(U,"OrientUpright45",28);U.prototype.Rk=function(){var a=this.ia;if(a!==n&&(a.Ic||a.Wi))return q;a=this.na;return a!==n&&(a.Ic||a.Wi)?q:h};U.prototype.Yd=ca(q);
function Tk(a,b){var c;switch(a){default:case ij:c=0;break;case gl:c=b;break;case $l:c=b+90;break;case am:c=b-90;break;case bm:c=b+180;break;case cm:c=$c(b);90<c&&270>c&&(c-=180);break;case dm:c=$c(b+90);90<c&&270>c&&(c-=180);break;case em:c=$c(b-90);90<c&&270>c&&(c-=180);break;case fm:c=$c(b);if(45<c&&135>c||225<c&&315>c)return 0;90<c&&270>c&&(c-=180)}return $c(c)}w.g(U,"fromNode",U.prototype.ia);
w.defineProperty(U,{ia:"fromNode"},t("Gf"),function(a){var b=this.Gf;if(b!==a){u&&a!==n&&w.i(a,T,U,"fromNode");var c=this.gd;b!==n&&(this.Qf!==b&&Wl(b,this,c),c!==n&&(c.Fd=n),gm(this),b.F(Qi));this.Gf=a;this.Qh=n;this.Sb();var d=this.h;if(d!==n){var e=this.data,g=d.ba;if(e!==n)if(g instanceof O){var i=a!==n?a.data:n;g.Wv(e,g.lb(i))}else g instanceof ze&&(i=a!==n?a.data:n,d.hd?g.Bf(e,g.lb(i)):(b!==n&&g.Bf(b.data,f),g.Bf(i,g.lb(this.Qf!==n?this.Qf.data:n))))}e=this.gd;g=this.az;g!==n&&(i=h,d!==n&&(i=
d.Ma,d.Ma=h),g(this,c,e),d!==n&&(d.Ma=i));a!==n&&(this.Qf!==a&&Vl(a,this,e),e!==n&&(e.Fd=n),hm(this),a.F(Li));this.j("fromNode",b,a);Ti(this)}});w.g(U,"fromPortId",U.prototype.zi);
w.defineProperty(U,{zi:"fromPortId"},t("Vg"),function(a){var b=this.Vg;if(b!==a){u&&w.k(a,"string",U,"fromPortId");var c=this.gd;c!==n&&(c.Fd=n);gm(this);this.Vg=a;var d=this.gd;d!==n&&(d.Fd=n);var e=this.h;if(e!==n){var g=this.data,i=e.ba;g!==n&&i instanceof O&&i.xs(g,a)}c!==d&&(this.Qh=n,this.Sb(),g=this.az,g!==n&&(i=h,e!==n&&(i=e.Ma,e.Ma=h),g(this,c,d),e!==n&&(e.Ma=i)));hm(this);this.j("fromPortId",b,a)}});w.u(U,{gd:"fromPort"},function(){var a=this.Gf;return a===n?n:a.Pr(this.Vg)});
w.g(U,"fromPortChanged",U.prototype.az);w.defineProperty(U,{az:"fromPortChanged"},t("wp"),function(a){var b=this.wp;b!==a&&(a!==n&&w.k(a,"function",U,"fromPortChanged"),this.wp=a,this.j("fromPortChanged",b,a))});w.g(U,"toNode",U.prototype.na);
w.defineProperty(U,{na:"toNode"},t("Qf"),function(a){var b=this.Qf;if(b!==a){u&&a!==n&&w.i(a,T,U,"toNode");var c=this.ce;b!==n&&(this.Gf!==b&&Wl(b,this,c),c!==n&&(c.Fd=n),gm(this),b.F(Qi));this.Qf=a;this.Qh=n;this.Sb();var d=this.h;if(d!==n){var e=this.data,g=d.ba;if(e!==n)if(g instanceof O){var i=a!==n?a.data:n;g.Xv(e,g.lb(i))}else g instanceof ze&&(i=a!==n?a.data:n,d.hd?(b!==n&&g.Bf(b.data,f),g.Bf(i,g.lb(this.Gf!==n?this.Gf.data:n))):g.Bf(e,g.lb(i)))}e=this.ce;g=this.Yz;g!==n&&(i=h,d!==n&&(i=d.Ma,
d.Ma=h),g(this,c,e),d!==n&&(d.Ma=i));a!==n&&(this.Gf!==a&&Vl(a,this,e),e!==n&&(e.Fd=n),hm(this),a.F(Li));this.j("toNode",b,a);Ti(this)}});w.g(U,"toPortId",U.prototype.Lj);
w.defineProperty(U,{Lj:"toPortId"},t("rh"),function(a){var b=this.rh;if(b!==a){u&&w.k(a,"string",U,"toPortId");var c=this.ce;c!==n&&(c.Fd=n);gm(this);this.rh=a;var d=this.ce;d!==n&&(d.Fd=n);var e=this.h;if(e!==n){var g=this.data,i=e.ba;g!==n&&i instanceof O&&i.ys(g,a)}c!==d&&(this.Qh=n,this.Sb(),g=this.Yz,g!==n&&(i=h,e!==n&&(i=e.Ma,e.Ma=h),g(this,c,d),e!==n&&(e.Ma=i)));hm(this);this.j("toPortId",b,a)}});w.u(U,{ce:"toPort"},function(){var a=this.Qf;return a===n?n:a.Pr(this.rh)});
w.g(U,"toPortChanged",U.prototype.Yz);w.defineProperty(U,{Yz:"toPortChanged"},t("kr"),function(a){var b=this.kr;b!==a&&(a!==n&&w.k(a,"function",U,"toPortChanged"),this.kr=a,this.j("toPortChanged",b,a))});w.g(U,"fromSpot",U.prototype.kb);w.defineProperty(U,{kb:"fromSpot"},t("Xg"),function(a){var b=this.Xg;b.I(a)||(u&&w.i(a,H,U,"fromSpot"),this.Xg=a=a.O(),this.j("fromSpot",b,a),this.Sb())});w.g(U,"fromEndSegmentLength",U.prototype.Nk);
w.defineProperty(U,{Nk:"fromEndSegmentLength"},t("Ug"),function(a){var b=this.Ug;b!==a&&(u&&w.k(a,"number",U,"fromEndSegmentLength"),0>a&&w.ra(a,">= 0",U,"fromEndSegmentLength"),this.Ug=a,this.j("fromEndSegmentLength",b,a),this.Sb())});w.g(U,"fromEndSegmentDirection",U.prototype.Sr);w.defineProperty(U,{Sr:"fromEndSegmentDirection"},t("Tg"),function(a){var b=this.Tg;b!==a&&(u&&w.jb(a,T,U,"fromEndSegmentDirection"),this.Tg=a,this.j("fromEndSegmentDirection",b,a),this.Sb())});
w.g(U,"fromShortLength",U.prototype.Tr);w.defineProperty(U,{Tr:"fromShortLength"},t("Wg"),function(a){var b=this.Wg;b!==a&&(u&&w.k(a,"number",U,"fromShortLength"),this.Wg=a,this.j("fromShortLength",b,a),this.Sb())});w.g(U,"toSpot",U.prototype.ob);w.defineProperty(U,{ob:"toSpot"},t("th"),function(a){var b=this.th;b.I(a)||(u&&w.i(a,H,U,"toSpot"),this.th=a=a.O(),this.j("toSpot",b,a),this.Sb())});w.g(U,"toEndSegmentLength",U.prototype.$k);
w.defineProperty(U,{$k:"toEndSegmentLength"},t("qh"),function(a){var b=this.qh;b!==a&&(u&&w.k(a,"number",U,"toEndSegmentLength"),0>a&&w.ra(a,">= 0",U,"toEndSegmentLength"),this.qh=a,this.j("toEndSegmentLength",b,a),this.Sb())});w.g(U,"toEndSegmentDirection",U.prototype.Ds);w.defineProperty(U,{Ds:"toEndSegmentDirection"},t("ph"),function(a){var b=this.ph;b!==a&&(u&&w.jb(a,T,U,"toEndSegmentDirection"),this.ph=a,this.j("toEndSegmentDirection",b,a),this.Sb())});w.g(U,"toShortLength",U.prototype.Es);
w.defineProperty(U,{Es:"toShortLength"},t("sh"),function(a){var b=this.sh;b!==a&&(u&&w.k(a,"number",U,"toShortLength"),this.sh=a,this.j("toShortLength",b,a),this.Sb())});function Ti(a){var b=a.ia,c=a.na;b!==n&&c!==n?im(a,b.qG(c)):im(a,n)}function im(a,b){var c=a.ck;if(c!==b){c!==n&&Ml(c,a);a.ck=b;b!==n&&Nl(b,a);var d=a.Py;if(d!==n){var e=h,g=a.h;g!==n&&(e=g.Ma,g.Ma=h);d(a,c,b);g!==n&&(g.Ma=e)}a.oi&&(a.CB===c||a.EB===c)&&a.Sb()}}
U.prototype.getOtherNode=U.prototype.SC=function(a){u&&w.i(a,T,U,"getOtherNode:node");var b=this.ia;return a===b?this.na:b};U.prototype.getOtherPort=U.prototype.DK=function(a){u&&w.i(a,P,U,"getOtherPort:port");var b=this.gd;return a===b?this.ce:b};w.u(U,{aL:"isLabeledLink"},function(){return this.Ce===n?q:0<this.Ce.count});w.u(U,{Ej:"labelNodes"},function(){return this.Ce===n?w.Ef:this.Ce.l});function Xl(a,b){a.Ce===n&&(a.Ce=new ma(T));a.Ce.add(b);a.R()}
U.prototype.Yr=function(){R.prototype.Yr.call(this);jm(this)&&Sg(this,this.va);var a=this.Gf,b=this.Qf;if(a!==n){var c=this.gd;c!==n&&(c.Fd=n);Vl(a,this,c);hm(this)}b!==n&&(c=this.ce,c!==n&&(c.Fd=n),Vl(b,this,c),hm(this))};U.prototype.Zr=function(){R.prototype.Zr.call(this);jm(this)&&Sg(this,this.va);var a=this.Gf,b=this.Qf;if(a!==n){var c=this.gd;c!==n&&(c.Fd=n);Wl(a,this,c);gm(this)}b!==n&&(c=this.ce,c!==n&&(c.Fd=n),Wl(b,this,c),gm(this))};
U.prototype.Ql=function(){if(this.Ce!==n){var a=this.h;if(a===n)return;for(var b=this.Ce.copy().l;b.next();)a.remove(b.value)}b=this.data;b!==n&&(a=this.h,a!==n&&(a=a.ba,a instanceof O?a.DH(b):a instanceof ze&&a.Bf(b,f)))};U.prototype.move=U.prototype.move=function(a){var b=this.position,c=b.x;isNaN(c)&&(c=0);b=b.y;isNaN(b)&&(b=0);c=a.x-c;b=a.y-b;R.prototype.move.call(this,a);this.Tk(c,b);for(a=this.Ej;a.next();){var d=a.value,e=d.position;d.move(new F(e.x+c,e.y+b))}};w.g(U,"relinkableFrom",U.prototype.RD);
w.defineProperty(U,{RD:"relinkableFrom"},t("Aq"),function(a){var b=this.Aq;b!==a&&(u&&w.k(a,"boolean",U,"relinkableFrom"),this.Aq=a,this.j("relinkableFrom",b,a))});w.g(U,"relinkableTo",U.prototype.SD);w.defineProperty(U,{SD:"relinkableTo"},t("Bq"),function(a){var b=this.Bq;b!==a&&(u&&w.k(a,"boolean",U,"relinkableTo"),this.Bq=a,this.j("relinkableTo",b,a))});U.prototype.canRelinkFrom=U.prototype.VI=function(){if(!this.RD)return q;var a=this.Ja;if(a!==n&&!a.qj)return q;a=a.h;return a!==n&&!a.qj?q:h};
U.prototype.canRelinkTo=U.prototype.WI=function(){if(!this.SD)return q;var a=this.Ja;if(a!==n&&!a.qj)return q;a=a.h;return a!==n&&!a.qj?q:h};w.u(U,{path:"path"},function(){var a=this.jh;if(a!==n)return a;a=this.Fa;a=Dj(this,a,a.length);return a instanceof V?this.jh=a:n});U.prototype.yp=t("path");U.prototype.gx=t("Sc");U.prototype.Sh=function(){km(this);var a=this.ne();return this.Nx=a};
U.prototype.ne=function(){var a=Infinity,b=Infinity,c=this.ka,d;if(0===c)return new G(NaN,NaN,0,0);if(1===c)c=this.p(0),a=Math.min(c.x,a),b=Math.min(c.y,b),d=new G(c.x,c.y,0,0);else if(2===c){d=this.p(0);var e=this.p(1),a=Math.min(d.x,e.x),b=Math.min(d.y,e.y);d=new G(d,e)}else if(lm(this)===gk&&3<=c&&!Yg(this))if(e=this.p(0),a=e.x,b=e.y,d=new G(a,b,0,0),3===c){var c=this.p(1),a=Math.min(c.x,a),b=Math.min(c.y,b),g=this.p(2),a=Math.min(g.x,a),b=Math.min(g.y,b);wc(e.x,e.y,c.x,c.y,c.x,c.y,g.x,g.y,0.5,
d)}else for(var i,j,k=3;k<c;k+=3)i=this.p(k-2),k+3>=c&&(k=c-1),j=this.p(k-1),g=this.p(k),wc(e.x,e.y,i.x,i.y,j.x,j.y,g.x,g.y,0.5,d),a=Math.min(g.x,a),b=Math.min(g.y,b),e=g;else{d=this.p(0);e=this.p(1);a=Math.min(d.x,e.x);b=Math.min(d.y,e.y);d=new G(d,e);for(k=2;k<c;k++)e=this.p(k),a=Math.min(e.x,a),b=Math.min(e.y,b),d.bw(e)}this.Iu.V(a-d.x,b-d.y);return d};w.u(U,{BD:"midPoint"},function(){km(this);return mm(this)});
function mm(a){var b=a.ka;if(0===b)return qc;if(1===b)return a.p(0);if(2===b){var c=a.p(0),d=a.p(1);return new F((c.x+d.x)/2,(c.y+d.y)/2)}if(lm(a)===gk&&3<=b&&!Yg(a)){if(3===b)return a.p(1);var c=(b-1)/3|0,e=3*(c/2|0);if(1===c%2){var c=a.p(e),d=a.p(e+1),g=a.p(e+2),a=a.p(e+3),e=new F,b=d.x,i=d.y,d=g.x,j=g.y,g=(b+d)/2,k=(i+j)/2,i=((c.y+i)/2+k)/2,j=(k+(j+a.y)/2)/2;e.x=(((c.x+b)/2+g)/2+(g+(d+a.x)/2)/2)/2;e.y=(i+j)/2;return e}return a.p(e)}e=0;g=[];for(i=0;i<b-1;i++)c=a.p(i),d=a.p(i+1),Sa(c.x,d.x)?(c=
d.y-c.y,0>c&&(c=-c)):Sa(c.y,d.y)?(c=d.x-c.x,0>c&&(c=-c)):c=Math.sqrt(c.Rl(d)),g.push(c),e+=c;for(d=i=c=0;c<e/2&&i<b;){d=g[i];if(c+d>e/2)break;c+=d;i++}b=a.p(i);a=a.p(i+1);if(b.x===a.x)return b.y>a.y?new F(b.x,b.y-(e/2-c)):new F(b.x,b.y+(e/2-c));if(b.y===a.y)return b.x>a.x?new F(b.x-(e/2-c),b.y):new F(b.x+(e/2-c),b.y);c=(e/2-c)/d;return new F(b.x+c*(a.x-b.x),b.y+c*(a.y-b.y))}w.u(U,{AD:"midAngle"},function(){km(this);return nm(this)});
function nm(a){var b=a.ka;if(2>b)return NaN;if(lm(a)===gk&&4<=b&&!Yg(a)){var c=(b-1)/3|0,d=3*(c/2|0);if(1===c%2){var d=Math.floor(d),b=a.p(d),e=a.p(d+1),c=a.p(d+2),a=a.p(d+3),d=e.x,e=e.y,g=c.x,c=c.y,i=(d+g)/2,j=(e+c)/2;return ab(((b.x+d)/2+i)/2,((b.y+e)/2+j)/2,(i+(g+a.x)/2)/2,(j+(c+a.y)/2)/2)}if(0<d&&d+1<b)return b=a.p(d-1),e=a.p(d+1),b.ui(e)}c=b/2|0;if(0===b%2)return b=a.p(c-1),e=a.p(c),b.ui(e);b=a.p(c-1);e=a.p(c);c=a.p(c+1);a=b.Rl(e);d=e.Rl(c);return a>d?b.ui(e):e.ui(c)}w.g(U,"points",U.prototype.points);
w.defineProperty(U,{points:"points"},t("Sc"),function(a){u&&w.i(a,z,U,"points");var b=this.Sc;if(b!==a&&a!==n){for(var c=a.l;c.next();){var d=c.value;d.freeze()}a.freeze();this.Sc=a.copy();this.Wf();om(this);for(var c=a.count,e=new z,g=0;g<c;g++)d=a.n[g],e.add(d.copy());this.j("points",b,e)}});w.u(U,{ka:"pointsCount"},function(){return this.Sc.count});U.prototype.getPoint=U.prototype.p=function(a){return this.Sc.n[a]};
U.prototype.setPoint=U.prototype.J=function(a,b){u&&(w.i(b,F,U,"setPoint"),b.T()||w.m("Link.setPoint called with a Point that does not have real numbers: "+b.toString()));this.Dg===n&&w.m("Call Link.startRoute before modifying the points of the route.");this.Sc.Vv(a,b)};
U.prototype.insertPoint=U.prototype.A=function(a,b){u&&(w.i(b,F,U,"insertPoint"),b.T()||w.m("Link.insertPoint called with a Point that does not have real numbers: "+b.toString()));this.Dg===n&&w.m("Call Link.startRoute before modifying the points of the route.");this.Sc.xc(a,b)};
U.prototype.addPoint=U.prototype.td=function(a){u&&(w.i(a,F,U,"addPoint"),a.T()||w.m("Link.addPoint called with a Point that does not have real numbers: "+a.toString()));this.Dg===n&&w.m("Call Link.startRoute before modifying the points of the route.");this.Sc.add(a)};U.prototype.removePoint=U.prototype.XD=function(a){this.Dg===n&&w.m("Call Link.startRoute before modifying the points of the route.");this.Sc.Se(a)};
U.prototype.clearPoints=U.prototype.Jn=function(){this.Dg===n&&w.m("Call Link.startRoute before modifying the points of the route.");this.Sc.clear()};U.prototype.movePoints=U.prototype.Tk=function(a,b){for(var c=new z(F),d=this.Sc.l;d.next();){var e=d.value;c.add(new F(e.x+a,e.y+b))}this.points=c};U.prototype.startRoute=U.prototype.Zk=function(){if(this.Dg===n){for(var a=new z(F),b=this.Sc.l;b.next();)a.add(b.value.O());this.Dg=a;this.Sc.Ia()}};
U.prototype.commitRoute=U.prototype.si=function(){if(this.Dg!==n){for(var a=this.Dg,b=Infinity,c=Infinity,d=a.count,e=0;e<d;e++)var g=a.n[e],b=Math.min(g.x,b),c=Math.min(g.y,c);for(var i=Infinity,j=Infinity,k=this.Sc,l=k.count,e=0;e<l;e++)g=k.n[e],i=Math.min(g.x,i),j=Math.min(g.y,j);if(l===d)for(e=0;e<l;e++)if(g=a.n[e],d=k.n[e],g.x-b!==d.x-i||g.y-c!==d.y-j){this.Wf();break}this.Dg=n;this.Sc.freeze();om(this);b=new z(F);for(e=0;e<l;e++)g=k.n[e],b.add(g.copy());this.j("points",a,b)}};
U.prototype.rollbackRoute=U.prototype.HH=function(){this.Dg=n};function om(a){0===a.Sc.count?a.oi=q:(a.oi=h,pm(a,q))}U.prototype.invalidateRoute=U.prototype.Sb=function(){if(!this.on&&(!this.h||!this.h.sa.tb)&&this.nb()){this.oi=q;this.Wf();var a=this.yp();a!==n&&a.R()}};function km(a){if(!a.oi&&!a.Mw){var b=h;try{a.Mw=h,a.Zk(),b=a.computePoints()}finally{a.Mw=q,b?a.si():a.HH()}}}
U.prototype.computePoints=U.prototype.pJ=function(){var a=this.ia,b=n,b=a===n?n:this.gd;if(b!==n){var c=Yj(b);if(c===a||!a.nb()){var d=Il(a);d!==n&&d!==a?(a=d,b=d.Pr("")):a=d}else b=c}this.CB=a;if(a===n||b===n||!a.location.T())return q;var e=this.na,g=n,g=e===n?n:this.ce;if(g!==n){var i=Yj(g);if(i===e||!e.nb()){var j=Il(e);j!==n&&j!==e?(e=j,g=j.Pr("")):e=j}else g=i}this.EB=e;if(e===n||g===n||!e.location.T())return q;var k=this.ka,l=qm(this,b),m=rm(this,g),p=b===g,r=Yg(this),s=this.vf===gk;this.Qh=
p&&!r?s=h:q;var v=this.Ru===ij||p;if(!r&&l===Eb&&m===Eb&&!p){var y=q;if(!v&&3<=k)var C=this.getLinkPoint(a,b,Eb,h,q,e,g),E=this.getLinkPoint(e,g,Eb,q,q,a,b),y=sm(this,0,C,k-1,E);if(!y)if(this.Jn(),s){var I=a,D=b,M=e,N=g,Z=this.getLinkPoint(I,D,Eb,h,q,M,N),wa=this.getLinkPoint(M,N,Eb,q,q,I,D),ka=wa.x-Z.x,ua=wa.y-Z.y,Da=this.computeCurviness(),Ha=0,bb=0,qb=Z.x+ka/3,Xa=Z.y+ua/3,Na=qb,fb=Xa;Ta(ua,0)?fb=0<ka?fb-Da:fb+Da:(Ha=-ka/ua,bb=Math.sqrt(Da*Da/(Ha*Ha+1)),0>Da&&(bb=-bb),Na=(0>ua?-1:1)*bb+qb,fb=Ha*
(Na-qb)+Xa);var qb=Z.x+2*ka/3,Xa=Z.y+2*ua/3,Ya=qb,mb=Xa;Ta(ua,0)?mb=0<ka?mb-Da:mb+Da:(Ya=(0>ua?-1:1)*bb+qb,mb=Ha*(Ya-qb)+Xa);this.Jn();this.td(Z);this.td(new F(Na,fb));this.td(new F(Ya,mb));this.td(wa);this.J(0,this.getLinkPoint(I,D,Eb,h,q,M,N));this.J(3,this.getLinkPoint(M,N,Eb,q,q,I,D))}else{var td=a,me=b,Id=e,Vb=g,Dc=this.getLinkPoint(td,me,Eb,h,q,Id,Vb),Xd=this.getLinkPoint(Id,Vb,Eb,q,q,td,me);if(this.hasCurviness()){var oe=Xd.x-Dc.x,Sf=Xd.y-Dc.y,Tc=this.computeCurviness(),vd=Dc.x+oe/2,bc=Dc.y+
Sf/2,Tf=vd,Lc=bc;if(Ta(Sf,0))Lc=0<oe?Lc-Tc:Lc+Tc;else{var Le=-oe/Sf,nf=Math.sqrt(Tc*Tc/(Le*Le+1));0>Tc&&(nf=-nf);Tf=(0>Sf?-1:1)*nf+vd;Lc=Le*(Tf-vd)+bc}this.td(Dc);this.td(new F(Tf,Lc))}else this.td(Dc);this.td(Xd)}}else{var of=this.Ch===Rf;v&&(r&&of||p)&&this.Jn();var Uc=this.computeCurviness(),Mc=this.getLinkPoint(a,b,l,h,r,e,g),Me=0,Zd=0,Nb=0;if(r||l!==Eb||p){var $d=this.getEndSegmentLength(a,b,l,h),Nb=this.getLinkDirection(a,b,Mc,l,h,r,e,g);p&&(Nb-=r?90:30,0>Uc&&(Nb-=180));0>Nb?Nb+=360:360<=Nb&&
(Nb-=360);p&&($d+=Math.abs(Uc));0===Nb?Me=$d:90===Nb?Zd=$d:180===Nb?Me=-$d:270===Nb?Zd=-$d:(Me=$d*Math.cos(Nb*Math.PI/180),Zd=$d*Math.sin(Nb*Math.PI/180));if(yb(l)&&p)var pe=b.Ob(Mb),Mc=this.getLinkPointFromPoint(a,b,pe,new F(pe.x+1E3*Me,pe.y+1E3*Zd),h)}var lc=this.getLinkPoint(e,g,m,q,r,a,b),xb=0,Vc=0,Ob=0;if(r||m!==Eb||p){var Md=this.getEndSegmentLength(e,g,m,q),Ob=this.getLinkDirection(e,g,lc,m,q,r,a,b);p&&(Ob+=r?0:30,0>Uc&&(Ob+=180));0>Ob?Ob+=360:360<=Ob&&(Ob-=360);p&&(Md+=Math.abs(Uc));0===Ob?
xb=Md:90===Ob?Vc=Md:180===Ob?xb=-Md:270===Ob?Vc=-Md:(xb=Md*Math.cos(Ob*Math.PI/180),Vc=Md*Math.sin(Ob*Math.PI/180));yb(m)&&p&&(pe=g.Ob(Mb),lc=this.getLinkPointFromPoint(e,g,pe,new F(pe.x+1E3*xb,pe.y+1E3*Vc),q))}var qe=Mc;if(r||l!==Eb||p)qe=new F(Mc.x+Me,Mc.y+Zd);var Ab=lc;if(r||m!==Eb||p)Ab=new F(lc.x+xb,lc.y+Vc);if(v||r||!yb(l)||!(3<k&&sm(this,0,Mc,k-2,Ab)))if(!v&&!r&&yb(m)&&3<k&&sm(this,1,qe,k-1,lc))this.J(0,Mc);else if(!v&&!r&&4<k&&sm(this,1,qe,k-2,Ab))this.J(0,Mc),this.J(k-1,lc);else if(!v&&r&&
6<=k&&!of&&sm(this,1,qe,k-2,Ab))this.J(0,Mc),this.J(k-1,lc);else{this.Jn();this.td(Mc);(r||l!==Eb||p)&&this.td(qe);if(r)a:{var S=qe,tb=Nb,Q=Ab,ga=Ob,zb=a,Db=e,tb=-45<=tb&&45>tb?0:45<=tb&&135>tb?90:135<=tb&&225>tb?180:270,ga=-45<=ga&&45>ga?0:45<=ga&&135>ga?90:135<=ga&&225>ga?180:270,Fa=zb.va.copy(),pa=Db.va.copy();if(Fa.T()&&pa.T()){Fa.Kg(8,8);pa.Kg(8,8);Fa.bw(S);pa.bw(Q);var Fb=this.h;if(this.Ch===Rf&&Fb!==n&&!Fa.ua(Q)&&!pa.ua(S)&&zb!==Db&&!this.Ja.yc){var ib;Fb.sd===n&&(Fb.sd=new tm);var id=this!==
n?this.bb:n;if(Fb.sd.$r||Fb.sd.group!==id){if(id===n){var Ne,re;if(Fb.Th)if(Fb.Rr.T()){var Gb=Fb.Rr.copy();Gb.wr(Fb.padding);re=Gb}else{for(var Wc,pf=h,ae=Fb.hb,jd=ae.length,Oe=0;Oe<jd;Oe++){var Pe=ae.n[Oe];if(Pe.visible&&!Pe.yc)for(var wd=Pe.Mb,wh=wd.length,Uf=0;Uf<wh;Uf++){var Vf=wd.n[Uf];if(Vf.zv&&Vf.nb()){var Nd=Vf.va;Nd.T()&&(pf?(pf=q,Wc=Nd.copy()):Wc.Hi(Nd))}}}pf&&(Wc=new G(0,0,0,0));Wc.wr(Fb.padding);re=Wc}else re=Fb.vc.copy();Ne=re;Ne.Kg(100,100);Fb.sd.initialize(Ne);for(var be=Fb.Wk;be.next();){var Qe=
be.value,kd=Qe.Ja;kd===n||(!kd.visible||kd.yc)||$i(Fb,Qe,n)}}else{var se=id.va.copy();se.Kg(20,20);Fb.sd.initialize(se);for(var cc=id.Fc;cc.next();){var Xc=cc.value;Xc instanceof T&&$i(Fb,Xc,n)}}Fb.sd.group=id;Fb.sd.$r=q}else um(Fb.sd);ib=Fb.sd;var xd=Fa.copy().Hi(pa);xd.Kg(2*ib.Ll,2*ib.Kl);vm(ib,S,tb,Q,ga,xd);var mc=wm(ib,Q.x,Q.y);if(!ib.abort&&mc===xm){um(ib);var Od=ib.qE;xd.Kg(ib.Ll*Od,ib.Kl*Od);vm(ib,S,tb,Q,ga,xd);mc=wm(ib,Q.x,Q.y)}!ib.abort&&mc===xm&&(um(ib),Od=ib.oD,xd.Kg(ib.Ll*Od,ib.Kl*Od),
vm(ib,S,tb,Q,ga,xd),mc=wm(ib,Q.x,Q.y));!ib.abort&&(mc===xm&&ib.OE)&&(um(ib),vm(ib,S,tb,Q,ga,ib.Eb),mc=wm(ib,Q.x,Q.y));if(!ib.abort&&mc<xm&&0!==wm(ib,Q.x,Q.y)){ym(this,ib,Q.x,Q.y,ga,h);var Bb=this.p(2);if(4>this.ka)0===tb||180===tb?(Bb.x=S.x,Bb.y=Q.y):(Bb.x=Q.x,Bb.y=S.y),this.J(2,Bb),this.A(3,Bb);else{var xc=this.p(3);if(0===tb||180===tb)if(Ta(Bb.x,xc.x)){var Pd=0===tb?Math.max(Bb.x,S.x):Math.min(Bb.x,S.x);this.J(2,new F(Pd,S.y));this.J(3,new F(Pd,xc.y))}else Ta(Bb.y,xc.y)?(Math.abs(S.y-Bb.y)<=ib.Kl/
2&&(this.J(2,new F(Bb.x,S.y)),this.J(3,new F(xc.x,S.y))),this.A(2,new F(Bb.x,S.y))):this.J(2,new F(S.x,Bb.y));else if(90===tb||270===tb)if(Ta(Bb.y,xc.y)){var te=90===tb?Math.max(Bb.y,S.y):Math.min(Bb.y,S.y);this.J(2,new F(S.x,te));this.J(3,new F(xc.x,te))}else Ta(Bb.x,xc.x)?(Math.abs(S.x-Bb.x)<=ib.Ll/2&&(this.J(2,new F(S.x,Bb.y)),this.J(3,new F(S.x,xc.y))),this.A(2,new F(S.x,Bb.y))):this.J(2,new F(Bb.x,S.y))}break a}}var oa,Ua;if(0===tb)if(Q.x>S.x||270===ga&&Q.y<S.y&&pa.right>S.x||90===ga&&Q.y>S.y&&
pa.right>S.x)oa=new F(Q.x,S.y),Ua=new F(Q.x,(S.y+Q.y)/2),180===ga?(oa.x=zm(this,S.x,Q.x),Ua.x=oa.x,Ua.y=Q.y):270===ga&&Q.y<S.y||90===ga&&Q.y>S.y?(oa.x=S.x<pa.left?zm(this,S.x,pa.left):S.x<pa.right&&(270===ga&&S.y<pa.top||90===ga&&S.y>pa.bottom)?zm(this,S.x,Q.x):pa.right,Ua.x=oa.x,Ua.y=Q.y):0===ga&&(S.x<pa.left&&S.y>pa.top&&S.y<pa.bottom)&&(oa.x=S.x,oa.y=S.y<Q.y?Math.min(Q.y,pa.top):Math.max(Q.y,pa.bottom),Ua.y=oa.y);else{oa=new F(S.x,Q.y);Ua=new F((S.x+Q.x)/2,Q.y);if(180===ga||90===ga&&Q.y<Fa.top||
270===ga&&Q.y>Fa.bottom){if(180===ga&&(pa.ua(S)||Fa.ua(Q)))oa.y=zm(this,S.y,Q.y);else if(Q.y<S.y&&(180===ga||90===ga))oa.y=zm(this,Fa.top,Math.max(Q.y,pa.bottom));else if(Q.y>S.y&&(180===ga||270===ga))oa.y=zm(this,Fa.bottom,Math.min(Q.y,pa.top));Ua.x=Q.x;Ua.y=oa.y}if(oa.y>Fa.top&&oa.y<Fa.bottom)if(Q.x>=Fa.left&&Q.x<=S.x||S.x<=pa.right&&S.x>=Q.x){if(90===ga||270===ga)oa=new F(Math.max((S.x+Q.x)/2,S.x),S.y),Ua=new F(oa.x,Q.y)}else oa.y=270===ga||(0===ga||180===ga)&&Q.y<S.y?Math.min(Q.y,0===ga?Fa.top:
Math.min(Fa.top,pa.top)):Math.max(Q.y,0===ga?Fa.bottom:Math.max(Fa.bottom,pa.bottom)),Ua.x=Q.x,Ua.y=oa.y}else if(180===tb)if(Q.x<S.x||270===ga&&Q.y<S.y&&pa.left<S.x||90===ga&&Q.y>S.y&&pa.left<S.x)oa=new F(Q.x,S.y),Ua=new F(Q.x,(S.y+Q.y)/2),0===ga?(oa.x=zm(this,S.x,Q.x),Ua.x=oa.x,Ua.y=Q.y):270===ga&&Q.y<S.y||90===ga&&Q.y>S.y?(oa.x=S.x>pa.right?zm(this,S.x,pa.right):S.x>pa.left&&(270===ga&&S.y<pa.top||90===ga&&S.y>pa.bottom)?zm(this,S.x,Q.x):pa.left,Ua.x=oa.x,Ua.y=Q.y):180===ga&&(S.x>pa.right&&S.y>
pa.top&&S.y<pa.bottom)&&(oa.x=S.x,oa.y=S.y<Q.y?Math.min(Q.y,pa.top):Math.max(Q.y,pa.bottom),Ua.y=oa.y);else{oa=new F(S.x,Q.y);Ua=new F((S.x+Q.x)/2,Q.y);if(0===ga||90===ga&&Q.y<Fa.top||270===ga&&Q.y>Fa.bottom){if(0===ga&&(pa.ua(S)||Fa.ua(Q)))oa.y=zm(this,S.y,Q.y);else if(Q.y<S.y&&(0===ga||90===ga))oa.y=zm(this,Fa.top,Math.max(Q.y,pa.bottom));else if(Q.y>S.y&&(0===ga||270===ga))oa.y=zm(this,Fa.bottom,Math.min(Q.y,pa.top));Ua.x=Q.x;Ua.y=oa.y}if(oa.y>Fa.top&&oa.y<Fa.bottom)if(Q.x<=Fa.right&&Q.x>=S.x||
S.x>=pa.left&&S.x<=Q.x){if(90===ga||270===ga)oa=new F(Math.min((S.x+Q.x)/2,S.x),S.y),Ua=new F(oa.x,Q.y)}else oa.y=270===ga||(0===ga||180===ga)&&Q.y<S.y?Math.min(Q.y,180===ga?Fa.top:Math.min(Fa.top,pa.top)):Math.max(Q.y,180===ga?Fa.bottom:Math.max(Fa.bottom,pa.bottom)),Ua.x=Q.x,Ua.y=oa.y}else if(90===tb)if(Q.y>S.y||180===ga&&Q.x<S.x&&pa.bottom>S.y||0===ga&&Q.x>S.x&&pa.bottom>S.y)oa=new F(S.x,Q.y),Ua=new F((S.x+Q.x)/2,Q.y),270===ga?(oa.y=zm(this,S.y,Q.y),Ua.x=Q.x,Ua.y=oa.y):180===ga&&Q.x<S.x||0===ga&&
Q.x>S.x?(oa.y=S.y<pa.top?zm(this,S.y,pa.top):S.y<pa.bottom&&(180===ga&&S.x<pa.left||0===ga&&S.x>pa.right)?zm(this,S.y,Q.y):pa.bottom,Ua.x=Q.x,Ua.y=oa.y):90===ga&&(S.y<pa.top&&S.x>pa.left&&S.x<pa.right)&&(oa.x=S.x<Q.x?Math.min(Q.x,pa.left):Math.max(Q.x,pa.right),oa.y=S.y,Ua.x=oa.x);else{oa=new F(Q.x,S.y);Ua=new F(Q.x,(S.y+Q.y)/2);if(270===ga||0===ga&&Q.x<Fa.left||180===ga&&Q.x>Fa.right){if(270===ga&&(pa.ua(S)||Fa.ua(Q)))oa.x=zm(this,S.x,Q.x);else if(Q.x<S.x&&(270===ga||0===ga))oa.x=zm(this,Fa.left,
Math.max(Q.x,pa.right));else if(Q.x>S.x&&(270===ga||180===ga))oa.x=zm(this,Fa.right,Math.min(Q.x,pa.left));Ua.x=oa.x;Ua.y=Q.y}if(oa.x>Fa.left&&oa.x<Fa.right)if(Q.y>=Fa.top&&Q.y<=S.y||S.y<=pa.bottom&&S.y>=Q.y){if(0===ga||180===ga)oa=new F(S.x,Math.max((S.y+Q.y)/2,S.y)),Ua=new F(Q.x,oa.y)}else oa.x=180===ga||(90===ga||270===ga)&&Q.x<S.x?Math.min(Q.x,90===ga?Fa.left:Math.min(Fa.left,pa.left)):Math.max(Q.x,90===ga?Fa.right:Math.max(Fa.right,pa.right)),Ua.x=oa.x,Ua.y=Q.y}else if(Q.y<S.y||180===ga&&Q.x<
S.x&&pa.top<S.y||0===ga&&Q.x>S.x&&pa.top<S.y)oa=new F(S.x,Q.y),Ua=new F((S.x+Q.x)/2,Q.y),90===ga?(oa.y=zm(this,S.y,Q.y),Ua.x=Q.x,Ua.y=oa.y):180===ga&&Q.x<S.x||0===ga&&Q.x>=S.x?(oa.y=S.y>pa.bottom?zm(this,S.y,pa.bottom):S.y>pa.top&&(180===ga&&S.x<pa.left||0===ga&&S.x>pa.right)?zm(this,S.y,Q.y):pa.top,Ua.x=Q.x,Ua.y=oa.y):270===ga&&(S.y>pa.bottom&&S.x>pa.left&&S.x<pa.right)&&(oa.x=S.x<Q.x?Math.min(Q.x,pa.left):Math.max(Q.x,pa.right),oa.y=S.y,Ua.x=oa.x);else{oa=new F(Q.x,S.y);Ua=new F(Q.x,(S.y+Q.y)/2);
if(90===ga||0===ga&&Q.x<Fa.left||180===ga&&Q.x>Fa.right){if(90===ga&&(pa.ua(S)||Fa.ua(Q)))oa.x=zm(this,S.x,Q.x);else if(Q.x<S.x&&(90===ga||0===ga))oa.x=zm(this,Fa.left,Math.max(Q.x,pa.right));else if(Q.x>S.x&&(90===ga||180===ga))oa.x=zm(this,Fa.right,Math.min(Q.x,pa.left));Ua.x=oa.x;Ua.y=Q.y}if(oa.x>Fa.left&&oa.x<Fa.right)if(Q.y<=Fa.bottom&&Q.y>=S.y||S.y>=pa.top&&S.y<=Q.y){if(0===ga||180===ga)oa=new F(S.x,Math.min((S.y+Q.y)/2,S.y)),Ua=new F(Q.x,oa.y)}else oa.x=180===ga||(90===ga||270===ga)&&Q.x<S.x?
Math.min(Q.x,270===ga?Fa.left:Math.min(Fa.left,pa.left)):Math.max(Q.x,270===ga?Fa.right:Math.max(Fa.right,pa.right)),Ua.x=oa.x,Ua.y=Q.y}this.td(oa);this.td(Ua)}}(r||m!==Eb||p)&&this.td(Ab);this.td(lc)}}return h};function Am(a,b){Math.abs(b.x-a.x)>Math.abs(b.y-a.y)?(b.x=b.x>=a.x?a.x+9E9:a.x-9E9,b.y=a.y):(b.y=b.y>=a.y?a.y+9E9:a.y-9E9,b.x=a.x);return b}
U.prototype.getLinkPointFromPoint=U.prototype.CK=function(a,b,c,d){if(a===n||b===n)return c;if(!a.nb()){var e=Il(a);e!==n&&e!==a&&(b=e.port)}var g,a=n;if(b.fa===n)e=d.x,d=d.y,g=c.x,c=c.y;else{a=b.fa.ie;e=1/(a.m11*a.m22-a.m12*a.m21);g=a.m22*e;var i=-a.m12*e,j=-a.m21*e,k=a.m11*e,l=e*(a.m21*a.dy-a.m22*a.dx),m=e*(a.m12*a.dx-a.m11*a.dy),e=d.x*g+d.y*j+l,d=d.x*i+d.y*k+m;g=c.x*g+c.y*j+l;c=c.x*i+c.y*k+m}i=new F;b.Ur(e,d,g,c,i);a&&i.transform(a);return i};
function Bm(a,b){var c=a.Fd;c===n&&(c=new Cm,c.port=a,c.Qg=a.ca,a.Fd=c);return Dm(c,b)}U.prototype.getLinkPoint=U.prototype.BK=function(a,b,c,d,e,g,i){if(rb(c))return c=b.Ob(c);if(sb(c)&&(c=Bm(b,this),c!==n))return c=c.io;c=b.Ob(Mb);this.ka>(e?6:2)?(i=d?this.p(1):this.p(this.ka-2),e&&(i=Am(c,i.copy()))):(i=i.Ob(Mb),e&&(i=Am(c,i)));return this.getLinkPointFromPoint(a,b,c,i,d)};
U.prototype.getLinkDirection=U.prototype.AK=function(a,b,c,d,e,g,i,j){a:if(rb(d))c=d.x>d.y?d.x>1-d.y?0:d.x<1-d.y?270:315:d.x<d.y?d.x>1-d.y?90:d.x<1-d.y?180:135:0.5>d.x?225:0.5<d.x?45:0;else{if(sb(d)&&(d=Bm(b,this),d!==n))switch(d.be){case w.kd:c=270;break a;case w.Oc:c=180;break a;default:case w.Xc:c=0;break a;case w.Wc:c=90;break a}d=b.Ob(Mb);this.ka>(g?6:2)?(j=e?this.p(1):this.p(this.ka-2),j=g?Am(d,j.copy()):c):j=j.Ob(Mb);c=Math.abs(j.x-d.x)>Math.abs(j.y-d.y)?j.x>=d.x?0:180:j.y>=d.y?90:270}g=Rl;
g=e?this.Sr:this.Ds;g===Rl&&(g=e?b.Sr:b.Ds);switch(g){case Sl:a=a.angle;c+=a;360<=c&&(c-=360);break;case Rl:case hj:a=a.angle;if(0===a)break;45<=a&&135>a?c+=90:135<=a&&225>a?c+=180:225<=a&&315>a&&(c+=270);360<=c&&(c-=360)}return c};U.prototype.getEndSegmentLength=U.prototype.zK=function(a,b,c,d){if(sb(c)&&(a=Bm(b,this),a!==n))return a.kv;a=NaN;a=d?this.Nk:this.$k;isNaN(a)&&(a=d?b.Nk:b.$k);isNaN(a)&&(a=10);return a};
function qm(a,b){var c=a.kb;Cb(c)&&(b===f&&(b=a.gd),b!==n&&(c=b.kb));return c===Ib?Eb:c}function rm(a,b){var c=a.ob;Cb(c)&&(b===f&&(b=a.ce),b!==n&&(c=b.ob));return c===Ib?Eb:c}function Em(a){var b=a.Tr;isNaN(b)&&(a=a.gd,a!==n&&(b=a.Tr));return isNaN(b)?0:b}function Fm(a){var b=a.Es;isNaN(b)&&(a=a.ce,a!==n&&(b=a.Es));return isNaN(b)?0:b}function Yg(a){a=a.cn;return a===fk||a===Rf}function lm(a){if(a.Qh===n){var b=Yg(a);a.Qh=a.gd===a.ce&&!b}return a.Qh?gk:a.vf}
function Gm(a){if(a.vf===gk)return 0;a=a.pC;if(isNaN(a)||0>a)a=10;return a}U.prototype.computeCurviness=U.prototype.jJ=function(){var a=this.Qy;if(isNaN(a)){var b=this.xe;if(0!==b){var c=this.gl,a=c!==n?c.spacing:10,c=Math.abs(b),a=a/2+((c-1)/2|0)*a;0===c%2&&(a=-a);0>b&&(a=-a)}else a=10}return a};U.prototype.hasCurviness=U.prototype.KK=function(){return!isNaN(this.Qy)||0!==this.xe&&!Yg(this)};
function sm(a,b,c,d,e){var g=a.Ru;if(Yg(a)){if(g===kk)return q;g===lk&&(g=jk)}switch(g){case kk:var i=a.p(b),j=a.p(d);if(!i.I(c)||!j.I(e)){var g=i.x,i=i.y,k=j.x-g,l=j.y-i,m=Math.sqrt(k*k+l*l);if(!Ta(m,0)){var p;Ta(k,0)?p=0>l?-Math.PI/2:Math.PI/2:(p=Math.atan(l/Math.abs(k)),0>k&&(p=Math.PI-p));var j=c.x,r=c.y,k=e.x-j,s=e.y-r,l=Math.sqrt(k*k+s*s);Ta(k,0)?s=0>s?-Math.PI/2:Math.PI/2:(s=Math.atan(s/Math.abs(k)),0>k&&(s=Math.PI-s));m=l/m;p=s-p;a.J(b,c);for(b+=1;b<d;b++)c=a.p(b),k=c.x-g,l=c.y-i,c=Math.sqrt(k*
k+l*l),Ta(c,0)||(Ta(k,0)?l=0>l?-Math.PI/2:Math.PI/2:(l=Math.atan(l/Math.abs(k)),0>k&&(l=Math.PI-l)),k=l+p,c*=m,a.J(b,new F(j+c*Math.cos(k),r+c*Math.sin(k))));a.J(d,e)}}return h;case lk:i=a.p(b);r=a.p(d);if(!i.I(c)||!r.I(e)){g=i.x;i=i.y;j=r.x;r=r.y;m=(j-g)*(j-g)+(r-i)*(r-i);k=c.x;p=c.y;var l=e.x,s=e.y,v=0,y=1,v=0!==l-k?(s-p)/(l-k):9E9;0!==v&&(y=Math.sqrt(1+1/(v*v)));a.J(b,c);for(b+=1;b<d;b++){var c=a.p(b),C=c.x,E=c.y,I=0.5;0!==m&&(I=((g-C)*(g-j)+(i-E)*(i-r))/m);var D=g+I*(j-g),M=i+I*(r-i),c=Math.sqrt((C-
D)*(C-D)+(E-M)*(E-M));E<v*(C-D)+M&&(c=-c);0<v&&(c=-c);C=k+I*(l-k);I=p+I*(s-p);0!==v?(c=C+c/y,a.J(b,new F(c,I-(c-C)/v))):a.J(b,new F(C,I+c))}a.J(d,e)}return h;case jk:return Yg(a)&&(g=a.p(b+1),i=a.p(b+2),Ta(g.x,i.x)&&!Ta(g.y,i.y)?a.J(b+1,new F(g.x,c.y)):Ta(g.y,i.y)&&a.J(b+1,new F(c.x,g.y)),g=a.p(d-1),i=a.p(d-2),Ta(g.x,i.x)&&!Ta(g.y,i.y)?a.J(d-1,new F(g.x,e.y)):Ta(g.y,i.y)&&a.J(d-1,new F(e.x,g.y))),a.J(b,c),a.J(d,e),h;default:return q}}
function zm(a,b,c){return a.hasCurviness()?(a=a.computeCurviness(),(b+c)/2+a):(b+c)/2}
function ym(a,b,c,d,e,g){var i=b.Ll,j=b.Kl,k=wm(b,c,d),l=c,m=d;for(0===e?l+=i:90===e?m+=j:180===e?l-=i:m-=j;k>Hm&&wm(b,l,m)===k-Im;)c=l,d=m,0===e?l+=i:90===e?m+=j:180===e?l-=i:m-=j,k-=Im;if(g){if(k>Hm)if(180===e||0===e)c=Math.floor(c/i)*i+i/2;else if(90===e||270===e)d=Math.floor(d/j)*j+j/2}else c=Math.floor(c/i)*i+i/2,d=Math.floor(d/j)*j+j/2;k>Hm&&(g=e,l=c,m=d,0===e?(g=90,m+=j):90===e?(g=180,l-=i):180===e?(g=270,m-=j):270===e&&(g=0,l+=i),wm(b,l,m)===k-Im?ym(a,b,l,m,g,q):(l=c,m=d,0===e?(g=270,m-=j):
90===e?(g=0,l+=i):180===e?(g=90,m+=j):270===e&&(g=180,l-=i),wm(b,l,m)===k-Im&&ym(a,b,l,m,g,q)));a.td(new F(c,d))}U.prototype.findClosestSegment=U.prototype.iK=function(a){u&&w.i(a,F,U,"findClosestSegment:p");for(var b=a.x,a=a.y,c=this.p(0),d=this.p(1),e=$a(b,a,c.x,c.y,d.x,d.y),g=0,i=1;i<this.ka-1;i++){var c=this.p(i+1),j=$a(b,a,d.x,d.y,c.x,c.y),d=c;j<e&&(g=i,e=j)}return g};U.prototype.invalidateGeometry=U.prototype.Wf=function(){this.jh=this.Ga=n;this.R()};
w.u(U,{Tc:"geometry"},function(){this.Ga===n&&(km(this),this.Ga=Jm(this));return this.Ga});U.prototype.Gv=function(){if(this.Ga===n&&this.oi!==q){this.Ga=Jm(this);var a=this.yp();if(a!==n){a.Ga=this.Ga;for(var b=this.Fa,c=b.length,d=0;d<c;d++){var e=b.n[d];e!==a&&(e.Fi&&e instanceof V)&&(e.Ga=this.Ga)}}}};
function Jm(a){var b=a.ka;if(2>b){var a=new dd(ed),c=new fd(0,0);a.sb.add(c);return a}var d,e=a.p(0).copy(),g=new F(Infinity,Infinity);g.x=Math.min(e.x,g.x);g.y=Math.min(e.y,g.y);var i=lm(a);if(i===gk&&3<=b&&!Sa(a.As,0))if(3===b){var j=a.p(1),c=Math.min(e.x,j.x);d=Math.min(e.y,j.y);j=a.p(2);c=Math.min(c,j.x);d=Math.min(d,j.y)}else{if(Yg(a))for(j=0;j<b;j++)c=a.Sc.n[j],g.x=Math.min(c.x,g.x),g.y=Math.min(c.y,g.y);else for(var k,j=3;j<b;j+=3)j+3>=b&&(j=b-1),k=a.p(j),g.x=Math.min(k.x,g.x),g.y=Math.min(k.y,
g.y);c=g.x;d=g.y}else{for(j=0;j<b;j++)c=a.Sc.n[j],g.x=Math.min(c.x,g.x),g.y=Math.min(c.y,g.y);c=g.x;d=g.y}c-=a.Iu.x;d-=a.Iu.y;e.x-=c;e.y-=d;if(2===b){var l=a.p(1).copy();l.x-=c;l.y-=d;0!==Em(a)&&Km(a,e,h,g);0!==Fm(a)&&Km(a,l,q,g);a=new dd(hd);a.la=e.x;a.ma=e.y;a.C=l.x;a.D=l.y;return a}l=new J;0!==Em(a)&&Km(a,e,h,g);K(l,e.x,e.y,q,q);if(i===gk&&3<=b&&!Sa(a.As,0))if(3===b)j=a.p(1),b=j.x-c,e=j.y-d,j=a.p(2).copy(),j.x-=c,j.y-=d,0!==Fm(a)&&Km(a,j,q,g),L(l,b,e,b,e,j.x,j.y);else if(Yg(a)){e=new F(c,d);i=
a.p(1).copy();k=new F(c,d);for(var b=new F(c,d),g=a.p(0),m=n,p=a.As/3,j=1;j<a.ka-1;j++){var m=a.p(j),r=g,s=m,v=a.p(Lm(a,m,j,q));if(!Sa(r.x,s.x)||!Sa(s.x,v.x))if(!Sa(r.y,s.y)||!Sa(s.y,v.y)){var y=p,C=k,E=b;isNaN(y)&&(y=a.As/3);var I=r.x,r=r.y,D=s.x,s=s.y,M=v.x,v=v.y,N=y*Mm(I,r,D,s),y=y*Mm(D,s,M,v);Sa(r,s)&&Sa(D,M)&&(D>I?v>s?(C.x=D-N,C.y=s-N,E.x=D+y,E.y=s+y):(C.x=D-N,C.y=s+N,E.x=D+y,E.y=s-y):v>s?(C.x=D+N,C.y=s-N,E.x=D-y,E.y=s+y):(C.x=D+N,C.y=s+N,E.x=D-y,E.y=s-y));Sa(I,D)&&Sa(s,v)&&(s>r?(M>D?(C.x=D-
N,C.y=s-N,E.x=D+y):(C.x=D+N,C.y=s-N,E.x=D-y),E.y=s+y):(M>D?(C.x=D-N,C.y=s+N,E.x=D+y):(C.x=D+N,C.y=s+N,E.x=D-y),E.y=s-y));if(Sa(I,D)&&Sa(D,M)||Sa(r,s)&&Sa(s,v))I=0.5*(I+M),r=0.5*(r+v),C.x=I,C.y=r,E.x=I,E.y=r;1===j?(i.x=0.5*(g.x+m.x),i.y=0.5*(g.y+m.y)):2===j&&(Sa(g.x,a.p(0).x)&&Sa(g.y,a.p(0).y))&&(i.x=0.5*(g.x+m.x),i.y=0.5*(g.y+m.y));L(l,i.x-c,i.y-d,k.x-c,k.y-d,m.x-c,m.y-d);e.set(k);i.set(b);g=m}}j=g.x;g=g.y;a=a.p(a.ka-1);j=0.5*(j+a.x);g=0.5*(g+a.y);L(l,b.x-c,b.y-d,j-c,g-d,a.x-c,a.y-d)}else for(j=3;j<
b;j+=3)g=a.p(j-2),j+3>=b&&(j=b-1),e=a.p(j-1),k=a.p(j),j===b-1&&0!==Fm(a)&&(k=k.copy(),Km(a,k,q,ic)),L(l,g.x-c,g.y-d,e.x-c,e.y-d,k.x-c,k.y-d);else{m=a.p(0);for(j=1;j<b;){j=Lm(a,m,j,1<j);p=a.p(j);if(j>=b-1){m!==p&&(0!==Fm(a)&&(p=p.copy(),Km(a,p,q,ic)),Nm(a,l,-c,-d,m,p));break}j=Lm(a,p,j+1,j<b-3);g=a;e=l;i=-c;k=-d;C=a.p(j);Ta(m.y,p.y)&&Ta(p.x,C.x)?(E=Gm(g),E=Math.min(E,Math.abs(p.x-m.x)/2),E=I=Math.min(E,Math.abs(C.y-p.y)/2),Ta(E,0)?(Nm(g,e,i,k,m,p),m=p):(r=p.x,y=p.y,D=r,s=y,r=p.x>m.x?p.x-E:p.x+E,s=
C.y>p.y?p.y+I:p.y-I,Nm(g,e,i,k,m,new F(r,y)),Ad(e,p.x+i,p.y+k,D+i,s+k),m=new F(D,s))):Ta(m.x,p.x)&&Ta(p.y,C.y)?(E=Gm(g),I=Math.min(E,Math.abs(p.y-m.y)/2),I=E=Math.min(I,Math.abs(C.x-p.x)/2),Ta(E,0)?(Nm(g,e,i,k,m,p),m=p):(r=p.x,s=y=p.y,y=p.y>m.y?p.y-I:p.y+I,D=C.x>p.x?p.x+E:p.x-E,Nm(g,e,i,k,m,new F(r,y)),Ad(e,p.x+i,p.y+k,D+i,s+k),m=new F(D,s))):(Nm(g,e,i,k,m,p),m=p)}}return l.q}
function Mm(a,b,c,d){a=c-a;if(isNaN(a)||Infinity===a||-Infinity===a)return NaN;0>a&&(a=-a);b=d-b;if(isNaN(b)||Infinity===b||-Infinity===b)return NaN;0>b&&(b=-b);return Sa(a,0)?b:Sa(b,0)?a:Math.sqrt(a*a+b*b)}
function Km(a,b,c,d){var e=a.ka;if(!(2>e))if(c){var g=a.p(1),c=g.x-d.x,d=g.y-d.y,g=Mm(b.x,b.y,c,d);0!==g&&(e=2===e?0.5*g:g,a=Em(a),a>e&&(a=e),c=a*(c-b.x)/g,a=a*(d-b.y)/g,b.x+=c,b.y+=a)}else g=a.p(e-2),c=g.x-d.x,d=g.y-d.y,g=Mm(b.x,b.y,c,d),0!==g&&(e=2===e?0.5*g:g,a=Fm(a),a>e&&(a=e),c=a*(b.x-c)/g,a=a*(b.y-d)/g,b.x-=c,b.y-=a)}
function Lm(a,b,c,d){for(var e=a.ka,g=b;Sa(b.x,g.x)&&Sa(b.y,g.y);){if(c>=e)return e-1;g=a.p(c++)}if(!Sa(b.x,g.x)&&!Sa(b.y,g.y))return c-1;for(var i=g;Sa(b.x,g.x)&&Sa(g.x,i.x)&&(!d||(b.y>=g.y?g.y>=i.y:g.y<=i.y))||Sa(b.y,g.y)&&Sa(g.y,i.y)&&(!d||(b.x>=g.x?g.x>=i.x:g.x<=i.x));){if(c>=e)return e-1;i=a.p(c++)}return c-2}
function Nm(a,b,c,d,e,g){if(jm(a)){var i=new z("number"),j;a:if(j=a.h,j===n)j=0;else{Math.min(e.x,g.x);Math.min(e.y,g.y);Math.max(e.x,g.x);Math.max(e.y,g.y);for(j=j.Ev;j.next();){var k=j.value;if(k!==n&&k.visible)for(k=k.Xk;k.next();){var l=k.value;if(l===a){0<i.length&&i.sort(function(a,b){return a-b});j=i.length;break a}if(l instanceof U&&a.nb()&&l.nb()&&jm(l)&&a.Sh().Le(l.Sh())&&!a.usesSamePort(l)){var m=l.path;if(m!==n&&m.Sk())for(var m=e,p=g,r=i,s=l.ka,v=1;v<s;v++){var y=l.p(v-1),C=l.p(v),E=
new F,I;b:{I=m;var D=p,M=E;if(Ta(I.x,D.x)){if(Ta(y.y,C.y)&&Math.min(I.y,D.y)<=y.y&&Math.max(I.y,D.y)>=y.y&&Math.min(y.x,C.x)<=I.x&&Math.max(y.x,C.x)>=I.x&&!Ta(y.x,C.x)){M.x=I.x;M.y=y.y;I=h;break b}}else if(Ta(y.x,C.x)&&Math.min(I.x,D.x)<=y.x&&Math.max(I.x,D.x)>=y.x&&Math.min(y.y,C.y)<=I.y&&Math.max(y.y,C.y)>=I.y&&!Ta(y.y,C.y)){M.x=y.x;M.y=I.y;I=h;break b}M.x=0;M.y=0;I=q}I&&(Ta(m.y,p.y)?r.add(E.x):r.add(E.y))}}}}0<i.length&&i.sort(function(a,b){return a-b});j=i.length}m=e.x;m=e.y;if(0<j)if(Ta(e.y,
g.y))if(e.x<g.x)for(k=0;k<j;){r=Math.max(e.x,Math.min(i.n[k++]-5,g.x-10));b.lineTo(r+c,g.y+d);m=r+c;for(p=Math.min(r+10,g.x);k<j;)if(l=i.n[k],l<p+10)k++,p=Math.min(l+5,g.x);else break;l=(r+p)/2+c;l=g.y-10+d;r=p+c;p=g.y+d;a.vf===hk?K(b,r,p,q,q):L(b,m,l,r,l,r,p)}else for(k=j-1;0<=k;){r=Math.min(e.x,Math.max(i.n[k--]+5,g.x+10));b.lineTo(r+c,g.y+d);m=r+c;for(p=Math.max(r-10,g.x);0<=k;)if(l=i.n[k],l>p-10)k--,p=Math.max(l-5,g.x);else break;l=g.y-10+d;r=p+c;p=g.y+d;a.vf===hk?K(b,r,p,q,q):L(b,m,l,r,l,r,p)}else if(Ta(e.x,
g.x))if(e.y<g.y)for(k=0;k<j;){r=Math.max(e.y,Math.min(i.n[k++]-5,g.y-10));b.lineTo(g.x+c,r+d);m=r+d;for(p=Math.min(r+10,g.y);k<j;)if(l=i.n[k],l<p+10)k++,p=Math.min(l+5,g.y);else break;l=g.x-10+c;r=g.x+c;p+=d;a.vf===hk?K(b,r,p,q,q):L(b,l,m,l,p,r,p)}else for(k=j-1;0<=k;){r=Math.min(e.y,Math.max(i.n[k--]+5,g.y+10));b.lineTo(g.x+c,r+d);m=r+d;for(p=Math.max(r-10,g.y);0<=k;)if(l=i.n[k],l>p-10)k--,p=Math.max(l-5,g.y);else break;l=g.x-10+c;r=g.x+c;p+=d;a.vf===hk?K(b,r,p,q,q):L(b,l,m,l,p,r,p)}}b.lineTo(g.x+
c,g.y+d)}w.u(U,{sv:"firstPickIndex"},function(){return 2>=this.ka?0:Yg(this)||qm(this)!==Eb?1:0});w.u(U,{nz:"lastPickIndex"},function(){var a=this.ka;return 0===a?0:2>=a?a-1:Yg(this)||rm(this)!==Eb?a-2:a-1});function jm(a){a=a.vf;return a===ik||a===hk}function pm(a,b){if(b||jm(a)){var c=a.h;c!==n&&(!c.Si.contains(a)&&a.Nx!==n)&&c.Si.add(a,a.Nx)}}
function Sg(a,b){var c=a.Ja;if(!(c===n||!c.visible||c.yc)){var d=c.h;if(d!==n)for(var e=q,d=d.Ev;d.next();){var g=d.value;if(g.visible)if(g===c)for(var e=h,i=q,g=g.Xk;g.next();){var j=g.value;j instanceof U&&(j===a?i=h:i&&Om(a,j,b))}else if(e)for(g=g.Xk;g.next();)j=g.value,j instanceof U&&Om(a,j,b)}}}function Om(a,b,c){if(b!==n&&jm(b)&&b.Ga!==n&&(a.Sh().Le(b.Sh())||c.Le(b.Sh())))a.usesSamePort(b)||b.Wf()}
U.prototype.usesSamePort=U.prototype.oM=function(a){var b=this.ka,c=a.ka;if(0<b&&0<c){if(this.p(0).yi(a.p(0))||this.p(b-1).yi(a.p(c-1)))return h}else if(this.ia===a.ia||this.na===a.na)return h;return q};w.g(U,"adjusting",U.prototype.Ru);w.defineProperty(U,{Ru:"adjusting"},t("Mo"),function(a){var b=this.Mo;b!==a&&(u&&w.jb(a,U,U,"adjusting"),this.Mo=a,this.j("adjusting",b,a))});w.g(U,"corner",U.prototype.pC);
w.defineProperty(U,{pC:"corner"},t("Xo"),function(a){var b=this.Xo;b!==a&&(u&&w.k(a,"number",U,"corner"),this.Xo=a,this.Wf(),this.j("corner",b,a))});w.g(U,"curve",U.prototype.vf);w.defineProperty(U,{vf:"curve"},t("Zo"),function(a){var b=this.Zo;b!==a&&(u&&w.jb(a,U,U,"curve"),this.Zo=a,this.Sb(),pm(this,b===hk||b===ik||a===hk||a===ik),this.j("curve",b,a))});w.g(U,"curviness",U.prototype.Qy);
w.defineProperty(U,{Qy:"curviness"},t("$o"),function(a){var b=this.$o;b!==a&&(u&&w.k(a,"number",U,"curviness"),this.$o=a,this.Sb(),this.j("curviness",b,a))});w.g(U,"routing",U.prototype.Ch);w.defineProperty(U,{Ch:"routing"},t("cn"),function(a){var b=this.cn;b!==a&&(u&&w.jb(a,U,U,"routing"),this.cn=a,this.Qh=n,this.Sb(),pm(this,b===fk||b===Rf||a===fk||a===Rf),this.j("routing",b,a))});w.g(U,"smoothness",U.prototype.As);
w.defineProperty(U,{As:"smoothness"},t("Yq"),function(a){var b=this.Yq;b!==a&&(u&&w.k(a,"number",U,"smoothness"),this.Yq=a,this.Wf(),this.j("smoothness",b,a))});
function hm(a){var b=a.Gf;if(b!==n){var c=a.Qf;if(c!==n){var d=a.Vg,a=a.rh,e;a:{if(!(c===n||b.Sg===n))for(e=b.Sg.l;e.next();){var g=e.value;if(g.po===b&&g.ms===c&&g.Kv===d&&g.Lv===a||g.po===c&&g.ms===b&&g.Kv===a&&g.Lv===d){e=g;break a}}e=n}for(var i=g=n,j=b.Zc.n,k=j.length,l=0;l<k;l++){var m=j[l];if(m.Gf===b&&m.Vg===d&&m.Qf===c&&m.rh===a||m.Gf===c&&m.Vg===a&&m.Qf===b&&m.rh===d)i===n?i=m:(g===n&&(g=new z(U),g.add(i)),g.add(m))}if(g!==n){e===n&&(e=new Ul,e.po=b,e.Kv=d,e.ms=c,e.Lv=a,Tl(b,e),Tl(c,e));
e.links=g;for(l=0;l<g.count;l++)if(m=g.n[l],0===m.xe){b=1;for(c=0;c<g.count;c++)Math.abs(g.n[c].xe)===b&&(b++,c=-1);m.gl=e;m.xe=m.ia===e.po?b:-b;m.Sb()}}}}}
function gm(a){var b=a.gl;if(b!==n){var c=a.xe;a.gl=n;a.xe=0;a.Sb();b.links.remove(a);if(2>b.links.count)1===b.links.count&&(c=b.links.n[0],c.gl=n,c.xe=0,c.Sb()),c=b.po,b!==n&&c.Sg!==n&&c.Sg.remove(b),c=b.ms,b!==n&&c.Sg!==n&&c.Sg.remove(b);else{c=Math.abs(c);a=0===c%2;for(b=b.links.l;b.next();){var d=b.value,e=Math.abs(d.xe),g=0===e%2;e>c&&a===g&&(d.xe=0<d.xe?d.xe-2:d.xe+2,d.Sb())}}}}function Ul(){w.ic(this);this.links=this.Lv=this.ms=this.Kv=this.po=n;this.spacing=10}
w.Jd(Ul,{po:h,Kv:h,ms:h,Lv:h,links:h,spacing:h});function tm(){w.ic(this);this.group=n;this.$r=h;this.abort=q;this.hh=this.gh=1;this.Tt=this.St=-1;this.ee=this.de=8;this.Yb=n;this.OE=q;this.qE=22;this.oD=111}w.Jd(tm,{group:h,$r:h,abort:h,OE:h,qE:h,oD:h});var Hm=1,Im=1,xm=999999999,Pm=xm;
tm.prototype.initialize=function(a){if(!(0>=a.width||0>=a.height)){var b=a.y,c=a.x+a.width,d=a.y+a.height;this.gh=Math.floor((a.x-this.de)/this.de)*this.de;this.hh=Math.floor((b-this.ee)/this.ee)*this.ee;this.St=Math.ceil((c+2*this.de)/this.de)*this.de;this.Tt=Math.ceil((d+2*this.ee)/this.ee)*this.ee;a=1+(Math.ceil((this.St-this.gh)/this.de)|0);b=1+(Math.ceil((this.Tt-this.hh)/this.ee)|0);if(this.Yb===n||this.or<a-1||this.pr<b-1){c=[];for(d=0;d<=a;d++){for(var e=[],g=0;g<=b;g++)e[g]=0;c[d]=e}this.Yb=
c;this.or=a-1;this.pr=b-1}if(this.Yb!==n)for(a=0;a<=this.or;a++)for(b=0;b<=this.pr;b++)this.Yb[a][b]=Pm}};w.u(tm,{Eb:n},function(){return new G(this.gh,this.hh,this.St-this.gh,this.Tt-this.hh)});w.g(tm,"cellWidth",tm.prototype.Ll);w.defineProperty(tm,{Ll:n},t("de"),function(a){0<a&&a!==this.de&&(this.de=a,this.initialize(this.Eb))});w.g(tm,"cellHeight",tm.prototype.Kl);w.defineProperty(tm,{Kl:n},t("ee"),function(a){0<a&&a!==this.ee&&(this.ee=a,this.initialize(this.Eb))});
function Qm(a,b,c){return a.gh<=b&&b<=a.St&&a.hh<=c&&c<=a.Tt}function wm(a,b,c){if(!Qm(a,b,c))return 0;b-=a.gh;b/=a.de;c-=a.hh;c/=a.ee;return a.Yb[b|0][c|0]}function aj(a,b,c){Qm(a,b,c)&&(b-=a.gh,b/=a.de,c-=a.hh,c/=a.ee,a.Yb[b|0][c|0]=0)}function um(a){if(a.Yb!==n)for(var b=0;b<=a.or;b++)for(var c=0;c<=a.pr;c++)a.Yb[b][c]>=Hm&&(a.Yb[b][c]|=xm)}
function Rm(a,b,c,d,e,g,i,j,k){if(!(b<g||b>i||c<j||c>k)){var l,m;l=b|0;m=c|0;var p=a.Yb[l][m];if(p>=Hm&&p<xm){e?m+=d:l+=d;for(p+=Im;g<=l&&(l<=i&&j<=m&&m<=k)&&!(p>=a.Yb[l][m]);)a.Yb[l][m]=p,p+=Im,e?m+=d:l+=d}l=e?m:l;if(e)if(0<d)for(c+=d;c<l;c+=d)Rm(a,b,c,1,!e,g,i,j,k),Rm(a,b,c,-1,!e,g,i,j,k);else for(c+=d;c>l;c+=d)Rm(a,b,c,1,!e,g,i,j,k),Rm(a,b,c,-1,!e,g,i,j,k);else if(0<d)for(b+=d;b<l;b+=d)Rm(a,b,c,1,!e,g,i,j,k),Rm(a,b,c,-1,!e,g,i,j,k);else for(b+=d;b>l;b+=d)Rm(a,b,c,1,!e,g,i,j,k),Rm(a,b,c,-1,!e,g,
i,j,k)}}function Sm(a,b,c,d,e,g,i,j,k,l,m){for(var p=b|0,r=c|0,s=a.Yb[p][r];0===s&&p>j&&p<k&&r>l&&r<m;)if(i?r+=g:p+=g,s=a.Yb[p][r],1>=Math.abs(p-d)&&1>=Math.abs(r-e))return a.abort=h,0;p=b|0;r=c|0;s=a.Yb[p][r];b=Hm;for(a.Yb[p][r]=b;0===s&&p>j&&p<k&&r>l&&r<m;)i?r+=g:p+=g,s=a.Yb[p][r],a.Yb[p][r]=b,b+=Im;return i?r:p}
function vm(a,b,c,d,e,g){if(a.Yb!==n){a.abort=q;var i=b.x,j=b.y;if(Qm(a,i,j)){var i=i-a.gh,i=i/a.de,j=j-a.hh,j=j/a.ee,k=d.x,l=d.y;if(Qm(a,k,l))if(k-=a.gh,k/=a.de,l-=a.hh,l/=a.ee,1>=Math.abs(i-k)&&1>=Math.abs(j-l))a.abort=h;else{var m=g.x,b=g.y,d=g.x+g.width,p=g.y+g.height,m=m-a.gh,m=m/a.de,b=b-a.hh,b=b/a.ee,d=d-a.gh,d=d/a.de,p=p-a.hh,p=p/a.ee,g=Math.max(0,Math.min(a.or,m|0)),d=Math.min(a.or,Math.max(0,d|0)),b=Math.max(0,Math.min(a.pr,b|0)),p=Math.min(a.pr,Math.max(0,p|0)),i=i|0,j=j|0,k=k|0,l=l|0,
m=i,r=j,s=0===c||90===c?1:-1;(c=90===c||270===c)?r=Sm(a,i,j,k,l,s,c,g,d,b,p):m=Sm(a,i,j,k,l,s,c,g,d,b,p);if(!a.abort){a:{for(var c=0===e||90===e?1:-1,e=90===e||270===e,s=k|0,v=l|0,y=a.Yb[s][v];0===y&&s>g&&s<d&&v>b&&v<p;)if(e?v+=c:s+=c,y=a.Yb[s][v],1>=Math.abs(s-i)&&1>=Math.abs(v-j)){a.abort=h;break a}s=k|0;v=l|0;y=a.Yb[s][v];for(a.Yb[s][v]=Pm;0===y&&s>g&&s<d&&v>b&&v<p;)e?v+=c:s+=c,y=a.Yb[s][v],a.Yb[s][v]=Pm}a.abort||(Rm(a,m,r,1,q,g,d,b,p),Rm(a,m,r,-1,q,g,d,b,p),Rm(a,m,r,1,h,g,d,b,p),Rm(a,m,r,-1,h,
g,d,b,p))}}}}}function Cm(){w.ic(this);this.ag=this.port=this.Qg=n;this.ls=q}w.Jd(Cm,{Qg:h,port:h,ag:h,ls:h});Cm.prototype.toString=function(){for(var a=this.ag,b=this.Qg.toString()+" "+a.length.toString()+":",c=0;c<a.length;c++){var d=a[c];d!==n&&(b+="\n  "+d.toString())}return b};
function Tm(a,b,c,d){b=b.offsetY;switch(b){case w.Wc:return 90;case w.Oc:return 180;case w.kd:return 270;case w.Xc:return 0}switch(b){case w.Wc|w.kd:return 180<c?270:90;case w.Oc|w.Xc:return 90<c&&270>=c?180:0}a=180*Math.atan2(a.height,a.width)/Math.PI;switch(b){case w.Oc|w.kd:return c>a&&c<=180+a?180:270;case w.kd|w.Xc:return c>180-a&&c<=360-a?270:0;case w.Xc|w.Wc:return c>a&&c<=180+a?90:0;case w.Wc|w.Oc:return c>180-a&&c<=360-a?180:90;case w.Oc|w.kd|w.Xc:return 90<c&&c<=180+a?180:c>180+a&&c<=360-
a?270:0;case w.kd|w.Xc|w.Wc:return 180<c&&c<=360-a?270:c>a&&180>=c?90:0;case w.Xc|w.Wc|w.Oc:return c>a&&c<=180-a?90:c>180-a&&270>=c?180:0;case w.Wc|w.Oc|w.kd:return c>180-a&&c<=180+a?180:c>180+a?270:90}d&&b!==(w.Oc|w.kd|w.Xc|w.Wc)&&(c-=15,0>c&&(c+=360));return c>a&&c<180-a?90:c>=180-a&&c<=180+a?180:c>180+a&&c<360-a?270:0}
function Dm(a,b){var c=a.ag;if(c===n){if(!a.ls){c=a.ls;a.ls=h;var d=a.Qg.te;a.ag=[];for(var e=0,g=new G(a.port.Ob(Jb),a.port.Ob(Rb)),d=d.l;d.next();){var i=d.value;if(i.nb()){var j=Eb,j=i.gd===a.port?qm(i,a.port):rm(i,a.port);if(sb(j)){var k;k=i.gd===a.port?i.ce:i.gd;if(k!==n&&k.ca!==n){var l=k.Ob(Mb);k=k.Fd;k=k!==n?Dm(k,i):n;k!==n&&(l=k.io);k=g.Wu.ui(l);var j=Tm(g,j,k,Yg(i)),m;0===j?(m=w.Xc,180<k&&(k-=360)):m=90===j?w.Wc:180===j?w.Oc:w.kd;(j=a.ag[e])?(j.link=i,j.angle=k,j.be=m):(j=new Um(i,k,m),
a.ag[e]=j);j.Jv.set(l);e++}}}}a.ag.sort(Cm.prototype.jH);g=a.ag.length;d=-1;for(e=i=0;e<g;e++)j=a.ag[e],j!==n&&(j.be!==d&&(d=j.be,i=0),j.$l=i,i++);d=-1;i=0;for(e=g-1;0<=e;e--)j=a.ag[e],j!==n&&(j.be!==d&&(d=j.be,i=j.$l+1),j.Gr=i);e=a.ag;for(g=0;g<e.length;g++)if(d=e[g],d!==n){l=d;j=a.port;i=d=f;switch(l.be){case w.Wc:d=j.Ob(Rb);i=j.Ob(Pb);break;case w.Oc:d=j.Ob(Pb);i=j.Ob(Jb);break;case w.kd:d=j.Ob(Jb);i=j.Ob(Lb);break;default:case w.Xc:d=j.Ob(Lb),i=j.Ob(Rb)}j=i.y-d.y;k=(l.$l+1)/(l.Gr+1);l=l.io;l.x=
d.x+(i.x-d.x)*k;l.y=d.y+j*k}e=a.ag;for(g=0;g<e.length;g++)if(i=e[g],i!==n){d=i;k=i;m=k.link;i=m.getEndSegmentLength(a.Qg,a.port,Eb,m.gd===a.port);l=k.$l;if(!(0>l)&&(j=k.Gr,!(1>=j)&&Yg(m))){m=k.Jv;var p=k.io;if(k.be===w.Oc||k.be===w.Wc)l=j-1-l;i=((k=k.be===w.Oc||k.be===w.Xc)?m.y<p.y:m.x<p.x)?i+8*l:(k?m.y===p.y:m.x===p.x)?i:i+8*(j-1-l)}d.kv=i}a.ls=c}c=a.ag}for(e=0;e<c.length;e++)if(g=c[e],g!==n&&g.link===b)return g;return n}
Cm.prototype.jH=function(a,b){return a===b?0:a===n?-1:b===n?1:a.be<b.be?-1:a.be>b.be?1:a.angle<b.angle?-1:a.angle>b.angle?1:0};function Um(a,b,c){this.link=a;this.angle=b;this.be=c;this.Jv=new F;this.$l=this.Gr=this.$l=0;this.io=new F;this.kv=0}w.Jd(Um,{link:h,angle:h,be:h,Jv:h,$l:h,Gr:h,io:h,kv:h});
Um.prototype.toString=function(){return this.link.toString()+" "+this.angle.toString()+" "+this.be.toString()+":"+this.$l.toString()+"/"+this.Gr.toString()+" "+this.io.toString()+" "+this.kv.toString()+" "+this.Jv.toString()};function vf(a){0===arguments.length?T.call(this,hh):T.call(this,a);this.gq=new ma(R);this.Ym=new ma(vf);this.uk=this.hq=this.fq=n;this.nr=q;this.Np=h;this.rr=q;this.qb=this.dr=n;this.Uo=q;this.pd=new ci;this.pd.group=this}w.P("Group",vf);w.Da(vf,T);da=vf.prototype;
da.xb=function(a){T.prototype.xb.call(this,a);a.fq=this.fq;a.hq=this.hq;a.uk=this.uk;a.nr=this.nr;a.Np=this.Np;a.rr=this.rr;a.dr=this.dr;var b=Vk(a,a,function(a){return a instanceof bh});a.qb=b instanceof bh?b:n;a.Uo=this.Uo;this.pd!==n?(a.pd=this.pd.copy(),a instanceof vf&&(a.pd.group=a)):(a.pd!==n&&(a.pd.group=n),a.pd=n)};
da.xh=function(a){T.prototype.xh.call(this,a);for(var b=a.pv(),a=a.Fc;a.next();){var c=a.value;c.R();c.F(Sj);c.vh();c instanceof vf&&(c.dw=c.Me,Vm(c,b));if(c instanceof T)c.Lg(b);else if(c instanceof U)for(c=c.Ej;c.next();)c.value.Lg(b)}};
da.em=function(a,b,c,d,e,g,i){if(a===ie&&"elements"===b)if(e instanceof bh)this.qb===n?this.qb=e:this.qb!==e&&w.m("Cannot insert a second Placeholder into the visual tree of a Group.");else{if(e instanceof x){var j=Vk(e,e,function(a){return a instanceof bh});j instanceof bh&&(this.qb===n?this.qb=j:this.qb!==j&&w.m("Cannot insert a second Placeholder into the visual tree of a Group."))}}else a===je&&"elements"===b&&(d===this.qb?this.qb=n:d instanceof x&&this.qb.Di(d)&&(this.qb=n));T.prototype.em.call(this,
a,b,c,d,e,g,i)};da.sj=function(a,b,c,d){this.bj=this.qb;x.prototype.sj.call(this,a,b,c,d);this.qb!==n&&(a=this.qb.dn,this.location=new F(a.x,a.y))};da.Rk=function(){if(!T.prototype.Rk.call(this))return q;for(var a=this.Fc;a.next();){var b=a.value;if(b instanceof T){if(b.nb()&&b.Ic)return q}else if(b instanceof U&&b.nb()&&b.Ic&&b.ia!==this&&b.na!==this)return q}return h};w.u(vf,{placeholder:"placeholder"},t("qb"));w.g(vf,"computesBoundsAfterDrag",vf.prototype.Oy);
w.defineProperty(vf,{Oy:"computesBoundsAfterDrag"},t("Uo"),function(a){var b=this.Uo;b!==a&&(w.k(a,"boolean",vf,"computesBoundsAfterDrag"),this.Uo=a,this.j("computesBoundsAfterDrag",b,a))});w.u(vf,{Fc:"memberParts"},function(){return this.gq.l});function Nl(a,b){if(a.gq.add(b)){b instanceof vf&&a.Ym.add(b);var c=a.yD;if(c!==n){var d=h,e=a.h;e!==n&&(d=e.Ma,e.Ma=h);c(a,b);e!==n&&(e.Ma=d)}}c=a.qb;c===n&&(c=a);c.R()}
function Ml(a,b){if(a.gq.remove(b)){b instanceof vf&&a.Ym.remove(b);var c=a.zD;if(c!==n){var d=h,e=a.h;e!==n&&(d=e.Ma,e.Ma=h);c(a,b);e!==n&&(e.Ma=d)}}c=a.qb;c===n&&(c=a);c.R()}vf.prototype.Ql=function(){if(0<this.gq.count){var a=this.h;if(a===n)return;for(var b=this.gq.copy().l;b.next();)a.remove(b.value)}T.prototype.Ql.call(this)};vf.prototype.Yv=function(){var a=this.Ja;a!==n&&a.Yv(this)};w.g(vf,"layout",vf.prototype.Tb);
w.defineProperty(vf,{Tb:"layout"},t("pd"),function(a){var b=this.pd;b!==a&&(a!==n&&w.i(a,ci,vf,"layout"),b!==n&&(b.h=n,b.group=n),this.pd=a,a!==n&&(a.h=this.h,a.group=this),this.j("layout",b,a))});w.g(vf,"memberAdded",vf.prototype.yD);w.defineProperty(vf,{yD:"memberAdded"},t("fq"),function(a){var b=this.fq;b!==a&&(a!==n&&w.k(a,"function",vf,"memberAdded"),this.fq=a,this.j("memberAdded",b,a))});w.g(vf,"memberRemoved",vf.prototype.zD);
w.defineProperty(vf,{zD:"memberRemoved"},t("hq"),function(a){var b=this.hq;b!==a&&(a!==n&&w.k(a,"function",vf,"memberRemoved"),this.hq=a,this.j("memberRemoved",b,a))});w.g(vf,"memberValidation",vf.prototype.gs);w.defineProperty(vf,{gs:"memberValidation"},t("uk"),function(a){var b=this.uk;b!==a&&(a!==n&&w.k(a,"function",vf,"memberValidation"),this.uk=a,this.j("memberValidation",b,a))});
vf.prototype.canAddMembers=vf.prototype.AI=function(a){var b=this.h;if(b===n)return q;b=b.Uf;for(a=b.findUnnestedNodes(a).l;a.next();)if(!b.RG(this,a.value))return q;return h};vf.prototype.addMembers=vf.prototype.vI=function(a,b){var c=this.h;if(c===n)return q;for(var c=c.Uf,d=h,e=c.findUnnestedNodes(a).l;e.next();){var g=e.value;!b||c.isValidMember(this,g)?g.bb=this:d=q}return d};w.g(vf,"ungroupable",vf.prototype.KE);
w.defineProperty(vf,{KE:"ungroupable"},t("nr"),function(a){var b=this.nr;b!==a&&(w.k(a,"boolean",vf,"ungroupable"),this.nr=a,this.j("ungroupable",b,a))});vf.prototype.canUngroup=vf.prototype.cJ=function(){if(!this.KE)return q;var a=this.Ja;if(a!==n&&!a.Gn)return q;a=a.h;return a!==n&&!a.Gn?q:h};vf.prototype.findSubGraphParts=vf.prototype.pv=function(){var a=new ma(R);lf(a,this,h,q);a.remove(this);return a};
vf.prototype.collapseSubGraph=vf.prototype.Yu=function(){var a=this.h;if(a!==n&&!a.Xf){a.Xf=h;var b=this.pv();Vm(this,b);a.Xf=q}};function Vm(a,b){a.Me=q;for(var c=a.Fc;c.next();){var d=c.value;d.R();d.F(Sj);d.vh();d instanceof vf&&(d.dw=d.Me,Vm(d,b));if(d instanceof T)d.Lg(b);else if(d instanceof U)for(d=d.Ej;d.next();)d.value.Lg(b)}}vf.prototype.expandSubGraph=vf.prototype.lv=function(){var a=this.h;if(a!==n&&!a.Xf){a.Xf=h;var b=this.pv();Wm(this,b);a.Xf=q}};
function Wm(a,b){a.Me=h;for(var c=a.Fc;c.next();){var d=c.value;d.R();d.F(Rj);d.Ji();d instanceof vf&&d.dw&&Wm(d,b);if(d instanceof T)d.Lg(b);else if(d instanceof U)for(d=d.Ej;d.next();)d.value.Lg(b)}}w.g(vf,"isSubGraphExpanded",vf.prototype.Me);
w.defineProperty(vf,{Me:"isSubGraphExpanded"},t("Np"),function(a){var b=this.Np;if(b!==a){w.k(a,"boolean",vf,"isSubGraphExpanded");this.Np=a;var c=this.h;c!==n&&Mh(c);this.j("isSubGraphExpanded",b,a);b=this.xE;if(b!==n){var d=h;c!==n&&(d=c.Ma,c.Ma=h);b(this);c!==n&&(c.Ma=d)}c!==n&&c.sa.tb||(a?this.lv():this.Yu())}});w.g(vf,"wasSubGraphExpanded",vf.prototype.dw);
w.defineProperty(vf,{dw:"wasSubGraphExpanded"},t("rr"),function(a){var b=this.rr;b!==a&&(w.k(a,"boolean",vf,"wasSubGraphExpanded"),this.rr=a,this.j("wasSubGraphExpanded",b,a))});w.g(vf,"subGraphExpandedChanged",vf.prototype.xE);w.defineProperty(vf,{xE:"subGraphExpandedChanged"},t("dr"),function(a){var b=this.dr;b!==a&&(a!==n&&w.k(a,"function",vf,"subGraphExpandedChanged"),this.dr=a,this.j("subGraphExpandedChanged",b,a))});
vf.prototype.move=vf.prototype.move=function(a){var b=this.position,c=b.x;isNaN(c)&&(c=0);b=b.y;isNaN(b)&&(b=0);c=a.x-c;b=a.y-b;T.prototype.move.call(this,a);for(a=this.pv().l;a.next();){var d=a.value,e=d.position;T.prototype.move.call(d,new F(e.x+c,e.y+b))}};function bh(){P.call(this);this.he=(new gb(0)).freeze();this.dn=new G(NaN,NaN,NaN,NaN)}w.P("Placeholder",bh);w.Da(bh,P);bh.prototype.xb=function(a){P.prototype.xb.call(this,a);a.he=this.he.O();a.dn=this.dn.copy()};
bh.prototype.tj=function(a){if(this.background===n&&this.Fk===n)return q;var b=this.Sa;return jb(0,0,b.width,b.height,a.x,a.y)};
bh.prototype.fs=function(){var a=this.ca;(a===n||!(a instanceof vf)&&!(a instanceof mf))&&w.m("Placeholder is not inside a Group or Adornment.");if(a instanceof vf){var b;a:{b=this.ca;if(b instanceof vf&&b.Oy&&this.dn.T()){var c=b.h;if(c!==n&&(c=c.Ha,c instanceof Ef&&!c.kp&&c.dc!==n&&!c.dc.contains(b))){b=this.dn;break a}}b=this.ca;if(b instanceof vf){for(var d=c=Infinity,e=-Infinity,g=-Infinity,i=b.Fc;i.next();){var j=i.value;if(j.nb()){if(j instanceof U){if(j.ac)continue;if(j.ia===b||j.na===b)continue}j=
j.va;j.left<c&&(c=j.left);j.top<d&&(d=j.top);j.right>e&&(e=j.right);j.bottom>g&&(g=j.bottom)}}!isFinite(c)||!isFinite(d)?(b=b.location,c=this.padding,b=new G(b.x+c.left,b.y+c.top,0,0)):b=new G(c,d,e-c,g-d)}else b=new G;c=this.padding;b=new G(b.x-c.left,b.y-c.top,b.width+c.left+c.right,b.height+c.top+c.bottom)}this.dn=b;c=this.Jc;db(c,b.width||0,b.height||0);mj(this,0,0,c.width,c.height);c=a.Fc;for(d=q;c.next();)if(c.value.nb()){d=h;break}d&&(!isNaN(b.x)&&!isNaN(b.y))&&(a.location=new F(b.x,b.y))}else b=
this.wa,c=this.Jc,a=this.padding,db(c,b.width+(a.left+a.right)||0,b.height+(a.top+a.bottom)||0),mj(this,-a.left,-a.top,c.width,c.height)};bh.prototype.sj=function(a,b,c,d){var e=this.va;e.x=a;e.y=b;e.width=c;e.height=d};w.g(bh,"padding",bh.prototype.padding);w.defineProperty(bh,{padding:"padding"},t("he"),function(a){"number"===typeof a?a=new gb(a):w.i(a,gb,x,"padding");var b=this.he;b.I(a)||(this.he=a=a.O(),this.j("padding",b,a))});
function ci(){w.ic(this);this.kx=this.aa=n;this.Ct=this.Kp=h;this.Rp=this.Qp=q;this.Oo=(new F(0,0)).freeze();this.qx=h;this.B=n}w.P("Layout",ci);ci.prototype.cloneProtected=ci.prototype.xb=function(a){a.Kp=this.Kp;a.Ct=this.Ct;a.Rp=this.Rp;a.Oo=this.Oo.O()};ci.prototype.copy=ci.prototype.copy=function(){var a=new this.constructor;this.xb(a);return a};
ci.prototype.toString=function(){var a=w.Ok(Object.getPrototypeOf(this)),a=a+"(";this.group!==n&&(a+=" in "+this.group);this.h!==n&&(a+=" for "+this.h);return a+")"};w.g(ci,"diagram",ci.prototype.h);w.defineProperty(ci,{h:"diagram"},t("aa"),function(a){this.aa!==a&&(a!==n&&w.i(a,A,ci,"diagram"),this.aa=a)});w.g(ci,"group",ci.prototype.group);w.defineProperty(ci,{group:"group"},t("kx"),function(a){this.kx!==a&&(a!==n&&w.i(a,vf,ci,"group"),this.kx=a)});w.g(ci,"isOngoing",ci.prototype.lD);
w.defineProperty(ci,{lD:"isOngoing"},t("Kp"),function(a){this.Kp!==a&&(w.k(a,"boolean",ci,"isOngoing"),this.Kp=a)});w.g(ci,"isInitial",ci.prototype.kD);w.defineProperty(ci,{kD:"isInitial"},t("Ct"),function(a){w.k(a,"boolean",ci,"isInitial");this.Ct=a;a||(this.Qp=h)});w.g(ci,"isValidLayout",ci.prototype.Oe);w.defineProperty(ci,{Oe:"isValidLayout"},t("Qp"),function(a){this.Qp!==a&&(this.Qp=a,a||(a=this.h,a!==n&&(a.Ts=h)))});
ci.prototype.invalidateLayout=ci.prototype.F=function(){if(this.Qp){var a=this.h;if(a!==n&&!a.sa.tb&&(this.lD&&a.wg||this.kD&&!a.wg))this.Oe=q,a.rn=h,a.yb(h)}};w.g(ci,"isViewportSized",ci.prototype.Dv);w.defineProperty(ci,{Dv:"isViewportSized"},t("Rp"),function(a){this.Rp!==a&&(this.Rp=a)&&this.F()});w.g(ci,"isRouting",ci.prototype.cs);w.defineProperty(ci,{cs:"isRouting"},t("qx"),function(a){this.qx!==a&&(w.k(a,"boolean",ci,"isRouting"),this.qx=a)});w.g(ci,"network",ci.prototype.Mc);
w.defineProperty(ci,{Mc:"network"},t("B"),function(a){var b=this.B;b!==a&&(a!==n&&w.i(a,Xm,ci,"network"),b!==n&&Ym(b,n),this.B=a,a!==n&&Ym(a,this))});ci.prototype.createNetwork=ci.prototype.fv=function(){var a=new Xm;Ym(a,this);return a};ci.prototype.makeNetwork=ci.prototype.bH=function(a){var b=this.createNetwork();a instanceof A?(b.yr(a.Wk,h),b.yr(a.links,h)):a instanceof vf?b.yr(a.Fc):a.l&&b.yr(a.l);return b};
ci.prototype.updateParts=ci.prototype.mM=function(){var a=this.h;if(a===n&&this.B!==n)for(var b=this.B.ja.l;b.next();){var c=b.value.fb;if(c!==n&&(a=c.h,a!==n))break}this.Oe=h;a!==n&&a.gc("Layout");this.commitLayout();a!==n&&a.me("Layout")};ci.prototype.commitLayout=ci.prototype.bv=aa();
ci.prototype.doLayout=ci.prototype.Hr=function(a){a===n&&w.m("Layout.doLayout(collection) argument must not be null");var b=new ma(R);a===this.h?(Zm(this,b,a.Wk,h,this.yz,h,q,h),Zm(this,b,a.Xk,h,this.yz,h,q,h)):a===this.group&&Zm(this,b,a.Fc,q,this.yz,h,q,h);var c=b.count;if(0<c){a=this.h;a!==n&&a.gc("Layout");for(var c=Math.ceil(Math.sqrt(c)),d=this.dd.x,e=d,g=this.dd.y,i=0,j=0,b=b.l;b.next();){var k=b.value;k.xi();var l=k.xa,m=l.width,l=l.height;k.move(new F(e,g));delete k.iB;e+=Math.max(m,50)+
20;j=Math.max(j,Math.max(l,50));i>=c-1?(i=0,e=d,g+=j+20,j=0):i++}a!==n&&a.me("Layout")}this.Oe=h};ci.prototype.yz=function(a){return!a.location.T()||a instanceof vf&&a.iB?h:q};function Zm(a,b,c,d,e,g,i,j){for(c=c.l;c.next();){var k=c.value;if(!d||k.ds)if(!e||e(k))k.Cr()&&(g&&k instanceof T?k.Ei||(k instanceof vf&&k.Tb===n?Zm(a,b,k.Fc,q,e,g,i,j):b.add(k)):i&&k instanceof U?b.add(k):j&&(k.Yd()&&!(k instanceof T))&&b.add(k))}}w.g(ci,"arrangementOrigin",ci.prototype.dd);
w.defineProperty(ci,{dd:"arrangementOrigin"},t("Oo"),function(a){this.Oo.I(a)||(u&&w.i(a,F,ci,"arrangementOrigin"),this.Oo.Xa(a),this.F())});function $m(a,b){var c=a.group;if(c!==n){var d=c.location;if(isNaN(d.x)||isNaN(d.y))return b;var e=c.placeholder;e!==n?(d=e.Ob(Jb),d.x+=e.padding.left,d.y+=e.padding.top):d=c.position.copy();return d}return b}function Xm(){w.ic(this);this.pd=n;this.clear()}w.P("LayoutNetwork",Xm);
Xm.prototype.clear=function(){if(this.qr)for(var a=this.qr.l;a.next();){var b=a.value;b.clear();b.B=n}if(this.mp)for(a=this.mp.l;a.next();)b=a.value,b.clear(),b.B=n;this.qr=new ma(an);this.mp=new ma(bn);this.Dx=new la(T,an);this.wx=new la(U,bn)};Xm.prototype.toString=function(){return"LayoutNetwork"+(this.Tb!==n?"("+this.Tb.toString()+")":"")};w.u(Xm,{Tb:"layout"},t("pd"));function Ym(a,b){u&&b!==n&&w.i(b,ci,Xm,"setLayout");a.pd=b}w.u(Xm,{ja:"vertexes"},t("qr"));w.u(Xm,{lc:"edges"},t("mp"));
Xm.prototype.createVertex=Xm.prototype.vj=function(){return new an};Xm.prototype.createEdge=Xm.prototype.Mn=function(){return new bn};
Xm.prototype.addParts=Xm.prototype.yr=function(a,b){if(a!==n){b===f&&(b=q);w.k(b,"boolean",Xm,"addParts:toplevelonly");for(var c=a.l;c.next();){var d=c.value;if(d instanceof T&&(!b||d.ds)&&d.Cr()&&!d.Ei)if(d instanceof vf&&d.Tb===n)this.yr(d.Fc,q);else if(this.Ke(d)===n){var e=this.vj();e.Qg=d;this.Ck(e)}}for(c.reset();c.next();)if(d=c.value,d instanceof U&&(!b||d.ds)&&d.Cr()&&this.nv(d)===n){var g=d.ia,e=d.na;g!==e&&(g=this.ov(g),e=this.ov(e),g!==n&&e!==n&&this.bm(g,e,d))}}};
Xm.prototype.findGroupVertex=Xm.prototype.ov=function(a){if(a===n)return n;a=Il(a);if(a===n)return n;var b=this.Ke(a);if(b!==n)return b;a=a.bb;return a!==n&&(b=this.Ke(a),b!==n)?b:n};Xm.prototype.addVertex=Xm.prototype.Ck=function(a){if(a!==n){u&&w.i(a,an,Xm,"addVertex:vertex");this.qr.add(a);var b=a.fb;b!==n&&this.Dx.add(b,a);a.B=this}};Xm.prototype.addNode=Xm.prototype.xn=function(a){if(a===n)return n;u&&w.i(a,T,Xm,"addNode:node");var b=this.Ke(a);b===n&&(b=this.vj(),b.Qg=a,this.Ck(b));return b};
Xm.prototype.deleteVertex=Xm.prototype.BC=function(a){if(a!==n&&(u&&w.i(a,an,Xm,"deleteVertex:vertex"),cn(this,a))){for(var b=a.Of,c=b.count-1;0<=c;c--){var d=b.oa(c);this.On(d)}b=a.Ze;for(c=b.count-1;0<=c;c--)d=b.oa(c),this.On(d)}};function cn(a,b){if(b===n)return q;var c=a.qr.remove(b);c&&(a.Dx.remove(b.fb),b.B=n);return c}Xm.prototype.deleteNode=Xm.prototype.FJ=function(a){a!==n&&(u&&w.i(a,T,Xm,"deleteNode:node"),a=this.Ke(a),a!==n&&this.BC(a))};
Xm.prototype.findVertex=Xm.prototype.Ke=function(a){if(a===n)return n;u&&w.i(a,T,Xm,"findVertex:node");return this.Dx.qa(a)};Xm.prototype.addEdge=Xm.prototype.wn=function(a){if(a!==n){u&&w.i(a,bn,Xm,"addEdge:edge");this.mp.add(a);var b=a.Ra;b!==n&&this.nv(b)===n&&this.wx.add(b,a);b=a.Q;b!==n&&b.TB(a);b=a.U;b!==n&&b.PB(a);a.B=this}};
Xm.prototype.addLink=Xm.prototype.uI=function(a){if(a===n)return n;u&&w.i(a,U,Xm,"addLink:link");var b=a.ia,c=a.na,d=this.nv(a);d===n?(d=this.Mn(),d.Ra=a,b!==n&&(d.U=this.xn(b)),c!==n&&(d.Q=this.xn(c)),this.wn(d)):(d.U=b!==n?this.xn(b):n,d.Q=c!==n?this.xn(c):n);return d};Xm.prototype.deleteEdge=Xm.prototype.On=function(a){if(a!==n){u&&w.i(a,bn,Xm,"deleteEdge:edge");var b=a.Q;b!==n&&b.AC(a);b=a.U;b!==n&&b.zC(a);dn(this,a)}};function dn(a,b){b!==n&&a.mp.remove(b)&&(a.wx.remove(b.Ra),b.B=n)}
Xm.prototype.deleteLink=Xm.prototype.EJ=function(a){a!==n&&(u&&w.i(a,U,Xm,"deleteLink:link"),a=this.nv(a),a!==n&&this.On(a))};Xm.prototype.findEdge=Xm.prototype.nv=function(a){if(a===n)return n;u&&w.i(a,U,Xm,"findEdge:link");return this.wx.qa(a)};
Xm.prototype.linkVertexes=Xm.prototype.bm=function(a,b,c){if(a===n||b===n)return n;u&&(w.i(a,an,Xm,"linkVertexes:fromVertex"),w.i(b,an,Xm,"linkVertexes:toVertex"),w.i(c,U,Xm,"linkVertexes:link"));if(a.B===this&&b.B===this){var d=this.Mn();d.Ra=c;d.U=a;d.Q=b;this.wn(d);return d}return n};Xm.prototype.reverseEdge=Xm.prototype.Pv=function(a){if(a!==n){u&&w.i(a,bn,Xm,"reverseEdge:edge");var b=a.U,c=a.Q;b===n||c===n||(b.zC(a),c.AC(a),a.Pv(),b.TB(a),c.PB(a))}};
Xm.prototype.deleteSelfEdges=Xm.prototype.iv=function(){for(var a=[],b=this.lc.l;b.next();){var c=b.value;c.U===c.Q&&a.push(c)}b=a.length;for(c=0;c<b;c++)this.On(a[c])};Xm.prototype.deleteArtificialVertexes=Xm.prototype.hG=function(){for(var a=[],b=this.ja.l;b.next();){var c=b.value;c.fb===n&&a.push(c)}c=a.length;for(b=0;b<c;b++)this.BC(a[b]);a=[];for(b=this.lc.l;b.next();)c=b.value,c.Ra===n&&a.push(c);c=a.length;for(b=0;b<c;b++)this.On(a[b])};
Xm.prototype.splitIntoSubNetworks=Xm.prototype.SH=function(){this.hG();for(var a=[],b=this.lc.l;b.next();){var c=b.value;(c.U===n||c.Q===n)&&a.push(c)}b=a.length;for(c=0;c<b;c++)this.On(a[c]);this.iv();a=new z(Xm);for(c=h;c;)for(var c=q,d=this.ja.l;d.next();)if(b=d.value,0<b.Of.count||0<b.Ze.count){c=this.Tb.createNetwork();a.add(c);en(this,c,b);c=h;break}a.sort(function(a,b){return a===n||b===n||a===b?0:b.ja.count-a.ja.count});return a};
function en(a,b,c){if(c!==n&&c.B!==b){cn(a,c);b.Ck(c);for(var d=c.Gb;d.next();){var e=d.value;e.B!==b&&(dn(a,e),b.wn(e),en(a,b,e.U))}for(d=c.Fb;d.next();)e=d.value,e.B!==b&&(dn(a,e),b.wn(e),en(a,b,e.Q))}}Xm.prototype.getParts=Xm.prototype.findAllParts=Xm.prototype.hK=function(){for(var a=new ma(R),b=this.ja.l;b.next();)a.add(b.value.fb);for(b=this.lc.l;b.next();)a.add(b.value.Ra);return a};
function an(){w.ic(this);this.B=n;this.L=(new G(0,0,10,10)).freeze();this.K=(new F(5,5)).freeze();this.clear()}w.P("LayoutVertex",an);an.prototype.clear=function(){this.fb=n;this.Of=new z(bn);this.Ze=new z(bn)};an.prototype.toString=function(){return"LayoutVertex#"+w.ec(this)+(this.fb!==n?"("+this.fb.toString()+")":"")};w.g(an,"network",an.prototype.Mc);w.defineProperty(an,{Mc:"network"},t("B"),function(a){this.B!==a&&(a!==n&&w.i(a,Xm,an,"network"),this.B=a)});w.g(an,"node",an.prototype.Qg);
w.defineProperty(an,{Qg:"node"},t("fb"),function(a){if(this.fb!==a){u&&a!==n&&w.i(a,T,an,"node");this.fb=a;a.xi();var b=a.va,c=b.x,d=b.y,e=b.width,b=b.height;isNaN(c)&&(c=0);isNaN(d)&&(d=0);this.L.V(c,d,e,b);c=a.Xb;c!==a&&!(a instanceof vf)?(a=c.va,this.K.V(a.x+a.width/2,a.y+a.height/2)):this.K.V(e/2,b/2)}});w.g(an,"bounds",an.prototype.Eb);w.defineProperty(an,{Eb:"bounds"},t("L"),function(a){this.L.I(a)||(u&&w.i(a,G,an,"bounds"),this.L.Xa(a))});w.g(an,"focus",an.prototype.focus);
w.defineProperty(an,{focus:"focus"},t("K"),function(a){this.K.I(a)||(u&&w.i(a,F,an,"focus"),this.K.Xa(a))});w.g(an,"centerX",an.prototype.pa);w.defineProperty(an,{pa:"centerX"},function(){return this.L.x+this.K.x},function(a){var b=this.L;b.x+this.K.x!==a&&(u&&w.o(a,an,"centerX"),b.Ia(),b.x=a-this.K.x,b.freeze())});w.g(an,"centerY",an.prototype.ta);
w.defineProperty(an,{ta:"centerY"},function(){return this.L.y+this.K.y},function(a){var b=this.L;b.y+this.K.y!==a&&(u&&w.o(a,an,"centerY"),b.Ia(),b.y=a-this.K.y,b.freeze())});w.g(an,"focusX",an.prototype.sG);w.defineProperty(an,{sG:"focusX"},function(){return this.K.x},function(a){var b=this.K;b.x!==a&&(b.Ia(),b.x=a,b.freeze())});w.g(an,"focusY",an.prototype.tG);w.defineProperty(an,{tG:"focusY"},function(){return this.K.y},function(a){var b=this.K;b.y!==a&&(b.Ia(),b.y=a,b.freeze())});w.g(an,"x",an.prototype.x);
w.defineProperty(an,{x:"x"},function(){return this.L.x},function(a){var b=this.L;b.x!==a&&(b.Ia(),b.x=a,b.freeze())});w.g(an,"y",an.prototype.y);w.defineProperty(an,{y:"y"},function(){return this.L.y},function(a){var b=this.L;b.y!==a&&(b.Ia(),b.y=a,b.freeze())});w.g(an,"width",an.prototype.width);w.defineProperty(an,{width:"width"},function(){return this.L.width},function(a){var b=this.L;b.width!==a&&(b.Ia(),b.width=a,b.freeze())});w.g(an,"height",an.prototype.height);
w.defineProperty(an,{height:"height"},function(){return this.L.height},function(a){var b=this.L;b.height!==a&&(b.Ia(),b.height=a,b.freeze())});an.prototype.commit=an.prototype.av=function(){var a=this.fb;a!==n&&a.move(this.Eb.position)};an.prototype.addSourceEdge=an.prototype.TB=function(a){a!==n&&(u&&w.i(a,bn,an,"addSourceEdge:edge"),this.Of.contains(a)||this.Of.add(a))};an.prototype.deleteSourceEdge=an.prototype.AC=function(a){a!==n&&(u&&w.i(a,bn,an,"deleteSourceEdge:edge"),this.Of.remove(a))};
an.prototype.addDestinationEdge=an.prototype.PB=function(a){a!==n&&(u&&w.i(a,bn,an,"addDestinationEdge:edge"),this.Ze.contains(a)||this.Ze.add(a))};an.prototype.deleteDestinationEdge=an.prototype.zC=function(a){a!==n&&(u&&w.i(a,bn,an,"deleteDestinationEdge:edge"),this.Ze.remove(a))};w.u(an,{RH:"sourceVertexes"},function(){for(var a=new ma(an),b=this.Gb;b.next();){var c=b.value.U;c!==n&&!a.contains(c)&&a.add(c)}return a.l});
w.u(an,{jG:"destinationVertexes"},function(){for(var a=new ma(an),b=this.Fb;b.next();){var c=b.value.Q;c!==n&&!a.contains(c)&&a.add(c)}return a.l});w.u(an,{ja:"vertexes"},function(){for(var a=new ma(an),b=this.Gb;b.next();){var c=b.value,c=c.U;c!==n&&!a.contains(c)&&a.add(c)}for(b=this.Fb;b.next();)c=b.value,c=c.Q,c!==n&&!a.contains(c)&&a.add(c);return a.l});w.u(an,{Gb:"sourceEdges"},function(){return this.Of.l});w.u(an,{Fb:"destinationEdges"},function(){return this.Ze.l});
w.u(an,{lc:"edges"},function(){for(var a=new z(bn),b=this.Gb;b.next();){var c=b.value;a.add(c)}for(b=this.Fb;b.next();)c=b.value,a.add(c);return a.l});w.u(an,{pG:"edgesCount"},function(){return this.Of.count+this.Ze.count});var fn;an.standardComparer=fn=function(a,b){u&&w.i(a,an,an,"standardComparer:m");u&&w.i(b,an,an,"standardComparer:n");var c=a.fb,d=b.fb;return c?d?(c=c.text,d=d.text,c<d?-1:c>d?1:0):1:d!==n?-1:0};
an.smartComparer=function(a,b){u&&w.i(a,an,an,"smartComparer:m");u&&w.i(b,an,an,"smartComparer:n");if(a!==n){if(b!==n){var c=a.fb,d=b.fb;if(c!==n){if(d!==n){var c=c.text.toLocaleLowerCase().split(/([+\-]?[\.]?\d+(?:\.\d*)?(?:e[+\-]?\d+)?)/),d=d.text.toLocaleLowerCase().split(/([+\-]?[\.]?\d+(?:\.\d*)?(?:e[+\-]?\d+)?)/),e;for(e=0;e<c.length;e++)if(""!==d[e]&&d[e]!==f){var g=parseFloat(c[e]),i=parseFloat(d[e]);if(isNaN(g))if(isNaN(i)){if(0!==c[e].localeCompare(d[e]))return c[e].localeCompare(d[e])}else return 1;
else{if(isNaN(i))return-1;if(0!==g-i)return g-i}}else if(""!==c[e])return 1;return""!==d[e]&&d[e]!==f?-1:0}return 1}return d!==n?-1:0}return 1}return b!==n?-1:0};function bn(){w.ic(this);this.B=n;this.clear()}w.P("LayoutEdge",bn);bn.prototype.clear=function(){this.Q=this.U=this.Ra=n};bn.prototype.toString=function(){return"LayoutEdge#"+w.ec(this)+(this.Ra!==n?"("+this.Ra.toString()+")":"")};w.g(bn,"network",bn.prototype.Mc);
w.defineProperty(bn,{Mc:"network"},t("B"),function(a){this.B!==a&&(u&&a!==n&&w.i(a,Xm,bn,"network"),this.B=a)});w.g(bn,"link",bn.prototype.link);w.defineProperty(bn,{link:"link"},t("Ra"),function(a){this.Ra!==a&&(u&&a!==n&&w.i(a,U,bn,"link"),this.Ra=a)});w.g(bn,"fromVertex",bn.prototype.bz);w.defineProperty(bn,{bz:"fromVertex"},t("U"),function(a){this.U!==a&&(u&&a!==n&&w.i(a,an,bn,"fromVertex"),this.U=a)});w.g(bn,"toVertex",bn.prototype.Zz);
w.defineProperty(bn,{Zz:"toVertex"},t("Q"),function(a){this.Q!==a&&(u&&a!==n&&w.i(a,an,bn,"toVertex"),this.Q=a)});bn.prototype.Pv=function(){var a=this.U;this.U=this.Q;this.Q=a};bn.prototype.commit=bn.prototype.av=aa();bn.prototype.getOtherVertex=bn.prototype.zG=function(a){u&&w.i(a,an,bn,"getOtherVertex:v");return this.Q===a?this.U:this.U===a?this.Q:n};
function dj(){ci.call(this);this.Dv=h;this.tr=this.ur=NaN;this.Pi=(new cb(NaN,NaN)).freeze();this.mh=(new cb(10,10)).freeze();this.Aa=tk;this.Pc=rk;this.tc=nk;this.qc=gn}w.P("GridLayout",dj);w.Da(dj,ci);dj.prototype.cloneProtected=dj.prototype.xb=function(a){ci.prototype.xb.call(this,a);a.ur=this.ur;a.tr=this.tr;a.Pi=this.Pi.O();a.mh=this.mh.O();a.Aa=this.Aa;a.Pc=this.Pc;a.tc=this.tc;a.qc=this.qc};
dj.prototype.doLayout=dj.prototype.Hr=function(a){var b=this.h;b===n&&w.m("The diagram for this layout is not set.");this.dd=$m(this,this.dd);var c=new ma(R);a===this.h?(Zm(this,c,a.Wk,h,n,h,q,h),Zm(this,c,a.links,h,n,h,q,h),Zm(this,c,a.Xk,h,n,h,q,h)):a===this.group&&Zm(this,c,a.Fc,q,n,h,q,h);for(a=c.copy().l;a.next();){var d=a.value;if(d instanceof U&&(d.ia!==n||d.na!==n))c.remove(d);else if(d.xi(),d instanceof vf)for(d=d.Fc;d.next();)c.remove(d.value)}c=c.ng();if(0!==c.length){switch(this.ig){case qk:c.reverse();
break;case nk:c.sort(this.wh);break;case ok:c.sort(this.wh),c.reverse()}d=this.PE;isNaN(d)&&(d=0);a=this.cA;a=isNaN(a)?Math.max(this.h.Ua.width-b.padding.left-b.padding.right,0):Math.max(this.cA,0);0>=d&&0>=a&&(d=1);var e=this.spacing.width;isFinite(e)||(e=0);var g=this.spacing.height;isFinite(g)||(g=0);b.gc("Layout");switch(this.Cb){case uk:var i=Math.max(this.Jk.width,1);if(!isFinite(i))for(var j=i=0;j<c.length;j++)var k=c[j],l=k.xa,i=Math.max(i,l.width);var i=Math.max(i+e,1),m=Math.max(this.Jk.height,
1);if(!isFinite(m))for(j=m=0;j<c.length;j++)k=c[j],l=k.xa,m=Math.max(m,l.height);for(var m=Math.max(m+g,1),p=this.ke,r=this.dd.x,s=r,v=this.dd.y,y=0,C=0,j=0;j<c.length;j++){var k=c[j],l=k.xa,E=Math.ceil((l.width+e)/i)*i,I=Math.ceil((l.height+g)/m)*m,D;switch(p){case sk:D=Math.abs(s-l.width)+r;break;default:D=s+l.width-r}if(0<d&&y>d-1||0<a&&0<y&&D>a)y=0,s=r,v+=C,C=0;C=Math.max(C,I);switch(p){case sk:l=-l.width;break;default:l=0}k.move(new F(s+l,v));switch(p){case sk:s-=E;break;default:s+=E}y++}break;
case tk:i=Math.max(this.Jk.width,1);for(k=j=y=v=0;k<c.length;k++)m=c[k],p=m.xa,r=Jl(m,m.Xb,m.Yf),v=Math.max(v,r.x),y=Math.max(y,p.width-r.x),j=Math.max(j,r.y);s=this.ke;switch(s){case sk:v+=e;break;default:y+=e}var i=isFinite(i)?Math.max(i+e,1):Math.max(v+y,1),M=v=this.dd.x,y=this.dd.y,E=C=0,l=Math.max(this.Jk.height,1),I=j=0;D=h;for(k=0;k<c.length;k++){m=c[k];p=m.xa;r=Jl(m,m.Xb,m.Yf);if(0<C)switch(s){case sk:M=Math.floor((M-v-(p.width-r.x))/i)*i+v;break;default:M=Math.ceil((M-v+r.x)/i)*i+v}else switch(s){case sk:E=
M+r.x+p.width;break;default:E=M-r.x}var N;switch(s){case sk:N=-(M+r.x)+v+E;break;default:N=M+p.width-r.x-v-E}if(0<d&&C>d-1||0<a&&0<C&&N>a){for(M=0;M<C&&k!==C;M++){N=c[k-C+M];var Z=Jl(N,N.Xb,N.Yf);N.move(new F(N.position.x,N.position.y+j-Z.y))}I+=g;y=D?y+I:y+(I+j);C=I=j=0;M=v;D=q}j=Math.max(j,r.y);I=Math.max(I,p.height-r.y);isFinite(l)&&(I=Math.max(I,Math.max(p.height,l)-r.y));D?m.move(new F(M-r.x,y-r.y)):m.move(new F(M-r.x,y));switch(s){case sk:M-=r.x+e;break;default:M+=p.width-r.x+e}C++}for(M=0;M<
C&&k!==C;M++)N=c[k-C+M],Z=Jl(N,N.Xb,N.Yf),N.move(new F(N.position.x,N.position.y+j-Z.y))}b.me("Layout");this.Oe=h}};w.g(dj,"wrappingWidth",dj.prototype.cA);w.defineProperty(dj,{cA:"wrappingWidth"},t("ur"),function(a){if(this.ur!==a&&(0<a||isNaN(a)))this.ur=a,this.Dv=isNaN(a),this.F()});w.g(dj,"wrappingColumn",dj.prototype.PE);w.defineProperty(dj,{PE:"wrappingColumn"},t("tr"),function(a){if(this.tr!==a&&(0<a||isNaN(a)))this.tr=a,this.F()});w.g(dj,"cellSize",dj.prototype.Jk);
w.defineProperty(dj,{Jk:"cellSize"},t("Pi"),function(a){this.Pi.I(a)||(this.Pi.Xa(a),this.F())});w.g(dj,"spacing",dj.prototype.spacing);w.defineProperty(dj,{spacing:"spacing"},t("mh"),function(a){this.mh.I(a)||(this.mh.Xa(a),this.F())});w.g(dj,"alignment",dj.prototype.Cb);w.defineProperty(dj,{Cb:"alignment"},t("Aa"),function(a){if(this.Aa!==a&&(u&&w.i(a,ja,dj,"alignment"),a===tk||a===uk))this.Aa=a,this.F()});w.g(dj,"arrangement",dj.prototype.ke);
w.defineProperty(dj,{ke:"arrangement"},t("Pc"),function(a){if(this.Pc!==a&&(u&&w.i(a,ja,dj,"arrangement"),a===rk||a===sk))this.Pc=a,this.F()});w.g(dj,"sorting",dj.prototype.ig);w.defineProperty(dj,{ig:"sorting"},t("tc"),function(a){if(this.tc!==a&&(u&&w.i(a,ja,dj,"sorting"),a===pk||a===qk||a===nk||a===ok))this.tc=a,this.F()});w.g(dj,"comparer",dj.prototype.wh);w.defineProperty(dj,{wh:"comparer"},t("qc"),function(a){this.qc!==a&&(u&&w.k(a,"function",dj,"comparer"),this.qc=a,this.F())});var gn;
dj.standardComparer=gn=function(a,b){u&&w.i(a,R,dj,"standardComparer:a");u&&w.i(b,R,dj,"standardComparer:b");var c=a.text,d=b.text;return c<d?-1:c>d?1:0};
dj.smartComparer=function(a,b){u&&w.i(a,R,dj,"standardComparer:a");u&&w.i(b,R,dj,"standardComparer:b");if(a!==n){if(b!==n){var c=a.text.toLocaleLowerCase().split(/([+\-]?[\.]?\d+(?:\.\d*)?(?:e[+\-]?\d+)?)/),d=b.text.toLocaleLowerCase().split(/([+\-]?[\.]?\d+(?:\.\d*)?(?:e[+\-]?\d+)?)/),e;for(e=0;e<c.length;e++)if(""!==d[e]&&d[e]!==f){var g=parseFloat(c[e]),i=parseFloat(d[e]);if(isNaN(g))if(isNaN(i)){if(0!==c[e].localeCompare(d[e]))return c[e].localeCompare(d[e])}else return 1;else{if(isNaN(i))return-1;
if(0!==g-i)return g-i}}else if(""!==c[e])return 1;return""!==d[e]&&d[e]!==f?-1:0}return 1}return b!==n?-1:0};var uk;dj.Position=uk=w.s(dj,"Position",0);var tk;dj.Location=tk=w.s(dj,"Location",1);var rk;dj.LeftToRight=rk=w.s(dj,"LeftToRight",2);var sk;dj.RightToLeft=sk=w.s(dj,"RightToLeft",3);var pk;dj.Forward=pk=w.s(dj,"Forward",4);var qk;dj.Reverse=qk=w.s(dj,"Reverse",5);var nk;dj.Ascending=nk=w.s(dj,"Ascending",6);var ok;dj.Descending=ok=w.s(dj,"Descending",7);
function vk(){ci.call(this);this.Yw=this.Dm=this.Yc=0;this.lp=360;this.Xw=Hk;this.gk=0;this.LA=Hk;this.bt=this.Sf=this.HB=0;this.Nu=new hn;this.et=this.Bl=0;this.dF=600;this.yq=NaN;this.Qo=1;this.Rd=0;this.Sd=360;this.Pc=Hk;this.da=Dk;this.tc=Ak;this.qc=fn;this.mh=6;this.sq=Kk}w.P("CircularLayout",vk);w.Da(vk,ci);
vk.prototype.cloneProtected=vk.prototype.xb=function(a){ci.prototype.xb.call(this,a);a.yq=this.yq;a.Qo=this.Qo;a.Rd=this.Rd;a.Sd=this.Sd;a.Pc=this.Pc;a.da=this.da;a.tc=this.tc;a.qc=this.qc;a.mh=this.mh;a.sq=this.sq};vk.prototype.createNetwork=vk.prototype.fv=function(){var a=new jn;Ym(a,this);return a};
vk.prototype.doLayout=vk.prototype.Hr=function(a){this.Mc===n&&(this.Mc=this.makeNetwork(a));a=this.Mc.ja;if(1>=a.count)1==a.count&&(a=a.zb(),a.pa=0,a.ta=0);else{var b=new z(kn);b.Tf(a.l);var a=new z(kn),c=new z(kn),b=this.sort(b),a=new z(kn),c=new z(kn),d=this.Xw,e=this.LA,g=this.Yc,i=this.Dm,j=this.Yw,k=this.lp,l=this.gk,m=this.HB,p=this.Sf,r=this.bt,d=this.ke,e=this.ns,g=this.QD;if(!isFinite(g)||0>=g)g=NaN;i=this.$B;if(!isFinite(i)||0>=i)i=1;j=this.jg;isFinite(j)||(j=0);k=this.Gh;if(!isFinite(k)||
360<k||1>k)k=360;l=this.spacing;isFinite(l)||(l=NaN);d===Ik&&e===Jk?d=Hk:d===Ik&&e!==Jk&&(e=Jk,d=this.ke);if((this.direction===Bk||this.direction===Ck)&&this.ig!==Ak){for(var s=0;!(s>=b.length);s+=2){a.add(b.oa(s));if(s+1>=b.length)break;c.add(b.oa(s+1))}this.direction===Bk?(this.ke===Ik&&a.reverse(),b=new z(kn),b.Tf(a),b.Tf(c)):(this.ke===Ik&&c.reverse(),b=new z(kn),b.Tf(c),b.Tf(a))}for(var v=b.length,y=m=0,s=0;s<b.length;s++){var p=j+k*y*(this.direction===Dk?1:-1)/v,C=b.oa(s).wf;isNaN(C)&&(C=ln(b.oa(s),
p));if(360>k&&(0===s||s===b.length-1))C/=2;m+=C;y++}if(isNaN(g)||d===Ik){isNaN(l)&&(l=6);if(d!==Hk&&d!==Ik){C=-Infinity;for(s=0;s<v;s++){var r=b.oa(s),E=b.oa(s===v-1?0:s+1);isNaN(r.wf)&&ln(r,0);isNaN(E.wf)&&ln(E,0);C=Math.max(C,(r.wf+E.wf)/2)}r=C+l;d===Fk?(p=2*Math.PI/v,g=(C+l)/p):g=mn(this,r*(360<=k?v:v-1),i,j*Math.PI/180,k*Math.PI/180)}else g=mn(this,m+(360<=k?v:v-1)*(d!==Ik?l:1.6*l),i,j*Math.PI/180,k*Math.PI/180);p=g*i}else if(p=g*i,y=nn(this,g,p,j*Math.PI/180,k*Math.PI/180),isNaN(l)){if(d===Hk||
d===Ik)l=(y-m)/(360<=k?v:v-1)}else if(d===Hk||d===Ik)s=(y-m)/(360<=k?v:v-1),s<l?(g=mn(this,m+l*(360<=k?v:v-1),i,j*Math.PI/180,k*Math.PI/180),p=g*i):l=s;else{C=-Infinity;for(s=0;s<v;s++)r=b.oa(s),E=b.oa(s===v-1?0:s+1),isNaN(r.wf)&&ln(r,0),isNaN(E.wf)&&ln(E,0),C=Math.max(C,(r.wf+E.wf)/2);r=C+l;s=mn(this,r*(360<=k?v:v-1),i,j*Math.PI/180,k*Math.PI/180);s>g?(g=s,p=g*i):r=y/(360<=k?v:v-1)}this.Xw=d;this.LA=e;this.Yc=g;this.Dm=i;this.Yw=j;this.lp=k;this.gk=l;this.HB=m;this.Sf=p;this.bt=r;c=[b,a,c];b=c[0];
a=c[1];c=c[2];d=this.Xw;e=this.Yc;i=this.Yw;j=this.lp;k=this.gk;l=this.Sf;m=this.bt;if((this.direction===Bk||this.direction===Ck)&&d===Ik)on(this,b,j,i-j/2,Dk);else if(this.direction===Bk||this.direction===Ck){g=0;switch(d){case Gk:g=180*pn(this,e,l,i,m)/Math.PI;break;case Hk:m=b=0;g=a.zb();g!==n&&(b=ln(g,Math.PI/2));g=c.zb();g!==n&&(m=ln(g,Math.PI/2));g=180*pn(this,e,l,i,k+(b+m)/2)/Math.PI;break;case Fk:g=j/b.length}if(this.direction===Bk){switch(d){case Gk:qn(this,a,i,Ek);break;case Hk:rn(this,
a,i,Ek);break;case Fk:sn(this,a,j/2,i,Ek)}switch(d){case Gk:qn(this,c,i+g,Dk);break;case Hk:rn(this,c,i+g,Dk);break;case Fk:sn(this,c,j/2,i+g,Dk)}}else{switch(d){case Gk:qn(this,c,i,Ek);break;case Hk:rn(this,c,i,Ek);break;case Fk:sn(this,c,j/2,i,Ek)}switch(d){case Gk:qn(this,a,i+g,Dk);break;case Hk:rn(this,a,i+g,Dk);break;case Fk:sn(this,a,j/2,i+g,Dk)}}}else switch(d){case Gk:qn(this,b,i,this.direction);break;case Hk:rn(this,b,i,this.direction);break;case Fk:sn(this,b,j,i,this.direction);break;case Ik:on(this,
b,j,i,this.direction)}}this.updateParts();this.Mc=n;this.Oe=h};function sn(a,b,c,d,e){for(var g=a.lp,i=a.Yc,a=a.Sf,d=d*Math.PI/180,c=c*Math.PI/180,j=b.length,k=0;k<j;k++){var l=d+(e===Dk?k*c/(360<=g?j:j-1):-(k*c)/j),m=b.oa(k),p=i*Math.tan(l)/a,p=Math.sqrt((i*i+a*a*p*p)/(1+p*p));m.pa=p*Math.cos(l);m.ta=p*Math.sin(l);m.Qu=180*l/Math.PI}}
function rn(a,b,c,d){for(var e=a.Yc,g=a.Sf,i=a.gk,c=c*Math.PI/180,j=b.length,k=0;k<j;k++){var l=b.oa(k),m=b.oa(k===j-1?0:k+1),p=g*Math.sin(c);l.pa=e*Math.cos(c);l.ta=p;l.Qu=180*c/Math.PI;isNaN(l.wf)&&ln(l,0);isNaN(m.wf)&&ln(m,0);l=pn(a,e,g,d===Dk?c:-c,(l.wf+m.wf)/2+i);c+=d===Dk?l:-l}}function qn(a,b,c,d){for(var e=a.Yc,g=a.Sf,i=a.bt,c=c*Math.PI/180,j=b.length,k=0;k<j;k++){var l=b.oa(k);l.pa=e*Math.cos(c);l.ta=g*Math.sin(c);l.Qu=180*c/Math.PI;l=pn(a,e,g,d===Dk?c:-c,i);c+=d===Dk?l:-l}}
function on(a,b,c,d,e){var g=a.et,g=a.lp;a.Bl=0;a.Nu=new hn;if(360>c){for(g=d+(e===Dk?g:-g);0>g;)g+=360;g%=360;180<g&&(g-=360);g*=Math.PI/180;a.et=g;tn(a,b,c,d,e)}else un(a,b,c,d,e);a.Nu.av(b)}
function un(a,b,c,d,e){var g=a.Yc,i=a.Sf,j=a.gk,k=a.Dm,l=g*Math.cos(d*Math.PI/180),m=i*Math.sin(d*Math.PI/180),p=b.ng();if(3===p.length)p[0].pa=g*Math.cos(0),p[0].ta=i*Math.sin(0),p[1].pa=p[0].pa-p[0].width/2-p[1].width/2-j,p[1].y=p[0].y,p[2].pa=(p[0].pa+p[1].pa)/2,p[2].y=p[0].y-p[2].height-j;else if(4===p.length)p[0].pa=g*Math.cos(0),p[0].ta=i*Math.sin(0),p[2].pa=-p[0].pa,p[2].ta=p[0].ta,p[1].pa=0,p[1].y=Math.min(p[0].y,p[2].y)-p[1].height-j,p[3].pa=0,p[3].y=Math.max(p[0].y+p[0].height+j,p[2].y+
p[2].height+j);else{for(g=0;g<p.length;g++){p[g].pa=l;p[g].ta=m;if(g>=p.length-1)break;i=vn(a,l,m,p,g,e);i[0]||(i=wn(a,l,m,p,g,e));l=i[1];m=i[2]}a.Bl++;if(!(23<a.Bl)){var l=p[0].pa,m=p[0].ta,g=p[p.length-1].pa,i=p[p.length-1].ta,r=Math.abs(l-g)-((p[0].width+p[p.length-1].width)/2+j),s=Math.abs(m-i)-((p[0].height+p[p.length-1].height)/2+j),j=0;1>Math.abs(s)?Math.abs(l-g)<(p[0].width+p[p.length-1].width)/2&&(j=0):j=0<s?s:1>Math.abs(r)?0:r;r=q;r=Math.abs(g)>Math.abs(i)?0<g!==m>i:0<i!==l<g;if(r=e===Dk?
r:!r)j=-Math.abs(j),j=Math.min(j,-p[p.length-1].width),j=Math.min(j,-p[p.length-1].height);l=a.Nu;if(0<j&&0>l.Hm||Math.abs(j)<Math.abs(l.Hm)&&!(0>j&&0<l.Hm)){l.Hm=j;l.Il=[];l.un=[];for(m=0;m<p.length;m++)l.Il[m]=p[m].Eb.x,l.un[m]=p[m].Eb.y}1<Math.abs(j)&&(a.Yc=8>a.Bl?a.Yc-j/(2*Math.PI):5>p.length&&10<j?a.Yc/2:a.Yc-(0<j?1.7:-2.3),a.Sf=a.Yc*k,un(a,b,c,d,e))}}}
function tn(a,b,c,d,e){for(var g=a.Yc,i=a.Sf,j=a.Dm,k=g*Math.cos(d*Math.PI/180),l=i*Math.sin(d*Math.PI/180),m=b.ng(),p=0;p<m.length;p++){m[p].pa=k;m[p].ta=l;if(p>=m.length-1)break;var r=vn(a,k,l,m,p,e);r[0]||(r=wn(a,k,l,m,p,e));k=r[1];l=r[2]}a.Bl++;if(!(23<a.Bl)){b.oa(b.length-1);k=Math.atan2(l,k);k=e===Dk?a.et-k:k-a.et;k=Math.abs(k)<Math.abs(k-2*Math.PI)?k:k-2*Math.PI;g=k*(g+i)/2;i=a.Nu;if(Math.abs(g)<Math.abs(i.Hm)){i.Hm=g;i.Il=[];i.un=[];for(k=0;k<m.length;k++)i.Il[k]=m[k].Eb.x,i.un[k]=m[k].Eb.y}1<
Math.abs(g)&&(a.Yc=8>a.Bl?a.Yc-g/(2*Math.PI):a.Yc-(0<g?1.7:-2.3),a.Sf=a.Yc*j,tn(a,b,c,d,e))}}function vn(a,b,c,d,e,g){var i=a.Yc,j=a.Sf,k=0,l=0,a=(d[e].width+d[e+1].width)/2+a.gk,m=q;if(0<=c!==(g===Dk)){if(k=b+a,k>i){k=b-a;if(k<-i)return[q,k,l];m=h}}else if(k=b-a,k<-i){k=b+a;if(k>i)return[q,k,l];m=h}l=Math.sqrt(1-Math.min(1,k*k/(i*i)))*j;0>c!==m&&(l=-l);return Math.abs(c-l)>(d[e].height+d[e+1].height)/2?[q,k,l]:[h,k,l]}
function wn(a,b,c,d,e,g){var i=a.Yc,j=a.Sf,k=0,l=0,a=(d[e].height+d[e+1].height)/2+a.gk,m=q;if(0<=b!==(g===Dk)){if(l=c-a,l<-j){l=c+a;if(l>j)return[q,k,l];m=h}}else if(l=c+a,l>j){l=c-a;if(l<-j)return[q,k,l];m=h}k=Math.sqrt(1-Math.min(1,l*l/(j*j)))*i;0>b!==m&&(k=-k);return Math.abs(b-k)>(d[e].width+d[e+1].width)/2?[q,k,l]:[h,k,l]}function hn(){this.Hm=-Infinity;this.un=this.Il=n}
hn.prototype.av=function(a){if(!(this.Il===n||this.un===n))for(var b=0;b<this.Il.length;b++){var c=a.oa(b);c.x=this.Il[b];c.y=this.un[b]}};vk.prototype.commitLayout=vk.prototype.bv=function(){this.commitNodes();this.cs&&this.commitLinks()};vk.prototype.commitNodes=vk.prototype.Ny=function(){for(var a=this.sF,b=this.B.ja.l,c;b.next();)c=b.value,c.x+=a.x,c.y+=a.y,c.commit()};vk.prototype.commitLinks=vk.prototype.My=function(){for(var a=this.B.lc.l;a.next();)a.value.commit()};
function nn(a,b,c,d,e){var g=a.dF;if(0.0010>Math.abs(a.Dm-1))return d!==f&&e!==f?e*b:2*Math.PI*b;var a=b>c?Math.sqrt(b*b-c*c)/b:Math.sqrt(c*c-b*b)/c,i=0,j;j=d!==f&&e!==f?e/(g+1):Math.PI/(2*(g+1));for(var k=0;k<=g;k++)var l=Math.sin(d!==f&&e!==f?d+k*e/g:k*Math.PI/(2*g)),i=i+Math.sqrt(1-a*a*l*l)*j;return d!==f&&e!==f?(b>c?b:c)*i:4*(b>c?b:c)*i}function mn(a,b,c,d,e){return b/(d!==f&&e!==f?nn(a,1,c,d,e):nn(a,1,c))}
function pn(a,b,c,d,e){if(0.0010>Math.abs(a.Dm-1))return e/b;var g=b>c?Math.sqrt(b*b-c*c)/b:Math.sqrt(c*c-b*b)/c,i=0,a=2*Math.PI/(700*a.B.ja.count);b>c&&(d+=Math.PI/2);for(var j=0;;j++){var k=Math.sin(d+j*a),i=i+(b>c?b:c)*Math.sqrt(1-g*g*k*k)*a;if(i>=e)return j*a}return 0}
vk.prototype.sort=function(a){switch(this.ig){case yk:break;case zk:a.reverse();break;case wk:a.sort(this.wh);break;case xk:a.sort(this.wh);a.reverse();break;case Ak:for(var b=[],c=0;c<a.length;c++)b.push(0);for(var d=new z(kn),c=0;c<a.length;c++){var e=-1,g=-1;if(0===c)for(var i=0;i<a.length;i++){var j=a.oa(i).pG;j>e&&(e=j,g=i)}else for(i=0;i<a.length;i++)j=b[i],j>e&&(e=j,g=i);d.add(a.oa(g));b[g]=-1;g=a.oa(g);e=g.Gb;for(g=g.Fb;e.next();)i=e.value,i=i.bz,i=a.indexOf(i),0>i||0<=b[i]&&b[i]++;for(;g.next();)i=
g.value,i=i.Zz,i=a.indexOf(i),0>i||0<=b[i]&&b[i]++}a=[];for(b=0;b<d.length;b++){j=d.oa(b);a[b]=[];for(var c=j.Fb,e=j.Gb,k,l;c.next();)k=c.value,l=d.indexOf(k.Zz),l!==b&&0>a[b].indexOf(l)&&a[b].push(l);for(;e.next();)k=e.value,l=d.indexOf(k.bz),l!==b&&0>a[b].indexOf(l)&&a[b].push(l)}j=[];for(b=0;b<a.length;b++)j[b]=0;for(var c=[],m=[],p=[],e=[],g=new z(kn),i=b=0;b<a.length;b++){var r=a[b].length;if(1===r)e.push(b);else if(0===r)g.add(d.oa(b));else{if(0===i)c.push(b);else{for(var s=Infinity,v=Infinity,
y=-1,C=[],r=0;r<c.length;r++)if(0>a[c[r]].indexOf(c[r===c.length-1?0:r+1]))C.push(r===c.length-1?0:r+1);if(0===C.length)for(r=0;r<c.length;r++)C.push(r);for(r=0;r<C.length;r++){var E=C[r],I;l=a[b];k=m;I=p;for(var D=j,M=E,N=c,Z=0,wa=0;wa<k.length;wa++){var ka=D[k[wa]],ua=D[I[wa]],Da=0,Ha=0;ka<ua?(Da=ka,Ha=ua):(Da=ua,Ha=ka);if(Da<M&&M<=Ha)for(ka=0;ka<l.length;ka++)ua=l[ka],0>N.indexOf(ua)||Da<D[ua]&&D[ua]<Ha||(Da===D[ua]||Ha===D[ua])||Z++;else for(ka=0;ka<l.length;ka++)ua=l[ka],0>N.indexOf(ua)||Da<
D[ua]&&D[ua]<Ha&&!(Da===D[ua]||Ha===D[ua])&&Z++}I=Z;for(k=D=0;k<a[b].length;k++)l=c.indexOf(a[b][k]),0<=l&&(l=Math.abs(E-(l>=E?l+1:l)),D+=l<c.length+1-l?l:c.length+1-l);for(k=0;k<m.length;k++)l=j[m[k]],M=j[p[k]],l>=E&&l++,M>=E&&M++,l>M&&(N=M,M=l,l=N),M-l<(c.length+2)/2===(l<E&&E<=M)&&D++;if(I<s||I===s&&D<v)s=I,v=D,y=E}c.splice(y,0,b);for(r=0;r<c.length;r++)j[c[r]]=r;for(r=0;r<a[b].length;r++)s=a[b][r],0<=c.indexOf(s)&&(m.push(b),p.push(s))}i++}}m=q;for(p=c.length;;){m=h;for(j=0;j<e.length;j++)if(b=
e[j],r=a[b][0],l=c.indexOf(r),0<=l){for(i=v=0;i<a[r].length;i++)s=a[r][i],s=c.indexOf(s),0>s||s===l||(y=s>l?s-l:l-s,v+=s<l!==y>p-y?1:-1);c.splice(0>v?l:l+1,0,b);e.splice(j,1);j--}else m=q;if(m)break;else c.push(e[0]),e.splice(0,1)}for(b=0;b<c.length;b++)l=c[b],g.add(d.oa(l));return g;default:w.m("Invalid sorting type.")}return a};w.g(vk,"radius",vk.prototype.QD);w.defineProperty(vk,{QD:"radius"},t("yq"),function(a){if(this.yq!==a&&(0<a||isNaN(a)))this.yq=a,this.F()});w.g(vk,"aspectRatio",vk.prototype.$B);
w.defineProperty(vk,{$B:"aspectRatio"},t("Qo"),function(a){this.Qo!==a&&0<a&&(this.Qo=a,this.F())});w.g(vk,"startAngle",vk.prototype.jg);w.defineProperty(vk,{jg:"startAngle"},t("Rd"),function(a){this.Rd!==a&&(this.Rd=a,this.F())});w.g(vk,"sweepAngle",vk.prototype.Gh);w.defineProperty(vk,{Gh:"sweepAngle"},t("Sd"),function(a){this.Sd!==a&&(this.Sd=0<a&&360>=a?a:360,this.F())});w.g(vk,"arrangement",vk.prototype.ke);
w.defineProperty(vk,{ke:"arrangement"},t("Pc"),function(a){if(this.Pc!==a&&(u&&w.i(a,ja,vk,"arrangement"),a===Ik||a===Hk||a===Gk||a===Fk))this.Pc=a,this.F()});w.g(vk,"direction",vk.prototype.direction);w.defineProperty(vk,{direction:"direction"},t("da"),function(a){if(this.da!==a&&(u&&w.i(a,ja,vk,"direction"),a===Dk||a===Ek||a===Bk||a===Ck))this.da=a,this.F()});w.g(vk,"sorting",vk.prototype.ig);
w.defineProperty(vk,{ig:"sorting"},t("tc"),function(a){if(this.tc!==a&&(u&&w.i(a,ja,vk,"sorting"),a===yk||a===zk||a===wk||xk||a===Ak))this.tc=a,this.F()});w.g(vk,"comparer",vk.prototype.wh);w.defineProperty(vk,{wh:"comparer"},t("qc"),function(a){this.qc!==a&&(u&&w.k(a,"function",vk,"comparer"),this.qc=a,this.F())});w.g(vk,"spacing",vk.prototype.spacing);w.defineProperty(vk,{spacing:"spacing"},t("mh"),function(a){this.mh!==a&&(this.mh=a,this.F())});w.g(vk,"nodeDiameterFormula",vk.prototype.ns);
w.defineProperty(vk,{ns:"nodeDiameterFormula"},t("sq"),function(a){if(this.sq!==a&&(u&&w.i(a,ja,vk,"nodeDiameterFormula"),a===Kk||a===Jk))this.sq=a,this.F()});w.u(vk,{tF:"actualXRadius"},t("Yc"));w.u(vk,{uF:"actualYRadius"},t("Sf"));w.u(vk,{rI:"actualSpacing"},t("gk"));w.u(vk,{sF:"actualCenter"},function(){return isNaN(this.dd.x)||isNaN(this.dd.y)?new F(0,0):new F(this.dd.x+this.tF,this.dd.y+this.uF)});var Hk;vk.ConstantSpacing=Hk=w.s(vk,"ConstantSpacing",0);var Gk;
vk.ConstantDistance=Gk=w.s(vk,"ConstantDistance",1);var Fk;vk.ConstantAngle=Fk=w.s(vk,"ConstantAngle",2);var Ik;vk.Packed=Ik=w.s(vk,"Packed",3);var Dk;vk.Clockwise=Dk=w.s(vk,"Clockwise",4);var Ek;vk.Counterclockwise=Ek=w.s(vk,"Counterclockwise",5);var Bk;vk.BidirectionalLeft=Bk=w.s(vk,"BidirectionalLeft",6);var Ck;vk.BidirectionalRight=Ck=w.s(vk,"BidirectionalRight",7);var yk;vk.Forwards=yk=w.s(vk,"Forwards",8);var zk;vk.Reverse=zk=w.s(vk,"Reverse",9);var wk;vk.Ascending=wk=w.s(vk,"Ascending",10);
var xk;vk.Descending=xk=w.s(vk,"Descending",11);var Ak;vk.Optimized=Ak=w.s(vk,"Optimized",12);var Kk;vk.Pythagorean=Kk=w.s(vk,"Pythagorean",13);var Jk;vk.Circular=Jk=w.s(vk,"Circular",14);function jn(){Xm.call(this)}w.P("CircularNetwork",jn);w.Da(jn,Xm);jn.prototype.createVertex=jn.prototype.vj=function(){return new kn};jn.prototype.createEdge=jn.prototype.Mn=function(){return new xn};function kn(){an.call(this);this.lA=this.Cm=NaN}w.P("CircularVertex",kn);w.Da(kn,an);
function ln(a,b){var c=a.B;if(c===n)return NaN;c=c.Tb;if(c===n)return NaN;if(c.ke===Ik)if(c.ns===Jk)a.Cm=Math.max(a.width,a.height);else{var c=Math.abs(Math.sin(b)),d=Math.abs(Math.cos(b));if(0===c)return a.width;if(0===d)return a.height;a.Cm=Math.min(a.height/c,a.width/d)}else a.Cm=c.ns===Jk?Math.max(a.width,a.height):Math.sqrt(a.width*a.width+a.height*a.height);return a.Cm}w.g(kn,"diameter",kn.prototype.wf);w.defineProperty(kn,{wf:"diameter"},t("Cm"),ba("Cm"));w.g(kn,"actualAngle",kn.prototype.Qu);
w.defineProperty(kn,{Qu:"actualAngle"},t("lA"),ba("lA"));function xn(){bn.call(this)}w.P("CircularEdge",xn);w.Da(xn,bn);function yn(){ci.call(this);this.Rf=n;this.Sp=0;this.Ff=(new cb(100,100)).freeze();this.Po=q;this.Bd=this.lh=h;this.Xm=100;this.op=1;this.Cp=1E3;this.hp=0.05;this.gp=50;this.ep=150;this.fp=0;this.cp=20;this.bp=25}w.P("ForceDirectedLayout",yn);w.Da(yn,ci);
yn.prototype.cloneProtected=yn.prototype.xb=function(a){ci.prototype.xb.call(this,a);a.Ff=this.Ff.O();a.Po=this.Po;a.lh=this.lh;a.Bd=this.Bd;a.Xm=this.Xm;a.op=this.op;a.Cp=this.Cp;a.hp=this.hp;a.gp=this.gp;a.ep=this.ep;a.fp=this.fp;a.cp=this.cp;a.bp=this.bp};yn.prototype.createNetwork=yn.prototype.fv=function(){var a=new zn;Ym(a,this);return a};
yn.prototype.doLayout=yn.prototype.Hr=function(a){this.Mc===n&&(this.Mc=this.makeNetwork(a));a=this.Hv;if(0<this.B.ja.count){this.B.iv();for(var b=this.B.ja.l;b.next();){var c=b.value;c.Ri=this.electricalCharge(c);c.Wm=this.gravitationalMass(c)}for(b=this.B.lc.l;b.next();)c=b.value,c.ar=this.springStiffness(c),c.Yh=this.springLength(c);this.Sp=0;a:{if(!(3>this.B.ja.count)){var d=b=0,c=this.B.ja.l;c.next();for(var e=c.value.L;c.next();){if(c.value.L.Le(e)&&(b++,1<b)){b=h;break a}if(10<d)break;d++}}b=
q}if(b){b=this.B;for(d=b.SH().l;d.next();){this.Mc=e=d.value;for(c=this.B.ja.l;c.next();){for(var e=c.value,g=0,i=e.ja;i.next();)g++;e.ef=g;e.hj=1;e.il=n;e.Eg=n}An(this,0,a)}this.Mc=b;d.reset();u&&w.i(b,zn,yn,"arrangeConnectedGraphs:singletons");for(var c=this.Uu,j=d.count,e=h,i=g=0,k=[],l=0;l<j+b.ja.count+2;l++)k[l]=n;j=0;for(d.reset();d.next();){var m=d.value,l=this.ne(m);if(e)e=q,g=l.x+l.width/2,i=l.y+l.height/2,k[0]=new F(l.right+c.width,l.top),k[1]=new F(l.left,l.bottom+c.height),j=2;else{var p=
Bn(k,j,new F(g,i),new cb(l.width,l.height),c),r=k[p],s=new F(r.x+l.width+c.width,r.y),v=new F(r.x,r.y+l.height+c.height);p+1<j&&k.splice(p+1,0,n);k[p]=s;k[p+1]=v;j++;p=r.x-l.x;l=r.y-l.y;for(m=m.ja.l;m.next();){var y=m.value;y.pa+=p;y.ta+=l}}}for(m=b.ja.l;m.next();)y=m.value,l=y.L,2>j?(g=l.x+l.width/2,i=l.y+l.height/2,k[0]=new F(l.right+c.width,l.top),k[1]=new F(l.left,l.bottom+c.height),j=2):(p=Bn(k,j,new F(g,i),new cb(l.width,l.height),c),r=k[p],s=new F(r.x+l.width+c.width,r.y),v=new F(r.x,r.y+l.height+
c.height),p+1<j&&k.splice(p+1,0,n),k[p]=s,k[p+1]=v,j++,y.pa=r.x+y.width/2,y.ta=r.y+y.height/2);for(d.reset();d.next();){e=d.value;for(g=e.ja.l;g.next();)c=g.value,b.Ck(c);for(e=e.lc.l;e.next();)c=e.value,b.wn(c)}}Cn(this,a);this.updateParts()}this.Xm=a;this.Mc=n;this.Oe=h};yn.prototype.ne=function(a){u&&w.i(a,zn,yn,"computeBounds:net");for(var b=new G,c=h,a=a.ja.l;a.next();){var d=a.value;c?(c=q,b.set(d.L)):b.Hi(d.L)}return b};
function Dn(a,b,c){u&&(w.o(b,yn,"computeClusterLayoutIterations:level"),w.o(c,yn,"computeClusterLayoutIterations:maxiter"));return Math.max(Math.min(a.B.ja.count,c*(b+1)/11),10)}
function An(a,b,c){u&&(w.o(b,yn,"layoutClusters:level"),w.o(c,yn,"layoutClusters:maxiter"));var d;u&&w.o(b,yn,"hasClusters:level");if(10<b||3>a.B.ja.count)d=q;else{a.Rf===n?a.Rf=new z(En):a.Rf.clear();a.Rf.Tf(a.B.ja);d=a.Rf;d.sort(function(a,b){return a===n||b===n||a===b?0:b.ef-a.ef});for(var e=d.count-1;0<=e&&1>=d.n[e].ef;)e--;d=1<d.count-e}if(d){d=a.am;a.am*=1+1/(b+1);u&&w.o(b,yn,"pushSubNetwork:level");for(var e=a.B,g=new zn,i=a.Rf.l;i.next();){var j=i.value;if(1<j.ef){g.Ck(j);var k={fA:j.ef,gA:j.width,
eA:j.height,RE:j.K.x,SE:j.K.y};j.Eg===n&&(j.Eg=new z);j.Eg.add(k);j.Qx=j.Eg.count-1}else break}for(var l=e.lc.l;l.next();){var m=l.value;if(m.U.B===g&&m.Q.B===g)g.wn(m);else if(m.U.B===g){var p=m.U.il;p===n&&(p=new z(En),m.U.il=p);p.add(m.Q);m.U.ef--;m.U.hj+=m.Q.hj}else m.Q.B===g&&(p=m.Q.il,p===n&&(p=new z(En),m.Q.il=p),p.add(m.U),m.Q.ef--,m.Q.hj+=m.U.hj)}for(l=g.lc.l;l.next();)m=l.value,m.Yh*=Math.max(1,sc((m.U.hj+m.Q.hj)/(4*b+1)));for(i=g.ja.l;i.next();)if(j=i.value,p=j.il,p!==n&&0<p.count&&(k=
j.Eg.n[j.Eg.count-1],k=k.fA-j.ef,!(0>=k))){for(var r=0,s=0,v=p.count-k;v<p.count;v++){for(var y=p.n[v],m=n,l=y.lc.l;l.next();){var C=l.value;if(C.zG(y)===j){m=C;break}}m!==n&&(s+=m.Yh,r+=y.width*y.height)}p=j.pa;l=j.ta;m=j.width;v=j.height;y=j.K;C=m*v;1>C&&(C=1);r=sc((r+C+4*s*s/(k*k))/C);k=(r-1)*m/2;r=(r-1)*v/2;j.Eb=new G(p-y.x-k,l-y.y-r,m+2*k,v+2*r);j.focus=new F(y.x+k,y.y+r)}a.Mc=g;g=Math.max(0,Dn(a,b,c));a.Hv+=g;An(a,b+1,c);Cn(a,g);u&&(w.i(e,zn,yn,"popNetwork:oldnet"),w.o(b,yn,"popNetwork:level"));
for(c=a.B.ja.l;c.next();)g=c.value,g.B=e,g.Eg!==n&&(i=g.Eg.n[g.Qx],g.ef=i.fA,j=i.RE,k=i.SE,g.Eb=new G(g.pa-j,g.ta-k,i.gA,i.eA),g.focus=new F(j,k),g.Qx--);for(c=a.B.lc.l;c.next();)c.value.B=e;a.Mc=e;c=a.Rf;c===n?c=new z(En):c.clear();c.Tf(e.ja);c.sort(function(a,b){return a===n||b===n||a===b?0:b.ef-a.ef});for(e=c.l;e.next();)Fn(a,e.value,b);a.am=d}}
function Fn(a,b,c){u&&(w.i(b,En,yn,"surroundNode:oldnet"),w.o(c,yn,"surroundNode:level"));var d=b.il;if(!(d===n||0===d.count)){var c=b.pa,e=b.ta,g=b.width,i=b.height;b.Eg!==n&&0<b.Eg.count&&(i=b.Eg.n[0],g=i.gA,i=i.eA);for(var g=sc(g*g+i*i)/2,j=q,k=i=0,l=0,m=b.ja.l;m.next();){var p=m.value;1>=p.ef?k++:(j=h,l++,i+=Math.atan2(b.ta-p.ta,b.pa-p.pa))}if(0!==k){0<l&&(i/=l);l=b=0;b=j?2*Math.PI/(k+1):2*Math.PI/k;0===k%2&&(l=b/2);1<d.count&&d.sort(function(a,b){return a===n||b===n||a===b?0:b.width*b.height-
a.width*a.height});j=0===k%2?0:1;for(m=d.l;m.next();)if(p=m.value,!(1<p.ef)&&!a.isFixed(p)){d=n;for(k=p.lc.l;k.next();){d=k.value;break}var k=p.width,r=p.height,k=sc(k*k+r*r)/2,d=g+d.Yh+k,k=i+(b*(j/2>>1)+l)*(0==j%2?1:-1);p.pa=c+d*Math.cos(k);p.ta=e+d*Math.sin(k);j++}}}}
function Bn(a,b,c,d,e){var g=9E19,i=-1,j=0;a:for(;j<b;j++){var k=a[j],l=k.x-c.x,m=k.y-c.y,l=l*l+m*m;if(l<g){for(m=j-1;0<=m;m--)if(a[m].y>k.y&&a[m].x-k.x<d.width+e.width)continue a;for(m=j+1;m<b;m++)if(a[m].x>k.x&&a[m].y-k.y<d.height+e.height)continue a;i=j;g=l}}return i}yn.prototype.vF=function(a){var b=a.fb;if(b!==n)for(b=b.FC();b.next();){var c=b.value;if("Comment"===c.ud){var d=this.B.Ke(c);d===n&&(d=this.B.xn(c),d.Ri=this.rC,c=this.B.bm(a,d,n),c!==n&&(c.Yh=this.sC))}}};
function Gn(a,b){u&&(w.i(a,En,yn,"getNodeDistance:vertexA"),w.i(b,En,yn,"getNodeDistance:vertexB"));var c=a.L,d=c.x,e=c.y,g=c.width,c=c.height,i=b.L,j=i.x,k=i.y,l=i.width,i=i.height;return d+g<j?e>k+i?(d=d+g-j,e=e-k-i,sc(d*d+e*e)):e+c<k?(d=d+g-j,e=e+c-k,sc(d*d+e*e)):j-(d+g):d>j+l?e>k+i?(d=d-j-l,e=e-k-i,sc(d*d+e*e)):e+c<k?(d=d-j-l,e=e+c-k,sc(d*d+e*e)):d-(j+l):e>k+i?e-(k+i):e+c<k?k-(e+c):0.1}
function Cn(a,b){u&&w.o(b,yn,"performIterations:num");a.Rf=n;for(var c=a.Sp+b;a.Sp<c&&!(a.Sp++,!Hn(a)););a.Rf=n}
function Hn(a){a.Rf===n&&(a.Rf=new z(En),a.Rf.Tf(a.B.ja));var b=a.Rf;if(0>=b.count)return q;var c=b.n[0];c.Md=0;c.Nd=0;for(var d=c.pa,e=d,g=c.ta,i=g,c=1;c<b.count;c++){var j=b.n[c];j.Md=0;j.Nd=0;var k=j.pa,j=j.ta,d=Math.min(d,k),e=Math.max(e,k),g=Math.min(g,j),i=Math.max(i,j)}(i=e-d>i-g)?b.sort(function(a,b){return a===n||b===n||a===b?0:a.pa-b.pa}):b.sort(function(a,b){return a===n||b===n||a===b?0:a.ta-b.ta});for(var l=0,m=k=0,c=0;c<b.count;c++){j=b.n[c];d=j.pa;e=j.ta;k=j.Ri*a.electricalFieldX(d,
e);m=j.Ri*a.electricalFieldY(d,e);j.Md+=k;j.Nd+=m;k=j.Wm*a.gravitationalFieldX(d,e);m=j.Wm*a.gravitationalFieldY(d,e);j.Md+=k;j.Nd+=m;for(var p=a.am,r=c+1;r<b.count;r++)if(g=b.n[r],g!==j){var m=g.pa,s=g.ta;if(Math.abs(d-m)>p){if(i)break}else if(Math.abs(e-s)>p){if(!i)break}else{var v=Gn(j,g);1>v?(d>m?(k=Math.abs(g.L.right-j.L.left),k=In(1+k)):d<m?(k=Math.abs(g.L.left-j.L.right),k=-In(1+k)):(k=Math.max(g.width,j.width),k=In(1+k)-k/2),e>s?(m=Math.abs(g.L.bottom-j.L.top),m=In(1+m)):d<m?(m=Math.abs(g.L.top-
j.L.bottom),m=-In(1+m)):(m=Math.max(g.height,j.height),m=In(1+m)-m/2)):(l=-(j.Ri*g.Ri)/(v*v),k=l*((m-d)/v),m=l*((s-e)/v));j.Md+=k;j.Nd+=m;g.Md-=k;g.Nd-=m}}}for(c=a.B.lc.l;c.next();)i=c.value,j=i.U,g=i.Q,d=j.pa,e=j.ta,m=g.pa,s=g.ta,v=Gn(j,g),1>v?(k=(d>m?1:-1)*In(1+Math.max(g.width,j.width)),m=(e>s?1:-1)*In(1+Math.max(g.height,j.height))):(l=i.ar*(v-i.Yh),k=l*((m-d)/v),m=l*((s-e)/v)),j.Md+=k,j.Nd+=m,g.Md-=k,g.Nd-=m;c=0;d=Math.max(a.am/20,50);for(e=0;e<b.count;e++)j=b.n[e],a.isFixed(j)||(g=j.Md,i=j.Nd,
g<-d?g=-d:g>d&&(g=d),i<-d?i=-d:i>d&&(i=d),j.pa+=g,j.ta+=i,c=Math.max(c,g*g+i*i));return c>a.Yy*a.Yy}function In(a){return Math.floor(a*Math.random())}yn.prototype.commitLayout=yn.prototype.bv=function(){this.Rz();this.commitNodes();this.cs&&this.commitLinks()};yn.prototype.Rz=function(){if(this.im)for(var a=this.B.lc.l;a.next();){var b=a.value.Ra;b!==n&&(b.kb=Ib,b.ob=Ib)}};
yn.prototype.commitNodes=yn.prototype.Ny=function(){var a=0,b=0;if(this.YB)var b=this.ne(this.B),c=this.dd,a=c.x-b.x,b=c.y-b.y;for(var c=new G,d=this.B.ja.l;d.next();){var e=d.value;if(0!==a||0!==b)c.set(e.L),c.x+=a,c.y+=b,e.Eb=c;e.commit()}};yn.prototype.commitLinks=yn.prototype.My=function(){for(var a=this.B.lc.l;a.next();)a.value.commit()};yn.prototype.springStiffness=yn.prototype.$L=function(a){a=a.ar;return!isNaN(a)?a:this.wC};
yn.prototype.springLength=yn.prototype.ZL=function(a){a=a.Yh;return!isNaN(a)?a:this.vC};yn.prototype.electricalCharge=yn.prototype.eK=function(a){a=a.Ri;return!isNaN(a)?a:this.tC};yn.prototype.electricalFieldX=yn.prototype.fK=ca(0);yn.prototype.electricalFieldY=yn.prototype.gK=ca(0);yn.prototype.gravitationalMass=yn.prototype.HK=function(a){a=a.Wm;return!isNaN(a)?a:this.uC};yn.prototype.gravitationalFieldX=yn.prototype.FK=ca(0);yn.prototype.gravitationalFieldY=yn.prototype.GK=ca(0);
yn.prototype.isFixed=yn.prototype.iD=function(a){return a.ox};w.u(yn,{zJ:"currentIteration"},t("Sp"));w.g(yn,"arrangementSpacing",yn.prototype.Uu);w.defineProperty(yn,{Uu:"arrangementSpacing"},t("Ff"),function(a){this.Ff.I(a)||(this.Ff.Xa(a),this.F())});w.g(yn,"arrangesToOrigin",yn.prototype.YB);w.defineProperty(yn,{YB:"arrangesToOrigin"},t("Po"),function(a){this.Po!==a&&(this.Po=a,this.F())});w.g(yn,"setsPortSpots",yn.prototype.im);
w.defineProperty(yn,{im:"setsPortSpots"},t("lh"),function(a){this.lh!==a&&(this.lh=a,this.F())});w.g(yn,"comments",yn.prototype.Ly);w.defineProperty(yn,{Ly:"comments"},t("Bd"),function(a){this.Bd!==a&&(this.Bd=a,this.F())});w.g(yn,"maxIterations",yn.prototype.Hv);w.defineProperty(yn,{Hv:"maxIterations"},t("Xm"),function(a){this.Xm!==a&&0<=a&&(this.Xm=a,this.F())});w.g(yn,"epsilonDistance",yn.prototype.Yy);
w.defineProperty(yn,{Yy:"epsilonDistance"},t("op"),function(a){this.op!==a&&0<a&&(this.op=a,this.F())});w.g(yn,"infinityDistance",yn.prototype.am);w.defineProperty(yn,{am:"infinityDistance"},t("Cp"),function(a){this.Cp!==a&&1<a&&(this.Cp=a,this.F())});w.g(yn,"defaultSpringStiffness",yn.prototype.wC);w.defineProperty(yn,{wC:"defaultSpringStiffness"},t("hp"),function(a){this.hp!==a&&(this.hp=a,this.F())});w.g(yn,"defaultSpringLength",yn.prototype.vC);
w.defineProperty(yn,{vC:"defaultSpringLength"},t("gp"),function(a){this.gp!==a&&(this.gp=a,this.F())});w.g(yn,"defaultElectricalCharge",yn.prototype.tC);w.defineProperty(yn,{tC:"defaultElectricalCharge"},t("ep"),function(a){this.ep!==a&&(this.ep=a,this.F())});w.g(yn,"defaultGravitationalMass",yn.prototype.uC);w.defineProperty(yn,{uC:"defaultGravitationalMass"},t("fp"),function(a){this.fp!==a&&(this.fp=a,this.F())});w.g(yn,"defaultCommentSpringLength",yn.prototype.sC);
w.defineProperty(yn,{sC:"defaultCommentSpringLength"},t("cp"),function(a){this.cp!==a&&(this.cp=a,this.F())});w.g(yn,"defaultCommentElectricalCharge",yn.prototype.rC);w.defineProperty(yn,{rC:"defaultCommentElectricalCharge"},t("bp"),function(a){this.bp!==a&&(this.bp=a,this.F())});function zn(){Xm.call(this)}w.P("ForceDirectedNetwork",zn);w.Da(zn,Xm);zn.prototype.createVertex=zn.prototype.vj=function(){return new En};zn.prototype.createEdge=zn.prototype.Mn=function(){return new Jn};
function En(){an.call(this);this.ox=q;this.Wm=this.Ri=NaN;this.hj=this.ef=this.Nd=this.Md=0;this.Eg=this.il=n;this.Qx=0}w.P("ForceDirectedVertex",En);w.Da(En,an);w.g(En,"isFixed",En.prototype.iD);w.defineProperty(En,{iD:"isFixed"},t("ox"),ba("ox"));w.g(En,"charge",En.prototype.VF);w.defineProperty(En,{VF:"charge"},t("Ri"),ba("Ri"));w.g(En,"mass",En.prototype.dH);w.defineProperty(En,{dH:"mass"},t("Wm"),ba("Wm"));w.g(En,"forceX",En.prototype.uG);w.defineProperty(En,{uG:"forceX"},t("Md"),ba("Md"));
w.g(En,"forceY",En.prototype.vG);w.defineProperty(En,{vG:"forceY"},t("Nd"),ba("Nd"));function Jn(){bn.call(this);this.Yh=this.ar=NaN}w.P("ForceDirectedEdge",Jn);w.Da(Jn,bn);w.g(Jn,"stiffness",Jn.prototype.UH);w.defineProperty(Jn,{UH:"stiffness"},t("ar"),ba("ar"));w.g(Jn,"length",Jn.prototype.length);w.defineProperty(Jn,{length:"length"},t("Yh"),ba("Yh"));
function X(){ci.call(this);this.ld=this.Dd=25;this.da=0;this.ym=Kn;this.Tm=Ln;this.Nm=Mn;this.tl=4;this.qm=Nn;this.gi=On;this.lh=h;this.pb=this.Ot=this.ab=-1;this.cf=this.iq=0;this.od=this.af=this.yg=this.eh=this.nd=n;this.pq=0;this.Zt=this.zl=n;this.Jf=0;this.qq=n;this.Ag=[];this.Ag.length=100}w.P("LayeredDigraphLayout",X);w.Da(X,ci);
X.prototype.cloneProtected=X.prototype.xb=function(a){ci.prototype.xb.call(this,a);a.Dd=this.Dd;a.ld=this.ld;a.da=this.da;a.ym=this.ym;a.Tm=this.Tm;a.Nm=this.Nm;a.tl=this.tl;a.qm=this.qm;a.gi=this.gi;a.lh=this.lh};X.prototype.createNetwork=X.prototype.fv=function(){var a=new Pn;Ym(a,this);return a};
X.prototype.doLayout=X.prototype.Hr=function(a){this.Mc===n&&(this.Mc=this.makeNetwork(a));this.dd=$m(this,this.dd);this.Ot=-1;this.cf=this.iq=0;this.qq=this.Zt=this.zl=n;for(a=0;a<this.Ag.length;a++)this.Ag[a]=n;if(0<this.B.ja.count){this.B.iv();for(a=this.B.lc.l;a.next();)a.value.wb=q;switch(this.ym){default:case Qn:var b=0,c=this.B.ja.count-1,a=[];a.length=c+1;for(var d=this.B.ja.l;d.next();)d.value.Ca=h;for(;Rn(this.B)!==n;){for(d=Sn(this.B);d!==n;)a[c]=d,c--,d.Ca=q,d=Sn(this.B);for(d=Tn(this.B);d!==
n;)a[b]=d,b++,d.Ca=q,d=Tn(this.B);u&&w.i(this.B,Xm,X,"greedyCycleRemovalFindNodeMaxDegDiff:network");for(var d=n,e=0,g=this.B.ja.l;g.next();){var i=g.value;if(i.Ca){for(var j=0,k=i.Fb;k.next();)k.value.Q.Ca&&j++;for(var k=0,l=i.Gb;l.next();)l.value.U.Ca&&k++;if(d===n||e<j-k)d=i,e=j-k}}d!==n&&(a[b]=d,b++,d.Ca=q)}for(b=0;b<this.B.ja.count;b++)a[b].ea=b;for(a=this.B.lc.l;a.next();)b=a.value,b.U.ea>b.Q.ea&&(this.B.Pv(b),b.wb=h);break;case Kn:for(b=this.B.ja.l;b.next();)b.value.fk=-1,b.value.Fm=-1;for(a=
this.B.lc.l;a.next();)a.value.rp=q;this.pq=0;for(b.reset();b.next();)0===b.value.Gb.count&&Un(this,b.value);for(b.reset();b.next();)-1===b.value.fk&&Un(this,b.value);for(a.reset();a.next();)b=a.value,b.rp||(c=b.U,d=c.Fm,e=b.Q,g=e.Fm,e.fk<c.fk&&d<g&&(this.B.Pv(b),b.wb=h))}for(a=this.B.ja.l;a.next();)b=a.value,b.G=-1;this.ab=-1;this.assignLayers();for(a.reset();a.next();)this.ab=Math.max(this.ab,a.value.G);c=this.B.lc.l;for(b=[];c.next();)a=c.value,a.Ca=q,b.push(a);for(c=0;c<b.length;c++)if(a=b[c],
!a.Ca&&!((a.U.fb===n||a.Q.fb===n)&&a.U.G===a.Q.G)){g=j=i=k=0;e=a.U;d=a.Q;if(a.Ra!==n){j=a.Ra;if(j===n)continue;var m=e.fb,g=d.fb;if(m===n||g===n)continue;var p=j.ia,i=j.na,r=j.gd,k=j.ce;a.wb&&(j=p,l=r,p=i,r=k,i=j,k=l);var l=e.K.copy(),j=a.Q.K.copy(),s=a.wb?d.L.copy():e.L.copy(),r=isNaN(s.x)?l.copy():Jl(p,r,Mb);m!==p&&(!isNaN(s.x)&&p.nb())&&(m=e.L.copy(),isNaN(m.x)||(r.x+=s.x-m.x,r.y+=s.y-m.y));m=a.wb?e.L.copy():d.L.copy();k=isNaN(m.x)?j.copy():Jl(i,k,Mb);g!==i&&(!isNaN(m.x)&&i.nb())&&(g=d.L,isNaN(g.x)||
(k.x+=m.x-g.x,k.y+=m.y-g.y));90===this.da||270===this.da?(g=Math.round((r.x-l.x)/this.ld),i=r.x,j=Math.round((k.x-j.x)/this.ld),k=k.x):(g=Math.round((r.y-l.y)/this.ld),i=r.y,j=Math.round((k.y-j.y)/this.ld),k=k.y);a.hf=g;a.jf=i;a.De=j;a.lf=k}else a.hf=0,a.jf=0,a.De=0,a.lf=0;l=e.G;r=d.G;m=a;u&&w.i(m,Vn,X,"_goesAround:edge");p=0;s=m.Ra;if(s!==n){if(s.gd!==n){var v=s.ia;qm(s)===Wn(this,m,h)?p+=1:this.im&&v!==n&&1===v.ports.count&&m.wb&&(p+=1)}s.ce!==n&&(v=s.na,rm(s)===Wn(this,m,q)?p+=2:this.im&&v!==n&&
1===v.ports.count&&m.wb&&(p+=2))}m=1===p||3===p?h:q;if(p=2===p||3===p?h:q)s=this.B.vj(),s.fb=n,s.dl=1,s.G=l,s.dj=e,this.B.Ck(s),e=this.B.bm(e,s,a.Ra),e.Ca=q,e.wb=a.wb,e.hf=g,e.De=0,e.jf=i,e.lf=0,e=s;v=1;m&&v--;if(l-r>v&&0<l){a.Ca=q;s=this.B.vj();s.fb=n;s.dl=2;s.G=l-1;this.B.Ck(s);e=this.B.bm(e,s,a.Ra);e.Ca=h;e.wb=a.wb;e.hf=p?0:g;e.De=0;e.jf=p?0:i;e.lf=0;e=s;for(l--;l-r>v&&0<l;)s=this.B.vj(),s.fb=n,s.dl=3,s.G=l-1,this.B.Ck(s),e=this.B.bm(e,s,a.Ra),e.Ca=h,e.wb=a.wb,e.hf=0,e.De=0,e.jf=0,e.lf=0,e=s,l--;
e=this.B.bm(s,d,a.Ra);e.Ca=!m;m&&(s.dj=d);e.wb=a.wb;e.hf=0;e.De=j;e.jf=0;e.lf=k}else a.Ca=h}b=this.nd=[];for(c=0;c<=this.ab;c++)b[c]=0;for(a=this.B.ja.l;a.next();)a.value.ea=-1;this.initializeIndices();this.Ot=-1;for(c=this.cf=this.iq=0;c<=this.ab;c++)b[c]>b[this.cf]&&(this.Ot=b[c]-1,this.cf=c),b[c]<b[this.iq]&&(this.iq=c);this.qq=[];for(c=0;c<b.length;c++)this.qq[c]=[];for(a.reset();a.next();)c=a.value,b=c.G,this.qq[b][c.ea]=c;this.pb=-1;for(a=0;a<=this.ab;a++){b=Xn(this,a);c=0;d=this.nd[a];for(e=
0;e<d;e++)g=b[e],c+=Yn(this,g,h),g.Y=c,c+=1,c+=Yn(this,g,q);this.pb=Math.max(this.pb,c-1);Zn(this,a,b)}this.reduceCrossings();this.straightenAndPack();this.updateParts()}this.Mc=n;this.Oe=h};function $n(a){u&&w.i(a,bn,X,"linkMinLength:edge");for(var b=a.Q,c=0,a=a.U.Fb;a.next();)a.value.Q===b&&c++;return 1<c?2:1}function ao(a){u&&w.i(a,bn,X,"linkLengthWeight:edge");return 1}function bo(a){u&&w.i(a,bn,X,"linkStraightenWeight:edge");var b=a.U.fb,a=a.Q.fb;return b===n&&a===n?8:b===n||a===n?4:1}
function co(a,b,c){u&&(w.i(b,eo,X,"nodeMinLayerSpace:v"),w.k(c,"boolean",X,"nodeMinLayerSpace:topleft"));return b.fb===n?0:90===a.da||270===a.da?c?b.K.y+10:b.L.height-b.K.y+10:c?b.K.x+10:b.L.width-b.K.x+10}
function Yn(a,b,c){u&&(w.i(b,eo,X,"nodeMinColumnSpace:v"),w.k(c,"boolean",X,"nodeMinColumnSpace:topleft"));if(b.fb===n)return 0;var d=c?b.Cx:b.Bx;if(d!==f)return d;d=a.da;return 90===d||270===d?c?b.Cx=b.K.x/a.ld+1|0:b.Bx=(b.L.width-b.K.x)/a.ld+1|0:c?b.Cx=b.K.y/a.ld+1|0:b.Bx=(b.L.height-b.K.y)/a.ld+1|0}function fo(a){a.zl===n&&(a.zl=[]);for(var b=0,c=a.B.ja.l,d;c.next();)d=c.value,a.zl[b]=d.G,b++,a.zl[b]=d.Y,b++,a.zl[b]=d.ea,b++;return a.zl}
function ho(a,b){u&&w.i(b,Array,X,"restoreLayout:layout");for(var c=0,d=a.B.ja.l,e;d.next();)e=d.value,e.G=b[c],c++,e.Y=b[c],c++,e.ea=b[c],c++}
function io(a,b,c){u&&(w.o(b,X,"crossingMatrix:unfixedLayer"),w.o(c,X,"crossingMatrix:direction"));var d=Xn(a,b),e=a.nd[b];a.Zt||(a.Zt=[]);for(var g=a.Zt,i,j=0;j<e;j++){i=0;var k=d[j],l=k.dj,m,p;if(l!==n&&l.G===k.G)if(k=l.ea,k>j)for(p=j+1;p<k;p++)m=d[p],(m.dj!==l||m.dl!==l.dl)&&i++;else for(p=j-1;p>k;p--)m=d[p],(m.dj!==l||m.dl!==l.dl)&&i++;var r,s,v,y,C,E;if(0<=c){k=d[j].Of;for(l=0;l<k.count;l++)if(r=k.n[l],r.Ca&&r.U.G!==b){m=r.U.ea;p=r.lf;r=r.jf;for(s=l+1;s<k.count;s++)v=k.n[s],v.Ca&&v.U.G!==b&&
(y=v.U.ea,C=v.lf,v=v.jf,p<C&&(m>y||m===y&&r>v)&&i++,C<p&&(y>m||y===m&&v>r)&&i++)}}if(0>=c){k=d[j].Ze;for(l=0;l<k.count;l++)if(r=k.n[l],r.Ca&&r.Q.G!==b){m=r.Q.ea;p=r.lf;r=r.jf;for(s=l+1;s<k.count;s++)v=k.n[s],v.Ca&&v.Q.G!==b&&(y=v.Q.ea,C=v.lf,v=v.jf,r<v&&(m>y||m===y&&p>C)&&i++,v<r&&(y>m||y===m&&C>p)&&i++)}}g[j*e+j]=i;for(k=j+1;k<e;k++){var I=0,D=0;if(0<=c){i=d[j].Of;E=d[k].Of;for(l=0;l<i.count;l++)if(r=i.n[l],r.Ca&&r.U.G!==b){m=r.U.ea;r=r.jf;for(s=0;s<E.count;s++)v=E.n[s],v.Ca&&v.U.G!==b&&(y=v.U.ea,
v=v.jf,(m<y||m===y&&r<v)&&D++,(y<m||y===m&&v<r)&&I++)}}if(0>=c){i=d[j].Ze;E=d[k].Ze;for(l=0;l<i.count;l++)if(r=i.n[l],r.Ca&&r.Q.G!==b){m=r.Q.ea;p=r.lf;for(s=0;s<E.count;s++)v=E.n[s],v.Ca&&v.Q.G!==b&&(y=v.Q.ea,C=v.lf,(m<y||m===y&&p<C)&&D++,(y<m||y===m&&C<p)&&I++)}}g[j*e+k]=I;g[k*e+j]=D}}Zn(a,b,d);return g}X.prototype.countCrossings=X.prototype.yJ=function(){var a,b=0,c,d;for(a=0;a<=this.ab;a++){c=io(this,a,1);d=this.nd[a];for(var e=0;e<d;e++)for(var g=e;g<d;g++)b+=c[e*d+g]}return b};
function jo(a){u&&w.k(h,"boolean",X,"countBends:weighted");for(var b=0,c=0;c<=a.ab;c++){var d=a,e=c;u&&(w.o(e,X,"bends:unfixedLayer"),w.o(1,X,"bends:direction"),w.k(h,"boolean",X,"bends:weighted"));for(var g=Xn(d,e),i=d.nd[e],j=0,k=f,k=0;k<i;k++){var l=g[k].Ze,m,p,r;if("undefined"!==typeof l)for(var s=0;s<l.count;s++)m=l.n[s],m.Ca&&m.Q.G!==e&&(p=m.U.Y+m.hf,r=m.Q.Y+m.De,j+=(Math.abs(p-r)+1)*bo(m))}Zn(d,e,g);b+=j}return b}
X.prototype.normalize=function(){var a=Infinity;this.pb=-1;for(var b=this.B.ja.l,c;b.next();)c=b.value,a=Math.min(a,c.Y-Yn(this,c,h)),this.pb=Math.max(this.pb,c.Y+Yn(this,c,q));for(b.reset();b.next();)b.value.Y-=a;this.pb-=a};
function so(a,b,c){u&&(w.o(b,X,"barycenters:unfixedLayer"),w.o(c,X,"barycenters:direction"));var d=Xn(a,b),e=a.nd[b],g=[],i;for(i=0;i<e;i++){var j=d[i],k=n;0>=c&&(k=j.Of);var l=n;0<=c&&(l=j.Ze);var m=0,p=0,r=j.dj;r!==n&&r.G===j.G&&(m+=r.Y-1,p++);if(k!==n)for(r=0;r<k.count;r++){var j=k.n[r],s=j.U;j.Ca&&(!j.wb&&s.G!==b)&&(m+=s.Y+j.hf,p++)}if(l!==n)for(k=0;k<l.count;k++)j=l.n[k],r=j.Q,j.Ca&&(!j.wb&&r.G!==b)&&(m+=r.Y+j.De,p++);g[i]=0===p?-1:m/p}Zn(a,b,d);return g}
function zo(a,b,c){u&&(w.o(b,X,"medians:unfixedLayer"),w.o(c,X,"medians:direction"));for(var d=Xn(a,b),e=a.nd[b],g=[],i=0;i<e;i++){var j=d[i],k=n;0>=c&&(k=j.Of);var l=n;0<=c&&(l=j.Ze);var m=0,p=[],r=j.dj;r!==n&&r.G===j.G&&(p[m]=r.Y-1,m++);if(k!==n)for(r=0;r<k.count;r++){var j=k.n[r],s=j.U;j.Ca&&(!j.wb&&s.G!==b)&&(p[m]=s.Y+j.hf,m++)}if(l!==n)for(k=0;k<l.count;k++)j=l.n[k],r=j.Q,j.Ca&&(!j.wb&&r.G!==b)&&(p[m]=r.Y+j.De,m++);0===m?g[i]=-1:(p.sort(function(a,b){return a-b}),l=m>>1,g[i]=m&1?p[l]:p[l-1]+
p[l]>>1)}Zn(a,b,d);return g}function Ao(a,b,c,d,e,g){u&&(w.i(b,eo,X,"tightComponentUnset:v"),w.o(c,X,"tightComponentUnset:component"),w.o(d,X,"tightComponentUnset:unset"),w.k(e,"boolean",X,"tightComponentUnset:forward"),w.k(g,"boolean",X,"tightComponentUnset:backward"));if(b.Jb===d){b.Jb=c;var i,j;if(e)for(var k=b.Fb;k.next();){var l=k.value.Q;i=b.G-l.G;j=$n(k.value);i===j&&Ao(a,l,c,d,e,g)}if(g)for(k=b.Gb;k.next();)l=k.value.U,i=l.G-b.G,j=$n(k.value),i===j&&Ao(a,l,c,d,e,g)}}
function Bo(a,b,c,d,e,g){u&&(w.i(b,eo,X,"componentUnset:v"),w.o(c,X,"componentUnset:component"),w.o(d,X,"componentUnset:unset"),w.k(e,"boolean",X,"componentUnset:forward"),w.k(g,"boolean",X,"componentUnset:backward"));if(b.Jb===d){b.Jb=c;if(e)for(var i=b.Fb,j;i.next();)j=i.value.Q,Bo(a,j,c,d,e,g);if(g)for(b=b.Gb;b.next();)i=b.value.U,Bo(a,i,c,d,e,g)}}function Rn(a){u&&w.i(a,Xm,X,"greedyCycleRemovalFindNode:network");for(a=a.ja.l;a.next();){var b=a.value;if(b.Ca)return b}return n}
function Sn(a){u&&w.i(a,Xm,X,"greedyCycleRemovalFindSink:network");for(a=a.ja.l;a.next();){var b=a.value;if(b.Ca){for(var c=h,d=b.Fb;d.next();)if(d.value.Q.Ca){c=q;break}if(c)return b}}return n}function Tn(a){u&&w.i(a,Xm,X,"greedyCycleRemovalFindSource:network");for(a=a.ja.l;a.next();){var b=a.value;if(b.Ca){for(var c=h,d=b.Gb;d.next();)if(d.value.U.Ca){c=q;break}if(c)return b}}return n}
function Un(a,b){u&&w.i(b,eo,X,"depthFirstSearchCycleRemovalVisit:v");b.fk=a.pq;a.pq++;for(var c=b.Fb;c.next();){var d=c.value,e=d.Q;-1===e.fk&&(d.rp=h,Un(a,e))}b.Fm=a.pq;a.pq++}
X.prototype.assignLayers=X.prototype.yI=function(){switch(this.Tm){case Co:Do(this);break;case Eo:for(var a,b=this.B.ja.l;b.next();)a=Fo(this,b.value),this.ab=Math.max(a,this.ab);for(b.reset();b.next();)a=b.value,a.G=this.ab-a.G;break;default:case Ln:Do(this);for(b=this.B.ja.l;b.next();)b.value.Ca=q;for(b.reset();b.next();)0===b.value.Gb.count&&Go(this,b.value);a=Infinity;for(b.reset();b.next();)a=Math.min(a,b.value.G);this.ab=-1;for(b.reset();b.next();)b.value.G-=a,this.ab=Math.max(this.ab,b.value.G)}};
function Do(a){for(var b=a.B.ja.l;b.next();){var c=Ho(a,b.value);a.ab=Math.max(c,a.ab)}}function Ho(a,b){u&&w.i(b,eo,X,"longestPathSinkLayeringLength:v");var c=0;if(-1===b.G){for(var d=b.Fb;d.next();)var e=d.value,g=$n(e),c=Math.max(c,Ho(a,e.Q)+g);b.G=c}else c=b.G;return c}function Fo(a,b){u&&w.i(b,eo,X,"longestPathSourceLayeringLength:v");var c=0;if(-1===b.G){for(var d,e,g=b.Gb;g.next();)e=g.value,d=$n(e),c=Math.max(c,Fo(a,e.U)+d);b.G=c}else c=b.G;return c}
function Go(a,b){u&&w.i(b,eo,X,"optimalLinkLengthLayeringDepthFirstSearch:v");if(!b.Ca){b.Ca=h;for(var c=b.Fb;c.next();)Go(a,c.value.Q);u&&w.i(b,eo,X,"optimalLinkLengthLayeringPull:v");for(c=a.B.ja.l;c.next();)c.value.Jb=-1;for(var d=b.Gb;d.next();){var e=d.value,g=$n(e);e.U.G-e.Q.G>g&&Ao(a,e.U,0,-1,h,q)}for(Ao(a,b,1,-1,h,h);0!==b.Jb;){for(var g=0,d=Infinity,i=0,j=n,k=a.B.ja.l;k.next();){var l=k.value;if(1===l.Jb){for(var m=0,p=q,r=l.Gb;r.next();){var e=r.value,s=e.U,m=m+ao(e);1!==s.Jb&&(g+=ao(e),
s=s.G-l.G,e=$n(e),d=Math.min(d,s-e))}for(e=l.Fb;e.next();)r=e.value,s=r.Q,m-=ao(r),1!==s.Jb?g-=ao(r):p=h;if((j===n||m<i)&&!p)j=l,i=m}}if(0<g){for(c.reset();c.next();)g=c.value,1===g.Jb&&(g.G+=d);b.Jb=0}else j.Jb=0}u&&w.i(b,eo,X,"optimalLinkLengthLayeringPush:v");for(c=a.B.ja.l;c.next();)c.value.Jb=-1;for(Ao(a,b,1,-1,h,q);0!==b.Jb;){g=0;d=Infinity;i=0;j=n;for(k=a.B.ja.l;k.next();)if(l=k.value,1===l.Jb){m=0;p=q;for(e=l.Gb;e.next();)r=e.value.U,m+=ao(e.value),1!==r.Jb?g+=ao(e.value):p=h;for(e=k.value.Fb;e.next();)r=
e.value,s=r.Q,m-=ao(r),1!==s.Jb&&(g-=ao(r),s=l.G-s.G,r=$n(r),d=Math.min(d,s-r));if((j===n||m>i)&&!p)j=l,i=m}if(0>g){for(c.reset();c.next();)g=c.value,1===g.Jb&&(g.G-=d);b.Jb=0}else j.Jb=0}}}function Wn(a,b,c){u&&(w.i(b,Vn,X,"_oppositeSpotDir:edge"),w.k(c,"boolean",X,"_oppositeSpotDir:from"));return 90===a.da?c&&!b.wb||!c&&b.wb?Kb:Qb:180===a.da?c&&!b.wb||!c&&b.wb?Ub:Tb:270===a.da?c&&!b.wb||!c&&b.wb?Qb:Kb:c&&!b.wb||!c&&b.wb?Tb:Ub}
X.prototype.initializeIndices=X.prototype.RK=function(){switch(this.Nm){default:case Io:for(var a,b=this.B.ja.l;b.next();){var c=b.value;a=c.G;c.ea=this.nd[a];this.nd[a]++}break;case Mn:b=this.B.ja.l;for(a=this.ab;0<=a;a--){for(;b.next();)b.value.G===a&&-1===b.value.ea&&Jo(this,b.value);b.reset()}break;case Ko:b=this.B.ja.l;for(a=0;a<=this.ab;a++){for(;b.next();)b.value.G===a&&-1===b.value.ea&&Lo(this,b.value);b.reset()}}};
function Jo(a,b){u&&w.i(b,eo,X,"depthFirstOutInitializeIndicesVisit:v");var c=b.G;b.ea=a.nd[c];a.nd[c]++;for(var c=b.Ze.ng(),d=h,e;d;){d=q;for(e=0;e<c.length-1;e++){var g=c[e],i=c[e+1];g.hf>i.hf&&(d=h,c[e]=i,c[e+1]=g)}}for(e=0;e<c.length;e++)d=c[e],d.Ca&&(d=d.Q,-1===d.ea&&Jo(a,d))}
function Lo(a,b){u&&w.i(b,eo,X,"depthFirstInInitializeIndicesVisit:v");var c=b.G;b.ea=a.nd[c];a.nd[c]++;for(var c=b.Of.ng(),d=h,e;d;){d=q;for(e=0;e<c.length-1;e++){var g=c[e],i=c[e+1];g.De>i.De&&(d=h,c[e]=i,c[e+1]=g)}}for(e=0;e<c.length;e++)d=c[e],d.Ca&&(d=d.U,-1===d.ea&&Lo(a,d))}
X.prototype.reduceCrossings=X.prototype.IL=function(){var a=this.countCrossings(),b=fo(this),c,d,e;for(c=0;c<this.tl;c++){for(d=0;d<=this.ab;d++)Mo(this,d,1),No(this,d,1,1);e=this.countCrossings();e<a&&(a=e,b=fo(this));for(d=this.ab;0<=d;d--)Mo(this,d,-1),No(this,d,-1,-1);e=this.countCrossings();e<a&&(a=e,b=fo(this))}ho(this,b);for(c=0;c<this.tl;c++){for(d=0;d<=this.ab;d++)Mo(this,d,0),No(this,d,0,0);e=this.countCrossings();e<a&&(a=e,b=fo(this));for(d=this.ab;0<=d;d--)Mo(this,d,0),No(this,d,0,0);
e=this.countCrossings();e<a&&(a=e,b=fo(this))}ho(this,b);var g,i,j;switch(this.qm){case Oo:break;case Po:for(j=a+1;(d=this.countCrossings())<j;){j=d;for(c=this.ab;0<=c;c--)for(i=0;i<=c;i++){for(g=h;g;){g=q;for(d=c;d>=i;d--)g=No(this,d,-1,-1)||g}e=this.countCrossings();e>=a?ho(this,b):(a=e,b=fo(this));for(g=h;g;){g=q;for(d=c;d>=i;d--)g=No(this,d,1,1)||g}e=this.countCrossings();e>=a?ho(this,b):(a=e,b=fo(this));for(g=h;g;){g=q;for(d=i;d<=c;d++)g=No(this,d,1,1)||g}e>=a?ho(this,b):(a=e,b=fo(this));for(g=
h;g;){g=q;for(d=i;d<=c;d++)g=No(this,d,-1,-1)||g}e>=a?ho(this,b):(a=e,b=fo(this));for(g=h;g;){g=q;for(d=c;d>=i;d--)g=No(this,d,0,0)||g}e>=a?ho(this,b):(a=e,b=fo(this));for(g=h;g;){g=q;for(d=i;d<=c;d++)g=No(this,d,0,0)||g}e>=a?ho(this,b):(a=e,b=fo(this))}}break;default:case Nn:c=this.ab;i=0;for(j=a+1;(d=this.countCrossings())<j;){j=d;for(g=h;g;){g=q;for(d=c;d>=i;d--)g=No(this,d,-1,-1)||g}e=this.countCrossings();e>=a?ho(this,b):(a=e,b=fo(this));for(g=h;g;){g=q;for(d=c;d>=i;d--)g=No(this,d,1,1)||g}e=
this.countCrossings();e>=a?ho(this,b):(a=e,b=fo(this));for(g=h;g;){g=q;for(d=i;d<=c;d++)g=No(this,d,1,1)||g}e>=a?ho(this,b):(a=e,b=fo(this));for(g=h;g;){g=q;for(d=i;d<=c;d++)g=No(this,d,-1,-1)||g}e>=a?ho(this,b):(a=e,b=fo(this));for(g=h;g;){g=q;for(d=c;d>=i;d--)g=No(this,d,0,0)||g}e>=a?ho(this,b):(a=e,b=fo(this));for(g=h;g;){g=q;for(d=i;d<=c;d++)g=No(this,d,0,0)||g}e>=a?ho(this,b):(a=e,b=fo(this))}}ho(this,b)};
function Mo(a,b,c){u&&(w.o(b,X,"medianBarycenterCrossingReduction:unfixedLayer"),w.o(c,X,"medianBarycenterCrossingReduction:direction"));for(var d=Xn(a,b),e=a.nd[b],g=zo(a,b,c),i=so(a,b,c),c=0;c<e;c++)-1===i[c]&&(i[c]=d[c].Y),-1===g[c]&&(g[c]=d[c].Y);for(var j=h,k;j;){j=q;for(c=0;c<e-1;c++)if(g[c+1]<g[c]||g[c+1]===g[c]&&i[c+1]<i[c])j=h,k=g[c],g[c]=g[c+1],g[c+1]=k,k=i[c],i[c]=i[c+1],i[c+1]=k,k=d[c],d[c]=d[c+1],d[c+1]=k}for(c=g=0;c<e;c++)k=d[c],k.ea=c,g+=Yn(a,k,h),k.Y=g,g+=1,g+=Yn(a,k,q);Zn(a,b,d)}
function No(a,b,c,d){u&&(w.o(b,X,"adjacentExchangeCrossingReductionBendStraighten:unfixedLayer"),w.o(c,X,"adjacentExchangeCrossingReductionBendStraighten:directionCR"),w.k(q,"boolean",X,"adjacentExchangeCrossingReductionBendStraighten:straighten"),w.o(d,X,"adjacentExchangeCrossingReductionBendStraighten:directionBS"));var d=Xn(a,b),e=a.nd[b],c=io(a,b,c),g,i;i=[];for(g=0;g<e;g++)i[g]=-1;var j;j=[];for(g=0;g<e;g++)j[g]=-1;for(var k=q,l=h;l;){l=q;for(g=0;g<e-1;g++){var m=c[d[g].ea*e+d[g+1].ea],p=c[d[g+
1].ea*e+d[g].ea],r=0,s=0,v=d[g].Y,y=d[g+1].Y,C=Yn(a,d[g],h),E=Yn(a,d[g],q),I=Yn(a,d[g+1],h),D=Yn(a,d[g+1],q),C=v-C+I,E=y-E+D,M=d[g].Gb.l;for(M.reset();M.next();)if(D=M.value,D.Ca&&D.U.G===b){D=D.U;for(I=0;d[I]!==D;)I++;I<g&&(r+=2*(g-I),s+=2*(g+1-I));I===g+1&&(r+=1);I>g+1&&(r+=4*(I-g),s+=4*(I-(g+1)))}M=d[g].Fb.l;for(M.reset();M.next();)if(D=M.value,D.Ca&&D.Q.G===b){D=D.Q;for(I=0;d[I]!==D;)I++;I===g+1&&(s+=1)}M=d[g+1].Gb.l;for(M.reset();M.next();)if(D=M.value,D.Ca&&D.U.G===b){D=D.U;for(I=0;d[I]!==D;)I++;
I<g&&(r+=2*(g+1-I),s+=2*(g-I));I===g&&(s+=1);I>g+1&&(r+=4*(I-(g+1)),s+=4*(I-g))}M=d[g+1].Fb.l;for(M.reset();M.next();)if(D=M.value,D.Ca&&D.Q.G===b){D=D.Q;for(I=0;d[I]!==D;)I++;I===g&&(r+=1)}var I=D=0,M=i[d[g].ea],N=j[d[g].ea],Z=i[d[g+1].ea],wa=j[d[g+1].ea];-1!==M&&(D+=Math.abs(M-v),I+=Math.abs(M-E));-1!==N&&(D+=Math.abs(N-v),I+=Math.abs(N-E));-1!==Z&&(D+=Math.abs(Z-y),I+=Math.abs(Z-C));-1!==wa&&(D+=Math.abs(wa-y),I+=Math.abs(wa-C));if(s<r-0.5||s===r&&p<m-0.5||s===r&&p===m&&I<D-0.5)l=k=h,d[g].Y=E,
d[g+1].Y=C,m=d[g],d[g]=d[g+1],d[g+1]=m}}for(g=0;g<e;g++)d[g].ea=g;Zn(a,b,d);return k}
X.prototype.straightenAndPack=X.prototype.gM=function(){var a,b,c=0!==(this.gi&Qo);a=this.gi===On;1E3<this.B.lc.count&&!a&&(c=q);if(c){b=[];for(a=0;a<=this.ab;a++)b[a]=0;for(var d=this.B.ja.l,e,g;d.next();)e=d.value,a=e.G,g=e.Y,e=Yn(this,e,q),b[a]=Math.max(b[a],g+e);for(d.reset();d.next();)e=d.value,a=e.G,g=e.Y,e.Y=(8*(this.pb-b[a])>>1)+8*g;this.pb*=8}if(0!==(this.gi&Ro))for(b=h;b;){b=q;for(a=this.cf+1;a<=this.ab;a++)b=So(this,a,1)||b;for(a=this.cf-1;0<=a;a--)b=So(this,a,-1)||b;b=So(this,this.cf,
0)||b}if(0!==(this.gi&To)){for(a=this.cf+1;a<=this.ab;a++)Uo(this,a,1);for(a=this.cf-1;0<=a;a--)Uo(this,a,-1);Uo(this,this.cf,0)}c&&(Vo(this,-1),Vo(this,1));if(0!==(this.gi&Ro))for(b=h;b;){b=q;b=So(this,this.cf,0)||b;for(a=this.cf+1;a<=this.ab;a++)b=So(this,a,0)||b;for(a=this.cf-1;0<=a;a--)b=So(this,a,0)||b}};function So(a,b,c){u&&(w.o(b,X,"bendStraighten:unfixedLayer"),w.o(c,X,"bendStraighten:direction"));for(var d=q;Wo(a,b,c);)d=h;return d}
function Wo(a,b,c){u&&(w.o(b,X,"shiftbendStraighten:unfixedLayer"),w.o(c,X,"shiftbendStraighten:direction"));var d,e=Xn(a,b),g=a.nd[b],i=so(a,b,-1);if(0<c)for(d=0;d<g;d++)i[d]=-1;var j=so(a,b,1);if(0>c)for(d=0;d<g;d++)j[d]=-1;for(var k=q,l=h;l;){l=q;for(d=0;d<g;d++){var m=e[d].Y,p=Yn(a,e[d],h),r=Yn(a,e[d],q),p=0>d-1||m-e[d-1].Y-1>p+Yn(a,e[d-1],q)?m-1:m,r=d+1>=g||e[d+1].Y-m-1>r+Yn(a,e[d+1],h)?m+1:m,s=0,v=0,y=0,C,E,I,D;if(0>=c)for(var M=e[d].Gb.l;M.next();)C=M.value,C.Ca&&C.U.G!==b&&(E=bo(C),I=C.hf,
D=C.De,C=C.U.Y,s+=(Math.abs(m+D-(C+I))+1)*E,v+=(Math.abs(p+D-(C+I))+1)*E,y+=(Math.abs(r+D-(C+I))+1)*E);if(0<=c)for(M=e[d].Fb.l;M.next();)C=M.value,C.Ca&&C.Q.G!==b&&(E=bo(C),I=C.hf,D=C.De,C=C.Q.Y,s+=(Math.abs(m+I-(C+D))+1)*E,v+=(Math.abs(p+I-(C+D))+1)*E,y+=(Math.abs(r+I-(C+D))+1)*E);D=I=E=0;C=i[e[d].ea];M=j[e[d].ea];-1!==C&&(E+=Math.abs(C-m),I+=Math.abs(C-p),D+=Math.abs(C-r));-1!==M&&(E+=Math.abs(M-m),I+=Math.abs(M-p),D+=Math.abs(M-r));if(v<s||v===s&&I<E)l=k=h,e[d].Y=p;if(y<s||y===s&&D<E)l=k=h,e[d].Y=
r}}Zn(a,b,e);a.normalize();return k}
function Uo(a,b,c){u&&(w.o(b,X,"medianStraighten:unfixedLayer"),w.o(c,X,"medianStraighten:direction"));for(var d=Xn(a,b),e=a.nd[b],g=zo(a,b,c),i=[],c=0;c<e;c++)i[c]=g[c];for(g=h;g;){g=q;for(c=0;c<e;c++){var j=d[c].Y,k=Yn(a,d[c],h),l=Yn(a,d[c],q),m=0,p;-1===i[c]?0===c&&c===e-1?m=j:0===c?(p=d[c+1].Y,m=p-j===l+Yn(a,d[c+1],h)?j-1:j):c===e-1?(p=d[c-1].Y,m=j-p===k+Yn(a,d[c-1],q)?j+1:j):(p=d[c-1].Y,k=p+Yn(a,d[c-1],q)+k+1,p=d[c+1].Y,l=p-Yn(a,d[c+1],h)-l-1,m=(k+l)/2|0):0===c&&c===e-1?m=i[c]:0===c?(p=d[c+1].Y,
l=p-Yn(a,d[c+1],h)-l-1,m=Math.min(i[c],l)):c===e-1?(p=d[c-1].Y,k=p+Yn(a,d[c-1],q)+k+1,m=Math.max(i[c],k)):(p=d[c-1].Y,k=p+Yn(a,d[c-1],q)+k+1,p=d[c+1].Y,l=p-Yn(a,d[c+1],h)-l-1,k<i[c]&&i[c]<l?m=i[c]:k>=i[c]?m=k:l<=i[c]&&(m=l));m!==j&&(g=h,d[c].Y=m)}}Zn(a,b,d);a.normalize()}
function Xo(a,b){u&&(w.o(b,X,"packAux:column"),w.o(1,X,"packAux:direction"));for(var c=h,d=a.B.ja.l,e;d.next();){e=d.value;var g=Yn(a,e,h),i=Yn(a,e,q);if(e.Y-g<=b&&e.Y+i>=b){c=q;break}}g=q;if(c)for(d.reset();d.next();)e=d.value,e.Y>b&&(e.Y-=1,g=h);return g}
function Yo(a,b){u&&(w.o(b,X,"tightPackAux:column"),w.o(1,X,"tightPackAux:direction"));var c=b,c=b+1,d,e=[],g=[];for(d=0;d<=a.ab;d++)e[d]=q,g[d]=q;for(var i=a.B.ja.l;i.next();){d=i.value;var j=d.Y-Yn(a,d,h),k=d.Y+Yn(a,d,q);j<=b&&k>=b&&(e[d.G]=h);j<=c&&k>=c&&(g[d.G]=h)}j=h;c=q;for(d=0;d<=a.ab;d++)j=j&&!(e[d]&&g[d]);if(j)for(i.reset();i.next();)d=i.value,d.Y>b&&(d.Y-=1,c=h);return c}
function Vo(a,b){u&&w.o(b,X,"componentPack:direction");for(var c=0;c<=a.pb;c++)for(;Xo(a,c););a.normalize();for(c=0;c<a.pb;c++)for(;Yo(a,c););a.normalize();var d,e,g,i;if(0<b)for(c=0;c<=a.pb;c++){d=fo(a);e=jo(a);for(g=e+1;e<g;)g=e,Zo(a,c,1),i=jo(a),i>e?ho(a,d):i<e&&(e=i,d=fo(a))}if(0>b)for(c=a.pb;0<=c;c--){d=fo(a);e=jo(a);for(g=e+1;e<g;)g=e,Zo(a,c,-1),i=jo(a),i>e?ho(a,d):i<e&&(e=i,d=fo(a))}a.normalize()}
function Zo(a,b,c){u&&(w.o(b,X,"componentPackAux:column"),w.o(c,X,"componentPackAux:direction"));a.Jf=0;for(var d=a.B.ja.l,e;d.next();)d.value.Jb=-1;if(0<c)for(d.reset();d.next();)e=d.value,e.Y-Yn(a,e,h)<=b&&(e.Jb=a.Jf);if(0>c)for(d.reset();d.next();)e=d.value,e.Y+Yn(a,e,q)>=b&&(e.Jb=a.Jf);a.Jf++;for(d.reset();d.next();)e=d.value,-1===e.Jb&&(Bo(a,e,a.Jf,-1,h,h),a.Jf++);b=[];for(e=0;e<a.Jf*a.Jf;e++)b[e]=q;var g=[];for(e=0;e<(a.ab+1)*(a.pb+1);e++)g[e]=-1;for(d.reset();d.next();){e=d.value;for(var i=
e.G,j=Math.max(0,e.Y-Yn(a,e,h)),k=Math.min(a.pb,e.Y+Yn(a,e,q));j<=k;j++)g[i*(a.pb+1)+j]=e.Jb}for(e=0;e<=a.ab;e++){if(0<c)for(j=0;j<a.pb;j++)-1!==g[e*(a.pb+1)+j]&&(-1!==g[e*(a.pb+1)+j+1]&&g[e*(a.pb+1)+j]!==g[e*(a.pb+1)+j+1])&&(b[g[e*(a.pb+1)+j]*a.Jf+g[e*(a.pb+1)+j+1]]=h);if(0>c)for(j=a.pb;0<j;j--)-1!==g[e*(a.pb+1)+j]&&(-1!==g[e*(a.pb+1)+j-1]&&g[e*(a.pb+1)+j]!==g[e*(a.pb+1)+j-1])&&(b[g[e*(a.pb+1)+j]*a.Jf+g[e*(a.pb+1)+j-1]]=h)}g=[];for(e=0;e<a.Jf;e++)g[e]=h;i=new z("number");for(i.add(0);0!==i.count;)if(k=
i.n[i.count-1],i.Se(i.count-1),g[k]){g[k]=q;for(e=0;e<a.Jf;e++)b[k*a.Jf+e]&&i.xc(0,e)}if(0<c)for(d.reset();d.next();)e=d.value,g[e.Jb]&&(e.Y-=1);if(0>c)for(d.reset();d.next();)e=d.value,g[e.Jb]&&(e.Y+=1)}X.prototype.commitLayout=X.prototype.bv=function(){if(this.im){var a,b;270===this.da?(a=Sb,b=Yb):90===this.da?(a=Yb,b=Sb):180===this.da?(a=Tb,b=Ub):(a=Ub,b=Tb);for(var c=this.B.lc.l,d;c.next();)d=c.value.Ra,d!==n&&(d.kb=a,d.ob=b)}this.commitNodes();this.cs&&this.commitLinks()};
X.prototype.commitNodes=X.prototype.Ny=function(){this.eh=[];this.yg=[];this.af=[];this.od=[];for(var a=0;a<=this.ab;a++)this.eh[a]=0,this.yg[a]=0,this.af[a]=0,this.od[a]=0;for(var a=this.B.ja.l,b,c;a.next();)b=a.value,c=b.G,this.eh[c]=Math.max(this.eh[c],co(this,b,h)),this.yg[c]=Math.max(this.yg[c],co(this,b,q));b=0;for(var d=this.Dd,e=0;e<=this.ab;e++)c=d,0>=this.eh[e]+this.yg[e]&&(c=0),0<e&&(b+=c/2),90===this.da||0===this.da?(b+=this.yg[e],this.af[e]=b,b+=this.eh[e]):(b+=this.eh[e],this.af[e]=
b,b+=this.yg[e]),e<this.ab&&(b+=c/2),this.od[e]=b;d=this.dd.copy();for(e=0;e<=this.ab;e++)270===this.da?(this.af[e]=d.y+this.af[e],this.od[e]=d.y+this.od[e]):90===this.da?(this.af[e]=d.y+b-this.af[e],this.od[e]=d.y+b-this.od[e]):180===this.da?(this.af[e]=d.x+this.af[e],this.od[e]=d.x+this.od[e]):(this.af[e]=d.x+b-this.af[e],this.od[e]=d.x+b-this.od[e]);for(a.reset();a.next();){b=a.value;c=b.G;var g=b.Y|0;270===this.da||90===this.da?(e=d.x+this.ld*g,c=this.af[c]):(e=this.af[c],c=d.y+this.ld*g);b.pa=
e;b.ta=c;b.commit()}};
X.prototype.commitLinks=X.prototype.My=function(){for(var a=this.B.lc.l,b,c;a.next();)c=a.value.Ra,"undefined"!==typeof c&&c!==n&&(c.Zk(),c.Jn(),c.si());for(a.reset();a.next();)c=a.value.Ra,"undefined"!==typeof c&&c!==n&&km(c);for(a.reset();a.next();)if(b=a.value,c=b.Ra){c.Zk();var d=c,e=d.ia,g=d.na,i=d.gd,j=d.ce;if(b.Ca){if(c.vf===gk&&4===c.ka){b.wb&&(d=e,e=g,g=d,d=i,i=j,j=d);var k,l,m,p;if(b.U.Y===b.Q.Y)k=c.getLinkPoint(e,i,qm(c),h,q,g,j).copy(),l=c.getLinkPoint(g,j,rm(c),q,q,e,i).copy(),m=new F((2*
k.x+l.x)/3,(2*k.y+l.y)/3),p=new F((k.x+2*l.x)/3,(k.y+2*l.y)/3),c.Jn(),c.td(k),c.td(m),c.td(p),c.td(l);else{d=b=q;i!==n&&qm(c)===Eb&&(b=h);j!==n&&rm(c)===Eb&&(d=h);if(b||d)k=c.p(0).copy(),m=c.p(1).copy(),p=c.p(2).copy(),l=c.p(3).copy();b&&(90===this.da||270===this.da?(m.x=k.x,m.y=(k.y+l.y)/2):(m.x=(k.x+l.x)/2,m.y=k.y),c.J(1,m),c.J(0,c.getLinkPoint(e,i,qm(c),h,q,g,j).copy()));d&&(90===this.da||270===this.da?(p.x=l.x,p.y=(k.y+l.y)/2):(p.x=(k.x+l.x)/2,p.y=l.y),c.J(2,p),c.J(3,c.getLinkPoint(g,j,rm(c),
q,q,e,i).copy()))}}c.si()}else if(b.U.G===b.Q.G)c.si();else{var r=q,s=q,v,y=c.sv+1;if(Yg(c))s=h,v=c.ka,4<v&&c.points.removeRange(2,v-3);else if(c.vf===gk)r=h,v=c.ka,4<v&&c.points.removeRange(2,v-3),y=2;else{v=c.ka;var C=qm(c)===Eb,E=rm(c)===Eb;2<v&&C&&E?c.points.removeRange(1,v-2):3<v&&C&&!E?c.points.removeRange(1,v-3):3<v&&!C&&E?c.points.removeRange(2,v-2):4<v&&(!C&&!E)&&c.points.removeRange(2,v-3)}v=b.U;var E=b.Q,I;if(b.wb){for(;E!==n&&v!==E;){I=C=n;for(var D=E.Gb.l;D.next()&&!(M=D.value,M.Ra===
b.Ra&&(C=M.U,I=M.Q,C.fb===n)););C!==v&&(M=c.p(y-1).copy(),D=new F(C.pa,C.ta),s?180===this.da||0===this.da?2===y?(c.A(y++,new F(M.x,M.y)),c.A(y++,new F(M.x,D.y))):(I=I!==n?new F(I.pa,I.ta):M.copy(),I.y!==D.y&&(I=this.od[C.G-1],c.A(y++,new F(I,M.y)),c.A(y++,new F(I,D.y)))):2===y?(c.A(y++,new F(M.x,M.y)),c.A(y++,new F(D.x,M.y))):(I=I!==n?new F(I.pa,I.ta):M.copy(),I.x!==D.x&&(I=this.od[C.G-1],c.A(y++,new F(M.x,I)),c.A(y++,new F(D.x,I)))):2===y?r?(I=Math.max(10,this.eh[E.G]),N=Math.max(10,this.yg[E.G]),
180===this.da?(E=E.L.x,c.A(y++,new F(E-I,D.y)),c.A(y++,new F(E,D.y)),c.A(y++,new F(E+N,D.y))):90===this.da?(E=E.L.y+E.L.height,c.A(y++,new F(D.x,E+N)),c.A(y++,new F(D.x,E)),c.A(y++,new F(D.x,E-I))):270===this.da?(E=E.L.y,c.A(y++,new F(D.x,E-I)),c.A(y++,new F(D.x,E)),c.A(y++,new F(D.x,E+N))):(E=E.L.x+E.L.width,c.A(y++,new F(E+N,D.y)),c.A(y++,new F(E,D.y)),c.A(y++,new F(E-I,D.y)))):(c.A(y++,M),180===this.da||0===this.da?c.A(y++,new F(M.x,D.y)):c.A(y++,new F(D.x,M.y)),c.A(y++,new F(D.x,D.y))):(I=Math.max(10,
this.eh[C.G]),N=Math.max(10,this.yg[C.G]),180===this.da?(r&&c.A(y++,new F(D.x-I,D.y)),c.A(y++,D),r&&c.A(y++,new F(D.x+N,D.y))):90===this.da?(r&&c.A(y++,new F(D.x,D.y+N)),c.A(y++,D),r&&c.A(y++,new F(D.x,D.y-I))):270===this.da?(r&&c.A(y++,new F(D.x,D.y-I)),c.A(y++,D),r&&c.A(y++,new F(D.x,D.y+N))):(r&&c.A(y++,new F(D.x+N,D.y)),c.A(y++,D),r&&c.A(y++,new F(D.x-I,D.y)))));E=C}if(j===n||!rm(c).I(Eb))M=c.p(y-1).copy(),D=c.p(y).copy(),s?(C=this.yg[v.G],180===this.da||0===this.da?(s=M.y,s>=v.L.y&&s<=v.L.bottom&&
(E=v.pa+C,s=s<v.L.y+v.L.height/2?v.L.y-this.ld/2:v.L.bottom+this.ld/2,c.A(y++,new F(E,M.y)),c.A(y++,new F(E,s))),c.A(y++,new F(D.x,s))):(s=M.x,s>=v.L.x&&s<=v.L.right&&(E=v.ta+C,s=s<v.L.x+v.L.width/2?v.L.x-this.ld/2:v.L.right+this.ld/2,c.A(y++,new F(M.x,E)),c.A(y++,new F(s,E))),c.A(y++,new F(s,D.y))),c.A(y++,D)):r?(I=Math.max(10,this.eh[v.G]),N=Math.max(10,this.yg[v.G]),180===this.da?(E=v.L.x+v.L.width,c.J(y-2,new F(E,M.y)),c.J(y-1,new F(E+N,M.y))):90===this.da?(E=v.L.y,c.J(y-2,new F(M.x,E)),c.J(y-
1,new F(M.x,E-I))):270===this.da?(E=v.L.y+v.L.height,c.J(y-2,new F(M.x,E)),c.J(y-1,new F(M.x,E+N))):(E=v.L.x,c.J(y-2,new F(E,M.y)),c.J(y-1,new F(E-I,M.y)))):(180===this.da||0===this.da?c.A(y++,new F(D.x,M.y)):c.A(y++,new F(M.x,D.y)),c.A(y++,D))}else{for(;v!==n&&v!==E;){I=C=n;v=v.Fb.l;for(var M;v.next()&&!(M=v.value,M.Ra===b.Ra&&(C=M.Q,I=M.U,I.fb!==n&&(I=n),C.fb===n)););var N;C!==E&&(M=c.p(y-1).copy(),D=new F(C.pa,C.ta),s?180===this.da||0===this.da?(I=I!==n?new F(I.pa,I.ta):M.copy(),I.y!==D.y&&(I=
this.od[C.G],2===y&&(I=0===this.da?Math.max(I,M.x):Math.min(I,M.x)),c.A(y++,new F(I,M.y)),c.A(y++,new F(I,D.y)))):(I=I!==n?new F(I.pa,I.ta):M.copy(),I.x!==D.x&&(I=this.od[C.G],2===y&&(I=90===this.da?Math.max(I,M.y):Math.min(I,M.y)),c.A(y++,new F(M.x,I)),c.A(y++,new F(D.x,I)))):(I=Math.max(10,this.eh[C.G]),N=Math.max(10,this.yg[C.G]),180===this.da?(c.A(y++,new F(D.x+N,D.y)),r&&c.A(y++,D),c.A(y++,new F(D.x-I,D.y))):90===this.da?(c.A(y++,new F(D.x,D.y-I)),r&&c.A(y++,D),c.A(y++,new F(D.x,D.y+N))):270===
this.da?(c.A(y++,new F(D.x,D.y+N)),r&&c.A(y++,D),c.A(y++,new F(D.x,D.y-I))):(c.A(y++,new F(D.x-I,D.y)),r&&c.A(y++,D),c.A(y++,new F(D.x+N,D.y)))));v=C}s&&(M=c.p(y-1).copy(),D=c.p(y).copy(),180===this.da||0===this.da?M.y!==D.y&&(I=0===this.da?Math.min(Math.max((D.x+M.x)/2,this.od[E.G]),D.x):Math.max(Math.min((D.x+M.x)/2,this.od[E.G]),D.x),c.A(y++,new F(I,M.y)),c.A(y++,new F(I,D.y))):M.x!==D.x&&(I=90===this.da?Math.min(Math.max((D.y+M.y)/2,this.od[E.G]),D.y):Math.max(Math.min((D.y+M.y)/2,this.od[E.G]),
D.y),c.A(y++,new F(M.x,I)),c.A(y++,new F(D.x,I))))}d!==n&&r&&(i!==n&&(yb(qm(c))&&(d=c.p(0).copy(),r=c.p(2).copy(),d.I(r)||c.J(1,new F((d.x+r.x)/2,(d.y+r.y)/2))),c.J(0,c.getLinkPoint(e,i,Eb,h,q,g,j))),j!==n&&(yb(rm(c))&&(d=c.p(c.ka-1),r=c.p(c.ka-3),d.I(r)||c.J(c.ka-2,new F((d.x+r.x)/2,(d.y+r.y)/2))),c.J(c.ka-1,c.getLinkPoint(g,j,Eb,q,q,e,i))));c.si();b.commit()}}e=new z(U);for(a=this.B.lc.l;a.next();)c=a.value.Ra,c!==n&&(Yg(c)&&!e.contains(c))&&e.add(c);if(0<e.count)if(90===this.da||270===this.da){u&&
w.i(e,z,X,"adjustOverlapsH:routables");a=0;c=new z($o);for(k=e.l;k.next();)if(g=k.value,g!==n&&Yg(g))for(e=2;e<g.ka-3;e++)i=g.p(e).copy(),j=g.p(e+1).copy(),ap(i.y,j.y)&&!ap(i.x,j.x)&&(l=new $o,l.G=Math.floor(i.y/2),m=g.p(0).copy(),p=g.p(g.ka-1).copy(),l.zb=m.x*m.x+m.y,l.yd=p.x*p.x+p.y,l.Ud=Math.min(i.x,j.x),l.vd=Math.max(i.x,j.x),l.ea=e,l.Ra=g,e+2<g.ka&&(m=g.p(e-1).copy(),p=g.p(e+2).copy(),b=0,m.y<i.y?b=p.y<i.y?3:i.x<j.x?2:1:m.y>i.y&&(b=p.y>i.y?0:j.x<i.x?2:1),l.Ih=b),c.add(l));if(1<c.count){c.sort(this.jE);
for(k=0;k<c.count;){e=c.n[k].G;for(l=k+1;l<c.count&&c.n[l].G===e;)l++;if(1<l-k)for(g=k;g<l;){e=c.n[g].vd;for(m=k+1;m<l&&c.n[m].Ud<e;)e=Math.max(e,c.n[m].vd),m++;i=m-g;if(1<i){c.Ao(this.Sv,g,g+i);j=1;p=c.n[g].yd;for(e=g;e<m;e++)b=c.n[e],b.yd!==p&&(j++,p=b.yd);c.Ao(this.iE,g,g+i);r=1;p=c.n[g].zb;for(e=g;e<m;e++)b=c.n[e],b.zb!==p&&(r++,p=b.zb);j<r?(d=q,r=j,p=c.n[g].yd,c.Ao(this.Sv,g,g+i)):(d=h,p=c.n[g].zb);y=0;for(e=g;e<m;e++){b=c.n[e];if((d?b.zb:b.yd)!==p)y++,p=d?b.zb:b.yd;g=b.Ra;i=g.p(b.ea).copy();
j=g.p(b.ea+1).copy();s=4*(y-(r-1)/2);if(g.Ch!==Rf||bp(i.x,i.y+s,j.x,j.y+s))a++,g.Zk(),g.J(b.ea,new F(i.x,i.y+s)),g.J(b.ea+1,new F(j.x,j.y+s)),g.si()}}g=m}k=l}}}else{u&&w.i(e,z,X,"adjustOverlapsV:routables");a=0;c=new z($o);for(k=e.l;k.next();)if(g=k.value,g!==n&&Yg(g))for(e=2;e<g.ka-3;e++)i=g.p(e).copy(),j=g.p(e+1).copy(),ap(i.x,j.x)&&!ap(i.y,j.y)&&(l=new $o,l.G=Math.floor(i.x/2),m=g.p(0).copy(),p=g.p(g.ka-1).copy(),l.zb=m.x+m.y*m.y,l.yd=p.x+p.y*p.y,l.Ud=Math.min(i.y,j.y),l.vd=Math.max(i.y,j.y),l.ea=
e,l.Ra=g,e+2<g.ka&&(m=g.p(e-1).copy(),p=g.p(e+2).copy(),b=0,m.x<i.x?b=p.x<i.x?3:i.y<j.y?2:1:m.x>i.x&&(b=p.x>i.x?0:j.y<i.y?2:1),l.Ih=b),c.add(l));if(1<c.count){c.sort(this.jE);for(k=0;k<c.count;){e=c.n[k].G;for(l=k+1;l<c.count&&c.n[l].G===e;)l++;if(1<l-k)for(g=k;g<l;){e=c.n[g].vd;for(m=k+1;m<l&&c.n[m].Ud<e;)e=Math.max(e,c.n[m].vd),m++;i=m-g;if(1<i){c.Ao(this.Sv,g,g+i);j=1;p=c.n[g].yd;for(e=g;e<m;e++)b=c.n[e],b.yd!==p&&(j++,p=b.yd);c.Ao(this.iE,g,g+i);r=1;p=c.n[g].zb;for(e=g;e<m;e++)b=c.n[e],b.zb!==
p&&(r++,p=b.zb);j<r?(d=q,r=j,p=c.n[g].yd,c.Ao(this.Sv,g,g+i)):(d=h,p=c.n[g].zb);y=0;for(e=g;e<m;e++){b=c.n[e];if((d?b.zb:b.yd)!==p)y++,p=d?b.zb:b.yd;g=b.Ra;i=g.p(b.ea).copy();j=g.p(b.ea+1).copy();s=4*(y-(r-1)/2);if(g.Ch!==Rf||bp(i.x+s,i.y,j.x+s,j.y))a++,g.Zk(),g.J(b.ea,new F(i.x+s,i.y)),g.J(b.ea+1,new F(j.x+s,j.y)),g.si()}}g=m}k=l}}}};function $o(){this.ea=this.vd=this.Ud=this.yd=this.zb=this.G=0;this.Ra=n;this.Ih=0}w.Jd($o,{Ja:h,zb:h,yd:h,Ud:h,vd:h,index:h,link:h,Ih:h});
X.prototype.jE=function(a,b){return!(a instanceof $o)||!(b instanceof $o)||a===b?0:a.G<b.G?-1:a.G>b.G?1:a.Ud<b.Ud?-1:a.Ud>b.Ud?1:a.vd<b.vd?-1:a.vd>b.vd?1:0};X.prototype.iE=function(a,b){return!(a instanceof $o)||!(b instanceof $o)||a===b?0:a.zb<b.zb?-1:a.zb>b.zb||a.Ih<b.Ih?1:a.Ih>b.Ih||a.Ud<b.Ud?-1:a.Ud>b.Ud?1:a.vd<b.vd?-1:a.vd>b.vd?1:0};
X.prototype.Sv=function(a,b){return!(a instanceof $o)||!(b instanceof $o)||a===b?0:a.yd<b.yd?-1:a.yd>b.yd||a.Ih<b.Ih?1:a.Ih>b.Ih||a.Ud<b.Ud?-1:a.Ud>b.Ud?1:a.vd<b.vd?-1:a.vd>b.vd?1:0};function ap(a,b){u&&(w.o(a,X,"isApprox:a"),w.o(b,X,"isApprox:b"));var c=a-b;return-1<c&&1>c}function bp(a,b,c,d){u&&(w.o(a,X,"isUnoccupied2:px"),w.o(b,X,"isUnoccupied2:py"),w.o(c,X,"isUnoccupied2:qx"),w.o(d,X,"isUnoccupied2:qy"));return h}
function Xn(a,b){var c,d=a.nd[b];if(d>=a.Ag.length){c=[];var e;for(e=0;e<a.Ag.length;e++)c[e]=a.Ag[e];a.Ag=c}"undefined"===typeof a.Ag[d]||a.Ag[d]===n?c=[]:(c=a.Ag[d],a.Ag[d]=n);var d=a.qq[b],g;for(e=0;e<d.length;e++)g=d[e],g instanceof eo&&(c[g.ea]=g);return c}function Zn(a,b,c){a.Ag[a.nd[b]]=c}w.g(X,"layerSpacing",X.prototype.es);w.defineProperty(X,{es:"layerSpacing"},t("Dd"),function(a){this.Dd!==a&&("number"===typeof a&&0<=a)&&(this.Dd=a,this.F())});w.g(X,"columnSpacing",X.prototype.ZF);
w.defineProperty(X,{ZF:"columnSpacing"},t("ld"),function(a){this.ld!==a&&("number"===typeof a&&0<=a)&&(this.ld=a,this.F())});w.g(X,"direction",X.prototype.direction);w.defineProperty(X,{direction:"direction"},t("da"),function(a){this.da!==a&&"number"===typeof a&&(this.da=a,this.F())});w.g(X,"cycleRemoveOption",X.prototype.qC);w.defineProperty(X,{qC:"cycleRemoveOption"},t("ym"),function(a){if(this.ym!==a&&(u&&w.i(a,ja,Pn,"cycleRemoveOption"),a===Qn||a===Kn))this.ym=a,this.F()});
w.g(X,"layeringOption",X.prototype.pD);w.defineProperty(X,{pD:"layeringOption"},t("Tm"),function(a){if(this.Tm!==a&&(u&&w.i(a,ja,Pn,"layeringOption"),a===Ln||a===Co||a===Eo))this.Tm=a,this.F()});w.g(X,"initializeOption",X.prototype.fD);w.defineProperty(X,{fD:"initializeOption"},t("Nm"),function(a){if(this.Nm!==a&&(u&&w.i(a,ja,Pn,"initializeOption"),a===Mn||a===Ko||a===Io))this.Nm=a,this.F()});w.g(X,"iterations",X.prototype.UG);
w.defineProperty(X,{UG:"iterations"},t("tl"),function(a){u&&w.o(a,Pn,"iterations");this.tl!==a&&("number"===typeof a&&0<=a)&&(this.tl=a,this.F())});w.g(X,"aggressiveOption",X.prototype.UB);w.defineProperty(X,{UB:"aggressiveOption"},t("qm"),function(a){if(this.qm!==a&&(u&&w.i(a,ja,Pn,"cycleRemoveOption"),a===Oo||a===Nn||a===Po))this.qm=a,this.F()});w.g(X,"packOption",X.prototype.tH);w.defineProperty(X,{tH:"packOption"},t("gi"),function(a){this.gi!==a&&("number"===typeof a&&0<=a&&8>a)&&(this.gi=a,this.F())});
w.g(X,"setsPortSpots",X.prototype.im);w.defineProperty(X,{im:"setsPortSpots"},t("lh"),function(a){this.lh!==a&&"boolean"===typeof a&&(this.lh=a,this.F())});w.u(X,{pL:"maxLayer"},t("ab"));w.u(X,{nL:"maxIndex"},t("Ot"));w.u(X,{mL:"maxColumn"},t("pb"));w.u(X,{vL:"minIndexLayer"},t("iq"));w.u(X,{oL:"maxIndexLayer"},t("cf"));var Kn;X.CycleDepthFirst=Kn=w.s(X,"CycleDepthFirst",0);var Qn;X.CycleGreedy=Qn=w.s(X,"CycleGreedy",1);var Ln;X.LayerOptimalLinkLength=Ln=w.s(X,"LayerOptimalLinkLength",0);var Co;
X.LayerLongestPathSink=Co=w.s(X,"LayerLongestPathSink",1);var Eo;X.LayerLongestPathSource=Eo=w.s(X,"LayerLongestPathSource",2);var Mn;X.InitDepthFirstOut=Mn=w.s(X,"InitDepthFirstOut",0);var Ko;X.InitDepthFirstIn=Ko=w.s(X,"InitDepthFirstIn",1);var Io;X.InitNaive=Io=w.s(X,"InitNaive",2);var Oo;X.AggressiveNone=Oo=w.s(X,"AggressiveNone",0);var Nn;X.AggressiveLess=Nn=w.s(X,"AggressiveLess",1);var Po;X.AggressiveMore=Po=w.s(X,"AggressiveMore",2);X.PackNone=0;var Qo;X.PackExpand=Qo=1;var Ro;
X.PackStraighten=Ro=2;var To;X.PackMedian=To=4;var On;X.PackAll=On=7;function Pn(){Xm.call(this)}w.P("LayeredDigraphNetwork",Pn);w.Da(Pn,Xm);Pn.prototype.createVertex=Pn.prototype.vj=function(){return new eo};Pn.prototype.createEdge=Pn.prototype.Mn=function(){return new Vn};function eo(){an.call(this);this.ea=this.Y=this.G=-1;this.Ca=q;this.Jb=this.Fm=this.fk=NaN;this.dj=n;this.dl=0;this.Bx=this.Cx=f}w.P("LayeredDigraphVertex",eo);w.Da(eo,an);w.g(eo,"layer",eo.prototype.Ja);
w.defineProperty(eo,{Ja:"layer"},t("G"),ba("G"));w.g(eo,"column",eo.prototype.Dc);w.defineProperty(eo,{Dc:"column"},t("Y"),ba("Y"));w.g(eo,"index",eo.prototype.index);w.defineProperty(eo,{index:"index"},t("ea"),ba("ea"));w.g(eo,"valid",eo.prototype.valid);w.defineProperty(eo,{valid:"valid"},t("Ca"),ba("Ca"));w.g(eo,"discover",eo.prototype.kG);w.defineProperty(eo,{kG:"discover"},t("fk"),ba("fk"));w.g(eo,"finish",eo.prototype.finish);w.defineProperty(eo,{finish:"finish"},t("Fm"),ba("Fm"));
w.g(eo,"component",eo.prototype.$F);w.defineProperty(eo,{$F:"component"},t("Jb"),ba("Jb"));w.g(eo,"near",eo.prototype.kH);w.defineProperty(eo,{kH:"near"},t("dj"),function(a){a!==n&&w.i(a,eo,eo,"layeredDigraphVertex");this.dj=a});function Vn(){bn.call(this);this.rp=this.wb=this.Ca=q;this.lf=this.jf=NaN;this.De=this.oI=0}w.P("LayeredDigraphEdge",Vn);w.Da(Vn,bn);w.g(Vn,"valid",Vn.prototype.valid);w.defineProperty(Vn,{valid:"valid"},t("Ca"),ba("Ca"));w.g(Vn,"rev",Vn.prototype.rev);
w.defineProperty(Vn,{rev:"rev"},t("wb"),ba("wb"));w.g(Vn,"forest",Vn.prototype.wG);w.defineProperty(Vn,{wG:"forest"},t("rp"),ba("rp"));w.g(Vn,"portFromPos",Vn.prototype.wH);w.defineProperty(Vn,{wH:"portFromPos"},t("jf"),ba("jf"));w.g(Vn,"portToPos",Vn.prototype.yH);w.defineProperty(Vn,{yH:"portToPos"},t("lf"),ba("lf"));w.g(Vn,"portFromColOffset",Vn.prototype.vH);w.defineProperty(Vn,{vH:"portFromColOffset"},t("hf"),ba("hf"));w.g(Vn,"portToColOffset",Vn.prototype.xH);
w.defineProperty(Vn,{xH:"portToColOffset"},t("De"),ba("De"));function W(){ci.call(this);this.ad=new ma(T);this.jh=cp;this.$e=dp;this.cr=ep;this.Pc=fp;this.Ff=new cb(10,10);this.ha=new Y;this.ga=new Y}w.P("TreeLayout",W);w.Da(W,ci);W.prototype.cloneProtected=W.prototype.xb=function(a){ci.prototype.xb.call(this,a);a.jh=this.jh;a.cr=this.cr;a.Pc=this.Pc;a.Ff=this.Ff.copy();gp(a.ha,this.ha);gp(a.ga,this.ga)};W.prototype.createNetwork=W.prototype.fv=function(){var a=new hp;Ym(a,this);return a};
W.prototype.makeNetwork=W.prototype.bH=function(a){var b=this.createNetwork();a instanceof A?(ip(this,b,a.Wk,h),ip(this,b,a.links,h)):a instanceof vf?ip(this,b,a.Fc,q):a.l&&ip(this,b,a.l,q);return b};
function ip(a,b,c,d){for(c=c.l;c.next();){var e=c.value;if(e instanceof T&&e.Cr()&&"Comment"!==e.ud&&(!d||e.ds))e.Ei||(e instanceof vf&&e.Tb===n?ip(a,b,e.Fc,q):b.xn(e))}for(c.reset();c.next();)if(e=c.value,e instanceof U&&e.Cr()&&"Comment"!==e.ud&&(!d||e.ds)){var g=e.ia,a=e.na;if(!(g===n||a===n||g===a)&&"Comment"!==g.ud&&"Comment"!==a.ud)g=b.ov(g),a=b.ov(a),g!==n&&a!==n&&b.bm(g,a,e)}}
W.prototype.doLayout=W.prototype.Hr=function(a){this.Mc===n&&(this.Mc=this.makeNetwork(a));this.ke!==jp&&(this.dd=$m(this,this.dd));var b=this.h;b===n&&a instanceof A&&(b=a);this.$e=this.path===cp&&b!==n?b.hd?dp:kp:this.path===cp?dp:this.path;if(0<this.B.ja.count){this.B.iv();for(b=this.B.ja.l;b.next();)a=b.value,a.nk=q,a.ul=0,a.ib=n,a.Zb=[];for(b=this.ad.l;b.next();){var c=b.value,a=this.B.Ke(c);a===n&&this.ad.remove(c)}if(0===this.ad.count){for(a=this.B.ja.l;a.next();)switch(b=a.value,this.$e){case dp:0===
b.Gb.count&&this.ad.add(b.fb);break;case kp:0===b.Fb.count&&this.ad.add(b.fb);break;default:w.m("Unhandled path value "+this.$e.toString())}if(0===this.ad.count){a=999999;b=n;for(c=this.B.ja.l;c.next();){var d=c.value;switch(this.$e){case dp:d.Gb.count<a&&(a=d.Gb.count,b=d);break;case kp:d.Fb.count<a&&(a=d.Fb.count,b=d);break;default:w.m("Unhandled path value "+this.$e.toString())}}b!==n&&this.ad.add(b.fb)}}for(b=this.ad.l;b.next();)c=b.value,a=this.B.Ke(c),a!==n&&!a.nk&&(a.nk=h,lp(this,a));for(a=
this.ad.l;a.next();)b=this.B.Ke(a.value),mp(this,b);for(a=this.ad.l;a.next();)b=this.B.Ke(a.value),np(this,b);for(a=this.ad.l;a.next();)op(this,this.B.Ke(a.value));for(a=this.B.ja.l;a.next();)this.addComments(a.value);for(a=this.ad.l;a.next();)pp(this,this.B.Ke(a.value));if(this.Pc===jp)for(a=this.ad.l;a.next();)d=a.value,b=this.B.Ke(d),d=d.position,c=d.x,d=d.y,isFinite(c)||(c=0),isFinite(d)||(d=0),qp(this,b,c,d);else for(var a=this.dd,c=a.x,e=a.y,a=this.ad.l;a.next();)if(d=a.value,b=this.B.Ke(d),
b!==n)switch(qp(this,b,c+b.Ba.x,e+b.Ba.y),this.Pc){case fp:e+=b.Pa.height+this.Ff.height;break;case rp:c+=b.Pa.width+this.Ff.width;break;default:w.m("Unhandled arrangement value "+this.Pc.toString())}this.updateParts()}this.Mc=n;this.ad=new ma(T);this.Oe=h};
function lp(a,b){u&&w.i(b,Y,W,"walkTree:v");if(b!==n){switch(a.$e){case dp:if(0<b.Fb.count){for(var c=new z(Y),d=b.jG;d.next();){var e=d.value;sp(a,b,e)&&c.add(e)}0<c.count&&(b.Zb=c.ng())}break;case kp:if(0<b.Gb.count){c=new z(Y);for(d=b.RH;d.next();)e=d.value,sp(a,b,e)&&c.add(e);0<c.count&&(b.Zb=c.ng())}break;default:w.m("Unhandled path value"+a.$e.toString())}for(var c=b.Zb,d=c.length,g=0;g<d;g++)e=c[g],e.nk=h,e.ul=b.ul+1,e.ib=b,a.ad.remove(e.fb);for(g=0;g<d;g++)e=c[g],lp(a,e)}}
function sp(a,b,c){u&&w.i(b,Y,W,"walkOK:v");u&&w.i(c,Y,W,"walkOK:c");if(c.nk){var d;u&&w.i(c,Y,W,"isAncestor:a");u&&w.i(b,Y,W,"isAncestor:b");if(b===n)d=q;else{for(d=b.ib;d!==n&&d!==c;)d=d.ib;d=d===c}if(d||c.ul>b.ul)return q;a.removeChild(c.ib,c)}return h}
W.prototype.removeChild=function(a,b){u&&w.i(a,Y,W,"removeChild:p");u&&w.i(b,Y,W,"removeChild:c");if(a!==n&&b!==n){for(var c=a.Zb,d=0,e=0;e<c.length;e++)c[e]===b&&d++;if(0<d){for(var d=Array(c.length-d),g=0,e=0;e<c.length;e++)c[e]!==b&&(d[g++]=c[e]);a.Zb=d}}};
function mp(a,b){u&&w.i(b,Y,W,"initializeTree:v");if(b!==n){u&&w.i(b,Y,W,"initializeTreeVertexValues:v");var c=tp(a,b);gp(b,c);if(b.ib!==n&&b.ib.Aa===up){for(var c=b.angle,d=b.ib.Zb,e=0;e<d.length&&b!==d[e];)e++;0===e%2?e!==d.length-1&&(c=90===c?180:180===c?270:270===c?180:270):c=90===c?0:180===c?90:270===c?0:90;b.angle=c}b.nk=h;b.Aa===up&&a.tE(b);for(var c=0,d=b.Ml,e=0,g=b.Zb,i=g.length,j=0;j<i;j++){var k=g[j];mp(a,k);c+=k.jt+1;d=Math.max(d,k.Nt);e=Math.max(e,k.Zh)}b.jt=c;b.Nt=d;b.Zh=0<d?e+1:0}}
function tp(a,b){u&&w.i(b,Y,W,"mom:v");switch(a.cr){default:case ep:return b.ib!==n?b.ib:a.ha;case vp:return b.ib===n?a.ha:b.ib.ib===n?a.ga:b.ib;case wp:if(b.ib!==n)return b.ib.ib!==n?b.ib.ib:a.ga;case xp:var c=h;if(0===b.Ml)c=q;else for(var d=b.Zb,e=d.length,g=0;g<e;g++)if(0<d[g].Ml){c=q;break}return c&&b.ib!==n?a.ga:b.ib!==n?b.ib:a.ha}}function np(a,b){u&&w.i(b,Y,W,"assignTree:v");if(b!==n){a.assignTreeVertexValues(b);for(var c=b.Zb,d=c.length,e=0;e<d;e++)np(a,c[e])}}
W.prototype.assignTreeVertexValues=W.prototype.zI=aa();function op(a,b){u&&w.i(b,Y,W,"sortTree:v");if(b!==n){b.Aa!==up&&a.tE(b);for(var c=b.Zb,d=c.length,e=0;e<d;e++)op(a,c[e])}}W.prototype.sortTreeVertexChildren=W.prototype.tE=function(a){u&&w.i(a,Y,W,"sortTreeVertexChildren:v");switch(a.tc){case yp:break;case zp:a.Zb.reverse();break;case Ap:a.Zb.sort(a.qc);break;case Bp:a.Zb.sort(a.qc);a.Zb.reverse();break;default:w.m("Unhandled sorting value "+a.tc.toString())}};
W.prototype.addComments=W.prototype.vF=function(a){u&&w.i(a,Y,W,"addComments:v");var b=a.nc,c=a.ib,d=0,e=Cp,e=q;c!==n&&(d=c.nc,e=c.Aa,e=Dp(e));var b=90===b||270===b,d=90===d||270===d,c=0===a.Ml,g=new G,i=g.width,g=g.height,j=0,k=a.Ad;if(a.fb!==n)for(var l=a.fb.FC();l.next();){var m=l.value;"Comment"===m.ud&&m.nb()&&(a.Bd===n&&(a.Bd=[]),a.Bd.push(m),m.xi(),m=m.xa,b&&!c||!e&&!d&&c||e&&d&&c?(i=Math.max(i,m.width),g+=m.height+Math.abs(j)):(i+=m.width+Math.abs(j),g=Math.max(g,m.height)),j=k)}a.Bd!==n&&
(b&&!c||!e&&!d&&c||e&&d&&c?(i+=Math.abs(a.pc),g=Math.max(0,g-a.height)):(g+=Math.abs(a.pc),i=Math.max(0,i-a.width)),a.Eb=new G(0,0,a.L.width+i,a.L.height+g))};function Dp(a){return a===Ep||a===up||a===Fp||a===Gp}function Hp(a){return a===Ep||a===up}function Ip(a){u&&w.i(a,Y,W,"isLeftSideBus:v");var b=a.ib;if(b!==n){var c=b.Cb;if(Dp(c)){if(Hp(c)){b=b.children;for(c=0;c<b.length&&a!==b[c];)c++;return 0===c%2}if(c===Fp)return h}}return q}
W.prototype.layoutComments=W.prototype.hL=function(a){u&&w.i(a,Y,W,"layoutComments:v");if(a.Bd!==n){var b=a.Qg.xa,c=a.ib,d=a.nc,e=0,g=Cp,g=q;c!==n&&(e=c.nc,g=c.Aa,g=Dp(g));for(var d=90===d||270===d,i=90===e||270===e,j=0===a.Ml,k=Ip(a),l=0,m=a.Bd,p=m.length,r=0;r<p;r++){var c=m[r],s=c.xa;if(d&&!j||!g&&!i&&j||g&&i&&j){if(135<e&&!g||i&&k)if(0<=a.pc){c.location=new F(a.L.x-a.pc-s.width,a.L.y+l);for(var v=c.yf();v.next();)c=v.value,c.kb=Tb,c.ob=Ub}else{c.location=new F(a.L.x+2*a.K.x-a.pc,a.L.y+l);for(v=
c.yf();v.next();)c=v.value,c.kb=Ub,c.ob=Tb}else if(0<=a.pc){c.location=new F(a.L.x+2*a.K.x+a.pc,a.L.y+l);for(v=c.yf();v.next();)c=v.value,c.kb=Ub,c.ob=Tb}else{c.location=new F(a.L.x+a.pc-s.width,a.L.y+l);for(v=c.yf();v.next();)c=v.value,c.kb=Tb,c.ob=Ub}l=0<=a.Ad?l+(s.height+a.Ad):l+(a.Ad-s.height)}else{if(135<e&&!g||!i&&k)if(0<=a.pc){c.location=new F(a.L.x+l,a.L.y-a.pc-s.height);for(v=c.yf();v.next();)c=v.value,c.kb=Sb,c.ob=Yb}else{c.location=new F(a.L.x+l,a.L.y+2*a.K.y-a.pc);for(v=c.yf();v.next();)c=
v.value,c.kb=Yb,c.ob=Sb}else if(0<=a.pc){c.location=new F(a.L.x+l,a.L.y+2*a.K.y+a.pc);for(v=c.yf();v.next();)c=v.value,c.kb=Yb,c.ob=Sb}else{c.location=new F(a.L.x+l,a.L.y+a.pc-s.height);for(v=c.yf();v.next();)c=v.value,c.kb=Sb,c.ob=Yb}l=0<=a.Ad?l+(s.width+a.Ad):l+(a.Ad-s.width)}}b=l-a.Ad-(d?b.height:b.width);if(this.$e===dp)for(a=a.Fb;a.next();){if(e=a.value,(c=e.link)&&c.Ch!==Rf)c.Nk=0<b?b:NaN}else for(a=a.Gb;a.next();)if(e=a.value,(c=e.link)&&c.Ch!==Rf)c.$k=0<b?b:NaN}};
function pp(a,b){u&&w.i(b,Y,W,"layoutTree:v");if(b!==n){for(var c=b.Zb,d=c.length,e=0;e<d;e++)pp(a,c[e]);switch(b.rg){case Jp:Kp(a,b);break;case Lp:if(b.Aa===up)Kp(a,b);else if(u&&w.i(b,Y,W,"layoutTreeBlock:v"),0===b.Ml){var e=b.ib,c=q,d=0,g=Cp;e!==n&&(d=e.nc,g=e.Aa,c=Dp(g));e=Ip(b);b.Z.V(0,0);b.Pa.V(b.width,b.height);b.ib!==n&&b.Bd!==n&&((180===d||270===d)&&!c||e)?180===d&&!c||(90===d||270===d)&&e?b.Ba.V(b.width-2*b.K.x,0):b.Ba.V(0,b.height-2*b.K.y):b.Ba.V(0,0);b.Vp=n;b.Hq=n}else{for(var i=Mp(b),
c=90===i||270===i,j=0,k=b.Zb,l=k.length,m=0;m<l;m++)var p=k[m],j=Math.max(j,c?p.Pa.width:p.Pa.height);var r=b.Aa,e=r===Np,s=r===Op,v=Dp(r),y=Math.max(0,b.og),d=Pp(b),C=b.rd,E=Qp(b),I=b.Ee,D=0;if(e||s||b.xk||b.yk&&1===b.Zh)D=Math.max(0,b.bd);var e=b.width,g=b.height,M=0,N=0,Z=0,wa=n,ka=n,ua=0,Da=0,Ha=0,bb=0,qb=0,Xa=0,Na=0,fb=0,p=0;v&&!Hp(r)&&135<i&&k.reverse();if(Hp(r))if(1<l)for(m=0;m<l;m++)0===m%2&&m!==l-1?fb=Math.max(fb,c?k[m].Pa.width:k[m].Pa.height):0!==m%2&&(p=Math.max(p,c?k[m].Pa.width:k[m].Pa.height));
else 1===l&&(fb=c?k[0].Pa.width:k[0].Pa.height);if(v){switch(r){case Ep:Da=135>i?Rp(b,k,fb,M,N):Sp(b,k,fb,M,N);fb=Da[0];M=Da[1];N=Da[2];break;case Fp:for(m=0;m<l;m++){var p=k[m],Ya=p.Pa,wa=0===Xa?0:I;c?(p.Z.V(j-Ya.width,bb+wa),M=Math.max(M,Ya.width),N=Math.max(N,bb+wa+Ya.height),bb+=wa+Ya.height):(p.Z.V(Ha+wa,j-Ya.height),M=Math.max(M,Ha+wa+Ya.width),N=Math.max(N,Ya.height),Ha+=wa+Ya.width);Xa++}break;case Gp:for(m=0;m<l;m++)p=k[m],Ya=p.Pa,wa=0===Xa?0:I,c?(p.Z.V(C/2+b.K.x,bb+wa),M=Math.max(M,Ya.width),
N=Math.max(N,bb+wa+Ya.height),bb+=wa+Ya.height):(p.Z.V(Ha+wa,C/2+b.K.y),M=Math.max(M,Ha+wa+Ya.width),N=Math.max(N,Ya.height),Ha+=wa+Ya.width),Xa++}wa=[];ka=[];c?(wa[0]=new F(0,0),wa[1]=new F(0,N),ka[0]=new F(M,0)):(wa[0]=new F(0,0),wa[1]=new F(M,0),ka[0]=new F(0,N));ka[1]=new F(M,N)}else for(m=0;m<l;m++){p=k[m];Ya=p.Pa;if(c){0<y&&(0<Xa&&Ha+C+Ya.width>y)&&(Ha<j&&Tp(b,r,j-Ha,0,Na,m-1),qb++,Xa=0,Na=m,Z=N,Ha=0,bb=135<i?-N-I:N+I);Up(a,p,0,bb);var mb=0;if(0===Xa){if(wa=p.Vp,ka=p.Hq,ua=Ya.width,Da=Ya.height,
wa===n||ka===n||i!==Mp(p))wa=[],ka=[],wa[0]=new F(0,0),wa[1]=new F(0,Da),ka[0]=new F(ua,0),ka[1]=new F(ua,Da)}else Da=Vp(b,p,wa,ka,ua,Da),mb=Da[0],wa=Da[1],ka=Da[2],ua=Da[3],Da=Da[4],Ha<Ya.width&&0>mb&&(Wp(b,-mb,0,Na,m-1),Xp(wa,-mb,0),Xp(ka,-mb,0),mb=0);p.Z.V(mb,bb);M=Math.max(M,ua);N=Math.max(N,Z+(0===qb?0:I)+Ya.height);Ha=ua}else{0<y&&(0<Xa&&bb+C+Ya.height>y)&&(bb<j&&Tp(b,r,0,j-bb,Na,m-1),qb++,Xa=0,Na=m,Z=M,bb=0,Ha=135<i?-M-I:M+I);Up(a,p,Ha,0);mb=0;if(0===Xa){if(wa=p.Vp,ka=p.Hq,ua=Ya.width,Da=Ya.height,
wa===n||ka===n||i!==Mp(p))wa=[],ka=[],wa[0]=new F(0,0),wa[1]=new F(ua,0),ka[0]=new F(0,Da),ka[1]=new F(ua,Da)}else Da=Vp(b,p,wa,ka,ua,Da),mb=Da[0],wa=Da[1],ka=Da[2],ua=Da[3],Da=Da[4],bb<Ya.height&&0>mb&&(Wp(b,0,-mb,Na,m-1),Xp(wa,0,-mb),Xp(ka,0,-mb),mb=0);p.Z.V(Ha,mb);N=Math.max(N,Da);M=Math.max(M,Z+(0===qb?0:I)+Ya.width);bb=Da}Xa++}0<qb&&(c?(N+=Math.max(0,d),Ha<M&&Tp(b,r,M-Ha,0,Na,l-1),0<D&&(s||Wp(b,D,0,0,l-1),M+=D)):(M+=Math.max(0,d),bb<N&&Tp(b,r,0,N-bb,Na,l-1),0<D&&(s||Wp(b,0,D,0,l-1),N+=D)));s=
j=0;switch(r){case Yp:c?j+=M/2-b.K.x-E/2:s+=N/2-b.K.y-E/2;break;case Cp:0<qb?c?j+=M/2-b.K.x-E/2:s+=N/2-b.K.y-E/2:c?(m=k[0].Z.x+k[0].Ba.x,fb=k[l-1].Z.x+k[l-1].Ba.x+2*k[l-1].K.x,j+=m+(fb-m)/2-b.K.x-E/2):(m=k[0].Z.y+k[0].Ba.y,fb=k[l-1].Z.y+k[l-1].Ba.y+2*k[l-1].K.y,s+=m+(fb-m)/2-b.K.y-E/2);break;case Np:c?(j-=E,M+=E):(s-=E,N+=E);break;case Op:c?(j+=M-b.width+E,M+=E):(s+=N-b.height+E,N+=E);break;case Ep:c?j=1<l?j+(fb+C/2-b.K.x):j+(k[0].K.x-b.K.x+k[0].Ba.x):s=1<l?s+(fb+C/2-b.K.y):s+(k[0].K.y-b.K.y+k[0].Ba.y);
break;case Fp:c?j+=M+C/2-b.K.x:s+=N+C/2-b.K.y;break;case Gp:break;default:w.m("Unhandled alignment value "+r.toString())}for(m=0;m<l;m++)p=k[m],c?p.Z.V(p.Z.x+p.Ba.x-j,p.Z.y+(135<i?(v?-N:-p.Pa.height)+p.Ba.y-d:g+d+p.Ba.y)):p.Z.V(p.Z.x+(135<i?(v?-M:-p.Pa.width)+p.Ba.x-d:e+d+p.Ba.x),p.Z.y+p.Ba.y-s);l=k=0;v?c?(M=Zp(b,M,j),0>j&&(j=0),135<i&&(s+=N+d),N+=g+d,r===Gp&&(k+=C/2+b.K.x),l+=g+d):(135<i&&(j+=M+d),M+=e+d,N=$p(b,N,s),0>s&&(s=0),r===Gp&&(l+=C/2+b.K.y),k+=e+d):c?(b.Bd===n?e>M&&(r=aq(r,e-M,0),k=r[0],
l=r[1],M=e,j=0):M=Zp(b,M,j),0>j&&(k-=j,j=0),135<i&&(s+=N+d),N=Math.max(Math.max(N,g),N+g+d),l+=g+d):(135<i&&(j+=M+d),M=Math.max(Math.max(M,e),M+e+d),b.Bd===n?g>N&&(r=aq(r,0,g-N),k=r[0],l=r[1],N=g,s=0):N=$p(b,N,s),0>s&&(l-=s,s=0),k+=e+d);if(0<qb)i=[],r=[],c?(i[2]=new F(0,g+d),i[3]=new F(i[2].x,N),r[2]=new F(M,i[2].y),r[3]=new F(r[2].x,i[3].y)):(i[2]=new F(e+d,0),i[3]=new F(M,i[2].y),r[2]=new F(i[2].x,N),r[3]=new F(i[3].x,r[2].y));else{i=[];r=[];for(m=0;m<wa.length;m++)v=wa[m],i[m+2]=new F(v.x+k,v.y+
l);for(m=0;m<ka.length;m++)v=ka[m],r[m+2]=new F(v.x+k,v.y+l)}c?(i[0]=new F(j,0),i[1]=new F(i[0].x,g),i[2].y<i[1].y&&(i[2].x>i[0].x?i[2]=i[1].copy():i[1].Xa(i[2])),i[3].y<i[2].y&&(i[3].x>i[0].x?i[3]=i[2].copy():i[2]=i[3].copy()),r[0]=new F(j+e,0),r[1]=new F(r[0].x,g),r[2].y<r[1].y&&(r[2].x<r[0].x?r[2]=r[1].copy():r[1].Xa(r[2])),r[3].y<r[2].y&&(r[3].x<r[0].x?r[3]=r[2].copy():r[2]=r[3].copy()),i[2].y-=d/2,r[2].y-=d/2):(i[0]=new F(0,s),i[1]=new F(e,i[0].y),i[2].x<i[1].x&&(i[2].y>i[0].y?i[2]=i[1].copy():
i[1].Xa(i[2])),i[3].x<i[2].x&&(i[3].y>i[0].y?i[3]=i[2].copy():i[2]=i[3].copy()),r[0]=new F(0,s+g),r[1]=new F(e,r[0].y),r[2].x<r[1].x&&(r[2].y<r[0].y?r[2]=r[1].copy():r[1].Xa(r[2])),r[3].x<r[2].x&&(r[3].y<r[0].y?r[3]=r[2].copy():r[2]=r[3].copy()),i[2].x-=d/2,r[2].x-=d/2);b.Vp=i;b.Hq=r;b.Ba.V(j,s);b.Pa.V(M,N)}break;default:w.m("Unhandled compaction value "+b.rg.toString())}}}
function Kp(a,b){u&&w.i(b,Y,W,"layoutTreeNone:v");if(0===b.Ml){var c=q,d=0,e=Cp;b.ib!==n&&(d=b.ib.nc,e=b.ib.Aa,c=Dp(e));e=Ip(b);b.Z.V(0,0);b.Pa.V(b.width,b.height);b.ib!==n&&b.Bd!==n&&((180===d||270===d)&&!c||e)?180===d&&!c||(90===d||270===d)&&e?b.Ba.V(b.width-2*b.K.x,0):b.Ba.V(0,b.height-2*b.K.y):b.Ba.V(0,0)}else{for(var c=Mp(b),d=90===c||270===c,g=0,e=b.Zb,i=e.length,j=0;j<i;j++)var k=e[j],g=Math.max(g,d?k.Pa.width:k.Pa.height);var l=b.Aa,m=l===Np,p=l===Op,r=Dp(l),s=Math.max(0,b.og),v=Pp(b),y=b.rd,
C=Qp(b),E=m||p?0:C/2,I=b.Ee,D=0;if(m||p||b.xk||b.yk&&1===b.Zh)D=Math.max(0,b.bd);var m=b.width,M=b.height,N=0,Z=0,wa=0,ka=0,ua=0,Da=0,Ha=0,bb=0,qb=0,Xa=0;r&&!Hp(l)&&135<c&&e.reverse();if(Hp(l))if(1<i)for(j=0;j<i;j++){var k=e[j],Na=k.Pa;0===j%2&&j!==i-1?qb=Math.max(qb,(d?Na.width:Na.height)+bq(k)-y):0!==j%2&&(Xa=Math.max(Xa,(d?Na.width:Na.height)+bq(k)-y))}else 1===i&&(qb=d?e[0].Pa.width:e[0].Pa.height);if(r)switch(l){case Ep:case up:Z=135>c?Rp(b,e,qb,N,Z):Sp(b,e,qb,N,Z);qb=Z[0];N=Z[1];Z=Z[2];break;
case Fp:for(j=0;j<i;j++)k=e[j],Na=k.Pa,s=0===Ha?0:I,d?(k.Z.V(g-Na.width,ua+s),N=Math.max(N,Na.width),Z=Math.max(Z,ua+s+Na.height),ua+=s+Na.height):(k.Z.V(ka+s,g-Na.height),N=Math.max(N,ka+s+Na.width),Z=Math.max(Z,Na.height),ka+=s+Na.width),Ha++;break;case Gp:for(g=0;g<i;g++)k=e[g],Na=k.Pa,s=0===Ha?0:I,d?(k.Z.V(y/2+b.K.x,ua+s),N=Math.max(N,Na.width),Z=Math.max(Z,ua+s+Na.height),ua+=s+Na.height):(k.Z.V(ka+s,y/2+b.K.y),N=Math.max(N,ka+s+Na.width),Z=Math.max(Z,Na.height),ka+=s+Na.width),Ha++}else for(j=
0;j<i;j++)k=e[j],Na=k.Pa,d?(0<s&&(0<Ha&&ka+y+Na.width>s)&&(ka<g&&Tp(b,l,g-ka,0,bb,j-1),Da++,Ha=0,bb=j,wa=Z,ka=0,ua=135<c?-Z-I:Z+I),Xa=0===Ha?E:y,Up(a,k,0,ua),k.Z.V(ka+Xa,ua),N=Math.max(N,ka+Xa+Na.width),Z=Math.max(Z,wa+(0===Da?0:I)+Na.height),ka+=Xa+Na.width):(0<s&&(0<Ha&&ua+y+Na.height>s)&&(ua<g&&Tp(b,l,0,g-ua,bb,j-1),Da++,Ha=0,bb=j,wa=N,ua=0,ka=135<c?-N-I:N+I),Xa=0===Ha?E:y,Up(a,k,ka,0),k.Z.V(ka,ua+Xa),Z=Math.max(Z,ua+Xa+Na.height),N=Math.max(N,wa+(0===Da?0:I)+Na.width),ua+=Xa+Na.height),Ha++;0<
Da&&(d?(Z+=Math.max(0,v),ka<N&&Tp(b,l,N-ka,0,bb,i-1),0<D&&(p||Wp(b,D,0,0,i-1),N+=D)):(N+=Math.max(0,v),ua<Z&&Tp(b,l,0,Z-ua,bb,i-1),0<D&&(p||Wp(b,0,D,0,i-1),Z+=D)));D=p=0;switch(l){case Yp:d?p+=N/2-b.K.x-C/2:D+=Z/2-b.K.y-C/2;break;case Cp:0<Da?d?p+=N/2-b.K.x-C/2:D+=Z/2-b.K.y-C/2:d?(l=e[0].Z.x+e[0].Ba.x,y=e[i-1].Z.x+e[i-1].Ba.x+2*e[i-1].K.x,p+=l+(y-l)/2-b.K.x-C/2):(l=e[0].Z.y+e[0].Ba.y,y=e[i-1].Z.y+e[i-1].Ba.y+2*e[i-1].K.y,D+=l+(y-l)/2-b.K.y-C/2);break;case Np:d?(p-=C,N+=C):(D-=C,Z+=C);break;case Op:d?
(p+=N-b.width+C,N+=C):(D+=Z-b.height+C,Z+=C);break;case Ep:case up:d?p=1<i?p+(qb+y/2-b.K.x):p+(e[0].K.x-b.K.x+e[0].Ba.x):D=1<i?D+(qb+y/2-b.K.y):D+(e[0].K.y-b.K.y+e[0].Ba.y);break;case Fp:d?p+=N+y/2-b.K.x:D+=Z+y/2-b.K.y;break;case Gp:break;default:w.m("Unhandled alignment value "+l.toString())}for(j=0;j<i;j++)k=e[j],d?k.Z.V(k.Z.x+k.Ba.x-p,k.Z.y+(135<c?(r?-Z:-k.Pa.height)+k.Ba.y-v:M+v+k.Ba.y)):k.Z.V(k.Z.x+(135<c?(r?-N:-k.Pa.width)+k.Ba.x-v:m+v+k.Ba.x),k.Z.y+k.Ba.y-D);d?(N=Zp(b,N,p),0>p&&(p=0),135<c&&
(D+=Z+v),Z+=M+v):(135<c&&(p+=N+v),N+=m+v,Z=$p(b,Z,D),0>D&&(D=0));b.Ba.V(p,D);b.Pa.V(N,Z)}}
function Rp(a,b,c,d,e){u&&w.i(a,Y,W,"layoutBusChildrenPosDir:v");var g=b.length;if(0===g)return[c,d,e];if(1===g){var i=b[0],d=i.Pa.width,e=i.Pa.height;return[c,d,e]}for(var j=a.rd,k=a.Ee,l=90===Mp(a),m=0,p=0,r=0,s=0;s<g;s++)if(!(0!==s%2||1<g&&s===g-1)){var i=b[s],v=i.Pa,y=0===m?0:k;if(l){var C=bq(i)-j;i.Z.V(c-(v.width+C),r+y);d=Math.max(d,v.width+C);e=Math.max(e,r+y+v.height);r+=y+v.height}else C=bq(i)-j,i.Z.V(p+y,c-(v.height+C)),e=Math.max(e,v.height+C),d=Math.max(d,p+y+v.width),p+=y+v.width;m++}var m=
0,E=p,I=r;l?(p=c+j,r=0):(p=0,r=c+j);for(s=0;s<g;s++)0!==s%2&&(i=b[s],v=i.Pa,y=0===m?0:k,l?(C=bq(i)-j,i.Z.V(p+C,r+y),d=Math.max(d,p+v.width+C),e=Math.max(e,r+y+v.height),r+=y+v.height):(C=bq(i)-j,i.Z.V(p+y,r+C),d=Math.max(d,p+y+v.width),e=Math.max(e,r+v.height+C),p+=y+v.width),m++);1<g&&1===g%2&&(i=b[g-1],v=i.Pa,b=cq(i,l?Math.max(Math.abs(I),Math.abs(r)):Math.max(Math.abs(E),Math.abs(p))),l?(i.Z.V(c+j/2-i.K.x-i.Ba.x,e+b),l=c+j/2-i.K.x-i.Ba.x,d=Math.max(d,l+v.width),0>l&&(d-=l),e=Math.max(e,Math.max(I,
r)+b+v.height),0>i.Z.x&&(c=dq(a,i.Z.x,q,c,j))):(i.Z.V(d+b,c+j/2-i.K.y-i.Ba.y),d=Math.max(d,Math.max(E,p)+b+v.width),l=c+j/2-i.K.y-i.Ba.y,e=Math.max(e,l+v.height),0>l&&(e-=l),0>i.Z.y&&(c=dq(a,i.Z.y,h,c,j))));return[c,d,e]}
function Sp(a,b,c,d,e){u&&w.i(a,Y,W,"layoutBusChildrenNegDir:v");var g=b.length;if(0===g)return[c,d,e];if(1===g){var i=b[0],d=i.Pa.width,e=i.Pa.height;return[c,d,e]}for(var j=a.rd,k=a.Ee,l=270===Mp(a),m=0,p=0,r=0,s=0;s<g;s++)if(!(0!==s%2||1<g&&s===g-1)){var i=b[s],v=i.Pa,y=0===m?0:k;if(l){var C=bq(i)-j,r=r-(y+v.height);i.Z.V(c-(v.width+C),r);d=Math.max(d,v.width+C);e=Math.max(e,Math.abs(r))}else C=bq(i)-j,p-=y+v.width,i.Z.V(p,c-(v.height+C)),e=Math.max(e,v.height+C),d=Math.max(d,Math.abs(p));m++}var m=
0,E=p,I=r;l?(p=c+j,r=0):(p=0,r=c+j);for(s=0;s<g;s++)0!==s%2&&(i=b[s],v=i.Pa,y=0===m?0:k,l?(C=bq(i)-j,r-=y+v.height,i.Z.V(p+C,r),d=Math.max(d,p+v.width+C),e=Math.max(e,Math.abs(r))):(C=bq(i)-j,p-=y+v.width,i.Z.V(p,r+C),e=Math.max(e,r+v.height+C),d=Math.max(d,Math.abs(p))),m++);1<g&&1===g%2&&(i=b[g-1],v=i.Pa,k=cq(i,l?Math.max(Math.abs(I),Math.abs(r)):Math.max(Math.abs(E),Math.abs(p))),l?(i.Z.V(c+j/2-i.K.x-i.Ba.x,-e-v.height-k),p=c+j/2-i.K.x-i.Ba.x,d=Math.max(d,p+v.width),0>p&&(d-=p),e=Math.max(e,Math.abs(Math.min(I,
r))+k+v.height),0>i.Z.x&&(c=dq(a,i.Z.x,q,c,j))):(i.Z.V(-d-v.width-k,c+j/2-i.K.y-i.Ba.y),d=Math.max(d,Math.abs(Math.min(E,p))+k+v.width),p=c+j/2-i.K.y-i.Ba.y,e=Math.max(e,p+v.height),0>p&&(e-=p),0>i.Z.y&&(c=dq(a,i.Z.y,h,c,j))));for(s=0;s<g;s++)i=b[s],l?i.Z.V(i.Z.x,i.Z.y+e):i.Z.V(i.Z.x+d,i.Z.y);return[c,d,e]}function bq(a){u&&w.i(a,Y,W,"fixRelativePostions:child");return a.parent===n?0:a.parent.Iv}function cq(a){u&&w.i(a,Y,W,"fixRelativePostions:lastchild");return a.parent===n?0:a.parent.Rv}
function dq(a,b,c,d,e){u&&w.i(a,Y,W,"fixRelativePostions:v");for(var a=a.Zb,g=a.length,i=0;i<g;i++)c?a[i].Z.V(a[i].Z.x,a[i].Z.y-b):a[i].Z.V(a[i].Z.x-b,a[i].Z.y);b=a[g-1];return Math.max(d,c?b.Ba.y+b.K.y-e/2:b.Ba.x+b.K.x-e/2)}
function Zp(a,b,c){u&&w.i(a,Y,W,"calculateSubwidth:v");switch(a.Aa){case Cp:case Yp:var d=b;c+a.width>d&&(d=c+a.width);0>c&&(d-=c);return d;case Np:return a.width>b?a.width:b;case Op:return 2*a.K.x>b?a.width:b+a.width-2*a.K.x;case Ep:case up:return d=Math.min(0,c),c=Math.max(b,c+a.width),Math.max(a.width,c-d);case Fp:return a.width-a.K.x+a.rd/2+b;case Gp:return Math.max(a.width,a.K.x+a.rd/2+b);default:return b}}
function $p(a,b,c){u&&w.i(a,Y,W,"calculateSubheight:v");switch(a.Aa){case Cp:case Yp:var d=b;c+a.height>d&&(d=c+a.height);0>c&&(d-=c);return d;case Np:return a.height>b?a.height:b;case Op:return 2*a.K.y>b?a.height:b+a.height-2*a.K.y;case Ep:case up:return d=Math.min(0,c),c=Math.max(b,c+a.height),Math.max(a.height,c-d);case Fp:return a.height-a.K.y+a.rd/2+b;case Gp:return Math.max(a.height,a.K.y+a.rd/2+b);default:return b}}
function aq(a,b,c){u&&w.i(a,ja,W,"alignOffset:align");switch(a){case Yp:b/=2;c/=2;break;case Cp:b/=2;c/=2;break;case Np:c=b=0;break;case Op:break;default:w.m("Unhandled alignment value "+a.toString())}return[b,c]}function Tp(a,b,c,d,e,g){u&&w.i(a,Y,W,"shiftRelPosAlign:v");u&&w.i(b,ja,W,"shiftRelPosAlign:align");b=aq(b,c,d);Wp(a,b[0],b[1],e,g)}function Wp(a,b,c,d,e){u&&w.i(a,Y,W,"shiftRelPos:v");if(!(0===b&&0===c))for(a=a.Zb;d<=e;d++){var g=a[d].Z;g.x+=b;g.y+=c}}
function Up(a,b,c,d){u&&(w.i(b,Y,W,"recordMidPoints:v"),w.k(c,"number",W,"recordMidPoints:x"),w.k(d,"number",W,"recordMidPoints:y"));var e=b.ib;switch(a.$e){case dp:for(a=b.Gb;a.next();)b=a.value,b.U===e&&b.zq.V(c,d);break;case kp:for(a=b.Fb;a.next();)b=a.value,b.Q===e&&b.zq.V(c,d);break;default:w.m("Unhandled path value "+a.$e.toString())}}function Xp(a,b,c){for(var d=0;d<a.length;d++){var e=a[d];e.x+=b;e.y+=c}}
function Vp(a,b,c,d,e,g){u&&w.i(a,Y,W,"mergeFringes:parent");u&&w.i(b,Y,W,"mergeFringes:child");var i=Mp(a),j=90===i||270===i,k=a.rd,l=e,m=g,p=b.Vp,e=b.Hq,g=b.Pa,a=j?Math.max(m,g.height):Math.max(l,g.width);if(p===n||i!==Mp(b))p=[],e=[],j?(p[0]=new F(0,0),p[1]=new F(0,g.height),e[0]=new F(g.width,0),e[1]=new F(e[0].x,p[1].y)):(p[0]=new F(0,0),p[1]=new F(g.width,0),e[0]=new F(0,g.height),e[1]=new F(p[1].x,e[0].y));if(j){b=j=l;i=p;l=9999999;if(!(d===n||2>d.length||i===n||2>i.length))for(var r=m=0;m<
d.length&&r<i.length;){var s=d[m],v=i[r].copy();v.x+=j;var y=s;m+1<d.length&&(y=d[m+1]);var C=v;r+1<i.length&&(C=i[r+1].copy(),C.x+=j);var E=l;s.y===v.y?E=v.x-s.x:s.y>v.y&&s.y<C.y?E=v.x+(s.y-v.y)/(C.y-v.y)*(C.x-v.x)-s.x:v.y>s.y&&v.y<y.y&&(E=v.x-(s.x+(v.y-s.y)/(y.y-s.y)*(y.x-s.x)));E<l&&(l=E);y.y<=s.y?m++:C.y<=v.y?r++:(y.y<=C.y&&m++,C.y<=y.y&&r++)}b-=l;b+=k;k=p;p=b;if(c===n||2>c.length||k===n||2>k.length)c=n;else{i=[];for(l=j=r=0;j<k.length&&k[j].y<c[0].y;)m=k[j++].copy(),m.x+=p,i[l++]=m;for(;r<c.length;)m=
c[r++].copy(),i[l++]=m;for(c=c[c.length-1].y;j<k.length&&k[j].y<=c;)j++;for(;j<k.length&&k[j].y>c;)m=k[j++].copy(),m.x+=p,i[l++]=m;c=i}j=e;l=b;if(d===n||2>d.length||j===n||2>j.length)d=n;else{e=[];for(p=m=k=0;k<d.length&&d[k].y<j[0].y;)i=d[k++].copy(),e[p++]=i;for(;m<j.length;)i=j[m++].copy(),i.x+=l,e[p++]=i;for(j=j[j.length-1].y;k<d.length&&d[k].y<=j;)k++;for(;k<d.length&&d[k].y>j;)i=d[k++].copy(),e[p++]=i;d=e}e=Math.max(0,b)+g.width;g=a}else{b=j=m;i=p;l=9999999;if(!(d===n||2>d.length||i===n||2>
i.length))for(r=m=0;m<d.length&&r<i.length;)s=d[m],v=i[r].copy(),v.y+=j,y=s,m+1<d.length&&(y=d[m+1]),C=v,r+1<i.length&&(C=i[r+1].copy(),C.y+=j),E=l,s.x===v.x?E=v.y-s.y:s.x>v.x&&s.x<C.x?E=v.y+(s.x-v.x)/(C.x-v.x)*(C.y-v.y)-s.y:v.x>s.x&&v.x<y.x&&(E=v.y-(s.y+(v.x-s.x)/(y.x-s.x)*(y.y-s.y))),E<l&&(l=E),y.x<=s.x?m++:C.x<=v.x?r++:(y.x<=C.x&&m++,C.x<=y.x&&r++);b-=l;b+=k;k=p;p=b;if(c===n||2>c.length||k===n||2>k.length)c=n;else{i=[];for(l=j=r=0;j<k.length&&k[j].x<c[0].x;)m=k[j++].copy(),m.y+=p,i[l++]=m;for(;r<
c.length;)m=c[r++].copy(),i[l++]=m;for(c=c[c.length-1].x;j<k.length&&k[j].x<=c;)j++;for(;j<k.length&&k[j].x>c;)m=k[j++].copy(),m.y+=p,i[l++]=m;c=i}j=e;l=b;if(d===n||2>d.length||j===n||2>j.length)d=n;else{e=[];for(p=m=k=0;k<d.length&&d[k].x<j[0].x;)i=d[k++].copy(),e[p++]=i;for(;m<j.length;)i=j[m++].copy(),i.y+=l,e[p++]=i;for(j=j[j.length-1].x;k<d.length&&d[k].x<=j;)k++;for(;k<d.length&&d[k].x>j;)i=d[k++].copy(),e[p++]=i;d=e}e=a;g=Math.max(0,b)+g.height}return[b,c,d,e,g]}
function qp(a,b,c,d){if(b!==n){u&&w.i(b,Y,W,"assignAbsolutePositions:v");b.x=c;b.y=d;for(var b=b.Zb,e=b.length,g=0;g<e;g++){var i=b[g];qp(a,i,c+i.Z.x,d+i.Z.y)}}}W.prototype.commitLayout=W.prototype.bv=function(){this.Rz();this.commitNodes();this.cs&&this.commitLinks()};W.prototype.commitNodes=W.prototype.Ny=function(){for(var a=this.B.ja.l,b;a.next();)b=a.value,b.commit();for(a.reset();a.next();)b=a.value,this.layoutComments(b)};W.prototype.commitLinks=W.prototype.My=function(){for(var a=this.B.lc.l;a.next();)a.value.commit()};
W.prototype.Rz=function(){for(var a=this.ad.l;a.next();){var b=this.B.Ke(a.value);jq(this,b)}};
function jq(a,b){if(b!==n){u&&w.i(b,Y,W,"setPortSpotsTree:v");u&&w.i(b,Y,W,"setPortSpots:v");var c=b.Aa;if(Dp(c)){u&&w.i(b,Y,W,"setPortSpotsBus:v");u&&w.i(c,ja,W,"setPortSpots:align");var d=a.$e===dp,e=Mp(b),g;switch(e){case 0:g=Ub;break;case 90:g=Yb;break;case 180:g=Tb;break;default:g=Sb}var i=b.Zb,j=i.length;switch(c){case Ep:case up:for(c=0;c<j;c++){var k=i[c],k=d?k.Gb:k.Fb;if(k.next()){var l=k.value,l=l.Ra;if(l!==n){var m=90===e||270===e?Tb:Sb;if(1===j||c===j-1&&1===j%2)switch(e){case 0:m=Tb;
break;case 90:m=Sb;break;case 180:m=Ub;break;default:m=Yb}else 0===c%2&&(m=90===e||270===e?Ub:Yb);d?(b.Ij&&(l.kb=g),b.Hj&&(l.ob=m)):(b.Ij&&(l.kb=m),b.Hj&&(l.ob=g))}}}break;case Fp:m=90===e||270===e?Ub:Yb;for(k=d?b.Fb:b.Gb;k.next();)l=k.value,l=l.Ra,l!==n&&(d?(b.Ij&&(l.kb=g),b.Hj&&(l.ob=m)):(b.Ij&&(l.kb=m),b.Hj&&(l.ob=g)));break;case Gp:m=90===e||270===e?Tb:Sb;for(k=d?b.Fb:b.Gb;k.next();)l=k.value,l=l.Ra,l!==n&&(d?(b.Ij&&(l.kb=g),b.Hj&&(l.ob=m)):(b.Ij&&(l.kb=m),b.Hj&&(l.ob=g)))}}else if(d=Mp(b),a.$e===
dp)for(e=b.Fb;e.next();){if(g=e.value,g=g.Ra,g!==n){if(b.Gg)if(Cb(b.kf))switch(d){case 0:g.kb=Ub;break;case 90:g.kb=Yb;break;case 180:g.kb=Tb;break;default:g.kb=Sb}else g.kb=b.kf;if(b.Fg)if(Cb(b.Xe))switch(d){case 0:g.ob=Tb;break;case 90:g.ob=Sb;break;case 180:g.ob=Ub;break;default:g.ob=Yb}else g.ob=b.Xe}}else for(e=b.Gb;e.next();)if(g=e.value,g=g.Ra,g!==n){if(b.Gg)if(Cb(b.kf))switch(d){case 0:g.ob=Ub;break;case 90:g.ob=Yb;break;case 180:g.ob=Tb;break;default:g.ob=Sb}else g.ob=b.kf;if(b.Fg)if(Cb(b.Xe))switch(d){case 0:g.kb=
Tb;break;case 90:g.kb=Sb;break;case 180:g.kb=Ub;break;default:g.kb=Yb}else g.kb=b.Xe}d=b.Zb;e=d.length;for(g=0;g<e;g++)jq(a,d[g])}}function Mp(a){a=a.nc;return 45>=a?0:135>=a?90:225>=a?180:315>=a?270:0}function Pp(a){u&&w.i(a,Y,W,"computeLayerSpacing:v");var b=Mp(a),b=90===b||270===b,c=a.Dd;if(0<a.zg)var d=Math.min(1,a.zg),c=c-(b?a.height*d:a.width*d);if(c<(b?-a.height:-a.width))c=b?-a.height:-a.width;return c}
function Qp(a){u&&w.i(a,Y,W,"computeNodeIndent:v");var b=Mp(a),b=90===b||270===b,c=a.ih;if(0<a.Cg)var d=Math.min(1,a.Cg),c=c+(b?a.width*d:a.height*d);return c=Math.max(0,c)}w.g(W,"roots",W.prototype.JH);w.defineProperty(W,{JH:"roots"},t("ad"),function(a){this.ad!==a&&(this.ad=a,this.F())});w.g(W,"path",W.prototype.path);w.defineProperty(W,{path:"path"},t("jh"),function(a){this.jh!==a&&(w.i(a,ja,W,"path"),this.jh=a,this.F())});w.g(W,"treeStyle",W.prototype.JE);
w.defineProperty(W,{JE:"treeStyle"},t("cr"),function(a){if(this.Pc!==a&&(u&&w.i(a,ja,W,"treeStyle"),a===ep||a===wp||a===xp||a===vp))this.cr=a,this.F()});w.g(W,"arrangement",W.prototype.ke);w.defineProperty(W,{ke:"arrangement"},t("Pc"),function(a){if(this.Pc!==a&&(u&&w.i(a,ja,W,"arrangement"),a===fp||a===rp||a===jp))this.Pc=a,this.F()});w.g(W,"arrangementSpacing",W.prototype.Uu);w.defineProperty(W,{Uu:"arrangementSpacing"},t("Ff"),function(a){this.Ff.I(a)||(this.Ff.Xa(a),this.F())});
w.g(W,"rootDefaults",W.prototype.IH);w.defineProperty(W,{IH:"rootDefaults"},t("ha"),function(a){this.ha!==a&&(u&&w.i(a,Y,W,"rootDefaults"),this.ha=a,this.F())});w.g(W,"alternateDefaults",W.prototype.IF);w.defineProperty(W,{IF:"alternateDefaults"},t("ga"),function(a){this.ga!==a&&(u&&w.i(a,Y,W,"alternateDefaults"),this.ga=a,this.F())});w.g(W,"sorting",W.prototype.ig);
w.defineProperty(W,{ig:"sorting"},function(){return this.ha.tc},function(a){if(this.ha.tc!==a&&(u&&w.i(a,ja,W,"sorting"),a===yp||a===zp||a===Ap||Bp))this.ha.tc=a,this.F()});w.g(W,"comparer",W.prototype.wh);w.defineProperty(W,{wh:"comparer"},function(){return this.ha.qc},function(a){this.ha.qc!==a&&(u&&w.k(a,"function",W,"comparer"),this.ha.qc=a,this.F())});w.g(W,"angle",W.prototype.angle);
w.defineProperty(W,{angle:"angle"},function(){return this.ha.nc},function(a){if(this.ha.nc!==a&&(0===a||90===a||180===a||270===a))this.ha.nc=a,this.F()});w.g(W,"alignment",W.prototype.Cb);w.defineProperty(W,{Cb:"alignment"},function(){return this.ha.Aa},function(a){this.ha.Aa!==a&&(u&&w.jb(a,W,W,"alignment"),this.ha.Aa=a,this.F())});w.g(W,"nodeIndent",W.prototype.zz);w.defineProperty(W,{zz:"nodeIndent"},function(){return this.ha.ih},function(a){this.ha.ih!==a&&0<=a&&(this.ha.ih=a,this.F())});
w.g(W,"nodeIndentPastParent",W.prototype.Az);w.defineProperty(W,{Az:"nodeIndentPastParent"},function(){return this.ha.Cg},function(a){this.ha.Cg!==a&&(0<=a&&1>=a)&&(this.ha.Cg=a,this.F())});w.g(W,"nodeSpacing",W.prototype.Iv);w.defineProperty(W,{Iv:"nodeSpacing"},function(){return this.ha.rd},function(a){this.ha.rd!==a&&(this.ha.rd=a,this.F())});w.g(W,"layerSpacing",W.prototype.es);w.defineProperty(W,{es:"layerSpacing"},function(){return this.ha.Dd},function(a){this.ha.Dd!==a&&(this.ha.Dd=a,this.F())});
w.g(W,"layerSpacingParentOverlap",W.prototype.oz);w.defineProperty(W,{oz:"layerSpacingParentOverlap"},function(){return this.ha.zg},function(a){this.ha.zg!==a&&(0<=a&&1>=a)&&(this.ha.zg=a,this.F())});w.g(W,"compaction",W.prototype.cv);w.defineProperty(W,{cv:"compaction"},function(){return this.ha.rg},function(a){if(this.ha.rg!==a&&(u&&w.i(a,ja,W,"compaction"),a===Jp||a===Lp))this.ha.rg=a,this.F()});w.g(W,"breadthLimit",W.prototype.Ey);
w.defineProperty(W,{Ey:"breadthLimit"},function(){return this.ha.og},function(a){this.ha.og!==a&&0<=a&&(this.ha.og=a,this.F())});w.g(W,"rowSpacing",W.prototype.Rv);w.defineProperty(W,{Rv:"rowSpacing"},function(){return this.ha.Ee},function(a){this.ha.Ee!==a&&(this.ha.Ee=a,this.F())});w.g(W,"rowIndent",W.prototype.Kz);w.defineProperty(W,{Kz:"rowIndent"},function(){return this.ha.bd},function(a){this.ha.bd!==a&&0<=a&&(this.ha.bd=a,this.F())});w.g(W,"commentSpacing",W.prototype.Ky);
w.defineProperty(W,{Ky:"commentSpacing"},function(){return this.ha.Ad},function(a){this.ha.Ad!==a&&(this.ha.Ad=a,this.F())});w.g(W,"commentMargin",W.prototype.Jy);w.defineProperty(W,{Jy:"commentMargin"},function(){return this.ha.pc},function(a){this.ha.pc!==a&&(this.ha.pc=a,this.F())});w.g(W,"setsPortSpot",W.prototype.Ij);w.defineProperty(W,{Ij:"setsPortSpot"},function(){return this.ha.Gg},function(a){this.ha.Gg!==a&&(this.ha.Gg=a,this.F())});w.g(W,"portSpot",W.prototype.Dz);
w.defineProperty(W,{Dz:"portSpot"},function(){return this.ha.kf},function(a){this.ha.kf.I(a)||(this.ha.kf=a,this.F())});w.g(W,"setsChildPortSpot",W.prototype.Hj);w.defineProperty(W,{Hj:"setsChildPortSpot"},function(){return this.ha.Fg},function(a){this.ha.Fg!==a&&(this.ha.Fg=a,this.F())});w.g(W,"childPortSpot",W.prototype.Hy);w.defineProperty(W,{Hy:"childPortSpot"},function(){return this.ha.Xe},function(a){this.ha.Xe.I(a)||(this.ha.Xe=a,this.F())});w.g(W,"alternateSorting",W.prototype.TF);
w.defineProperty(W,{TF:"alternateSorting"},function(){return this.ga.tc},function(a){if(this.ga.tc!==a&&(u&&w.i(a,ja,W,"alternateSorting"),a===yp||a===zp||a===Ap||Bp))this.ga.tc=a,this.F()});w.g(W,"alternateComparer",W.prototype.GF);w.defineProperty(W,{GF:"alternateComparer"},function(){return this.ga.qc},function(a){this.ga.qc!==a&&(u&&w.k(a,"function",W,"alternateComparer"),this.ga.qc=a,this.F())});w.g(W,"alternateAngle",W.prototype.AF);
w.defineProperty(W,{AF:"alternateAngle"},function(){return this.ga.nc},function(a){if(this.ga.nc!==a&&(0===a||90===a||180===a||270===a))this.ga.nc=a,this.F()});w.g(W,"alternateAlignment",W.prototype.zF);w.defineProperty(W,{zF:"alternateAlignment"},function(){return this.ga.Aa},function(a){this.ga.Aa!==a&&(u&&w.jb(a,W,W,"alternateAlignment"),this.ga.Aa=a,this.F())});w.g(W,"alternateNodeIndent",W.prototype.LF);
w.defineProperty(W,{LF:"alternateNodeIndent"},function(){return this.ga.ih},function(a){this.ga.ih!==a&&0<=a&&(this.ga.ih=a,this.F())});w.g(W,"alternateNodeIndentPastParent",W.prototype.MF);w.defineProperty(W,{MF:"alternateNodeIndentPastParent"},function(){return this.ga.Cg},function(a){this.ga.Cg!==a&&(0<=a&&1>=a)&&(this.ga.Cg=a,this.F())});w.g(W,"alternateNodeSpacing",W.prototype.NF);
w.defineProperty(W,{NF:"alternateNodeSpacing"},function(){return this.ga.rd},function(a){this.ga.rd!==a&&(this.ga.rd=a,this.F())});w.g(W,"alternateLayerSpacing",W.prototype.JF);w.defineProperty(W,{JF:"alternateLayerSpacing"},function(){return this.ga.Dd},function(a){this.ga.Dd!==a&&(this.ga.Dd=a,this.F())});w.g(W,"alternateLayerSpacingParentOverlap",W.prototype.KF);
w.defineProperty(W,{KF:"alternateLayerSpacingParentOverlap"},function(){return this.ga.zg},function(a){this.ga.zg!==a&&(0<=a&&1>=a)&&(this.ga.zg=a,this.F())});w.g(W,"alternateCompaction",W.prototype.FF);w.defineProperty(W,{FF:"alternateCompaction"},function(){return this.ga.rg},function(a){if(this.ga.rg!==a&&(u&&w.i(a,ja,W,"alternateCompaction"),a===Jp||a===Lp))this.ga.rg=a,this.F()});w.g(W,"alternateBreadthLimit",W.prototype.BF);
w.defineProperty(W,{BF:"alternateBreadthLimit"},function(){return this.ga.og},function(a){this.ga.og!==a&&0<=a&&(this.ga.og=a,this.F())});w.g(W,"alternateRowSpacing",W.prototype.QF);w.defineProperty(W,{QF:"alternateRowSpacing"},function(){return this.ga.Ee},function(a){this.ga.Ee!==a&&(this.ga.Ee=a,this.F())});w.g(W,"alternateRowIndent",W.prototype.PF);w.defineProperty(W,{PF:"alternateRowIndent"},function(){return this.ga.bd},function(a){this.ga.bd!==a&&0<=a&&(this.ga.bd=a,this.F())});
w.g(W,"alternateCommentSpacing",W.prototype.EF);w.defineProperty(W,{EF:"alternateCommentSpacing"},function(){return this.ga.Ad},function(a){this.ga.Ad!==a&&(this.ga.Ad=a,this.F())});w.g(W,"alternateCommentMargin",W.prototype.DF);w.defineProperty(W,{DF:"alternateCommentMargin"},function(){return this.ga.pc},function(a){this.ga.pc!==a&&(this.ga.pc=a,this.F())});w.g(W,"alternateSetsPortSpot",W.prototype.SF);
w.defineProperty(W,{SF:"alternateSetsPortSpot"},function(){return this.ga.Gg},function(a){this.ga.Gg!==a&&(this.ga.Gg=a,this.F())});w.g(W,"alternatePortSpot",W.prototype.OF);w.defineProperty(W,{OF:"alternatePortSpot"},function(){return this.ga.kf},function(a){this.ga.kf.I(a)||(this.ga.kf=a,this.F())});w.g(W,"alternateSetsChildPortSpot",W.prototype.RF);w.defineProperty(W,{RF:"alternateSetsChildPortSpot"},function(){return this.ga.Fg},function(a){this.ga.Fg!==a&&(this.ga.Fg=a,this.F())});
w.g(W,"alternateChildPortSpot",W.prototype.CF);w.defineProperty(W,{CF:"alternateChildPortSpot"},function(){return this.ga.Xe},function(a){this.ga.Xe.I(a)||(this.ga.Xe=a,this.F())});var cp;W.PathDefault=cp=w.s(W,"PathDefault",-1);var dp;W.PathDestination=dp=w.s(W,"PathDestination",0);var kp;W.PathSource=kp=w.s(W,"PathSource",1);var yp;W.SortingForwards=yp=w.s(W,"SortingForwards",10);var zp;W.SortingReverse=zp=w.s(W,"SortingReverse",11);var Ap;W.SortingAscending=Ap=w.s(W,"SortingAscending",12);var Bp;
W.SortingDescending=Bp=w.s(W,"SortingDescending",13);var Yp;W.AlignmentCenterSubtrees=Yp=w.s(W,"AlignmentCenterSubtrees",20);var Cp;W.AlignmentCenterChildren=Cp=w.s(W,"AlignmentCenterChildren",21);var Np;W.AlignmentStart=Np=w.s(W,"AlignmentStart",22);var Op;W.AlignmentEnd=Op=w.s(W,"AlignmentEnd",23);var Ep;W.AlignmentBus=Ep=w.s(W,"AlignmentBus",24);var up;W.AlignmentBusBranching=up=w.s(W,"AlignmentBusBranching",25);var Fp;W.AlignmentTopLeftBus=Fp=w.s(W,"AlignmentTopLeftBus",26);var Gp;
W.AlignmentBottomRightBus=Gp=w.s(W,"AlignmentBottomRightBus",27);var Jp;W.CompactionNone=Jp=w.s(W,"CompactionNone",30);var Lp;W.CompactionBlock=Lp=w.s(W,"CompactionBlock",31);var ep;W.StyleLayered=ep=w.s(W,"StyleLayered",40);var xp;W.StyleLastParents=xp=w.s(W,"StyleLastParents",41);var wp;W.StyleAlternating=wp=w.s(W,"StyleAlternating",42);var vp;W.StyleRootOnly=vp=w.s(W,"StyleRootOnly",43);var fp;W.ArrangementVertical=fp=w.s(W,"ArrangementVertical",50);var rp;
W.ArrangementHorizontal=rp=w.s(W,"ArrangementHorizontal",51);var jp;W.ArrangementFixedRoots=jp=w.s(W,"ArrangementFixedRoots",52);function hp(){Xm.call(this)}w.P("TreeNetwork",hp);w.Da(hp,Xm);hp.prototype.createVertex=hp.prototype.vj=function(){return new Y};hp.prototype.createEdge=hp.prototype.Mn=function(){return new kq};
function Y(){an.call(this);this.nk=q;this.ib=n;this.Zb=[];this.Zh=this.Nt=this.jt=this.ul=this.jI=0;this.Z=new F(0,0);this.Pa=new cb(0,0);this.Ba=new F(0,0);this.Hq=this.Vp=this.Bd=n;this.yk=this.xk=this.Px=q;this.tc=yp;this.qc=fn;this.nc=0;this.Aa=Cp;this.Cg=this.ih=0;this.rd=20;this.Dd=50;this.zg=0;this.rg=Lp;this.og=0;this.Ee=25;this.Ad=this.bd=10;this.pc=20;this.Gg=h;this.kf=Ib;this.Fg=h;this.Xe=Ib}w.P("TreeVertex",Y);w.Da(Y,an);
function gp(a,b){b!==n&&(a.tc=b.tc,a.qc=b.qc,a.nc=b.nc,a.Aa=b.Aa,a.ih=b.ih,a.Cg=b.Cg,a.rd=b.rd,a.Dd=b.Dd,a.zg=b.zg,a.rg=b.rg,a.og=b.og,a.Ee=b.Ee,a.bd=b.bd,a.Ad=b.Ad,a.pc=b.pc,a.Gg=b.Gg,a.kf=b.kf,a.Fg=b.Fg,a.Xe=b.Xe)}w.g(Y,"initialized",Y.prototype.JG);w.defineProperty(Y,{JG:"initialized"},t("nk"),ba("nk"));w.g(Y,"parent",Y.prototype.parent);w.defineProperty(Y,{parent:"parent"},t("ib"),ba("ib"));w.g(Y,"children",Y.prototype.children);w.defineProperty(Y,{children:"children"},t("Zb"),ba("Zb"));
w.u(Y,{Ml:"childrenCount"},function(){return this.Zb.length});w.g(Y,"level",Y.prototype.YG);w.defineProperty(Y,{YG:"level"},t("ul"),ba("ul"));w.g(Y,"descendantCount",Y.prototype.iG);w.defineProperty(Y,{iG:"descendantCount"},t("jt"),ba("jt"));w.g(Y,"maxChildrenCount",Y.prototype.eH);w.defineProperty(Y,{eH:"maxChildrenCount"},t("Nt"),ba("Nt"));w.g(Y,"maxGenerationCount",Y.prototype.fH);w.defineProperty(Y,{fH:"maxGenerationCount"},t("Zh"),ba("Zh"));w.g(Y,"relativePosition",Y.prototype.BH);
w.defineProperty(Y,{BH:"relativePosition"},t("Z"),function(a){w.i(a,F,Y,"relativePosition");this.Z.set(a)});w.g(Y,"subtreeSize",Y.prototype.$H);w.defineProperty(Y,{$H:"subtreeSize"},t("Pa"),function(a){w.i(a,cb,Y,"subtreeSize");this.Pa.set(a)});w.g(Y,"subtreeOffset",Y.prototype.ZH);w.defineProperty(Y,{ZH:"subtreeOffset"},t("Ba"),function(a){w.i(a,F,Y,"subtreeOffset");this.Ba.set(a)});w.g(Y,"comments",Y.prototype.Ly);w.defineProperty(Y,{Ly:"comments"},t("Bd"),ba("Bd"));w.g(Y,"sorting",Y.prototype.ig);
w.defineProperty(Y,{ig:"sorting"},t("tc"),ba("tc"));w.g(Y,"comparer",Y.prototype.wh);w.defineProperty(Y,{wh:"comparer"},t("qc"),ba("qc"));w.g(Y,"angle",Y.prototype.angle);w.defineProperty(Y,{angle:"angle"},t("nc"),ba("nc"));w.g(Y,"alignment",Y.prototype.Cb);w.defineProperty(Y,{Cb:"alignment"},t("Aa"),ba("Aa"));w.g(Y,"nodeIndent",Y.prototype.zz);w.defineProperty(Y,{zz:"nodeIndent"},t("ih"),ba("ih"));w.g(Y,"nodeIndentPastParent",Y.prototype.Az);
w.defineProperty(Y,{Az:"nodeIndentPastParent"},t("Cg"),ba("Cg"));w.g(Y,"nodeSpacing",Y.prototype.Iv);w.defineProperty(Y,{Iv:"nodeSpacing"},t("rd"),ba("rd"));w.g(Y,"layerSpacing",Y.prototype.es);w.defineProperty(Y,{es:"layerSpacing"},t("Dd"),ba("Dd"));w.g(Y,"layerSpacingParentOverlap",Y.prototype.oz);w.defineProperty(Y,{oz:"layerSpacingParentOverlap"},t("zg"),ba("zg"));w.g(Y,"compaction",Y.prototype.cv);w.defineProperty(Y,{cv:"compaction"},t("rg"),ba("rg"));w.g(Y,"breadthLimit",Y.prototype.Ey);
w.defineProperty(Y,{Ey:"breadthLimit"},t("og"),ba("og"));w.g(Y,"rowSpacing",Y.prototype.Rv);w.defineProperty(Y,{Rv:"rowSpacing"},t("Ee"),ba("Ee"));w.g(Y,"rowIndent",Y.prototype.Kz);w.defineProperty(Y,{Kz:"rowIndent"},t("bd"),ba("bd"));w.g(Y,"commentSpacing",Y.prototype.Ky);w.defineProperty(Y,{Ky:"commentSpacing"},t("Ad"),ba("Ad"));w.g(Y,"commentMargin",Y.prototype.Jy);w.defineProperty(Y,{Jy:"commentMargin"},t("pc"),ba("pc"));w.g(Y,"setsPortSpot",Y.prototype.Ij);
w.defineProperty(Y,{Ij:"setsPortSpot"},t("Gg"),ba("Gg"));w.g(Y,"portSpot",Y.prototype.Dz);w.defineProperty(Y,{Dz:"portSpot"},t("kf"),ba("kf"));w.g(Y,"setsChildPortSpot",Y.prototype.Hj);w.defineProperty(Y,{Hj:"setsChildPortSpot"},t("Fg"),ba("Fg"));w.g(Y,"childPortSpot",Y.prototype.Hy);w.defineProperty(Y,{Hy:"childPortSpot"},t("Xe"),ba("Xe"));w.g(Y,"routeFirstRow",Y.prototype.NH);w.defineProperty(Y,{NH:"routeFirstRow"},t("Px"),ba("Px"));w.g(Y,"routeAroundCentered",Y.prototype.LH);
w.defineProperty(Y,{LH:"routeAroundCentered"},t("xk"),ba("xk"));w.g(Y,"routeAroundLastParent",Y.prototype.MH);w.defineProperty(Y,{MH:"routeAroundLastParent"},t("yk"),ba("yk"));function kq(){bn.call(this);this.zq=new F(0,0)}w.P("TreeEdge",kq);w.Da(kq,bn);
kq.prototype.commit=kq.prototype.av=function(){var a=this.Ra;if(a!==n&&a.Ch!==Rf){var b=this.B.Tb,c=n,d=n;switch(b.$e){case dp:c=this.U;d=this.Q;break;case kp:c=this.Q;d=this.U;break;default:w.m("Unhandled path value "+b.$e.toString())}if(!(c===n||d===n))if(b=this.zq,0===b.x&&0===b.y&&!c.Px){var e=c,g=d;u&&w.i(e,Y,kq,"adjustRouteForAngleChange:parent");u&&w.i(g,Y,kq,"adjustRouteForAngleChange:child");a=this.Ra;c=Mp(e);if(c!==Mp(g)&&(b=Pp(e),d=e.Eb,e=g.Eb,!(0===c&&e.left-d.right<b+1||90===c&&e.top-
d.bottom<b+1||180===c&&d.left-e.right<b+1||270===c&&d.top-e.bottom<b+1))){km(a);var e=a.vf===gk,g=Yg(a),i=Dp(this.U.Aa);a.Zk();0===c?(c=d.right+b/2,e?4===a.ka&&(b=a.p(3).y,a.J(1,new F(c-20,a.p(1).y)),a.A(2,new F(c-20,b)),a.A(3,new F(c,b)),a.A(4,new F(c+20,b)),a.J(5,new F(a.p(5).x,b))):g?i?a.J(3,new F(a.p(2).x,a.p(4).y)):6===a.ka&&(a.J(2,new F(c,a.p(2).y)),a.J(3,new F(c,a.p(3).y))):4===a.ka?a.A(2,new F(c,a.p(2).y)):3===a.ka?a.J(1,new F(c,a.p(2).y)):2===a.ka&&a.A(1,new F(c,a.p(1).y))):90===c?(b=d.bottom+
b/2,e?4===a.ka&&(c=a.p(3).x,a.J(1,new F(a.p(1).x,b-20)),a.A(2,new F(c,b-20)),a.A(3,new F(c,b)),a.A(4,new F(c,b+20)),a.J(5,new F(c,a.p(5).y))):g?i?a.J(3,new F(a.p(2).x,a.p(4).y)):6===a.ka&&(a.J(2,new F(a.p(2).x,b)),a.J(3,new F(a.p(3).x,b))):4===a.ka?a.A(2,new F(a.p(2).x,b)):3===a.ka?a.J(1,new F(a.p(2).x,b)):2===a.ka&&a.A(1,new F(a.p(1).x,b))):180===c?(c=d.left-b/2,e?4===a.ka&&(b=a.p(3).y,a.J(1,new F(c+20,a.p(1).y)),a.A(2,new F(c+20,b)),a.A(3,new F(c,b)),a.A(4,new F(c-20,b)),a.J(5,new F(a.p(5).x,b))):
g?i?a.J(3,new F(a.p(2).x,a.p(4).y)):6===a.ka&&(a.J(2,new F(c,a.p(2).y)),a.J(3,new F(c,a.p(3).y))):4===a.ka?a.A(2,new F(c,a.p(2).y)):3===a.ka?a.J(1,new F(c,a.p(2).y)):2===a.ka&&a.A(1,new F(c,a.p(1).y))):270===c&&(b=d.top-b/2,e?4===a.ka&&(c=a.p(3).x,a.J(1,new F(a.p(1).x,b+20)),a.A(2,new F(c,b+20)),a.A(3,new F(c,b)),a.A(4,new F(c,b-20)),a.J(5,new F(c,a.p(5).y))):g?i?a.J(3,new F(a.p(2).x,a.p(4).y)):6===a.ka&&(a.J(2,new F(a.p(2).x,b)),a.J(3,new F(a.p(3).x,b))):4===a.ka?a.A(2,new F(a.p(2).x,b)):3===a.ka?
a.J(1,new F(a.p(2).x,b)):2===a.ka&&a.A(1,new F(a.p(1).x,b)));a.si()}}else{var d=c.Eb,j=Mp(c),e=Pp(c),g=c.Ee;km(a);var i=a.vf===gk,k=Yg(a),l,m,p,r;a.Zk();if(k||i){for(l=2;4<a.ka;)a.XD(2);m=a.p(1);p=a.p(2)}else{for(l=1;3<a.ka;)a.XD(1);m=a.p(0);p=a.p(a.ka-1)}r=a.p(a.ka-1);0===j?(c.Aa===Op?(j=d.bottom+b.y,0===b.y&&m.y>r.y+c.bd&&(j=Math.min(j,Math.max(m.y,j-Qp(c))))):c.Aa===Np?(j=d.top+b.y,0===b.y&&m.y<r.y-c.bd&&(j=Math.max(j,Math.min(m.y,j+Qp(c))))):j=c.xk||c.yk&&1===c.Zh?d.top-c.Ba.y+b.y:d.y+d.height/
2+b.y,i?(a.A(l,new F(m.x,j)),l++,a.A(l,new F(d.right+e,j)),l++,a.A(l,new F(d.right+e+(b.x-g)/3,j)),l++,a.A(l,new F(d.right+e+2*(b.x-g)/3,j)),l++,a.A(l,new F(d.right+e+(b.x-g),j)),l++,a.A(l,new F(p.x,j))):(k&&(a.A(l,new F(d.right+e/2,m.y)),l++),a.A(l,new F(d.right+e/2,j)),l++,a.A(l,new F(d.right+e+b.x-(k?g/2:g),j)),l++,k&&a.A(l,new F(a.p(l-1).x,p.y)))):90===j?(c.Aa===Op?(j=d.right+b.x,0===b.x&&m.x>r.x+c.bd&&(j=Math.min(j,Math.max(m.x,j-Qp(c))))):c.Aa===Np?(j=d.left+b.x,0===b.x&&m.x<r.x-c.bd&&(j=Math.max(j,
Math.min(m.x,j+Qp(c))))):j=c.xk||c.yk&&1===c.Zh?d.left-c.Ba.x+b.x:d.x+d.width/2+b.x,i?(a.A(l,new F(j,m.y)),l++,a.A(l,new F(j,d.bottom+e)),l++,a.A(l,new F(j,d.bottom+e+(b.y-g)/3)),l++,a.A(l,new F(j,d.bottom+e+2*(b.y-g)/3)),l++,a.A(l,new F(j,d.bottom+e+(b.y-g))),l++,a.A(l,new F(j,p.y))):(k&&(a.A(l,new F(m.x,d.bottom+e/2)),l++),a.A(l,new F(j,d.bottom+e/2)),l++,a.A(l,new F(j,d.bottom+e+b.y-(k?g/2:g))),l++,k&&a.A(l,new F(p.x,a.p(l-1).y)))):180===j?(c.Aa===Op?(j=d.bottom+b.y,0===b.y&&m.y>r.y+c.bd&&(j=Math.min(j,
Math.max(m.y,j-Qp(c))))):c.Aa===Np?(j=d.top+b.y,0===b.y&&m.y<r.y-c.bd&&(j=Math.max(j,Math.min(m.y,j+Qp(c))))):j=c.xk||c.yk&&1===c.Zh?d.top-c.Ba.y+b.y:d.y+d.height/2+b.y,i?(a.A(l,new F(m.x,j)),l++,a.A(l,new F(d.left-e,j)),l++,a.A(l,new F(d.left-e+(b.x+g)/3,j)),l++,a.A(l,new F(d.left-e+2*(b.x+g)/3,j)),l++,a.A(l,new F(d.left-e+(b.x+g),j)),l++,a.A(l,new F(p.x,j))):(k&&(a.A(l,new F(d.left-e/2,m.y)),l++),a.A(l,new F(d.left-e/2,j)),l++,a.A(l,new F(d.left-e+b.x+(k?g/2:g),j)),l++,k&&a.A(l,new F(a.p(l-1).x,
p.y)))):270===j?(c.Aa===Op?(j=d.right+b.x,0===b.x&&m.x>r.x+c.bd&&(j=Math.min(j,Math.max(m.x,j-Qp(c))))):c.Aa===Np?(j=d.left+b.x,0===b.x&&m.x<r.x-c.bd&&(j=Math.max(j,Math.min(m.x,j+Qp(c))))):j=c.xk||c.yk&&1===c.Zh?d.left-c.Ba.x+b.x:d.x+d.width/2+b.x,i?(a.A(l,new F(j,m.y)),l++,a.A(l,new F(j,d.top-e)),l++,a.A(l,new F(j,d.top-e+(b.y+g)/3)),l++,a.A(l,new F(j,d.top-e+2*(b.y+g)/3)),l++,a.A(l,new F(j,d.top-e+(b.y+g))),l++,a.A(l,new F(j,p.y))):(k&&(a.A(l,new F(m.x,d.top-e/2)),l++),a.A(l,new F(j,d.top-e/2)),
l++,a.A(l,new F(j,d.top-e+b.y+(k?g/2:g))),l++,k&&a.A(l,new F(p.x,a.p(l-1).y)))):w.m("Invalid angle "+j);a.si()}}};w.g(kq,"relativePoint",kq.prototype.AH);w.defineProperty(kq,{AH:"relativePoint"},t("zq"),function(a){this.zq.set(a)});function lq(){this.Im=[]}
function ak(a){var b=new lq,c;if("string"===typeof a)c=(new DOMParser).parseFromString(a,"text/xml");else if(a instanceof Document)c=a.implementation.createDocument("http://www.w3.org/2000/svg","svg",n),c.appendChild(c.importNode(a.documentElement,h));else return n;a=c.getElementsByTagName("svg");if(0===a.length)return n;for(var d=a[0],e=c.getElementsByTagName("linearGradient"),g=c.getElementsByTagName("radialGradient"),a=0;a<e.length;a++){for(var i=e[a],j=bk(Be,Ee,{start:Zb,end:$b}),k=i.childNodes,
l=0;l<k.length;l++)if("stop"===k[l].tagName){var m=k[l].getAttribute("stop-color"),p=k[l].getAttribute("offset");-1!==p.indexOf("%")?j.addColorStop(0.01*parseFloat(p),m):j.addColorStop(parseFloat(p),m)}i=i.getAttribute("id");"string"===typeof i&&(b["_brush"+i]=j)}for(a=0;a<g.length;a++){i=g[a];j=bk(Be,Fe,{start:Mb,end:Mb});k=i.childNodes;for(l=0;l<k.length;l++)"stop"===k[l].tagName&&(m=k[l].getAttribute("stop-color"),p=k[l].getAttribute("offset"),-1!==p.indexOf("%")?j.addColorStop(0.01*parseFloat(p),
m):j.addColorStop(parseFloat(p),m));i=i.getAttribute("id");"string"===typeof i&&(b["_brush"+i]=j)}for(e=h;e;){e=q;g=c.getElementsByTagName("use");for(a=0;a<g.length;a++)j=g[a],0===j.childNodes.length&&(i=j.href,i!==f&&(i=c.getElementById(i.baseVal.substring(1)),i!==n&&(i=i.cloneNode(h),i.removeAttribute("id"),k=parseFloat(j.getAttribute("x")),l=parseFloat(j.getAttribute("y")),isNaN(k)&&(k=0),isNaN(l)&&(l=0),m=j.getAttribute("transform"),m===n&&(m=""),j.setAttribute("transform",m+" translate("+k+","+
l+")"),j.appendChild(i),"use"===i.tagName&&(e=h))))}mq(b,d,n);if(0===b.Im.length)return n;if(1===b.Im.length)return b.Im[0];c=new x;for(a=0;a<b.Im.length;a++)c.add(b.Im[a]);return c}
function mq(a,b,c){var d=b.tagName;if(!("g"!==d&&"svg"!==d&&"use"!==d&&"symbol"!==d))for(var d=b.childNodes,e=0;e<d.length;e++){var g=d[e],i=n;if(g.getAttribute!==f){var j=g.getAttribute("transform");switch(g.tagName){case "g":j===n?mq(a,g,n):(i=new x,mq(a,g,i));break;case "use":j===n?mq(a,g,n):(i=new x,mq(a,g,i));break;case "symbol":if("use"!==b.tagName)break;i=new x;mq(a,g,i);var k=i,l=g;l.getAttribute("preserveAspectRatio");l.getAttribute("viewBox");k.scale=1;break;case "path":k=g;i=new V;k=k.getAttribute("d");
"string"===typeof k&&(i.NC=ud(k));break;case "line":var m=g,i=new V,k=parseFloat(m.getAttribute("x1")),l=parseFloat(m.getAttribute("y1")),p=parseFloat(m.getAttribute("x2")),m=parseFloat(m.getAttribute("y2"));isNaN(k)&&(k=0);isNaN(l)&&(l=0);isNaN(p)&&(p=0);isNaN(m)&&(m=0);var r=new dd(hd);i.position=new F(Math.min(k,p),Math.min(l,m));0<(p-k)/(m-l)?(r.la=0,r.ma=0,r.C=Math.abs(p-k),r.D=Math.abs(m-l)):(r.la=0,r.ma=Math.abs(m-l),r.C=Math.abs(p-k),r.D=0);i.Tc=r;break;case "circle":p=g;i=new V;k=parseFloat(p.getAttribute("r"));
l=parseFloat(p.getAttribute("cx"));p=parseFloat(p.getAttribute("cy"));isNaN(k)?i=n:(isNaN(l)&&(l=0),isNaN(p)&&(p=0),m=new dd(pd),m.la=0,m.ma=0,m.C=2*k,m.D=2*k,i.position=new F(l-k,p-k),i.Tc=m);break;case "ellipse":m=g;i=new V;k=parseFloat(m.getAttribute("rx"));l=parseFloat(m.getAttribute("ry"));p=parseFloat(m.getAttribute("cx"));m=parseFloat(m.getAttribute("cy"));isNaN(p)&&(p=0);isNaN(m)&&(m=0);isNaN(k)||isNaN(l)?i=n:(r=new dd(pd),r.la=0,r.ma=0,r.C=2*k,r.D=2*l,i.position=new F(p-k,m-l),i.Tc=r);break;
case "rect":m=g;i=new V;k=parseFloat(m.getAttribute("height"));l=parseFloat(m.getAttribute("width"));p=parseFloat(m.getAttribute("x"));m=parseFloat(m.getAttribute("y"));isNaN(k)||isNaN(l)?i=n:(isNaN(p)&&(p=0),isNaN(m)&&(m=0),r=new dd(od),r.la=0,r.ma=0,r.C=l,r.D=k,i.position=new F(p,m),i.Tc=r);break;case "polygon":i=nq(g);break;case "polyline":i=nq(g)}if(i!==n){i instanceof V&&(k=parseFloat(oq(a,g,"stroke-width")),isNaN(k)||(i.eb=k),k=oq(a,g,"stroke-linecap"),k!==n&&(i.vE=k),k=oq(a,g,"fill"),k!==n&&
-1!==k.indexOf("url")?(k=k.substring(k.indexOf("#")+1,k.length-1),k=a["_brush"+k],i.fill=k instanceof Be?k:"black"):i.fill=k===n?"black":"none"===k?n:k,g=oq(a,g,"stroke"),g!==n&&-1!==g.indexOf("url")?(k=g.substring(g.indexOf("#")+1,g.length-1),k=a["_brush"+k],i.stroke=k instanceof Be?k:"black"):i.stroke="none"===g?n:g,i.hz=h);if(j!==n){j=j.split(")");k=h;for(g=0;g<j.length;g++)/\(.*[^0-9\.,\s-]/.test(j[g])&&(k=q),/\(.*[0-9]-[0-9]/.test(j[g])&&(k=q);if(k)for(g=j.length-1;0<=g;g--)if(l=j[g],""!==l)switch(p=
l.indexOf("("),k=l.substring(0,p).replace(/\s*/,""),p=l.substring(p+1).split(/\s*[\s,]\s*/),k){case "rotate":pq(a,i,p);break;case "translate":k=i;l=parseFloat(p[0]);p=parseFloat(p[1]);if(!isNaN(l)||!isNaN(p))m=k.position.copy(),isNaN(m.x)&&(m.x=0),isNaN(m.y)&&(m.y=0),k.position=new F(l+m.x,p+m.y);break;case "scale":qq(a,i,p);break;case "skewX":rq(a,i,parseFloat(p[0])*Math.PI/180);break;case "skewY":sq(a,i,parseFloat(p[0])*Math.PI/180);break;case "matrix":tq(a,i,p)}}if(i instanceof x){j=i.elements.l;
k=g=0;l=i.position.copy();isNaN(l.x)&&(l.x=0);isNaN(l.y)&&(l.y=0);for(;j.next();)p=j.value.position.copy(),isNaN(p.x)&&(p.x=0),isNaN(p.y)&&(p.y=0),p.x<g&&(g=p.x),p.y<k&&(k=p.y);l.x+=g;l.y+=k;i.position=l}c===n?a.Im.push(i):c.add(i)}}}}
function tq(a,b,c){var d=parseFloat(c[0]),e=parseFloat(c[1]),g=parseFloat(c[2]),i=parseFloat(c[3]),j=parseFloat(c[4]),k=parseFloat(c[5]);if(!isNaN(d+e+g+i+j+k)){var l=b.position.copy();isNaN(l.x)&&(l.x=0);isNaN(l.y)&&(l.y=0);if(b instanceof V){c=b.Tc.copy();if(c.type===od)c=a.mr(c);else if(c.type===pd)c=uq(c);else if(c.type===hd){c.type=ed;var a=new fd(c.la,c.ma),m=new Bd(rd,c.C,c.D);a.za.add(m);c.sb.add(a)}c.offset(l.x,l.y);c.transform(d,e,g,i,j-l.x,k-l.y);a=c.normalize();b.Tc=c;l.x-=a.x;l.y-=a.y;
b.position=l}else{for(b=b.elements.l;b.next();)d=b.value.position.copy(),d.x+=l.x,d.y+=l.y,b.value.position=d;for(b.reset();b.next();)tq(a,b.value,c);for(b.reset();b.next();)d=b.value.position.copy(),d.x-=l.x,d.y-=l.y,b.value.position=d}}}
function pq(a,b,c){var d=parseFloat(c[0]),e=parseFloat(c[1]),g=parseFloat(c[2]);isNaN(e)&&(e=0);isNaN(g)&&(g=0);if(!isNaN(d)){var i=d*Math.PI/180,j=b.position.copy();isNaN(j.x)&&(j.x=0);isNaN(j.y)&&(j.y=0);if(b instanceof V){c=b.Tc.copy();c.type===pd?c=uq(c):c.type===od&&(c=a.mr(c));if(c.type===ed)c.rotate(d,e-j.x,g-j.y),g=c.normalize(),b.Tc=c,j.x-=g.x,j.y-=g.y,b.position=j;else{var d=c.la-e+j.x,k=c.ma-g+j.y,l=c.C-e+j.x,m=c.D-g+j.y,a=d*Math.cos(i)-k*Math.sin(i)+e-j.x,d=k*Math.cos(i)+d*Math.sin(i)+
g-j.y,e=l*Math.cos(i)-m*Math.sin(i)+e-j.x,g=m*Math.cos(i)+l*Math.sin(i)+g-j.y,l=Math.min(a,e),m=Math.min(d,g);c.la=a-l;c.ma=d-m;c.C=e-l;c.D=g-m;j.x+=l;j.y+=m;b.position=j;b.Tc=c}b.fill instanceof Be&&(j=b.fill.copy(),c=Math.atan((0.5-j.start.y)/(0.5-j.start.x)),c+=i,j.start=new H((1-Math.cos(c))/2,(1-Math.sin(c))/2),j.end=new H((1+Math.cos(c))/2,(1+Math.sin(c))/2),b.fill=j);b.stroke instanceof Be&&(j=b.stroke.copy(),c=Math.atan((0.5-j.start.y)/(0.5-j.start.x)),c+=i,j.start=new H((1-Math.cos(c))/2,
(1-Math.sin(c))/2),j.end=new H((1+Math.cos(c))/2,(1+Math.sin(c))/2),b.stroke=j)}else{for(b=b.elements.l;b.next();)i=b.value.position.copy(),i.x+=j.x,i.y+=j.y,b.value.position=i;for(b.reset();b.next();)pq(a,b.value,c);for(b.reset();b.next();)i=b.value.position.copy(),i.x-=j.x,i.y-=j.y,b.value.position=i}}}
function qq(a,b,c){var d=parseFloat(c[0]),e=parseFloat(c[1]);if(!isNaN(d)){isNaN(e)&&(e=d);var g=b.position.copy();isNaN(g.x)&&(g.x=0);isNaN(g.y)&&(g.y=0);if(b instanceof V)a=b.Tc.copy(),g.x*=d,g.y*=e,b.position=g,a.scale(d,e),b.Tc=a;else{for(b=b.elements.l;b.next();)d=b.value.position.copy(),d.x+=g.x,d.y+=g.y,b.value.position=d;for(b.reset();b.next();)qq(a,b.value,c);for(b.reset();b.next();)d=b.value.position.copy(),d.x-=g.x,d.y-=g.y,b.value.position=d}}}
function rq(a,b,c){if(!isNaN(c)){var d=b.position.copy();isNaN(d.x)&&(d.x=0);isNaN(d.y)&&(d.y=0);if(b instanceof V){var e=b.Tc.copy();if(e.type===od)e=a.mr(e);else if(e.type===pd)e=uq(e);else if(e.type===hd){e.type=ed;var a=new fd(e.la,e.ma),g=new Bd(rd,e.C,e.D);a.za.add(g);e.sb.add(a)}e.offset(d.x,d.y);e.transform(1,0,Math.tan(c),1,-d.x,-d.y);c=e.normalize();b.Tc=e;d.x-=c.x;d.y-=c.y;b.position=d}else{for(b=b.elements.l;b.next();)e=b.value.position.copy(),e.x+=d.x,e.y+=d.y,b.value.position=e;for(b.reset();b.next();)rq(a,
b.value,c);for(b.reset();b.next();)e=b.value.position.copy(),e.x-=d.x,e.y-=d.y,b.value.position=e}}}
function sq(a,b,c){if(!isNaN(c)){var d=b.position.copy();isNaN(d.x)&&(d.x=0);isNaN(d.y)&&(d.y=0);if(b instanceof V){var e=b.Tc.copy();if(e.type===od)e=a.mr(e);else if(e.type===pd)e=uq(e);else if(e.type===hd){e.type=ed;var a=new fd(e.la,e.ma),g=new Bd(rd,e.C,e.D);a.za.add(g);e.sb.add(a)}e.offset(d.x,d.y);e.transform(1,Math.tan(c),0,1,-d.x,-d.y);c=e.normalize();b.Tc=e;d.x-=c.x;d.y-=c.y;b.position=d}else{for(b=b.elements.l;b.next();)e=b.value.position.copy(),e.x+=d.x,e.y+=d.y,b.value.position=e;for(b.reset();b.next();)sq(a,
b.value,c);for(b.reset();b.next();)e=b.value.position.copy(),e.x-=d.x,e.y-=d.y,b.value.position=e}}}
function nq(a){var b=q;if("polygon"===a.tagName)b=h;else if("polyline"!==a.tagName)return n;var c=new V,d=a.getAttribute("points"),a=new dd,e=new z(fd),g=d.split(/\s*[\s,]\s*/);if(4>g.length)return n;for(var i,d=new z(Bd),j,k,l=1;l<g.length;l+=2){j=eval(g[l-1]);k=eval(g[l]);if("number"!==typeof j||isNaN(j)||"number"!==typeof k||isNaN(k))return n;1===l?i=new fd(j,k):d.add(new Bd(rd,j,k))}b&&(b=new Bd(rd,i.la,i.ma),b.close(),d.add(b));i.za=d;e.add(i);a.sb=e;i=a.normalize();c.position=new F(-i.x,-i.y);
c.Tc=a;return c}function oq(a,b,c){var d=b.getAttribute(c);"string"!==typeof d&&(d=b.style[c]);return"string"!==typeof d||""===d?(b=b.parentNode,"g"===b.tagName||"use"===b.tagName?oq(a,b,c):n):d}
function uq(a){var b=a.la,c=a.ma,d=a.C,e=a.D,g=Math.abs(d-b)/2,i=Math.abs(e-c)/2,b=Math.min(b,d)+g,c=Math.min(c,e)+i;new F;e=new fd(b,c-i);d=new Bd(Hd);d.Ub=b+hc*g;d.zc=c-i;d.gg=b+g;d.hg=c-hc*i;d.C=b+g;d.D=c;e.za.add(d);d=new Bd(Hd);d.Ub=b+g;d.zc=c+hc*i;d.gg=b+hc*g;d.hg=c+i;d.C=b;d.D=c+i;e.za.add(d);d=new Bd(Hd);d.Ub=b-hc*g;d.zc=c+i;d.gg=b-g;d.hg=c+hc*i;d.C=b-g;d.D=c;e.za.add(d);d=new Bd(Hd);d.Ub=b-g;d.zc=c-hc*i;d.gg=b-hc*g;d.hg=c-i;d.C=b;d.D=c-i;e.za.add(d);a.type=ed;a.sb.add(e);return a}
lq.prototype.mr=function(a){var b=a.la,c=a.ma,d=a.C,e=a.D,g=Math.min(b,d),i=Math.min(c,e),b=Math.abs(d-b),c=Math.abs(e-c),e=new fd(g,i);e.za.add(new Bd(rd,g+b,i));e.za.add(new Bd(rd,g+b,i+c));e.za.add((new Bd(rd,g,i+c)).close());a.type=ed;a.sb.add(e);return a};window.go=ea;ea.version="1.1.2"; })(window);
